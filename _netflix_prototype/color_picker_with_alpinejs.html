---
layout: library_app_frame
name: "3.0 | CSS ROOT"
uri: "root/index (authenticated & access)"
homeActive: true
---

<script src="https://cdn.jsdelivr.net/npm/alpinejs@2.x.x/dist/alpine.min.js" defer></script>
<div x-data="colorPicker()" class="p_4">
    <!-- Example of color input and text input binding -->
    <template x-for="color in colors" :key="color.name">
        <div class="question font_ui">
            <label :for="'input_' + color.name" class="label-holder ... ">
                <span x-text="color.name + ' Color'"></span>
            </label>
            <div class="input-holder ...">
                <input :id="'input_' + color.name" type="color" x-model="color.hex" @input="updateColor(color)">
                <input :id="'input_' + color.name + 'Hex'" type="text" x-model="color.hex" @input="updateColor(color)">
            </div>
            <div class="font-size_down">
                <span class="opacity_7 font_italic m-t_2 block"></span>
            </div>
        </div>
    </template>
<div class="flex flex_row justify_start">
        <!-- Button for clearing color selections -->
        <button x-on:click="clearColors">Clear</button>
        <button x-on:click="generateUrl()">Generate URL</button>
            <!-- Button to generate CSS string -->
            <button x-on:click="generateCssString()">Generate CSS</button>
</div>


        <!-- Code block to display the generated CSS -->
        <pre><code x-text="cssString"></code></pre>

    <!-- Dynamic CSS Update -->

    <input type="text" x-model="generatedUrl" readonly>

</div>
<script>
    function colorPicker() {
        return {
            colors: [
                { name: 'brand', hex: '#000000' },
                { name: 'primary', hex: '#000000' },
                { name: 'secondary', hex: '#000000' },
                { name: 'highlighted', hex: '#000000' },
                { name: 'info', hex: '#000000' },
                { name: 'accent', hex: '#000000' },
            ],

            hexToHSL: function (hex) {
                const r = parseInt(hex.slice(1, 3), 16) / 255;
                const g = parseInt(hex.slice(3, 5), 16) / 255;
                const b = parseInt(hex.slice(5, 7), 16) / 255;

                const max = Math.max(r, g, b);
                const min = Math.min(r, g, b);

                let h, s, l = (max + min) / 2;

                if (max === min) {
                    h = s = 0;
                } else {
                    const d = max - min;
                    s = l > 0.5 ? d / (2 - max - min) : d / (max + min);

                    switch (max) {
                        case r: h = (g - b) / d + (g < b ? 6 : 0); break;
                        case g: h = (b - r) / d + 2; break;
                        case b: h = (r - g) / d + 4; break;
                    }

                    h /= 6;
                }

                h = Math.round(h * 360);
                s = Math.round(s * 100);
                l = Math.round(l * 100);

                return { h, s, l };
            },

            // Update the hex value and calculate HSL
            updateColor: function (color) {
                let hsl = this.hexToHSL(color.hex);
                color.h = hsl.h;
                color.s = hsl.s;
                color.l = hsl.l;
                this.updateCSSVariables(color);
            },

            clearColors: function () {
                this.colors.forEach(color => color.hex = '#000000');
            },
            generatedUrl: '',
            cssString: '',  
            generateUrl: function () {
                const params = new URLSearchParams();
                this.colors.forEach(color => {
                    if (color.hex !== '#000000') {
                        params.set(color.name, color.hex);
                    }
                });
                this.generatedUrl = window.location.href.split('?')[0] + '?' + params.toString();
            },

            initializeColorsFromUrl: function () {
                const params = new URLSearchParams(window.location.search);
                this.colors.forEach(color => {
                    const colorValue = params.get(color.name);
                    if (colorValue) {
                        color.hex = colorValue;
                        this.updateColor(color);
                    }
                });
            },
            updateCSSVariables: function (color) {
                const rootStyle = document.documentElement.style;
                rootStyle.setProperty(`--${color.name}-h`, color.h);
                rootStyle.setProperty(`--${color.name}-s`, color.s + '%');
                rootStyle.setProperty(`--${color.name}-l`, color.l + '%');
            },
            generateCssString: function() {
            this.cssString = ':root {\n';
            this.colors.forEach(color => {
                if (color.hex !== '#000000') {
                    let hsl = this.hexToHSL(color.hex);
                    this.cssString += `  --${color.name}-h: ${hsl.h};\n`;
                    this.cssString += `  --${color.name}-s: ${hsl.s}%;\n`;
                    this.cssString += `  --${color.name}-l: ${hsl.l}%;\n`;
                }
            });
            this.cssString += '}';
        },
        };
    }
    document.addEventListener('alpine:init', () => {
        Alpine.data('colorPicker', colorPicker);
    });
</script>
<style>
    :root {}
</style>