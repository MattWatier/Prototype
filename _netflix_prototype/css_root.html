---
layout: library_app_frame
name: "2.0 | CSS ROOT"
uri: "root/index (authenticated & access)"
homeActive: true
---

<h1>Color Picker</h1>
<div class="color-picker">
  <div class="color-input">
    <label for="br">Brand Color:</label>
    <input type="color" id="br" />
    <input type="text" id="br-text" placeholder="#FFFFFF" />
<button class="clear-btn">Clear</button> 
</div>

  <div class="color-input">
    <label for="p">Primary Color:</label>
    <input type="color" id="p" />
    <input type="text" id="p-text" placeholder="#FFFFFF" />
<button class="clear-btn">Clear</button> 
</div>
  <div class="color-input">
    <label for="s">Secondary Color:</label>
    <input type="color" id="s" />
    <input type="text" id="s-text" placeholder="#FFFFFF" />
<button class="clear-btn">Clear</button> 
</div>
  <div class="color-input">
    <label for="a">Accent Color:</label>
    <input type="color" id="a" />
    <input type="text" id="a-text" placeholder="#FFFFFF" />
<button class="clear-btn">Clear</button> 
</div>
  <div class="color-input">
    <label for="h">Highlighted Color:</label>
    <input type="color" id="h" />
    <input type="text" id="h-text" placeholder="#FFFFFF" />
<button class="clear-btn">Clear</button> 
</div>
  <div class="color-input">
    <label for="i">Info Color:</label>
    <input type="color" id="i" />
    <input type="text" id="i-text" placeholder="#FFFFFF" />
<button class="clear-btn">Clear</button> 
</div>
  <div class="color-input">
    <label for="al">Alert Color:</label>
    <input type="color" id="al" />
    <input type="text" id="al-text" placeholder="#FFFFFF" />
<button class="clear-btn">Clear</button> 
</div>
  <div class="color-input">
    <label for="w">Warning Color:</label>
    <input type="color" id="w" />
    <input type="text" id="w-text" placeholder="#FFFFFF" />
<button class="clear-btn">Clear</button> 
</div>
  <div class="color-input">
    <label for="su">Success Color:</label>
    <input type="color" id="su" />
    <input type="text" id="su-text" placeholder="#FFFFFF" />
<button class="clear-btn">Clear</button> 
</div>
  <button id="update-query-string">Submit</button>
  <button id="apply-cssvar-colors">Apply Colors</button>
</div>
<div class="output">
  <h2>CSS Variables:</h2>
  <pre id="css-variables"></pre>
</div>

<script>
 
document.addEventListener('DOMContentLoaded', function () {
    const colorInputs = document.querySelectorAll('.color-input input[type=color]');
    const textInputs = document.querySelectorAll('.color-input input[type=text]');
    const cssVariablesOutput = document.getElementById('css-variables');
    const updateRootCSSVarButton = document.getElementById('apply-cssvar-colors');
    const updateQueryStringButton = document.getElementById('update-query-string');

    function isValidHexColor(hex) {
        return /^#([0-9A-F]{3}){1,2}$/i.test(hex);
    }

    function syncInputs(colorInputId, textInputId) {
        const colorInput = document.getElementById(colorInputId);
        const textInput = document.getElementById(textInputId);
        if (isValidHexColor(textInput.value)) {
            colorInput.value = textInput.value;
        } else {
            textInput.value = colorInput.value;
        }
        updateCSSVariables();
    }

    const colorMap = {
    'br': 'brand',
    'p': 'primary',
    's': 'secondary',
    'a': 'accent',
    'h': 'highlighted',
    'i': 'info',
    'al': 'alert',
    'w': 'warning',
    'su': 'success'
};

const queryParams = new URLSearchParams(window.location.search);
    colorInputs.forEach(input => {
        const colorKey = colorMap[input.id];
        if (colorKey && queryParams.has(colorKey)) {
            input.value = queryParams.get(colorKey);
            const textInput = document.getElementById(input.id + '-text');
            textInput.value = input.value;
        }
    });
    updateCSSVariables();

function updateCSSVariables() {
    let cssText = '';
    colorInputs.forEach(input => {
        // Extract the key part of the ID (e.g., 'br' from 'br')
        const colorKey = input.id;

        // Check if the colorKey is in the colorMap, else skip
        if (!(colorKey in colorMap)) {
            console.error('Color key not found in colorMap:', colorKey);
            return; // Skip this iteration
        }

        const propertyName = colorMap[colorKey];
        const colorValue = input.value;
        const hslColor = hexToHSL(colorValue);

        cssText += '--' + propertyName + '-h: ' + hslColor.h + '; --' + propertyName + '-s: ' + hslColor.s + '%; --' + propertyName + '-l: ' + hslColor.l + '%;\n';
    });
    cssVariablesOutput.textContent = cssText;
};
function updateRootStyle(cssText) {
    const rootStyle = document.styleSheets[0].cssRules[0].style;
    const cssVariables = cssText.split(';');

    cssVariables.forEach(variable => {
        if (variable.trim() === '') return;
        const [key, value] = variable.split(':').map(item => item.trim());
        rootStyle.setProperty(key, value);
    });
};

function updateStyleTag(cssText) {
    const styleTag = document.getElementById('dynamic-styles');
    let newStyles = ':root {' + cssText + '}';
    styleTag.innerHTML = newStyles;
}
document.querySelectorAll('.clear-btn').forEach(clearButton => {
        clearButton.addEventListener('click', function() {
            const parentDiv = clearButton.parentElement;
            const colorInput = parentDiv.querySelector('input[type=color]');
            const textInput = parentDiv.querySelector('input[type=text]');
            
            // Reset the color and text inputs
            colorInput.value = '';
            textInput.value = '';

            // Optionally, update CSS variables and query string if needed
            updateCSSVariables();
        });
    });
updateQueryStringButton.addEventListener('click', function() {
    const queryParams = new URLSearchParams();
    
    colorInputs.forEach(input => {
        const colorKey = colorMap[input.id];
        if (colorKey) {
            queryParams.set(colorKey, input.value);
        }
    });

    // Construct the new URL with the query string
    const newUrl = window.location.protocol + "//" + window.location.host + window.location.pathname + '?' + queryParams.toString();
    
    // Update the URL in the browser without reloading the page
    window.history.pushState({path: newUrl}, '', newUrl);

});

updateRootCSSVarButton.addEventListener('click', function() {
    const cssText = cssVariablesOutput.textContent;
    updateStyleTag(cssText);
});
    // Updated event listeners for color inputs
    colorInputs.forEach(input => {
        input.addEventListener('input', function() {
            syncInputs(input.id, input.id + '-text');
        });
    });

    textInputs.forEach(input => {
        input.addEventListener('change', function() {
            if (isValidHexColor(input.value)) {
                syncInputs(input.id.replace('-text', ''), input.id);
            } else {
                alert('Invalid color code. Please enter a valid hex color code.');
            }
        });
    });
});

    function hexToHSL(hex) {
      const r = parseInt(hex.slice(1, 3), 16) / 255;
      const g = parseInt(hex.slice(3, 5), 16) / 255;
      const b = parseInt(hex.slice(5, 7), 16) / 255;

      const max = Math.max(r, g, b);
      const min = Math.min(r, g, b);

      let h,
        s,
        l = (max + min) / 2;

      if (max === min) {
        h = s = 0;
      } else {
        const d = max - min;
        s = l > 0.5 ? d / (2 - max - min) : d / (max + min);

        switch (max) {
          case r:
            h = (g - b) / d + (g < b ? 6 : 0);
            break;
          case g:
            h = (b - r) / d + 2;
            break;
          case b:
            h = (r - g) / d + 4;
            break;
        }

        h /= 6;
      }

      h = Math.round(h * 360);
      s = Math.round(s * 100);
      l = Math.round(l * 100);

      return { h, s, l };
    }
</script>
<style id="dynamic-styles">
    /* Your existing styles */
  </style>
<style>
  body {
    font-family: Arial, sans-serif;
    margin: 0;
    padding: 20px;
    background-color: #f4f4f4;
  }

  h1 {
    text-align: center;
  }

  .color-picker {
    background-color: #fff;
    border: 1px solid #ddd;
    padding: 20px;
    border-radius: 5px;
    box-shadow: 0 0 5px rgba(0, 0, 0, 0.2);
  }

  .color-input {
    display: flex;
    align-items: center;
    margin-bottom: 10px;
  }

  label {
    margin-right: 10px;
    font-weight: bold;
  }

  .output {
    margin-top: 20px;
    background-color: #fff;
    padding: 20px;
    border-radius: 5px;
    box-shadow: 0 0 5px rgba(0, 0, 0, 0.2);
  }

  pre {
    white-space: pre-wrap;
  }
  :root{}
</style>
