(window.webpackJsonp=window.webpackJsonp||[]).push([["code-editor"],{1016:function(e,t,s){"use strict";var i=s(40),r=s(41),a=s.n(r),n=s(59),o=s(279),l=s(99),d=s(443),p=s(2739),c=s(456),u=s(1017),h=s(45);const b=e=>"DesignEditorsUI.previews.previewDropdown."+e,m={savePreviewerWindow:u.a};class f extends i.PureComponent{constructor(...e){super(...e);this.openPreviewer=e=>{const{savePreviewerWindow:t}=this.props;t(window.open(e))}}renderLink(e,t){return Object(h.jsx)(d.a,{onClick:()=>this.openPreviewer(e),rel:"noopener noreferrer",children:Object(h.jsx)(o.a,{message:b(`buttons.${t}.label`)})})}render(){return Object(h.jsx)(p.a,{buttonSize:"extra-small",menuWidth:"auto",buttonUse:"secondary",buttonText:Object(l.a)(b("title.label")),children:Object(h.jsxs)(c.a,{children:[this.renderLink(this.props.url,"livePreview"),this.renderLink(this.props.sharableUrl,"sharablePreview")]})})}}f.propTypes={url:a.a.string.isRequired,sharableUrl:a.a.string,savePreviewerWindow:a.a.func};t.a=Object(n.connect)(null,m)(f)},1316:function(e,t,s){"use strict";var i=s(287),r=s.n(i),a=s(353);const n=r()(a.a).withConfig({displayName:"H3",componentId:"sc-5sjy26-0"})([""]);n.propTypes=a.a.propTypes;n.defaultProps=Object.assign({},a.a.defaultProps,{tagName:"h3"});n.displayName="H3";t.a=n},1488:function(e,t,s){"use strict";s.r(t);var i=s(40),r=s(59),a=s(41),n=s.n(a),o=s(239),l=s(2678),d=s(78),p=s(1489),c=s(45);function u(){return function(e,t){const s=t.assetId||o.d(e),i=Object.assign({},t,{layoutId:s}),r=l.f(e,i);return{generatedTemplateId:r&&r.generatedTemplateId}}}const h={};class b extends i.Component{render(){const{generatedTemplateId:e}=this.props;return e?Object(c.jsx)(p.default,{assetType:d.LAYOUT,assetId:e}):null}}b.propTypes={generatedTemplateId:n.a.number};t.default=Object(r.connect)(u,h)(b)},1489:function(e,t,s){"use strict";s.r(t);var i=s(59),r=s(2716),a=s(2612),n=s(45);const o={fetchTemplate:r.c};function l(e){return Object(n.jsx)(a.a,Object.assign({},e))}t.default=Object(i.connect)(null,o)(l)},1500:function(e,t,s){"use strict";s.r(t);var i=s(59),r=s(2716),a=s(2612),n=s(45);const o={fetchTemplate:r.d};function l(e){return Object(n.jsx)(a.a,Object.assign({},e))}t.default=Object(i.connect)(null,o)(l)},2612:function(e,t,s){"use strict";var i=s(40),r=s(41),a=s.n(r),n=s(59),o=s(1148),l=s.n(o),d=s(2594),p=s(279),c=s(99),u=s(604),h=s(2734),b=s(2735),m=s(610),f=s(743),I=s(260),O=s(1487),j=s(55),g=s(219),v=s(262),y=s(437),C=s(691),R=s(83),T=s(88),E=s(84),w=s(2749),x=s(603),L=s(436),q=s(281),S=s(78),P=s(365),H=s(442),N=s(443),F=s(773),A=s(434),D=s(2733),U=s(1490),_=s(63),k=s(423),B=s(232);function M(e){return(t,s)=>{const i=s(),{search:r}=i.routing.locationBeforeTransitions,a=r===B.a;e!==!!e&&(e=!Object(k.b)(i));return t({type:_.CODE_EDITOR_TOGGLE_COMPILED_SPLIT_SCREEN,data:{isOpen:e,isOverriden:a}})}}var V=s(371),G=s(485),z=s(490),K=s(479),$=s(458),Y=s(45);const W=e=>"DesignEditorsUI.shared.toolbars.buttons.toggleCompiledHubL."+e;function Z(e,t){return{showCompiledSplitScreen:Object(k.b)(e)||Object(V.g)(e,t),isCompiledSplitScreenAllowed:Object(k.a)(e)}}const J={toggleCompiledSplitScreen:M};class X extends i.PureComponent{render(){return this.props.isCompiledSplitScreenAllowed?Object(Y.jsxs)("div",{className:this.props.className,children:[Object(Y.jsx)(z.a,{children:Object(Y.jsxs)(G.a,{children:[Object(Y.jsx)(q.a,{message:W("label")})," ",Object(Y.jsx)(K.a,{size:"xxs",tooltipPlacement:"top",title:Object(Y.jsx)(q.a,{message:W("description")})})]})}),Object(Y.jsx)($.a,{checked:this.props.showCompiledSplitScreen,onChange:this.props.toggleCompiledSplitScreen,size:"extra-small"})]}):null}}X.propTypes={className:a.a.string,showCompiledSplitScreen:a.a.bool.isRequired,isCompiledSplitScreenAllowed:a.a.bool.isRequired,toggleCompiledSplitScreen:a.a.func.isRequired};var Q=Object(n.connect)(Z,J)(X),ee=s(1014),te=s(1015),se=s(2763),ie=s(2716),re=s(419),ae=s(372);function ne(e){return{request:t=>({type:e,templateId:t}),receive:(t,s,i)=>({type:e,templateId:t,template:s,templateBuffer:i}),error:(t,s)=>({type:e,templateId:t,error:s})}}function oe(e){return(t,s)=>({type:e,templateId:t,template:s})}function le(e){const{id:t}=e,s=oe(_.TEMPLATE_SAVE_BY_PATH_REQUEST),{receive:i,error:r}=ne(_.TEMPLATE_SAVE_BY_PATH);return(e,a)=>{const n=a(),{isSaving:o,isPublishing:l}=ae.a(n);if(o||l)return null;const d=ae.b(n,{templateId:t});e(s(t,d));return re.c(d.path,d).then(s=>{e(i(t,s))}).catch(s=>{e(r(t,s))})}}var de=s(221),pe=s(2714),ce=s(367),ue=s(429),he=s(202),be=s(1491);function me(e){return e&&e.templateType===g.b.css.id||e.templateType===g.b.js.id}function fe(e){return e&&g.a[e.templateType]&&2===g.a[e.templateType].categoryId}function Ie(){const e=ae.d();return function(t,s){const{portal_id:i}=t.auth.portal,{templateId:r,revisionId:a}=s,n=e(t,s),o=Object(pe.o)(t,{fileId:r}),l=ae.b(t,s),d=!(!l||!l.meta)&&l.meta.hasBufferedChanges,p=l&&!me(l)?Object(se.b)(l,i,a):"",c=l&&!me(l)?Object(se.a)(i,{},l,n):"",u=ue.b(t,{assetId:r}),h=Object(de.w)(t);return{templateId:r,templateBuffer:l,parentLayoutId:l&&l.generatedFromLayoutId,previewUrl:p,hasBufferedChanges:d,isGlobalGroup:l&&l.templateType===g.b.global_group.id,isPublishDisabled:h||n.isReadOnly||!!s.revisionId||!l||!d||!(!u||!u.length),isReadOnly:h||n.isReadOnly||!!a,requestStatus:ae.a(t),editorErrors:u,sharablePreviewUrl:c,file:o}}}const Oe={openDrawer:ce.e,publishTemplate:ie.h,stageChanges:le};function je(e){class t extends i.Component{constructor(e){super(e);this.shouldConfirmPublish=()=>fe(this.props.templateBuffer)?Object(re.e)(this.props.templateBuffer).then(e=>{if(e.length>0){return{shouldConfirm:!0,version:e[0].categoryErrors.newVersion}}return{shouldConfirm:!1}}).catch(e=>{console.debug("Error validating",e);return{shouldConfirm:!1}}):Promise.resolve({shouldConfirm:!1});this.onPublish=()=>{const{isPublishDisabled:e,templateBuffer:t,publishTemplate:s,templateId:i}=this.props;e||t&&this.shouldConfirmPublish().then(({shouldConfirm:e,version:r})=>{e?this.setState({publishConfirmModalOpen:!0,emailVersion:r}):s(i,t)})};this.onStageChanges=()=>{this.props.stageChanges(this.props.file)};this.state={publishConfirmModalOpen:!1,emailVersion:"THREE"}}renderPublishConfirmModal(){if(!this.state.publishConfirmModalOpen)return null;const{templateBuffer:e,publishTemplate:t,templateId:s}=this.props;return Object(Y.jsx)(be.a,{onConfirm:()=>{t(s,e);this.setState({publishConfirmModalOpen:!1})},onCancel:()=>{this.setState({publishConfirmModalOpen:!1})},version:this.state.emailVersion,fileId:s})}render(){const{sessionId:t,isGlobalGroup:s,isPublishDisabled:i,requestStatus:r,parentLayoutId:a,previewUrl:n,openDrawer:o,editorErrors:l,hasBufferedChanges:d,sharablePreviewUrl:p,isReadOnly:c,templateBuffer:u}=this.props;return Object(Y.jsxs)(Y.Fragment,{children:[this.renderPublishConfirmModal(),Object(Y.jsx)(e,{sessionId:t,onPublish:this.onPublish,onStageChanges:this.onStageChanges,isGlobalGroup:s,isPublishDisabled:i,requestStatus:r,parentLayoutId:a,previewUrl:n,openDrawer:o,editorErrors:l,hasBufferedChanges:d,sharablePreviewUrl:p,isReadOnly:c,showEmailFeedback:fe(u)&&u.isEnabledForEmailV3Rendering})]})}}t.displayName=`WithConnectedToolbar(${e.displayName||e.name||""})`;t.propTypes={templateId:f.a.templateId.isRequired,revisionId:a.a.number,sessionId:f.a.sessionId.isRequired,templateBuffer:a.a.instanceOf(I.a),requestStatus:a.a.object.isRequired,isGlobalGroup:a.a.bool,isPublishDisabled:a.a.bool.isRequired,parentLayoutId:a.a.number,publishTemplate:a.a.func.isRequired,previewUrl:a.a.string.isRequired,openDrawer:a.a.func.isRequired,editorErrors:a.a.arrayOf(a.a.instanceOf(he.a)),hasBufferedChanges:a.a.bool,sharablePreviewUrl:a.a.string,isReadOnly:a.a.bool.isRequired,stageChanges:a.a.func,file:a.a.object.isRequired};return Object(n.connect)(Ie,Oe)(t)}var ge=s(1016),ve=s(1005);const ye=e=>"DesignEditorsUI.shared.toolbars."+e;class Ce extends i.Component{renderPreviewLink(){const{previewUrl:e,sharablePreviewUrl:t}=this.props;return e&&t?Object(Y.jsx)(ge.a,{url:e,sharableUrl:t}):null}renderLeftContent(){const{isGlobalGroup:e,parentLayoutId:t}=this.props;if(t){const s=e?S.GLOBAL_GROUP:S.LAYOUT,i=e?"globalGroup":"template";return Object(Y.jsx)(F.a,{className:"m-all-0 p-all-0",children:Object(Y.jsx)(H.a,{size:"extra-small",to:Object(P.e)(s,t),use:"transparent",children:Object(Y.jsx)(p.a,{message:ye("buttons.backToParent."+i)})})})}return Object(Y.jsxs)(A.a,{align:"center",justify:"start",className:"control-group",children:[!this.props.isReadOnly&&Object(Y.jsx)(U.a,{sessionId:this.props.sessionId,className:"control-item"}),Object(Y.jsx)(Q,{className:"control-item",assetId:this.props.sessionId}),Object(Y.jsx)(ee.a,{requestStatus:this.props.requestStatus,className:"control-item"})]})}renderRightContent(){const{editorErrors:e,hasBufferedChanges:t,isPublishDisabled:s,onPublish:i,openDrawer:r,showEmailFeedback:a}=this.props;return Object(Y.jsxs)(A.a,{align:"center",justify:"end",children:[a&&Object(Y.jsx)(ve.a,{variant:"toolbar"}),this.renderPreviewLink(),Object(Y.jsx)(te.a,{openDrawer:r,errors:e,hasBufferedChanges:t,children:Object(Y.jsx)(N.a,{disabled:s,onClick:i,"data-test-id":"publish-changes-button",size:"extra-small",use:"primary",children:Object(Y.jsx)(q.a,{message:ye("buttons.publish")})})})]})}render(){return Object(Y.jsx)(D.a,{leftContent:this.renderLeftContent(),rightContent:this.renderRightContent(),previewUrl:this.props.previewUrl,className:"code-editor-toolbar"})}}Ce.propTypes={sessionId:f.a.sessionId.isRequired,requestStatus:a.a.object.isRequired,isGlobalGroup:a.a.bool,isPublishDisabled:a.a.bool.isRequired,isReadOnly:a.a.bool.isRequired,onPublish:a.a.func.isRequired,parentLayoutId:a.a.number,previewUrl:a.a.string.isRequired,openDrawer:a.a.func.isRequired,editorErrors:a.a.arrayOf(a.a.instanceOf(he.a)),hasBufferedChanges:a.a.bool,sharablePreviewUrl:a.a.string,showEmailFeedback:a.a.bool};var Re=je(Ce),Te=s(58),Ee=s(73),we=s(600),xe=s(89);const Le=a.a.oneOf(Object.values(xe||{}));var qe=s(425),Se=s(1053),Pe=s.n(Se);const He=Object(ae.d)(),Ne=(()=>{const e={};return t=>{null==e[t]&&(e[t]=0);return{get id(){return e[t]},increment:()=>++e[t]}}})();function Fe(e,t){const{request:s,receive:i,error:r}=Fe,a=Ne(`${e}:${t}`),n=a.increment();return(o,l)=>{const d=l(),p={templateId:e,assetId:e,revisionId:t},c=Object(de.s)(d);if(!c)return Promise.reject(new Error("Portal ID not found"));const u=Object(ae.b)(d,p),h=He(d,p),b=Object(se.a)(c,{},u,h),m=[e,t,b];o(s(...m));return Pe.a.get(b).then(e=>{n===a.id&&o(i(...m,e))}).catch(e=>{n===a.id&&o(r(...m,e))})}}Fe.request=(e,t,s)=>({type:_.COMPILED_HUBL_FETCH,assetId:e,revisionId:t,url:s});Fe.receive=(e,t,s,i)=>({type:_.COMPILED_HUBL_FETCH,assetId:e,revisionId:t,url:s,code:i});Fe.error=(e,t,s,i)=>({type:_.COMPILED_HUBL_FETCH,assetId:e,revisionId:t,url:s,error:i});var Ae=s(26),De=s.n(Ae);const Ue=(e,t)=>{const{assetId:s,revisionId:i}=t,r="",a=i?["compiledHubL","byAsset",s,"revisions",i]:["compiledHubL","byAsset",s,"code"];return De.a.getIn(e,a,r)},_e=(e,t)=>{const{assetId:s}=t,i=xe.PENDING,r=["compiledHubL","byAsset",s,"compiledHubLFetchRequestStatus"];return De.a.getIn(e,r,i)};var ke=s(375),Be=s(370),Me=s(1493),Ve=s(2583);const Ge=Object.freeze({"text/x-hubl-css":"text/css","text/x-hubl-html":"text/html","text/x-hubl-javascript":"text/javascript"}),ze={javascript:!0,"text/javascript":!0};function Ke(e,t){const s=Object(ae.b)(e,t),i=s&&s.updated||0;return{compiledHubL:Ue(e,t),compiledHubLFetchRequestStatus:_e(e,t),highlightedLines:Object(ke.a)(t.location),templateTimestamp:i}}const $e={processESLintAnnotations:qe.a,fetchForCodedFile:Fe,pushRoute:Be.a},Ye=[];class We extends i.Component{constructor(...e){super(...e);this.fetchCompiledHubL=Object(Ee.debounce)(()=>this.props.fetchForCodedFile(this.props.assetId,this.props.revisionId),we.a);this.onESLint=e=>{this.props.processESLintAnnotations(this.props.assetId,this.sessionId,e)};this.handleGutterClick=({lineNumber:e,gutterId:t,event:s})=>{if("CodeMirror-linenumbers"!==t)return;const{location:i,highlightedLines:r,pushRoute:a}=this.props,{from:n}=r;e+=1;let o="";if(s.shiftKey&&n&&n!==e){const[t,s]=e>n?[n,e]:[e,n];o=`#R${t}-R${s}`}else n!==e&&(o="#R"+e);a(Object.assign({},i,{hash:o}))}}componentDidMount(){this.props.templateTimestamp&&this.fetchCompiledHubL()}shouldComponentUpdate(e){return e.compiledHubLFetchRequestStatus,this.props.compiledHubLFetchRequestStatus,e.assetId!==this.props.assetId||e.revisionId!==this.props.revisionId||e.sessionId!==this.props.sessionId||e.mode!==this.props.mode||e.compiledHubL!==this.props.compiledHubL||e.highlightedLines!==this.props.highlightedLines||e.extraKeys!==this.props.extraKeys||e.templateTimestamp!==this.props.templateTimestamp}componentDidUpdate(e){e.templateTimestamp===this.props.templateTimestamp&&e.assetId===this.props.assetId&&e.revisionId===this.props.revisionId||this.fetchCompiledHubL()}get sessionId(){return this.props.assetId+":compiled"}get mode(){return Ge[this.props.mode]}get enableEsLint(){return ze[this.mode]||!1}get range(){const{editorSide:e,to:t,from:s}=this.props.highlightedLines;if("R"===e&&this.props.compiledHubL&&s){if(this._range&&this._range[0].from===s&&this._range[0].to===t)return this._range;this._range=[{from:s,to:t}];return this._range}return Ye}render(){const{mode:e,enableEsLint:t,range:s,sessionId:i}=this;return Object(Y.jsx)(Ve.a,{className:"code-editor__codemirror is--linenumbers-clickable",codemirrorType:e,controlled:!0,enableHublValidation:!1,enableEsLint:t,scrollHighlightIntoView:!0,onEsLint:t?this.onESLint:void 0,onGutterClick:this.handleGutterClick,highlightLines:s,extraKeys:this.props.extraKeys,mode:e,readOnly:!0,sessionId:i,value:this.props.compiledHubL})}}We.propTypes={assetId:f.a.assetId.isRequired,revisionId:a.a.number,sessionId:f.a.sessionId,templateTimestamp:a.a.number.isRequired,mode:a.a.string,compiledHubL:a.a.string,compiledHubLFetchRequestStatus:Le,extraKeys:a.a.object,processESLintAnnotations:a.a.func.isRequired,fetchForCodedFile:a.a.func.isRequired,location:a.a.object.isRequired,highlightedLines:a.a.object.isRequired,pushRoute:a.a.func.isRequired};var Ze=Object(Te.compose)(Object(Me.a)(!0),Object(n.connect)(Ke,$e))(We),Je=s(2657),Xe=s(601);const Qe={"Cmd-S":j.a,"Ctrl-S":j.a};function et({assetType:e,editorLoaded:t,enableHublValidation:s,fileType:r,hasAccess:a,userHasReadAccessOnly:n,isAvailableForNewContent:o,isLocked:l,isReadOnly:d,label:p,onChange:c,onHublValidation:u,onHublValidationFail:h,parentThemeFolderId:b,publishTemplate:m,revisionId:f,saveTemplate:I,sessionId:O,showCompiledSplitScreen:j,templateId:g,templatePath:q,templateSource:S,templateType:P}){const H=Object(i.useMemo)(()=>({isAvailableForNewContent:o,templateId:q?null:g,templatePath:q,templateType:P}),[o,g,q,P]);Object(i.useEffect)(()=>{t(g)},[t,g]);const N=()=>{if(!j)return null;const e=Xe.a[r||v.TXT];return Object(Y.jsx)(Ze,{assetId:g,revisionId:f,extraKeys:Qe,mode:e,sessionId:O})},F=()=>{const t=Xe.a[r||v.TXT];return Object(Y.jsx)(Je.a,{assetType:e,isReadOnly:d,hasAccess:a,userHasReadAccessOnly:n,isLocked:l,assetId:g,revisionId:f,fileType:r,fileName:p,parentThemeFolderId:b,sessionId:O,source:S,mode:t,onChange:c,enableHublValidation:s,hublValidationOptions:H,onHublValidation:u,onHublValidationFail:h,templateType:P,templatePath:q})},A={[y.b.COMMAND]:{[y.a.S]:new C.a({handler:I})},[y.b.COMMAND_SHIFT]:{[y.a.P]:new C.a({handler:m})}},D=j?new R.a({value:50,units:E.PERCENT}):new R.a({value:0}),U=new R.a({value:j?T.b:0}),_=j?new R.a({value:50,units:E.PERCENT}):null,k=new R.a({value:T.b});return Object(Y.jsxs)(L.a,{className:"code-editor",keybindingConfig:A,children:[Object(Y.jsx)(Re,{templateId:g,revisionId:f,sessionId:O}),Object(Y.jsxs)(w.a,{className:"code-editor-panes",direction:"vertical",children:[Object(Y.jsx)(x.a,{className:"code-editor-pane",defaultSize:_,minSize:k,children:F()}),Object(Y.jsx)(x.a,{className:"code-editor-pane",defaultSize:D,minSize:U,resizeDisabled:!j,scrollable:!1,children:Object(Y.jsx)("div",{className:"code-editor-compiled-source",children:N()})})]})]})}et.propTypes={assetType:a.a.number.isRequired,templateId:f.a.templateId,revisionId:a.a.number,sessionId:f.a.sessionId,isReadOnly:a.a.bool.isRequired,hasAccess:a.a.bool.isRequired,userHasReadAccessOnly:a.a.bool.isRequired,onChange:a.a.func.isRequired,saveTemplate:a.a.func.isRequired,publishTemplate:a.a.func.isRequired,enableHublValidation:a.a.bool.isRequired,onHublValidation:a.a.func.isRequired,onHublValidationFail:a.a.func.isRequired,isAvailableForNewContent:a.a.bool.isRequired,templatePath:a.a.string.isRequired,templateSource:a.a.string.isRequired,fileType:a.a.string.isRequired,parentThemeFolderId:a.a.oneOfType([a.a.number,a.a.string]),label:a.a.string,editorLoaded:a.a.func.isRequired,showCompiledSplitScreen:a.a.bool.isRequired,isLocked:a.a.bool.isRequired,templateType:a.a.oneOf(Object.values(g.a).map(({id:e})=>e))};var tt=Object(i.memo)(et),st=s(2603),it=s(1006),rt=s(457),at=s(239);class nt extends i.Component{constructor(...e){super(...e);this.onChange=({value:e})=>{this.props.userHasReadAccessOnly||this.props.isReadOnly||this.props.updateTemplateSource(this.props.templateId,e)};this.saveTemplate=()=>{this.props.userHasReadAccessOnly||this.props.isReadOnly||this.props.saveTemplate(this.props.templateId)};this.publishTemplate=()=>{this.props.publishTemplate(this.props.templateId,this.props.templateBuffer)};this.onHublValidation=(e,t)=>{this.props.validateTemplate(this.props.templateId,this.props.sessionId,t,null)};this.onHublValidationFail=e=>{this.props.validateTemplate(this.props.templateId,this.props.sessionId,null,e)}}componentDidMount(){this.props.templateId&&(this.props.revisionId?this.props.fetchRevision(this.props.templateId,this.props.revisionId):this.props.fetchTemplate(this.props.templateId))}shouldComponentUpdate(e,t){return!!e.templateId&&(e.templateId!==this.props.templateId||(e.revisionId!==this.props.revisionId||l()(this,e,t)))}componentDidUpdate(e){this.props.revisionId&&this.props.revisionId!==e.revisionId?this.props.fetchRevision(this.props.templateId,this.props.revisionId):(this.props.templateId!==e.templateId||e.revisionId&&!this.props.revisionId)&&this.props.fetchTemplate(this.props.templateId)}renderFetchError(){return Object(Y.jsx)(d.a,{name:"CODE_EDITOR_ERROR",children:Object(Y.jsx)(b.a,{grow:1,children:Object(Y.jsx)(u.a,{title:Object(c.a)("designManager.errorPages.loadingErrors.codeEditor.title"),type:"badRequest",children:Object(Y.jsx)(p.a,{message:"designManager.errorPages.loadingErrors.codeEditor.message"})})})})}render(){const{assetType:e,isReadOnly:t,revisionId:s,templateBuffer:i,templateId:r,sessionId:a,parentThemeFolderId:n,fileName:o,fetchError:l,editorLoaded:p,showCompiledSplitScreen:c,userHasReadAccessOnly:u,hasEmailAccess:b,isEmail:m,isLocked:f}=this.props,I=!!i&&i.isAvailableForNewContent,O=i&&i.path||"",j=i&&i.source||"",g=i&&"number"==typeof i.templateType?i.templateType:"",v=i&&i.getFileType()||"",y=i&&i.label||"",C=!(m&&!b),R=!!i&&!0!==i.default;if(l)return this.renderFetchError();if(!i)return Object(Y.jsx)(h.a,{grow:!0,minHeight:200});Object(st.a)();return Object(Y.jsx)(d.a,{name:"CODE_EDITOR",children:Object(Y.jsx)(tt,{assetType:e,showCompiledSplitScreen:c,templateId:r,revisionId:s,sessionId:a,isReadOnly:t,hasAccess:C,userHasReadAccessOnly:u,isAvailableForNewContent:I,templatePath:O,templateSource:j,templateType:g,fileType:v,label:y,fileName:o,parentThemeFolderId:n,onChange:this.onChange,saveTemplate:this.saveTemplate,enableHublValidation:R,onHublValidation:this.onHublValidation,onHublValidationFail:this.onHublValidationFail,publishTemplate:this.publishTemplate,editorLoaded:p,isLocked:f},`codeeditor-${r}-${s||""}`)})}}nt.propTypes={assetType:a.a.number.isRequired,fetchTemplate:a.a.func.isRequired,fetchRevision:a.a.func.isRequired,templateBuffer:a.a.instanceOf(I.a),templateId:f.a.templateId,revisionId:a.a.number,sessionId:f.a.sessionId,updateTemplateSource:a.a.func.isRequired,saveTemplate:a.a.func.isRequired,isReadOnly:a.a.bool.isRequired,hasEmailAccess:a.a.bool.isRequired,userHasReadAccessOnly:a.a.bool.isRequired,isEmail:a.a.bool.isRequired,validateTemplate:a.a.func.isRequired,publishTemplate:a.a.func.isRequired,parentThemeFolderId:a.a.oneOfType([a.a.number,a.a.string]),fileName:m.FilePropTypes.fileName,fetchError:a.a.instanceOf(Error),editorLoaded:a.a.func.isRequired,showCompiledSplitScreen:a.a.bool.isRequired,isLocked:a.a.bool.isRequired};function ot(){const e=ae.d();return function(t,s){const i=de.z(t),r=de.w(t),{revisionId:a,assetId:n}=s,o=n||at.w(t),l=o,d=Object.assign({},s,{templateId:o}),p=e(t,d),c=ae.b(t,d),u=Object(pe.o)(t,{fileId:o}),h=ae.a(t,d),b=Object(pe.K)(t)((c||{}).folderId),m=Object(pe.Db)(),{fetchError:f}=h;return{assetType:Object(V.a)(t),hasEmailAccess:i,userHasReadAccessOnly:r,isEmail:p.isEmail,templateId:o,sessionId:l,revisionId:a,templateBuffer:c,meta:p,fetchError:f,isReadOnly:p.isReadOnly||!!a,parentThemeFolderId:m(t,s),fileName:u?u.name:"",showCompiledSplitScreen:(Object(k.b)(t)||Object(V.g)(t,d))&&Object(k.a)(t),isLocked:b}}}const lt={fetchRevision:ie.e,updateTemplateSource:ie.l,saveTemplate:ie.j,validateTemplate:it.b,publishTemplate:ie.h,editorLoaded:rt.g,pushRoute:Be.a};t.a=Object(Te.compose)(Object(n.connect)(ot,lt),Object(O.a)("code-editor--is_active"))(nt)},2798:function(e,t,s){"use strict";var i=s(2),r=s(40),a=s(41),n=s.n(a),o=s(4),l=s(518),d={DECIMAL:"decimal",CURRENCY:"currency",PERCENTAGE:"percentage"},p=s(45);s.d(t,"a",(function(){return u}));const c=["abbreviate","abbreviateThreshold","value","style","simplifyCurrency","stripInsignificantZeros","useCurrencyCode"];class u extends r.Component{render(){const e={[d.DECIMAL]:o.a.formatNumber,[d.CURRENCY]:o.a.formatCurrency,[d.PERCENTAGE]:o.a.formatPercentage},t=this.props,{abbreviate:s,abbreviateThreshold:r,value:a,style:n,simplifyCurrency:u,stripInsignificantZeros:h,useCurrencyCode:b}=t,m=Object(i.a)(t,c),f=e[n];n===d.CURRENCY&&console.warn("Using FormattedNumber with the currency style is deprecated. Please use FormattedCurrency instead.");u&&a%1==0&&(m.precision=0);b&&(m.unit="");m.strip_insignificant_zeros=!1!==h;const I={};if(s&&("number"!=typeof r||"number"==typeof r&&a>=r)){I.title=f(a,m);m.abbreviate=!0;m.precision=0}const O=f(a,m),j=b?Object(l.a)(O,m.currencyCode):O;return Object(p.jsx)("span",Object.assign({},I,{children:j}))}}u.displayName="FormattedNumber";u.propTypes={abbreviate:n.a.bool,abbreviateThreshold:n.a.number,currencyCode:n.a.string,maxFractionDigits:n.a.number,precision:n.a.number,simplifyCurrency:n.a.bool,stripInsignificantZeros:n.a.bool,style:n.a.oneOf(Object.keys(d).map(e=>d[e])),unit:n.a.string,useCurrencyCode:n.a.bool,value:n.a.number.isRequired};u.defaultProps={simplifyCurrency:!1,stripInsignificantZeros:!0,style:d.DECIMAL}}}]);
//# sourceMappingURL=//static.hsappstatic.net/DesignManagerIde/static-2.61259/code-editor.js.map