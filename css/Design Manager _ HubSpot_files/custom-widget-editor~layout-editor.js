(window.webpackJsonp=window.webpackJsonp||[]).push([["custom-widget-editor~layout-editor"],Array(1003).concat([function(e,t,n){"use strict";const r=(e,t)=>{e&&"string"==typeof e||console.error('Required "name" string property not provider for pattern. Provided: '+typeof e);t&&"function"==typeof t||console.error(`Required "validator" callback not provider for "${e} pattern". Provided: ${typeof t}`)},i=(e,t,n,r)=>{const i=typeof n;if(i!==r){console.error(`Invariant error in ${e} pattern. Pattern.${t}() method can only be passed a ${r}. Provided: ${i}`);return!0}return!1};t.a=({name:e="",inputType:t="string",validator:n=null,rules:o=null,matcher:a=null}={})=>{o&&(n=e=>Object.keys(o).every(t=>o[t].test(e)));r(e,n);const s={name:e,inputType:t,test:(r,o={})=>(!t||!i(e,"test",r,t))&&n(r,o)};a&&"function"==typeof a&&(s.match=n=>(!t||!i(e,"match",n,t))&&a(n));o&&(s.testRules=e=>Object.keys(o).map(t=>({rule:t,valid:o[t].test(e)})));return s}},function(e,t,n){"use strict";const r="\\.",i='\\s\\?\\#\\/\\(\\)\\=\\:\\;\\@\\\\"'+r,o="(?:(?:https?:)?\\/\\/)",a="(?:https?:\\/\\/)",s=`(?:www${r})`,c=`${s}?(?:(?:[^${i}]+)${r})+(?:[^${i}]+)`,l="(?:(?:\\/[^\\s\\/\\#\\&\\?]*)+\\/?)",u="(?:(/(?:[%a-zA-Z0-9_-])*?)*(?:/[\\*]))",d="(?:[%a-zA-Z0-9_-]+)",p="(?:(?:\\.[%a-zA-Z0-9-]+)[^\\.\\s])",h=`${d}${p}`,m="\\s\\?\\#\\&",f=`(?:([\\?&#][^${m}]*?=?([^${m}]*))+)`,g=`(?:(?:[\\?&#][^${m}]*?=?(?:[^${m}]*))+)`;t.a={www:s,domain:c,protocol:o,protocolRequired:a,path:l,wildcardPath:u,file:h,fileName:d,fileExtension:p,search:f,ungroupedSearch:g}},,,function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(246);const i=Object.freeze([r.DEFAULT_WIDGET,r.CUSTOM_WIDGET,r.STRUCTURAL_WIDGET,r.GLOBAL_GROUP,r.GLOBAL_WIDGET,r.THEME_WIDGET])},,function(e,t,n){"use strict";n.d(t,"a",(function(){return I}));var r=n(2),i=n(41),o=n.n(i),a=n(40),s=n(287),c=n.n(s),l=n(288),u=n.n(l),d=n(324),p=n(334),h=n(339),m=n(2721),f=n(466),g=n(2654),b=n(357),O=n(326),y=n(302),j=n(327),v=n(45);const C=["children","className","closeable","closeDisabledMessage","draggable","hideDefaultTooltip","isCloseDisabled","dragHandle","DragHandle","onClose","truncate"],x=Object(s.css)(["",";box-shadow:0 0 12px 0 ",";z-index:",";"],Object(O.h)("grabbing"),Object(j.b)(d.MONOLITH,.1),y.V),E=c.a.div.withConfig({displayName:"UIMoveableObject__Outer",componentId:"sc-132sxjv-0"})(["position:relative;"," ",";font-size:",";background-color:",";"," .private-moveable-object + &{margin-top:12px;}"],Object(O.i)(),Object(O.j)(parseInt(y.R,10)-1,26,30),y.c,({use:e})=>"on-dark"===e?d.OLAF:d.KOALA,({isDragging:e})=>e&&x),T=c()(m.a).withConfig({displayName:"UIMoveableObject__CloseButton",componentId:"sc-132sxjv-1"})(["top:16px;margin-right:-12px;"]),S=c.a.span.withConfig({displayName:"UIMoveableObject__TooltipAnchor",componentId:"sc-132sxjv-2"})(["height:100%;position:absolute;right:0;top:0;width:30px;"]);class I extends a.Component{render(){const e=this.props,{children:t,className:n,closeable:i,closeDisabledMessage:o,draggable:a,hideDefaultTooltip:s,isCloseDisabled:c,dragHandle:l,DragHandle:p,onClose:h,truncate:m}=e,f=Object(r.a)(e,C),O=m?Object(v.jsx)(b.a,{hideDefaultTooltip:s,children:t}):t,y=Object(v.jsxs)(E,Object.assign({},f,{className:u()("private-moveable-object",n),children:[O,i&&Object(v.jsx)(g.a,{title:o,children:Object(v.jsx)(S,{children:Object(v.jsx)(T,{color:d.EERIE,disabled:c,onClick:h,size:"sm"})})})]}));if(a){const e=l||p;return Object(v.jsx)(e,{children:y})}return y}}I.propTypes={children:o.a.node.isRequired,closeable:o.a.bool.isRequired,closeDisabledMessage:o.a.string,draggable:o.a.bool.isRequired,hideDefaultTooltip:o.a.bool,isCloseDisabled:o.a.bool.isRequired,isDragging:o.a.bool.isRequired,onClose:o.a.func,dragHandle:Object(h.a)(Object(p.a)(f.a)),DragHandle:Object(p.a)(f.a).isRequired,truncate:Object(h.a)(o.a.bool),use:o.a.oneOf(["default","on-dark"])};I.defaultProps={closeable:!0,draggable:!0,hideDefaultTooltip:!1,isCloseDisabled:!1,isDragging:!1,DragHandle:f.a,truncate:!0,use:"default"};I.displayName="UIMoveableObject"},,,,,,,,,function(e,t,n){"use strict";var r=n(40),i=n(41),o=n.n(i),a=n(458),s=n(490),c=n(2654),l=n(2679),u=n(324),d=n(485),p=n(45);class h extends r.PureComponent{render(){const e=Object(p.jsx)(c.a,{title:this.props.tooltipTitle,children:Object(p.jsx)(l.a,{color:u.BATTLESHIP,name:"info"})});return Object(p.jsxs)("div",{children:[Object(p.jsxs)(s.a,{children:[Object(p.jsx)(d.a,{className:"m-right-1",children:this.props.toggleLabel}),e]}),Object(p.jsx)(a.a,{disabled:this.props.disabled,checked:this.props.checked,onChange:this.props.onChange,size:"extra-small"})]})}}h.propTypes={disabled:o.a.bool,checked:o.a.bool.isRequired,onChange:o.a.func.isRequired,toggleLabel:o.a.node.isRequired,tooltipTitle:o.a.node};h.defaultProps={disabled:!1};t.a=h},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));n.d(t,"b",(function(){return i}));n.d(t,"c",(function(){return o}));const r="dm-tool",i=r+"__form-label",o=16},function(e,t,n){"use strict";n.d(t,"a",(function(){return O}));var r=n(40),i=n(41),o=n.n(i),a=n(288),s=n.n(a),c=n(287),l=n.n(c),u=n(2735),d=n(434),p=n(2719),h=n(1019),m=n(45);const f=h.a,g=l()(d.a).withConfig({displayName:"Tool__StyledTool",componentId:"sc-14qsjbj-0"})(["max-height:",";"],e=>e.maxHeight||"none"),b=e=>l()(e).withConfig({displayName:"Tool__makeStyledContent",componentId:"sc-14qsjbj-1"})(["margin-bottom:0 !important;flex-grow:1;flex-shrink:1;overflow-y:auto;"]);class O extends r.Component{constructor(e){super(e);this.state={contentComponent:b(e.contentComponent)}}componentDidUpdate(e){this.props.contentComponent!==e.contentComponent&&this.setState({contentComponent:b(this.props.contentComponent)})}get className(){const{className:e}=this.props;return s()(f,e,f+"--scrolling")}get contentClassName(){return s()(f+"__content",this.props.contentClassName)}renderBreadcrumbs(e){return e?Object(m.jsx)(u.a,{grow:0,shrink:0,children:e}):null}render(){const{breadcrumbsContent:e,children:t,maxHeight:n}=this.props,{contentComponent:r}=this.state;return Object(m.jsxs)(g,{align:"stretch",className:this.className,direction:"column",maxHeight:n,children:[this.renderBreadcrumbs(e),Object(m.jsx)(r,{className:this.contentClassName,scrollDirection:"vertical",children:t})]})}}O.propTypes={breadcrumbsContent:o.a.node,children:o.a.node,className:o.a.string,contentClassName:o.a.string,contentComponent:o.a.func.isRequired,maxHeight:o.a.oneOfType([o.a.number,o.a.string])};O.defaultProps={contentComponent:p.a}},function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var r=n(40),i=n(41),o=n.n(i),a=n(288),s=n.n(a),c=n(1022),l=n(1019),u=n(2654),d=n(45);const p=l.a+"__expandable-section__content";class h extends r.Component{get className(){const{className:e,flush:t}=this.props;return s()(l.a+"__expandable-section",e,t&&l.a+"__expandable-section--flush")}render(){const e=Object(d.jsx)(c.a,Object.assign({},this.props,{className:this.className,contentClassName:p,use:"enclosed"})),{disabled:t,disabledTooltipTitle:n}=this.props;return t&&n?Object(d.jsx)(u.a,{title:n,children:e}):e}}h.propTypes={className:o.a.string,flush:o.a.bool,disabled:o.a.bool,disabledTooltipTitle:o.a.node};h.defaultProps={flush:!1}},,,,,function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r=n(40),i=n(41),o=n.n(i),a=n(288),s=n.n(a),c=n(1019),l=n(1027),u=n(1021),d=n(1029),p=n(45);const h=c.a+"__sections",m=Object.freeze([l.a,u.a,d.a]);class f extends r.Component{get className(){return s()(h,this.props.className)}render(){return Object(p.jsx)("div",{className:this.className,children:r.Children.map(this.props.children,e=>null==e?null:m.includes(e.type)?e:Object(p.jsx)(d.a,{children:e}))})}}f.propTypes={children:o.a.node,className:o.a.string}},function(e,t,n){"use strict";var r=n(2),i=n(40),o=n(0),a=n(41),s=n.n(a),c=n(288),l=n.n(c),u=n(55),d=n(287),p=n.n(d),h=n(324),m=n(302),f=n(710),g=n(2679),b=n(434),O=n(2712),y=n(456),j=n(773),v=n(453),C=n(359),x=n(85),E=n(229),T=n(161),S=n(1028),I=n(1019),w=n(45);const _=["children"],N=Object(x.c)(Object.keys(j.a.propTypes)),A=class{constructor(){this.upper=0;this.lower=0}},D=300,k={flush:!0,singleBreadcrumbIsBackLink:!1},P=p()(b.a).withConfig({displayName:"ToolBreadcrumbs__StyledFlexContainer",componentId:"sc-123x04s-0"})(["max-width:100%;overflow-x:hidden;padding:","px ","px;background-color:",";font-size:",";"],I.c/2,I.c,h.GYPSUM,m.db),R=p()(j.a).withConfig({displayName:"ToolBreadcrumbs__StyledBreadcrumbs",componentId:"sc-123x04s-1"})(["margin:0 !important;padding:0;flex-shrink:1;flex-grow:0;"]),F=p()(g.a).withConfig({displayName:"ToolBreadcrumbs__StyledEllipsesIcon",componentId:"sc-123x04s-2"})(["margin-right:0;vertical-align:middle;font-size:",";color:",";"],m.K,h.CALYPSO_DARK);class L extends i.Component{constructor(...e){super(...e);this.state={ancestorsPopoverOpen:!1,showAncestorsPopover:!1};this.breadcrumbsRef=Object(i.createRef)();this.breadcrumbsContainerRef=Object(i.createRef)();this.collapseLimits=new A;this.startListeningToNode=()=>{this.stopListeningToNode();this.checkContainerWidthChange()};this.stopListeningToNode=()=>{this._pollerTimeout&&clearTimeout(this._pollerTimeout)};this.checkContainerWidthChange=()=>{this.containerWidth=this.containerWidth||0;const e=Object(o.findDOMNode)(this);if(!e)return;const t=0|e.getBoundingClientRect().width;if(t!==this.containerWidth){this.containerWidth=t;this.fitToWidth()}this._pollerTimeout=setTimeout(this.checkContainerWidthChange,D)};this.fitToWidth=()=>{const{showAncestorsPopover:e}=this.state,t=Object(o.findDOMNode)(this.breadcrumbsRef.current);if(!t){e&&this.setState({showAncestorsPopover:!1});return}if(this.collapseLimits.upper&&this.containerWidth>=this.collapseLimits.upper){e&&this.setState({showAncestorsPopover:!1});return}if(this.collapseLimits.lower&&this.containerWidth<=this.collapseLimits.lower){e||this.setState({showAncestorsPopover:!0});return}const n=Object(o.findDOMNode)(this.breadcrumbsContainerRef.current);if(n){const r=Object(C.a)(t,n);r?this.collapseLimits.lower=this.containerWidth:this.collapseLimits.upper=this.containerWidth;r!==e&&this.setState({showAncestorsPopover:r})}};this.handleLinkClick=e=>{this.handleCloseAncestorsPopover();this.props.onLinkClick(e===E.h?null:e)};this.handleAncestorsPopoverOpenChange=e=>{this.setState({ancestorsPopoverOpen:e.target.value})};this.handleToggleAncestorsPopover=()=>{this.setState({ancestorsPopoverOpen:!this.state.ancestorsPopoverOpen})};this.handleCloseAncestorsPopover=()=>{this.setState({ancestorsPopoverOpen:!1})};this.renderLink=({label:e,id:t})=>{const{isReadOnly:n,partial:r}=this.props;return Object(w.jsx)(O.a,{disabled:n,onClick:r(this.handleLinkClick,t),children:e},JSON.stringify(t))}}componentDidMount(){this.startListeningToNode()}componentDidUpdate(e){this.props.items===e.items&&this.props.rootLabel===e.rootLabel&&this.props.rootIcon===e.rootIcon&&this.props.className===e.className||this.setState({showAncestorsPopover:!1},()=>{this.collapseLimits=new A;this.fitToWidth()})}componentWillUnmount(){this.stopListeningToNode()}get className(){return l()(I.a+"__breadcrumbs",this.props.className)}get iconColor(){return this.props.isReadOnly?h.BUTTON_DISABLED_TEXT:h.CALYPSO_DARK}get ancestorItems(){const{items:e}=this.props;return e.length&&e[0].tab===T.d?e.slice(1,e.length-1):e.slice(0,e.length-1)}get activeItem(){const{items:e}=this.props;return e[e.length-1]}renderIcon(e){return e?Object(i.isValidElement)(e)?Object(i.cloneElement)(e,{color:this.iconColor}):Object(w.jsx)(g.a,{color:this.iconColor,name:e}):null}renderActiveItem(){if(!this.activeItem)return null;const{id:e,label:t}=this.activeItem;return Object(w.jsx)("span",{children:t},JSON.stringify(e))}renderAncestorItemsPopover(){const{ancestorsPopoverOpen:e,showAncestorsPopover:t}=this.state;if(!t)return null;const{isReadOnly:n,rootLabel:r}=this.props,i=[{id:E.h,label:r},...this.ancestorItems];return Object(w.jsx)(v.a,{content:Object(w.jsx)(y.a,{className:"p-all-3",childClassName:"m-bottom-1",children:i.map(this.renderLink)}),onOpenChange:this.handleAncestorsPopoverOpenChange,open:e,placement:"bottom",children:Object(w.jsx)(f.a,{disabled:n,onClick:this.handleToggleAncestorsPopover,placement:"right",use:"link",children:Object(w.jsx)(F,{name:"ellipses"})})},"ancestorItemsPopover")}renderAncestorItemsBreadcrumbs(){const{showAncestorsPopover:e}=this.state;return!this.ancestorItems.length||e?null:this.ancestorItems.map(e=>this.renderLink(e))}renderRootItem(){const{rootIcon:e,rootLabel:t}=this.props,{showAncestorsPopover:n}=this.state;return this.renderLink({id:E.h,label:Object(w.jsxs)("span",{children:[this.renderIcon(e),!n&&Object(w.jsx)("span",{className:"m-left-1",children:t})]})})}renderBreadcrumbs(){const e=this.props,{children:t}=e,n=Object(r.a)(e,_);return t?Object(w.jsx)(R,Object.assign({},k,N(n),{children:t})):Object(w.jsx)("div",{children:Object(w.jsx)(R,Object.assign({},k,N(n),{children:[this.renderRootItem(),this.renderAncestorItemsBreadcrumbs(),this.renderAncestorItemsPopover(),this.renderActiveItem()]}))})}render(){return Object(w.jsx)(P,{align:"center",className:this.className,ref:this.breadcrumbsContainerRef,children:Object(w.jsx)("div",{ref:this.breadcrumbsRef,children:this.renderBreadcrumbs()})})}}L.propTypes={children:s.a.node,className:s.a.string,isReadOnly:s.a.bool,items:s.a.arrayOf(s.a.shape({id:s.a.oneOfType([s.a.number,s.a.object,s.a.string]).isRequired,label:s.a.node,tab:s.a.string})).isRequired,onLinkClick:s.a.func.isRequired,partial:s.a.func.isRequired,rootIcon:s.a.oneOfType([s.a.node,s.a.string]),rootLabel:s.a.node};L.defaultProps={items:[],onLinkClick:u.a};t.a=Object(S.a)()(L)},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(40),i=n(345),o=n(46),a=n(45);function s(){return e=>{class t extends r.Component{constructor(e){super(e);this.partial=this.partial.bind(this);this.partials=new Map}componentWillUnmount(){this.partials=null}partial(t,...n){Object(o.a)("function"==typeof t,"%s.partial: expected `func` to be a function but got `%s`.",Object(i.a)(e),t);if(!this.partials)return null;const r=[t,...n];this.partials.has(r)||this.partials.set(r,(...e)=>t(...n,...e));return this.partials.get(r)}render(){return Object(a.jsx)(e,Object.assign({},this.props,{partial:this.partial}))}}t.wrappedComponent=e;return t}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n(40),i=n(41),o=n.n(i),a=n(288),s=n.n(a),c=n(468),l=n(1019),u=n(45);const d=l.a+"__section";class p extends r.Component{get className(){const{className:e,flush:t}=this.props;return s()(d,e,t&&d+"--flush")}render(){return Object(u.jsx)(c.a,Object.assign({},this.props,{className:this.className}))}}p.propTypes={className:o.a.string,flush:o.a.bool};p.defaultProps={flush:!1}},function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n(40),i=n(41),o=n.n(i),a=n(288),s=n.n(a),c=n(2741),l=n(1019),u=n(45);const d=l.a+"__form-control";class p extends r.Component{get className(){const{className:e}=this.props;return s()(d,e)}render(){const{label:e}=this.props;return Object(u.jsx)(c.a,Object.assign({},this.props,{"aria-label":e?null:"label",className:this.className,labelClassName:l.b}))}}p.propTypes={className:o.a.string,label:o.a.oneOfType([o.a.string,o.a.object])}},function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n(40),i=n(41),o=n.n(i),a=n(288),s=n.n(a),c=n(490),l=n(1019),u=n(45);class d extends r.Component{get className(){const{className:e}=this.props;return s()(l.b,e)}render(){return Object(u.jsx)(c.a,Object.assign({},this.props,{className:this.className}))}}d.propTypes={className:o.a.string}},function(e,t,n){"use strict";var r=n(40),i=n(41),o=n.n(i),a=n(73),s=n(279),c=n(99),l=n(219),u=n(2739),d=n(709),p=n(2700),h=n(2654),m=n(485),f=n(357),g=n(443),b=n(1034),O=n(45);const y=e=>"DesignEditorsUI.shared.addTemplateDropdown."+e;class j extends r.Component{constructor(...e){super(...e);this.handleChange=e=>{this.props.onTemplateSelect(+e.target.value)}}getI18nKey(e){const{templateType:t}=this.props;return y(`${t.name}.${e}`)}renderTruncatedString(e){return Object(O.jsx)(f.a,{tooltip:!1,children:e})}renderFileManagerFooter(){return this.props.enableFileManager?Object(O.jsx)(d.a,{children:Object(O.jsx)(g.a,{onClick:this.props.onFileManagerOpen,use:"link",children:Object(O.jsx)(s.a,{message:y("fileManagerButtonText")})})}):null}render(){const{templates:e,FileManager:t,isReadOnly:n}=this.props,r=Object(O.jsx)(m.a,{children:Object(O.jsx)(s.a,{message:this.getI18nKey("button.text")})}),i=e.map(e=>({text:e.label,dropdownText:this.renderTruncatedString(e.label),help:this.renderTruncatedString(e.path),value:""+e.id}));let o=Object(O.jsxs)(u.a,{buttonText:r,buttonUse:"link",closeOnTargetLeave:!0,disabled:!e.length||n,menuWidth:300,placement:"bottom left",children:[Object(O.jsx)(p.a,{onChange:this.handleChange,options:Object(a.sortBy)(i,"text"),placeholder:Object(c.a)(this.getI18nKey("placeholder"))}),this.renderFileManagerFooter()]});e.length||(o=Object(O.jsx)(h.a,{placement:"left",title:Object(c.a)(this.getI18nKey("noTemplatesTooltip")),children:o}));return Object(O.jsxs)("div",{children:[o,t]})}}j.propTypes={templates:o.a.arrayOf(o.a.shape({id:o.a.number.isRequired,label:o.a.string.isRequired,path:o.a.string.isRequired})).isRequired,onTemplateSelect:o.a.func.isRequired,templateType:o.a.oneOf([l.b.css,l.b.js]).isRequired,enableFileManager:o.a.bool,FileManager:o.a.node,onFileManagerOpen:o.a.func.isRequired,isReadOnly:o.a.bool};j.defaultProps={enableFileManager:!1,isReadOnly:!1};t.a=Object(b.a)(j)},,function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(40),i=n(41),o=n.n(i),a=n(55),s=n(27),c=n(698),l=n(45);function u(e){var t;return(t=class extends r.PureComponent{constructor(e){super(e);this.onFileManagerOpen=()=>{this.setState({isFileManagerOpen:!0})};this.onFileManagerClose=()=>{this.setState({isFileManagerOpen:!1})};this.onFileManagerConfirm=e=>{this.onFileManagerClose();this.props.onFileSelect(e)};this.state={isFileManagerOpen:!1}}renderFileManager(){return this.state.isFileManagerOpen?Object(l.jsx)(c.a.Consumer,{children:({FilePicker:e})=>Object(l.jsx)(e,{userInfo:Object(s.userInfoSync)(),onClose:this.onFileManagerClose,onSelect:this.onFileManagerConfirm,pickerType:"SIDE_MODAL",type:"FILE"})}):null}render(){return Object(l.jsx)(e,Object.assign({},this.props,{onFileManagerOpen:this.onFileManagerOpen,FileManager:this.renderFileManager()}))}}).propTypes={onFileSelect:o.a.func},t.defaultProps={onFileSelect:a.a},t}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(419),i=n(63);function o(){const{request:e,receive:t,error:n}=o;return i=>{i(e());return Object(r.b)().then(({objects:e})=>{i(t(e))}).catch(e=>{i(n(e))})}}o.request=function(){return{type:i.STYLESHEETS_FETCH}};o.receive=function(e){return{type:i.STYLESHEETS_FETCH,stylesheets:e}};o.error=function(e){return{type:i.STYLESHEETS_FETCH,error:e}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(419),i=n(63);function o(){const{request:e,receive:t,error:n}=o;return i=>{i(e());return Object(r.a)().then(({objects:e})=>{i(t(e))}).catch(e=>{i(n(e))})}}o.request=function(){return{type:i.JAVASCRIPTS_FETCH}};o.receive=function(e){return{type:i.JAVASCRIPTS_FETCH,javascripts:e}};o.error=function(e){return{type:i.JAVASCRIPTS_FETCH,error:e}}},,function(e,t,n){"use strict";var r=n(40),i=n(41),o=n.n(i),a=n(2777),s=n(1039),c=n(45);class l extends r.PureComponent{constructor(...e){super(...e);this.state={focus:!1};this.handleBlur=e=>{const{error:t,onBlur:n,showValidationNotification:r}=this.props;this.setState({focus:!1});t?r():n(e)};this.handleFocus=()=>{this.setState({focus:!0})}}render(){const e=this.state.focus&&this.props.error?"private-form__control--error":"";return Object(c.jsx)(s.a,Object.assign({},this.props,{inputClassName:e,onBlur:this.handleBlur,onFocus:this.handleFocus}))}}l.propTypes={error:o.a.bool,onBlur:o.a.func,showValidationNotification:o.a.func.isRequired};t.a=Object(a.a)()(l)},function(e,t,n){"use strict";var r=n(40),i=n(41),o=n.n(i),a=n(55),s=n(288),c=n.n(s),l=n(434),u=n(766),d=n(437),p=n(691),h=n(2718),m=n(45);const f=Object(h.a)()(l.a);class g extends r.PureComponent{constructor(e){super(e);this.onEnterKeyPress=()=>{this.inputRef.current&&this.inputRef.current.blur()};this.keybindingConfig={[d.b.NONE]:{[d.a.ENTER]:new p.a({handler:this.onEnterKeyPress})}};this.onBlur=e=>{const{allowBlank:t,onBlur:n}=this.props;let r=e.target.value;if(!r&&!t){r=this._initialValue;this.onChange(r)}n(r)};this.onFocus=e=>{const{allowBlank:t,onFocus:n,value:r}=this.props;t||(this._initialValue=r);n(e)};this.onChange=e=>{const{onChange:t}=this.props;t?t(e):this.setState({value:e})};this.onInputChange=e=>{this.onChange(e.target.value)};this.state={value:e.value};this.inputRef=Object(r.createRef)()}componentDidMount(){this.props.focus&&this.inputRef.current&&!this.props.readOnly&&this.inputRef.current.focus()}componentDidUpdate(e){e.value!==this.props.value&&this.setState({value:this.props.value})}render(){const{actions:e,onKeyPress:t,placeholder:n,readOnly:r,typeLabel:i}=this.props,{value:o}=this.state,a=c()("name-label",this.props.className),s=c()("name-inline-text",this.props.inputClassName);return Object(m.jsxs)(f,{className:a,justify:"between",keybindingConfig:this.keybindingConfig,children:[Object(m.jsxs)("div",{className:"name-inline-text-wrapper",children:[Object(m.jsx)("h5",{className:"m-all-0",children:Object(m.jsx)(u.a,{affordance:!r,className:s,"data-test-id":"name-label",onBlur:this.onBlur,onChange:this.onInputChange,onFocus:this.onFocus,onKeyPress:t,placeholder:n,disabled:r,readOnly:r,inputRef:this.inputRef,value:o})}),i]}),e]})}}g.propTypes={actions:o.a.node,allowBlank:o.a.bool,className:o.a.string,focus:o.a.bool,inputClassName:o.a.string,onBlur:o.a.func,onChange:o.a.func,onFocus:o.a.func,onKeyPress:o.a.func,placeholder:o.a.string,readOnly:o.a.bool,typeLabel:o.a.node,value:o.a.string};g.defaultProps={actions:null,allowBlank:!0,className:null,focus:!1,onBlur:a.a,onChange:null,onFocus:a.a,onKeyPress:a.a,placeholder:"",readOnly:!1,typeLabel:null,value:""};t.a=g},function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var r=n(40),i=n(41),o=n.n(i),a=n(55),s=n(279),c=n(282),l=n(464),u=n(473),d=n(443),p=n(710),h=n(2679),m=n(738),f=n(45);const g=e=>"DesignEditorsUI.shared."+e;class b extends r.Component{constructor(...e){super(...e);this.onDeleteLanguageClick=e=>{e.preventDefault();e.stopPropagation();this.props.onDeleteLanguageClick(this.props.language)};this.onChangeMasterLanguageClick=e=>{e.preventDefault();e.stopPropagation();this.props.onChangeMasterLanguageClick()};this.onClick=()=>{this.props.onClick(this.props.language)}}renderActionButton(){const{language:e,masterLanguage:t,disableActionButtons:n}=this.props;return t===e?Object(f.jsx)(d.a,{use:"link",className:"language-field-change-button",onClick:this.onChangeMasterLanguageClick,disabled:n,children:Object(f.jsx)(s.a,{message:g("localization.languageButton.change")})}):Object(f.jsx)(p.a,{size:"extra-small",className:"language-field-button",use:"unstyled",onClick:this.onDeleteLanguageClick,disabled:n,children:Object(f.jsx)(h.a,{name:"remove"})})}renderLabel(){const{language:e,masterLanguage:t}=this.props,n=Object(f.jsx)(s.a,{message:Object(m.a)(e)});return e===t?Object(f.jsx)(c.a,{message:g("localization.languageButton.sourceLabel"),options:{language:n}}):n}render(){const{language:e,selectedLanguage:t}=this.props;return Object(f.jsx)(l.a,{className:"language-field"+(t===e?" is--active":""),onClick:this.onClick,children:Object(f.jsxs)(u.a,{className:"language-field-content",children:[this.renderLabel(),this.renderActionButton()]})})}}b.propTypes={language:o.a.string.isRequired,selectedLanguage:o.a.string,onClick:o.a.func,masterLanguage:o.a.string,onChangeMasterLanguageClick:o.a.func.isRequired,onDeleteLanguageClick:o.a.func.isRequired,disableActionButtons:o.a.bool};b.defaultProps={onClick:a.a,onChangeMasterLanguageClick:a.a,onDeleteLanguageClick:a.a}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));const r=e=>e.i18n.language},function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var r=n(40),i=n(41),o=n.n(i),a=n(279),s=n(99),c=n(2735),l=n(434),u=n(443),d=n(2634),p=n(45);const h=e=>"DesignEditorsUI.shared.globalContent."+e;class m extends r.PureComponent{get globalContentUrl(){const{contentPath:e}=this.props;let t;try{t=Object(d.d)(null,{assetPath:e})}catch(e){console.error("No assetPath for global content editor url")}return t}render(){const e=Object(s.a)(h("globalContentTypes."+this.props.globalContentType));return this.globalContentUrl?Object(p.jsxs)(l.a,{direction:"column",children:[Object(p.jsx)("p",{children:Object(p.jsx)(a.a,{message:h("changesMessage"),options:{globalContentType:e}})}),Object(p.jsx)(c.a,{alignSelf:"center",children:Object(p.jsx)(u.a,{external:!0,href:this.globalContentUrl,use:"tertiary",children:Object(p.jsx)(a.a,{message:h("editButtonText"),options:{globalContentType:e}})})})]}):null}}m.propTypes={contentPath:o.a.string.isRequired,globalContentType:o.a.string.isRequired}},function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n(73),i=n(1044);let o,a,s={};const c=()=>{a=document.implementation.createHTMLDocument("");try{a.domain=window.location.hostname.indexOf("qa")>=0?"hubspotqa.com":"hubspot.com"}catch(e){}o=Object(i.a)(a)},l=["position","height","width","top","bottom","left","right","z-index","clear","float","display","visibility","opacity","background","background-color","background-image","white-space"],u=({node:e})=>{e&&e.style&&e.style.length>0&&e.style.removeProperty&&l.forEach(t=>e.style.removeProperty(t));return null},d=Object(r.memoize)((e,t,n=[u])=>{o&&a||c();const r=a.createElement("div"),{body:i}=a;if(e&&""!==e){t||(t=o.Config.RELAXED);const a=JSON.stringify(t);i.innerHTML=e;s[a]||(s=Object.assign({},s,{[a]:new o(Object.assign({},t,{transformers:n}))}));try{const e=s[a].clean_node(i);r.appendChild(e.cloneNode(!0))}catch(t){console.error(`Error sanitizing text '${e}'.`,t)}}i.innerHTML="";return r.innerHTML})},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(544),i=n.n(r);function o(e){i.a.Config||(i.a.Config={});i.a.Config.RELAXED={dom:e,elements:["a","b","blockquote","br","caption","cite","code","col","colgroup","dd","dl","dt","em","figure","h1","h2","h3","h4","h5","h6","i","li","ol","p","pre","q","small","strike","strong","sub","sup","table","tbody","td","tfoot","th","thead","tr","u","ul","font","div","span"],attributes:{__ALL__:["style"],a:["href","title","target"],blockquote:["cite"],col:["span","width"],colgroup:["span","width"],figure:["style"],ol:["start","type"],q:["cite"],table:["summary","width"],td:["abbr","axis","colspan","rowspan","width"],th:["abbr","axis","colspan","rowspan","scope","width"],ul:["type"],font:["size"],span:["data-at-mention","data-owner-id"]},add_attributes:{a:{rel:"nofollow noopener noreferrer",target:"_blank"}},protocols:{a:{href:["ftp","http","https","mailto",i.a.RELATIVE]},blockquote:{cite:["http","https",i.a.RELATIVE]},img:{src:["http","https",i.a.RELATIVE]},q:{cite:["http","https",i.a.RELATIVE]}},remove_contents:["style","script"]};i.a.Config.STRICT={dom:e,elements:["a","b","br","em","i","p","small","strong","span"],attributes:{__ALL__:["style"],a:["href","title","target"]},add_attributes:{a:{rel:"nofollow noopener noreferrer",target:"_blank"}},protocols:{a:{href:["ftp","http","https","mailto",i.a.RELATIVE]}},remove_contents:["style","script"]};i.a.Config.TEXTONLY={elements:[]};return i.a}},function(e,t,n){"use strict";n.d(t,"e",(function(){return l}));n.d(t,"d",(function(){return u}));n.d(t,"n",(function(){return p}));n.d(t,"o",(function(){return h}));n.d(t,"p",(function(){return m}));n.d(t,"j",(function(){return f}));n.d(t,"f",(function(){return g}));n.d(t,"g",(function(){return O}));n.d(t,"k",(function(){return y}));n.d(t,"c",(function(){return j}));n.d(t,"s",(function(){return C}));n.d(t,"b",(function(){return x}));n.d(t,"m",(function(){return E}));n.d(t,"a",(function(){return T}));n.d(t,"l",(function(){return S}));n.d(t,"q",(function(){return I}));n.d(t,"r",(function(){return _}));n.d(t,"t",(function(){return N}));n.d(t,"h",(function(){return A}));n.d(t,"i",(function(){return k}));var r=n(65),i=n(64),o=n(1046),a=n(1047),s=n(66),c=n(1048);const l=(e,t)=>e.resources.forms.forms[t.formGuid],u=(e,t)=>{const n=t.value?t.value.form_id:t.formGuid;return e.resources.forms.formsDrafts[n]},d=e=>e.resources.forms.draftSaveRequestStatus,p=e=>d(e)===s.PENDING,h=e=>d(e)===s.FAILED,m=e=>d(e)===s.PRECONDITION_FAILED,f=e=>e.resources.forms.forms,g=(e,t)=>e.resources.forms.formsCache[t.formGuid],b=e=>e.resources.forms.formsCache,O=(e,t)=>e.resources.forms.requestStatus[t.formGuid],y=Object(i.c)(b),j=Object(i.c)(f),v=e=>e.resources.forms.properties.contacts,C=e=>e.resources.forms.subscriptions,x=(e,t)=>t&&t.metaData?e.resources.forms.consentCopy[Object(c.b)(t.metaData)]:{},E=e=>Object(a.b)(e,o.a),T=e=>Object(a.a)(e,o.a),S=e=>Object(a.d)(e,o.a)===s.SUCCEEDED,I=(e,t)=>e.resources.forms.parentPages[t]||[],w=e=>{try{return e.contentSchema.content.id}catch(e){return null}},_=(e,t)=>{const n=t.value?t.value.form_id:t.formGuid,r=e.resources.forms.dismissedPagesWarning,i=I(e,n),o=w(e);if(r)return!1;return i.filter(({id:e})=>parseInt(e,10)!==o).length>0},N=e=>Object(r.a)([v],(t=[])=>t.map(({displayName:t,properties:n})=>({text:t,options:n.reduce((t,{property:n})=>{n.calculated||n.hidden||(t=[...t,{text:n.label,value:n,disabled:e&&e.containsProperty(n)}]);return t},[])}))),A=(e,t)=>e.resources.forms.formWorkflowDependencies[t.formGuid],D=e=>e.resources.forms.formWorkflowDependenciesDeleteRequestStatus,k=(e,t={})=>{const n=D(e),{formGuid:r,flowId:i}=t;return(n[r]||{})[i]}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));const r="CMv2:FormsInlineEditing"},function(e,t,n){"use strict";n.d(t,"d",(function(){return i}));n.d(t,"c",(function(){return o}));n.d(t,"b",(function(){return a}));n.d(t,"a",(function(){return s}));const r=e=>e.resources.optins.optins,i=(e,t)=>e.resources.optins.requestStatus[t],o=(e,t)=>r(e)[t],a=(e,t)=>{const n=o(e,t)||{},{optedIn:r}=n;return r},s=(e,t)=>(o(e,t)||{}).actionsAllowed||!1},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));n.d(t,"b",(function(){return o}));var r=n(6);const i=Object.freeze({esES:"es",esMX:"es-mx",jaJP:"ja",ptBR:"pt-br",svSE:"sv",zhCN:"zh-cn",zhHK:"zh-hk"}),o=e=>{const t=e.find(e=>"lang"===e.name),n=t?t.value:Object(r.a)()||"en";return i[n]||n}},,function(e,t,n){"use strict";n.d(t,"i",(function(){return s}));n.d(t,"f",(function(){return c}));n.d(t,"a",(function(){return l}));n.d(t,"e",(function(){return u}));n.d(t,"d",(function(){return d}));n.d(t,"h",(function(){return p}));n.d(t,"j",(function(){return h}));n.d(t,"b",(function(){return m}));n.d(t,"c",(function(){return f}));n.d(t,"g",(function(){return g}));var r=n(1049),i=n(1051),o=n(2634),a=n(1052);const s=(...e)=>Object(r.a)(e).get("automation/v3/workflows",Object.assign({},i.c.workflows)),c=(e,...t)=>Object(r.a)(t).get("automation/v3/workflows/"+e),l=(e,...t)=>Object(r.a)(t).post("automation/v3/workflows",{data:Object.assign({},i.a.workflows,{name:e})}),u=(e=[],...t)=>Object(r.a)(t).post("automationplatform/v1/hybrid/ids/fetch",{data:e}),d=(e,t,...n)=>Object(r.a)(n).get(`crm-usages/v2/usages/form/${t}-${e}/parents/flow_action`),p=(e,...t)=>Object(r.a)(t).get("automationapps/v1/summaries",{query:Object.assign({flowObjectType:"CONTACT"},e)}),h=(e,t=a.a.CMS_FORM_MODULE_FIELD,...n)=>Object(r.a)(n).post("automationplatform/v1/hybrid/batch",{query:{sourceApp:t},data:e}),m=(e,t,n=a.a.CMS_FORM_MODULE_FIELD,...i)=>Object(r.a)(i).post("automationplatform/v1/hybrid/create",{query:{sourceApp:n},data:e,headers:{"x-hs-referer":o.b.edit(t)}}),f=(e,t,...n)=>Object(r.a)(n).delete("automationplatform/v1/hybrid/"+e,{query:{sourceApp:t}}),g=(e,...t)=>Object(r.a)(t).post("automationmanagement/v1/references",{data:{flowIds:[e],includeOutboundReferences:!1}})},function(e,t,n){"use strict";n.d(t,"b",(function(){return o}));n.d(t,"c",(function(){return s}));n.d(t,"a",(function(){return c}));var r=n(1),i=n.n(r);const o=0,a=(Object.freeze({emails:"emails",workflows:"workflows",forms:"forms"}),Object.freeze({query:{limit:1e3}})),s=(Object.freeze({blogs:"blog-settings/v1/blogs",ctas:"ctas/v3/placements",emails:"cosemail/v1/emails",forms:"forms/v2/forms",hubdb:"hubdb/api/v1/tables",menus:"content/api/v4/menus",tags:"blogs/v3/tags",users:"users/v1/app/hub-users",workflows:"automation/v3/workflows",pages:"content/api/v4/contents",meetings:"meetings/v1/link/portal",salesforceCampaigns:"sfdc/v1/campaigns/"+i.a.get({preserveGlobalId:!0}),salesforceIntegrationStatus:"sfdc/v1/integration-status"}),Object.freeze({blogs:a,ctas:a,emails:{query:{limit:1e3,state__in:["automated_for_form","automated_for_form_draft"]}},forms:{property:["guid","name"]},hubdb:a,menus:a,tags:a,workflows:a,ticketWorkflows:{createdSourceApp:["TICKET_PIPELINE_SETTINGS","WORKFLOWS_APP"],limit:1e3,flowObjectType:"TICKET",clienttimeout:7e3},meetings:a,pages:{query:{limit:1e3,property:["name","id","url"]}}})),c=Object.freeze({workflows:{data:{type:"DRIP_DELAY"}},ticketWorkflows:{data:{flowObjectType:"TICKET"}},forms:{data:{guid:null,type:"FORM",version:"new",formFieldGroups:[{fields:[{name:"firstname",label:"First Name",type:"string",fieldType:"text",description:"",groupName:"contactinformation",required:!1,selectedOptions:[],options:[],hidden:!1}],default:!0,isSmartGroup:!1},{fields:[{name:"lastname",label:"Last Name",type:"string",fieldType:"text",description:"",groupName:"contactinformation",required:!1,selectedOptions:[],options:[],hidden:!1}],default:!0,isSmartGroup:!1},{fields:[{name:"email",label:"Email",type:"string",fieldType:"text",description:"",groupName:"contactinformation",required:!0,selectedOptions:[],options:[],validation:{name:"email",message:"Please enter a valid email address"},hidden:!1}],default:!0,isSmartGroup:!1}],action:"",cssClass:"hs-form stacked",embeddedCode:"",followUpId:"",leadNurturingCampaignId:"",method:"POST",name:"New Form",notifyRecipients:"",redirect:"",inlineMessage:"",submitText:"Submit",deletable:!0,captchaEnabled:!1}},emails:{query:{casing:"snake"},data:{template_path:"hubspot_default/email/responsive/email.html",state:"AUTOMATED_FOR_FORM_DRAFT",subcategory:"automated_for_form"}}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));n.d(t,"b",(function(){return i}));const r=Object.freeze({WORKFLOWS_CLASSIC:"WORKFLOWS_CLASSIC",WORKFLOWS_APP:"WORKFLOWS_APP",FORM_FIELD_FOLLOWUP:"FORM_FIELD_FOLLOWUP",CMS_FORM_MODULE_FIELD:"CMS_FORM_MODULE_FIELD"}),i="FORMS_APP"},,function(e,t,n){"use strict";n.d(t,"c",(function(){return d}));n.d(t,"g",(function(){return h}));n.d(t,"d",(function(){return m}));n.d(t,"e",(function(){return b}));n.d(t,"a",(function(){return y}));n.d(t,"b",(function(){return x}));n.d(t,"h",(function(){return E}));n.d(t,"f",(function(){return I}));var r=n(2),i=n(65),o=n(73),a=n(64),s=n(1055),c=n(1045),l=n(66);const u=["shouldShow"],d=(e,t)=>e.resources.workflows.workflows[t.id],p=e=>e.resources.workflows.workflows,h=Object(a.c)(p),m=(e,t)=>e.resources.workflows.requestStatus[t.id],f=e=>e.resources.workflows.hybrids,g=e=>e.resources.workflows.hybridsRequestStatus,b=(e,t)=>f(e)[t.id],O=e=>e.resources.workflows.summaries,y=Object(i.a)([c.h,g],(e,t)=>!!e&&e.every(e=>{const n=t[e];return n===l.SUCCEEDED||n===l.FAILED})),j=(e,t)=>t.formGuid,v=(e,t)=>t.contentId,C=Object(o.memoize)((e,t,n,i)=>{const o=[];e&&e.length&&e.forEach(e=>{const a=t[e],c=a&&Object(s.d)(a,n,i)||{},{shouldShow:l}=c,d=Object(r.a)(c,u),p=Object.assign({},a,d);l&&o.push(p)});return o},(e,t,n,r)=>`\n      ${e&&e.join(".")}-\n      ${JSON.stringify(t)}-\n      ${n}-${r}\n      `),x=Object(i.a)([c.h,f,j,v],C),E=Object(i.a)([x],e=>e.filter(e=>{if(e.isEnabled){const t=Object(s.c)(e);if(t){const{contentId:e}=t.metadata||{};return e}}return!1})),T=Object(o.memoize)(e=>e.reduce((e,t)=>Object.assign({},e,{[t.flowId]:t}),{}),e=>e.map(e=>e.flowId).join(".")),S=Object(i.a)([x],T),I=Object(i.a)([S,O],(e,t)=>t.map(t=>({text:t.name,value:t.flowId,disabled:"EVENT"===t.enrollmentTrigger||!!e[t.flowId],shouldEditManually:"EVENT"===t.enrollmentTrigger})))},function(e,t,n){"use strict";n.d(t,"d",(function(){return d}));n.d(t,"b",(function(){return p}));n.d(t,"a",(function(){return h}));n.d(t,"f",(function(){return m}));n.d(t,"e",(function(){return f}));n.d(t,"c",(function(){return b}));var r=n(73),i=n(1),o=n.n(i),a=n(1052);function s(e,t){return{filterBranchOperator:"AND",filterBranchType:"AND",filters:[{filterType:"FORM_SUBMISSION_ON_PAGE",formId:e,pageId:t.toString()}],filterBranches:[]}}function c(e){return 0===e.filterBranches.length||e.filterBranches.every(e=>0===e.filters.length)}function l(e,t,n,r=!1){const{filterBranches:i=[],filters:o=[]}=e||{};let a=!1,s=!1;for(const e of o)if(["FORM_SUBMISSION","FORM_SUBMISSION_ON_PAGE"].includes(e.filterType)&&e.formId===t){if(!n){s=!0;break}{const{pageId:t}=e,i=t===""+n;if(!t||i){s=!0;if(i){r||(a=!0);break}}}}if(a||s)return{canRemoveEnrollmentCriteria:a,shouldShow:s};for(const e of i){const i=l(e,t,n,r);if(i.canRemoveEnrollmentCriteria||i.shouldShow)return i}return{canRemoveEnrollmentCriteria:a,shouldShow:s}}function u(e,t,n){const{filterBranches:r=[],filters:i=[]}=e||{},o=!1;let a=!1;for(const e of i){const{operator:r,values:i=[]}=e.operation||{};if("PROPERTY"===e.filterType&&"hs_form_id"===e.property&&"IS_ANY_OF"===r&&i.includes(t)){a=!0;break}if("PROPERTY"===e.filterType&&"hs_content_id"===e.property&&"IS_ANY_OF"===r&&i.includes(""+n)){a=!0;break}}if(a)return{canRemoveEnrollmentCriteria:o,shouldShow:a};for(const e of r){const r=u(e,t,n);if(r.shouldShow)return r}return{canRemoveEnrollmentCriteria:o,shouldShow:a}}function d(e,t,n){const{associatedLists:r=[],createMetadata:i,flowEventFilters:o}=e||{},{sourceApp:s}=i||{};let c=!1;const d=!1;let p=!1;f(e,t)&&(p=!0);if(!a.a[s])return{canDelete:c,canRemoveEnrollmentCriteria:d,shouldShow:p};const h=s===a.a.CMS_FORM_MODULE_FIELD;h&&(c=!0);if(r&&r.length)for(const e of r){const r=l(e.filterBranch,t,n,h);if(r.canRemoveEnrollmentCriteria||r.shouldShow)return Object.assign({canDelete:c},r)}if(o&&o.length)for(const e of o){const{filter:r}=e.eventFilter||{},i=u(r,t,n);if(i.canRemoveEnrollmentCriteria||i.shouldShow)return Object.assign({canDelete:c},i)}return{canDelete:c,canRemoveEnrollmentCriteria:d,shouldShow:p}}function p(e,t,n){return{name:e,objectTypeId:"0-1",uuid:`form-field-followup-${n}-${(new Date).getTime()}`,associatedLists:[{updateType:"CREATE",listTypes:["ENROLLMENT_LIST"],filterBranch:{filterBranchOperator:"OR",filterBranchType:"OR",filters:[],filterBranches:[s(t,n)]}}],enrollmentTrigger:"LIST",classicEnrollmentSettings:{}}}function h(e,t,n){if("EVENT"===e.enrollmentTrigger)return e;const{associatedLists:r}=e,i=r.find(e=>e.listTypes.includes("ENROLLMENT_LIST")),o=i?Object.assign({},i,{updateType:"UPDATE",filterBranch:Object.assign({},i.filterBranch,{filterBranches:[...i.filterBranch.filterBranches,s(t,n)]})}):{updateType:"CREATE",listTypes:["ENROLLMENT_LIST"],filterBranch:{filterBranchOperator:"OR",filterBranchType:"OR",filters:[],filterBranches:[s(t,n)]}};return Object.assign({},e,{enrollmentTrigger:"LIST",associatedLists:[o]})}function m(e,t,n){if("LIST"!==e.enrollmentTrigger)return e;const i=e.associatedLists.find(e=>e.listTypes.includes("ENROLLMENT_LIST"));if(!i)return e;const o=Object.assign({},i.filterBranch,{filterBranches:i.filterBranch.filterBranches.map(e=>Object.assign({},e,{filters:e.filters.filter(e=>!("FORM_SUBMISSION_ON_PAGE"===e.filterType&&e.formId===t&&e.pageId===n.toString()||"FORM_SUBMISSION"===e.filterType&&e.formId===t))})).filter(e=>e.filters.length)});return Object(r.isEqual)(o,i.filterBranch)?e:Object.assign({},e,{associatedLists:[c(o)?Object.assign({},i,{updateType:"DELETE"}):Object.assign({},i,{updateType:"UPDATE",filterBranch:o})]})}function f(e,t){const{createMetadata:n,isEnabled:r,uuid:i}=e||{},{sourceApp:s}=n||{};return!(s!==a.b||!r||!i.startsWith(`${o.a.get()}:${t}`))}const g="EMAIL";function b(e){const{actions:t={}}=e||{},n=Object.keys(t).find(e=>{const n=t[e];return n&&n.actionType===g});return n?t[n]:void 0}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));n.d(t,"c",(function(){return i}));n.d(t,"d",(function(){return o}));n.d(t,"b",(function(){return a}));const r="HUBSPOT",i="TICKET_FORM",o="VIDEO_FORM",a=Object.freeze({HUBSPOT:0,FLOW:1,CAPTURED:2,FACEBOOK_LEAD_AD:3,BLOG_COMMENT:4,MEETING:5,FEEDBACK:6,TICKET_FORM:7,DOCUMENT:8,VIDEO_FORM:9,QUESTIONNAIRE:10,SURVEY:11,PAYMENT:12})},function(e,t,n){"use strict";n.d(t,"f",(function(){return o}));n.d(t,"b",(function(){return a}));n.d(t,"c",(function(){return c}));n.d(t,"g",(function(){return l}));n.d(t,"d",(function(){return u}));n.d(t,"h",(function(){return d}));n.d(t,"e",(function(){return m}));n.d(t,"a",(function(){return f}));var r=n(65),i=n(64);const o=e=>e.resources.pages.pages,a=(e,t)=>e.resources.pages.pages[t.id],s=e=>e.resources.pages.pagesCacheOrder,c=(e,t)=>e.resources.pages.pagesCache[t.id],l=e=>e.resources.pages.pagesCache,u=(e,t)=>e.resources.pages.requestStatus[t.id],d=e=>e.resources.pages.pagesRequestStatus,p=e=>e&&e.isPublished,h=e=>e&&e.absoluteUrl,m=Object(r.a)([l,s],(e,t)=>t.reduce((t,n)=>{const r=e[n];t.push({value:n,text:r.name,help:r.absoluteUrl});return t},[])),f=Object(i.c)(o,{disabledPredicate:p,getHelpText:h})},function(e,t,n){"use strict";n.d(t,"i",(function(){return o}));n.d(t,"d",(function(){return a}));n.d(t,"l",(function(){return s}));n.d(t,"e",(function(){return c}));n.d(t,"f",(function(){return l}));n.d(t,"j",(function(){return d}));n.d(t,"g",(function(){return p}));n.d(t,"h",(function(){return h}));n.d(t,"c",(function(){return m}));n.d(t,"a",(function(){return g}));n.d(t,"b",(function(){return O}));n.d(t,"o",(function(){return y}));n.d(t,"n",(function(){return j}));n.d(t,"k",(function(){return v}));n.d(t,"m",(function(){return C}));var r=n(65),i=n(64);const o=e=>e.resources.emails.emails,a=(e,t)=>e.resources.emails.emails[t.id],s=(e,t)=>{const n=e.resources.emails.emails[t.id];return n&&!n.isPublished},c=e=>e.resources.emails.emailBuffers,l=(e,t)=>e.resources.emails.emailsCache[t.id],u=e=>e.resources.emails.emailsCache,d=e=>e.resources.emails.emailsCacheRequestStatus,p=(e,t)=>e.resources.emails.requestStatus[t.id],h=Object(i.c)(u),m=Object(i.c)(o);function f(e,t=!1){return Object.keys(e).reduce((n,r)=>{const o=e[r],{emailType:a,name:s=""}=o||{};(t||"AUTOMATED_EMAIL"===a||"AUTOMATED_AB_EMAIL"===a)&&n.push({value:Object(i.f)(r),text:s});return n},[])}const g=Object(r.a)([u],e=>f(e)),b=(e,t)=>t.showLegacyEmails,O=Object(r.a)([o,b],(e,t)=>f(e,t)),y=()=>Object(r.a)([a],e=>e&&e.isPublished),j=()=>Object(r.a)([a],e=>e&&"DESIGN_MANAGER"===e.emailTemplateMode),v=(e,t)=>{const{id:n}=t,r=a(e,{id:n});return!(!r||r.isPublished&&"DRAG_AND_DROP"!==r.emailTemplateMode)||void 0!==e.resources.emails.isLegacyEmailConvertible[t.id]},C=(e,t)=>{const{id:n}=t,{emailTemplateMode:r,isPublished:i}=a(e,{id:n})||{};return!!i&&("DRAG_AND_DROP"===r||(e.resources.emails.isLegacyEmailConvertible[n]||!1))}},function(e,t,n){"use strict";n.d(t,"d",(function(){return h}));n.d(t,"e",(function(){return m}));n.d(t,"f",(function(){return f}));n.d(t,"c",(function(){return g}));n.d(t,"b",(function(){return b}));n.d(t,"h",(function(){return O}));n.d(t,"i",(function(){return y}));n.d(t,"a",(function(){return j}));n.d(t,"g",(function(){return v}));var r=n(64),i=n(1060),o=n(1058),a=n(68);const s=Object(r.b)(a.EMAILS_FETCH_EMAIL,i.g),c=Object(r.b)(a.EMAILS_FETCH_EMAIL_BUFFER,i.h),l=Object(r.b)(a.EMAILS_FETCH_EMAILS,i.i),u=Object(r.b)(a.EMAILS_FETCH_AUTOMATED_EMAILS,i.d),d=Object(r.b)(a.EMAILS_FETCH_IS_LEGACY_EMAIL_CONVERTIBLE,i.j),p=Object(r.a)(a.EMAILS_CREATE_EMAIL,i.b);function h(e){return s(e)}function m(e){return c(e)}function f(e){return l(e)}function g(e){return u(e)}function b(e){return p(e)}function O(e){return(t,n)=>{const r=Object(o.f)(n(),{id:e});t({type:a.EMAILS_SAVE_EMAIL_CACHE,email:r})}}function y(e,t){return n=>{if(t){const r=i.l(e,t);return r.then(e=>{n({type:a.EMAILS_UPDATE_EMAIL,response:e});return r}).catch(e=>{n({type:a.EMAILS_UPDATE_EMAIL,error:e});return r})}{const t=i.c(e);return t.then(e=>{n({type:a.EMAILS_CREATE_EMAIL,response:e});return t}).catch(e=>{n({type:a.EMAILS_CREATE_EMAIL,error:e});return t})}}}function j(){return{type:a.EMAILS_CLEAR_CACHE}}function v(e){return d(e)}},function(e,t,n){"use strict";n.d(t,"g",(function(){return a}));n.d(t,"h",(function(){return s}));n.d(t,"l",(function(){return c}));n.d(t,"c",(function(){return l}));n.d(t,"i",(function(){return u}));n.d(t,"d",(function(){return d}));n.d(t,"b",(function(){return p}));n.d(t,"k",(function(){return h}));n.d(t,"f",(function(){return m}));n.d(t,"e",(function(){return f}));n.d(t,"a",(function(){return g}));n.d(t,"j",(function(){return b}));var r=n(1049),i=n(1051);function o(e){return Object.assign({state__in:["automated_for_form","automated_for_form_draft"]},e)}function a(e,...t){return Object(r.a)(t).get("cosemail/v1/emails/"+e)}function s(e,...t){return Object(r.a)(t).get(`marketing-emails/v1/emails/${e}/buffer`)}function c(e,t,...n){return Object(r.a)(n).put(`cosemail/v1/emails/${t}/update-and-publish`,{data:e})}function l(e,...t){return Object(r.a)(t).post("cosemail/v1/emails/create-plain-email",{data:e})}function u(e={},...t){return Object(r.a)(t).get("cosemail/v1/emails",{query:o(e)})}function d(e={},...t){return Object(r.a)(t).get("cosemail/v1/emails/search/automated-with-ticket-and-deal",{query:Object.assign({},e,{emailTypes:["AUTOMATED_EMAIL","AUTOMATED_AB_EMAIL"],emailSortField:"UPDATED",sortOrder:"DESC"})})}function p(e,...t){return Object(r.a)(t).post("cosemail/v1/emails",{query:i.a.emails.query,data:Object.assign({name:e},i.a.emails.data)})}const h=(...e)=>Object(r.a)(e).get("email-ownership/v1/owned-addresses"),m=(...e)=>Object(r.a)(e).get("conversations-email/v1/connected-accounts/all"),f=(...e)=>Object(r.a)(e).get("content/api/v4/can-spam-settings",{query:{casing:"snake",limit:500}});function g(e,...t){const n=Object(r.a)(t),{id:i,language:o,name:a}=e;return n.post(`marketing-emails/v1/emails/${i}/convert-forms-followup-to-automated`,{data:{language:o,name:a}})}function b(e,...t){return Object(r.a)(t).get(`cosemail/v1/emails/${e}/is-convertible-to-drag-and-drop`)}},function(e,t,n){"use strict";n.d(t,"e",(function(){return o}));n.d(t,"a",(function(){return c}));n.d(t,"f",(function(){return l}));n.d(t,"g",(function(){return u}));n.d(t,"b",(function(){return d}));n.d(t,"c",(function(){return p}));n.d(t,"d",(function(){return h}));n.d(t,"h",(function(){return m}));var r=n(65),i=n(174);const o=e=>e.resources.tags.tags,a=(e,t)=>t.value,s=(e,t)=>t.tagValue||i.SLUG,c=Object(r.a)([a,s,o],(e,t,n)=>t===i.ALL?n.byId[e.id]:t===i.ID?n.byId[e]:t===i.NAME?n.byName[e]:n.bySlug[e]),l=e=>e.resources.tags.tagsCache,u=e=>e.resources.tags.tagsCacheRequestStatus,d=Object(r.a)([a,s,l],(e,t,n)=>t===i.ID||t===i.ALL?n.byId[e]:t===i.NAME?n.byName[e]:n.bySlug[e]),p=(e,t)=>e.resources.tags.requestStatus[t.key],h=Object(r.a)([s,l],(e,t)=>{let n=t.bySlug;e!==i.ID&&e!==i.ALL||(n=t.byId);e===i.NAME&&(n=t.byName);return Object.keys(n).map(t=>{const r=n[t];return{value:e===i.NAME?t:Number(t)||t,text:r.name,language:r.language}})}),m=()=>Object(r.a)([s,o],(e,t)=>{let n=t.bySlug;e!==i.ID&&e!==i.ALL||(n=t.byId);e===i.NAME&&(n=t.byName);return Object.keys(n).map(t=>{const r=n[t];return{value:e===i.NAME?t:Number(t)||t,text:r.name,language:r.language}})})},function(e,t,n){"use strict";n.d(t,"h",(function(){return a}));n.d(t,"a",(function(){return s}));n.d(t,"b",(function(){return c}));n.d(t,"e",(function(){return l}));n.d(t,"f",(function(){return u}));n.d(t,"c",(function(){return d}));n.d(t,"g",(function(){return p}));n.d(t,"d",(function(){return h}));n.d(t,"i",(function(){return m}));var r=n(64),i=n(69);const o=e=>e.resources.blogs.blogs,a=e=>e.resources.blogs.blogDefault.default,s=(e,t)=>{const{id:n}=t,r=n===i.a?a:n;return e.resources.blogs.blogs[r]},c=(e,t)=>e.resources.blogs.blogsCache[t.id],l=e=>e.resources.blogs.blogsCache,u=e=>e.resources.blogs.blogsCacheRequestStatus,d=(e,t)=>e.resources.blogs.requestStatus[t.id],p=e=>e.resources.blogs.requestStatusDefault[i.a],h=Object(r.c)(l),m=Object(r.c)(o)},function(e,t,n){"use strict";n.d(t,"c",(function(){return d}));n.d(t,"d",(function(){return p}));n.d(t,"e",(function(){return h}));n.d(t,"f",(function(){return m}));n.d(t,"a",(function(){return f}));n.d(t,"b",(function(){return g}));n.d(t,"g",(function(){return b}));var r=n(64),i=n(1064),o=n(1062),a=n(68),s=n(69);const c=Object(r.b)(a.BLOGS_FETCH_BLOG,i.c),l=Object(r.b)(a.BLOGS_FETCH_BLOGS,i.d),u=Object(r.b)(a.BLOGS_FETCH_DEFAULT_BLOG,i.e),d=e=>c(e),p=e=>l(e),h=()=>u(s.a),m=e=>(t,n)=>{const r=Object(o.b)(n(),{id:e});t({type:a.BLOGS_SAVE_BLOG_CACHE,blog:r})},f=()=>({type:a.BLOGS_CLEAR_CACHE}),g=()=>({type:a.BLOGS_CREATE_BLOG_FAILED}),b=e=>({type:a.BLOGS_CREATE_BLOG_SUCCEEDED,payload:e})},function(e,t,n){"use strict";n.d(t,"c",(function(){return i}));n.d(t,"d",(function(){return o}));n.d(t,"a",(function(){return a}));n.d(t,"b",(function(){return s}));n.d(t,"e",(function(){return u}));var r=n(1049);function i(e,...t){return Object(r.a)(t).get("blog-settings/v1/blogs/"+e)}function o(e,...t){return Object(r.a)(t).get("blog-settings/v1/blogs",{query:e})}function a(e,...t){return Object(r.a)(t).post("blog-settings/v1/blogs",{data:e})}function s(e,t,...n){return Object(r.a)(n).post("blogs/v3/blog-posts",{data:Object.assign({contentGroupId:e,publishDate:(new Date).getTime()},t)})}const c=n(2643).a.forCaller("cms-module-form"),l=":cms-control-center-favorite-blog";function u(){return c.fetch(l,"")}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));n.d(t,"b",(function(){return o}));n.d(t,"c",(function(){return a}));var r=n(65);const i=(e,t)=>e.resources.ctas.ctas[t.guid],o=(e,t)=>e.resources.ctas.requestStatus[t.guid],a=((e=>{Object(r.a)([e],e=>Object.keys(e).map(t=>{const n=e[t],{name:r}=n,i=n.ctaInfo.filter(e=>e.isDefault)[0]||n.ctaInfo[0]||{},{image:o}=i;return{value:t,text:r,image:o}}))})(e=>e.resources.ctas.ctas),(e=i)=>Object(r.a)([e],e=>{if(!e)return null;return(e.ctaInfo.filter(e=>e.isDefault)[0]||e.ctaInfo[0]||{}).image}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));n.d(t,"b",(function(){return c}));n.d(t,"c",(function(){return l}));var r=n(65);const i=e=>e.resources.icons.iconsSelect,o=e=>e.resources.icons.isFetching,a=e=>e.resources.icons.icons,s=(e,t)=>e.resources.icons.icons[t.name],c=(e,t)=>e.resources.icons.requestStatus[t.name],l=()=>Object(r.a)([i,o,a],(e,t,n)=>{const{icons:r,totalIcons:i,hasMoreIcons:o}=e;return{hasMoreIcons:o,icons:r,isFetching:t,selectedIcons:n,totalIcons:i}})},function(e,t,n){"use strict";n.d(t,"m",(function(){return d}));n.d(t,"i",(function(){return p}));n.d(t,"j",(function(){return h}));n.d(t,"k",(function(){return f}));n.d(t,"o",(function(){return g}));n.d(t,"n",(function(){return b}));n.d(t,"l",(function(){return y}));n.d(t,"c",(function(){return j}));n.d(t,"h",(function(){return C}));n.d(t,"d",(function(){return E}));n.d(t,"a",(function(){return T}));n.d(t,"e",(function(){return S}));n.d(t,"g",(function(){return I}));n.d(t,"b",(function(){return w}));n.d(t,"f",(function(){return _}));var r=n(73),i=n(64),o=n(1068),a=n(1069);const s=e=>{const t=e.useForPages?{hs_name:{id:null,type:o.a.TEXT},hs_path:{id:null,type:o.a.URL}}:{};return e.columns.reduce((e,t)=>{const{id:n,name:r,type:i}=t;o.b[i]||(e[r]={id:n,type:i});return e},t)},c=(e,t,n,r)=>{if(!e||!e.values)return"";let i=!0;const s=/(%\d+)/,c=n&&n.length,l=Object(a.a)(r,c).split(s),u=c?n:[Object.keys(t)[0]],d=l.reduce((n,r)=>{let a=r?{text:r}:null;if(s.test(r)){const n=parseInt(r.substring(1),10),s=t[u[n]];let c;s&&(c=s.id?e.values[s.id]:s.type===o.a.URL?e.path:e.name);a=void 0!==c?{columnType:s.type,text:c}:null;null!==a&&(i=!1)}null!==a&&n.push(a);return n},[]);return i?[]:d},l=e=>e&&0===e.publishedAt,u=e=>e&&(e.label||e.name)||void 0,d=e=>e.resources.hubdb.tables.byId,p=(e,t)=>isNaN(t.id)?e.resources.hubdb.tables.byName[t.id]:e.resources.hubdb.tables.byId[t.id],h=(e,t)=>e.resources.hubdb.tablesCache[t.id],m=e=>e.resources.hubdb.tablesCache,f=(e,t)=>e.resources.hubdb.tableRequestStatus[t.id],g=(e,t)=>l(p(e,t)),b=(e,t)=>{const n=p(e,t);return n&&n.deleted},O=(e,t)=>{const n=e.resources.hubdb.rows[t.tableId];return Object(r.isEmpty)(n)?{}:n[t.rowId]},y=Object(i.c)(m,{disabledPredicate:l,getDisplayText:u}),j=Object(i.c)(d,{disabledPredicate:l,getDisplayText:u}),v=(e,t)=>({displayColumns:t.displayColumns,displayFormat:t.displayFormat}),C=(e,t)=>e.resources.hubdb.rows[t.id]||{},x=(e,t)=>e.resources.hubdb.rowsCache[t.id]||{},E=e=>e.resources.hubdb.hubDbCacheRequestStatus,T=(e,t)=>{const n=e.resources.hubdb.rowsCache[t.tableId];return Object(r.isEmpty)(n)?{}:n[t.rowId]},S=(e,t)=>e.resources.hubdb.rowRequestStatus[t.id],I=(e,t)=>{const n=p(e,t),r=x(e,t),o=v(e,t),a=n?s(n):{},{displayColumns:l,displayFormat:u}=o;return Object.keys(r).map(e=>{const t=r[e];return{value:Object(i.f)(e),textArray:c(t,a,l,u)}})},w=(e,t)=>{const n=p(e,t),r=C(e,t),o=v(e,t),a=n?s(n):{},{displayColumns:l,displayFormat:u}=o;return Object.keys(r).map(e=>{const t=r[e];return{value:Object(i.f)(e),textArray:c(t,a,l,u)}})},_=(e,t)=>{const n=p(e,t),r=n?s(n):{},i=Object.assign({tableId:n&&n.id},t),o=O(e,i)||{},a=c(o,r,t.displayColumns,t.displayFormat);return a&&a.length?a:o.id&&o.id.toString()}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));n.d(t,"b",(function(){return i}));const r=Object.freeze({TEXT:"TEXT",RICHTEXT:"RICHTEXT",URL:"URL",IMAGE:"IMAGE",SELECT:"SELECT",MULTISELECT:"MULTISELECT",DATE:"DATE",DATETIME:"DATETIME",NUMBER:"NUMBER",CURRENCY:"CURRENCY",BOOLEAN:"BOOLEAN",LOCATION:"LOCATION",PATH:"PATH",FOREIGN_ID:"FOREIGN_ID",FOREIGN_TABLE:"FOREIGN_TABLE",VIDEO:"VIDEO",FILE:"FILE",CTA:"CTA"}),i=Object.freeze({RICHTEXT:r.RICHTEXT,MULTISELECT:r.MULTISELECT,BOOLEAN:r.BOOLEAN,LOCATION:r.LOCATION,FOREIGN_ID:r.FOREIGN_ID,FOREIGN_TABLE:r.FOREIGN_TABLE,VIDEO:r.VIDEO})},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));const r=(e,t)=>{if(e)return e;let n="%0";if(t&&t>0)for(let e=1;e<=t-1;e++)n=`${n} %${e}`;return n}},function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var r=n(40),i=n(2627),o=n(506),a=n(1068),s=n(45);const c=" ",l=/\S/,u=/\s/,d=/(\s)/,p=/\r?\n|\r/,h=(e,t)=>{const n=t.split(d),i=[];n.forEach(t=>{p.test(t)?i.push(Object(s.jsx)("br",{},"br-"+e)):u.test(t)&&i.push(c)});return Object(s.jsx)(r.Fragment,{children:i},e)},m=e=>Array.isArray(e)?e.reduce((e,t,n)=>{const c=t.columnType||"",u=t.text;if("string"!=typeof u||l.test(u))if(c===a.a.SELECT){const t=u.name;e.push(Object(s.jsx)(r.Fragment,{children:t},n))}else"number"==typeof u&&c.includes(a.a.DATE)?e.push(Object(s.jsx)(i.a,{format:c===a.a.DATETIME?"lll":"ll",value:u},n)):c===a.a.IMAGE?e.push(Object(s.jsx)(o.a,{className:0===n?"m-right-1":"m-x-1",responsive:!1,shape:"thumbnail",src:u.url,style:{maxHeight:24}},n)):e.push(Object(s.jsx)(r.Fragment,{children:u},n));else e.push(h(n,u));return e},[]):e},,,,function(e,t,n){"use strict";n.d(t,"b",(function(){return s}));n.d(t,"c",(function(){return l}));n.d(t,"a",(function(){return u}));var r=n(64),i=n(1050),o=n(68);Object(r.b)(o.WORKFLOWS_FETCH_WORKFLOWS,i.i);const a=Object(r.b)(o.WORKFLOWS_FETCH_WORKFLOW,i.f),s=e=>a(e),c=(Object(r.a)(o.WORKFLOWS_CREATE_WORKFLOW,i.a),Object(r.b)(o.WORKFLOWS_FETCH_SUMMARIES,i.h)),l=e=>c(e),u=()=>({type:o.WORKFLOWS_CLEAR_SUMMARIES})},function(e,t,n){"use strict";n.d(t,"b",(function(){return u}));n.d(t,"c",(function(){return p}));n.d(t,"e",(function(){return m}));n.d(t,"f",(function(){return f}));n.d(t,"a",(function(){return g}));n.d(t,"d",(function(){return b}));var r=n(65),i=n(73),o=n(2685),a=n(64),s=n(1076),c=n(2804);function l(e){const{email:t,firstName:n,lastName:r}=e;return Object(o.a)({firstName:n,lastName:r})||t}const u=(e,t)=>t.link?e.resources.meetings.meetings[t.link]:void 0,d=e=>e.resources.meetings.meetings,p=(e,t)=>t.link?e.resources.meetings.meetingsCache[t.link]:void 0,h=e=>e.resources.meetings.meetingsCache,m=e=>e.resources.meetings.meetingsCacheRequestStatus,f=Object(r.a)([h,c.d],(e,t)=>{if(Object(i.isEmpty)(e))return[];const n=t.reduce((e,t)=>{e[t.id]={options:[],text:l(t)};return e},{});Object.values(e).forEach(e=>{n.hasOwnProperty(e.userId)&&n[e.userId].options.push({value:e.link,text:Object(s.a)(e,!0),help:e.link})});return Object.values(n)}),g=Object(a.c)(d,{getDisplayText:s.a}),b=(e,t)=>t.link?e.resources.meetings.requestStatus[t.link]:void 0},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(4),i=n(99);const o=60,a=(e,t=!0)=>{if(e.name)return e.name;let n=[];e.durations?n=e.durations:e.customParams&&(n=e.customParams.durations);const a=n.sort((e,t)=>t-e),s=r.a.formatList(a.map(e=>{const t=r.a.moment.duration(e).minutes();if(t<=o)return Object(i.a)("contentUtils.durations.minute",{count:r.a.moment.duration(e).asMinutes()});const n=r.a.moment.duration(e).hours(),a=Object(i.a)("contentUtils.durations.hour",{count:n}),s=Object(i.a)("contentUtils.durations.minute",{count:t});return Object(i.a)("contentUtils.durations.combined",{hourText:a,minuteText:s})}));return t?Object(i.a)("contentUtils.durations.placeholderName",{durations:s}):s}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));n.d(t,"c",(function(){return c}));n.d(t,"b",(function(){return l}));n.d(t,"d",(function(){return u}));n.d(t,"e",(function(){return d}));var r=n(65),i=n(64),o=n(175);const a=(e,t)=>e.resources.salesforce.campaigns[t.id],s=e=>e.resources.salesforce.campaigns,c=Object(i.c)(s),l=(e,t)=>e.resources.salesforce.campaignsRequestStatus[t.id],u=(e,t)=>t.integrationStatus||e.resources.salesforce.integrationStatus,d=Object(r.a)([u],e=>e===o.a.CONNECTED)},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));n.d(t,"d",(function(){return i}));n.d(t,"b",(function(){return o}));n.d(t,"e",(function(){return a}));n.d(t,"f",(function(){return s}));n.d(t,"c",(function(){return c}));const r=(e,t)=>{const n=e.resources.surveys.surveys[t.surveyType];return n?n[t.id]:null},i=e=>e.resources.surveys.surveys,o=(e,t)=>{const n=e.resources.surveys.surveysCache[t.surveyType];return n?n[t.id]:null},a=e=>e.resources.surveys.surveysCache,s=e=>e.resources.surveys.surveysCacheRequestStatus,c=(e,t)=>(e.resources.surveys.requestStatus[t.surveyType]||{})[t.id]},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));n.d(t,"b",(function(){return i}));const r=(e,t)=>e.resources.videos.videos[t.playerId],i=(e,t)=>e.resources.videos.video2FetchStatus[t.playerId]},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));n.d(t,"b",(function(){return s}));var r=n(64),i=n(1081),o=n(68);const a=Object(r.b)(o.VIDEOS_FETCH_VIDEO_2,i.a),s=(e,t)=>({type:o.VIDEOS_SAVE_VIDEO,video:t,playerId:e})},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));n.d(t,"b",(function(){return c}));var r=n(1049);function i(e,...t){return Object(r.a)(t).get("video/v1/videos/"+e)}function o(e,...t){return Object(r.a)(t).get("video/v1/videos/by-file-id/"+e)}const a=10,s=1e3;function c(e){let t,n=0;return new Promise((r,i)=>{const c=()=>{o(e).then(e=>{clearTimeout(t);r(e)}).catch(e=>{n++;n<a?t=setTimeout(c,s):i(e)})};t=setTimeout(c,s)})}},function(e,t,n){"use strict";n.d(t,"k",(function(){return g}));n.d(t,"g",(function(){return b}));n.d(t,"j",(function(){return y}));n.d(t,"t",(function(){return j}));n.d(t,"f",(function(){return v}));n.d(t,"e",(function(){return x}));n.d(t,"l",(function(){return E}));n.d(t,"q",(function(){return T}));n.d(t,"a",(function(){return S}));n.d(t,"b",(function(){return w}));n.d(t,"m",(function(){return N}));n.d(t,"n",(function(){return A}));n.d(t,"d",(function(){return D}));n.d(t,"i",(function(){return k}));n.d(t,"c",(function(){return P}));n.d(t,"h",(function(){return R}));n.d(t,"p",(function(){return L}));n.d(t,"r",(function(){return M}));n.d(t,"s",(function(){return B}));n.d(t,"o",(function(){return U}));var r=n(65),i=n(73),o=n(99),a=n(71),s=n(70),c=n(1083),l=n(64),u=n(66),d=n(1084);const p=e=>e.resources.crmObjects.crmObjectTypes;let h={};const m=e=>{h={};const t={},n={},r={},i={};return Object.keys(e).map(c=>{const l=e[c];let u=l.name;const d=l.name.toUpperCase(),p=l.metaType===s.a.HUBSPOT&&a.a[d];p?u=Object(o.a)(`ContentComponents.crmObjectTypes.${p}.singular`):l.singularForm&&(u=l.singularForm);i[u]?r[u]=l:i[u]=l;const h=l.name.toLowerCase();n[h]?t[h]=l:n[h]=l;return{text:u,value:c}}).map(n=>{const i=n.value,a=e[i];r[n.text]&&(n.text=a.metaType===s.a.HUBSPOT?Object(o.a)("designdata.crmObjects.duplicteTypeOptions.builtinLabel",{typeLabel:n.text}):Object(o.a)("designdata.crmObjects.duplicteTypeOptions.portalSpecificLabel",{typeLabel:n.text}));n.value=i.toLowerCase();h[i]=n;a.metaType===s.a.HUBSPOT?n.value=a.name.toLowerCase():a.metaType!==s.a.PORTAL_SPECIFIC||t[a.name.toLowerCase()]||(n.value="p_"+a.name);h[n.value]=n;return n}).sort((e,t)=>e.text<t.text?-1:e.text>t.text?1:0)},f=Object(i.memoize)(m,e=>Object.keys(e).join(".")),g=Object(r.a)([p],e=>f(e)),b=(e,t)=>e.resources.crmObjects.crmObjectSchemas[t.objectType],O=(e,t)=>e.resources.crmObjects.crmObjectSchemaGroups[t.objectType],y=Object(r.a)([b,O],(e,t)=>{if(e&&e.properties&&t&&t.length){const n=e.properties.reduce((e,n)=>{if(n.name===d.a)return e;const r=e.findIndex(e=>e.name===n.groupName);if(r>=0)e[r].allPropertyDefinitions.push(n);else{const r=t.find(e=>e.name===n.groupName);if(r){r.allPropertyDefinitions=[n];e.push(r)}}return e},[]);return Object(i.sortBy)(n,"displayOrder")}}),j=(e,t)=>{const n=b(e,t),{objectType:r}=t||{};if(n){const e=r.toLowerCase(),t="p_"+r,n=h[e]||h[t];if(n)return n.value}return r},v=Object(r.a)([b],e=>{const{properties:t}=e||{};return t?t.reduce((e,t)=>{t.hidden||e.push({text:t.label,value:t.name});return e},[]):[]}),C=(e,t)=>{const{objectType:n,property:r}=t||{},i=e.resources.crmObjects.selectedCrmObjectProperties[n];return i&&i[r]||{text:r}},x=Object(r.a)([b,C],(e,t)=>{if(t&&t.value)return t.text;let n="";const{properties:r}=e||{};r&&(n=(r.find(e=>t.text===e.name)||{}).label);return n}),E=(e,t)=>e.resources.crmObjects.crmObjects[t.objectType]||{},T=(e,t)=>e.resources.crmObjects.crmObjectsWithPropertiesObject[t.objectType]||{},S=(e,t)=>{const n=e.resources.crmObjects.crmObjects[t.objectType];return n&&n[t.id]},I=(e,t)=>e.resources.crmObjects.crmObjectsCacheOrder[t.objectType]||[],w=(e,t)=>{const n=e.resources.crmObjects.crmObjectsCache[t.objectType];return n&&n[t.id]},_=(e,t)=>e.resources.crmObjects.crmObjectsCache[t.objectType]||{},N=Object(r.a)([_,I],(e,t)=>t.map(t=>e[t])),A=e=>e.resources.crmObjects.crmObjectsCacheRequestStatus,D=(e,t)=>{const n=e.resources.crmObjects.requestStatus[t.objectType];return n&&n[t.id]},k=(e,t)=>e.resources.crmObjects.schemaRequestStatus[t.objectType],P=Object(r.a)([D],e=>e===u.FAILED),R=Object(r.a)([k],e=>e===u.FAILED),F=(e,t)=>t?{displayFormat:t.displayFormat,displayProperties:t.displayProperties}:{},L=Object(r.a)([_,I,b,F],(e,t,n,r)=>t.reduce((t,i)=>{const o=e[i];t.push({value:i,text:Object(c.c)(o,n,r)});return t},[])),M=Object(r.a)([E,b,F],(e,t,n)=>Object.keys(e).reduce((r,i)=>{const o=e[i];r.push({value:Object(l.f)(i),text:Object(c.c)(o,t,n)});return r},[])),B=(e,t)=>e.resources.crmObjects.editCrmObjectRequestStatus[t.objectType]||{},U=(e,t)=>e.resources.crmObjects.crmObjectsCacheTotal[t.objectType]},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));n.d(t,"b",(function(){return u}));n.d(t,"d",(function(){return d}));n.d(t,"c",(function(){return h}));n.d(t,"f",(function(){return m}));n.d(t,"e",(function(){return f}));var r=n(73),i=n(2685),o=n(99),a=n(71),s=n(70);function c(e,t){return e&&e.metaType===s.a.HUBSPOT&&e.name.toLowerCase()===t}const l=Object.freeze(Object.assign({},Object(r.omit)(a.a,[a.a.PRODUCT.toUpperCase(),a.a.MARKETING_EVENT.toUpperCase()]))),u=Object.freeze(Object.assign({},Object(r.omit)(a.a,[a.a.CONTACT.toUpperCase(),a.a.COMPANY.toUpperCase(),a.a.DEAL.toUpperCase(),a.a.TICKET.toUpperCase(),a.a.PRODUCT.toUpperCase(),a.a.MARKETING_EVENT.toUpperCase()])));function d(e,t=[]){if(t.length)return t;if(c(e,a.a.PRODUCT))return["name"];const{primaryDisplayProperty:n,secondaryDisplayProperties:r=[]}=e;return(n?[n]:[]).concat(r)}const p=(e,t)=>{if(e)return e;let n="%0";for(let e=1;e<=(t-1||0);e++)n=`${n} %${e}`;return n};function h(e,t,n){if(t){const{properties:r={}}=e||{},{displayFormat:o,displayProperties:s}=n||{};let l=!0;if(s&&s.length){const e=s.length;let t=p(o,e);/%\d+/.test(t)&&s.forEach((e,n)=>{r[e]&&(l=!1);t=t.replaceAll("%"+n,r[e]||"")||t});return l?"":t.replaceAll(/%\d+/g,"")}if(c(t,a.a.CONTACT)){const{firstname:e,lastname:t}=r;if(e||t)return Object(i.a)({firstName:e,lastName:t})}const u=d(t);for(const e of u)if(r[e])return r[e]}return""+e.objectId}function m(e,t){return t&&t.length?{filterGroups:t.map(t=>({filters:[{property:t,operator:"EQ",value:e+"*"}]}))}:{query:e}}function f(e,t){const{labels:n,metaType:r}=e||{},{singular:i}=n||{};let c=i||t;const l=t.toUpperCase(),u=a.a[l];r===s.a.HUBSPOT&&u&&(c=Object(o.a)(`ContentComponents.crmObjectTypes.${u}.singular`));return c.toLowerCase()}},function(e,t,n){"use strict";n.d(t,"b",(function(){return r}));n.d(t,"c",(function(){return i}));n.d(t,"d",(function(){return o}));n.d(t,"a",(function(){return a}));const r=Object.freeze({SELECT:"SELECT",CREATE:"CREATE"}),i="allPropertiesFetchMode",o="latest_version",a="hs_folder_name"},function(e,t,n){"use strict";n.d(t,"e",(function(){return o}));n.d(t,"a",(function(){return s}));n.d(t,"g",(function(){return c}));n.d(t,"c",(function(){return l}));n.d(t,"h",(function(){return u}));n.d(t,"d",(function(){return d}));n.d(t,"f",(function(){return p}));n.d(t,"i",(function(){return h}));n.d(t,"b",(function(){return m}));var r=n(65),i=n(66);const o=e=>e.resources.payments.paymentsEligibility,a=e=>e.resources.payments.paymentsEligibilityRequestStatus,s=Object(r.a)([a],e=>e===i.SUCCEEDED||e===i.FAILED),c=e=>e.resources.payments.orderedPayments,l=(e,t)=>e.resources.payments.payments.byId[t.id],u=e=>e.resources.payments.payments.byId,d=(e,t)=>e.resources.payments.payments.byUrl[t.url],p=(e,t)=>e.resources.payments.requestStatus[t.id],h=e=>e.resources.payments.paymentsRequestStatus,m=Object(r.a)([a,h,s],(e,t,n)=>e===i.PENDING||n&&t===i.PENDING)},function(e,t,n){"use strict";var r=n(2),i=n(4),o=n(324),a=n(41),s=n.n(a),c=n(40),l=n(47),u=n(287),d=n.n(u),p=n(443),h=n(478),m=n(327),f=n(297),g=n(298),b=n(707),O=n(340),y=n(310),j=n(45);const v=["hasOpacity"],C=["borderColor","borderWidth","className","color","iconClassName","iconColor","iconName","onClick","selected","size","opacity"],x={small:16,default:20},E=e=>({height:2*e}),T=d()(e=>{const t=Object(r.a)(e,v);return Object(j.jsx)(p.a,Object.assign({use:"unstyled"},t))}).withConfig({displayName:"UIColorSwatch__Button",componentId:"sc-1rgv22x-0"})(["&&{",";}"],({hasOpacity:e})=>e&&`background-image: url('${n(1087)}');`);class S extends c.PureComponent{constructor(e){super(e);this.handleClick=()=>{Object(f.a)(this.props.onClick,Object(g.a)(this.props.color))};this._getStyle=Object(l.a)(E);this._id=Object(y.d)("color-input")}render(){const e=this.props,{borderColor:t,borderWidth:n,className:o,color:a,iconClassName:s,iconColor:c,iconName:l,selected:u,size:d,opacity:p}=e,f=Object(r.a)(e,C),g=null!=p,O=g?Object(m.b)(a,p/100):a,y=u?c:"transparent",v=this._id+"-desc";return Object(j.jsx)(h.c,{children:e=>{const r=null!=d?d:x[e.size];return Object(j.jsxs)(T,{"aria-describedby":v,className:o,hasOpacity:g,onClick:this.handleClick,style:this._getStyle(r),children:[Object(j.jsx)("div",{"aria-hidden":!0,className:"sr-only",id:v,children:a?i.a.text("ui.UIColorSwatch.label",{value:a}):i.a.text("ui.UIColorSwatch.noColorLabel")}),Object(j.jsx)(b.a,Object.assign({},f,{backgroundColor:O,borderColor:t,borderWidth:n,color:y,iconClassName:s,legacy:!0,name:l,size:r}))]})}})}}S.propTypes={borderColor:s.a.string,borderWidth:s.a.number,color:s.a.string,iconColor:s.a.string,iconName:Object(O.a)(),iconClassName:s.a.string,selected:s.a.bool,size:s.a.number,opacity:s.a.number,onClick:s.a.func};S.defaultProps={borderWidth:0,iconColor:o.OLAF,iconName:"success",selected:!1};S.displayName="UIColorSwatch";t.a=S},function(e,t){e.exports="//static.hsappstatic.net/ui-images/static-2.687/optimized/transparent_background.svg"},function(e,t,n){"use strict";var r=n(40),i=n(55),o=n(324),a=n(45);class s extends r.PureComponent{render(){const{iconData:e,height:t,width:n,onIconSelect:r,className:i,color:o}=this.props,{name:s,svg:c,viewPort:l}=e,u={height:t,width:n};return Object(a.jsx)("div",{"data-test-id":"cmv2-icon","data-value":s,className:i,onClick:()=>r(e),children:Object(a.jsx)("svg",{className:"icon-svg",viewBox:l?l.join(" "):"",style:u,children:Object(a.jsx)("path",{fill:o,d:c})})})}}s.defaultProps={height:25,width:25,color:o.OBSIDIAN,onIconSelect:i.a};t.a=s},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(40),i=n(2687),o=n(298),a=n(45);class s extends r.Component{constructor(...e){super(...e);this.handleMouseDown=e=>{const{onClick:t,value:n}=this.props;if(("mousedown"!==e.type||0===e.button)&&t){e.stopPropagation();t(Object(o.a)(n))}};this.handleCloseMouseDown=e=>{const{onRemove:t,value:n}=this.props;t(n);e.preventDefault();e.stopPropagation()}}render(){const{children:e,className:t,closeable:n,style:r,value:o}=this.props,s=o.tagUse||"default";return Object(a.jsx)(i.a,{_bordered:!0,_onCloseMouseDown:this.handleCloseMouseDown,className:t,closeable:n,onMouseDown:this.handleMouseDown,onTouchEnd:this.handleMouseDown,style:r,use:s,children:e})}}s.displayName="MultiSelectValue"},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));n.d(t,"c",(function(){return i}));n.d(t,"b",(function(){return o}));n.d(t,"i",(function(){return a}));n.d(t,"f",(function(){return s}));n.d(t,"e",(function(){return c}));n.d(t,"d",(function(){return l}));n.d(t,"k",(function(){return u}));n.d(t,"g",(function(){return d}));n.d(t,"l",(function(){return p}));n.d(t,"j",(function(){return h}));n.d(t,"m",(function(){return m}));n.d(t,"h",(function(){return f}));const r="CONTENT_OPTIONS",i="EDITOR_OPTIONS",o="DISPLAY_CONDITIONS",a="REPEATER_OPTIONS",s="HEAD_BODY_OPTIONS",c="GLOBAL_CONTENT",l="FIELDS",u="STYLE_FIELDS",d="LINKED_FILES",p="TAGS",h="SNIPPET",m="TRANSLATIONS",f="LOCALIZATION"},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));n.d(t,"b",(function(){return o}));var r=n(252);function i(e,t){const n=Array.isArray(t)?t:[t];return e.getIn(n,!0)}function o(e,t,n){return n!==r.b&&i(e,t)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(40),i=n(41),o=n.n(i),a=n(273),s=n(1093),c=n(1094),l=n(45);class u extends r.Component{render(){return Object(l.jsx)("div",{className:"ide-command-bar",children:this.props.children})}}const d=a.a.ElementsOfType([s.a,c.a]),p=o.a.oneOfType([d,o.a.arrayOf(d)]);u.propTypes={children:o.a.oneOfType([p,o.a.arrayOf(p)]).isRequired}},function(e,t,n){"use strict";var r=n(40),i=n(41),o=n.n(i),a=n(55),s=n(710),c=n(2679),l=n(45);class u extends r.Component{render(){return Object(l.jsx)(s.a,{use:"tertiary-light",size:"small",tooltip:this.props.title,disabled:this.props.isReadOnly,onClick:this.props.onClick,children:Object(l.jsx)(c.a,{name:this.props.iconName})})}}u.propTypes={isReadOnly:o.a.bool.isRequired,iconName:o.a.string.isRequired,onClick:o.a.func,title:o.a.string};u.defaultProps={onClick:a.a,title:""};t.a=u},function(e,t,n){"use strict";var r=n(2),i=n(40),o=n(273),a=n(41),s=n.n(a),c=n(2739),l=n(456),u=n(1095),d=n(45);const p=["children","title"];class h extends i.PureComponent{render(){const e=this.props,{children:t,title:n}=e,i=Object(r.a)(e,p);return 0===t.length?null:Object(d.jsx)(c.a,Object.assign({buttonClassName:"command-bar-button",buttonUse:"tertiary-light",buttonSize:"small",buttonText:n},i,{children:Object(d.jsx)(l.a,{children:t})}))}}const m=o.a.ElementOfType(u.a),f=s.a.oneOfType([m,s.a.arrayOf(m)]);h.propTypes={children:s.a.oneOfType([f,s.a.arrayOf(f)]).isRequired,title:s.a.string.isRequired};t.a=h},function(e,t,n){"use strict";var r=n(40),i=n(41),o=n.n(i),a=n(55),s=n(443),c=n(45);class l extends r.Component{render(){return Object(c.jsx)(s.a,{use:"link",onClick:this.props.onClick,disabled:this.props.isReadOnly,children:this.props.title})}}l.propTypes={isReadOnly:o.a.bool.isRequired,onClick:o.a.func,title:o.a.string};l.defaultProps={onClick:a.a,title:""};t.a=l},function(e,t,n){"use strict";var r=n(2592),i=n(1097),o=n.n(i);const a=Object(r.a)({events:o(),properties:{namespace:"design-manager-ide"},lastKnownEventProperties:["screen","subscreen"]});t.a=a},function(e,t){e.exports={fileManagerLib:{name:"File Manager Lib",class:"usage",properties:{componentName:{type:"string",isOptional:!0},action:{type:"string",isOptional:!0},target:{type:"string",isOptional:!0},screen:"string",subscreen:{type:"string",isOptional:!0},fileType:{type:["IMG","MOVIE","DOCUMENT","AUDIO","OTHER"],isOptional:!0},fileExtension:{type:"string",isOptional:!0},drawerType:{type:"string",isOptional:!0},pickerType:{type:"string",isOptional:!0},hostApp:{type:"string",isOptional:!0},deployableName:{type:"string",isOptional:!0},renderContext:{type:"string",isOptional:!0},isEmbedded:{type:"boolean",isOptional:!0}},namespace:"file-picker",version:"v2"},fileManagerSetPanelExploreFiles:{name:"Explore Files",class:"interaction",properties:{panel:"string",action:{type:"string",isOptional:!0},target:{type:"string",isOptional:!0},screen:"string",subscreen:{type:"string",isOptional:!0},fileType:{type:["IMG","MOVIE","DOCUMENT","AUDIO","OTHER"],isOptional:!0},fileExtension:{type:"string",isOptional:!0},drawerType:{type:"string",isOptional:!0},pickerType:{type:"string",isOptional:!0},hostApp:{type:"string",isOptional:!0},deployableName:{type:"string",isOptional:!0},renderContext:{type:"string",isOptional:!0},isEmbedded:{type:"boolean",isOptional:!0}},namespace:"file-picker",version:"v2"},fileManagerExploreFiles:{name:"Explore Files",class:"interaction",namespace:"file-picker",version:"v2",properties:{action:{type:"string",isOptional:!0},target:{type:"string",isOptional:!0},screen:"string",subscreen:{type:"string",isOptional:!0},fileType:{type:["IMG","MOVIE","DOCUMENT","AUDIO","OTHER"],isOptional:!0},fileExtension:{type:"string",isOptional:!0},drawerType:{type:"string",isOptional:!0},pickerType:{type:"string",isOptional:!0},hostApp:{type:"string",isOptional:!0},deployableName:{type:"string",isOptional:!0},renderContext:{type:"string",isOptional:!0},isEmbedded:{type:"boolean",isOptional:!0}}},fileManagerImageOptimization:{name:"Change image optimization setting",class:"interaction",properties:{setting:"string",action:{type:"string",isOptional:!0},target:{type:"string",isOptional:!0},screen:"string",subscreen:{type:"string",isOptional:!0},fileType:{type:["IMG","MOVIE","DOCUMENT","AUDIO","OTHER"],isOptional:!0},fileExtension:{type:"string",isOptional:!0},drawerType:{type:"string",isOptional:!0},pickerType:{type:"string",isOptional:!0},hostApp:{type:"string",isOptional:!0},deployableName:{type:"string",isOptional:!0},renderContext:{type:"string",isOptional:!0},isEmbedded:{type:"boolean",isOptional:!0}},namespace:"file-picker",version:"v2"},fileManagerManageFiles:{name:"Manage Files",class:"interaction",properties:{count:{type:"number",isOptional:!0},fileSource:{type:["AI_GENERATED","CANVA","SHUTTERSTOCK"],isOptional:!0},action:{type:"string",isOptional:!0},target:{type:"string",isOptional:!0},screen:"string",subscreen:{type:"string",isOptional:!0},fileType:{type:["IMG","MOVIE","DOCUMENT","AUDIO","OTHER"],isOptional:!0},fileExtension:{type:"string",isOptional:!0},drawerType:{type:"string",isOptional:!0},pickerType:{type:"string",isOptional:!0},hostApp:{type:"string",isOptional:!0},deployableName:{type:"string",isOptional:!0},renderContext:{type:"string",isOptional:!0},isEmbedded:{type:"boolean",isOptional:!0}},namespace:"file-picker",version:"v2"},fileManagerManageFolders:{name:"Manage Folders",class:"interaction",namespace:"file-picker",version:"v2",properties:{action:{type:"string",isOptional:!0},target:{type:"string",isOptional:!0},screen:"string",subscreen:{type:"string",isOptional:!0},fileType:{type:["IMG","MOVIE","DOCUMENT","AUDIO","OTHER"],isOptional:!0},fileExtension:{type:"string",isOptional:!0},drawerType:{type:"string",isOptional:!0},pickerType:{type:"string",isOptional:!0},hostApp:{type:"string",isOptional:!0},deployableName:{type:"string",isOptional:!0},renderContext:{type:"string",isOptional:!0},isEmbedded:{type:"boolean",isOptional:!0}}},fileManagerBrowseShutterstock:{name:"Browse Shutterstock",class:"interaction",namespace:"file-picker",version:"v2",properties:{action:{type:"string",isOptional:!0},target:{type:"string",isOptional:!0},screen:"string",subscreen:{type:"string",isOptional:!0},fileType:{type:["IMG","MOVIE","DOCUMENT","AUDIO","OTHER"],isOptional:!0},fileExtension:{type:"string",isOptional:!0},drawerType:{type:"string",isOptional:!0},pickerType:{type:"string",isOptional:!0},hostApp:{type:"string",isOptional:!0},deployableName:{type:"string",isOptional:!0},renderContext:{type:"string",isOptional:!0},isEmbedded:{type:"boolean",isOptional:!0}}},fileManagerAlert:{name:"Alert interaction",class:"interaction",namespace:"file-picker",version:"v2",properties:{action:{type:"string",isOptional:!0},target:{type:"string",isOptional:!0},screen:"string",subscreen:{type:"string",isOptional:!0},fileType:{type:["IMG","MOVIE","DOCUMENT","AUDIO","OTHER"],isOptional:!0},fileExtension:{type:"string",isOptional:!0},drawerType:{type:"string",isOptional:!0},pickerType:{type:"string",isOptional:!0},hostApp:{type:"string",isOptional:!0},deployableName:{type:"string",isOptional:!0},renderContext:{type:"string",isOptional:!0},isEmbedded:{type:"boolean",isOptional:!0}}},fileManagerBulkImport:{name:"Bulk Import Images",class:"interaction",properties:{action:"string",imageCount:{type:"number",isOptional:!0},isImageFile:{type:"boolean",isOptional:!0},target:{type:"string",isOptional:!0},screen:"string",subscreen:{type:"string",isOptional:!0},fileType:{type:["IMG","MOVIE","DOCUMENT","AUDIO","OTHER"],isOptional:!0},fileExtension:{type:"string",isOptional:!0},drawerType:{type:"string",isOptional:!0},pickerType:{type:"string",isOptional:!0},hostApp:{type:"string",isOptional:!0},deployableName:{type:"string",isOptional:!0},renderContext:{type:"string",isOptional:!0},isEmbedded:{type:"boolean",isOptional:!0}},namespace:"file-picker",version:"v2"},fileManagerLibErrorDisplay:{name:"Error display",class:"view",properties:{type:"string",action:{type:"string",isOptional:!0},target:{type:"string",isOptional:!0},screen:"string",subscreen:{type:"string",isOptional:!0},fileType:{type:["IMG","MOVIE","DOCUMENT","AUDIO","OTHER"],isOptional:!0},fileExtension:{type:"string",isOptional:!0},drawerType:{type:"string",isOptional:!0},pickerType:{type:"string",isOptional:!0},hostApp:{type:"string",isOptional:!0},deployableName:{type:"string",isOptional:!0},renderContext:{type:"string",isOptional:!0},isEmbedded:{type:"boolean",isOptional:!0}},namespace:"file-picker",version:"v2"},fileManagerVideoInteraction:{name:"video interaction",class:"interaction",properties:{videoTitle:{type:"string",isOptional:!0},language:{type:"string",isOptional:!0},screen:"string",subscreen:{type:"string",isOptional:!0},action:{type:"string",isOptional:!0},count:{type:"number",isOptional:!0},duration:{type:"number",isOptional:!0},fileType:{type:["IMG","MOVIE","DOCUMENT","AUDIO","OTHER"],isOptional:!0},fileExtension:{type:"string",isOptional:!0},target:{type:"string",isOptional:!0},hostApp:{type:"string",isOptional:!0},deployableName:{type:"string",isOptional:!0},renderContext:{type:"string",isOptional:!0},isEmbedded:{type:"boolean",isOptional:!0}},namespace:"file-manager",version:"v2"},fileManagerUpload:{name:"upload file",class:"interaction",properties:{size:{type:"number",isOptional:!0},errorType:{type:"string",isOptional:!0},statusCode:{type:"number",isOptional:!0},videoDuration:{type:"number",isOptional:!0},videoHostingProvider:{type:["mux"],isOptional:!0},screen:"string",subscreen:{type:"string",isOptional:!0},action:{type:"string",isOptional:!0},count:{type:"number",isOptional:!0},duration:{type:"number",isOptional:!0},fileType:{type:["IMG","MOVIE","DOCUMENT","AUDIO","OTHER"],isOptional:!0},fileExtension:{type:"string",isOptional:!0},target:{type:"string",isOptional:!0},hostApp:{type:"string",isOptional:!0},deployableName:{type:"string",isOptional:!0},renderContext:{type:"string",isOptional:!0},isEmbedded:{type:"boolean",isOptional:!0}},namespace:"file-manager",version:"v2"},fileManagerUploadDeduplication:{name:"check upload duplicates",class:"interaction",properties:{hasData:{type:"boolean",isOptional:!0},count:{type:"number",isOptional:!0},size:{type:"number",isOptional:!0},duration:{type:"number",isOptional:!0},screen:"string",subscreen:{type:"string",isOptional:!0},action:{type:"string",isOptional:!0},fileType:{type:["IMG","MOVIE","DOCUMENT","AUDIO","OTHER"],isOptional:!0},fileExtension:{type:"string",isOptional:!0},target:{type:"string",isOptional:!0},hostApp:{type:"string",isOptional:!0},deployableName:{type:"string",isOptional:!0},renderContext:{type:"string",isOptional:!0},isEmbedded:{type:"boolean",isOptional:!0}},namespace:"file-manager",version:"v2"},fileManagerVideoPQL:{name:"Video PQL",class:"interaction",properties:{alert:{type:"string",isOptional:!0},limit:{type:"number",isOptional:!0},quantityRemaining:{type:"number",isOptional:!0},screen:"string",subscreen:{type:"string",isOptional:!0},action:{type:"string",isOptional:!0},count:{type:"number",isOptional:!0},duration:{type:"number",isOptional:!0},fileType:{type:["IMG","MOVIE","DOCUMENT","AUDIO","OTHER"],isOptional:!0},fileExtension:{type:"string",isOptional:!0},target:{type:"string",isOptional:!0},hostApp:{type:"string",isOptional:!0},deployableName:{type:"string",isOptional:!0},renderContext:{type:"string",isOptional:!0},isEmbedded:{type:"boolean",isOptional:!0}},namespace:"file-manager",version:"v2"},fileManagerImageGeneration:{name:"image generation",class:"interaction",properties:{errorCount:{type:"number",isOptional:!0},isFeedbackPositive:{type:"boolean",isOptional:!0},feedbackText:{type:"string",isOptional:!0},resolution:{type:"string",isOptional:!0},style:{type:"string",isOptional:!0},correlationId:{type:"string",isOptional:!0},screen:"string",subscreen:{type:"string",isOptional:!0},action:{type:"string",isOptional:!0},count:{type:"number",isOptional:!0},duration:{type:"number",isOptional:!0},fileType:{type:["IMG","MOVIE","DOCUMENT","AUDIO","OTHER"],isOptional:!0},fileExtension:{type:"string",isOptional:!0},target:{type:"string",isOptional:!0},hostApp:{type:"string",isOptional:!0},deployableName:{type:"string",isOptional:!0},renderContext:{type:"string",isOptional:!0},isEmbedded:{type:"boolean",isOptional:!0}},namespace:"file-manager",version:"v2"},adobeExpressInteraction:{name:"adobe express",class:"interaction",namespace:"file-manager",version:"v2",properties:{screen:"string",subscreen:{type:"string",isOptional:!0},action:{type:"string",isOptional:!0},count:{type:"number",isOptional:!0},duration:{type:"number",isOptional:!0},fileType:{type:["IMG","MOVIE","DOCUMENT","AUDIO","OTHER"],isOptional:!0},fileExtension:{type:"string",isOptional:!0},target:{type:"string",isOptional:!0},hostApp:{type:"string",isOptional:!0},deployableName:{type:"string",isOptional:!0},renderContext:{type:"string",isOptional:!0},isEmbedded:{type:"boolean",isOptional:!0}}},tinymceEdit:{name:"Edit",class:"interaction",properties:{action:"string",inline:["yes","no"],version:{type:"string",isOptional:!0},method:{type:"string",isOptional:!0},value:{type:"string",isOptional:!0},inApp:{type:"string",isOptional:!0}},namespace:"rich-text"},tinymceCommand:{name:"Edit",class:"interaction",properties:{action:"string",inline:["yes","no"],value:{type:"string",isOptional:!0},inApp:{type:"string",isOptional:!0}},namespace:"rich-text"},tinymcePaste:{name:"Edit",class:"interaction",properties:{action:"string",inline:["yes","no"],version:{type:"string",isOptional:!0},type:["file","html","plaintext","unknown"],pasteSource:{type:"string",isOptional:!0},hasImages:{type:"boolean",isOptional:!0},overwriteExisting:{type:"boolean",isOptional:!0},inApp:{type:"string",isOptional:!0}},namespace:"rich-text"},tinymceEvent:{name:"Edit",class:"interaction",properties:{action:"string",inline:["yes","no"],version:{type:"string",isOptional:!0},inApp:{type:"string",isOptional:!0}},namespace:"rich-text"},tinymceEditSourceCode:{name:"Edit",class:"interaction",properties:{action:"string",inline:["yes","no"],version:{type:"string",isOptional:!0},method:{type:"string",isOptional:!0},inApp:{type:"string",isOptional:!0}},namespace:"rich-text"},tinymceChangeColor:{name:"Edit",class:"interaction",properties:{action:"string",inline:["yes","no"],version:{type:"string",isOptional:!0},method:{type:"string",isOptional:!0},inApp:{type:"string",isOptional:!0}},namespace:"rich-text"},tinymceColorPopoverMode:{name:"Edit",class:"interaction",properties:{action:"string",inline:["yes","no"],mode:{type:"string"},version:{type:"string",isOptional:!0},inApp:{type:"string",isOptional:!0}},namespace:"rich-text"},tinymceChangeColorPopover:{name:"Edit",class:"interaction",properties:{action:"string",inline:["yes","no"],mode:{type:"string",isOptional:!0},version:{type:"string",isOptional:!0},format:{type:"string",isOptional:!0},"had-existing-color":{type:"boolean",isOptional:!0},inApp:{type:"string",isOptional:!0}},namespace:"rich-text"},tinymceCta:{name:"Edit",class:"interaction",properties:{action:"string",inline:["yes","no"],version:{type:"string",isOptional:!0},context:{type:"string",isOptional:!0},editType:{type:"string",isOptional:!0},inApp:{type:"string",isOptional:!0}},namespace:"rich-text"},tinymceFormatting:{name:"Edit",class:"interaction",properties:{action:"string",inline:["yes","no"],version:{type:"string",isOptional:!0},method:{type:"string",isOptional:!0},value:{type:"string",isOptional:!0},isCustomFont:{type:"boolean",isOptional:!0},inApp:{type:"string",isOptional:!0}},namespace:"rich-text"},tinymceLink:{name:"Edit",class:"interaction",properties:{action:"string",inline:["yes","no"],version:{type:"string",isOptional:!0},nofollow:{type:"boolean",isOptional:!0},sponsored:{type:"boolean",isOptional:!0},ugc:{type:"boolean",isOptional:!0},externalLink:{type:"boolean",isOptional:!0},isImage:{type:"boolean",isOptional:!0},isIcon:{type:"boolean",isOptional:!0},linkType:{type:"string",isOptional:!0},isValidLink:{type:"boolean",isOptional:!0},inApp:{type:"string",isOptional:!0}},namespace:"rich-text"},tinymceImage:{name:"Edit",class:"interaction",properties:{action:"string",inline:["yes","no"],version:{type:"string",isOptional:!0},method:{type:"string",isOptional:!0},replacedImgSrc:{type:"string",isOptional:!0},inApp:{type:"string",isOptional:!0}},namespace:"rich-text"},tinymceContentGeneration:{name:"Edit",class:"interaction",properties:{action:"string",inline:["yes","no"],version:{type:"string",isOptional:!0},inApp:{type:"string",isOptional:!0}},namespace:"rich-text"},tinymceEditImage:{name:"Edit",class:"interaction",properties:{action:"string",inline:["yes","no"],version:{type:"string",isOptional:!0},editType:{type:"string",isOptional:!0},imgSrc:{type:"string",isOptional:!0},fileSource:{type:["AI_GENERATED","CANVA","SHUTTERSTOCK"],isOptional:!0},inApp:{type:"string",isOptional:!0}},namespace:"rich-text"},tinymceEmbed:{name:"Edit",class:"interaction",properties:{action:"string",inline:["yes","no"],inApp:{type:"string",isOptional:!0}},namespace:"rich-text"},tinymceInsertEmbed:{name:"Edit",class:"interaction",properties:{action:"string",inline:["yes","no"],service:{type:"string",isOptional:!0},tab:["general","embed","paste"],hasDimensions:{type:"boolean",isOptional:!0},useIframeEmbeds:{type:"boolean",isOptional:!0},hasScripts:{type:"boolean",isOptional:!0},inApp:{type:"string",isOptional:!0}},namespace:"rich-text"},tinymceEditEmbed:{name:"Edit",class:"interaction",properties:{action:"string",inline:["yes","no"],editType:{type:"string",isOptional:!0},version:{type:"string",isOptional:!0},inApp:{type:"string",isOptional:!0}},namespace:"rich-text"},tinymcePersonalize:{name:"Edit",class:"interaction",properties:{action:"string",inline:["yes","no"],category:"string",fqn:"string",inApp:{type:"string",isOptional:!0}},namespace:"rich-text"},tinymceInsertPersonalizationToken:{name:"Edit",class:"interaction",properties:{action:"string",inline:["yes","no"],version:{type:"string",isOptional:!0},tokenName:"string",tokenCategory:{type:"string",isOptional:!0},isHubspotDefined:{type:"boolean",isOptional:!0},defaultValueType:["global","local","empty"],fieldType:{type:"string"},inApp:{type:"string",isOptional:!0}},namespace:"rich-text"},tinymceEditPersonalizationToken:{name:"Edit",class:"interaction",properties:{action:"string",inline:["yes","no"],version:{type:"string",isOptional:!0},tokenName:"string",tokenCategory:{type:"string",isOptional:!0},isHubspotDefined:{type:"boolean",isOptional:!0},defaultValueType:["global","local","empty"],fieldType:{type:"string"},inApp:{type:"string",isOptional:!0}},namespace:"rich-text"},tinymceInsertRssToken:{name:"Edit",class:"interaction",properties:{action:"string",inline:["yes","no"],tokenName:"string",inApp:{type:"string",isOptional:!0}},namespace:"rich-text"},tinymceVideo:{name:"Edit",class:"interaction",properties:{action:"string",inline:["yes","no"],type:"string",method:{type:"string",isOptional:!0},inApp:{type:"string",isOptional:!0}},namespace:"rich-text"},tinymceInsertVideo:{name:"Edit",class:"interaction",properties:{action:"string",inline:["yes","no"],version:{type:"string",isOptional:!0},type:"string",replaced:{type:"boolean",isOptional:!0},inApp:{type:"string",isOptional:!0}},namespace:"rich-text"},tinymceEditVideo:{name:"Edit",class:"interaction",properties:{action:"string",inline:["yes","no"],version:{type:"string",isOptional:!0},editType:{type:"string",isOptional:!0},type:{type:"string",isOptional:!0},inApp:{type:"string",isOptional:!0}},namespace:"rich-text"},tinymceInsertEmoji:{name:"Edit",class:"interaction",properties:{action:"string",inline:["yes","no"],version:{type:"string",isOptional:!0},insertCount:{type:"number",isOptional:!0},inApp:{type:"string",isOptional:!0}},namespace:"rich-text"},tinymceEmoji:{name:"Edit",class:"interaction",properties:{action:"string",inline:["yes","no"],version:{type:"string",isOptional:!0},inApp:{type:"string",isOptional:!0}},namespace:"rich-text"},tinymceInsertSnippet:{name:"Edit",class:"interaction",properties:{action:"string",inline:["yes","no"],version:{type:"string",isOptional:!0},inApp:{type:"string",isOptional:!0}},namespace:"rich-text"},tinymceSnippet:{name:"Edit",class:"interaction",properties:{action:"string",inline:["yes","no"],version:{type:"string",isOptional:!0},inApp:{type:"string",isOptional:!0}},namespace:"rich-text"},tinymceInsertTable:{name:"Edit",class:"interaction",properties:{action:"string",inline:["yes","no"],version:{type:"string",isOptional:!0},columns:{type:"number",isOptional:!0},rows:{type:"number",isOptional:!0},inApp:{type:"string",isOptional:!0}},namespace:"rich-text"},tinymceEditTable:{name:"Edit",class:"interaction",properties:{action:"string",inline:["yes","no"],version:{type:"string",isOptional:!0},command:{type:"string",isOptional:!0},editType:{type:"string",isOptional:!0},inApp:{type:"string",isOptional:!0}},namespace:"rich-text"},tinymceKeyboardEscape:{name:"Edit",class:"interaction",properties:{action:"string",inline:["yes","no"],format:"string",inApp:{type:"string",isOptional:!0}},namespace:"rich-text"},tinymceAnchor:{name:"Edit",class:"interaction",properties:{action:"string",inline:["yes","no"],insertLocation:{type:"string",isOptional:!0},dragStage:{type:"string",isOptional:!0},inApp:{type:"string",isOptional:!0}},namespace:"rich-text"},tinymceVisualBlocks:{name:"Edit",class:"interaction",properties:{active:"boolean",action:"string",inline:["yes","no"],version:{type:"string",isOptional:!0},inApp:{type:"string",isOptional:!0}},namespace:"rich-text"},tinymceInsertCallout:{name:"Edit",class:"interaction",properties:{action:"string",inline:["yes","no"],type:{type:"string"},inApp:{type:"string",isOptional:!0}},namespace:"rich-text"},tinymceEditCallout:{name:"Edit",class:"interaction",properties:{action:"string",inline:["yes","no"],editType:{type:"string"},version:{type:"string",isOptional:!0},inApp:{type:"string",isOptional:!0}},namespace:"rich-text"},tinymceCharmap:{name:"Edit",class:"interaction",properties:{action:"string",inline:["yes","no"],inApp:{type:"string",isOptional:!0}},namespace:"rich-text"},tinymceFindReplace:{name:"Edit",class:"interaction",properties:{action:"string",inline:["yes","no"],version:{type:"string",isOptional:!0},inApp:{type:"string",isOptional:!0}},namespace:"rich-text"},tinymceInsertGoogleDoc:{name:"Edit",class:"interaction",properties:{action:"string",inline:["yes","no"],version:{type:"string",isOptional:!0},useUrlInput:{type:"boolean",isOptional:!0},isPostBody:{type:"boolean",isOptional:!0},inApp:{type:"string",isOptional:!0}},namespace:"rich-text"},tinymceAddNewGoogleAccount:{name:"Edit",class:"interaction",properties:{action:"string",inline:["yes","no"],version:{type:"string",isOptional:!0},inApp:{type:"string",isOptional:!0}},namespace:"rich-text"},tinymceCancelGoogleDoc:{name:"Edit",class:"interaction",properties:{action:"string",inline:["yes","no"],version:{type:"string",isOptional:!0},uiSource:{type:"string",isOptional:!0},errorMessage:{type:"string",isOptional:!0},useUrlInput:{type:"boolean",isOptional:!0},message:{type:"string",isOptional:!0},inApp:{type:"string",isOptional:!0}},namespace:"rich-text"},tinymceEditIcon:{name:"Edit",class:"interaction",properties:{action:"string",inline:["yes","no"],version:{type:"string",isOptional:!0},aspectChanged:{type:"string",isOptional:!0},position:{type:"string",isOptional:!0},color:{type:"string",isOptional:!0},name:{type:"string",isOptional:!0},purpose:{type:"string",isOptional:!0},size:{type:"string",isOptional:!0},title:{type:"string",isOptional:!0},type:{type:"string",isOptional:!0},setName:{type:"string",isOptional:!0},inApp:{type:"string",isOptional:!0}},namespace:"rich-text"},tinymceInsertIcon:{name:"Edit",class:"interaction",properties:{action:"string",inline:["yes","no"],setName:{type:"string",isOptional:!0},name:{type:"string",isOptional:!0},version:{type:"string",isOptional:!0},inApp:{type:"string",isOptional:!0}},namespace:"rich-text"},smartRulesSelectInteraction:{name:"Smart Rule Selected",class:"interaction",version:"v2",properties:{smartType:{type:"string",isOptional:!0}},namespace:"smart-content"},smartContentCriterionInteraction:{name:"Criterion Interaction",class:"interaction",version:"v2",properties:{name:{type:"string",isOptional:!0},type:{type:"string",isOptional:!0},targetType:{type:"string",isOptional:!0},moduleName:{type:"string",isOptional:!0},smartType:{isOptional:!0,type:"string"}},namespace:"smart-content"},smartContentDefinitionActivation:{name:"activation",class:"activation",properties:{smartType:{isOptional:!0,type:"string"}},namespace:"smart-content"},smartContentDefinitionInteraction:{name:"Definition Interaction",class:"interaction",version:"v2",properties:{contentType:{type:"string",isOptional:!0},smartType:{type:"string",isOptional:!0},targetType:{type:"string",isOptional:!0},moduleName:{type:"string",isOptional:!0},name:{type:"string",isOptional:!0},type:{type:"string",isOptional:!0},action:{type:"string",isOptional:!0}},namespace:"smart-content"}}},function(e,t,n){"use strict";n.d(t,"v",(function(){return r}));n.d(t,"m",(function(){return i}));n.d(t,"o",(function(){return o}));n.d(t,"a",(function(){return a}));n.d(t,"e",(function(){return s}));n.d(t,"q",(function(){return c}));n.d(t,"r",(function(){return l}));n.d(t,"f",(function(){return u}));n.d(t,"u",(function(){return d}));n.d(t,"d",(function(){return p}));n.d(t,"b",(function(){return h}));n.d(t,"j",(function(){return m}));n.d(t,"k",(function(){return f}));n.d(t,"n",(function(){return g}));n.d(t,"s",(function(){return b}));n.d(t,"x",(function(){return O}));n.d(t,"i",(function(){return y}));n.d(t,"g",(function(){return j}));n.d(t,"h",(function(){return v}));n.d(t,"l",(function(){return C}));n.d(t,"p",(function(){return x}));n.d(t,"w",(function(){return E}));n.d(t,"t",(function(){return T}));n.d(t,"c",(function(){return S}));const r="SET_AUTH",i="FETCH_CLS_LIST",o="FETCH_ILS_LIST",a="@@smart-content/",s=a+"CREATE_SMART_DEFINITION",c=a+"FETCH_SMART_DEFINITION",l=a+"FETCH_SMART_DEFINITIONS",u=a+"DELETE_SMART_DEFINITION_CRITERIA",d=a+"RESET_DEFINITIONS_FETCH_STATUS",p=a+"CREATE_SMART_CRITERION",h=a+"BULK_DELETE_SMART_CRITERIA",m=a+"FETCH_ALL_CLS_LISTS",f=a+"FETCH_ALL_ILS_LISTS",g=a+"FETCH_CUSTOM_LIFECYCLE_STAGES",b=a+"FETCH_USER_ATTRIBUTES",O=a+"UPDATE_USER_ATTRIBUTE",y=a+"FETCH_AD_GROUP",j=a+"FETCH_ADS_SINGLETONS",v=a+"FETCH_AD_CAMPAIGNS",C=a+"FETCH_AUDIENCES",x=a+"FETCH_SINGLE_AUDIENCE",E=a+"UPDATE_SMART_CRITERION",T=a+"OPEN_SMART_MODAL",S=a+"CLOSE_SMART_MODAL"},function(e,t,n){"use strict";n.d(t,"c",(function(){return r}));n.d(t,"d",(function(){return i}));n.d(t,"e",(function(){return o}));n.d(t,"a",(function(){return a}));n.d(t,"b",(function(){return s}));n.d(t,"f",(function(){return c}));const r=e=>e.contactLists.byClsId,i=e=>e.contactLists.fetchStatusByClsId,o=e=>e.contactLists.fetchAllClsListsRequestStatus,a=(e,t)=>e.contactLists.byClsId[t.listId],s=(e,t)=>e.contactLists.fetchStatusByClsId[t.listId],c=(e,t)=>{const{contactLists:n}=e,r=t.value;return r?r.map(e=>{const t=n.byClsId[e];return t?{text:"object"==typeof t.name&&t.name.value?t.name.value:t.name,value:e}:{text:" ",value:e}}):[]}},function(e,t,n){"use strict";n.d(t,"d",(function(){return r}));n.d(t,"e",(function(){return i}));n.d(t,"a",(function(){return o}));n.d(t,"b",(function(){return a}));n.d(t,"c",(function(){return s}));n.d(t,"f",(function(){return c}));const r=e=>e.contactLists.byIlsId,i=e=>e.contactLists.fetchStatusByIlsId,o=e=>e.contactLists.fetchAllIlsListsRequestStatus,a=(e,t)=>e.contactLists.byIlsId[t.listId],s=(e,t)=>e.contactLists.fetchStatusByIlsId[t.listId],c=(e,t)=>{const{contactLists:n}=e,r=t.value;return r?r.map(e=>{const t=n.byIlsId[e];return t?{text:"object"==typeof t.name&&t.name.value?t.name.value:t.name,value:e}:{text:" ",value:e}}):[]}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));n.d(t,"b",(function(){return a}));n.d(t,"c",(function(){return s}));var r=n(73),i=n(245);const o=e=>{const{type:t,parameters:n}=e;if(!t)return!1;if(t===i.h.CONTACT_LIST){const{lists:e,ilsLists:t}=n,r=!!e&&e.length>0,i=!!t&&t.length>0;return r||i}if(t===i.h.QUERY_PARAM){if(!Object(r.isObject)(n))return!1;const{name:e,operation:t,value:o}=n,a=`${e}${o}`;return!(!(t&&e&&o)||i.m.test(a))}const o=n[i.f[t]];return!!o&&(!Array.isArray(o)||Boolean(o.length))},a=(e,t)=>{const n=e===i.h.CONTACT_LIST,{lists:r,ilsLists:o}=t;return n&&Array.isArray(o)&&!r},s=(e,t)=>{const{lists:n,ilsLists:r}=t;return e===i.h.CONTACT_LIST&&!n&&!r}},function(e,t,n){"use strict";n.d(t,"b",(function(){return r}));n.d(t,"a",(function(){return i}));function r(e,t){return[...e].sort((e,n)=>{const{[t]:r}=e,{[t]:i}=n;return r<i?-1:r>i?1:0})}function i(e,t,n){if(!e.includes(t))throw new Error(`Element '${t}' not found in array ${JSON.stringify(e)}`);const r=e.indexOf(t);let i=e.slice(0,r).concat(e.slice(r+1));i=i.slice(0,n).concat(t,i.slice(n));return i}},function(e,t,n){"use strict";n.d(t,"c",(function(){return i}));n.d(t,"d",(function(){return o}));var r=n(245);n.d(t,"b",(function(){return r.h}));n.d(t,"a",(function(){return r.d}));n.d(t,"e",(function(){return r.v}));const i=null,o=Object.freeze({CRITERION:"CRITERION"})},function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));n.d(t,"c",(function(){return f}));n.d(t,"b",(function(){return y}));n.d(t,"d",(function(){return v}));var r=n(1098),i=n(1105),o=n(386),a=n(245),s=n(1106);const c=()=>({type:r.e,status:a.o.PENDING}),l=(e,t,n,i,o)=>({type:r.e,payload:e,status:a.o.SUCCEEDED,meta:{[a.s]:{action:"create-definition",usageTrackerJsName:"smartContentDefinitionInteraction",meta:{contentType:t,smartType:n,targetType:i,moduleName:o,name:"create-definition",type:a.w.INTERACTION}}}}),u=e=>({type:r.e,payload:e,error:!0,status:a.o.FAILED});function d({contentType:e,criterionType:t,targetType:n,targetId:r,smartRules:i,moduleName:a}){return(s,d,p)=>{const h={contentType:e,targetType:n,targetId:r,moduleName:a,criteria:i};s(c());return o.b(h,p).then(r=>{s(l(r,e,t,n,a));return r}).catch(e=>{s(u(e));return e})}}const p=e=>({type:r.q,status:a.o.PENDING,meta:{definitionId:e}}),h=(e,t)=>({type:r.q,payload:t,status:a.o.SUCCEEDED,meta:{definitionId:e}}),m=(e,t)=>({type:r.q,payload:t,error:!0,status:a.o.FAILED,meta:{definitionId:e}});function f(e){return(t,n,r)=>{t(p(e));return o.c(e,r).then(n=>{t(h(e,n));return n}).catch(n=>{t(m(e,n))})}}const g=e=>({type:r.f,status:a.o.PENDING,meta:Object.assign({},e)}),b=(e,t,n)=>({type:r.f,payload:t,status:a.o.SUCCEEDED,meta:Object.assign({},e,{[a.s]:{action:"delete-definition",usageTrackerJsName:"smartContentDefinitionInteraction",meta:{name:"delete-definition",type:a.w.INTERACTION,targetType:n.targetType,moduleName:n.moduleName,smartType:n.name}}})}),O=(e,t)=>({type:r.f,payload:t,error:!0,status:a.o.FAILED,meta:Object.assign({},e)});function y(e,t){return(n,r,o)=>{const a=r(),c=Object(s.a)(a,{definitionId:e});t||(t=c.criteria);if(!t.length)return Promise.reject(new Error("No criteria to delete for definition "+e));const l={definitionId:e,criteria:t};n(g(l));return i.a(t,o).then(e=>{n(b(l,e,c));return e}).catch(e=>{n(O(l,e));return e})}}const j=e=>({type:r.u,payload:{definitionId:e}}),v=e=>t=>{t(j(e))}},function(e,t,n){"use strict";n.d(t,"b",(function(){return o}));n.d(t,"c",(function(){return a}));n.d(t,"a",(function(){return s}));var r=n(30),i=n.n(r);function o(e,t=i.a){return t.post("targeted/v1/criteria",{data:e})}function a(e,t,n=i.a){return n.put("targeted/v1/criteria/"+e,{data:t})}function s(e,t=i.a){t.httpClient&&(t=t.httpClient);return t.delete("targeted/v1/criteria/bulk",{query:{id:e}})}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));n.d(t,"c",(function(){return c}));n.d(t,"d",(function(){return u}));n.d(t,"b",(function(){return d}));n.d(t,"e",(function(){return p}));var r=n(65),i=n(73),o=n(1107),a=n(245);const s=(e,t)=>e.definitions.byId[t.definitionId],c=(e,t)=>e.definitions.fetchStatusById[t.definitionId],l=(e,t)=>{const{criterionId:n}=t;return Object.keys(e.definitions.byId).find(t=>e.definitions.byId[t].criteria.includes(n))},u=(e,t)=>{if(t.definitionId)return c(e,{definitionId:t.definitionId});{const n=l(e,t);if(n)return c(e,{definitionId:n})}return a.o.UNINITIALIZED},d=(e,t)=>{const n=s(e,t);return n?n.criteria.map(t=>Object(o.a)(e,{criterionId:t})):[]},p=()=>{const e={};let t=e;return Object(r.a)([d],n=>{if(!n.length){t=e;return t}const r=n.reduce((e,t)=>{e[t.id]=t;return e},{});Object.keys(t).forEach(e=>{r[e]||(t=Object(i.omit)(t,e))});t=Object.assign({},t,r);return t})}},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));n.d(t,"b",(function(){return d}));var r=n(65),i=n(73),o=n(245),a=n(1099),s=n(1100),c=(n(1108),n(1101));const l=o.f[o.h.CONTACT_LIST],u=(e,t)=>e.criteria.byId[t.criterionId],d=()=>{let e=o.o.UNINITIALIZED;return Object(r.a)([u,a.d,s.e],(t,n,r)=>{if(!t||t.type!==o.h.CONTACT_LIST)return null;const a=t.parameters;let s;if(Object(c.b)(o.h.CONTACT_LIST,a)){s=a[o.j].map(e=>r[e]||o.o.UNINITIALIZED)}else{s=a[l].map(e=>n[e]||o.o.UNINITIALIZED)}e=Object(i.contains)(s,o.o.UNINITIALIZED)?o.o.UNINITIALIZED:Object(i.contains)(s,o.o.PENDING)?o.o.PENDING:Object(i.contains)(s,o.o.FAILED)?o.o.FAILED:o.o.SUCCEEDED;return e})}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));n.d(t,"g",(function(){return c}));n.d(t,"c",(function(){return u}));n.d(t,"b",(function(){return d}));n.d(t,"d",(function(){return p}));n.d(t,"e",(function(){return h}));n.d(t,"f",(function(){return m}));var r=n(65),i=n(73),o=n(245);const a=e=>e.adSources.byAccountId,s=e=>e.adSources.fetchStatusById,c=(e,t)=>e.adSources.fetchStatusById[t.criterionId]||o.o.UNINITIALIZED,l=Object(r.a)([a],e=>Object.values(e).reduce((e,t)=>{const{adCampaigns:n={}}=t;return e.concat(Object.values(n))},[])),u=Object(r.a)([l],e=>e.length?e.map(e=>{const{hs_ad_campaign_id:t,hs_name:n}=e.properties,{value:r}=t,{value:i}=n;return{text:i,value:r}}):[]),d=(Object(r.a)([l],e=>e.length?e.map(e=>{const{hs_ad_group_id:t,hs_name:n}=e.properties,{value:r}=t,{value:i}=n;return{text:i,value:r}}):[]),Object(r.a)([l],e=>e.reduce((e,t)=>{const{hs_ad_campaign_id:n}=t.properties,{value:r}=n;e[r]=t;return e},{}))),p=Object(r.a)([a],e=>Object.values(e).reduce((e,t)=>{const{adGroups:n={}}=t;return Object.assign({},e,n)},{})),h=Object(r.a)([p],e=>Object.values(e).reduce((e,t)=>{const{individualAds:n={}}=t;return Object.assign({},e,n)},{})),m=Object(r.a)([s],e=>{const t=Object.values(e);return Object(i.contains)(t,o.o.FAILED)?o.o.FAILED:Object(i.contains)(t,o.o.PENDING)?o.o.PENDING:Object(i.contains)(t,o.o.SUCCEEDED)?o.o.SUCCEEDED:o.o.UNINITIALIZED})},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(40),i=n(1101),o=n(45);function a(e){class t extends r.PureComponent{constructor(e){super(e);this.handleTypeChange=this.handleTypeChange.bind(this);this.handleParametersChange=this.handleParametersChange.bind(this);this.state={type:e.criterionType||null,parameters:e.criterionParameters||{}}}getIsValid(){return Object(i.a)(this.state)}handleTypeChange(e){this.setState({type:e,parameters:{}})}handleParametersChange(e,t=!1){const{parameters:n}=this.state,{onChangeParameters:r}=this.props,i=t?Object.assign({},n,e):e;this.setState({parameters:i});r&&r(e)}render(){const{type:t,parameters:n}=this.state;return Object(o.jsx)(e,Object.assign({},this.props,{isValidCriterion:this.getIsValid(),criterionParameters:n,criterionType:t,onCriterionParametersChange:this.handleParametersChange,onCriterionTypeChange:this.handleTypeChange}))}}return t}},function(e,t,n){"use strict";var r=n(40),i=n(59),o=n(73),a=n(279),s=n(281),c=n(99),l=n(245),u=n(1111),d=n(503),p=n(434),h=n(758),m=n(2741),f=n(2654),g=n(2655),b=n(443),O=n(479),y=n(45);const j=e=>"smartcontentlib.components.input.SmartTypeSelect."+e,v=e=>"smartcontentcore.CriterionTypes."+e,C=e=>{const t=u.a(e);return{scopedCriterionTypes:Object(o.mapObject)(l.g,t),ungatedForAudienceAccess:u.b(e)}},x=Object(i.connect)(C);class E extends r.Component{constructor(...e){super(...e);this.hasAudienceAccess=e=>{const{ungatedForAudienceAccess:t=!1,contentType:n}=this.props,r=this.isMissingSmartTypeScope(e);if((n===l.d.PAGE||n===l.d.CTA)&&!r&&t)return!0};this.isMissingSmartTypeScope=e=>{const{scopedCriterionTypes:t}=this.props;return!!l.g[e]&&!t[e]};this.handleCriterionTypeChange=e=>{const{criterionType:t,onCriterionTypeChange:n}=this.props,{value:r}=e.target;r!==t&&n(r)};this.optionRenderer=e=>{const{badge:t,text:n,value:r}=e,i=this.isMissingSmartTypeScope(r),o=Object(y.jsx)(b.a,{"data-test-value":r,disabled:i,use:"unstyled",children:Object(y.jsxs)(p.a,{"align-items":"center",children:[n,Object(y.jsx)("span",{children:t})]})});if(i){const e=Object(y.jsx)(s.a,{message:j("unavailableForType"),options:{criteriaType:Object(c.a)(v(r+".label"))}});return Object(y.jsx)(f.a,{placement:"top right",title:e,children:o},r)}return o}}get smartTypeOptions(){const{anonymousTargeting:e=!0}=this.props;return l.q.reduce((t,n)=>{!e&&l.c[n]||(n===l.h.AUDIENCE?this.hasAudienceAccess(n)&&t.push({disabled:this.isMissingSmartTypeScope(n),value:n,text:Object(c.a)(v(n+".label")),badge:Object(y.jsx)(d.a,{use:"beta",className:"m-left-1",children:Object(y.jsx)(a.a,{message:"smartcontentlib.components.input.SmartTypeSelect.beta"})})}):t.push({disabled:this.isMissingSmartTypeScope(n),value:n,text:Object(c.a)(v(n+".label"))}));return t},[])}renderSmartTypeSelect(){const{criterionType:e,readOnly:t=!1,tooltip:n}=this.props;let r=Object(y.jsx)(g.a,{"data-test-id":"smart-type-select","data-test-readonly":t,onChange:this.handleCriterionTypeChange,optionRenderer:this.optionRenderer,options:this.smartTypeOptions,placeholder:Object(c.a)(j("placeholder")),readOnly:t,value:e});t&&n&&(r=Object(y.jsx)(f.a,{title:n,children:r}));return r}render(){const e=Object(y.jsxs)("span",{children:[Object(y.jsx)(a.a,{message:j("prompt")}),Object(y.jsx)(O.a,{className:"m-left-1",title:Object(c.a)(j("tooltip")),tooltipPlacement:"top"})]});return Object(y.jsx)(h.a,{children:Object(y.jsx)(m.a,{label:e,children:this.renderSmartTypeSelect()})})}}t.a=x(E)},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));n.d(t,"c",(function(){return s}));n.d(t,"b",(function(){return c}));var r=n(65);const i=e=>e.auth.gates,o=e=>e.auth.user.scopes,a=Object(r.a)([o],e=>t=>e.includes(t)),s=Object(r.a)([i],e=>!!e.includes("SmartContent:IlsListIdsMigration")),c=Object(r.a)([i],e=>["Audiences:1.0"].every(t=>!!e.includes(t)))},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));n.d(t,"c",(function(){return a}));n.d(t,"b",(function(){return s}));var r=n(65);const i=e=>e.contactLifecycleStages.options,o=e=>e.contactLifecycleStages.fetchStatus,a=e=>e.contactLifecycleStages.byStageId,s=Object(r.a)([i],e=>e.map(e=>({text:e.label,value:e.stageId})))},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));n.d(t,"c",(function(){return o}));n.d(t,"b",(function(){return i}));const r=[["af","93","+..-..-...-...."],["al","355","+...(...)...-..."],["dz","213","+...-..-...-...."],["as","1684","+.(...)...-...."],["ad","376","+...-...-..."],["ao","244","+...(...)...-..."],["ai","1264","+.(...)...-...."],["ag","1268","+.(...)...-...."],["ar","54","+..(...)...-...."],["am","374","+...-..-...-..."],["aw","297","+...-...-...."],["au","61","+.. ... ... ..."],["at","43","+..(...)...-...."],["az","994","+...-..-...-..-.."],["bs","1242","+.(...)...-...."],["bh","973","+...-....-...."],["bd","880","+...-..-...-..."],["bb","1246","+.(...)...-...."],["by","375","+...(..)...-..-.."],["be","32","+.. ... .. .. .."],["bz","501","+...-...-...."],["bj","229","+...-..-..-...."],["bm","1441","+.(...)...-...."],["bt","975","+...-.-...-..."],["bo","591","+...-.-...-...."],["ba","387","+...-..-...."],["bw","267","+...-..-...-..."],["br","55","+..-..-....-...."],["io","246","+...-...-...."],["vg","1284","+.(...)...-...."],["bn","673","+...-...-...."],["bg","359","+...(...)...-..."],["bf","226","+...-..-..-...."],["bi","257","+...-..-..-...."],["kh","855","+...-..-...-..."],["cm","237","+...-....-...."],["ca","1","+. (...) ...-....",1,["204","236","249","250","289","306","343","365","387","403","416","418","431","437","438","450","506","514","519","548","579","581","587","604","613","639","647","672","705","709","742","778","780","782","807","819","825","867","873","902","905"]],["cv","238","+...(...)..-.."],["bq","599","+...-...-....",1],["ky","1345","+.(...)...-...."],["cf","236","+...-..-..-...."],["td","235","+...-..-..-..-.."],["cl","56","+..-.-....-...."],["cn","86","+.. ..-........"],["co","57","+..(...)...-...."],["km","269","+...-..-....."],["cd","243","+...(...)...-..."],["cg","242","+...-..-...-...."],["ck","682","+...-..-..."],["cr","506","+... ....-...."],["ci","225","+...-..-...-..."],["hr","385","+...-..-...-..."],["cu","53","+..-.-...-...."],["cw","599","+...-...-....",0],["cy","357","+...-..-...-..."],["cz","420","+...(...)...-..."],["dk","45","+.. .. .. .. .."],["dj","253","+...-..-..-..-.."],["dm","1767","+.(...)...-...."],["do","1","+.(...)...-....",2,["809","829","849"]],["ec","593","+...-.-...-...."],["eg","20","+..(...)...-...."],["sv","503","+... ....-...."],["gq","240","+...-..-...-...."],["er","291","+...-.-...-..."],["ee","372","+...-...-...."],["et","251","+...-..-...-...."],["fk","500","+...-....."],["fo","298","+...-...-..."],["fj","679","+...-..-....."],["fi","358","+... .. .... ...."],["fr","33","+.. . .. .. .. .."],["gf","594","+...-.....-...."],["pf","689","+...-..-..-.."],["ga","241","+...-.-..-..-.."],["gm","220","+...(...)..-.."],["ge","995","+...(...)...-..."],["de","49","+.. ... ......."],["gh","233","+...(...)...-..."],["gi","350","+...-...-....."],["gr","30","+..(...)...-...."],["gl","299","+...-..-..-.."],["gd","1473","+.(...)...-...."],["gp","590","",0],["gu","1671","+.(...)...-...."],["gt","502","+... ....-...."],["gn","224","+...-..-...-..."],["gw","245","+...-.-......"],["gy","592","+...-...-...."],["ht","509","+... ....-...."],["hn","504","+...-....-...."],["hk","852","+... .... ...."],["hu","36","+..(..)...-..."],["is","354","+... ... ...."],["in","91","+.. .....-....."],["id","62","+..-..-...-.."],["ir","98","+..(...)...-...."],["iq","964","+...(...)...-...."],["ie","353","+... .. ......."],["il","972","+...-.-...-...."],["it","39","+.. ... ......",0],["jm","1876","+.(...)...-...."],["jp","81","+.. ... .. ...."],["jo","962","+...-.-....-...."],["kz","7","+. ... ...-..-..",1],["ke","254","+...-...-......"],["ki","686","+...-..-..."],["kw","965","+...-....-...."],["kg","996","+...(...)...-..."],["la","856","+...-..-...-..."],["lv","371","+...-..-...-..."],["lb","961","+...-.-...-..."],["ls","266","+...-.-...-...."],["lr","231","+...-..-...-..."],["ly","218","+...-..-...-..."],["li","423","+...(...)...-...."],["lt","370","+...(...)..-..."],["lu","352","+...(...)...-..."],["mo","853","+...-....-...."],["mk","389","+...-..-...-..."],["mg","261","+...-..-..-....."],["mw","265","+...-.-....-...."],["my","60","+.. ..-....-...."],["mv","960","+...-...-...."],["ml","223","+...-..-..-...."],["mt","356","+...-....-...."],["mh","692","+...-...-...."],["mq","596","+...(...)..-..-.."],["mr","222","+...-..-..-...."],["mu","230","+...-...-...."],["mx","52","+..-..-..-...."],["fm","691","+...-...-...."],["md","373","+...-....-...."],["mc","377","+...-..-...-..."],["mn","976","+...-..-..-...."],["me","382","+...-..-...-..."],["ms","1664","+.(...)...-...."],["ma","212","+...-..-....-..."],["mz","258","+...-..-...-..."],["mm","95","+..-...-..."],["na","264","+...-..-...-...."],["nr","674","+...-...-...."],["np","977","+...-..-...-..."],["nl","31","+.. .. ........"],["nc","687","+...-..-...."],["nz","64","+.. ...-...-...."],["ni","505","+...-....-...."],["ne","227","+...-..-..-...."],["ng","234","+...-..-...-.."],["nu","683","+...-...."],["nf","672","+...-...-..."],["kp","850","+...-...-..."],["mp","1670","+.(...)...-...."],["no","47","+.. ... .. ..."],["om","968","+...-..-...-..."],["pk","92","+.. ...-......."],["pw","680","+...-...-...."],["ps","970","+...-..-...-...."],["pa","507","+...-...-...."],["pg","675","+...(...)..-..."],["py","595","+...(...)...-..."],["pe","51","+..(...)...-..."],["ph","63","+.. ... ...."],["pl","48","+.. ...-...-..."],["pt","351","+...-..-...-...."],["pr","1","+. (...) ...-....",3,["787","939"]],["qa","974","+...-....-...."],["re","262","+...-.....-...."],["ro","40","+..-..-...-...."],["ru","7","+. ... ...-..-..",0],["rw","250","+...(...)...-..."],["bl","590","",1],["sh","290"],["kn","1869","+.(...)...-...."],["lc","1758","+.(...)...-...."],["mf","590","",2],["pm","508"],["vc","1784","+.(...)...-...."],["ws","685","+...-..-...."],["sm","378","+...-....-......"],["st","239","+...-..-....."],["sa","966","+...-.-...-...."],["sn","221","+...-..-...-...."],["rs","381","+...-..-...-...."],["sc","248","+...-.-...-..."],["sl","232","+...-..-......"],["sg","65","+.. ....-...."],["sx","1721","+.(...)...-...."],["sk","421","+...(...)...-..."],["si","386","+...-..-...-..."],["sb","677","+...-....."],["so","252","+...-.-...-..."],["za","27","+..-..-...-...."],["kr","82","+..-..-...-...."],["ss","211","+...-..-...-...."],["es","34","+.. ... ... ..."],["lk","94","+..-..-...-...."],["sd","249","+...-..-...-...."],["sr","597","+...-...-..."],["sz","268","+...-..-..-...."],["se","46","+.. .. ... .. .."],["ch","41","+.. .. ... .. .."],["sy","963","+...-..-....-..."],["tw","886","+...-....-...."],["tj","992","+...-..-...-...."],["tz","255","+...-..-...-...."],["th","66","+..-..-...-..."],["tl","670","+...-...-...."],["tg","228","+...-..-...-..."],["tk","690","+...-...."],["to","676","+...-....."],["tt","1868","+.(...)...-...."],["tn","216","+...-..-...-..."],["tr","90","+.. ... ... .. .."],["tm","993","+...-.-...-...."],["tc","1649","+.(...)...-...."],["tv","688","+...-....."],["vi","1340","+. (...) ...-...."],["ug","256","+...(...)...-..."],["ua","380","+...(..)...-..-.."],["ae","971","+...-.-...-...."],["gb","44","+.. ... ... ...."],["us","1","+. (...) ...-....",0],["uy","598","+...-.-...-..-.."],["uz","998","+...-..-...-...."],["vu","678","+...-....."],["va","39","+.. .. .... ....",1],["ve","58","+..(...)...-...."],["vn","84","+..-..-....-..."],["wf","681","+...-..-...."],["ye","967","+...-.-...-..."],["xk","383","+...-...-...-..."],["zm","260","+...-..-...-...."],["zw","263","+...-.-......"]],i={},o={},a=(e,t,n)=>{t in i||(i[t]=[]);const r=n||0;i[t][r]=e};for(let e=0;e<r.length;e++){const t=r[e];r[e]={iso2:t[0],dialCode:t[1],priority:t[3]||0};t[2]&&(r[e].format=t[2]);if(t[4]){r[e].hasAreaCodes=!0;for(let e=0;e<t[4].length;e++){const n=t[1]+t[4][e];a(t[0],n)}}o[r[e].iso2]=e;a(t[0],t[1],t[3])}},function(e,t,n){"use strict";const r=window.Intl&&"object"==typeof window.Intl&&new Intl.Collator;t.a=(e,t)=>{const n=e.text,i=t.text;let o=0;r?o=r.compare(n,i):n>i?o=1:i>n&&(o=-1);return o}},function(e,t,n){"use strict";var r=n(2),i=n(41),o=n.n(i),a=n(288),s=n.n(a),c=n(45);const l=["countryCode","className"],u=["uk","an","ap"];function d(e){if(u.includes(e))return"";const t=127462-65,n=e.toUpperCase().split("").map(e=>t+e.charCodeAt(0));return String.fromCodePoint(...n)}function p(e){let{countryCode:t,className:n}=e,i=Object(r.a)(e,l);return Object(c.jsx)("span",Object.assign({},i,{className:s()("country-flag",n,t.toLowerCase()),children:d(t)}))}p.propTypes={countryCode:o.a.string.isRequired};t.a=p},function(e,t,n){"use strict";n.d(t,"b",(function(){return i}));n.d(t,"a",(function(){return o}));n.d(t,"c",(function(){return a}));var r=n(245);const i=e=>e.audiences.audiences,o=(e,t)=>i(e)[t],a=(e,t)=>e.audiences.audiencesFetchStatus[t.criterionId]||r.o.UNINITIALIZED},function(e,t,n){"use strict";var r={grayscale:{rgb:h},hex:{rgb:o},rgb:{hsl:s,hsv:c,hex:a,grayscale:m},hsl:{rgb:l,hsv:u},hsv:{rgb:d,hsl:p}};function i(e){return e<58?e-48:e<71?e-55:e-87}function o(e){var t,n,r,o="#"===e[0]?1:0,a=e.length;if(a-o<3)throw new Error("hex input must be at least three chars long");var s=i(e.charCodeAt(0+o)),c=i(e.charCodeAt(1+o)),l=i(e.charCodeAt(2+o));if(a-o>=6){t=(s<<4)+c;n=(l<<4)+i(e.charCodeAt(3+o));r=(i(e.charCodeAt(4+o))<<4)+i(e.charCodeAt(5+o))}else{t=(s<<4)+s;n=(c<<4)+c;r=(l<<4)+l}if(t<0||t>255||n<0||n>255||r<0||r>255)throw new Error("hex input is invalid");return[t,n,r]}function a(e){return"#"+("000000"+((e[0]<<16)+(e[1]<<8)+e[2]).toString(16)).slice(-6)}function s(e){var t,n,r=e[0]/255,i=e[1]/255,o=e[2]/255,a=Math.min(r,i,o),s=Math.max(r,i,o),c=s-a;s===a?t=0:r===s?t=(i-o)/c:i===s?t=2+(o-r)/c:o===s&&(t=4+(r-i)/c);(t=Math.min(60*t,360))<0&&(t+=360);n=(a+s)/2;return[t,100*(s===a?0:n<=.5?c/(s+a):c/(2-s-a)),100*n]}function c(e){var t,n,r=e[0],i=e[1],o=e[2],a=Math.min(r,i,o),s=Math.max(r,i,o),c=s-a;n=0===s?0:c/s*100;s===a?t=0:r===s?t=(i-o)/c:i===s?t=2+(o-r)/c:o===s&&(t=4+(r-i)/c);(t=Math.min(60*t,360))<0&&(t+=360);return[t,n,s/255*100]}function l(e){var t,n,r,i=e[0]/360,o=e[1]/100,a=e[2]/100;if(0===o)t=n=r=a;else{var s,c=a<.5?a*(o+1):a+o-a*o,l=2*a-c;(s=i+1/3)<0?s+=1:s>1&&(s-=1);t=s<1/6?l+(c-l)*s*6:s<.5?c:s<2/3?l+(c-l)*(2/3-s)*6:l;(s=i)<0?s+=1:s>1&&(s-=1);n=s<1/6?l+(c-l)*s*6:s<.5?c:s<2/3?l+(c-l)*(2/3-s)*6:l;(s=i-1/3)<0?s+=1:s>1&&(s-=1);r=s<1/6?l+(c-l)*s*6:s<.5?c:s<2/3?l+(c-l)*(2/3-s)*6:l}return[255*t,255*n,255*r]}function u(e){var t=e[0],n=e[1]/100,r=e[2]/100;return 0===n?[t,0,100*r]:0===r?[t,0,0]:[t,100*(2*(n*=(r*=2)<=1?r:2-r)/(r+n)),100*((r+n)/2)]}function d(e){var t=e[0]/60,n=e[1]/100,r=e[2]/100,i=Math.floor(t)%6,o=t-Math.floor(t),a=255*r*(1-n),s=255*r*(1-n*o),c=255*r*(1-n*(1-o));r*=255;switch(i){case 0:return[r,c,a];case 1:return[s,r,a];case 2:return[a,r,c];case 3:return[a,s,r];case 4:return[c,a,r];case 5:return[r,a,s]}}function p(e){var t,n,r=e[0],i=e[1]/100,o=e[2]/100;if(0===i)return[r,0,100*o];if(0===o)return[r,0,0];t=i*o;return[r,100*(t/=(n=(2-i)*o)<=1?n:2-n),100*(n/=2)]}function h(e){return[e,e,e]}function m(e){return(299*e[0]+587*e[1]+114*e[2])/1e3}function f(){if(this instanceof f==!1)return new f;this._={}}f.fromHex=function(e){return(new f).fromHex(e)};f.fromGrayscale=function(e){return(new f).fromGrayscale(e)};f.fromRgb=function(e,t,n){return(new f).fromRgb(e,t,n)};f.fromRgbArray=function(e){return(new f).fromRgb(e[0],e[1],e[2])};f.fromRgbObject=function(e){return(new f).fromRgb(e.r,e.g,e.b)};f.fromHsl=function(e,t,n){return(new f).fromHsl(e,t,n)};f.fromHslArray=function(e){return(new f).fromHsl(e[0],e[1],e[2])};f.fromHslObject=function(e){return(new f).fromHsl(e.h,e.s,e.l)};f.fromHsv=function(e,t,n){return(new f).fromHsv(e,t,n)};f.fromHsvArray=function(e){return(new f).fromHsv(e[0],e[1],e[2])};f.fromHsvObject=function(e){return(new f).fromHsv(e.h,e.s,e.v)};f.prototype.fromHex=function(e){var t=r.hex.rgb(e);this._={rgb:t};return this};f.prototype.fromGrayscale=function(e){e=b(e);var t=r.grayscale.rgb(e);this._={rgb:t};return this};f.prototype.fromRgb=function(e,t,n){if("number"!=typeof e||"number"!=typeof t||"number"!=typeof n)throw new Error("Arguments must be numbers");var r=O(e,t,n);this._={rgb:r};return this};f.prototype.fromRgbArray=function(e){return this.fromRgb(e[0],e[1],e[2])};f.prototype.fromRgbObject=function(e){return this.fromRgb(e.r,e.g,e.b)};f.prototype.fromHsl=function(e,t,n){if("number"!=typeof e||"number"!=typeof t||"number"!=typeof n)throw new Error("Arguments must be numbers");this._={hsl:y(e,t,n)};return this};f.prototype.fromHslArray=function(e){return this.fromHsl(e[0],e[1],e[2])};f.prototype.fromHslObject=function(e){return this.fromHsl(e.h,e.s,e.l)};f.prototype.fromHsv=function(e,t,n){if("number"!=typeof e||"number"!=typeof t||"number"!=typeof n)throw new Error("Arguments must be numbers");this._={hsv:y(e,t,n)};return this};f.prototype.fromHsvArray=function(e){return this.fromHsv(e[0],e[1],e[2])};f.prototype.fromHsvObject=function(e){return this.fromHsv(e.h,e.s,e.v)};f.prototype.toHex=function(){var e,t=this._.hex;if(void 0!==t)return t;var n=this._.rgb;(e=void 0!==n?n:this.toRawRgbArray())[0]=Math.round(e[0]);e[1]=Math.round(e[1]);e[2]=Math.round(e[2]);var i=r.rgb.hex(e);this._.hex=i;return i};f.prototype.toGrayscale=function(){var e,t=this._.grayscale;if(void 0!==t)return t;var n=this._.rgb;e=void 0!==n?n:this.toRawRgbArray();var i=r.rgb.grayscale(e);this._.grayscale=i;return i};f.prototype.toRawRgbArray=function(){var e,t=this._.rgb;if(void 0!==t)return t;if(void 0!==(e=this._.hsv))e=r.hsv.rgb(e);else{if(void 0===(e=this._.hsl))throw new Error("No data to convert");e=r.hsl.rgb(e)}this._.rgb=e;return e};f.prototype.toRawRgbObject=function(){var e=this.toRawRgbArray();return{r:e[0],g:e[1],b:e[2]}};f.prototype.toRgbArray=function(){var e=this.toRawRgbArray();return[Math.round(e[0]),Math.round(e[1]),Math.round(e[2])]};f.prototype.toRgbObject=function(){var e=this.toRgbArray();return{r:e[0],g:e[1],b:e[2]}};f.prototype.toRawHslArray=function(){var e,t=this._.hsl;if(void 0!==t)return t;if(void 0!==(e=this._.hsv))e=r.hsv.hsl(e);else{if(void 0===(e=this._.rgb))throw new Error("No data to convert");e=r.rgb.hsl(e)}this._.hsl=e;return e};f.prototype.toRawHslObject=function(){var e=this.toRawHslArray();return{h:e[0],s:e[1],l:e[2]}};f.prototype.toHslArray=function(){var e=this.toRawHslArray();return[Math.round(e[0]),Math.round(e[1]),Math.round(e[2])]};f.prototype.toHslObject=function(){var e=this.toHslArray();return{h:e[0],s:e[1],l:e[2]}};f.prototype.toRawHsvArray=function(){var e,t=this._.hsv;if(void 0!==t)return t;if(void 0!==(e=this._.hsl))e=r.hsl.hsv(e);else{if(void 0===(e=this._.rgb))throw new Error("No data to convert");e=r.rgb.hsv(e)}this._.hsv=e;return e};f.prototype.toRawHsvObject=function(){var e=this.toRawHsvArray();return{h:e[0],s:e[1],v:e[2]}};f.prototype.toHsvArray=function(){var e=this.toRawHsvArray();return[Math.round(e[0]),Math.round(e[1]),Math.round(e[2])]};f.prototype.toHsvObject=function(){var e=this.toHsvArray();return{h:e[0],s:e[1],v:e[2]}};f.prototype.lighten=function(e){var t=this.toRawHslArray();t[2]=g(t[2]+e);this._={hsl:t};return this};f.prototype.darken=function(e){var t=this.toRawHslArray();t[2]=g(t[2]-e);this._={hsl:t};return this};f.prototype.clone=function(){var e=new f;e._.hex=this._.hex;e._.grayscale=this._.grayscale;void 0!==this._.rgb&&(e._.rgb=this._.rgb.slice(0));void 0!==this._.hsv&&(e._.hsv=this._.hsv.slice(0));void 0!==this._.hsl&&(e._.hsl=this._.hsl.slice(0));return e};function g(e){return Math.max(Math.min(e,100),0)}function b(e){return Math.max(Math.min(e,255),0)}function O(e,t,n){return[Math.max(Math.min(e,255),0),Math.max(Math.min(t,255),0),Math.max(Math.min(n,255),0)]}function y(e,t,n){return[Math.max(Math.min(e,360),0),Math.max(Math.min(t,100),0),Math.max(Math.min(n,100),0)]}var j=f;e.exports=j},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));n.d(t,"b",(function(){return a}));var r=n(291);const i=e=>/^#?[0-9A-Fa-f]{0,6}$/.test(e),o=(e,t,n)=>{if(e[t]){const r=e[t];if(!i(r))return new Error(`${n}: Invalid color value. Expected format RRGGBB, got "${r}".`)}return null},a=Object(r.a)(o,"color")},function(e,t,n){"use strict";var r=n(692),i=n(434),o=n(2734),a=n(45);const s=Object(r.a)({delay:500,loader:()=>Promise.all([n.e("expanded-mofo~layout-editor"),n.e("expanded-mofo")]).then(n.bind(null,1561)),LoadingComponent:({pastDelay:e})=>e?Object(a.jsx)(i.a,{align:"center",justify:"center",direction:"column",style:{height:400},children:Object(a.jsx)(o.a,{layout:"centered",showLabel:!0})}):null});t.a=s},function(e,t,n){"use strict";t.a=Object.freeze(["criterion_id","order","target_type"])},,,function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n(2),i=n(40),o=n(41),a=n.n(o),s=n(288),c=n.n(s),l=n(1124),u=n(45);const d=["className"];class p extends i.PureComponent{render(){const e=this.props,{className:t}=e,n=Object(r.a)(e,d),i=c()("form-card-body",t);return Object(u.jsx)(l.a,Object.assign({},n,{className:i}))}}p.propTypes={className:a.a.string}},function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n(2),i=n(40),o=n(41),a=n.n(o),s=n(288),c=n.n(s),l=n(473),u=n(45);const d=["className"];class p extends i.PureComponent{render(){const e=this.props,{className:t}=e,n=Object(r.a)(e,d),i=c()("form-card-section",t);return Object(u.jsx)(l.a,Object.assign({},n,{className:i}))}}p.propTypes={className:a.a.string}},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(40),i=n(41),o=n.n(i),a=n(288),s=n.n(a),c=n(470),l=n(45);class u extends r.PureComponent{render(){const{className:e,title:t,titleSize:n}=this.props,r=s()("form-card-header",e);return Object(l.jsx)(c.a,{className:r,title:t,titleSize:n})}}u.propTypes={className:o.a.string,title:o.a.node.isRequired,titleSize:o.a.string.isRequired};u.defaultProps={titleSize:"small"}},function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n(2),i=n(40),o=n(41),a=n.n(o),s=n(288),c=n.n(s),l=n(464),u=n(45);const d=["className"];class p extends i.PureComponent{render(){const e=this.props,{className:t}=e,n=Object(r.a)(e,d),i=c()("form-card-wrapper",t);return Object(u.jsx)(l.a,Object.assign({},n,{className:i,compact:!0}))}}p.propTypes={className:a.a.string}},function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var r=n(40),i=n(41),o=n.n(i),a=n(59),s=n(416),c=n(249),l=n(250),u=n(2738),d=n(45);function p(){return function(e,t){const n=Object(c.d)(e,t),r=Object(c.a)(e,t);return{globalWidget:n,catalogWidgetForGlobalWidget:r,customWidgetForGlobalWidget:Object(c.b)(e,t),isLoaded:!(!n||!r)}}}const h={fetchGlobalWidget:s.d};function m(){return e=>{class t extends r.PureComponent{componentDidMount(){const{globalWidgetId:e,isLoaded:t,fetchGlobalWidget:n}=this.props;e&&!t&&n(e)}componentDidUpdate(e){const{globalWidgetId:t,fetchGlobalWidget:n}=e,{globalWidgetId:r,isLoaded:i}=this.props;t!==r&&r&&!i&&n(r)}render(){return Object(d.jsx)(e,Object.assign({},this.props))}}t.propTypes={globalWidget:o.a.instanceOf(l.a),globalWidgetId:o.a.number,catalogWidgetForGlobalWidget:o.a.instanceOf(u.a),customWidgetForGlobalWidget:o.a.instanceOf(u.a),fetchGlobalWidget:o.a.func.isRequired,isLoaded:o.a.bool.isRequired};t.defaultProps={isLoaded:!1};return Object(a.connect)(p,h)(t)}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n(2),i=n(40),o=n(41),a=n.n(o),s=n(288),c=n.n(s),l=n(434),u=n(45);const d=["children","className"];class p extends i.PureComponent{render(){const e=this.props,{children:t,className:n}=e,i=Object(r.a)(e,d),o=c()("form-card-container",n);return Object(u.jsx)(l.a,Object.assign({},i,{className:o,justify:"center",children:t}))}}p.propTypes={children:a.a.node,className:a.a.string}},function(e,t,n){"use strict";var r=n(40),i=n(59),o=n(55),a=n(288),s=n.n(a),c=n(287),l=n.n(c),u=n(279),d=n(1130),p=n(1131),h=n(1023),m=n(352),f=n(357),g=n(707),b=n(496),O=n(2654),y=n(472),j=n(696),v=n(485),C=n(2786),x=n(1133),E=n(1134),T=n(1024),S=n(160),I=n(324),w=n(1135),_=n(2758),N=n(45);const A=20,D=12,k=12,P=l.a.div.withConfig({displayName:"FieldGroup__DrilldownWrapper",componentId:"bxuomc-0"})(["cursor:pointer;&:hover{color:",";}"],I.CALYPSO_DARK),R=l()(y.a).attrs({color:T.e,height:D,width:A}).withConfig({displayName:"FieldGroup__DrilldownCaret",componentId:"bxuomc-1"})(["margin-left:","px;"],k),F=()=>{const e=Object(d.a)();return(t,n)=>({hasValidationError:e(t,n)})},L=Object(i.connect)(F);class M extends r.Component{constructor(e){super(e);this.handleFieldGroupOpenChange=this.handleFieldGroupOpenChange.bind(this);this.state={isLabelTruncated:!1}}get wrapperProps(){const{containsNestedGroups:e=!1,display:t}=this.props,n=s()((t===_.g.DRILLDOWN||e)&&"with-nested-groups",(t===_.g.ACCORDION||!e)&&"without-nested-groups");return{className:s()("cmv2-field-group",n),"data-field-key":this.fieldKey}}get fieldKey(){return this.props.fieldKey.join(".")}handleFieldGroupOpenChange(e){const{onFieldGroupOpenChange:t}=this.props;t(e.target.value,this.fieldKey)}renderHelpTextTooltip(){const{help_text:e}=this.props;return e?Object(N.jsx)(O.a,{title:Object(N.jsx)(x.a,{label:e}),children:Object(N.jsx)(g.a,{className:"p-all-0",size:16,borderWidth:0,color:I.EERIE,name:"info","data-selenium":this.fieldKey+":helpText","aria-label":e})}):null}renderErrorTooltip(e={}){const{hasValidationError:t}=this.props,{iconClassName:n}=e;return t?Object(N.jsx)(O.a,{placement:"top right",title:Object(N.jsx)(u.a,{message:"ContentComponents.cmv2.errorIcon.groupEditMessage"}),children:Object(N.jsx)("span",{children:Object(N.jsx)(p.a,{className:n,"data-selenium":this.fieldKey+":validationError"})})}):null}renderFixedChildren(){const{GroupLabelChild:e,fieldKey:t}=this.props;return e?Object(N.jsx)(e,{fieldKey:t}):null}renderLabel(){const{inherited_value:e,isDefaultValue:t,label:n,LabelComponent:r,fieldKey:i,allowFieldReset:o,onFieldReset:a,onFieldUnlink:s,scrollToField:c}=this.props;return Object(N.jsx)(C.a,{fieldKey:i,fieldType:S.GROUP,inheritedValue:e,isDefaultValue:t,onFieldReset:a,onFieldUnlink:s,label:n,LabelComponent:r,allowFieldReset:o,scrollToField:c})}renderNewFieldGroupLabelAndHelpText(){const{icon:e}=this.props;return Object(N.jsxs)("div",{className:"cmv2-field-group-label-and-icons align-center",children:[Object(N.jsxs)(h.a,{className:"cmv2-field-group-label align-center m-y-0",children:[e&&e.name&&Object(N.jsx)(w.a,{icon:e}),Object(N.jsx)(f.a,{className:"cmv2-field-group-label-truncated",useFlex:!0,children:this.renderLabel()})]}),Object(N.jsxs)("span",{className:"align-center",children:[this.renderFixedChildren(),this.renderHelpTextTooltip()]})]})}renderInlineFieldGroupLabelAndHelpText(){return Object(N.jsxs)("div",{className:"m-y-2 align-center",children:[Object(N.jsx)(m.a,{className:"cmv2-edit-form-label m-y-0 p-right-0",children:Object(N.jsx)(f.a,{className:"cmv2-field-group-label-truncated",useFlex:!0,children:this.renderLabel()})}),Object(N.jsxs)("span",{className:"align-center",children:[this.renderFixedChildren(),this.renderHelpTextTooltip()]})]})}renderDrilldown(){const{onEditGroupClick:e=o.a}=this.props;return Object(N.jsx)(P,Object.assign({},this.wrapperProps,{"data-test-id":"cmv2-field-group-drilldown",onClick:e,children:Object(N.jsx)(b.a,{align:"center","data-test-id":"cmv2-field-group-drilldown-content",itemLeft:this.renderErrorTooltip({iconClassName:"m-bottom-1"}),itemRight:Object(N.jsx)(R,{className:"m-top-2","data-test-id":"cmv2-field-group-drilldown-caret"}),children:this.renderNewFieldGroupLabelAndHelpText()})}))}renderAccordion(){const{children:e,disabled:t,disabledMessage:n,fieldGroupOpen:r=!1,inline_help_text:i,useOnDark:o}=this.props;return Object(N.jsxs)(E.a,Object.assign({},this.wrapperProps,{onOpenChange:this.handleFieldGroupOpenChange,open:r,useOnDark:o,titleText:Object(N.jsx)(b.a,{align:"center",itemLeft:this.renderErrorTooltip({iconClassName:"m-bottom-1"}),children:this.renderNewFieldGroupLabelAndHelpText()}),"data-test-id":"cmv2-field-group-accordion",children:[i&&Object(N.jsx)(v.a,{className:"cmv2-inline-help-text m-top-4",use:"help",children:Object(N.jsx)(x.a,{label:i,useStrict:!0})}),t&&n&&Object(N.jsx)(j.a,{className:"m-x-6 m-y-3",type:"tip",children:Object(N.jsx)(x.a,{label:n,useStrict:!0})}),e]}))}renderInlineGroup(){const{children:e,inline_help_text:t}=this.props;return Object(N.jsxs)("div",{className:"cmv2-field-group-inline m-y-6 p-bottom-5","data-test-id":"cmv2-field-group-inline",children:[this.renderInlineFieldGroupLabelAndHelpText(),t&&Object(N.jsx)(v.a,{className:"cmv2-inline-help-text m-top-3 m-bottom-1 p-x-6",use:"help",children:Object(N.jsx)(x.a,{label:t,useStrict:!0})}),e]})}render(){const{containsNestedGroups:e=!1,display:t}=this.props;switch(t){case _.g.DRILLDOWN:return this.renderDrilldown();case _.g.ACCORDION:return this.renderAccordion();case _.g.INLINE:return this.renderInlineGroup();default:return e?this.renderDrilldown():this.renderAccordion()}}}t.a=L(M)},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));n.d(t,"b",(function(){return c}));var r=n(65),i=n(67);const o=e=>e.resources.validationErrors,a=(e,t)=>t.fieldKey,s=()=>Object(r.a)([o,a],(e,t)=>!!Object(i.a)(e,t)),c=()=>Object(r.a)([o,a],(e,t)=>{const n=Object(i.a)(e,t);return n&&Array.isArray(n)?n.reduce((e,t,n)=>t?[...e,n]:e,[]):[]})},function(e,t,n){"use strict";var r=n(40),i=n(324),o=n(707),a=n(45);class s extends r.PureComponent{render(){const{className:e}=this.props;return Object(a.jsx)(o.a,{backgroundColor:i.CANDY_APPLE,borderWidth:0,className:e,color:i.OLAF,innerStyles:{lineHeight:1},name:"warning",padding:.2,size:10})}}s.defaultProps={className:"m-right-4"};t.a=s},function(e,t,n){"use strict";n.d(t,"d",(function(){return o}));n.d(t,"e",(function(){return a}));n.d(t,"a",(function(){return s}));n.d(t,"b",(function(){return c}));n.d(t,"g",(function(){return l}));n.d(t,"c",(function(){return u}));n.d(t,"h",(function(){return d}));n.d(t,"f",(function(){return p}));var r=n(67),i=n(65);const o=e=>e.resources.brandSettings.brandSettings,a=e=>e.resources.brandSettings.requestStatus,s=Object(i.a)([o],e=>e&&e.colors||[]),c=e=>e.resources.brandSettings.colorsRequestStatus,l=(Object(i.a)([o],e=>e&&e.logos||[]),(e,t)=>{const{contentSchema:n}=e;return n&&!Object(r.c)(n.content.businessUnitId)?n.content.businessUnitId:t.businessUnitId||e.resources.brandSettings.businessUnitId}),u=e=>e.resources.brandSettings.brandKitId,d=e=>e.contentSchema&&e.contentSchema.categoryName,p=e=>e.resources.brandSettings.brandedLogo||{}},function(e,t,n){"use strict";var r=n(40),i=n(1043),o=n(1044),a=n(45);const s=Object(o.a)();class c extends r.PureComponent{render(){const{label:e,useStrict:t}=this.props;return Object(a.jsx)("span",{dangerouslySetInnerHTML:{__html:t?Object(i.a)(e,s.Config.STRICT):Object(i.a)(e)}})}}c.defaultProps={useStrict:!1};t.a=c},function(e,t,n){"use strict";var r=n(2),i=n(40),o=n(287),a=n.n(o),s=n(2682),c=n(1023),l=n(472),u=n(343),d=n(1025),p=n(469),h=n(1024),m=n(328),f=n(298),g=n(62),b=n(324),O=n(45);const y=["children","onOpenChange","open","titleText","useOnDark","withContentPadding"],j=20,v=12,C=12,x=a.a.div.withConfig({displayName:"ExpandableSection__ExpandableWrapper",componentId:"iprxlo-0"})([""]),E=a.a.div.withConfig({displayName:"ExpandableSection__ExpandableHeader",componentId:"iprxlo-1"})(["display:flex;justify-content:space-between;padding-left:0;position:relative;height:58px;&::after{content:'';height:",";margin-left:-1px;width:1px;}"],Object(m.b)("54")),T=a()(u.a).withConfig({displayName:"ExpandableSection__ExpandableButton",componentId:"iprxlo-2"})(["align-items:center;justify-content:space-between;display:flex;flex:1 1 auto;padding:"," 0;transition:color "," ease-out;user-select:none;width:100%;cursor:pointer;&:hover{color:",";}"],Object(m.b)("12"),g.g,h.g),S=a()(({className:e,titleText:t})=>Object(O.jsx)(c.a,{"aria-level":null,className:e,role:"presentation",children:t})).withConfig({displayName:"ExpandableSection__ExpandableTitle",componentId:"iprxlo-3"})(["width:calc(100% - ","px);"],j+C),I=a.a.span.withConfig({displayName:"ExpandableSection__ExpandableCaretHolder",componentId:"iprxlo-4"})(["display:flex;flex-shrink:0;justify-content:center;"]),w=a()(l.a).attrs({color:h.e,height:v,width:j}).withConfig({displayName:"ExpandableSection__ExpandableCaret",componentId:"iprxlo-5"})(["margin-left:","px;transition:all "," ease-in-out;transform:",";"],C,g.g,e=>e.open?"rotate(270deg)":"rotate(90deg)"),_=a()(d.a).withConfig({displayName:"ExpandableSection__ExpandableContents",componentId:"iprxlo-6"})(["background-color:",";padding-left:",";padding-right:",";box-sizing:border-box;border-top:",";"],e=>e.useOnDark?b.KOALA:b.GYPSUM,e=>e.withPadding?"24px":"0",e=>e.withPadding?"24px":"0",e=>e.open?"1px solid "+b.BATTLESHIP:"none");class N extends i.Component{constructor(e){super(e);this.displayName="ExpandableSection";this.onClick=this.onClick.bind(this)}onClick(){const{onOpenChange:e,open:t}=this.props;e(Object(f.a)(!t))}render(){const e=this.props,{children:t,open:n,titleText:i,useOnDark:o,withContentPadding:a}=e,s=Object(r.a)(e,y),c={open:n};return Object(O.jsxs)(x,Object.assign({},s,c,{children:[Object(O.jsx)(E,Object.assign({className:"expandable-section-header"},c,{children:i?Object(O.jsxs)(T,{"aria-expanded":n?"true":"false",onClick:this.onClick,children:[Object(O.jsx)(S,{className:"m-y-0",titleText:i}),Object(O.jsx)(I,{children:Object(O.jsx)(w,{open:n})})]}):null})),t?Object(O.jsx)(p.b,{open:n,children:Object(O.jsx)(_,{"aria-hidden":n?"false":"true",className:"expandable-section-contents",indentation:"none",open:n,useOnDark:o,withPadding:a,children:t})}):null]}))}}N.defaultProps={open:!1};t.a=Object(s.a)(N,["open"])},function(e,t,n){"use strict";var r=n(40),i=n(59),o=n(1088),a=n(2793),s=n(1066),c=n(35),l=n(1136),u=n(45);const d={regular:14,large:20};function p(){const e=Object(s.c)();return function(t){return e(t)}}const h={fetchIcon:a.b};Object(i.connect)(p,h);class m extends r.Component{componentDidMount(){const{fetchIcon:e,icon:t}=this.props;if(!this.fontAwesomeIcon){e(t.set||c.a,{search:t.name}).catch(e=>{setTimeout(()=>{throw e})})}}get fontAwesomeIcon(){const{icon:e,selectedIcons:t={}}=this.props;if(!e)return;const{name:n,type:r}=e;return t[r?`${Object(l.b)(n)}:${r}`:n]}render(){const{icon:e,largerIcon:t}=this.props;if(!e||!this.fontAwesomeIcon)return null;const{name:n,viewPort:r,svg:i}=this.fontAwesomeIcon,a={name:n,viewPort:r,svg:i},s=t?d.large:d.regular;return Object(u.jsx)(o.a,{className:"m-right-2 justify-center",iconData:a,height:s,width:s})}}t.a=Object(i.connect)(p,h)(m)},function(e,t,n){"use strict";n.d(t,"b",(function(){return a}));n.d(t,"a",(function(){return s}));var r=n(99),i=n(201),o=n(1137);function a(e){return e&&e.toLowerCase()}function s(e,t){const n=a(e);let s=e;if(n&&t[n]){const{categories:e}=t[n],a="ContentComponents.iconNames."+n;!e.includes(o.a.BRAND)&&Object(i.a)(a)&&(s=Object(r.a)(a))}return s.charAt(0).toLocaleUpperCase()+s.slice(1)}},function(e,t,n){"use strict";const r={BRAND:"BRAND",REGULAR:"REGULAR",SOLID:"SOLID"};t.a=Object.freeze(r)},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));n.d(t,"b",(function(){return o}));n.d(t,"c",(function(){return a}));var r=n(68);const i=e=>t=>t({type:r.ADD_FIELD_VALIDATION_ERROR,fieldKey:e}),o=e=>t=>t({type:r.REMOVE_FIELD_VALIDATION_ERROR,fieldKey:e}),a=(e,t,n)=>i=>i({type:r.SHIFT_FIELD_VALIDATION_ERROR,fieldKey:e,fromIndex:t,toIndex:n})},function(e,t,n){"use strict";var r=n(40),i=n(59),o=n(58),a=n(615),s=n(73),c=n(288),l=n.n(c),u=n(287),d=n.n(u),p=n(55),h=n(99),m=n(279),f=n(503),g=n(434),b=n(2679),O=n(443),y=n(2795),j=n(466),v=n(357),C=n(2654),x=n(1131),E=n(1138),T=n(324),S=n(45);const I={addValidationError:E.a,removeValidationError:E.b},w="OCCURRENCE";let _=null,N=null;const A=Object(a.DragSource)(w,{beginDrag(e){_=e.index;N=e.fieldId;return{index:e.index,hasValidationError:e.hasValidationError}},canDrag:e=>!(e.readOnly||e.isPreview),isDragging:e=>e.index===_&&e.fieldId===N,endDrag(e){e.onDropOccurrence();_=null;N=null}},(e,t)=>({connectDragSource:e.dragSource(),isDragging:t.isDragging()})),D=Object(a.DropTarget)(w,{hover:Object(s.throttle)((e,t)=>{_=e.index;const n=t.getItem();if(n&&e.index!==n.index){if(n.hasValidationError&&!e.hasValidationError){e.removeValidationError([...e.fieldKey,n.index]);e.addValidationError([...e.fieldKey,e.index])}if(!n.hasValidationError&&e.hasValidationError){e.removeValidationError([...e.fieldKey,e.index]);e.addValidationError([...e.fieldKey,n.index])}e.onDragOccurrence(n.index,e.index);t.getItem().index=e.index}},250)},e=>({connectDropTarget:e.dropTarget()})),k=d.a.span.withConfig({displayName:"OccurrencesTableRow__OccurrenceLabelWrapper",componentId:"cxsrnu-0"})(["cursor:pointer;display:table;position:relative;"]),P=e=>"ContentComponents.cmv2."+e;class R extends r.Component{renderCell(){const{featured:e,hasValidationError:t,onEditOccurrence:n,readOnly:r,value:i}=this.props;if(r)return Object(S.jsx)("td",{children:Object(S.jsx)(v.a,{children:i})});const o=t?Object(S.jsx)(C.a,{placement:"top right",title:Object(h.a)(P("errorIcon.editMessage")),children:Object(S.jsx)("span",{children:Object(S.jsx)(x.a,{className:"m-right-2"})})}):null,a=e?Object(S.jsx)(f.a,{className:"m-left-2",use:"calypso",children:Object(S.jsx)(m.a,{message:P("occurrence.featured")})}):null;return Object(S.jsx)(j.a,{children:Object(S.jsx)(y.a,{className:"occurrence-label",hoverContent:this.renderActions(),children:Object(S.jsxs)(g.a,{align:"center",children:[o,Object(S.jsx)(k,{onClick:n,children:i}),a]})})})}renderActions(){const{deletable:e,featured:t,featuredEnabled:n,hasMaxFeaturedOccurrences:r,hasMaxOccurrences:i,isDragging:o,isPreview:a,onDeleteOccurrence:s,onDuplicateOccurrence:c,onEditOccurrence:l,toggleFeatureOccurrence:u,fieldKey:d}=this.props;if(a)return null;const p=e&&!o?Object(S.jsx)(C.a,{title:Object(h.a)(P("occurrence.actions.delete")),children:Object(S.jsx)(O.a,{"data-selenium":d.join(".")+":occurrences:table:row:delete",className:"m-left-2",onClick:s,use:"link",children:Object(S.jsx)(b.a,{color:T.CALYPSO_DARK,name:"delete"})})}):null,m=i?null:Object(S.jsx)(C.a,{title:Object(h.a)(P("occurrence.actions.clone")),children:Object(S.jsx)(O.a,{"data-selenium":d.join(".")+":occurrences:table:row:clone",onClick:c,size:"extra-small",use:"link",children:Object(S.jsx)(b.a,{color:T.CALYPSO_DARK,name:"duplicate"})})}),f=n&&(t||!t&&!r)&&!o?Object(S.jsx)(C.a,{title:t?Object(h.a)(P("occurrence.actions.unFeature")):Object(h.a)(P("occurrence.actions.feature")),children:Object(S.jsx)(O.a,{"data-selenium":d.join(".")+":occurrences:table:row:feat",className:"m-left-2",onClick:u,use:"link",children:Object(S.jsx)(b.a,{color:T.CALYPSO_DARK,name:"favorite"})})}):null;return Object(S.jsxs)("span",{children:[Object(S.jsx)(C.a,{title:Object(h.a)(P("occurrence.actions.edit")),children:Object(S.jsx)(O.a,{"data-selenium":d.join(".")+":occurrences:table:row:edit",onClick:l,size:"extra-small",use:"link",children:Object(S.jsx)(b.a,{color:T.CALYPSO_DARK,name:"edit"})})}),m,f,p]})}render(){const{cloned:e,connectDragSource:t,connectDropTarget:n,fieldKey:r,isDragging:i,readOnly:a,isPreview:s}=this.props,c=l()("occurrences-table-row",i&&"is--dragging",a&&"is--read-only",s&&"is--preview",e&&"is--cloned");return Object(o.compose)(t,n)(Object(S.jsx)("tr",{className:c,"data-selenium":r.join(".")+":occurrences:table:row",children:this.renderCell()}))}}R.defaultProps={fieldKey:[],isPreview:!1,onDeleteOccurrence:p.a,onEditOccurrence:p.a,onDragOccurrence:p.a,onDropOccurrence:p.a,readOnly:!1,value:null};t.a=Object(o.compose)(Object(i.connect)(void 0,I),A,D)(R)},function(e,t,n){"use strict";var r=n(2),i=n(40),o=n(2741),a=n(496),s=n(490),c=n(1133),l=n(1141),u=n(279),d=n(2679),p=n(443),h=n(1142),m=n(2634),f=n(45);const g=["allowDataTokens","children","fieldKey","helpText","inlineHelpText","label","labelItemRight","required"],b=e=>"ContentComponents.cmv2."+e;class O extends i.PureComponent{handleEditorClick(e){e&&e.fire("OpenPersonalizePopover")}renderPersonalizationBrowser(e){return Object(f.jsx)(h.a.Consumer,{children:({editorRefs:t})=>Object(f.jsx)(o.a,{children:Object(f.jsxs)(p.a,{use:"transparent",className:"align-self-center justify-end m-left-auto",onClick:()=>this.handleEditorClick(t[e]&&t[e].editor),"data-test-id":"open-token-button",children:[Object(f.jsx)(d.a,{name:"hubDB"}),Object(f.jsx)(u.a,{message:b("dataTokenBrowser.insert")})]})})})}renderItemRight({allowDataTokens:e,fieldKey:t,labelItemRight:n}){return Object(f.jsxs)(f.Fragment,{children:[n,m.b.isUngated("CMv2:DataTokenPicker")&&e&&this.renderPersonalizationBrowser(t)]})}render(){const e=this.props,{allowDataTokens:t,children:n,fieldKey:i,helpText:u,inlineHelpText:d,label:p,labelItemRight:h,required:m}=e,b=Object(r.a)(e,g),O=u&&Object(f.jsx)(c.a,{label:u}),y=Object(f.jsx)(l.a,{iconProps:{className:"m-left-2"},title:O}),j=d&&Object(f.jsx)(c.a,{label:d,useStrict:!0}),v=p?Object(f.jsxs)(a.a,{className:"align-center","data-test-id":"cmv2-field-label",itemRight:this.renderItemRight({allowDataTokens:t,fieldKey:i,labelItemRight:h}),children:[Object(f.jsx)(s.a,{className:"p-all-0",required:!(!p||!m),children:"string"==typeof p?Object(f.jsx)(c.a,{label:p}):p}),y]}):null;return Object(f.jsx)(o.a,Object.assign({},b,{help:j,label:v,labelClassName:"p-right-0",children:n}))}}t.a=O},function(e,t,n){"use strict";var r=n(40),i=n(2654),o=n(2679),a=n(324),s=n(45);class c extends r.PureComponent{render(){const{iconProps:e,placement:t,title:n}=this.props;return n?Object(s.jsx)(i.a,{placement:t,title:n,children:Object(s.jsx)(o.a,Object.assign({},e,{color:a.EERIE,name:"info"}))}):null}}c.defaultProps={iconProps:{}};t.a=c},function(e,t,n){"use strict";var r=n(40);const i=Object(r.createContext)({});t.a=i},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));n.d(t,"d",(function(){return l}));n.d(t,"e",(function(){return u}));n.d(t,"b",(function(){return d}));n.d(t,"c",(function(){return p}));var r=n(64),i=n(67),o=n(68),a=n(1144);const s=Object(r.b)(o.BRAND_SETTINGS_FETCH_COLORS,a.a),c=e=>s(e),l=e=>t=>{t({type:o.BRAND_SETTINGS_FETCH_STARTED});return a.c().then(n=>{t({type:o.BRAND_SETTINGS_FETCH_SUCCEEDED,brandData:n,businessUnitId:e})}).catch(e=>{t({type:o.BRAND_SETTINGS_FETCH_FAILED,err:e})})},u=(e,t)=>n=>{n({type:o.BRAND_SETTINGS_BUSINESS_UNIT_FETCH});return a.d(e,t).then(e=>{const{businessUnitId:t}=e;Object(i.c)(t)||n({type:o.BRAND_SETTINGS_BUSINESS_UNIT_FETCH,businessUnitId:t})}).catch(e=>{n({type:o.BRAND_SETTINGS_BUSINESS_UNIT_FETCH,error:e})})},d=e=>t=>{t({type:o.BRAND_SETTINGS_BRAND_KIT_FETCH});return a.b(e).then(e=>{const{id:n}=e;t({type:o.BRAND_SETTINGS_BRAND_KIT_FETCH,brandKitId:n})}).catch(e=>{t({type:o.BRAND_SETTINGS_BRAND_KIT_FETCH,error:e})})},p=(e,t)=>n=>{n({type:o.BRAND_SETTINGS_LOGO_FETCH});return a.e(e,t).then(e=>{const{logoUrl:t}=e;Object(i.c)(t)||n({type:o.BRAND_SETTINGS_LOGO_FETCH,brandedLogo:e})}).catch(e=>{n({type:o.BRAND_SETTINGS_LOGO_FETCH,error:e})})}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));n.d(t,"c",(function(){return c}));n.d(t,"d",(function(){return l}));n.d(t,"b",(function(){return u}));n.d(t,"e",(function(){return d}));n.d(t,"f",(function(){return p}));var r=n(1049),i=n(36),o=n(67),a=n(1051);function s(e,...t){const n=e?"branding/v1/colors/brand-kit?businessUnitId="+e:"branding/v1/colors/list-ensure-primary";return Object(r.a)(t).get(n)}function c(...e){return Object(r.a)(e).get("branding/v1/data")}function l(e,t,...n){const o=Object(r.a)(n),a=i.c[e]?i.c[e].api_slug:e;return o.get(`cospages/v2/${a}/${t}?property=businessUnitId`)}function u(e,...t){return Object(r.a)(t).get("branding/v1/brand-kit/business-unit/"+(Object(o.c)(e)?a.b:e))}function d(e,t,...n){const i=Object(r.a)(n),o=Object.assign({},e&&{domain:e},t&&{businessUnitId:t});return i.get("branding/v1/logos/logo",{query:o})}const p=(e=!1,...t)=>{const n=Object(r.a)(t);return n.get("branding/v1/primary-brand-kit").catch(t=>{if(404!==t.status||!e)throw t;return n.post("branding/v1/brand-kit",{data:{name:"My brand kit"}})})}},function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var r=n(40),i=n(41),o=n.n(i),a=n(279),s=n(160),c=n(1146),l=n(1485),u=n(443),d=n(98),p=n(45);const h=e=>`DesignEditorsUI.customWidgetEditor.sidebar.fieldEdit.contentOptions.${e}.edit`;function m(e){class t extends r.PureComponent{constructor(...e){super(...e);this.getOrCreateClickHandler=(e,t,n)=>{const{onPreviewClick:r}=this.props,i="onClick_"+e;this[i]||(this[i]=()=>{r(e,t,n)});return this[i]};this.renderRichTextPreview=e=>{const{richTextPreviewIconName:t}=this.props,n=this.getOrCreateClickHandler(e.name);return Object(p.jsx)(l.a,Object.assign({},e,{iconName:t,onClick:n}))};this.renderSimpleMenusPreview=e=>{const t=this.getOrCreateClickHandler(e.name);return Object(p.jsx)(u.a,{onClick:t,use:"tertiary-light",children:Object(p.jsx)(a.a,{message:h(s.SIMPLE_MENU)})})};this.renderFullScreenCodeEditorPreview=e=>{const t=Boolean(e.occurrence)?Object(d.t)(e.label,e.fieldKey):e.label,n={fieldType:e.type,fieldKey:e.fieldKey,label:t},r=this.getOrCreateClickHandler(e.name,e.type,n);return Object(p.jsx)(u.a,{onClick:r,use:"tertiary-light",children:Object(p.jsx)(a.a,{message:h(e.type)})})}}render(){const t=Object.assign({},this.props.componentsByType,{[s.RICH_TEXT]:this.renderRichTextPreview,[s.SIMPLE_MENU]:this.renderSimpleMenusPreview,[s.HUBL]:this.renderFullScreenCodeEditorPreview,[s.HTML]:this.renderFullScreenCodeEditorPreview});return Object(p.jsx)(e,Object.assign({},this.props,{componentsByType:t}))}}t.propTypes={componentsByType:o.a.object.isRequired,customWidgetId:o.a.number.isRequired,richTextPreviewIconName:o.a.string,onPreviewClick:o.a.func};return Object(c.a)(t)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n(40),i=n(41),o=n.n(i),a=n(160),s=n(2589),c=n(45);const l=s.a[a.IMAGE],u=s.a[a.RICH_TEXT];function d(e){class t extends r.Component{constructor(...e){super(...e);this.renderImageField=e=>Object(c.jsx)(l,Object.assign({},e,{forceHideResponsive:this.props.isEmail}));this.renderRichTextField=e=>Object(c.jsx)(u,Object.assign({},e,{shouldFetchCustomFonts:this.props.shouldFetchCustomFonts}))}render(){const t=Object.assign({},s.a,{[a.IMAGE]:this.renderImageField,[a.RICH_TEXT]:this.renderRichTextField});return Object(c.jsx)(e,Object.assign({},this.props,{componentsByType:t}))}}t.propTypes={isEmail:o.a.bool,readOnly:o.a.bool,shouldFetchCustomFonts:o.a.bool};t.defaultProps={isEmail:!0};return t}},function(e,t,n){"use strict";var r=n(24),i=n.n(r),o=n(40),a=n(288),s=n.n(a),c=n(1148),l=n.n(c),u=n(458),d=n(434),p=n(2742),h=n(490),m=n(1141),f=n(1133),g=n(485),b=n(176),O=n(160),y=n(45);class j extends o.Component{constructor(e){super(e);this.onChange=this.onChange.bind(this);this.logSentryForStringBoolean=this.logSentryForStringBoolean.bind(this)}shouldComponentUpdate(e,t){return l()(this,e,t)}get isChecked(){const{value:e}=this.props;return"string"==typeof e?"true"===e:e||!1}get showToggle(){const{display:e=b.a[O.BOOLEAN].CHECKBOX}=this.props;return e===b.a[O.BOOLEAN].TOGGLE}get fieldKey(){const{fieldKey:e=[]}=this.props;return e.join(".")}onChange(e){const{onFieldChange:t}=this.props,{checked:n}=e.target;this.logSentryForStringBoolean(n,"onChange");t(n)}logSentryForStringBoolean(e,t){const{fieldKey:n=[]}=this.props;"string"==typeof e&&i.a.captureMessage("Boolean value passed in as string",{extra:{fieldKey:n,functionName:t,value:e}})}renderLabel(){const{label:e}=this.props;return"string"==typeof e?Object(y.jsx)(f.a,{label:e}):e}renderHelpTooltip(){const{help_text:e}=this.props,t=e&&Object(y.jsx)(f.a,{label:e});return e&&Object(y.jsx)(m.a,{title:t})}renderToggle(){const{className:e,readOnly:t=!1,required:n=!1}=this.props;return Object(y.jsxs)(o.Fragment,{children:[Object(y.jsx)(h.a,{className:s()("p-right-2 toggle-label",e),htmlFor:this.fieldKey,required:n,children:this.renderLabel()}),Object(y.jsx)("span",{className:"p-right-2 p-top-1",children:this.renderHelpTooltip()}),Object(y.jsx)(u.a,{"data-selenium":this.fieldKey,"data-checked":this.isChecked,checked:this.isChecked,className:e,id:this.fieldKey,onChange:this.onChange,readOnly:t,size:"extra-small"})]})}renderCheckBox(){const{className:e,readOnly:t=!1,required:n=!1}=this.props;return Object(y.jsxs)(d.a,{className:e,align:"center",children:[Object(y.jsx)(p.a,{"data-selenium":this.fieldKey,"data-checked":this.isChecked,checked:this.isChecked,id:this.fieldKey,onChange:this.onChange,readOnly:t}),Object(y.jsx)(h.a,{"data-selenium":"cmv2-boolean-field-label",className:"p-x-2 checkbox-label",htmlFor:this.fieldKey,required:n,children:this.renderLabel()}),Object(y.jsx)("span",{className:"p-top-1",children:this.renderHelpTooltip()})]})}render(){const{inline_help_text:e,value:t}=this.props;this.logSentryForStringBoolean(t,"render");return Object(y.jsxs)("div",{children:[this.showToggle?this.renderToggle():this.renderCheckBox(),Object(y.jsx)("div",{children:e&&Object(y.jsx)(g.a,{className:"cmv2-inline-help-text",use:"help",children:Object(y.jsx)(f.a,{label:e,useStrict:!0})})})]})}}t.a=j},,,,,function(e,t){e.exports="//static.hsappstatic.net/ContentUtils/static-1.51586/img/choiceButtons/layout-tiles.svg"},function(e,t){e.exports="//static.hsappstatic.net/ContentUtils/static-1.51586/img/choiceButtons/layout-cards.svg"},function(e,t){e.exports="//static.hsappstatic.net/ContentUtils/static-1.51586/img/choiceButtons/layout-minimal.svg"},function(e,t){e.exports="//static.hsappstatic.net/ContentUtils/static-1.51586/img/choiceButtons/icon-size-small.svg"},function(e,t){e.exports="//static.hsappstatic.net/ContentUtils/static-1.51586/img/choiceButtons/icon-size-medium.svg"},function(e,t){e.exports="//static.hsappstatic.net/ContentUtils/static-1.51586/img/choiceButtons/icon-size-large.svg"},function(e,t){e.exports="//static.hsappstatic.net/ContentUtils/static-1.51586/img/choiceButtons/icon-background-shape-none.svg"},function(e,t){e.exports="//static.hsappstatic.net/ContentUtils/static-1.51586/img/choiceButtons/icon-background-shape-square.svg"},function(e,t){e.exports="//static.hsappstatic.net/ContentUtils/static-1.51586/img/choiceButtons/icon-background-shape-rounded.svg"},function(e,t){e.exports="//static.hsappstatic.net/ContentUtils/static-1.51586/img/choiceButtons/icon-background-shape-circle.svg"},function(e,t){e.exports="//static.hsappstatic.net/ContentUtils/static-1.51586/img/choiceButtons/social-icon-size-small.svg"},function(e,t){e.exports="//static.hsappstatic.net/ContentUtils/static-1.51586/img/choiceButtons/social-icon-size-medium.svg"},function(e,t){e.exports="//static.hsappstatic.net/ContentUtils/static-1.51586/img/choiceButtons/social-icon-size-large.svg"},function(e,t){e.exports="//static.hsappstatic.net/ContentUtils/static-1.51586/img/choiceButtons/social-icon-background-shape-square.svg"},function(e,t){e.exports="//static.hsappstatic.net/ContentUtils/static-1.51586/img/choiceButtons/social-icon-background-shape-rounded.svg"},function(e,t){e.exports="//static.hsappstatic.net/ContentUtils/static-1.51586/img/choiceButtons/social-icon-background-shape-circle.svg"},function(e,t){e.exports="//static.hsappstatic.net/ContentUtils/static-1.51586/img/choiceButtons/fill-pill.svg"},function(e,t){e.exports="//static.hsappstatic.net/ContentUtils/static-1.51586/img/choiceButtons/fill-rounded.svg"},function(e,t){e.exports="//static.hsappstatic.net/ContentUtils/static-1.51586/img/choiceButtons/fill-rectangle.svg"},function(e,t){e.exports="//static.hsappstatic.net/ContentUtils/static-1.51586/img/choiceButtons/no-fill-pill.svg"},function(e,t){e.exports="//static.hsappstatic.net/ContentUtils/static-1.51586/img/choiceButtons/no-fill-rounded.svg"},function(e,t){e.exports="//static.hsappstatic.net/ContentUtils/static-1.51586/img/choiceButtons/no-fill-rectangle.svg"},function(e,t){e.exports="//static.hsappstatic.net/ContentUtils/static-1.51586/img/choiceButtons/none.svg"},function(e,t){e.exports="//static.hsappstatic.net/ContentUtils/static-1.51586/img/choiceButtons/field-border-all.svg"},function(e,t){e.exports="//static.hsappstatic.net/ContentUtils/static-1.51586/img/choiceButtons/field-border-bottom.svg"},function(e,t){e.exports="//static.hsappstatic.net/ContentUtils/static-1.51586/img/choiceButtons/case-upper.svg"},function(e,t){e.exports="//static.hsappstatic.net/ContentUtils/static-1.51586/img/choiceButtons/case-lower.svg"},function(e,t,n){"use strict";var r=n(40),i=n(2794),o=n(2796),a=n(160),s=n(1180),c=n(2679),l=n(324),u=n(279),d=n(485),p=n(45);const h=e=>"ContentComponents.cmv2.fields.color."+e,m=s.a[a.COLOR],f={color:null,opacity:null};class g extends r.PureComponent{constructor(e){super(e);this.onColorChange=this.onColorChange.bind(this);this.onOpacityChange=this.onOpacityChange.bind(this);this.onOpenChange=this.onOpenChange.bind(this);this.onWindowBlur=this.onWindowBlur.bind(this);this.renderColorPicker=this.renderColorPicker.bind(this);this.validateHex=this.validateHex.bind(this);this.shouldShowOpacity=this.shouldShowOpacity.bind(this);this.state={open:!1}}get isStringValue(){const{value:e=Object.assign({},f)}=this.props;return!e||"string"==typeof e}get color(){const{value:e=Object.assign({},f)}=this.props;if(this.isStringValue)return e;const{color:t}=e;return"string"==typeof t?t:null}get opacity(){const{value:e=Object.assign({},f)}=this.props,{opacity:t}=e||{};return(t||0===t)&&"number"==typeof t?t:null}get seleniumKey(){const{fieldKey:e=[]}=this.props;return e.join(".")}get colorOpacitySeleniumKey(){const{value:e=Object.assign({},f)}=this.props;return this.isStringValue?e:`${this.color}:${this.opacity}`}get hiddenSubfields(){const{visibility:e={}}=this.props;return e.hidden_subfields||{}}onColorChange(e){const t=e.target.value;if(t===this.color)return;if(this.isStringValue){this.props.onFieldChange(t);return}const n={color:t,opacity:null!=this.opacity?this.opacity:100};this.props.onFieldChange(n)}onOpacityChange(e){const t=e.target.value;if(t===this.opacity)return;const n={color:this.color,opacity:t};this.props.onFieldChange(n)}onOpenChange(e){const t=e.target.value;this.setState({open:t});t?window.addEventListener("blur",this.onWindowBlur):window.removeEventListener("blur",this.onWindowBlur)}onWindowBlur(){this.setState({open:!1})}validateHex(e){const t=e.target.value;if(!t)return;let n=t;if(3!==t.length&&6!==t.length){const e=1===new Set(t).size?t[0]:"0";for(let r=t.length;r<6;r++)n+=e;this.isStringValue?this.props.onFieldChange("#"+n):this.props.onFieldChange({color:"#"+n,opacity:null!=this.opacity?this.opacity:100})}}shouldShowOpacity(){const{show_opacity:e,isEmailOrAnyType:t}=this.props;return void 0!==e?e:!t&&!this.isStringValue&&!this.hiddenSubfields[m.opacity]}renderColorPicker(e){const{ColorPicker:t=o.a}=this.props;return Object(p.jsx)(t,Object.assign({},e))}renderOpacityWarning(){return Object(p.jsx)("div",{className:"m-top-2",children:Object(p.jsxs)(d.a,{children:[Object(p.jsx)(c.a,{name:"warning",screenReaderText:"Warning",size:16,className:"m-right-1",color:l.MARIGOLD}),Object(p.jsx)(u.a,{message:h("opacityWarning")})]})})}render(){const{contentCategoryName:e,contentId:t,error:n=!1,isInEmail:r,readOnly:o=!1,show_opacity:a,useOnDark:s,limited_options:c}=this.props,l=this.shouldShowOpacity()?{opacity:this.opacity,opacityInputProps:{"data-selenium":this.seleniumKey+":color_opacity",error:n}}:{};return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(i.a,Object.assign({color:this.color,ColorPicker:this.renderColorPicker({contentId:t,contentCategoryName:e,limitedOptions:c}),inputProps:{"data-selenium":this.seleniumKey+":color_text",error:n,onBlur:this.validateHex},onColorChange:this.onColorChange,onOpacityChange:this.onOpacityChange,onOpenChange:this.onOpenChange,open:this.state.open,readOnly:o,swatchProps:{"data-selenium":this.seleniumKey+":color_swatch","data-color-opacity":this.colorOpacitySeleniumKey},use:s?"on-dark":"default"},l)),a&&r&&this.renderOpacityWarning()]})}}t.a=g},function(e,t,n){"use strict";var r=n(160);t.a=Object.freeze({[r.FONT]:{size:"size",size_unit:"size_unit",color:"color",styles:"styles",font:"font",underline:"underline",bold:"bold",italic:"italic"},[r.COLOR]:{opacity:"opacity"},[r.GRADIENT]:{direction:"direction"},[r.BORDER]:{color:"color",thickness:"thickness",style:"style",custom_border_sides:"custom_border_sides"},[r.SPACING]:{margin:"margin",padding:"padding"},[r.TEXT_ALIGNMENT]:{LEFT:"align_left",CENTER:"align_center",RIGHT:"align_right",JUSTIFY:"align_justify"},[r.ALIGNMENT]:{LEFT:"align_left",CENTER:"align_center",RIGHT:"align_right",BOTTOM:"align_bottom",MIDDLE:"align_middle",TOP:"align_top"},[r.BACKGROUND_IMAGE]:{position:"position",size:"size"}})},function(e,t,n){"use strict";var r=n(40),i=n(55),o=n(288),a=n.n(o),s=n(434),c=n(506),l=n(1182),u=n(45);class d extends r.Component{render(){const{onHoverlayClick:e,hoverlayLabel:t,alt:n,previewImage:r,src:i,className:o,readOnly:d}=this.props,p=a()("cmv2-image-preview-container",o),h=Object(u.jsx)(s.a,{className:p,align:"center",justify:"center",children:r||Object(u.jsx)(c.a,{className:"cmv2-image-preview",alt:n||"",src:i})});if(t&&!d){const n=Object(u.jsx)(s.a,{align:"center",alignSelf:"center",direction:"column",justify:"center",children:t});return Object(u.jsx)(l.a,{onClick:e,foregroundContent:n,children:h})}return h}}d.defaultProps={alt:"",onHoverlayClick:i.a};t.a=d},function(e,t,n){"use strict";var r=n(2),i=n(41),o=n.n(i),a=n(40),s=n(288),c=n.n(s),l=(n(10),n(290)),u=n(434),d=n(2712),p=n(343),h=n(308),m=n(339),f=n(467),g=n(450),b=n(341),O=n(767),y=n(45);const j=["_blur","className","children","focused","foregroundContent","hovered","href","linkComponent","onClick","overlayClassName","tabIndex","use"],v=["hovered"],C=["focused"],x={default:"","full-card":"private-hoverlay--full-card","bottom-half-card":"private-hoverlay--bottom-half-card"};class E extends a.Component{constructor(...e){super(...e);this.state={hasTabbableContent:!1};this.refCallback=e=>{if(!e)return;const t=e.querySelector(h.a);this.setState({hasTabbableContent:t})}}render(){const e=this.props,{_blur:t,className:n,children:i,foregroundContent:o,href:s,linkComponent:l,onClick:d,overlayClassName:h,tabIndex:m,use:T}=e,S=Object(r.a)(e,j),{hasTabbableContent:I}=this.state;0;Object(f.a)(i,E.displayName);return Object(y.jsx)(b.a,Object.assign({},this.props,{children:e=>Object(y.jsx)(O.a,Object.assign({},this.props,{children:f=>{const{hovered:b}=e,O=Object(r.a)(e,v),{focused:j}=f,E=Object(r.a)(f,C),w=null==o?null:Object(y.jsx)("div",{className:c()("uiOverlay-backdrop private-hoverlay__overlay private-overlay--contextual",h,(s||d)&&"private-hoverlay__overlay--clickable",j&&"private-hoverlay__overlay--focused",b&&"private-hoverlay__overlay--hovered"),children:Object(y.jsx)(u.a,{align:"stretch",direction:"column",justify:"start",className:"private-overlay__overlay-content private-hoverlay__foreground-content",children:o})}),_=Object(y.jsxs)("span",{children:[w,Object(y.jsx)("div",{className:"private-hoverlay__children"+(t?" private-hoverlay__children--blur private-hoverlay--blur":""),children:Object(a.cloneElement)(i,{className:c()("private-hoverlay__child",i.props.className)})})]});let N,A;N=s?g.b(l,{children:_,className:"display-block",href:s,use:"unstyled"}):d?Object(y.jsx)(p.a,{className:"private-hoverlay__button",onClick:d,children:_}):_;A=null!=m?m:I?null:0;return Object(y.jsx)("div",Object.assign({},S,O,E,{className:c()(n,"private-hoverlay",x[T],"full-card"===T&&"is--module"),ref:this.refCallback,tabIndex:A,children:N}))}}))}))}}E.propTypes={_blur:o.a.bool,children:o.a.element,focused:Object(m.a)(o.a.bool),foregroundContent:o.a.node,hovered:o.a.bool,href:o.a.oneOfType([l.a]),linkComponent:g.a,overlayClassName:o.a.string,use:o.a.oneOf(Object.keys(x))};E.defaultProps={_blur:!0,linkComponent:d.a,use:"default"};E.displayName="UIHoverlay";t.a=E},function(e,t,n){"use strict";n.d(t,"b",(function(){return h}));n.d(t,"c",(function(){return f}));n.d(t,"d",(function(){return g}));n.d(t,"a",(function(){return b}));var r=n(2),i=n(30),o=n.n(i),a=n(64),s=n(1184),c=n(1185),l=n(68);const u=["results"],d=Object(a.b)(l.WEB_INTERACTIVES_FETCH_CALL_TO_ACTION,s.a),p=Object(a.b)(l.WEB_INTERACTIVES_FETCH_CALLS_TO_ACTION,s.b),h=e=>d(e),m=({properties:e})=>({id:Number(e.hs_content_id.value),interactiveContainerType:e.hs_container_type.value,isPublished:"PUBLISHED"===e.hs_publish_state.value,name:e.hs_name.value,screenshotPreviewUrl:e.hs_screenshot_url.value}),f=e=>{const{request:t,receive:n,error:i}=p;return(a,c,{httpClient:l=o.a}={})=>{a(t(e));return s.b(e,l).then(e=>{let{results:t}=e,n=Object(r.a)(e,u);return Object.assign({},n,{objects:t.map(m)})}).then(t=>{a(n(e,t));return t}).catch(t=>{a(i(e,t));return t})}},g=e=>(t,n)=>{const r=Object(c.b)(n(),{id:e});t({type:l.WEB_INTERACTIVES_SAVE_CALL_TO_ACTION_CACHE,cta:r})},b=()=>({type:l.WEB_INTERACTIVES_CLEAR_CALL_TO_ACTION_CACHE})},,function(e,t,n){"use strict";n.d(t,"e",(function(){return u}));n.d(t,"b",(function(){return h}));n.d(t,"d",(function(){return b}));n.d(t,"a",(function(){return O}));n.d(t,"c",(function(){return v}));var r=n(4),i=n(65),o=n(64),a=n(1),s=n.n(a),c=n(9),l=n.n(c);const u=e=>e.resources.webInteractives.webInteractives,d=(e,t)=>e.resources.webInteractives.webInteractives[t.id],p=e=>e.resources.webInteractives.webInteractivesCacheOrder,h=(e,t)=>e.resources.webInteractives.webInteractivesCache[t.id],m=e=>e.resources.webInteractives.webInteractivesCache,f=e=>e&&e.isPublished&&"EMBEDDED"!==e.interactiveContainerType,g=e=>e&&e.name,b=Object(i.a)([m,p],(e,t)=>t.reduce((t,n)=>{const i=e[n];t.push({value:n,text:i.name,help:r.a.text("ContentComponents.cmv2.fields.url.linkType.help.CALL_TO_ACTION."+i.interactiveContainerType)});return t},[])),O=Object(o.c)(u,{disabledPredicate:f,getHelpText:g}),y=(e,t=!1)=>{const n=l.a.isProd(),r=s.a.get(),i=l.a.getHublet(),o=n?"":"qa",a=t?"email/":"";return"na1"===i?`https://cta-service-cms2.hubspot${o}.com/web-interactives/public/v1/embed/cta-image/${a}${e}?portalId=${r}`:`https://cta-${i}.hubspot${o}.com/web-interactives/public/v1/embed/cta-image/${a}${e}?portalId=${r}`};function j(e,t){return e&&{name:e.name,guid:e.id.toString(),ctaInfo:[{isDefault:!0,image:{url:y(e.id,t)}}]}}const v=(e,t)=>j(d(e,t),t.isInEmail)},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));n.d(t,"c",(function(){return a}));n.d(t,"b",(function(){return l}));n.d(t,"d",(function(){return d}));n.d(t,"h",(function(){return h}));n.d(t,"j",(function(){return m}));n.d(t,"e",(function(){return f}));n.d(t,"m",(function(){return b}));n.d(t,"n",(function(){return O}));n.d(t,"o",(function(){return y}));n.d(t,"l",(function(){return j}));n.d(t,"k",(function(){return v}));n.d(t,"i",(function(){return C}));n.d(t,"f",(function(){return x}));n.d(t,"g",(function(){return E}));var r=n(4),i=n(1187);function o(e,t,n){if("object"==typeof e){const{year:t,month:n,date:r}=e;return new o(t,n,r)}if(!(this instanceof o))return new o(e,t,n);this.year=e;this.month=t;this.date=n}function a(e,t){return e===t||!(!e||!t)&&(e.year===t.year&&e.month===t.month&&e.date===t.date)}function s(){return{year:this.year,month:this.month,date:this.date}}Object.assign(o.prototype,{get(e){return this[e]},equals(e){return a(e,this)},toJS:s,toJSON:s,toString(){return JSON.stringify(this.toJS())}});const c=new o;function l(e,t){const n=["year","month","date"];for(let r=0;r<n.length;r++){const i=n[r];if(e[i]<t[i])return-1;if(e[i]>t[i])return 1}return 0}function u(e,t,n){return new o(e,t,n)}function d(e){return e.isValid()?u(e.get("year"),e.get("month"),e.get("date")):c}function p(e){if(null==e)return null;const{year:t,month:n,date:r}=e;return[t,n,r]}function h(e){if(null==e)return!1;const{year:t,month:n,date:i}=e;return"number"==typeof t&&"number"==typeof n&&"number"==typeof i&&r.a.moment([t,n,i]).isValid()}function m(e="userTz"){const t=r.a.moment[e]();return u(t.year(),t.month(),t.date())}const f=(e,t)=>{if("ll"===t||"LL"===t){const n=r.a.moment(e,t,!0),i=n.month(),a=n.year(),s=n.date();if(Number.isNaN(i)||Number.isNaN(a)||Number.isNaN(s))return null;const c=new o(a,i,s);return h(c)?c:null}const n=e.match(/\b\d{4}\b/);if(!n)return null;const a=e.match(/\b(\d{1,2})[^\d](\d{1,2})\b/);if(!a)return null;const s=+n[0];let c,l;const u=Object(i.b)()._longDateFormat[t]||t;if(u.indexOf("MM")>u.indexOf("DD")){c=+a[2]-1;l=+a[1]}else{c=+a[1]-1;l=+a[2]}const d=new o(s,c,l);return h(d)?d:null};function g(e,t){return r.a.moment[e](p(t))}const b=(...e)=>g("userTz",...e),O=(...e)=>g("portalTz",...e),y=(...e)=>g("utc",...e),j=(e,t)=>null==e?"":h(e)?b(e).format(t):r.a.text("ui.datePicker.invalidDate");function v(e){return d(b(e).subtract(1,"day"))}function C(e){return d(b(e).add(1,"day"))}function x(e,t,n){return null==e?e:null!=t&&1===l(t,e)?t:null!=n&&-1===l(n,e)?n:e}function E(e,t,n){return x(e,t,n)===e}},function(e,t,n){"use strict";n.d(t,"b",(function(){return i}));n.d(t,"c",(function(){return o}));n.d(t,"a",(function(){return a}));var r=n(4);const i=()=>{const e=(r.a.moment.locale||r.a.moment.lang)();return(r.a.moment.localeData||r.a.moment.langData)(e)},o=e=>i().longDateFormat(e)||e,a=e=>o(e).replace(/MM/,r.a.text("ui.datePicker.placeholder.month")).replace(/DD/,r.a.text("ui.datePicker.placeholder.day")).replace(/YYYY/,r.a.text("ui.datePicker.placeholder.year"))},function(e,t,n){"use strict";var r=n(2),i=(n(41),n(287)),o=n.n(i),a=n(302),s=n(324),c=n(2679),l=n(326),u=n(307),d=n(45);const p=["children","className","disabled","iconName","size"],h=e=>"number"==typeof e?e:parseInt("small"===e?a.T:a.S,10),m=o.a.div.withConfig({displayName:"UIInputIconWrapper__InputWrapper",componentId:"sc-1ofpdvh-0"})(["position:relative;&& input{padding-left:",";}"],({inFloatingForm:e,size:t})=>Object(l.m)((e?6:2*parseInt(a.Q,10))+h(t))),f=o.a.div.withConfig({displayName:"UIInputIconWrapper__IconWrapper",componentId:"sc-1ofpdvh-1"})(["display:flex;align-items:center;position:absolute;top:0;bottom:0;left:0;padding:",";pointer-events:none;.private-input-group &{z-index:",";}"],({inFloatingForm:e})=>e?"6px 0 0":"0 "+a.Q,a.Pb),g=o()(c.a).withConfig({displayName:"UIInputIconWrapper__Icon",componentId:"sc-1ofpdvh-2"})(["transform:translateY(1px);"]),b=e=>{const{children:t,className:n,disabled:i,iconName:o,size:a}=e,c=Object(r.a)(e,p),l=Object(u.k)(n,"private-form__control--inline"),b=l?14:h(a);return Object(d.jsxs)(m,Object.assign({},c,{className:n,inFloatingForm:l,size:b,children:[t,Object(d.jsx)(f,{inFloatingForm:l,children:Object(d.jsx)(g,{name:o,color:i?s.BATTLESHIP:void 0,size:b})})]}))};0;b.defaultProps={align:"left"};b.displayName="UIInputIconWrapper";t.a=b},function(e,t,n){"use strict";var r=n(40),i=n(1148),o=n.n(i),a=n(99),s=n(747),c=n(2668),l=n(2599),u=n(1204),d=n(45);const p=Object(u.a)(c.a),h=Object(u.a)(l.a);class m extends r.Component{constructor(e){super(e);this.handleFileSelect=this.handleFileSelect.bind(this);this.onClearFile=this.onClearFile.bind(this);this.onImageChange=this.onImageChange.bind(this)}shouldComponentUpdate(e,t){return o()(this,e,t)}handleFileSelect(e){const{onFieldChange:t,returnType:n="url"}=this.props,r=e.toJS?e.toJS():e;return t("url"===n?r.url:r)}onClearFile(){this.props.onFieldChange("")}onImageChange(e){const t=e&&e.src;this.props.onFieldChange(t)}render(){const{help_text:e,inline_help_text:t,picker:n=s.b.FILE,value:r=null}=this.props,i=n===s.b.VIDEO.toLowerCase()?Object(a.a)("ContentComponents.videoPicker.buttons.browseVideos"):void 0;let o;n===s.b.DOCUMENT.toLowerCase()?o=s.b.DOCUMENT:n===s.b.VIDEO.toLowerCase()?o=s.e.MOVIE:n===s.b.AUDIO.toLowerCase()&&(o=s.e.AUDIO);return n===s.b.IMAGE.toLowerCase()?Object(d.jsx)(p,Object.assign({},this.props,{onFieldChange:this.onImageChange,picker:n.toUpperCase(),resizable:!1,showAlt:!1,value:{src:r}})):Object(d.jsx)(h,Object.assign({},this.props,{browseText:i,fileType:o,handleFileSelect:this.handleFileSelect,hasValue:!!r,helpText:e,inlineHelpText:t,onClearFile:this.onClearFile,picker:n.toUpperCase()}))}}t.a=m},function(e,t,n){"use strict";n.d(t,"a",(function(){return P}));var r=n(2),i=n(324),o=n(330),a=n(41),s=n.n(a),c=n(10),l=n(287),u=n.n(l),d=n(2721),p=n(485),h=n(2679),m=n(2743),f=n(497),g=n(498),b=n(357),O=n(450),y=n(329),j=n(326),v=n(45);const C=["attachmentSize"],x=["closeable","use","size","children","renderPreview","fileName","fileInfo","fileType","onCloseClick","processing"],E={fontSize:"12px",sm:{iconFont:"16px",previewWidth:"16px"},lg:{iconFont:"32px",previewWidth:"32px"}},T=({fileType:e})=>Object(v.jsx)(h.a,{className:"align-self-end",name:"application/pdf"===e?"pdfFile":"file"});T.propTypes={fileType:s.a.string};const S={closeable:!1,processing:!1,use:"default",size:"lg",renderPreview:T},I=u.a.div.withConfig({displayName:"UIFileAttachment__StyledAttachment_Children",componentId:"qfgcb2-0"})(["margin:0;bottom:0;left:0;position:absolute;right:0;top:0;"]),w=u()(m.a).withConfig({displayName:"UIFileAttachment__StyledAttachment_Media",componentId:"qfgcb2-1"})(["position:relative;max-width:100%;min-width:0;line-height:",";"],({size:e})=>"sm"===e&&E.fontSize),_=u()(g.a).withConfig({displayName:"UIFileAttachment__StyledAttachment_Preview",componentId:"qfgcb2-2"})(["align-items:center;display:flex;flex-basis:auto;flex-shrink:0;",";"],({size:e=S.size})=>Object(l.css)([""," max-height:",";width:",";> *{max-height:",";max-width:",";}"],Object(j.f)(E[e].iconFont),E[e].previewWidth,E[e].previewWidth,E[e].previewWidth,E[e].previewWidth));_.displayName="StyledAttachment_Preview";const N=u()(f.a).withConfig({displayName:"UIFileAttachment__StyledAttachment_Info",componentId:"qfgcb2-3"})(["display:flex;flex-direction:column;justify-content:center;line-height:1rem;width:100%;&&{flex-basis:auto;margin-left:",";}",";"],({size:e})=>"sm"===e&&"8px",({size:e})=>"sm"===e?Object(l.css)(["align-items:center;flex-direction:row;white-space:nowrap;"]):"lg"===e?Object(l.css)(["min-height:2rem;"]):null),A=u()(({className:e,fileInfo:t,size:n})=>t?Object(v.jsxs)(p.a,{className:e,use:"help",children:["sm"===n&&"(",t,"sm"===n&&")"]}):null).withConfig({displayName:"UIFileAttachment__FileInfo",componentId:"qfgcb2-4"})(["&&{font-weight:",";line-height:inherit;margin-left:",";}"],o.q,({size:e})=>"sm"===e&&"1ch"),D=u()(e=>{let t=Object(r.a)(e,C);return Object(v.jsx)(d.a,Object.assign({},t))}).withConfig({displayName:"UIFileAttachment__StyledAttachment_Close",componentId:"qfgcb2-5"})(["flex-shrink:0;color:",";right:10px;top:10px;vertical-align:text-top;",";"],i.EERIE,({attachmentSize:e})=>"sm"===e&&Object(l.css)(["align-self:center;margin-right:0;position:static;margin-left:8px;&::after{left:auto;margin-left:12px;}"]));D.displayName="StyledAttachment_Close";const k=u.a.div.withConfig({displayName:"UIFileAttachment__StyledAttachment",componentId:"qfgcb2-6"})(["display:",";padding:",";",";",";background-color:",";border:1px solid ",";color:",";font-weight:",";max-width:100%;position:relative;justify-content:space-between;padding-right:",";"],({size:e})=>"sm"===e?"flex":"inline-flex",({size:e})=>"sm"===e?"8px 12px":"12px",Object(j.d)(),Object(j.f)(E.fontSize),({use:e})=>"on-dark"===e?i.OLAF:i.GYPSUM,i.KOALA,({processing:e})=>e?i.EERIE:i.HEFFALUMP,o.m,({size:e})=>"lg"===e&&"32px");function P(e){const{closeable:t,use:n,size:i,children:o,renderPreview:a,fileName:s,fileInfo:l,onCloseClick:u,processing:d}=e,p=Object(r.a)(e,x),h=i?Object(y.c)(i):Object(y.c)(S.size),m=O.b(a,e,{mergeType:"none"}),f=Object(v.jsx)(A,{size:h,fileInfo:l});"processing"===n&&c.a.warn({message:'UIFileAttachment: `use="processing"` is deprecated. Set `processing={true}` instead.',key:"UIFileAttachment: processing",url:"https://git.hubteam.com/HubSpot/UIComponents/issues/7991#issuecomment-1176756"});return Object(v.jsxs)(k,Object.assign({},p,{processing:d||"processing"===n,size:h,use:n,children:[o&&Object(v.jsx)(I,{size:h,children:o}),Object(v.jsxs)(w,{size:h,children:[Object(v.jsx)(_,{size:h,children:m}),Object(v.jsxs)(N,{size:h,children:["sm"===h?Object(v.jsx)(b.a,{useFlex:!0,fixedChildren:f,children:s}):Object(v.jsx)(b.a,{useFlex:!0,children:s}),"sm"!==h&&f]})]}),t&&Object(v.jsx)(D,{className:"private-attachment__close",onClick:u,size:"sm",attachmentSize:h})]}))}P.propTypes={children:s.a.node,closeable:s.a.bool.isRequired,onCloseClick:s.a.func,processing:s.a.bool.isRequired,use:s.a.oneOf(["default","on-dark","processing"]),size:s.a.oneOfType([Object(y.b)(["sm","lg"])]).isRequired,fileName:s.a.node.isRequired,fileInfo:s.a.node,fileType:s.a.string,renderPreview:O.a};P.defaultProps=S;P.displayName="UIFileAttachment"},function(e,t,n){"use strict";var r=n(2),i=n(41),o=n.n(i),a=n(40),s=n(287),c=n.n(s),l=n(288),u=n.n(l),d=n(468),p=n(2679),h=n(340),m=n(348),f=n(329),g=n(324),b=n(302),O=n(331),y=n(45);const j=["variantStyles"],v=["dropSize"],C=["children","className","contentClassName","iconName","iconSize","size","use"],x=20,E={hover:{backgroundColor:g.CALYPSO_LIGHT,border:"1px dashed "+g.CALYPSO,iconColor:O.c},processing:{border:"1px solid "+g.GYPSUM,iconColor:g.EERIE},selected:{border:"1px solid "+g.GYPSUM,color:g.OBSIDIAN,iconColor:g.OBSIDIAN},error:{backgroundColor:g.CANDY_APPLE_LIGHT,border:"1px dashed "+g.CANDY_APPLE_DARK,color:O.b,iconColor:g.CANDY_APPLE_DARK},success:{backgroundColor:g.OZ_LIGHT,border:"1px dashed "+g.OZ_DARK,color:O.b,iconColor:g.OZ}},T=c()(e=>{const t=Object(r.a)(e,j);return Object(y.jsx)(d.a,Object.assign({},t))}).withConfig({displayName:"UIDropZone__Outer",componentId:"sc-11k6r4a-0"})(["display:flex;flex-direction:column;background-color:",";border:",";border-radius:4px;color:",";position:relative;"],({variantStyles:e})=>e.backgroundColor||g.GYPSUM,({variantStyles:e})=>e.border||"1px dashed "+g.SLINKY,({variantStyles:e})=>e.color||g.EERIE),S=Object(s.css)(["img{max-width:","px;}"],({contentWidth:e})=>e&&e-2*x),I=c.a.div.withConfig({displayName:"UIDropZone__Content",componentId:"sc-11k6r4a-1"})(["display:flex;min-height:",";flex-direction:",";align-items:center;justify-content:center;text-align:center;padding:24px ","px;",""],({size:e})=>"sm"===e?b.z:b.y,({size:e})=>"sm"===e?"row":"column",x,({contentWidth:e})=>e&&S),w=c()(e=>{const t=Object(r.a)(e,v);return Object(y.jsx)(p.a,Object.assign({},t))}).withConfig({displayName:"UIDropZone__Icon",componentId:"sc-11k6r4a-2"})(["padding-right:",";padding-bottom:",";"],({dropSize:e})=>"sm"===e&&"12px",({dropSize:e})=>"lg"===e&&"16px"),_=c.a.div.withConfig({displayName:"UIDropZone__Body",componentId:"sc-11k6r4a-3"})(["display:flex;flex-direction:column;"]),N={};class A extends a.Component{constructor(...e){super(...e);this.state={contentWidth:null};this._contentEl={offsetWidth:0};this.computeWidth=()=>{if(!Object(m.c)())return;const e=this._contentEl.offsetWidth;e&&e!==this.state.contentWidth&&this.setState({contentWidth:e})}}componentDidMount(){this.computeWidth()}componentDidUpdate(e,t){t.contentWidth===this.state.contentWidth&&this.computeWidth()}render(){const e=this.props,{children:t,className:n,contentClassName:i,iconName:o,iconSize:a,size:s,use:c}=e,l=Object(r.a)(e,C),{contentWidth:d}=this.state,p=Object(f.c)(s),h=u()("private-drop-zone",n,"lg"===p&&"private-drop-zone--large"),m=E[c]||N;return Object(y.jsx)(T,Object.assign({},l,{className:h,variantStyles:m,children:Object(y.jsxs)(I,{className:u()("private-drop-zone__content",i),ref:e=>{this._contentEl=e},contentWidth:d,size:p,children:[o?Object(y.jsx)(w,{name:o,dropSize:p,size:a||("sm"===p?24:48),color:m.iconColor}):null,Object(y.jsx)(_,{children:t})]})}))}}A.displayName="UIDropZone";A.propTypes={children:o.a.node,contentClassName:o.a.string,iconName:Object(h.a)(),iconSize:p.a.propTypes.size,size:Object(f.b)(["sm","lg"]).isRequired,use:o.a.oneOf(["default","hover","processing","selected","error","success"]).isRequired};A.defaultProps={size:"sm",use:"default"};t.a=A},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(9),i=n.n(r),o=n(28);function a(){let e=Object(o.getFullUrl)("app-api");"local"===i.a.getShort("filemanager")&&(e=Object(o.getFullUrl)("local",{envOverride:"qa"}));return e.replace("https://","")}},function(e,t,n){"use strict";n.d(t,"c",(function(){return c}));n.d(t,"e",(function(){return l}));n.d(t,"h",(function(){return m}));n.d(t,"b",(function(){return f}));n.d(t,"i",(function(){return g}));n.d(t,"f",(function(){return O}));n.d(t,"a",(function(){return y}));n.d(t,"g",(function(){return j}));n.d(t,"d",(function(){return v}));var r=n(188),i=n(61),o=n(181),a=n.n(o);Object(r.a)("FileManagerUI:LargeFileUploads"),Object(r.a)("FileManagerUI:AiPoweredSearch"),Object(r.a)("FileManagerUI:PickerLayoutUpdates"),Object(r.a)("BreezeAI:Rebranding"),Object(r.a)("FileManagerUI:StabilityImageGen");let s;!function(e){e.UNINITIALIZED="UNINITIALIZED";e.PENDING="PENDING";e.SUCCEEDED="SUCCEEDED";e.FAILED="FAILED";e.PRECONDITION_FAILED="PRECONDITION_FAILED";e.NOTFOUND="NOTFOUND"}(s||(s={}));s.SUCCEEDED,s.FAILED,s.NOTFOUND;let c,l;!function(e){e.IMG="IMG";e.MOVIE="MOVIE";e.DOCUMENT="DOCUMENT";e.AUDIO="AUDIO";e.OTHER="OTHER"}(c||(c={}));!function(e){e.FILE="FILE";e.FOLDER="FOLDER"}(l||(l={}));const u=["jpg","jpeg","png","gif","tif","tiff","ico","bmp","webp","svg"],d=["mov","avi","flv","wmv","rm","3gp","3g2","asf","asx","mpg","mp4","mpeg","swf","m4v","webm"],p=["csv","doc","docx","dot","dotx","key","pdf","pot","potx","pps","ppsx","ppt","pptx","txt","wpd","wps","wri","xls","xlsb","xlsx","xlt","xlx","xml"],h=["aac","aif","m4a","mp3","mpa","ra","wav","wma"],m=a.a.Map({[c.IMG]:a.a.Set(u),[c.MOVIE]:a.a.Set(d),[c.DOCUMENT]:a.a.Set(p),[c.AUDIO]:a.a.Set(h)}),f=(m.flatten().toList(),{AI_GENERATED:"AI_GENERATED",CANVA:"CANVA",SHUTTERSTOCK:"SHUTTERSTOCK"}),g=(a.a.Map({UNMAPPED:0,LANDING_PAGE:1,EMAIL:2,BLOG_POST:3,SITE_PAGE:4,LEGACY_PAGE:5,KNOWLEDGE_ARTICLE:6,WEB_INTERACTIVE:8,PODCAST:14,PODCAST_EPISODE:15}),Object(i.a)({HUBSPOT_VIDEO_2:null}));let b;!function(e){e.EMBEDDABLE_VIDEO="EMBEDDABLE_VIDEO";e.MAX_FILE_UPLOAD_TOTAL="MAX_FILE_UPLOAD_TOTAL"}(b||(b={}));const O=["meta","video_data","hosting_infos"],y="showDetails",j=["meta","allows_anonymous_access"],v=(Date.parse("02/21/2022"),["file-manager-demo","page-editor-ui","blog-editor-ui","EmailDragDropEditorUI","EmailTemplateEditorUI","SocialUI","web-interactives-editor-ui",...["podcast-editor-ui","podcast-management-ui","podcast-settings-ui"]])},function(e,t,n){"use strict";n.d(t,"d",(function(){return s}));n.d(t,"a",(function(){return c}));n.d(t,"b",(function(){return l}));n.d(t,"e",(function(){return u}));n.d(t,"c",(function(){return d}));n(24);var r=n(9),i=n.n(r);const o="FileManagerLibEvent",a=Boolean(i.a.debug("newrelic"));function s(e,t={}){if(window.newrelic&&window.newrelic.addPageAction){a&&console.log("[newrelic addPageAction]",e,t);t.eventName=e;window.newrelic.addPageAction(o,t)}}function c(){return window._currentApp?window._currentApp:window.hubspot&&window.hubspot.bender&&window.hubspot.bender.currentProject}function l(){return window._currentApp?null:window.hubspot&&window.hubspot.bender&&window.hubspot.bender.currentProjectVersion}function u(e){return{fileName:e.name,fileType:e.type,fileSize:e.size}}const d=(e,t="")=>{console.warn(`[Video HubL Tag] ${e}. HubL tag will ignore it. ${t}`)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(27);const i=e=>{try{const{user:t}=Object(r.userInfoSync)();return t.scopes.includes(e)}catch(e){return!1}}},function(e,t,n){"use strict";var r=n(287),i=n.n(r),o=n(41),a=n.n(o),s=n(324),c=n(2679),l=n(1197),u=n(512),d=n(2741),p=n(45);const h=e=>e||0===e?+e:void 0,m=i.a.div.withConfig({displayName:"Dimensions__LinkIconContainer",componentId:"sc-8cxv0y-0"})(["display:flex;flex-grow:0;flex-basis:auto;padding:44px 0 0;"]),f=e=>Object(p.jsxs)(l.a,{gap:!0,children:[Object(p.jsx)(d.a,{className:"m-all-0",label:e.widthLabel,children:Object(p.jsx)(u.a,{"data-selenium":e.widthSeleniumKey,max:e.maxWidth,min:0,onChange:e.onWidthChange,readOnly:e.readOnly,stepSize:1,use:e.useOnDark?"on-dark":"default",value:h(e.width)})}),Object(p.jsx)(m,{children:Object(p.jsx)(c.a,{className:"m-x-2 p-bottom-2",color:e.useOnDark?s.FLINT:s.BATTLESHIP,name:"link",size:"xxs",style:{alignSelf:"center"}})}),Object(p.jsx)(d.a,{className:"m-all-0",label:e.heightLabel,children:Object(p.jsx)(u.a,{"data-selenium":e.heightSeleniumKey,max:e.maxHeight,min:0,onChange:e.onHeightChange,readOnly:e.readOnly,stepSize:1,use:e.useOnDark?"on-dark":"default",value:h(e.height)})})]});f.propTypes={height:a.a.node,heightLabel:a.a.node.isRequired,heightSeleniumKey:a.a.string,maxHeight:a.a.number,maxWidth:a.a.number,onHeightChange:a.a.func.isRequired,onWidthChange:a.a.func.isRequired,readOnly:a.a.bool,useOnDark:a.a.bool,width:a.a.node,widthLabel:a.a.node.isRequired,widthSeleniumKey:a.a.string};t.a=f},function(e,t,n){"use strict";n.d(t,"a",(function(){return N}));var r=n(2),i=n(41),o=n.n(i),a=n(40),s=n(287),c=n.n(s),l=n(288),u=n.n(l),d=n(302),p=(n(345),n(10),n(477)),h=n(2741),m=n(485),f=n(339),g=n(334),b=n(310),O=n(326),y=n(311),j=n(467),v=n(45);const C=["aria-labelledby","children","className","description","disabled","error","Fieldset","gap","help","inline","label","required","tooltip","tooltipPlacement","use","validationMessage"],x=()=>({message:"UIInputGroup: the `description` prop has been deprecated. Please use the `help` prop instead.",key:"UIInputGroup: description prop"}),E=e=>{let t;"boolean"==typeof e&&(t=!!e&&d.o);"string"==typeof e&&(t=e);"number"==typeof e&&(t=parseInt(e,10)+"px");return t},T=Object(s.css)([".private-form__control{border-bottom-right-radius:0;border-top-right-radius:0;}"]),S=Object(s.css)([".private-form__control{border-top-left-radius:0;border-bottom-left-radius:0;}"]),I=Object(s.css)(["flex:1 1 0%;min-width:0;"]),w=c.a.div.withConfig({displayName:"UIInputGroup__InputGroupImpl",componentId:"sc-3otfqm-0"})(["display:",";> *{.private-form__control{&.private-form__control--error{position:relative;z-index:",";}&:focus{position:relative;z-index:",";}}",";",";}>:not(:first-child){",";",";}>:not(:last-child){",";",";}.private-form__set + .private-form__set{margin-top:0;margin-left:",";}"],({inline:e})=>e?"inline-flex":"flex",d.cb,d.Pb,e=>"itemBoth"===e.use&&Object(s.css)([":not(:first-child):not(:last-child){",";}"],I),e=>"flex"===e.use&&I,e=>!E(e.gap)&&S,e=>"itemLeft"===e.use&&I,e=>!E(e.gap)&&T,e=>"itemRight"===e.use&&I,e=>E(e.gap)?e.gap:"-1px"),_=c()(p.a.defaultProps.Legend).withConfig({displayName:"UIInputGroup__InputGroupLegend",componentId:"sc-3otfqm-1"})(["",";"],O.a.medium);class N extends a.Component{constructor(e){super(e);this._legendId="input-group-"+Object(b.d)()}render(){const e=this.props,{"aria-labelledby":t,children:n,className:i,description:o,disabled:s,error:c,Fieldset:l,gap:d,help:p,inline:h,label:f,required:g,tooltip:b,tooltipPlacement:O,use:y,validationMessage:x}=e,T=Object(r.a)(e,C),S=u()("private-form__set private-input-group",i),I=a.Children.toArray(n).find(e=>e&&e.props&&e.props.error&&e.props.validationMessage),A=c||I&&I.props.error,D=x||I&&I.props.validationMessage;return Object(v.jsxs)(l,Object.assign({},T,{className:S,disabled:s,help:p,Legend:_,legend:f,legendId:this._legendId,tabIndex:0,tooltip:b,tooltipPlacement:O,_required:g,children:[Object(v.jsx)(w,{gap:E(d),inline:h,use:y,children:a.Children.map(n,e=>{if(null==e)return null;Object(j.a)(e,N.displayName);const n=e.props["aria-label"],r=t||e.props["aria-labelledby"];0;return Object(a.cloneElement)(e,{"aria-labelledby":n?"":u()(f?this._legendId:r,e.props["aria-labelledby"]),required:e.props.required||g,description:null,help:null,tooltip:null,validationMessage:null})})}),Object(v.jsx)("div",{className:"private-inputgroup__meta private-form__meta",children:Object(v.jsx)("div",{className:"private-form__messages","aria-hidden":"true",children:A&&D&&Object(v.jsx)(m.a,{className:"private-form__validation",tabIndex:-1,use:"error",children:D})})}),o&&Object(v.jsx)(m.a,{className:"private-form__description",tabIndex:-1,use:"help",children:o})]}))}}N.propTypes={"aria-labelledby":o.a.string,children:o.a.node,className:o.a.string,description:Object(y.a)(o.a.node,x),disabled:o.a.bool,error:o.a.bool,Fieldset:Object(g.a)(p.a).isRequired,help:h.a.propTypes.help,gap:o.a.oneOfType([o.a.bool,o.a.number,o.a.string]),inline:Object(f.a)(o.a.bool),label:o.a.node,required:o.a.bool,tooltip:h.a.propTypes.tooltip,tooltipPlacement:h.a.propTypes.tooltipPlacement,use:o.a.oneOf(["flex","itemLeft","itemRight","itemBoth","none"]),validationMessage:o.a.node};N.defaultProps={error:!1,Fieldset:p.a,gap:!1,inline:!1,tooltipPlacement:"top",use:"flex"};N.displayName="UIInputGroup"},function(e,t,n){"use strict";var r=n(40),i=n(99),o=n(279),a=n(696),s=n(443),c=n(434),l=n(2741),u=n(2655),d=n(298),p=n(1199),h=n(45);const m=e=>"ContentComponents.cmv2.fields.media."+e,f=e=>{const{customSizeOption:t,exactTooltip:n,fullWidthHelpText:f,fullWidthSizeOption:g,isExactSizingEnabled:b,isFullWidthSizingEnabled:O,maxSizeLabelProps:y,onChange:j,originalSizeOption:v,sizeType:C,responsiveTooltip:x,showResponsiveSizingAlert:E,readOnly:T,useOnDark:S}=e,I=e=>{j(e)},w=[{text:Object(i.a)(m("sizing.sizeType.options.responsive")),value:p.a.AUTO,help:x||Object(h.jsx)(o.a,{message:m("sizing.sizeType.options.responsiveTooltip")})},{text:Object(i.a)(m("sizing.sizeType.options.exact")),value:p.a.EXACT,help:n||Object(h.jsx)(o.a,{message:m("sizing.sizeType.options.exactTooltip")})}],_=[{text:v||Object(i.a)(m("sizing.maxSizeType.options.original")),value:p.a.AUTO},{text:t||Object(i.a)(m("sizing.maxSizeType.options.custom")),value:p.a.AUTO_CUSTOM_MAX}];O&&_.splice(1,0,{text:g||Object(i.a)(m("sizing.maxSizeType.options.fullWidth")),value:p.a.AUTO_FULL_WIDTH,help:f||Object(h.jsx)(o.a,{message:m("sizing.maxSizeType.options.fullWidthTooltip")})});const N=Object(h.jsx)(a.a,{className:"p-y-3",type:"warning",children:Object(h.jsxs)(c.a,{direction:"column",children:[Object(h.jsx)(o.a,{message:m("sizing.sizeType.responsiveDisabled")}),Object(h.jsx)(s.a,{className:"m-top-2",onClick:()=>I(Object(d.a)(p.a.EXACT)),size:"extra-small",use:"tertiary",children:Object(h.jsx)(o.a,{message:m("sizing.sizeType.useExactButton")})})]})}),A=Object(h.jsx)(l.a,Object.assign({label:Object(h.jsx)(o.a,{message:m("sizing.maxSizeType.label")})},y,{children:Object(h.jsx)(u.a,{buttonUse:S?"form-on-dark":"form","data-test-id":"max-sizing-select",defaultValue:p.a.AUTO,onChange:I,options:_,readOnly:T,value:C})}));if(b){const e=!!C&&C!==p.a.EXACT;return Object(h.jsxs)(r.Fragment,{children:[E&&N,Object(h.jsx)(l.a,{label:Object(h.jsx)(o.a,{message:m("sizing.sizeType.label")}),children:Object(h.jsx)(u.a,{buttonUse:S?"form-on-dark":"form","data-test-id":"responsive-sizing-select",defaultValue:p.a.EXACT,onChange:I,options:w,readOnly:T,value:e?p.a.AUTO:C})}),e&&A]})}return A};f.defaultProps={isFullWidthSizingEnabled:!0};t.a=f},function(e,t,n){"use strict";t.a=Object.freeze({AUTO:"auto",AUTO_CUSTOM_MAX:"auto_custom_max",AUTO_FULL_WIDTH:"auto_full_width",EXACT:"exact"})},function(e,t,n){"use strict";n.d(t,"c",(function(){return a}));n.d(t,"b",(function(){return s}));n.d(t,"a",(function(){return c}));n.d(t,"h",(function(){return l}));n.d(t,"e",(function(){return d}));n.d(t,"d",(function(){return h}));n.d(t,"f",(function(){return m}));n.d(t,"i",(function(){return f}));n.d(t,"j",(function(){return g}));n.d(t,"g",(function(){return b}));var r=n(1201),i=n(1199);const o=e=>e-e%1,a=(e,t,n)=>{if(isNaN(e)||!e)return null;let r="width",i="height";if(n){r="max_width";i="max_height"}const a={[r]:o(e||0)};t&&(a[i]=Math.round(a[r]*(1/t)));return a},s=(e,t,n)=>{if(isNaN(e)||!e)return null;let r="height",i="width";if(n){r="max_height";i="max_width"}const a={[r]:o(e||0)};t&&(a[i]=Math.round(a[r]*t));return a},c={height:void 0,max_height:void 0,max_width:void 0,oembed_response:void 0,size_type:i.a.AUTO,width:void 0},l=e=>{const t=c,{oembed_response:n}=e||{},r=Object.keys(n||{}).reduce((e,t)=>{e[t]=void 0;return e},{});t.oembed_response=r;return t},u=/<script[\s\S]*?>[\s\S]*?<\/script>/,d=(e="")=>u.test(e),p=new DOMParser,h=({width:e,height:t}={})=>{if(!r.d.test(""+e)||!r.d.test(""+t)){e=r.c.WIDTH;t=r.c.HEIGHT}const n=Number(t)/Number(e);return Number((100*n).toFixed(2))},m=(e="",{width:t,height:n}={})=>{const{body:r}=p.parseFromString(e,"text/html"),i=r.querySelectorAll("iframe,video");let o={width:t,height:n};if(1===i.length){const a=i[0];if(a.parentElement===r){t&&n||(o={width:a.getAttribute("width"),height:a.getAttribute("height")});const i=`\n        position: relative;\n        overflow: hidden;\n        max-width: 100%;\n        margin: 0;\n        padding-bottom: ${h(o)}%;\n      `,s="\n        position: absolute;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        border: none;\n      ",c=document.createElement("div");c.style.cssText=i;a.style.cssText=`${a.style.cssText} ${s}`;c.appendChild(a.cloneNode(!0));r.replaceChild(c,a);e=r.innerHTML}}return{dimensions:o,html:e}},f=e=>{const t=r.e.find(t=>t.pattern.test(e));if(t&&t.type)return t.type;const n=r.f.find(t=>t.test(e));return n?n.exec(e)[1]:""},g=(e,t="")=>{t||(t=f(e));const n=p.parseFromString(e,"text/html");let i=!1;if(t.toLowerCase()===r.h.TWITTER){const e=n.querySelector("blockquote");e&&e.setAttribute("align","center");i=!0}else t.toLowerCase(),r.h.INSTAGRAM;return i?n.body.innerHTML:e},b=e=>`<img src="${e}" style="width: 100%;" />`},function(e,t,n){"use strict";n.d(t,"g",(function(){return o}));n.d(t,"a",(function(){return a}));n.d(t,"b",(function(){return c}));n.d(t,"c",(function(){return l}));n.d(t,"h",(function(){return u}));n.d(t,"d",(function(){return d}));n.d(t,"e",(function(){return p}));n.d(t,"f",(function(){return h}));var r=n(9),i=n.n(r);const o=()=>`https://preview.hubspoteditor${i.a.isProd()?"":"qa"}.com`,a=o()+"/content-embed-ui",s="ContentEmbedUI",c=Object.freeze({READY:s+":Ready",SIZE_CHANGE:s+":SizeChange",SET_CONTENT:s+":SetContent",SET_CONTENT_DONE:s+":SetContentDone",DISCONNECT:s+":Disconnect"}),l=Object.freeze({WIDTH:560,HEIGHT:315}),u=Object.freeze({FACEBOOK:"facebook",GIPHY:"giphy",GOOGLE_CALENDAR:"google-calendar",GOOGLE_DOCS:"google-docs",GOOGLE_DRIVE_FOLDER:"google-drive-folder",GOOGLE_MAPS:"google-maps",GOOGLE_SHEETS:"google-sheets",GOOGLE_SLIDES:"google-slides",INSTAGRAM:"instagram",PINTEREST:"pinterest",SLIDESHARE:"slideshare",TWENTYTHREE:"twentythree",TWITTER:"twitter",VIDYARD:"vidyard",VIMEO:"vimeo",WISTIA:"wistia",YOUTUBE:"youtube"}),d=/^[0-9]+$/,p=[{type:u.YOUTUBE,pattern:/https:\/\/(?:www\.)?youtube\.com\/embed/},{type:u.TWITTER,pattern:/https:\/\/(?:www\.)?twitter\.com\/.+\//},{type:u.FACEBOOK,pattern:/https:\/\/(?:www\.)?facebook\.com\/.+\//},{type:u.INSTAGRAM,pattern:/https:\/\/(?:www\.)?instagram\.com\/.+\//},{type:u.PINTEREST,pattern:/https:\/\/(?:www\.)?pinterest\.com\/.+\//},{type:u.GOOGLE_MAPS,pattern:/https:\/\/(?:www\.)?google\.com\/maps\/embed/},{type:u.GOOGLE_CALENDAR,pattern:/https:\/\/(?:www\.)?calendar\.google\.com\/calendar\/embed/},{type:u.GOOGLE_DOCS,pattern:/https:\/\/(?:www\.)?docs\.google\.com\/.+\/document/},{type:u.GOOGLE_SHEETS,pattern:/https:\/\/(?:www\.)?docs\.google\.com\/.+\/spreadsheets/},{type:u.GOOGLE_SLIDES,pattern:/https:\/\/(?:www\.)?docs\.google\.com\/.+\/presentation/},{type:u.GOOGLE_DRIVE_FOLDER,pattern:/https:\/\/(?:www\.)?drive\.google\.com\/embeddedfolder/},{type:u.SLIDESHARE,pattern:/https:\/\/(?:www\.)?slideshare\.net\/slideshow\/embed_code/},{type:u.TWENTYTHREE,pattern:/https:\/\/(?:www\.)?(\S+)\/((?:\d+|v)\.ihtml\/player\.html)/},{type:u.GIPHY,pattern:/https:\/\/(?:www\.)?giphy\.com\/embed/},{type:u.WISTIA,pattern:/(?:https:)?\/\/(?:www\.)?fast\.wistia\.net\/embed\/iframe/},{type:u.VIMEO,pattern:/https:\/\/(?:www\.)?player\.vimeo\.com\/video/}],h=[/<iframe\s+.*src="(?:http:|https:)?\/\/(?:www\.)?([a-zA-Z,0-9]+(?:.[a-zA-Z,0-9]+)?)\..*".*>/,/<script\s+.*src="(?:http:|https:)?\/\/(?:www\.)?([a-zA-Z,0-9]+(?:.[a-zA-Z,0-9]+)?)\..*".*>/]},function(e,t,n){"use strict";var r=n(99),i=n(279),o=n(282),a=n(2741),s=n(2655),c=n(2712),l=n(1203),u=n(45);const d=e=>"ContentComponents.cmv2.fields.image."+e,p=({onChange:e,readOnly:t,useOnDark:n,value:p})=>{const h=[{text:Object(r.a)(d("lazyLoading.disabled")),value:l.a.DISABLED},{text:Object(r.a)(d("lazyLoading.lazy")),value:l.a.LAZY},{text:Object(r.a)(d("lazyLoading.eager")),value:l.a.EAGER}],m=t=>{e(t.target.value)},f=Object(u.jsx)(c.a,{href:"https://web.dev/browser-level-image-lazy-loading/",external:!0,children:Object(u.jsx)(o.a,{message:d("lazyLoading.learnMore")})});return Object(u.jsx)(a.a,{className:"m-top-2",tooltipPlacement:"top",label:Object(u.jsx)(i.a,{message:d("lazyLoading.label")}),tooltip:Object(u.jsx)(o.a,{message:d("lazyLoading.loadingValueHelp"),options:{learnMoreLink:f}}),children:Object(u.jsx)(s.a,{buttonUse:n?"form-on-dark":"form",onChange:m,options:h,readOnly:t,value:p||l.a.DISABLED})})};t.a=p},function(e,t,n){"use strict";t.a=Object.freeze({DISABLED:"disabled",LAZY:"lazy",EAGER:"eager"})},function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n(2),i=n(40),o=n(1148),a=n.n(o),s=n(698),c=n(747),l=n(45);const u=["onFileManagerClose","onFileManagerOpen","onSelectFile","picker","filterType","filteredExtensions"];function d(e){class t extends i.Component{constructor(e){super(e);this.onFileManagerOpen=this.onFileManagerOpen.bind(this);this.onFileManagerClose=this.onFileManagerClose.bind(this);this.onSelectFile=this.onSelectFile.bind(this);this.state={isFileManagerOpen:!1,options:{}}}shouldComponentUpdate(e,t){return a()(this,e,t)}onFileManagerOpen(e,t={}){this.setState({isFileManagerOpen:!0,fileSelectedCallback:e,options:t})}onFileManagerClose(){this.setState({isFileManagerOpen:!1,options:{}})}onSelectFile(e){this.onFileManagerClose();this.state.fileSelectedCallback&&this.state.fileSelectedCallback(e)}render(){const t=this.props,{onFileManagerClose:n,onFileManagerOpen:o,onSelectFile:a,picker:d,filterType:p,filteredExtensions:h}=t,m=Object(r.a)(t,u),{initialPanel:f}=this.state.options;return Object(l.jsxs)(i.Fragment,{children:[Object(l.jsx)(e,Object.assign({filteredExtensions:h,onFileManagerClose:n||this.onFileManagerClose,onFileManagerOpen:o||this.onFileManagerOpen},m)),this.state.isFileManagerOpen&&Object(l.jsx)(s.a.Consumer,{children:({FilePicker:e})=>{if(!e)throw new Error("withFileManager requires FilePicker to be provided in PickersContext.");return Object(l.jsx)(e,{onClose:n||this.onFileManagerClose,onSelect:a||this.onSelectFile,pickerType:c.k.SIDE_MODAL,type:d,filterType:p,filteredExtensions:h,initialPanel:f,renderContext:"ContentComponents-withFileManager"})}})]})}}t.defaultProps={picker:c.b.FILE};t.wrappedComponent=e;return t}},function(e,t,n){"use strict";var r=n(2),i=n(40),o=n(59),a=n(27),s=n(279),c=n(73),l=n(696),u=n(485),d=n(1067),p=n(2781),h=n(2758),m=n(1206),f=n(2654),g=n(1207),b=n(2634),O=n(248),y=n(45);const j=["isDeleted","isUnpublished","readOnly","required","value"],v=e=>"ContentComponents.cmv2.fields.hubdb."+e,C=(e,t)=>({hubDbTables:d.m(e),isDeleted:d.n(e,{id:t.value}),isUnpublished:d.o(e,{id:t.value}),defaultOptions:d.c(e),options:d.l(e),optionsRequestStatus:d.d(e)}),x={fetchHubDbTable:p.d,fetchHubDbTables:p.e,saveCache:p.f,clearCache:p.a},E=Object(o.connect)(C,x);class T extends i.Component{constructor(e){super(e);const{user:t}=Object(a.userInfoSync)();this.hasHubDbAccess=t.scopes.includes("hubdb-schemas-read")&&t.scopes.includes("hubdb-data-read");this.hasHubDbPageAccess=t.scopes.includes("hubdb-page-template-access");this.hasHubDbEmailAccess=t.scopes.includes("hubdb-email-template-access");this.onChange=this.onChange.bind(this);this.loadOptions=this.loadOptions.bind(this);this.debouncedLoadOptions=Object(c.debounce)(this.loadOptions,h.c);this.state={input:""}}componentDidMount(){const{fetchHubDbTable:e,value:t}=this.props;t&&e(t).catch(e=>{throw e})}componentDidUpdate(e){const{fetchHubDbTable:t,hubDbTables:n,value:r}=this.props,{value:i}=e;Object(c.isEqual)(i,r)||n[r]||t(r).catch(e=>{throw e})}get isInContentEditor(){const{editor:e}=this.props;return e!==g.a.GLOBAL_CONTENT&&e!==g.a.EMAIL&&e!==g.a.DESIGN_MANAGER}get isMissingEmailPermissions(){const{editor:e,isEmailOrAnyType:t}=this.props;return b.b.isUngated("HubDb:EnforceScopeValidations")&&(e===g.a.EMAIL||e===g.a.DESIGN_MANAGER&&t)&&!this.hasHubDbEmailAccess}get isMissingContentPermissions(){const{editor:e}=this.props;return b.b.isUngated("HubDb:EnforceScopeValidations")&&(this.isInContentEditor||e===g.a.DESIGN_MANAGER&&this.isInContentHostTemplateType)&&!this.hasHubDbPageAccess}get isInContentHostTemplateType(){const{contentTypes:e,hostTemplateTypes:t}=this.props;return b.b.isUngated("CMv2:UseContentTypes")?e&&(e.includes(O.ANY)||e.includes(O.LANDING_PAGE)||e.includes(O.SITE_PAGE)||e.includes(O.BLOG_POST)||e.includes(O.BLOG_LISTING)):t&&(t.includes(h.l.ANY)||t.includes(h.l.PAGE)||t.includes(h.l.BLOG_POST)||t.includes(h.l.BLOG_LISTING))}onChange(e){const{onFieldChange:t}=this.props;t(e.target.value)}loadOptions(e,t,n={offset:0}){let r=n.offset;if(e!==this.state.input){this.setState({input:e});this.props.clearCache();r=0}const i={label__icontains:e,limit:h.f,offset:r};this.props.fetchHubDbTables(i).then(e=>{const{total:n}=e;t(null,{options:this.props.options,pagination:{hasMore:n>this.props.options.length,offset:r+h.f,length:n}})}).catch(e=>{setTimeout(()=>{throw e})})}renderOption(e){const t=e.dropdownClassName||"m-x-4 p-y-2",n=Object(y.jsx)("div",{className:t,children:e.dropdownText||e.text});return e.disabled?Object(y.jsx)(f.a,{title:Object(y.jsx)(s.a,{message:v("unpublishedText")}),children:n}):n}renderPermissionsWarning(){const{isInRowField:e}=this.props;let t,n;if(!this.hasHubDbAccess&&e){t=v("missingPermissionsTitle");n=v("missingPermissionsText")}else if(this.isMissingEmailPermissions){t=v("missingScopeTitle");n=v("missingScopeEmailText")}else if(this.isMissingContentPermissions){t=v("missingScopeTitle");n=v("missingScopeCMSText")}return n&&t?Object(y.jsx)(l.a,{className:"m-top-2",titleText:Object(y.jsx)(s.a,{message:t}),type:"warning",children:Object(y.jsx)(s.a,{message:n})}):null}renderUnpublishedTableWarning(){const{isInRowField:e,isUnpublished:t}=this.props;return!t||e?null:Object(y.jsx)(l.a,{className:"m-top-2",titleText:Object(y.jsx)(s.a,{message:v("unpublishedTitle")}),type:"warning",children:Object(y.jsx)(s.a,{message:v("unpublishedText")})})}render(){const e=this.props,{isDeleted:t,isUnpublished:n,readOnly:o=!1,required:a,value:c}=e,l=Object(r.a)(e,j),d=o||this.isMissingEmailPermissions||!this.hasHubDbAccess||this.isMissingContentPermissions;return Object(y.jsxs)(i.Fragment,{children:[Object(y.jsx)(m.a,Object.assign({clearable:!a,"data-selenium":"hubdb-select",error:t||n||void 0,loadOptions:this.debouncedLoadOptions,onChange:this.onChange,optionRenderer:this.renderOption,readOnly:d,value:c},l)),t&&Object(y.jsx)(u.a,{use:"error",weight:"medium",children:Object(y.jsx)(s.a,{message:v("deletedError")})}),this.renderPermissionsWarning(),this.renderUnpublishedTableWarning()]})}}t.a=E(T)},function(e,t,n){"use strict";var r=n(2),i=n(40),o=n(55),a=n(73),s=n(279),c=n(282),l=n(2655),u=n(696),d=n(67),p=n(66),h=n(434),m=n(45);const f=["className","createNewFooter","defaultOptions","dropdownClassName","error","extraDropdownFooterContent","menuStyle","options","placeholder","readOnly","type","useOnDark","valueRenderer"],g=e=>"ContentComponents.cmv2.fields.baseResource."+e,b=e=>Object(d.c)(e)||""===e||Array.isArray(e)&&!e.length;class O extends i.PureComponent{constructor(e){super(e);this.loadOptions=this.loadOptions.bind(this);this.onChange=this.onChange.bind(this);this.onOpenChange=this.onOpenChange.bind(this);this.state={isOpen:!1,isUpdatingDefaultOptions:!1}}componentDidMount(){const{defaultOptions:e,value:t}=this.props,n=Array.isArray(t)?JSON.stringify(t):""+t,r=e.reduce((e,t)=>{const{value:n}=t;e[""+n]=n;return e},{});this.defaultOptionsData=b(t)?Object.assign({},r):Object.assign({},r,{[n]:t})}componentDidUpdate(e,t){const{clearCache:n,defaultOptions:r}=this.props,{isOpen:i,isUpdatingDefaultOptions:o}=this.state;if(!Object(a.isEqual)(e.defaultOptions,r)){r.reduce((e,t)=>{if("value"in t&&!b(t.value)){const n=Array.isArray(t.value)?JSON.stringify(t.value):""+t.value;void 0===e[n]&&(e[n]=t.value)}return e},this.defaultOptionsData);this.setState({isUpdatingDefaultOptions:!1});n()}o||t.isOpen===i||n()}onOpenChange(e){const{onOpenChange:t}=this.props;t&&t(e);const n=e.target.value;n||(this.resetOffset=!0);this.setState({isOpen:n})}onChange(e){const{clearCache:t,onChange:n,saveCache:r}=this.props,i=e.target.value,o=Array.isArray(i)?JSON.stringify(i):""+i;if(b(i)||void 0!==this.defaultOptionsData[o])t();else{this.setState({isUpdatingDefaultOptions:!0});r(e.target.value)}n(e)}loadOptions(e,t,n={offset:0}){let r=n;if(this.resetOffset){r={offset:0};this.resetOffset=!1}this.props.loadOptions(e,t,r)}renderRequestFailedAlert(){const{optionsRequestStatus:e}=this.props;return e===p.FAILED&&Object(m.jsx)(u.a,{titleText:Object(m.jsx)(s.a,{message:g("failedOptionsRequest.title")}),type:"danger",className:"m-bottom-3",children:Object(m.jsx)(s.a,{message:g("failedOptionsRequest.desc")})})}render(){const e=this.props,{className:t,createNewFooter:n,defaultOptions:o,dropdownClassName:u,error:p,extraDropdownFooterContent:b,menuStyle:O,options:y,placeholder:j,readOnly:v,type:C,useOnDark:x,valueRenderer:E}=e,T=Object(r.a)(e,f),{isOpen:S,isUpdatingDefaultOptions:I}=this.state,w=Object(a.pick)(T,Object.keys(l.a.propTypes));let{value:_}=this.props;Object(d.d)(_)&&(_=void 0);const N=S?this.loadOptions:void 0,A=S||I?y:o,D=j||Object(m.jsx)(c.a,{message:g("placeholder"),options:{type:Object(m.jsx)(s.a,{message:g("typeLabels."+C),options:{count:1}})}}),k=n||b?Object(m.jsxs)(h.a,{direction:"column",children:[b,n]}):null;return Object(m.jsxs)(i.Fragment,{children:[this.renderRequestFailedAlert(),Object(m.jsx)(l.a,Object.assign({buttonUse:x?"form-on-dark":"form",className:t,"data-selenium":this.props["data-selenium"],"data-test-id":"async-selector","data-value":_,dropdownFooter:k,dropdownClassName:u,error:p,menuStyle:O,options:A,placeholder:D,readOnly:v,valueRenderer:E},w,{loadOptions:N,onChange:this.onChange,onOpenChange:this.onOpenChange,value:_}))]})}}O.defaultProps={cache:null,clearCache:o.a,defaultOptions:[],filterOptions:!1,options:[],saveCache:o.a,value:""};t.a=O},function(e,t,n){"use strict";t.a=Object.freeze({BLOGS:"BLOGS",EMAIL:"EMAIL",GLOBAL_CONTENT:"GLOBAL_CONTENT",PAGES:"PAGES",DESIGN_MANAGER:"DESIGN_MANAGER"})},function(e,t,n){"use strict";var r=n(40),i=n(1148),o=n.n(i),a=n(2668),s=n(1204),c=n(747),l=n(45);const u=Object(s.a)(a.a);class d extends r.Component{shouldComponentUpdate(e,t){return o()(this,e,t)}render(){const{value:e={}}=this.props;return Object(l.jsx)(u,Object.assign({},this.props,{picker:c.b.IMAGE,value:e}))}}t.a=d},function(e,t,n){"use strict";var r=n(40),i=n(59),o=n(55),a=n(99),s=n(1138),c=n(2779),l=n(1210),u=n(698),d=n(2741),p=n(1197),h=n(710),m=n(2679),f=n(1211),g=n(1133),b=n(2614),O=n(2606),y=n(1277),j=n(58),v=n(468),C=n(1300),x=n(1142),E=n(2634),T=n(45);const S=Object(l.a)(c.a),I=e=>"ContentComponents.cmv2.fields.text."+e,w={addValidationError:s.a,removeValidationError:s.b},_=Object(i.connect)(void 0,w),N=e=>t=>Object(T.jsx)(u.a.Consumer,{children:n=>Object(T.jsx)(e,Object.assign({pickerComponents:n},t))});class A extends r.PureComponent{constructor(e){super(e);this.renderBaseTextField=()=>{const{error:e=!1,fieldKey:t=[],readOnly:n=!1,value:r="",placeholder:i,useOnDark:o}=this.props;return Object(T.jsx)(S,{"data-selenium":t.join("."),error:e,onChange:this.onChange,onKeyPress:this.onKeyPress,maxHeight:300,placeholder:i,readOnly:n,shrink:!0,use:o?"on-dark":"default",value:r||""})};this.renderPersonalizationTextField=()=>{const{allow_new_line:e=!1,fieldKey:t=[],readOnly:n=!1,value:r=""}=this.props;let i=r;"object"==typeof i&&(i=i.value);return Object(T.jsx)(x.a.Consumer,{children:({__editorRefs:r,setEditorRefs:o})=>{const a=e=>{o(t.join("."),e)};return Object(T.jsx)(v.a,{"data-test-id":t.join("."),children:Object(T.jsx)(O.a,{"data-selenium":t.join("."),config:this.config,content:Object(C.b)(i),isMultiline:e,onBlur:this.onKeyPress,onChange:this.onChange,onKeyPress:this.onKeyPress,readOnly:n,tinyMceRef:a,uniqueKey:t.join(".")})})}})};this.onChange=this.onChange.bind(this);this.validateRegex=this.validateRegex.bind(this);this.toggleEmojiPickerOpenState=this.toggleEmojiPickerOpenState.bind(this);this.onEmojiPickerOpenChange=this.onEmojiPickerOpenChange.bind(this);this.onEmojiSelect=this.onEmojiSelect.bind(this);this.onKeyPress=this.onKeyPress.bind(this);this.makeConfig=this.makeConfig.bind(this);this.config=this.makeConfig();this.state={emojiPickerOpen:!1}}componentDidMount(){const{value:e=""}=this.props;e&&this.validateRegex(e)}componentDidUpdate(e){const{error:t=!1}=e,{error:n=!1,fieldKey:r=[]}=this.props;t&&!n&&this.props.removeValidationError(r)}get hasDataTokenPicker(){const{allow_data_tokens:e=!1}=this.props;return e&&E.b.isUngated("CMv2:DataTokenPicker")}makeConfig(){const{gates:e=[],pickerComponents:t,scopes:n=[],allow_new_line:r=!1}=this.props,i=[y.c];n.includes("crm-product")&&i.push(y.b);return Object(b.a)({appName:"",gates:e,scopes:n,hideTokenFallbacks:!1,pickerComponents:t,supportedCrmObjectFQNs:i,isMultiline:r})}toggleEmojiPickerOpenState(){this.setState({emojiPickerOpen:!this.state.emojiPickerOpen})}onEmojiPickerOpenChange({target:{value:e}}){this.setState({emojiPickerOpen:e})}onChange(e){const{onFieldChange:t,allow_new_line:n=!1}=this.props;let r=this.hasDataTokenPicker?e.target.getContent():e.target.value;r&&!n&&(r=r.replace(/[\n\r]+/g,""));t(r);this.validateRegex(r)}onKeyPress(e){const{allow_new_line:t=!1}=this.props;"Enter"!==e.key||t||e.preventDefault()}onEmojiSelect({native:e}){const{onFieldChange:t,value:n=""}=this.props;t(`${n}${e}`)}validateRegex(e){const{validation_regex:t=null,validation_error_message:n,setError:r=o.a,required:i=!1,fieldKey:s=[]}=this.props;if(!t||e.match(`^${t}$`)||!e&&!i)r(null);else{r(n&&Object(T.jsx)(g.a,{label:n,useStrict:!0})||Object(a.a)(I("invalidFormat"),{text:e,regex:t}));this.props.addValidationError(s)}}renderEmojiPicker(){const{show_emoji_picker:e=!1}=this.props;return e?Object(T.jsx)(d.a,{className:"emoji-picker",children:Object(T.jsx)(u.a.Consumer,{children:({EmojiPicker:e})=>e&&Object(T.jsx)(f.a,{popoverProps:{placement:"bottom left",open:this.state.emojiPickerOpen,closeOnOutsideClick:!0,onOpenChange:this.onEmojiPickerOpenChange},autoFocus:!0,onClick:this.onEmojiSelect,useDefaultFilter:!0,PickerContent:e,children:Object(T.jsx)(h.a,{use:this.props.useOnDark?"primary-white":"transparent",onClick:this.toggleEmojiPickerOpenState,children:Object(T.jsx)(m.a,{name:"emoji"})})})})}):null}render(){const{show_emoji_picker:e=!1}=this.props,t=this.hasDataTokenPicker?this.renderPersonalizationTextField():this.renderBaseTextField();return e?Object(T.jsxs)(p.a,{use:"itemRight",className:"cmv2-text-field",children:[Object(T.jsx)(d.a,{children:t}),this.renderEmojiPicker()]}):t}}t.a=Object(j.compose)(_,N)(A)},function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n(40),i=n(41),o=n.n(i),a=n(55),s=n(45);const c=250;function l(e,t){let n,r=!1,i=null;function o(t){i=null;r=!1;n=e(...t)}function a(){clearTimeout(i);r=!0;i=setTimeout(o,t,arguments);return n}return{debounced:a,get isDebouncing(){return r}}}function u(e){return!!(e&&e.nativeEvent&&e.persist&&e.preventDefault&&e.stopPropagation)}function d(e){class t extends r.Component{constructor(e){super(e);this.onChange=this.onChange.bind(this);this.onChangeDebounceMonitor=l(this.props.onChange,c);this.state={value:e.value}}componentDidUpdate(e){const{value:t}=this.props;this.onChangeDebounceMonitor.isDebouncing||e.value===t||this.setState({value:t})}getValueFromEvent(e){if(u(e)){e.persist();const{currentTarget:t,target:n}=e;return t?t.value:n&&n.value}if("value"in e)return e.value;if(e.currentTarget)return e.currentTarget.value;if(e.target)return e.target.value;throw new TypeError("Invalid onChange event object for debouncing. "+e)}onChange(e){const t=this.getValueFromEvent(e);this.setState({value:t});this.onChangeDebounceMonitor.debounced(...arguments)}render(){return Object(s.jsx)(e,Object.assign({},this.props,{value:this.state.value,onChange:this.onChange}))}}t.propTypes={value:o.a.any,onChange:o.a.func};t.defaultProps={onChange:a.a};t.displayName=`WithDebouncedInput(${e.displayName||e.name||""})`;return t}},function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n(2),i=n(40),o=n(41),a=n.n(o),s=n(453),c=n(446),l=n(45);const u=["children","emojiSize","perLine","popoverProps","PickerContent","autoFocus"];class d extends i.Component{constructor(...e){super(...e);this.setPickerContentRef=e=>{this.pickerContent=e};this.focus=()=>{this.pickerContent&&this.pickerContent.focus()}}componentDidUpdate(e){this.props.autoFocus&&!e.popoverProps.open&&this.props.popoverProps.open&&setTimeout(this.focus)}render(){const e=this.props,{children:t,emojiSize:n,perLine:i,popoverProps:o,PickerContent:a}=e,c=Object(r.a)(e,u),d=o&&o.width||i*(n+12)+12+2+30;return Object(l.jsx)(s.a,Object.assign({},o,{content:Object(l.jsx)(a,Object.assign({ref:this.setPickerContentRef},c)),width:d,children:t}))}}d.propTypes={children:a.a.node,emojiSize:a.a.number,perLine:a.a.number,showSkinTones:a.a.bool,popoverProps:Object(c.a)(s.a),unicodeVersion:a.a.number,customEmojiFilter:a.a.func,useDefaultFilter:a.a.bool,storeHandlers:a.a.shape({getter:a.a.func,setter:a.a.func}),PickerContent:a.a.elementType.isRequired,autoFocus:a.a.bool};d.defaultProps={emojiSize:24,perLine:7,showSkinTones:!0,unicodeVersion:8,useDefaultFilter:!0}},function(e,t,n){(function(t){!function(){"use strict";var n=function(e){if(null===e)return"null";if(void 0===e)return"undefined";var t=typeof e;return"object"===t&&(Array.prototype.isPrototypeOf(e)||e.constructor&&"Array"===e.constructor.name)?"array":"object"===t&&(String.prototype.isPrototypeOf(e)||e.constructor&&"String"===e.constructor.name)?"string":t},r=function(e){return-1!==["undefined","boolean","number","string","function","xml","null"].indexOf(e)},i=function(e,t){return Array.prototype.slice.call(e).sort(t)},o=function(e,t){return a((function(n,r){return e.eq(t(n),t(r))}))},a=function(e){return{eq:e}},s=a((function(e,t){return e===t})),c=function(e){return a((function(t,n){if(t.length!==n.length)return!1;for(var r=t.length,i=0;i<r;i++)if(!e.eq(t[i],n[i]))return!1;return!0}))},l=function(e,t){return o(c(e),(function(e){return i(e,t)}))},u=function(e){return a((function(t,n){var r=Object.keys(t),i=Object.keys(n);if(!l(s).eq(r,i))return!1;for(var o=r.length,a=0;a<o;a++){var c=r[a];if(!e.eq(t[c],n[c]))return!1}return!0}))},d=a((function(e,t){if(e===t)return!0;var i=n(e);return i===n(t)&&(r(i)?e===t:"array"===i?c(d).eq(e,t):"object"===i&&u(d).eq(e,t))})),p=function(e){var t=typeof e;return null===e?"null":"object"===t&&(Array.prototype.isPrototypeOf(e)||e.constructor&&"Array"===e.constructor.name)?"array":"object"===t&&(String.prototype.isPrototypeOf(e)||e.constructor&&"String"===e.constructor.name)?"string":t},h=function(e){return function(t){return p(t)===e}},m=function(e){return function(t){return typeof t===e}},f=function(e){return function(t){return e===t}},g=h("string"),b=h("object"),O=h("array"),y=f(null),j=m("boolean"),v=f(void 0),C=function(e){return null==e},x=function(e){return!C(e)},E=m("function"),T=m("number"),S=function(){},I=function(e,t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e(t.apply(null,n))}},w=function(e,t){return function(n){return e(t(n))}},_=function(e){return function(){return e}},N=function(e){return e},A=function(e,t){return e===t};function D(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=t.concat(n);return e.apply(null,i)}}var k=function(e){return function(t){return!e(t)}},P=function(e){return function(){throw new Error(e)}},R=function(e){return e()},F=function(e){e()},L=_(!1),M=_(!0),B=function(){return U},U=function(){var e=function(e){return e()},t=N;return{fold:function(e,t){return e()},isSome:L,isNone:M,getOr:t,getOrThunk:e,getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:_(null),getOrUndefined:_(void 0),or:t,orThunk:e,map:B,each:S,bind:B,exists:L,forall:M,filter:function(){return B()},toArray:function(){return[]},toString:_("none()")}}(),V=function(e){var t=_(e),n=function(){return i},r=function(t){return t(e)},i={fold:function(t,n){return n(e)},isSome:M,isNone:L,getOr:t,getOrThunk:t,getOrDie:t,getOrNull:t,getOrUndefined:t,or:n,orThunk:n,map:function(t){return V(t(e))},each:function(t){t(e)},bind:r,exists:r,forall:r,filter:function(t){return t(e)?i:U},toArray:function(){return[e]},toString:function(){return"some("+e+")"}};return i},H=function(e){return null==e?U:V(e)},q={some:V,none:B,from:H},G=Array.prototype.slice,W=Array.prototype.indexOf,z=Array.prototype.push,$=function(e,t){return W.call(e,t)},K=function(e,t){var n=$(e,t);return-1===n?q.none():q.some(n)},Y=function(e,t){return $(e,t)>-1},X=function(e,t){for(var n=0,r=e.length;n<r;n++){if(t(e[n],n))return!0}return!1},J=function(e,t){for(var n=e.length,r=new Array(n),i=0;i<n;i++){var o=e[i];r[i]=t(o,i)}return r},Q=function(e,t){for(var n=0,r=e.length;n<r;n++){t(e[n],n)}},Z=function(e,t){for(var n=e.length-1;n>=0;n--){t(e[n],n)}},ee=function(e,t){for(var n=[],r=[],i=0,o=e.length;i<o;i++){var a=e[i];(t(a,i)?n:r).push(a)}return{pass:n,fail:r}},te=function(e,t){for(var n=[],r=0,i=e.length;r<i;r++){var o=e[r];t(o,r)&&n.push(o)}return n},ne=function(e,t,n){Z(e,(function(e,r){n=t(n,e,r)}));return n},re=function(e,t,n){Q(e,(function(e,r){n=t(n,e,r)}));return n},ie=function(e,t,n){for(var r=0,i=e.length;r<i;r++){var o=e[r];if(t(o,r))return q.some(o);if(n(o,r))break}return q.none()},oe=function(e,t){return ie(e,t,L)},ae=function(e,t){for(var n=0,r=e.length;n<r;n++){if(t(e[n],n))return q.some(n)}return q.none()},se=function(e){for(var t=[],n=0,r=e.length;n<r;++n){if(!O(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);z.apply(t,e[n])}return t},ce=function(e,t){return se(J(e,t))},le=function(e,t){for(var n=0,r=e.length;n<r;++n){if(!0!==t(e[n],n))return!1}return!0},ue=function(e){var t=G.call(e,0);t.reverse();return t},de=function(e,t){return te(e,(function(e){return!Y(t,e)}))},pe=function(e,t){for(var n={},r=0,i=e.length;r<i;r++){var o=e[r];n[String(o)]=t(o,r)}return n},he=function(e,t){var n=G.call(e,0);n.sort(t);return n},me=function(e,t){return t>=0&&t<e.length?q.some(e[t]):q.none()},fe=function(e){return me(e,0)},ge=function(e){return me(e,e.length-1)},be=E(Array.from)?Array.from:function(e){return G.call(e)},Oe=function(e,t){for(var n=0;n<e.length;n++){var r=t(e[n],n);if(r.isSome())return r}return q.none()},ye=Object.keys,je=Object.hasOwnProperty,ve=function(e,t){for(var n=ye(e),r=0,i=n.length;r<i;r++){var o=n[r];t(e[o],o)}},Ce=function(e,t){return xe(e,(function(e,n){return{k:n,v:t(e,n)}}))},xe=function(e,t){var n={};ve(e,(function(e,r){var i=t(e,r);n[i.k]=i.v}));return n},Ee=function(e){return function(t,n){e[n]=t}},Te=function(e,t,n,r){var i={};ve(e,(function(e,i){(t(e,i)?n:r)(e,i)}));return i},Se=function(e,t){var n={},r={};Te(e,t,Ee(n),Ee(r));return{t:n,f:r}},Ie=function(e,t){var n={};Te(e,t,Ee(n),S);return n},we=function(e,t){var n=[];ve(e,(function(e,r){n.push(t(e,r))}));return n},_e=function(e){return we(e,N)},Ne=function(e,t){return Ae(e,t)?q.from(e[t]):q.none()},Ae=function(e,t){return je.call(e,t)},De=function(e,t){return Ae(e,t)&&void 0!==e[t]&&null!==e[t]},ke=function(e,t,n){void 0===n&&(n=d);return u(n).eq(e,t)},Pe=Array.isArray,Re=function(e){if(Pe(e))return e;for(var t=[],n=0,r=e.length;n<r;n++)t[n]=e[n];return t},Fe=function(e,t,n){var r,i;if(!e)return!1;n=n||e;if(void 0!==e.length){for(r=0,i=e.length;r<i;r++)if(!1===t.call(n,e[r],r,e))return!1}else for(r in e)if(Ae(e,r)&&!1===t.call(n,e[r],r,e))return!1;return!0},Le=function(e,t){var n=[];Fe(e,(function(r,i){n.push(t(r,i,e))}));return n},Me=function(e,t){var n=[];Fe(e,(function(r,i){t&&!t(r,i,e)||n.push(r)}));return n},Be=function(e,t){if(e)for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},Ue=function(e,t,n,r){for(var i=v(n)?e[0]:n,o=0;o<e.length;o++)i=t.call(r,i,e[o],o);return i},Ve=function(e,t,n){var r,i;for(r=0,i=e.length;r<i;r++)if(t.call(n,e[r],r,e))return r;return-1},He=function(e){return e[e.length-1]},qe=function(){return(qe=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e}).apply(this,arguments)};function Ge(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}function We(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)if(r||!(i in t)){r||(r=Array.prototype.slice.call(t,0,i));r[i]=t[i]}return e.concat(r||Array.prototype.slice.call(t))}var ze=function(e){var t,n=!1;return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];if(!n){n=!0;t=e.apply(null,r)}return t}},$e=function(e,t,n,r){var i=e.isiOS()&&!0===/ipad/i.test(n),o=e.isiOS()&&!i,a=e.isiOS()||e.isAndroid(),s=a||r("(pointer:coarse)"),c=i||!o&&a&&r("(min-device-width:768px)"),l=o||a&&!c,u=t.isSafari()&&e.isiOS()&&!1===/safari/i.test(n),d=!l&&!c&&!u;return{isiPad:_(i),isiPhone:_(o),isTablet:_(c),isPhone:_(l),isTouch:_(s),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:_(u),isDesktop:_(d)}},Ke=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r.test(t))return r}},Ye=function(e,t){var n=Ke(e,t);if(!n)return{major:0,minor:0};var r=function(e){return Number(t.replace(n,"$"+e))};return Qe(r(1),r(2))},Xe=function(e,t){var n=String(t).toLowerCase();return 0===e.length?Je():Ye(e,n)},Je=function(){return Qe(0,0)},Qe=function(e,t){return{major:e,minor:t}},Ze={nu:Qe,detect:Xe,unknown:Je},et=function(e,t){return Oe(t.brands,(function(t){var n=t.brand.toLowerCase();return oe(e,(function(e){var t;return n===(null===(t=e.brand)||void 0===t?void 0:t.toLowerCase())})).map((function(e){return{current:e.name,version:Ze.nu(parseInt(t.version,10),0)}}))}))},tt=function(e,t){var n=String(t).toLowerCase();return oe(e,(function(e){return e.search(n)}))},nt=function(e,t){return tt(e,t).map((function(e){var n=Ze.detect(e.versionRegexes,t);return{current:e.name,version:n}}))},rt=function(e,t){return tt(e,t).map((function(e){var n=Ze.detect(e.versionRegexes,t);return{current:e.name,version:n}}))},it=function(e,t){return e.substring(t)},ot=function(e,t,n){return""===t||e.length>=t.length&&e.substr(n,n+t.length)===t},at=function(e,t){return ct(e,t)?it(e,t.length):e},st=function(e,t){return-1!==e.indexOf(t)},ct=function(e,t){return ot(e,t,0)},lt=function(e){return function(t){return t.replace(e,"")}},ut=lt(/^\s+|\s+$/g),dt=lt(/^\s+/g),pt=lt(/\s+$/g),ht=function(e){return e.length>0},mt=function(e){return!ht(e)},ft=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,gt=function(e){return function(t){return st(t,e)}},bt=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(e){return st(e,"edge/")&&st(e,"chrome")&&st(e,"safari")&&st(e,"applewebkit")}},{name:"Chrome",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,ft],search:function(e){return st(e,"chrome")&&!st(e,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(e){return st(e,"msie")||st(e,"trident")}},{name:"Opera",versionRegexes:[ft,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:gt("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:gt("firefox")},{name:"Safari",versionRegexes:[ft,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(e){return(st(e,"safari")||st(e,"mobile/"))&&st(e,"applewebkit")}}],Ot=[{name:"Windows",search:gt("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(e){return st(e,"iphone")||st(e,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:gt("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:gt("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:gt("linux"),versionRegexes:[]},{name:"Solaris",search:gt("sunos"),versionRegexes:[]},{name:"FreeBSD",search:gt("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:gt("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],yt={browsers:_(bt),oses:_(Ot)},jt="Edge",vt="Chrome",Ct="IE",xt="Opera",Et="Firefox",Tt="Safari",St=function(){return It({current:void 0,version:Ze.unknown()})},It=function(e){var t=e.current,n=e.version,r=function(e){return function(){return t===e}};return{current:t,version:n,isEdge:r(jt),isChrome:r(vt),isIE:r(Ct),isOpera:r(xt),isFirefox:r(Et),isSafari:r(Tt)}},wt={unknown:St,nu:It,edge:_(jt),chrome:_(vt),ie:_(Ct),opera:_(xt),firefox:_(Et),safari:_(Tt)},_t="Windows",Nt="iOS",At="Android",Dt="Linux",kt="OSX",Pt="Solaris",Rt="FreeBSD",Ft="ChromeOS",Lt=function(){return Mt({current:void 0,version:Ze.unknown()})},Mt=function(e){var t=e.current,n=e.version,r=function(e){return function(){return t===e}};return{current:t,version:n,isWindows:r(_t),isiOS:r(Nt),isAndroid:r(At),isOSX:r(kt),isLinux:r(Dt),isSolaris:r(Pt),isFreeBSD:r(Rt),isChromeOS:r(Ft)}},Bt={unknown:Lt,nu:Mt,windows:_(_t),ios:_(Nt),android:_(At),linux:_(Dt),osx:_(kt),solaris:_(Pt),freebsd:_(Rt),chromeos:_(Ft)},Ut={detect:function(e,t,n){var r=yt.browsers(),i=yt.oses(),o=t.bind((function(e){return et(r,e)})).orThunk((function(){return nt(r,e)})).fold(wt.unknown,wt.nu),a=rt(i,e).fold(Bt.unknown,Bt.nu);return{browser:o,os:a,deviceType:$e(a,o,e,n)}}},Vt=function(e){return window.matchMedia(e).matches},Ht=ze((function(){return Ut.detect(navigator.userAgent,q.from(navigator.userAgentData),Vt)})),qt=function(){return Ht()},Gt=navigator.userAgent,Wt=qt(),zt=Wt.browser,$t=Wt.os,Kt=Wt.deviceType,Yt=/WebKit/.test(Gt)&&!zt.isEdge(),Xt="FormData"in window&&"FileReader"in window&&"URL"in window&&!!URL.createObjectURL,Jt=-1!==Gt.indexOf("Windows Phone"),Qt={opera:zt.isOpera(),webkit:Yt,ie:!(!zt.isIE()&&!zt.isEdge())&&zt.version.major,gecko:zt.isFirefox(),mac:$t.isOSX()||$t.isiOS(),iOS:Kt.isiPad()||Kt.isiPhone(),android:$t.isAndroid(),contentEditable:!0,transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",caretAfter:!0,range:window.getSelection&&"Range"in window,documentMode:zt.isIE()?document.documentMode||7:10,fileApi:Xt,ceFalse:!0,cacheSuffix:null,container:null,experimentalShadowDom:!1,canHaveCSP:!zt.isIE(),desktop:Kt.isDesktop(),windowsPhone:Jt,browser:{current:zt.current,version:zt.version,isChrome:zt.isChrome,isEdge:zt.isEdge,isFirefox:zt.isFirefox,isIE:zt.isIE,isOpera:zt.isOpera,isSafari:zt.isSafari},os:{current:$t.current,version:$t.version,isAndroid:$t.isAndroid,isChromeOS:$t.isChromeOS,isFreeBSD:$t.isFreeBSD,isiOS:$t.isiOS,isLinux:$t.isLinux,isOSX:$t.isOSX,isSolaris:$t.isSolaris,isWindows:$t.isWindows},deviceType:{isDesktop:Kt.isDesktop,isiPad:Kt.isiPad,isiPhone:Kt.isiPhone,isPhone:Kt.isPhone,isTablet:Kt.isTablet,isTouch:Kt.isTouch,isWebView:Kt.isWebView}},Zt=/^\s*|\s*$/g,en=function(e){return null==e?"":(""+e).replace(Zt,"")},tn=function(e,t){return t?!("array"!==t||!Pe(e))||typeof e===t:void 0!==e},nn=function(e,t,n,r){r=r||this;if(e){n&&(e=e[n]);Fe(e,(function(e,i){if(!1===t.call(r,e,i,n))return!1;nn(e,t,n,r)}))}},rn=function(e,t){return!e||tn(e,"array")?e:Le(e.split(t||","),en)},on={trim:en,isArray:Pe,is:tn,toArray:Re,makeMap:function(e,t,n){var r;t=t||",";"string"==typeof(e=e||[])&&(e=e.split(t));n=n||{};r=e.length;for(;r--;)n[e[r]]={};return n},each:Fe,map:Le,grep:Me,inArray:Be,hasOwn:Ae,extend:function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0;r<t.length;r++){var i=t[r];for(var o in i)if(Ae(i,o)){var a=i[o];void 0!==a&&(e[o]=a)}}return e},create:function(e,t,n){var r,i,o,a=this,s=0,c=(e=/^((static) )?([\w.]+)(:([\w.]+))?/.exec(e))[3].match(/(^|\.)(\w+)$/i)[2],l=a.createNS(e[3].replace(/\.\w+$/,""),n);if(!l[c])if("static"!==e[2]){if(!t[c]){t[c]=function(){};s=1}l[c]=t[c];a.extend(l[c].prototype,t);if(e[5]){r=a.resolve(e[5]).prototype;i=e[5].match(/\.(\w+)$/i)[1];o=l[c];l[c]=s?function(){return r[i].apply(this,arguments)}:function(){this.parent=r[i];return o.apply(this,arguments)};l[c].prototype[c]=l[c];a.each(r,(function(e,t){l[c].prototype[t]=r[t]}));a.each(t,(function(e,t){r[t]?l[c].prototype[t]=function(){this.parent=r[t];return e.apply(this,arguments)}:t!==c&&(l[c].prototype[t]=e)}))}a.each(t.static,(function(e,t){l[c][t]=e}))}else{l[c]=t;this.onCreate&&this.onCreate(e[2],e[3],l[c])}},walk:nn,createNS:function(e,t){var n,r;t=t||window;e=e.split(".");for(n=0;n<e.length;n++){t[r=e[n]]||(t[r]={});t=t[r]}return t},resolve:function(e,t){var n,r;t=t||window;for(n=0,r=(e=e.split(".")).length;n<r&&(t=t[e[n]]);n++);return t},explode:rn,_addCacheSuffix:function(e){var t=Qt.cacheSuffix;t&&(e+=(-1===e.indexOf("?")?"?":"&")+t);return e}},an=function(e,t){var n=(t||document).createElement("div");n.innerHTML=e;if(!n.hasChildNodes()||n.childNodes.length>1){console.error("HTML does not have a single root node",e);throw new Error("HTML must have a single root node")}return ln(n.childNodes[0])},sn=function(e,t){var n=(t||document).createElement(e);return ln(n)},cn=function(e,t){var n=(t||document).createTextNode(e);return ln(n)},ln=function(e){if(null==e)throw new Error("Node cannot be null or undefined");return{dom:e}},un={fromHtml:an,fromTag:sn,fromText:cn,fromDom:ln,fromPoint:function(e,t,n){return q.from(e.dom.elementFromPoint(t,n)).map(ln)}},dn=function(e,t){var n=[],r=function(e){n.push(e);return t(e)},i=t(e);do{i=i.bind(r)}while(i.isSome());return n},pn=function(e,t,n){return 0!=(e.compareDocumentPosition(t)&n)},hn=function(e,t){return pn(e,t,Node.DOCUMENT_POSITION_CONTAINED_BY)},mn=8,fn=9,gn=11,bn=1,On=3,yn=function(e,t){var n=e.dom;if(n.nodeType!==bn)return!1;var r=n;if(void 0!==r.matches)return r.matches(t);if(void 0!==r.msMatchesSelector)return r.msMatchesSelector(t);if(void 0!==r.webkitMatchesSelector)return r.webkitMatchesSelector(t);if(void 0!==r.mozMatchesSelector)return r.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")},jn=function(e){return e.nodeType!==bn&&e.nodeType!==fn&&e.nodeType!==gn||0===e.childElementCount},vn=function(e,t){var n=void 0===t?document:t.dom;return jn(n)?[]:J(n.querySelectorAll(e),un.fromDom)},Cn=function(e,t){var n=void 0===t?document:t.dom;return jn(n)?q.none():q.from(n.querySelector(e)).map(un.fromDom)},xn=function(e,t){return e.dom===t.dom},En=function(e,t){var n=e.dom,r=t.dom;return n!==r&&n.contains(r)},Tn=function(e,t){return hn(e.dom,t.dom)},Sn=function(e,t){return qt().browser.isIE()?Tn(e,t):En(e,t)};"undefined"!=typeof window?window:Function("return this;")();var In=function(e){return e.dom.nodeName.toLowerCase()},wn=function(e){return e.dom.nodeType},_n=function(e){return function(t){return wn(t)===e}},Nn=function(e){return wn(e)===mn||"#comment"===In(e)},An=_n(bn),Dn=_n(On),kn=_n(fn),Pn=_n(gn),Rn=function(e){return function(t){return An(t)&&In(t)===e}},Fn=function(e){return un.fromDom(e.dom.ownerDocument)},Ln=function(e){return kn(e)?e:Fn(e)},Mn=function(e){return un.fromDom(Ln(e).dom.documentElement)},Bn=function(e){return un.fromDom(Ln(e).dom.defaultView)},Un=function(e){return q.from(e.dom.parentNode).map(un.fromDom)},Vn=function(e,t){for(var n=E(t)?t:L,r=e.dom,i=[];null!==r.parentNode&&void 0!==r.parentNode;){var o=r.parentNode,a=un.fromDom(o);i.push(a);if(!0===n(a))break;r=o}return i},Hn=function(e){var t=function(t){return te(t,(function(t){return!xn(e,t)}))};return Un(e).map($n).map(t).getOr([])},qn=function(e){return q.from(e.dom.previousSibling).map(un.fromDom)},Gn=function(e){return q.from(e.dom.nextSibling).map(un.fromDom)},Wn=function(e){return ue(dn(e,qn))},zn=function(e){return dn(e,Gn)},$n=function(e){return J(e.dom.childNodes,un.fromDom)},Kn=function(e,t){var n=e.dom.childNodes;return q.from(n[t]).map(un.fromDom)},Yn=function(e){return Kn(e,0)},Xn=function(e){return Kn(e,e.dom.childNodes.length-1)},Jn=function(e){return e.dom.childNodes.length},Qn=function(e){var t=e.dom.head;if(null==t)throw new Error("Head is not available yet");return un.fromDom(t)},Zn=function(e){return Pn(e)&&x(e.dom.host)},er=E(Element.prototype.attachShadow)&&E(Node.prototype.getRootNode),tr=_(er),nr=er?function(e){return un.fromDom(e.dom.getRootNode())}:Ln,rr=function(e){return Zn(e)?e:Qn(Ln(e))},ir=function(e){var t=nr(e);return Zn(t)?q.some(t):q.none()},or=function(e){return un.fromDom(e.dom.host)},ar=function(e){if(tr()&&x(e.target)){var t=un.fromDom(e.target);if(An(t)&&sr(t)&&e.composed&&e.composedPath){var n=e.composedPath();if(n)return fe(n)}}return q.from(e.target)},sr=function(e){return x(e.dom.shadowRoot)},cr=function(e,t){Un(e).each((function(n){n.dom.insertBefore(t.dom,e.dom)}))},lr=function(e,t){Gn(e).fold((function(){Un(e).each((function(e){dr(e,t)}))}),(function(e){cr(e,t)}))},ur=function(e,t){Yn(e).fold((function(){dr(e,t)}),(function(n){e.dom.insertBefore(t.dom,n.dom)}))},dr=function(e,t){e.dom.appendChild(t.dom)},pr=function(e,t){cr(e,t);dr(t,e)},hr=function(e,t){Q(t,(function(t){cr(e,t)}))},mr=function(e,t){Q(t,(function(t){dr(e,t)}))},fr=function(e){e.dom.textContent="";Q($n(e),(function(e){gr(e)}))},gr=function(e){var t=e.dom;null!==t.parentNode&&t.parentNode.removeChild(t)},br=function(e){var t=$n(e);t.length>0&&hr(e,t);gr(e)},Or=function(e){var t=Dn(e)?e.dom.parentNode:e.dom;if(null==t||null===t.ownerDocument)return!1;var n=t.ownerDocument;return ir(un.fromDom(t)).fold((function(){return n.body.contains(t)}),w(Or,or))},yr=function(e,t){return{left:e,top:t,translate:function(n,r){return yr(e+n,t+r)}}},jr=yr,vr=function(e){var t=e.getBoundingClientRect();return jr(t.left,t.top)},Cr=function(e,t){return void 0!==e?e:void 0!==t?t:0},xr=function(e){var t=e.dom.ownerDocument,n=t.body,r=t.defaultView,i=t.documentElement;if(n===e.dom)return jr(n.offsetLeft,n.offsetTop);var o=Cr(null==r?void 0:r.pageYOffset,i.scrollTop),a=Cr(null==r?void 0:r.pageXOffset,i.scrollLeft),s=Cr(i.clientTop,n.clientTop),c=Cr(i.clientLeft,n.clientLeft);return Er(e).translate(a-c,o-s)},Er=function(e){var t=e.dom,n=t.ownerDocument.body;return n===t?jr(n.offsetLeft,n.offsetTop):Or(e)?vr(t):jr(0,0)},Tr=function(e){var t=void 0!==e?e.dom:document,n=t.body.scrollLeft||t.documentElement.scrollLeft,r=t.body.scrollTop||t.documentElement.scrollTop;return jr(n,r)},Sr=function(e,t,n){var r=(void 0!==n?n.dom:document).defaultView;r&&r.scrollTo(e,t)},Ir=function(e,t){qt().browser.isSafari()&&E(e.dom.scrollIntoViewIfNeeded)?e.dom.scrollIntoViewIfNeeded(!1):e.dom.scrollIntoView(t)},wr=function(e){var t=void 0===e?window:e;return qt().browser.isFirefox()?q.none():q.from(t.visualViewport)},_r=function(e,t,n,r){return{x:e,y:t,width:n,height:r,right:e+n,bottom:t+r}},Nr=function(e){var t=void 0===e?window:e,n=t.document,r=Tr(un.fromDom(n));return wr(t).fold((function(){var e=t.document.documentElement,n=e.clientWidth,i=e.clientHeight;return _r(r.left,r.top,n,i)}),(function(e){return _r(Math.max(e.pageLeft,r.left),Math.max(e.pageTop,r.top),e.width,e.height)}))},Ar=function(e){return function(t){return!!t&&t.nodeType===e}},Dr=function(e){return!!e&&!Object.getPrototypeOf(e)},kr=Ar(1),Pr=function(e){var t=e.map((function(e){return e.toLowerCase()}));return function(e){if(e&&e.nodeName){var n=e.nodeName.toLowerCase();return Y(t,n)}return!1}},Rr=function(e,t){var n=t.toLowerCase().split(" ");return function(t){if(kr(t))for(var r=0;r<n.length;r++){var i=t.ownerDocument.defaultView.getComputedStyle(t,null);if((i?i.getPropertyValue(e):null)===n[r])return!0}return!1}},Fr=function(e){return function(t){return kr(t)&&t.hasAttribute(e)}},Lr=function(e,t){return function(n){return kr(n)&&n.getAttribute(e)===t}},Mr=function(e){return kr(e)&&e.hasAttribute("data-mce-bogus")},Br=function(e){return kr(e)&&"all"===e.getAttribute("data-mce-bogus")},Ur=function(e){return kr(e)&&"TABLE"===e.tagName},Vr=function(e){return function(t){if(kr(t)){if(t.contentEditable===e)return!0;if(t.getAttribute("data-mce-contenteditable")===e)return!0}return!1}},Hr=Pr(["textarea","input"]),qr=Ar(3),Gr=Ar(8),Wr=Ar(9),zr=Ar(11),$r=Pr(["br"]),Kr=Pr(["img"]),Yr=Vr("true"),Xr=Vr("false"),Jr=Pr(["td","th"]),Qr=Pr(["video","audio","object","embed"]),Zr=function(e,t,n){void 0===n&&(n=A);return e.exists((function(e){return n(e,t)}))},ei=function(e){for(var t=[],n=function(e){t.push(e)},r=0;r<e.length;r++)e[r].each(n);return t},ti=function(e,t,n){return e.isSome()&&t.isSome()?q.some(n(e.getOrDie(),t.getOrDie())):q.none()},ni=function(e,t,n,r){return e.isSome()&&t.isSome()&&n.isSome()?q.some(r(e.getOrDie(),t.getOrDie(),n.getOrDie())):q.none()},ri=function(e,t){return e?q.some(t):q.none()},ii=function(e){return void 0!==e.style&&E(e.style.getPropertyValue)},oi=function(e,t,n){if(!(g(n)||j(n)||T(n))){console.error("Invalid call to Attribute.set. Key ",t,":: Value ",n,":: Element ",e);throw new Error("Attribute value was not simple")}e.setAttribute(t,n+"")},ai=function(e,t,n){oi(e.dom,t,n)},si=function(e,t){var n=e.dom;ve(t,(function(e,t){oi(n,t,e)}))},ci=function(e,t){var n=e.dom.getAttribute(t);return null===n?void 0:n},li=function(e,t){return q.from(ci(e,t))},ui=function(e,t){var n=e.dom;return!(!n||!n.hasAttribute)&&n.hasAttribute(t)},di=function(e,t){e.dom.removeAttribute(t)},pi=function(e){return re(e.dom.attributes,(function(e,t){e[t.name]=t.value;return e}),{})},hi=function(e,t,n){if(!g(n)){console.error("Invalid call to CSS.set. Property ",t,":: Value ",n,":: Element ",e);throw new Error("CSS value must be a string: "+n)}ii(e)&&e.style.setProperty(t,n)},mi=function(e,t){var n=e.dom;ve(t,(function(e,t){hi(n,t,e)}))},fi=function(e,t){var n=e.dom,r=window.getComputedStyle(n).getPropertyValue(t);return""!==r||Or(e)?r:gi(n,t)},gi=function(e,t){return ii(e)?e.style.getPropertyValue(t):""},bi=function(e,t){var n=e.dom,r=gi(n,t);return q.from(r).filter((function(e){return e.length>0}))},Oi=function(e){var t={},n=e.dom;if(ii(n))for(var r=0;r<n.style.length;r++){var i=n.style.item(r);t[i]=n.style[i]}return t},yi=function(e){return e.dom.offsetWidth},ji=qt().browser,vi=function(e){return oe(e,An)},Ci=function(e){return ji.isFirefox()&&"table"===In(e)?vi($n(e)).filter((function(e){return"caption"===In(e)})).bind((function(e){return vi(zn(e)).map((function(t){var n=t.dom.offsetTop,r=e.dom.offsetTop,i=e.dom.offsetHeight;return n<=r?-i:0}))})).getOr(0):0},xi=function(e,t){return e.children&&Y(e.children,t)},Ei=function(e,t,n){var r=0,i=0,o=e.ownerDocument;n=n||e;if(t){if(n===e&&t.getBoundingClientRect&&"static"===fi(un.fromDom(e),"position")){var a=t.getBoundingClientRect();return{x:r=a.left+(o.documentElement.scrollLeft||e.scrollLeft)-o.documentElement.clientLeft,y:i=a.top+(o.documentElement.scrollTop||e.scrollTop)-o.documentElement.clientTop}}for(var s=t;s&&s!==n&&s.nodeType&&!xi(s,n);){var c=s;r+=c.offsetLeft||0;i+=c.offsetTop||0;s=c.offsetParent}s=t.parentNode;for(;s&&s!==n&&s.nodeType&&!xi(s,n);){r-=s.scrollLeft||0;i-=s.scrollTop||0;s=s.parentNode}i+=Ci(un.fromDom(t))}return{x:r,y:i}},Ti={},Si={exports:Ti};!function(e,n,r,i){!function(t,i){"object"==typeof n&&void 0!==r?r.exports=i():"function"==typeof e&&e.amd?e(i):(t="undefined"!=typeof globalThis?globalThis:t||self).EphoxContactWrapper=i()}(this,(function(){var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{},n={exports:{}};!function(t){!function(e){var n=setTimeout;function r(){}function i(e,t){return function(){e.apply(t,arguments)}}function o(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0;this._handled=!1;this._value=void 0;this._deferreds=[];d(e,this)}function a(e,t){for(;3===e._state;)e=e._value;if(0!==e._state){e._handled=!0;o._immediateFn((function(){var n=1===e._state?t.onFulfilled:t.onRejected;if(null!==n){var r;try{r=n(e._value)}catch(e){c(t.promise,e);return}s(t.promise,r)}else(1===e._state?s:c)(t.promise,e._value)}))}else e._deferreds.push(t)}function s(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var n=t.then;if(t instanceof o){e._state=3;e._value=t;l(e);return}if("function"==typeof n){d(i(n,t),e);return}}e._state=1;e._value=t;l(e)}catch(t){c(e,t)}}function c(e,t){e._state=2;e._value=t;l(e)}function l(e){2===e._state&&0===e._deferreds.length&&o._immediateFn((function(){e._handled||o._unhandledRejectionFn(e._value)}));for(var t=0,n=e._deferreds.length;t<n;t++)a(e,e._deferreds[t]);e._deferreds=null}function u(e,t,n){this.onFulfilled="function"==typeof e?e:null;this.onRejected="function"==typeof t?t:null;this.promise=n}function d(e,t){var n=!1;try{e((function(e){if(!n){n=!0;s(t,e)}}),(function(e){if(!n){n=!0;c(t,e)}}))}catch(e){if(n)return;n=!0;c(t,e)}}o.prototype.catch=function(e){return this.then(null,e)};o.prototype.then=function(e,t){var n=new this.constructor(r);a(this,new u(e,t,n));return n};o.all=function(e){var t=Array.prototype.slice.call(e);return new o((function(e,n){if(0===t.length)return e([]);var r=t.length;function i(o,a){try{if(a&&("object"==typeof a||"function"==typeof a)){var s=a.then;if("function"==typeof s){s.call(a,(function(e){i(o,e)}),n);return}}t[o]=a;0==--r&&e(t)}catch(e){n(e)}}for(var o=0;o<t.length;o++)i(o,t[o])}))};o.resolve=function(e){return e&&"object"==typeof e&&e.constructor===o?e:new o((function(t){t(e)}))};o.reject=function(e){return new o((function(t,n){n(e)}))};o.race=function(e){return new o((function(t,n){for(var r=0,i=e.length;r<i;r++)e[r].then(t,n)}))};o._immediateFn="function"==typeof setWebPackFixedImmediate?function(e){setWebPackFixedImmediate(e)}:function(e){n(e,0)};o._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)};o._setImmediateFn=function(e){o._immediateFn=e};o._setUnhandledRejectionFn=function(e){o._unhandledRejectionFn=e};t.exports?t.exports=o:e.Promise||(e.Promise=o)}(e)}(n);var r=n.exports;return{boltExport:("undefined"!=typeof window?window:Function("return this;")()).Promise||r}}))}(void 0,Ti,Si);var Ii=Si.exports.boltExport,wi=function(e){var t=q.none(),n=[],r=function(e){return wi((function(t){i((function(n){t(e(n))}))}))},i=function(e){a()?c(e):n.push(e)},o=function(e){if(!a()){t=q.some(e);s(n);n=[]}},a=function(){return t.isSome()},s=function(e){Q(e,c)},c=function(e){t.each((function(t){setTimeout((function(){e(t)}),0)}))};e(o);return{get:i,map:r,isReady:a}},_i=function(e){return wi((function(t){t(e)}))},Ni={nu:wi,pure:_i},Ai=function(e){setTimeout((function(){throw e}),0)},Di=function(e){var t=function(t){e().then(t,Ai)};return{map:function(t){return Di((function(){return e().then(t)}))},bind:function(t){return Di((function(){return e().then((function(e){return t(e).toPromise()}))}))},anonBind:function(t){return Di((function(){return e().then((function(){return t.toPromise()}))}))},toLazy:function(){return Ni.nu(t)},toCached:function(){var t=null;return Di((function(){null===t&&(t=e());return t}))},toPromise:e,get:t}},ki={nu:function(e){return Di((function(){return new Ii(e)}))},pure:function(e){return Di((function(){return Ii.resolve(e)}))}},Pi=function(e,t){return t((function(t){var n=[],r=0,i=function(i){return function(o){n[i]=o;++r>=e.length&&t(n)}};0===e.length?t([]):Q(e,(function(e,t){e.get(i(t))}))}))},Ri=function(e){return Pi(e,ki.nu)},Fi=function(e){var t=function(t){return Fi(e)},n=function(t){return Fi(e)},r=function(t){return Fi(t(e))},i=function(t){return Fi(e)},o=function(t){t(e)},a=function(t){return t(e)},s=function(t,n){return n(e)},c=function(t){return t(e)},l=function(t){return t(e)},u=function(){return q.some(e)};return{isValue:M,isError:L,getOr:_(e),getOrThunk:_(e),getOrDie:_(e),or:t,orThunk:n,fold:s,map:r,mapError:i,each:o,bind:a,exists:c,forall:l,toOptional:u}},Li=function(e){return{isValue:L,isError:M,getOr:N,getOrThunk:function(e){return e()},getOrDie:function(){return P(String(e))()},or:N,orThunk:function(e){return e()},fold:function(t,n){return t(e)},map:function(t){return Li(e)},mapError:function(t){return Li(t(e))},each:S,bind:function(t){return Li(e)},exists:L,forall:M,toOptional:q.none}},Mi=function(e,t){return e.fold((function(){return Li(t)}),Fi)},Bi={value:Fi,error:Li,fromOption:Mi},Ui={generate:function(e){if(!O(e))throw new Error("cases must be an array");if(0===e.length)throw new Error("there must be at least one case");var t=[],n={};Q(e,(function(r,i){var o=ye(r);if(1!==o.length)throw new Error("one and only one name per case");var a=o[0],s=r[a];if(void 0!==n[a])throw new Error("duplicate key detected:"+a);if("cata"===a)throw new Error("cannot have a case named cata (sorry)");if(!O(s))throw new Error("case arguments must be an array");t.push(a);n[a]=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var o=n.length;if(o!==s.length)throw new Error("Wrong number of arguments to case "+a+". Expected "+s.length+" ("+s+"), got "+o);return{fold:function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];if(t.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+t.length);return t[i].apply(null,n)},match:function(e){var r=ye(e);if(t.length!==r.length)throw new Error("Wrong number of arguments to match. Expected: "+t.join(",")+"\nActual: "+r.join(","));if(!le(t,(function(e){return Y(r,e)})))throw new Error("Not all branches were specified when using match. Specified: "+r.join(", ")+"\nRequired: "+t.join(", "));return e[a].apply(null,n)},log:function(e){console.log(e,{constructors:t,constructor:a,params:n})}}}}));return n}};Ui.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);var Vi=function(e){return e.fold(N,N)};function Hi(e,t,n,r,i){return e(n,r)?q.some(n):E(i)&&i(n)?q.none():t(n,r,i)}var qi,Gi,Wi,zi,$i,Ki,Yi,Xi,Ji,Qi,Zi,eo,to,no,ro,io,oo,ao,so,co=function(e,t,n){for(var r=e.dom,i=E(n)?n:L;r.parentNode;){r=r.parentNode;var o=un.fromDom(r);if(t(o))return q.some(o);if(i(o))break}return q.none()},lo=function(e,t,n){return Hi((function(e,t){return t(e)}),co,e,t,n)},uo=function(e,t){var n=e.dom;return n.parentNode?po(un.fromDom(n.parentNode),(function(n){return!xn(e,n)&&t(n)})):q.none()},po=function(e,t){var n=function(e){return t(un.fromDom(e))};return oe(e.dom.childNodes,n).map(un.fromDom)},ho=function(e,t,n){return co(e,(function(e){return yn(e,t)}),n)},mo=function(e,t){return Cn(t,e)},fo=function(e,t,n){return Hi((function(e,t){return yn(e,t)}),ho,e,t,n)},go=window.Promise?window.Promise:Ii,bo=function(e,t){for(var n=window.requestAnimationFrame,r=["ms","moz","webkit"],i=function(e){window.setTimeout(e,0)},o=0;o<r.length&&!n;o++)n=window[r[o]+"RequestAnimationFrame"];n||(n=i);n(e,t)},Oo=function(e,t){"number"!=typeof t&&(t=0);return setTimeout(e,t)},yo=function(e,t){"number"!=typeof t&&(t=1);return setInterval(e,t)},jo=function(e,t){var n,r=function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];clearTimeout(n);n=Oo((function(){e.apply(this,r)}),t)};r.stop=function(){clearTimeout(n)};return r},vo={requestAnimationFrame:function(e,t){qi?qi.then(e):qi=new go((function(e){t||(t=document.body);bo(e,t)})).then(e)},setTimeout:Oo,setInterval:yo,setEditorTimeout:function(e,t,n){return Oo((function(){e.removed||t()}),n)},setEditorInterval:function(e,t,n){var r=yo((function(){e.removed?clearInterval(r):t()}),n);return r},debounce:jo,throttle:jo,clearInterval:function(e){return clearInterval(e)},clearTimeout:function(e){return clearTimeout(e)}},Co=function(e,t){void 0===t&&(t={});var n=0,r={},i=un.fromDom(e),o=Ln(i),a=t.maxLoadTime||5e3,s=function(e){dr(rr(i),e)},c=function(e){var t=rr(i);mo(t,"#"+e).each(gr)},l=function(e){return Ne(r,e).getOrThunk((function(){return{id:"mce-u"+n++,passed:[],failed:[],count:0}}))},u=function(n,i,c){var u,d=on._addCacheSuffix(n),p=l(d);r[d]=p;p.count++;var h=function(e,t){for(var n=e.length;n--;)e[n]();p.status=t;p.passed=[];p.failed=[];if(u){u.onload=null;u.onerror=null;u=null}},m=function(){return h(p.passed,2)},f=function(){return h(p.failed,3)},g=function(e,t){e()||(Date.now()-y<a?vo.setTimeout(t):f())},b=function(){g((function(){for(var t=e.styleSheets,n=t.length;n--;){var r=t[n].ownerNode;if(r&&r.id===u.id){m();return!0}}return!1}),b)};i&&p.passed.push(i);c&&p.failed.push(c);if(1!==p.status)if(2!==p.status)if(3!==p.status){p.status=1;var O=un.fromTag("link",o.dom);si(O,{rel:"stylesheet",type:"text/css",id:p.id});var y=Date.now();t.contentCssCors&&ai(O,"crossOrigin","anonymous");t.referrerPolicy&&ai(O,"referrerpolicy",t.referrerPolicy);(u=O.dom).onload=b;u.onerror=f;s(O);ai(O,"href",d)}else f();else m()},d=function(e){return ki.nu((function(t){u(e,I(t,_(Bi.value(e))),I(t,_(Bi.error(e))))}))},p=function(e){var t=on._addCacheSuffix(e);Ne(r,t).each((function(e){if(0===--e.count){delete r[t];c(e.id)}}))},h=function(e){Q(e,(function(e){p(e)}))};return{load:u,loadAll:function(e,t,n){Ri(J(e,d)).get((function(e){var r=ee(e,(function(e){return e.isValue()}));r.fail.length>0?n(r.fail.map(Vi)):t(r.pass.map(Vi))}))},unload:p,unloadAll:h,_setReferrerPolicy:function(e){t.referrerPolicy=e}}},xo=function(){var e=new WeakMap;return{forElement:function(t,n){var r=nr(t).dom;return q.from(e.get(r)).getOrThunk((function(){var t=Co(r,n);e.set(r,t);return t}))}}}(),Eo=function(){function e(e,t){this.node=e;this.rootNode=t;this.current=this.current.bind(this);this.next=this.next.bind(this);this.prev=this.prev.bind(this);this.prev2=this.prev2.bind(this)}e.prototype.current=function(){return this.node};e.prototype.next=function(e){this.node=this.findSibling(this.node,"firstChild","nextSibling",e);return this.node};e.prototype.prev=function(e){this.node=this.findSibling(this.node,"lastChild","previousSibling",e);return this.node};e.prototype.prev2=function(e){this.node=this.findPreviousNode(this.node,"lastChild","previousSibling",e);return this.node};e.prototype.findSibling=function(e,t,n,r){var i,o;if(e){if(!r&&e[t])return e[t];if(e!==this.rootNode){if(i=e[n])return i;for(o=e.parentNode;o&&o!==this.rootNode;o=o.parentNode)if(i=o[n])return i}}};e.prototype.findPreviousNode=function(e,t,n,r){var i,o,a;if(e){i=e[n];if(this.rootNode&&i===this.rootNode)return;if(i){if(!r)for(a=i[t];a;a=a[t])if(!a[t])return a;return i}if((o=e.parentNode)&&o!==this.rootNode)return o}};return e}(),To=["article","aside","details","div","dt","figcaption","footer","form","fieldset","header","hgroup","html","main","nav","section","summary","body","p","dl","multicol","dd","figure","address","center","blockquote","h1","h2","h3","h4","h5","h6","listing","xmp","pre","plaintext","menu","dir","ul","ol","li","hr","table","tbody","thead","tfoot","th","tr","td","caption"],So=["td","th"],Io=["thead","tbody","tfoot"],wo=["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"],_o=["li","dd","dt"],No=["ul","ol","dl"],Ao=["pre","script","textarea","style"],Do=function(e){var t;return function(n){t=t||pe(e,M);return Ae(t,In(n))}},ko=Do(["h1","h2","h3","h4","h5","h6"]),Po=Do(To),Ro=function(e){return"table"===In(e)},Fo=function(e){return An(e)&&!Po(e)},Lo=function(e){return An(e)&&"br"===In(e)},Mo=Do(wo),Bo=Do(No),Uo=Do(_o),Vo=Do(Io),Ho=Do(So),qo=Do(Ao),Go=function(e,t,n){return ho(e,t,n).isSome()},Wo="\ufeff",zo=" ",$o=Wo,Ko=function(e){return e===Wo},Yo=function(e){return e.replace(/\uFEFF/g,"")},Xo=kr,Jo=qr,Qo=function(e){Jo(e)&&(e=e.parentNode);return Xo(e)&&e.hasAttribute("data-mce-caret")},Zo=function(e){return Jo(e)&&Ko(e.data)},ea=function(e){return Qo(e)||Zo(e)},ta=function(e){return e.firstChild!==e.lastChild||!$r(e.firstChild)},na=function(e,t){var n=e.ownerDocument.createTextNode($o),r=e.parentNode;if(t){i=e.previousSibling;if(Jo(i)){if(ea(i))return i;if(ca(i))return i.splitText(i.data.length-1)}r.insertBefore(n,e)}else{var i=e.nextSibling;if(Jo(i)){if(ea(i))return i;if(sa(i)){i.splitText(1);return i}}e.nextSibling?r.insertBefore(n,e.nextSibling):r.appendChild(n)}return n},ra=function(e){var t=e.container();return!!qr(t)&&(t.data.charAt(e.offset())===$o||e.isAtStart()&&Zo(t.previousSibling))},ia=function(e){var t=e.container();return!!qr(t)&&(t.data.charAt(e.offset()-1)===$o||e.isAtEnd()&&Zo(t.nextSibling))},oa=function(){var e=document.createElement("br");e.setAttribute("data-mce-bogus","1");return e},aa=function(e,t,n){var r=t.ownerDocument.createElement(e);r.setAttribute("data-mce-caret",n?"before":"after");r.setAttribute("data-mce-bogus","all");r.appendChild(oa());var i=t.parentNode;n?i.insertBefore(r,t):t.nextSibling?i.insertBefore(r,t.nextSibling):i.appendChild(r);return r},sa=function(e){return Jo(e)&&e.data[0]===$o},ca=function(e){return Jo(e)&&e.data[e.data.length-1]===$o},la=function(e){var t=e.getElementsByTagName("br"),n=t[t.length-1];Mr(n)&&n.parentNode.removeChild(n)},ua=function(e){if(e&&e.hasAttribute("data-mce-caret")){la(e);e.removeAttribute("data-mce-caret");e.removeAttribute("data-mce-bogus");e.removeAttribute("style");e.removeAttribute("_moz_abspos");return e}return null},da=function(e){return Qo(e.startContainer)},pa=Yr,ha=Xr,ma=$r,fa=qr,ga=Pr(["script","style","textarea"]),ba=Pr(["img","input","textarea","hr","iframe","video","audio","object","embed"]),Oa=Pr(["table"]),ya=ea,ja=function(e){return!ya(e)&&(fa(e)?!ga(e.parentNode):ba(e)||ma(e)||Oa(e)||Ca(e))},va=function(e){return kr(e)&&"true"===e.getAttribute("unselectable")},Ca=function(e){return!1===va(e)&&ha(e)},xa=function(e,t){for(e=e.parentNode;e&&e!==t;e=e.parentNode){if(Ca(e))return!1;if(pa(e))return!0}return!0},Ea=function(e){return!!Ca(e)&&!0!==re(be(e.getElementsByTagName("*")),(function(e,t){return e||pa(t)}),!1)},Ta=function(e){return ba(e)||Ea(e)},Sa=function(e,t){return ja(e)&&xa(e,t)},Ia=/^[ \t\r\n]*$/,wa=function(e){return Ia.test(e)},_a=function(e,t){var n=un.fromDom(t),r=un.fromDom(e);return Go(r,"pre,code",D(xn,n))},Na=function(e,t){return qr(e)&&wa(e.data)&&!1===_a(e,t)},Aa=function(e){return kr(e)&&"A"===e.nodeName&&!e.hasAttribute("href")&&(e.hasAttribute("name")||e.hasAttribute("id"))},Da=function(e,t){return ja(e)&&!1===Na(e,t)||Aa(e)||ka(e)},ka=Fr("data-mce-bookmark"),Pa=Fr("data-mce-bogus"),Ra=Lr("data-mce-bogus","all"),Fa=function(e,t){var n=0;if(Da(e,e))return!1;var r=e.firstChild;if(!r)return!0;var i=new Eo(r,e);do{if(t){if(Ra(r)){r=i.next(!0);continue}if(Pa(r)){r=i.next();continue}}if($r(r)){n++;r=i.next()}else{if(Da(r,e))return!1;r=i.next()}}while(r);return n<=1},La=function(e,t){void 0===t&&(t=!0);return Fa(e.dom,t)},Ma=function(e){return"span"===e.nodeName.toLowerCase()},Ba=function(e,t){return x(e)&&(Da(e,t)||Fo(un.fromDom(e)))},Ua=function(e,t){var n=new Eo(e,t).prev(!1),r=new Eo(e,t).next(!1),i=v(n)||Ba(n,t),o=v(r)||Ba(r,t);return i&&o},Va=function(e){return Ma(e)&&"bookmark"===e.getAttribute("data-mce-type")},Ha=function(e,t){return qr(e)&&e.data.length>0&&Ua(e,t)},qa=function(e){return!!kr(e)&&e.childNodes.length>0},Ga=function(e){return zr(e)||Wr(e)},Wa=function(e,t,n){var r=n||t;if(kr(t)&&Va(t))return t;for(var i=t.childNodes,o=i.length-1;o>=0;o--)Wa(e,i[o],r);if(kr(t)){var a=t.childNodes;1===a.length&&Va(a[0])&&t.parentNode.insertBefore(a[0],t)}Ga(t)||Da(t,r)||qa(t)||Ha(t,r)||e.remove(t);return t},za=on.makeMap,$a=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Ka=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Ya=/[<>&\"\']/g,Xa=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,Ja={128:"€",130:"‚",131:"ƒ",132:"„",133:"…",134:"†",135:"‡",136:"ˆ",137:"‰",138:"Š",139:"‹",140:"Œ",142:"Ž",145:"‘",146:"’",147:"“",148:"”",149:"•",150:"–",151:"—",152:"˜",153:"™",154:"š",155:"›",156:"œ",158:"ž",159:"Ÿ"},Qa={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},Za={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},es=function(e){var t=un.fromTag("div").dom;t.innerHTML=e;return t.textContent||t.innerText||e},ts=function(e,t){var n,r,i,o={};if(e){e=e.split(",");t=t||10;for(n=0;n<e.length;n+=2){r=String.fromCharCode(parseInt(e[n],t));if(!Qa[r]){i="&"+e[n+1]+";";o[r]=i;o[i]=r}}return o}},ns=ts("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),rs=function(e,t){return e.replace(t?$a:Ka,(function(e){return Qa[e]||e}))},is=function(e,t){return e.replace(t?$a:Ka,(function(e){return e.length>1?"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";":Qa[e]||"&#"+e.charCodeAt(0)+";"}))},os=function(e,t,n){n=n||ns;return e.replace(t?$a:Ka,(function(e){return Qa[e]||n[e]||e}))},as=function(e,t){var n=ts(t)||ns,r=function(e,t){return e.replace(t?$a:Ka,(function(e){return void 0!==Qa[e]?Qa[e]:void 0!==n[e]?n[e]:e.length>1?"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";":"&#"+e.charCodeAt(0)+";"}))},i=function(e,t){return os(e,t,n)},o=za(e.replace(/\+/g,","));return o.named&&o.numeric?r:o.named?t?i:os:o.numeric?is:rs},ss={encodeRaw:rs,encodeAllRaw:function(e){return(""+e).replace(Ya,(function(e){return Qa[e]||e}))},encodeNumeric:is,encodeNamed:os,getEncodeFunc:as,decode:function(e){return e.replace(Xa,(function(e,t){if(t){if((t="x"===t.charAt(0).toLowerCase()?parseInt(t.substr(1),16):parseInt(t,10))>65535){t-=65536;return String.fromCharCode(55296+(t>>10),56320+(1023&t))}return Ja[t]||String.fromCharCode(t)}return Za[e]||ns[e]||es(e)}))}},cs={},ls={},us=on.makeMap,ds=on.each,ps=on.extend,hs=on.explode,ms=on.inArray,fs=function(e,t){return(e=on.trim(e))?e.split(t||" "):[]},gs=function(e,t){var n=us(e," ",us(e.toUpperCase()," "));return ps(n,t)},bs=function(e){return gs("td th li dt dd figcaption caption details summary",e.getTextBlockElements())},Os=function(e){var t,n,r,i,o,a,s={},c=function(e,n,r){var i,o,a,c=function(e,t){var n,r,i={};for(n=0,r=e.length;n<r;n++)i[e[n]]=t||{};return i};n=n||"";"string"==typeof(r=r||[])&&(r=fs(r));var l=fs(e);i=l.length;for(;i--;){a={attributes:c(o=fs([t,n].join(" "))),attributesOrder:o,children:c(r,ls)};s[l[i]]=a}},l=function(e,t){var n,r,i,o,a=fs(e);n=a.length;for(var c=fs(t);n--;){r=s[a[n]];for(i=0,o=c.length;i<o;i++){r.attributes[c[i]]={};r.attributesOrder.push(c[i])}}};if(cs[e])return cs[e];t="id accesskey class dir lang style tabindex title role";n="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul";r="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment";if("html4"!==e){t+=" contenteditable contextmenu draggable dropzone hidden spellcheck translate";n+=" article aside details dialog figure main header footer hgroup section nav";r+=" audio canvas command datalist mark meter output picture progress time wbr video ruby bdi keygen"}if("html5-strict"!==e){t+=" xml:lang";r=[r,a="acronym applet basefont big font strike tt"].join(" ");ds(fs(a),(function(e){c(e,"",r)}));n=[n,o="center dir isindex noframes"].join(" ");i=[n,r].join(" ");ds(fs(o),(function(e){c(e,"",i)}))}i=i||[n,r].join(" ");c("html","manifest","head body");c("head","","base command link meta noscript script style title");c("title hr noscript br");c("base","href target");c("link","href rel media hreflang type sizes hreflang");c("meta","name http-equiv content charset");c("style","media type scoped");c("script","src async defer type charset");c("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",i);c("address dt dd div caption","",i);c("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",r);c("blockquote","cite",i);c("ol","reversed start type","li");c("ul","","li");c("li","value",i);c("dl","","dt dd");c("a","href target rel media hreflang type",r);c("q","cite",r);c("ins del","cite datetime",i);c("img","src sizes srcset alt usemap ismap width height");c("iframe","src name width height",i);c("embed","src type width height");c("object","data type typemustmatch name usemap form width height",[i,"param"].join(" "));c("param","name value");c("map","name",[i,"area"].join(" "));c("area","alt coords shape href target rel media hreflang type");c("table","border","caption colgroup thead tfoot tbody tr"+("html4"===e?" col":""));c("colgroup","span","col");c("col","span");c("tbody thead tfoot","","tr");c("tr","","td th");c("td","colspan rowspan headers",i);c("th","colspan rowspan headers scope abbr",i);c("form","accept-charset action autocomplete enctype method name novalidate target",i);c("fieldset","disabled form name",[i,"legend"].join(" "));c("label","form for",r);c("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width");c("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value","html4"===e?i:r);c("select","disabled form multiple name required size","option optgroup");c("optgroup","disabled label","option");c("option","disabled label selected value");c("textarea","cols dirname disabled form maxlength name readonly required rows wrap");c("menu","type label",[i,"li"].join(" "));c("noscript","",i);if("html4"!==e){c("wbr");c("ruby","",[r,"rt rp"].join(" "));c("figcaption","",i);c("mark rt rp summary bdi","",r);c("canvas","width height",i);c("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[i,"track source"].join(" "));c("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[i,"track source"].join(" "));c("picture","","img source");c("source","src srcset type media sizes");c("track","kind src srclang label default");c("datalist","",[r,"option"].join(" "));c("article section nav aside main header footer","",i);c("hgroup","","h1 h2 h3 h4 h5 h6");c("figure","",[i,"figcaption"].join(" "));c("time","datetime",r);c("dialog","open",i);c("command","type label icon disabled checked radiogroup command");c("output","for form name",r);c("progress","value max",r);c("meter","value min max low high optimum",r);c("details","open",[i,"summary"].join(" "));c("keygen","autofocus challenge disabled form keytype name")}if("html5-strict"!==e){l("script","language xml:space");l("style","xml:space");l("object","declare classid code codebase codetype archive standby align border hspace vspace");l("embed","align name hspace vspace");l("param","valuetype type");l("a","charset name rev shape coords");l("br","clear");l("applet","codebase archive code object alt name width height align hspace vspace");l("img","name longdesc align border hspace vspace");l("iframe","longdesc frameborder marginwidth marginheight scrolling align");l("font basefont","size color face");l("input","usemap align");l("select");l("textarea");l("h1 h2 h3 h4 h5 h6 div p legend caption","align");l("ul","type compact");l("li","type");l("ol dl menu dir","compact");l("pre","width xml:space");l("hr","align noshade size width");l("isindex","prompt");l("table","summary width frame rules cellspacing cellpadding align bgcolor");l("col","width align char charoff valign");l("colgroup","width align char charoff valign");l("thead","align char charoff valign");l("tr","align char charoff valign bgcolor");l("th","axis align char charoff valign nowrap bgcolor width height");l("form","accept");l("td","abbr axis scope align char charoff valign nowrap bgcolor width height");l("tfoot","align char charoff valign");l("tbody","align char charoff valign");l("area","nohref");l("body","background bgcolor text link vlink alink")}if("html4"!==e){l("input button select textarea","autofocus");l("input textarea","placeholder");l("a","download");l("link script img","crossorigin");l("img","loading");l("iframe","sandbox seamless allowfullscreen loading")}ds(fs("a form meter progress dfn"),(function(e){s[e]&&delete s[e].children[e]}));delete s.caption.children.table;delete s.script;cs[e]=s;return s},ys=function(e,t){var n;if(e){n={};"string"==typeof e&&(e={"*":e});ds(e,(function(e,r){n[r]=n[r.toUpperCase()]="map"===t?us(e,/[, ]/):hs(e,/[, ]/)}))}return n},js=function(e){var t={},n={},r=[],i={},o={},a=function(t,n,r){var i=e[t];if(i)i=us(i,/[, ]/,us(i.toUpperCase(),/[, ]/));else if(!(i=cs[t])){i=gs(n,r);cs[t]=i}return i},s=Os((e=e||{}).schema);!1===e.verify_html&&(e.valid_elements="*[*]");var c=ys(e.valid_styles),l=ys(e.invalid_styles,"map"),u=ys(e.valid_classes,"map"),d=a("whitespace_elements","pre script noscript style textarea video audio iframe object code"),p=a("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),h=a("short_ended_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),m=a("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls"),f="td th iframe video audio object script code",g=a("non_empty_elements",f+" pre",h),b=a("move_caret_before_on_enter_elements",f+" table",h),O=a("text_block_elements","h1 h2 h3 h4 h5 h6 p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),y=a("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary",O),j=a("text_inline_elements","span strong b em i font s strike u var cite dfn code mark q sup sub samp");ds((e.special||"script noscript iframe noframes noembed title style textarea xmp").split(" "),(function(e){o[e]=new RegExp("</"+e+"[^>]*>","gi")}));var v=function(e){return new RegExp("^"+e.replace(/([?+*])/g,".$1")+"$")},C=function(e){var n,i,o,a,s,c,l,u,d,p,h,m,f,g,b,O,y,j,C=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/,x=/^([!\-])?(\w+[\\:]:\w+|[^=:<]+)?(?:([=:<])(.*))?$/,E=/[*?+]/;if(e){var T=fs(e,",");if(t["@"]){O=t["@"].attributes;y=t["@"].attributesOrder}for(n=0,i=T.length;n<i;n++)if(s=C.exec(T[n])){g=s[1];d=s[2];b=s[3];u=s[5];c={attributes:m={},attributesOrder:f=[]};"#"===g&&(c.paddEmpty=!0);"-"===g&&(c.removeEmpty=!0);"!"===s[4]&&(c.removeEmptyAttrs=!0);if(O){ve(O,(function(e,t){m[t]=e}));f.push.apply(f,y)}if(u)for(o=0,a=(u=fs(u,"|")).length;o<a;o++)if(s=x.exec(u[o])){l={};h=s[1];p=s[2].replace(/[\\:]:/g,":");g=s[3];j=s[4];if("!"===h){c.attributesRequired=c.attributesRequired||[];c.attributesRequired.push(p);l.required=!0}if("-"===h){delete m[p];f.splice(ms(f,p),1);continue}if(g){if("="===g){c.attributesDefault=c.attributesDefault||[];c.attributesDefault.push({name:p,value:j});l.defaultValue=j}if(":"===g){c.attributesForced=c.attributesForced||[];c.attributesForced.push({name:p,value:j});l.forcedValue=j}"<"===g&&(l.validValues=us(j,"?"))}if(E.test(p)){c.attributePatterns=c.attributePatterns||[];l.pattern=v(p);c.attributePatterns.push(l)}else{m[p]||f.push(p);m[p]=l}}if(!O&&"@"===d){O=m;y=f}if(b){c.outputName=d;t[b]=c}if(E.test(d)){c.pattern=v(d);r.push(c)}else t[d]=c}}},x=function(e){t={};r=[];C(e);ds(s,(function(e,t){n[t]=e.children}))},E=function(e){var r=/^(~)?(.+)$/;if(e){cs.text_block_elements=cs.block_elements=null;ds(fs(e,","),(function(e){var o=r.exec(e),a="~"===o[1],s=a?"span":"div",c=o[2];n[c]=n[s];i[c]=s;if(!a){y[c.toUpperCase()]={};y[c]={}}if(!t[c]){var l=t[s];delete(l=ps({},l)).removeEmptyAttrs;delete l.removeEmpty;t[c]=l}ds(n,(function(e,t){if(e[s]){n[t]=e=ps({},n[t]);e[c]=e[s]}}))}))}},T=function(t){var r=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;cs[e.schema]=null;t&&ds(fs(t,","),(function(e){var t,i,o=r.exec(e);if(o){i=o[1];t=i?n[o[2]]:n[o[2]]={"#comment":{}};t=n[o[2]];ds(fs(o[3],"|"),(function(e){"-"===i?delete t[e]:t[e]={}}))}}))},S=function(e){var n,i=t[e];if(i)return i;n=r.length;for(;n--;)if((i=r[n]).pattern.test(e))return i};if(e.valid_elements)x(e.valid_elements);else{ds(s,(function(e,r){t[r]={attributes:e.attributes,attributesOrder:e.attributesOrder};n[r]=e.children}));"html5"!==e.schema&&ds(fs("strong/b em/i"),(function(e){var n=fs(e,"/");t[n[1]].outputName=n[0]}));ds(j,(function(n,r){if(t[r]){e.padd_empty_block_inline_children&&(t[r].paddInEmptyBlock=!0);t[r].removeEmpty=!0}}));ds(fs("ol ul blockquote a table tbody"),(function(e){t[e]&&(t[e].removeEmpty=!0)}));ds(fs("p h1 h2 h3 h4 h5 h6 th td pre div address caption li"),(function(e){t[e].paddEmpty=!0}));ds(fs("span"),(function(e){t[e].removeEmptyAttrs=!0}))}E(e.custom_elements);T(e.valid_children);C(e.extended_valid_elements);T("+ol[ul|ol],+ul[ul|ol]");ds({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},(function(e,n){t[n]&&(t[n].parentsRequired=fs(e))}));e.invalid_elements&&ds(hs(e.invalid_elements),(function(e){t[e]&&delete t[e]}));S("span")||C("span[!data-mce-type|*]");var I=_(c),w=_(l),N=_(u),A=_(m),D=_(y),k=_(O),P=_(j),R=_(h),F=_(p),L=_(g),M=_(b),B=_(d),U=_(o),V=function(e,t){var r=n[e.toLowerCase()];return!(!r||!r[t.toLowerCase()])},H=function(e,t){var n,r,i=S(e);if(i){if(!t)return!0;if(i.attributes[t])return!0;if(n=i.attributePatterns){r=n.length;for(;r--;)if(n[r].pattern.test(e))return!0}}return!1},q=_(i);return{children:n,elements:t,getValidStyles:I,getValidClasses:N,getBlockElements:D,getInvalidStyles:w,getShortEndedElements:R,getTextBlockElements:k,getTextInlineElements:P,getBoolAttrs:A,getElementRule:S,getSelfClosingElements:F,getNonEmptyElements:L,getMoveCaretBeforeOnEnterElements:M,getWhiteSpaceElements:B,getSpecialElements:U,isValidChild:V,isValid:H,getCustomElements:q,addValidElements:C,setValidElements:x,addCustomElements:E,addValidChildren:T}},vs=function(e,t,n,r){var i=function(e){return(e=parseInt(e,10).toString(16)).length>1?e:"0"+e};return"#"+i(t)+i(n)+i(r)},Cs=function(e,t){var n,r,i,o=this,a=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,s=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,c=/\s*([^:]+):\s*([^;]+);?/g,l=/\s+$/,u={},d=Wo;e=e||{};if(t){r=t.getValidStyles();i=t.getInvalidStyles()}var p=("\\\" \\' \\; \\: ; : "+d).split(" ");for(n=0;n<p.length;n++){u[p[n]]=d+n;u[d+n]=p[n]}return{toHex:function(e){return e.replace(a,vs)},parse:function(t){var r,i,p,h,m={},f=e.url_converter,g=e.url_converter_scope||o,b=function(e,t,r){var i=m[e+"-top"+t];if(i){var o=m[e+"-right"+t];if(o){var a=m[e+"-bottom"+t];if(a){var s=m[e+"-left"+t];if(s){var c=[i,o,a,s];n=c.length-1;for(;n--&&c[n]===c[n+1];);if(!(n>-1&&r)){m[e+t]=-1===n?c[0]:c.join(" ");delete m[e+"-top"+t];delete m[e+"-right"+t];delete m[e+"-bottom"+t];delete m[e+"-left"+t]}}}}}},O=function(e){var t,n=m[e];if(n){t=(n=n.split(" ")).length;for(;t--;)if(n[t]!==n[0])return!1;m[e]=n[0];return!0}},y=function(e,t,n,r){if(O(t)&&O(n)&&O(r)){m[e]=m[t]+" "+m[n]+" "+m[r];delete m[t];delete m[n];delete m[r]}},j=function(e){h=!0;return u[e]},v=function(e,t){h&&(e=e.replace(/\uFEFF[0-9]/g,(function(e){return u[e]})));t||(e=e.replace(/\\([\'\";:])/g,"$1"));return e},C=function(e){return String.fromCharCode(parseInt(e.slice(1),16))},x=function(e){return e.replace(/\\[0-9a-f]+/gi,C)},E=function(t,n,r,i,o,a){if(o=o||a)return"'"+(o=v(o)).replace(/\'/g,"\\'")+"'";n=v(n||r||i);if(!e.allow_script_urls){var s=n.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(s))return"";if(!e.allow_svg_data_urls&&/^data:image\/svg/i.test(s))return""}f&&(n=f.call(g,n,"style"));return"url('"+n.replace(/\'/g,"\\'")+"')"};if(t){t=(t=t.replace(/[\u0000-\u001F]/g,"")).replace(/\\[\"\';:\uFEFF]/g,j).replace(/\"[^\"]+\"|\'[^\']+\'/g,(function(e){return e.replace(/[;:]/g,j)}));for(;r=c.exec(t);){c.lastIndex=r.index+r[0].length;i=r[1].replace(l,"").toLowerCase();p=r[2].replace(l,"");if(i&&p){i=x(i);p=x(p);if(-1!==i.indexOf(d)||-1!==i.indexOf('"'))continue;if(!e.allow_script_urls&&("behavior"===i||/expression\s*\(|\/\*|\*\//.test(p)))continue;"font-weight"===i&&"700"===p?p="bold":"color"!==i&&"background-color"!==i||(p=p.toLowerCase());p=(p=p.replace(a,vs)).replace(s,E);m[i]=h?v(p,!0):p}}b("border","",!0);b("border","-width");b("border","-color");b("border","-style");b("padding","");b("margin","");y("border","border-width","border-style","border-color");"medium none"===m.border&&delete m.border;"none"===m["border-image"]&&delete m["border-image"]}return m},serialize:function(e,t){var n="",o=function(t){var i,o=r[t];if(o)for(var a=0,s=o.length;a<s;a++){t=o[a];(i=e[t])&&(n+=(n.length>0?" ":"")+t+": "+i+";")}},a=function(e,t){var n=i["*"];return(!n||!n[e])&&!((n=i[t])&&n[e])};if(t&&r){o("*");o(t)}else ve(e,(function(e,r){!e||i&&!a(r,t)||(n+=(n.length>0?" ":"")+r+": "+e+";")}));return n}}},xs={keyLocation:!0,layerX:!0,layerY:!0,returnValue:!0,webkitMovementX:!0,webkitMovementY:!0,keyIdentifier:!0,mozPressure:!0},Es=function(e){return e instanceof Event||E(e.initEvent)},Ts=function(e){return e.isDefaultPrevented===M||e.isDefaultPrevented===L},Ss=function(e){return C(e.preventDefault)||Es(e)},Is=function(e,t){var n=null!=t?t:{};for(var r in e)Ae(xs,r)||(n[r]=e[r]);x(n.composedPath)&&(n.composedPath=function(){return e.composedPath()});return n},ws=function(e,t,n,r){var i,o=Is(t,r);o.type=e;C(o.target)&&(o.target=null!==(i=o.srcElement)&&void 0!==i?i:n);if(Ss(t)){o.preventDefault=function(){o.defaultPrevented=!0;o.isDefaultPrevented=M;E(t.preventDefault)?t.preventDefault():Es(t)&&(t.returnValue=!1)};o.stopPropagation=function(){o.cancelBubble=!0;o.isPropagationStopped=M;E(t.stopPropagation)?t.stopPropagation():Es(t)&&(t.cancelBubble=!0)};o.stopImmediatePropagation=function(){o.isImmediatePropagationStopped=M;o.stopPropagation()};if(!Ts(o)){o.isDefaultPrevented=!0===o.defaultPrevented?M:L;o.isPropagationStopped=!0===o.cancelBubble?M:L;o.isImmediatePropagationStopped=L}}return o},_s="mce-data-",Ns=/^(?:mouse|contextmenu)|click/,As=function(e,t,n,r){e.addEventListener?e.addEventListener(t,n,r||!1):e.attachEvent&&e.attachEvent("on"+t,n)},Ds=function(e,t,n,r){e.removeEventListener?e.removeEventListener(t,n,r||!1):e.detachEvent&&e.detachEvent("on"+t,n)},ks=function(e){return x(e)&&Ns.test(e.type)},Ps=function(e,t){var n=ws(e.type,e,document,t);if(ks(e)&&v(e.pageX)&&!v(e.clientX)){var r=n.target.ownerDocument||document,i=r.documentElement,o=r.body,a=n;a.pageX=e.clientX+(i&&i.scrollLeft||o&&o.scrollLeft||0)-(i&&i.clientLeft||o&&o.clientLeft||0);a.pageY=e.clientY+(i&&i.scrollTop||o&&o.scrollTop||0)-(i&&i.clientTop||o&&o.clientTop||0)}v(n.metaKey)&&(n.metaKey=!1);return n},Rs=function(e,t,n){var r=e.document,i={type:"ready"};if(n.domLoaded)t(i);else{var o=function(){Ds(e,"DOMContentLoaded",o);Ds(e,"load",o);if(!n.domLoaded){n.domLoaded=!0;t(i)}e=null};(function(){return"complete"===r.readyState||"interactive"===r.readyState&&r.body})()?o():As(e,"DOMContentLoaded",o);n.domLoaded||As(e,"load",o)}},Fs=function(){function e(){this.domLoaded=!1;this.events={};this.count=1;this.expando=_s+(+new Date).toString(32);this.hasMouseEnterLeave="onmouseenter"in document.documentElement;this.hasFocusIn="onfocusin"in document.documentElement;this.count=1}e.prototype.bind=function(e,t,n,r){var i,o,a,s,c,l,u,d=this,p=window,h=function(e){d.executeHandlers(Ps(e||p.event),i)};if(e&&3!==e.nodeType&&8!==e.nodeType){if(e[d.expando])i=e[d.expando];else{i=d.count++;e[d.expando]=i;d.events[i]={}}r=r||e;var m=t.split(" ");a=m.length;for(;a--;){l=h;c=u=!1;"DOMContentLoaded"===(s=m[a])&&(s="ready");if(d.domLoaded&&"ready"===s&&"complete"===e.readyState)n.call(r,Ps({type:s}));else{d.hasMouseEnterLeave||(c=d.mouseEnterLeave[s])&&(l=function(e){var t=e.currentTarget,n=e.relatedTarget;if(n&&t.contains)n=t.contains(n);else for(;n&&n!==t;)n=n.parentNode;if(!n){(e=Ps(e||p.event)).type="mouseout"===e.type?"mouseleave":"mouseenter";e.target=t;d.executeHandlers(e,i)}});if(!d.hasFocusIn&&("focusin"===s||"focusout"===s)){u=!0;c="focusin"===s?"focus":"blur";l=function(e){(e=Ps(e||p.event)).type="focus"===e.type?"focusin":"focusout";d.executeHandlers(e,i)}}if(o=d.events[i][s])"ready"===s&&d.domLoaded?n(Ps({type:s})):o.push({func:n,scope:r});else{d.events[i][s]=o=[{func:n,scope:r}];o.fakeName=c;o.capture=u;o.nativeHandler=l;"ready"===s?Rs(e,l,d):As(e,c||s,l,u)}}}e=o=null;return n}};e.prototype.unbind=function(e,t,n){var r,i,o,a,s;if(!e||3===e.nodeType||8===e.nodeType)return this;var c=e[this.expando];if(c){s=this.events[c];if(t){var l=t.split(" ");i=l.length;for(;i--;)if(r=s[a=l[i]]){if(n){o=r.length;for(;o--;)if(r[o].func===n){var u=r.nativeHandler,d=r.fakeName,p=r.capture;(r=r.slice(0,o).concat(r.slice(o+1))).nativeHandler=u;r.fakeName=d;r.capture=p;s[a]=r}}if(!n||0===r.length){delete s[a];Ds(e,r.fakeName||a,r.nativeHandler,r.capture)}}}else{ve(s,(function(t,n){Ds(e,t.fakeName||n,t.nativeHandler,t.capture)}));s={}}for(a in s)if(Ae(s,a))return this;delete this.events[c];try{delete e[this.expando]}catch(t){e[this.expando]=null}}return this};e.prototype.fire=function(e,t,n){var r;if(!e||3===e.nodeType||8===e.nodeType)return this;var i=Ps({type:t,target:e},n);do{(r=e[this.expando])&&this.executeHandlers(i,r);e=e.parentNode||e.ownerDocument||e.defaultView||e.parentWindow}while(e&&!i.isPropagationStopped());return this};e.prototype.clean=function(e){var t,n;if(!e||3===e.nodeType||8===e.nodeType)return this;e[this.expando]&&this.unbind(e);e.getElementsByTagName||(e=e.document);if(e&&e.getElementsByTagName){this.unbind(e);t=(n=e.getElementsByTagName("*")).length;for(;t--;)(e=n[t])[this.expando]&&this.unbind(e)}return this};e.prototype.destroy=function(){this.events={}};e.prototype.cancel=function(e){if(e){e.preventDefault();e.stopImmediatePropagation()}return!1};e.prototype.executeHandlers=function(e,t){var n=this.events[t],r=n&&n[e.type];if(r)for(var i=0,o=r.length;i<o;i++){var a=r[i];a&&!1===a.func.call(a.scope,e)&&e.preventDefault();if(e.isImmediatePropagationStopped())return}};e.Event=new e;return e}(),Ls="sizzle"+-new Date,Ms=window.document,Bs=0,Us=0,Vs=vc(),Hs=vc(),qs=vc(),Gs=function(e,t){e===t&&(Zi=!0);return 0},Ws="undefined",zs=1<<31,$s={}.hasOwnProperty,Ks=[],Ys=Ks.pop,Xs=Ks.push,Js=Ks.push,Qs=Ks.slice,Zs=Ks.indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(this[t]===e)return t;return-1},ec="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",tc="[\\x20\\t\\r\\n\\f]",nc="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",rc="\\["+tc+"*("+nc+")(?:"+tc+"*([*^$|!~]?=)"+tc+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+nc+"))|)"+tc+"*\\]",ic=":("+nc+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+rc+")*)|.*)\\)|)",oc=new RegExp("^"+tc+"+|((?:^|[^\\\\])(?:\\\\.)*)"+tc+"+$","g"),ac=new RegExp("^"+tc+"*,"+tc+"*"),sc=new RegExp("^"+tc+"*([>+~]|"+tc+")"+tc+"*"),cc=new RegExp("="+tc+"*([^\\]'\"]*?)"+tc+"*\\]","g"),lc=new RegExp(ic),uc=new RegExp("^"+nc+"$"),dc={ID:new RegExp("^#("+nc+")"),CLASS:new RegExp("^\\.("+nc+")"),TAG:new RegExp("^("+nc+"|[*])"),ATTR:new RegExp("^"+rc),PSEUDO:new RegExp("^"+ic),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+tc+"*(even|odd|(([+-]|)(\\d*)n|)"+tc+"*(?:([+-]|)"+tc+"*(\\d+)|))"+tc+"*\\)|)","i"),bool:new RegExp("^(?:"+ec+")$","i"),needsContext:new RegExp("^"+tc+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+tc+"*((?:-\\d)?\\d*)"+tc+"*\\)|)(?=[^-]|$)","i")},pc=/^(?:input|select|textarea|button)$/i,hc=/^h\d$/i,mc=/^[^{]+\{\s*\[native \w/,fc=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,gc=/[+~]/,bc=/'|\\/g,Oc=new RegExp("\\\\([\\da-f]{1,6}"+tc+"?|("+tc+")|.)","ig"),yc=function(e,t,n){var r="0x"+t-65536;return r!=r||n?t:r<0?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)};try{Js.apply(Ks=Qs.call(Ms.childNodes),Ms.childNodes);Ks[Ms.childNodes.length].nodeType}catch(e){Js={apply:Ks.length?function(e,t){Xs.apply(e,Qs.call(t))}:function(e,t){for(var n=e.length,r=0;e[n++]=t[r++];);e.length=n-1}}}var jc=function(e,t,n,r){var i,o,a,s,c,l,u,d,p,h;(t?t.ownerDocument||t:Ms)!==to&&eo(t);n=n||[];if(!e||"string"!=typeof e)return n;if(1!==(s=(t=t||to).nodeType)&&9!==s)return[];if(ro&&!r){if(i=fc.exec(e))if(a=i[1]){if(9===s){if(!(o=t.getElementById(a))||!o.parentNode)return n;if(o.id===a){n.push(o);return n}}else if(t.ownerDocument&&(o=t.ownerDocument.getElementById(a))&&so(t,o)&&o.id===a){n.push(o);return n}}else{if(i[2]){Js.apply(n,t.getElementsByTagName(e));return n}if((a=i[3])&&Gi.getElementsByClassName){Js.apply(n,t.getElementsByClassName(a));return n}}if(Gi.qsa&&(!io||!io.test(e))){d=u=Ls;p=t;h=9===s&&e;if(1===s&&"object"!==t.nodeName.toLowerCase()){l=Ki(e);(u=t.getAttribute("id"))?d=u.replace(bc,"\\$&"):t.setAttribute("id",d);d="[id='"+d+"'] ";c=l.length;for(;c--;)l[c]=d+_c(l[c]);p=gc.test(e)&&Ic(t.parentNode)||t;h=l.join(",")}if(h)try{Js.apply(n,p.querySelectorAll(h));return n}catch(e){}finally{u||t.removeAttribute("id")}}}return Xi(e.replace(oc,"$1"),t,n,r)};function vc(){var e=[];function t(n,r){e.push(n+" ")>Wi.cacheLength&&delete t[e.shift()];return t[n+" "]=r}return t}function Cc(e){e[Ls]=!0;return e}function xc(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||zs)-(~e.sourceIndex||zs);if(r)return r;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function Ec(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function Tc(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function Sc(e){return Cc((function(t){t=+t;return Cc((function(n,r){for(var i,o=e([],n.length,t),a=o.length;a--;)n[i=o[a]]&&(n[i]=!(r[i]=n[i]))}))}))}function Ic(e){return e&&typeof e.getElementsByTagName!==Ws&&e}Gi=jc.support={};$i=jc.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName};eo=jc.setDocument=function(e){var t,n=e?e.ownerDocument||e:Ms,r=n.defaultView;function i(e){try{return e.top}catch(e){}return null}if(n===to||9!==n.nodeType||!n.documentElement)return to;to=n;no=n.documentElement;ro=!$i(n);r&&r!==i(r)&&(r.addEventListener?r.addEventListener("unload",(function(){eo()}),!1):r.attachEvent&&r.attachEvent("onunload",(function(){eo()})));Gi.attributes=!0;Gi.getElementsByTagName=!0;Gi.getElementsByClassName=mc.test(n.getElementsByClassName);Gi.getById=!0;Wi.find.ID=function(e,t){if(typeof t.getElementById!==Ws&&ro){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}};Wi.filter.ID=function(e){var t=e.replace(Oc,yc);return function(e){return e.getAttribute("id")===t}};Wi.find.TAG=Gi.getElementsByTagName?function(e,t){if(typeof t.getElementsByTagName!==Ws)return t.getElementsByTagName(e)}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if("*"===e){for(;n=o[i++];)1===n.nodeType&&r.push(n);return r}return o};Wi.find.CLASS=Gi.getElementsByClassName&&function(e,t){if(ro)return t.getElementsByClassName(e)};oo=[];io=[];Gi.disconnectedMatch=!0;io=io.length&&new RegExp(io.join("|"));oo=oo.length&&new RegExp(oo.join("|"));t=mc.test(no.compareDocumentPosition);so=t||mc.test(no.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1};Gs=t?function(e,t){if(e===t){Zi=!0;return 0}var r=!e.compareDocumentPosition-!t.compareDocumentPosition;return r||(1&(r=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!Gi.sortDetached&&t.compareDocumentPosition(e)===r?e===n||e.ownerDocument===Ms&&so(Ms,e)?-1:t===n||t.ownerDocument===Ms&&so(Ms,t)?1:Qi?Zs.call(Qi,e)-Zs.call(Qi,t):0:4&r?-1:1)}:function(e,t){if(e===t){Zi=!0;return 0}var r,i=0,o=e.parentNode,a=t.parentNode,s=[e],c=[t];if(!o||!a)return e===n?-1:t===n?1:o?-1:a?1:Qi?Zs.call(Qi,e)-Zs.call(Qi,t):0;if(o===a)return xc(e,t);r=e;for(;r=r.parentNode;)s.unshift(r);r=t;for(;r=r.parentNode;)c.unshift(r);for(;s[i]===c[i];)i++;return i?xc(s[i],c[i]):s[i]===Ms?-1:c[i]===Ms?1:0};return n};jc.matches=function(e,t){return jc(e,null,null,t)};jc.matchesSelector=function(e,t){(e.ownerDocument||e)!==to&&eo(e);t=t.replace(cc,"='$1']");if(Gi.matchesSelector&&ro&&(!oo||!oo.test(t))&&(!io||!io.test(t)))try{var n=ao.call(e,t);if(n||Gi.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(e){}return jc(t,to,null,[e]).length>0};jc.contains=function(e,t){(e.ownerDocument||e)!==to&&eo(e);return so(e,t)};jc.attr=function(e,t){(e.ownerDocument||e)!==to&&eo(e);var n=Wi.attrHandle[t.toLowerCase()],r=n&&$s.call(Wi.attrHandle,t.toLowerCase())?n(e,t,!ro):void 0;return void 0!==r?r:Gi.attributes||!ro?e.getAttribute(t):(r=e.getAttributeNode(t))&&r.specified?r.value:null};jc.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)};jc.uniqueSort=function(e){var t,n=[],r=0,i=0;Zi=!Gi.detectDuplicates;Qi=!Gi.sortStable&&e.slice(0);e.sort(Gs);if(Zi){for(;t=e[i++];)t===e[i]&&(r=n.push(i));for(;r--;)e.splice(n[r],1)}Qi=null;return e};zi=jc.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=zi(e)}else if(3===i||4===i)return e.nodeValue}else for(;t=e[r++];)n+=zi(t);return n};(Wi=jc.selectors={cacheLength:50,createPseudo:Cc,match:dc,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){e[1]=e[1].replace(Oc,yc);e[3]=(e[3]||e[4]||e[5]||"").replace(Oc,yc);"~="===e[2]&&(e[3]=" "+e[3]+" ");return e.slice(0,4)},CHILD:function(e){e[1]=e[1].toLowerCase();if("nth"===e[1].slice(0,3)){e[3]||jc.error(e[0]);e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3]));e[5]=+(e[7]+e[8]||"odd"===e[3])}else e[3]&&jc.error(e[0]);return e},PSEUDO:function(e){var t,n=!e[6]&&e[2];if(dc.CHILD.test(e[0]))return null;if(e[3])e[2]=e[4]||e[5]||"";else if(n&&lc.test(n)&&(t=Ki(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)){e[0]=e[0].slice(0,t);e[2]=n.slice(0,t)}return e.slice(0,3)}},filter:{TAG:function(e){var t=e.replace(Oc,yc).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=Vs[e+" "];return t||(t=new RegExp("(^|"+tc+")"+e+"("+tc+"|$)"))&&Vs(e,(function(e){return t.test("string"==typeof e.className&&e.className||typeof e.getAttribute!==Ws&&e.getAttribute("class")||"")}))},ATTR:function(e,t,n){return function(r){var i=jc.attr(r,e);if(null==i)return"!="===t;if(!t)return!0;i+="";return"="===t?i===n:"!="===t?i!==n:"^="===t?n&&0===i.indexOf(n):"*="===t?n&&i.indexOf(n)>-1:"$="===t?n&&i.slice(-n.length)===n:"~="===t?(" "+i+" ").indexOf(n)>-1:"|="===t&&(i===n||i.slice(0,n.length+1)===n+"-")}},CHILD:function(e,t,n,r,i){var o="nth"!==e.slice(0,3),a="last"!==e.slice(-4),s="of-type"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,c){var l,u,d,p,h,m,f=o!==a?"nextSibling":"previousSibling",g=t.parentNode,b=s&&t.nodeName.toLowerCase(),O=!c&&!s;if(g){if(o){for(;f;){d=t;for(;d=d[f];)if(s?d.nodeName.toLowerCase()===b:1===d.nodeType)return!1;m=f="only"===e&&!m&&"nextSibling"}return!0}m=[a?g.firstChild:g.lastChild];if(a&&O){h=(l=(u=g[Ls]||(g[Ls]={}))[e]||[])[0]===Bs&&l[1];p=l[0]===Bs&&l[2];d=h&&g.childNodes[h];for(;d=++h&&d&&d[f]||(p=h=0)||m.pop();)if(1===d.nodeType&&++p&&d===t){u[e]=[Bs,h,p];break}}else if(O&&(l=(t[Ls]||(t[Ls]={}))[e])&&l[0]===Bs)p=l[1];else for(;d=++h&&d&&d[f]||(p=h=0)||m.pop();)if((s?d.nodeName.toLowerCase()===b:1===d.nodeType)&&++p){O&&((d[Ls]||(d[Ls]={}))[e]=[Bs,p]);if(d===t)break}return(p-=i)===r||p%r==0&&p/r>=0}}},PSEUDO:function(e,t){var n,r=Wi.pseudos[e]||Wi.setFilters[e.toLowerCase()]||jc.error("unsupported pseudo: "+e);if(r[Ls])return r(t);if(r.length>1){n=[e,e,"",t];return Wi.setFilters.hasOwnProperty(e.toLowerCase())?Cc((function(e,n){for(var i,o=r(e,t),a=o.length;a--;)e[i=Zs.call(e,o[a])]=!(n[i]=o[a])})):function(e){return r(e,0,n)}}return r}},pseudos:{not:Cc((function(e){var t=[],n=[],r=Yi(e.replace(oc,"$1"));return r[Ls]?Cc((function(e,t,n,i){for(var o,a=r(e,null,i,[]),s=e.length;s--;)(o=a[s])&&(e[s]=!(t[s]=o))})):function(e,i,o){t[0]=e;r(t,null,o,n);t[0]=null;return!n.pop()}})),has:Cc((function(e){return function(t){return jc(e,t).length>0}})),contains:Cc((function(e){e=e.replace(Oc,yc);return function(t){return(t.textContent||t.innerText||zi(t)).indexOf(e)>-1}})),lang:Cc((function(e){uc.test(e||"")||jc.error("unsupported lang: "+e);e=e.replace(Oc,yc).toLowerCase();return function(t){var n;do{if(n=ro?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(n=n.toLowerCase())===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}})),target:function(e){var t=window.location&&window.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===no},focus:function(e){return e===to.activeElement&&(!to.hasFocus||to.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return!1===e.disabled},disabled:function(e){return!0===e.disabled},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){e.parentNode&&e.parentNode.selectedIndex;return!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!Wi.pseudos.empty(e)},header:function(e){return hc.test(e.nodeName)},input:function(e){return pc.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:Sc((function(){return[0]})),last:Sc((function(e,t){return[t-1]})),eq:Sc((function(e,t,n){return[n<0?n+t:n]})),even:Sc((function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e})),odd:Sc((function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e})),lt:Sc((function(e,t,n){for(var r=n<0?n+t:n;--r>=0;)e.push(r);return e})),gt:Sc((function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e}))}}).pseudos.nth=Wi.pseudos.eq;Q(["radio","checkbox","file","password","image"],(function(e){Wi.pseudos[e]=Ec(e)}));Q(["submit","reset"],(function(e){Wi.pseudos[e]=Tc(e)}));function wc(){}wc.prototype=Wi.filters=Wi.pseudos;Wi.setFilters=new wc;Ki=jc.tokenize=function(e,t){var n,r,i,o,a,s,c,l=Hs[e+" "];if(l)return t?0:l.slice(0);a=e;s=[];c=Wi.preFilter;for(;a;){if(!n||(r=ac.exec(a))){r&&(a=a.slice(r[0].length)||a);s.push(i=[])}n=!1;if(r=sc.exec(a)){n=r.shift();i.push({value:n,type:r[0].replace(oc," ")});a=a.slice(n.length)}for(o in Wi.filter)if(Wi.filter.hasOwnProperty(o)&&(r=dc[o].exec(a))&&(!c[o]||(r=c[o](r)))){n=r.shift();i.push({value:n,type:o,matches:r});a=a.slice(n.length)}if(!n)break}return t?a.length:a?jc.error(e):Hs(e,s).slice(0)};function _c(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function Nc(e,t,n){var r=t.dir,i=n&&"parentNode"===r,o=Us++;return t.first?function(t,n,o){for(;t=t[r];)if(1===t.nodeType||i)return e(t,n,o)}:function(t,n,a){var s,c,l=[Bs,o];if(a){for(;t=t[r];)if((1===t.nodeType||i)&&e(t,n,a))return!0}else for(;t=t[r];)if(1===t.nodeType||i){if((s=(c=t[Ls]||(t[Ls]={}))[r])&&s[0]===Bs&&s[1]===o)return l[2]=s[2];c[r]=l;if(l[2]=e(t,n,a))return!0}}}function Ac(e){return e.length>1?function(t,n,r){for(var i=e.length;i--;)if(!e[i](t,n,r))return!1;return!0}:e[0]}function Dc(e,t,n){for(var r=0,i=t.length;r<i;r++)jc(e,t[r],n);return n}function kc(e,t,n,r,i){for(var o,a=[],s=0,c=e.length,l=null!=t;s<c;s++)if((o=e[s])&&(!n||n(o,r,i))){a.push(o);l&&t.push(s)}return a}function Pc(e,t,n,r,i,o){r&&!r[Ls]&&(r=Pc(r));i&&!i[Ls]&&(i=Pc(i,o));return Cc((function(o,a,s,c){var l,u,d,p=[],h=[],m=a.length,f=o||Dc(t||"*",s.nodeType?[s]:s,[]),g=!e||!o&&t?f:kc(f,p,e,s,c),b=n?i||(o?e:m||r)?[]:a:g;n&&n(g,b,s,c);if(r){l=kc(b,h);r(l,[],s,c);u=l.length;for(;u--;)(d=l[u])&&(b[h[u]]=!(g[h[u]]=d))}if(o){if(i||e){if(i){l=[];u=b.length;for(;u--;)(d=b[u])&&l.push(g[u]=d);i(null,b=[],l,c)}u=b.length;for(;u--;)(d=b[u])&&(l=i?Zs.call(o,d):p[u])>-1&&(o[l]=!(a[l]=d))}}else{b=kc(b===a?b.splice(m,b.length):b);i?i(null,a,b,c):Js.apply(a,b)}}))}function Rc(e){for(var t,n,r,i=e.length,o=Wi.relative[e[0].type],a=o||Wi.relative[" "],s=o?1:0,c=Nc((function(e){return e===t}),a,!0),l=Nc((function(e){return Zs.call(t,e)>-1}),a,!0),u=[function(e,n,r){var i=!o&&(r||n!==Ji)||((t=n).nodeType?c(e,n,r):l(e,n,r));t=null;return i}];s<i;s++)if(n=Wi.relative[e[s].type])u=[Nc(Ac(u),n)];else{if((n=Wi.filter[e[s].type].apply(null,e[s].matches))[Ls]){r=++s;for(;r<i&&!Wi.relative[e[r].type];r++);return Pc(s>1&&Ac(u),s>1&&_c(e.slice(0,s-1).concat({value:" "===e[s-2].type?"*":""})).replace(oc,"$1"),n,s<r&&Rc(e.slice(s,r)),r<i&&Rc(e=e.slice(r)),r<i&&_c(e))}u.push(n)}return Ac(u)}function Fc(e,t){var n=t.length>0,r=e.length>0,i=function(i,o,a,s,c){var l,u,d,p=0,h="0",m=i&&[],f=[],g=Ji,b=i||r&&Wi.find.TAG("*",c),O=Bs+=null==g?1:Math.random()||.1,y=b.length;c&&(Ji=o!==to&&o);for(;h!==y&&null!=(l=b[h]);h++){if(r&&l){u=0;for(;d=e[u++];)if(d(l,o,a)){s.push(l);break}c&&(Bs=O)}if(n){(l=!d&&l)&&p--;i&&m.push(l)}}p+=h;if(n&&h!==p){u=0;for(;d=t[u++];)d(m,f,o,a);if(i){if(p>0)for(;h--;)m[h]||f[h]||(f[h]=Ys.call(s));f=kc(f)}Js.apply(s,f);c&&!i&&f.length>0&&p+t.length>1&&jc.uniqueSort(s)}if(c){Bs=O;Ji=g}return m};return n?Cc(i):i}Yi=jc.compile=function(e,t){var n,r=[],i=[],o=qs[e+" "];if(!o){t||(t=Ki(e));n=t.length;for(;n--;)(o=Rc(t[n]))[Ls]?r.push(o):i.push(o);(o=qs(e,Fc(i,r))).selector=e}return o};Xi=jc.select=function(e,t,n,r){var i,o,a,s,c,l="function"==typeof e&&e,u=!r&&Ki(e=l.selector||e);n=n||[];if(1===u.length){if((o=u[0]=u[0].slice(0)).length>2&&"ID"===(a=o[0]).type&&Gi.getById&&9===t.nodeType&&ro&&Wi.relative[o[1].type]){if(!(t=(Wi.find.ID(a.matches[0].replace(Oc,yc),t)||[])[0]))return n;l&&(t=t.parentNode);e=e.slice(o.shift().value.length)}i=dc.needsContext.test(e)?0:o.length;for(;i--;){a=o[i];if(Wi.relative[s=a.type])break;if((c=Wi.find[s])&&(r=c(a.matches[0].replace(Oc,yc),gc.test(o[0].type)&&Ic(t.parentNode)||t))){o.splice(i,1);if(!(e=r.length&&_c(o))){Js.apply(n,r);return n}break}}}(l||Yi(e,u))(r,t,!ro,n,gc.test(e)&&Ic(t.parentNode)||t);return n};Gi.sortStable=Ls.split("").sort(Gs).join("")===Ls;Gi.detectDuplicates=!!Zi;eo();Gi.sortDetached=!0;var Lc=document,Mc=Array.prototype.push,Bc=Array.prototype.slice,Uc=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,Vc=Fs.Event,Hc=on.makeMap("children,contents,next,prev"),qc=function(e){return void 0!==e},Gc=function(e){return"string"==typeof e},Wc=function(e){return e&&e===e.window},zc=function(e,t){var n,r=(t=t||Lc).createElement("div"),i=t.createDocumentFragment();r.innerHTML=e;for(;n=r.firstChild;)i.appendChild(n);return i},$c=function(e,t,n,r){var i;if(Gc(t))t=zc(t,cl(e[0]));else if(t.length&&!t.nodeType){t=pl.makeArray(t);if(r)for(i=t.length-1;i>=0;i--)$c(e,t[i],n,r);else for(i=0;i<t.length;i++)$c(e,t[i],n,r);return e}if(t.nodeType){i=e.length;for(;i--;)n.call(e[i],t)}return e},Kc=function(e,t){return e&&t&&-1!==(" "+e.className+" ").indexOf(" "+t+" ")},Yc=function(e,t,n){var r,i;t=pl(t)[0];e.each((function(){var e=this;if(n&&r===e.parentNode)i.appendChild(e);else{r=e.parentNode;i=t.cloneNode(!1);e.parentNode.insertBefore(i,e);i.appendChild(e)}}));return e},Xc=on.makeMap("fillOpacity fontWeight lineHeight opacity orphans widows zIndex zoom"," "),Jc=on.makeMap("checked compact declare defer disabled ismap multiple nohref noshade nowrap readonly selected"," "),Qc={for:"htmlFor",class:"className",readonly:"readOnly"},Zc={float:"cssFloat"},el={},tl={},nl=function(e,t){return new pl.fn.init(e,t)},rl=function(e,t){var n;if(t.indexOf)return t.indexOf(e);n=t.length;for(;n--;)if(t[n]===e)return n;return-1},il=/^\s*|\s*$/g,ol=function(e){return null==e?"":(""+e).replace(il,"")},al=function(e,t){var n,r,i,o;if(e)if(void 0===(n=e.length)){for(r in e)if(e.hasOwnProperty(r)){o=e[r];if(!1===t.call(o,r,o))break}}else for(i=0;i<n;i++){o=e[i];if(!1===t.call(o,i,o))break}return e},sl=function(e,t){var n=[];al(e,(function(e,r){t(r,e)&&n.push(r)}));return n},cl=function(e){return e?9===e.nodeType?e:e.ownerDocument:Lc};nl.fn=nl.prototype={constructor:nl,selector:"",context:null,length:0,init:function(e,t){var n,r,i=this;if(!e)return i;if(e.nodeType){i.context=i[0]=e;i.length=1;return i}if(t&&t.nodeType)i.context=t;else{if(t)return pl(e).attr(t);i.context=t=document}if(Gc(e)){i.selector=e;if(!(n="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:Uc.exec(e)))return pl(t).find(e);if(n[1]){r=zc(e,cl(t)).firstChild;for(;r;){Mc.call(i,r);r=r.nextSibling}}else{if(!(r=cl(t).getElementById(n[2])))return i;if(r.id!==n[2])return i.find(e);i.length=1;i[0]=r}}else this.add(e,!1);return i},toArray:function(){return on.toArray(this)},add:function(e,t){var n,r,i=this;if(Gc(e))return i.add(pl(e));if(!1!==t){n=pl.unique(i.toArray().concat(pl.makeArray(e)));i.length=n.length;for(r=0;r<n.length;r++)i[r]=n[r]}else Mc.apply(i,pl.makeArray(e));return i},attr:function(e,t){var n,r=this;if("object"==typeof e)al(e,(function(e,t){r.attr(e,t)}));else{if(!qc(t)){if(r[0]&&1===r[0].nodeType){if((n=el[e])&&n.get)return n.get(r[0],e);if(Jc[e])return r.prop(e)?e:void 0;null===(t=r[0].getAttribute(e,2))&&(t=void 0)}return t}this.each((function(){var n;if(1===this.nodeType){if((n=el[e])&&n.set){n.set(this,t);return}null===t?this.removeAttribute(e,2):this.setAttribute(e,t,2)}}))}return r},removeAttr:function(e){return this.attr(e,null)},prop:function(e,t){var n=this;if("object"==typeof(e=Qc[e]||e))al(e,(function(e,t){n.prop(e,t)}));else{if(!qc(t))return n[0]&&n[0].nodeType&&e in n[0]?n[0][e]:t;this.each((function(){1===this.nodeType&&(this[e]=t)}))}return n},css:function(e,t){var n,r,i=this,o=function(e){return e.replace(/-(\D)/g,(function(e,t){return t.toUpperCase()}))},a=function(e){return e.replace(/[A-Z]/g,(function(e){return"-"+e}))};if("object"==typeof e)al(e,(function(e,t){i.css(e,t)}));else if(qc(t)){e=o(e);"number"!=typeof t||Xc[e]||(t=t.toString()+"px");i.each((function(){var n=this.style;if((r=tl[e])&&r.set)r.set(this,t);else{try{this.style[Zc[e]||e]=t}catch(e){}null!==t&&""!==t||(n.removeProperty?n.removeProperty(a(e)):n.removeAttribute(e))}}))}else{n=i[0];if((r=tl[e])&&r.get)return r.get(n);if(!n.ownerDocument.defaultView)return n.currentStyle?n.currentStyle[o(e)]:"";try{return n.ownerDocument.defaultView.getComputedStyle(n,null).getPropertyValue(a(e))}catch(e){return}}return i},remove:function(){for(var e,t=this,n=this.length;n--;){e=t[n];Vc.clean(e);e.parentNode&&e.parentNode.removeChild(e)}return this},empty:function(){for(var e,t=this,n=this.length;n--;){e=t[n];for(;e.firstChild;)e.removeChild(e.firstChild)}return this},html:function(e){var t,n=this;if(qc(e)){t=n.length;try{for(;t--;)n[t].innerHTML=e}catch(r){pl(n[t]).empty().append(e)}return n}return n[0]?n[0].innerHTML:""},text:function(e){var t,n=this;if(qc(e)){t=n.length;for(;t--;)"innerText"in n[t]?n[t].innerText=e:n[0].textContent=e;return n}return n[0]?n[0].innerText||n[0].textContent:""},append:function(){return $c(this,arguments,(function(e){(1===this.nodeType||this.host&&1===this.host.nodeType)&&this.appendChild(e)}))},prepend:function(){return $c(this,arguments,(function(e){(1===this.nodeType||this.host&&1===this.host.nodeType)&&this.insertBefore(e,this.firstChild)}),!0)},before:function(){var e=this;return e[0]&&e[0].parentNode?$c(e,arguments,(function(e){this.parentNode.insertBefore(e,this)})):e},after:function(){var e=this;return e[0]&&e[0].parentNode?$c(e,arguments,(function(e){this.parentNode.insertBefore(e,this.nextSibling)}),!0):e},appendTo:function(e){pl(e).append(this);return this},prependTo:function(e){pl(e).prepend(this);return this},replaceWith:function(e){return this.before(e).remove()},wrap:function(e){return Yc(this,e)},wrapAll:function(e){return Yc(this,e,!0)},wrapInner:function(e){this.each((function(){pl(this).contents().wrapAll(e)}));return this},unwrap:function(){return this.parent().each((function(){pl(this).replaceWith(this.childNodes)}))},clone:function(){var e=[];this.each((function(){e.push(this.cloneNode(!0))}));return pl(e)},addClass:function(e){return this.toggleClass(e,!0)},removeClass:function(e){return this.toggleClass(e,!1)},toggleClass:function(e,t){var n=this;if("string"!=typeof e)return n;-1!==e.indexOf(" ")?al(e.split(" "),(function(){n.toggleClass(this,t)})):n.each((function(n,r){var i=Kc(r,e);if(i!==t){var o=r.className;i?r.className=ol((" "+o+" ").replace(" "+e+" "," ")):r.className+=o?" "+e:e}}));return n},hasClass:function(e){return Kc(this[0],e)},each:function(e){return al(this,e)},on:function(e,t){return this.each((function(){Vc.bind(this,e,t)}))},off:function(e,t){return this.each((function(){Vc.unbind(this,e,t)}))},trigger:function(e){return this.each((function(){"object"==typeof e?Vc.fire(this,e.type,e):Vc.fire(this,e)}))},show:function(){return this.css("display","")},hide:function(){return this.css("display","none")},slice:function(){return pl(Bc.apply(this,arguments))},eq:function(e){return-1===e?this.slice(e):this.slice(e,+e+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},find:function(e){var t,n,r=[];for(t=0,n=this.length;t<n;t++)pl.find(e,this[t],r);return pl(r)},filter:function(e){return pl("function"==typeof e?sl(this.toArray(),(function(t,n){return e(n,t)})):pl.filter(e,this.toArray()))},closest:function(e){var t=[];e instanceof pl&&(e=e[0]);this.each((function(n,r){for(;r;){if("string"==typeof e&&pl(r).is(e)){t.push(r);break}if(r===e){t.push(r);break}r=r.parentNode}}));return pl(t)},offset:function(e){var t,n,r,i,o=0,a=0;if(!e){if(t=this[0]){r=(n=t.ownerDocument).documentElement;if(t.getBoundingClientRect){o=(i=t.getBoundingClientRect()).left+(r.scrollLeft||n.body.scrollLeft)-r.clientLeft;a=i.top+(r.scrollTop||n.body.scrollTop)-r.clientTop}}return{left:o,top:a}}return this.css(e)},push:Mc,sort:Array.prototype.sort,splice:Array.prototype.splice};on.extend(nl,{extend:on.extend,makeArray:function(e){return Wc(e)||e.nodeType?[e]:on.toArray(e)},inArray:rl,isArray:on.isArray,each:al,trim:ol,grep:sl,find:jc,expr:jc.selectors,unique:jc.uniqueSort,text:jc.getText,contains:jc.contains,filter:function(e,t,n){var r=t.length;n&&(e=":not("+e+")");for(;r--;)1!==t[r].nodeType&&t.splice(r,1);return t=1===t.length?pl.find.matchesSelector(t[0],e)?[t[0]]:[]:pl.find.matches(e,t)}});var ll=function(e,t,n){var r=[],i=e[t];"string"!=typeof n&&n instanceof pl&&(n=n[0]);for(;i&&9!==i.nodeType;){if(void 0!==n){if(i===n)break;if("string"==typeof n&&pl(i).is(n))break}1===i.nodeType&&r.push(i);i=i[t]}return r},ul=function(e,t,n,r){var i=[];r instanceof pl&&(r=r[0]);for(;e;e=e[t])if(!n||e.nodeType===n){if(void 0!==r){if(e===r)break;if("string"==typeof r&&pl(e).is(r))break}i.push(e)}return i},dl=function(e,t,n){for(e=e[t];e;e=e[t])if(e.nodeType===n)return e;return null};al({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return ll(e,"parentNode")},next:function(e){return dl(e,"nextSibling",1)},prev:function(e){return dl(e,"previousSibling",1)},children:function(e){return ul(e.firstChild,"nextSibling",1)},contents:function(e){return on.toArray(("iframe"===e.nodeName?e.contentDocument||e.contentWindow.document:e).childNodes)}},(function(e,t){nl.fn[e]=function(n){var r=[];this.each((function(){var e=t.call(r,this,n,r);e&&(pl.isArray(e)?r.push.apply(r,e):r.push(e))}));if(this.length>1){Hc[e]||(r=pl.unique(r));0===e.indexOf("parents")&&(r=r.reverse())}var i=pl(r);return n?i.filter(n):i}}));al({parentsUntil:function(e,t){return ll(e,"parentNode",t)},nextUntil:function(e,t){return ul(e,"nextSibling",1,t).slice(1)},prevUntil:function(e,t){return ul(e,"previousSibling",1,t).slice(1)}},(function(e,t){nl.fn[e]=function(n,r){var i=[];this.each((function(){var e=t.call(i,this,n,i);e&&(pl.isArray(e)?i.push.apply(i,e):i.push(e))}));if(this.length>1){i=pl.unique(i);0!==e.indexOf("parents")&&"prevUntil"!==e||(i=i.reverse())}var o=pl(i);return r?o.filter(r):o}}));nl.fn.is=function(e){return!!e&&this.filter(e).length>0};nl.fn.init.prototype=nl.fn;nl.overrideDefaults=function(e){var t,n=function(r,i){t=t||e();0===arguments.length&&(r=t.element);i||(i=t.context);return new n.fn.init(r,i)};pl.extend(n,this);return n};nl.attrHooks=el;nl.cssHooks=tl;var pl=nl,hl=on.each,ml=on.grep,fl=Qt.ie,gl=/^([a-z0-9],?)+$/i,bl=function(e,t,n){var r=t.keep_values,i={set:function(e,r,i){t.url_converter&&null!==r&&(r=t.url_converter.call(t.url_converter_scope||n(),r,i,e[0]));e.attr("data-mce-"+i,r).attr(i,r)},get:function(e,t){return e.attr("data-mce-"+t)||e.attr(t)}},o={style:{set:function(t,n){if(null===n||"object"!=typeof n){r&&t.attr("data-mce-style",n);if(null!==n&&"string"==typeof n){t.removeAttr("style");t.css(e.parse(n))}else t.attr("style",n)}else t.css(n)},get:function(t){var n=t.attr("data-mce-style")||t.attr("style");return n=e.serialize(e.parse(n),t[0].nodeName)}}};r&&(o.href=o.src=i);return o},Ol=function(e,t){var n=t.attr("style"),r=e.serialize(e.parse(n),t[0].nodeName);r||(r=null);t.attr("data-mce-style",r)},yl=function(e,t){var n,r,i=0;if(e)for(n=e.nodeType,e=e.previousSibling;e;e=e.previousSibling){r=e.nodeType;if(!t||3!==r||r!==n&&e.nodeValue.length){i++;n=r}}return i},jl=function(e,t){void 0===t&&(t={});var n={},r=window,i={},o=0,a=!0,s=!0,c=xo.forElement(un.fromDom(e),{contentCssCors:t.contentCssCors,referrerPolicy:t.referrerPolicy}),l=[],u=t.schema?t.schema:js({}),d=Cs({url_converter:t.url_converter,url_converter_scope:t.url_converter_scope},t.schema),p=t.ownEvents?new Fs:Fs.Event,h=u.getBlockElements(),m=pl.overrideDefaults((function(){return{context:e,element:Ee.getRoot()}})),f=function(e){if("string"==typeof e)return!!h[e];if(e){var t=e.nodeType;if(t)return!(1!==t||!h[e.nodeName])}return!1},b=function(t){return t&&e&&g(t)?e.getElementById(t):t},O=function(e){return m("string"==typeof e?b(e):e)},y=function(e,t,n){var r,i,o=O(e);o.length&&(i=(r=Te[t])&&r.get?r.get(o,t):o.attr(t));void 0===i&&(i=n||"");return i},j=function(e){var t=b(e);return t?t.attributes:[]},v=function(e,n,r){""===r&&(r=null);var i=O(e),o=i.attr(n);if(i.length){var a=Te[n];a&&a.set?a.set(i,r,n):i.attr(n,r);o!==r&&t.onSetAttrib&&t.onSetAttrib({attrElm:i,attrName:n,attrValue:r})}},x=function(t,n){if(!fl||1!==t.nodeType||n)return t.cloneNode(n);var r=e.createElement(t.nodeName);hl(j(t),(function(e){v(r,e.nodeName,y(t,e.nodeName))}));return r},E=function(){return t.root_element||e.body},T=function(e){var t=Nr(e);return{x:t.x,y:t.y,w:t.width,h:t.height}},I=function(t,n){return Ei(e.body,b(t),n)},w=function(e,n,r){var i=g(n)?O(e).css(n,r):O(e).css(n);t.update_styles&&Ol(d,i)},N=function(e,n){var r=O(e).css(n);t.update_styles&&Ol(d,r)},A=function(e,t,n){var r=O(e);if(n)return r.css(t);"float"===(t=t.replace(/-(\D)/g,(function(e,t){return t.toUpperCase()})))&&(t=Qt.browser.isIE()?"styleFloat":"cssFloat");return r[0]&&r[0].style?r[0].style[t]:void 0},D=function(e){var t,n;e=b(e);t=A(e,"width");n=A(e,"height");-1===t.indexOf("px")&&(t=0);-1===n.indexOf("px")&&(n=0);return{w:parseInt(t,10)||e.offsetWidth||e.clientWidth,h:parseInt(n,10)||e.offsetHeight||e.clientHeight}},k=function(e){e=b(e);var t=I(e),n=D(e);return{x:t.x,y:t.y,w:n.w,h:n.h}},P=function(e,t){var n;if(!e)return!1;if(!Array.isArray(e)){if("*"===t)return 1===e.nodeType;if(gl.test(t)){var r=t.toLowerCase().split(/,/),i=e.nodeName.toLowerCase();for(n=r.length-1;n>=0;n--)if(r[n]===i)return!0;return!1}if(e.nodeType&&1!==e.nodeType)return!1}var o=Array.isArray(e)?e:[e];return jc(t,o[0].ownerDocument||o[0],null,o).length>0},R=function(e,t,n,r){var i,o=[],a=b(e);r=void 0===r;n=n||("BODY"!==E().nodeName?E().parentNode:null);if(on.is(t,"string")){i=t;t="*"===t?function(e){return 1===e.nodeType}:function(e){return P(e,i)}}for(;a&&!(a===n||C(a.nodeType)||Wr(a)||zr(a));){if(!t||"function"==typeof t&&t(a)){if(!r)return[a];o.push(a)}a=a.parentNode}return r?o:null},F=function(e,t,n){var r=R(e,t,n,!1);return r&&r.length>0?r[0]:null},L=function(e,t,n){var r=t;if(e){"string"==typeof t&&(r=function(e){return P(e,t)});for(e=e[n];e;e=e[n])if("function"==typeof r&&r(e))return e}return null},M=function(e,t){return L(e,t,"nextSibling")},B=function(e,t){return L(e,t,"previousSibling")},U=function(n,r){return jc(n,b(r)||t.root_element||e,[])},V=function(e,t,n){var r,i="string"==typeof e?b(e):e;if(!i)return!1;if(on.isArray(i)&&(i.length||0===i.length)){r=[];hl(i,(function(e,i){e&&r.push(t.call(n,"string"==typeof e?b(e):e,i))}));return r}var o=n||this;return t.call(o,i)},H=function(e,t){O(e).each((function(e,n){hl(t,(function(e,t){v(n,t,e)}))}))},q=function(e,t){var n=O(e);fl?n.each((function(e,n){if(!1!==n.canHaveHTML){for(;n.firstChild;)n.removeChild(n.firstChild);try{n.innerHTML="<br>"+t;n.removeChild(n.firstChild)}catch(e){pl("<div></div>").html("<br>"+t).contents().slice(1).appendTo(n)}return t}})):n.html(t)},G=function(t,n,r,i,o){return V(t,(function(t){var a="string"==typeof n?e.createElement(n):n;H(a,r);i&&("string"!=typeof i&&i.nodeType?a.appendChild(i):"string"==typeof i&&q(a,i));return o?a:t.appendChild(a)}))},W=function(t,n,r){return G(e.createElement(t),t,n,r,!0)},z=ss.decode,$=ss.encodeAllRaw,K=function(t){var n,r=e.createElement("div"),i=e.createDocumentFragment();i.appendChild(r);t&&(r.innerHTML=t);for(;n=r.firstChild;)i.appendChild(n);i.removeChild(r);return i},Y=function(e,t){var n=O(e);t?n.each((function(){for(var e;e=this.firstChild;)3===e.nodeType&&0===e.data.length?this.removeChild(e):this.parentNode.insertBefore(e,this)})).remove():n.remove();return n.length>1?n.toArray():n[0]},X=function(e){return d.parse(e)},J=function(e,t){return d.serialize(e,t)},Z=function(t){var r,i;if(Ee!==jl.DOM&&e===document){if(n[t])return;n[t]=!0}if(!(i=e.getElementById("mceDefaultStyles"))){(i=e.createElement("style")).id="mceDefaultStyles";i.type="text/css";(r=e.getElementsByTagName("head")[0]).firstChild?r.insertBefore(i,r.firstChild):r.appendChild(i)}i.styleSheet?i.styleSheet.cssText+=t:i.appendChild(e.createTextNode(t))},ee=function(e){e||(e="");Q(e.split(","),(function(e){i[e]=!0;c.load(e,S)}))},te=function(e,t,n){O(e).toggleClass(t,n).each((function(){""===this.className&&pl(this).attr("class",null)}))},ne=function(e,t){O(e).addClass(t)},re=function(e,t){return O(e).hasClass(t)},ie=function(e){O(e).show()},oe=function(e){O(e).hide()},ae=function(e){return"none"===O(e).css("display")},se=function(e){var t="string"==typeof e?b(e):e;return kr(t)?t.outerHTML:pl("<div></div>").append(pl(t).clone()).html()},ce=function(e,t){O(e).each((function(){try{if("outerHTML"in this){this.outerHTML=t;return}}catch(e){}Y(pl(this).html(t),!0)}))},le=function(e,t){var n=b(t);return V(e,(function(e){var t=n.parentNode,r=n.nextSibling;r?t.insertBefore(e,r):t.appendChild(e);return e}))},ue=function(e,t,n){return V(t,(function(t){on.is(t,"array")&&(e=e.cloneNode(!0));n&&hl(ml(t.childNodes),(function(t){e.appendChild(t)}));return t.parentNode.replaceChild(e,t)}))},de=function(e,t){var n;if(e.nodeName!==t.toUpperCase()){n=W(t);hl(j(e),(function(t){v(n,t.nodeName,y(e,t.nodeName))}));ue(n,e,!0)}return n||e},pe=function(e){return d.toHex(on.trim(e))},he=function(e){if(kr(e)){var t="a"===e.nodeName.toLowerCase()&&!y(e,"href")&&y(e,"id");if(y(e,"name")||y(e,"data-mce-bookmark")||t)return!0}return!1},me=function(e,t){var n,r,i=0;if(he(e))return!1;if(e=e.firstChild){var o=new Eo(e,e.parentNode),a=u?u.getWhiteSpaceElements():{};t=t||(u?u.getNonEmptyElements():null);do{n=e.nodeType;if(kr(e)){var s=e.getAttribute("data-mce-bogus");if(s){e=o.next("all"===s);continue}r=e.nodeName.toLowerCase();if(t&&t[r]){if("br"===r){i++;e=o.next();continue}return!1}if(he(e))return!1}if(8===n)return!1;if(3===n&&!wa(e.nodeValue))return!1;if(3===n&&e.parentNode&&a[e.parentNode.nodeName]&&wa(e.nodeValue))return!1;e=o.next()}while(e)}return i<=1},fe=function(){return e.createRange()},ge=function(e,t,n){var r,i,o,a=fe();if(e&&t){a.setStart(e.parentNode,yl(e));a.setEnd(t.parentNode,yl(t));r=a.extractContents();(a=fe()).setStart(t.parentNode,yl(t)+1);a.setEnd(e.parentNode,yl(e)+1);i=a.extractContents();(o=e.parentNode).insertBefore(Wa(Ee,r),e);n?o.insertBefore(n,e):o.insertBefore(t,e);o.insertBefore(Wa(Ee,i),e);Y(e);return n||t}},be=function(n,i,o,a){if(on.isArray(n)){for(var s=n.length,c=[];s--;)c[s]=be(n[s],i,o,a);return c}!t.collect||n!==e&&n!==r||l.push([n,i,o,a]);return p.bind(n,i,o,a||Ee)},Oe=function(t,n,i){if(on.isArray(t)){for(var o=t.length,a=[];o--;)a[o]=Oe(t[o],n,i);return a}if(l.length>0&&(t===e||t===r))for(o=l.length;o--;){var s=l[o];t!==s[0]||n&&n!==s[1]||i&&i!==s[2]||p.unbind(s[0],s[1],s[2])}return p.unbind(t,n,i)},ye=function(e,t,n){return p.fire(e,t,n)},je=function(e){if(e&&kr(e)){var t=e.getAttribute("data-mce-contenteditable");return t&&"inherit"!==t?t:"inherit"!==e.contentEditable?e.contentEditable:null}return null},Ce=function(e){for(var t=E(),n=null;e&&e!==t&&null===(n=je(e));e=e.parentNode);return n},xe=function(){if(l.length>0)for(var e=l.length;e--;){var t=l[e];p.unbind(t[0],t[1],t[2])}ve(i,(function(e,t){c.unload(t);delete i[t]}));jc.setDocument&&jc.setDocument()},Ee={doc:e,settings:t,win:r,files:i,stdMode:a,boxModel:s,styleSheetLoader:c,boundEvents:l,styles:d,schema:u,events:p,isBlock:f,$:m,$$:O,root:null,clone:x,getRoot:E,getViewPort:T,getRect:k,getSize:D,getParent:F,getParents:R,get:b,getNext:M,getPrev:B,select:U,is:P,add:G,create:W,createHTML:function(e,t,n){var r,i="";i+="<"+e;for(r in t)De(t,r)&&(i+=" "+r+'="'+$(t[r])+'"');return void 0!==n?i+">"+n+"</"+e+">":i+" />"},createFragment:K,remove:Y,setStyle:w,getStyle:A,setStyles:N,removeAllAttribs:function(e){return V(e,(function(e){var t,n=e.attributes;for(t=n.length-1;t>=0;t--)e.removeAttributeNode(n.item(t))}))},setAttrib:v,setAttribs:H,getAttrib:y,getPos:I,parseStyle:X,serializeStyle:J,addStyle:Z,loadCSS:ee,addClass:ne,removeClass:function(e,t){te(e,t,!1)},hasClass:re,toggleClass:te,show:ie,hide:oe,isHidden:ae,uniqueId:function(e){return(e||"mce_")+o++},setHTML:q,getOuterHTML:se,setOuterHTML:ce,decode:z,encode:$,insertAfter:le,replace:ue,rename:de,findCommonAncestor:function(e,t){for(var n,r=e;r;){n=t;for(;n&&r!==n;)n=n.parentNode;if(r===n)break;r=r.parentNode}return!r&&e.ownerDocument?e.ownerDocument.documentElement:r},toHex:pe,run:V,getAttribs:j,isEmpty:me,createRng:fe,nodeIndex:yl,split:ge,bind:be,unbind:Oe,fire:ye,getContentEditable:je,getContentEditableParent:Ce,destroy:xe,isChildOf:function(e,t){if(fl){for(;e;){if(t===e)return!0;e=e.parentNode}return!1}return e===t||t.contains(e)},dumpRng:function(e){return"startContainer: "+e.startContainer.nodeName+", startOffset: "+e.startOffset+", endContainer: "+e.endContainer.nodeName+", endOffset: "+e.endOffset}},Te=bl(d,t,_(Ee));return Ee};jl.DOM=jl(document);jl.nodeIndex=yl;var vl=jl.DOM,Cl=on.each,xl=on.grep,El=0,Tl=1,Sl=2,Il=3,wl=function(){function e(e){void 0===e&&(e={});this.states={};this.queue=[];this.scriptLoadedCallbacks={};this.queueLoadedCallbacks=[];this.loading=0;this.settings=e}e.prototype._setReferrerPolicy=function(e){this.settings.referrerPolicy=e};e.prototype.loadScript=function(e,t,n){var r,i=vl,o=function(){i.remove(c);r&&(r.onerror=r.onload=r=null)},a=function(){o();t()},s=function(){o();E(n)?n():"undefined"!=typeof console&&console.log&&console.log("Failed to load script: "+e)},c=i.uniqueId();(r=document.createElement("script")).id=c;r.type="text/javascript";r.src=on._addCacheSuffix(e);this.settings.referrerPolicy&&i.setAttrib(r,"referrerpolicy",this.settings.referrerPolicy);r.onload=a;r.onerror=s;(document.getElementsByTagName("head")[0]||document.body).appendChild(r)};e.prototype.isDone=function(e){return this.states[e]===Sl};e.prototype.markDone=function(e){this.states[e]=Sl};e.prototype.add=function(e,t,n,r){var i=this.states[e];this.queue.push(e);void 0===i&&(this.states[e]=El);if(t){this.scriptLoadedCallbacks[e]||(this.scriptLoadedCallbacks[e]=[]);this.scriptLoadedCallbacks[e].push({success:t,failure:r,scope:n||this})}};e.prototype.load=function(e,t,n,r){return this.add(e,t,n,r)};e.prototype.remove=function(e){delete this.states[e];delete this.scriptLoadedCallbacks[e]};e.prototype.loadQueue=function(e,t,n){this.loadScripts(this.queue,e,t,n)};e.prototype.loadScripts=function(e,t,n,r){var i=this,o=[],a=function(e,t){Cl(i.scriptLoadedCallbacks[t],(function(t){E(t[e])&&t[e].call(t.scope)}));i.scriptLoadedCallbacks[t]=void 0};i.queueLoadedCallbacks.push({success:t,failure:r,scope:n||this});var s=function(){var t=xl(e);e.length=0;Cl(t,(function(e){if(i.states[e]!==Sl)if(i.states[e]!==Il){if(i.states[e]!==Tl){i.states[e]=Tl;i.loading++;i.loadScript(e,(function(){i.states[e]=Sl;i.loading--;a("success",e);s()}),(function(){i.states[e]=Il;i.loading--;o.push(e);a("failure",e);s()}))}}else a("failure",e);else a("success",e)}));if(!i.loading){var n=i.queueLoadedCallbacks.slice(0);i.queueLoadedCallbacks.length=0;Cl(n,(function(e){0===o.length?E(e.success)&&e.success.call(e.scope):E(e.failure)&&e.failure.call(e.scope,o)}))}};s()};e.ScriptLoader=new e;return e}(),_l=function(e){var t=e;return{get:function(){return t},set:function(e){t=e}}},Nl=function(e){return b(e)&&Ae(e,"raw")},Al=function(e){return O(e)&&e.length>1},Dl={},kl=_l("en"),Pl=function(){return Ne(Dl,kl.get())},Rl={getData:function(){return Ce(Dl,(function(e){return qe({},e)}))},setCode:function(e){e&&kl.set(e)},getCode:function(){return kl.get()},add:function(e,t){var n=Dl[e];n||(Dl[e]=n={});ve(t,(function(e,t){n[t.toLowerCase()]=e}))},translate:function(e){var t=Pl().getOr({}),n=function(e){return E(e)?Object.prototype.toString.call(e):r(e)?"":""+e},r=function(e){return""===e||null==e},i=function(e){var r=n(e);return Ne(t,r.toLowerCase()).map(n).getOr(r)},o=function(e){return e.replace(/{context:\w+}$/,"")};if(r(e))return"";if(Nl(e))return n(e.raw);if(Al(e)){var a=e.slice(1);return o(i(e[0]).replace(/\{([0-9]+)\}/g,(function(e,t){return Ae(a,t)?n(a[t]):e})))}return o(i(e))},isRtl:function(){return Pl().bind((function(e){return Ne(e,"_dir")})).exists((function(e){return"rtl"===e}))},hasCode:function(e){return Ae(Dl,e)}},Fl=function(){var e=[],t={},n={},r=[],i=function(e,t){var n=te(r,(function(n){return n.name===e&&n.state===t}));Q(n,(function(e){return e.callback()}))},o=function(e){var t;n[e]&&(t=n[e].dependencies);return t||[]},a=function(e,n){!1!==Fl.languageLoad&&p(e,(function(){var r=Rl.getCode();!r||n&&-1===(","+(n||"")+",").indexOf(","+r+",")||wl.ScriptLoader.add(t[e]+"/langs/"+r+".js")}),"loaded")},s=function(t,r,o){var a=r;e.push(a);n[t]={instance:a,dependencies:o};i(t,"added");return a},c=function(e){delete t[e];delete n[e]},l=function(e,t){return"object"==typeof t?t:"string"==typeof e?{prefix:"",resource:t,suffix:""}:{prefix:e.prefix,resource:t,suffix:e.suffix}},u=function(e,t,n,r){var i=o(e);Q(i,(function(e){var n=l(t,e);d(n.resource,n,void 0,void 0)}));n&&(r?n.call(r):n.call(wl))},d=function(e,r,o,a,s){if(!t[e]){var c="string"==typeof r?r:r.prefix+r.resource+r.suffix;0!==c.indexOf("/")&&-1===c.indexOf("://")&&(c=Fl.baseURL+"/"+c);t[e]=c.substring(0,c.lastIndexOf("/"));var l=function(){i(e,"loaded");u(e,r,o,a)};n[e]?l():wl.ScriptLoader.add(c,l,a,s)}},p=function(e,i,o){void 0===o&&(o="added");Ae(n,e)&&"added"===o||Ae(t,e)&&"loaded"===o?i():r.push({name:e,state:o,callback:i})};return{items:e,urls:t,lookup:n,_listeners:r,get:function(e){if(n[e])return n[e].instance},dependencies:o,requireLangPack:a,add:s,remove:c,createUrl:l,addComponents:function(e,n){var r=t[e];Q(n,(function(e){wl.ScriptLoader.add(r+"/"+e)}))},load:d,waitFor:p}};Fl.languageLoad=!0;Fl.baseURL="";Fl.PluginManager=Fl();Fl.ThemeManager=Fl();var Ll=function(e){var t=_l(q.none()),n=function(){return t.get().each(e)};return{clear:function(){n();t.set(q.none())},isSet:function(){return t.get().isSome()},get:function(){return t.get()},set:function(e){n();t.set(q.some(e))}}},Ml=function(){var e=Ll(S),t=function(t){return e.get().each(t)};return qe(qe({},e),{on:t})},Bl=function(e,t){var n=null;return{cancel:function(){if(!y(n)){clearTimeout(n);n=null}},throttle:function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];y(n)&&(n=setTimeout((function(){n=null;e.apply(null,r)}),t))}}},Ul=function(e,t){var n=null,r=function(){if(!y(n)){clearTimeout(n);n=null}},i=function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];r();n=setTimeout((function(){n=null;e.apply(null,i)}),t)};return{cancel:r,throttle:i}},Vl=function(e,t){var n=ci(e,t);return void 0===n||""===n?[]:n.split(" ")},Hl=function(e,t,n){var r=Vl(e,t).concat([n]);ai(e,t,r.join(" "));return!0},ql=function(e,t,n){var r=te(Vl(e,t),(function(e){return e!==n}));r.length>0?ai(e,t,r.join(" ")):di(e,t);return!1},Gl=function(e){return void 0!==e.dom.classList},Wl=function(e){return Vl(e,"class")},zl=function(e,t){return Hl(e,"class",t)},$l=function(e,t){return ql(e,"class",t)},Kl=function(e,t){Gl(e)?e.dom.classList.add(t):zl(e,t)},Yl=function(e){0===(Gl(e)?e.dom.classList:Wl(e)).length&&di(e,"class")},Xl=function(e,t){if(Gl(e)){e.dom.classList.remove(t)}else $l(e,t);Yl(e)},Jl=function(e,t){return Gl(e)&&e.dom.classList.contains(t)},Ql=function(e,t){var n=[];Q($n(e),(function(e){t(e)&&(n=n.concat([e]));n=n.concat(Ql(e,t))}));return n},Zl=function(e,t){return vn(t,e)},eu=_("mce-annotation"),tu=_("data-mce-annotation"),nu=_("data-mce-annotation-uid"),ru=function(e,t){var n=e.selection.getRng(),r=un.fromDom(n.startContainer),i=un.fromDom(e.getBody()),o=t.fold((function(){return"."+eu()}),(function(e){return"["+tu()+'="'+e+'"]'})),a=Kn(r,n.startOffset).getOr(r),s=fo(a,o,(function(e){return xn(e,i)})),c=function(e,t){return ui(e,t)?q.some(ci(e,t)):q.none()};return s.bind((function(t){return c(t,""+nu()).bind((function(n){return c(t,""+tu()).map((function(t){var r=ou(e,n);return{uid:n,name:t,elements:r}}))}))}))},iu=function(e){return An(e)&&Jl(e,eu())},ou=function(e,t){var n=un.fromDom(e.getBody());return Zl(n,"["+nu()+'="'+t+'"]')},au=function(e,t){var n=un.fromDom(e.getBody()),r=Zl(n,"["+tu()+'="'+t+'"]'),i={};Q(r,(function(e){var t=ci(e,nu()),n=Ne(i,t).getOr([]);i[t]=n.concat([e])}));return i},su=function(e,t){var n=_l({}),r=function(){return{listeners:[],previous:Ml()}},i=function(e,t){o(e,(function(e){t(e);return e}))},o=function(e,t){var i=n.get(),o=t(Ne(i,e).getOrThunk(r));i[e]=o;n.set(i)},a=function(e,t,n){i(e,(function(r){Q(r.listeners,(function(r){return r(!0,e,{uid:t,nodes:J(n,(function(e){return e.dom}))})}))}))},s=function(e){i(e,(function(t){Q(t.listeners,(function(t){return t(!1,e)}))}))},c=Ul((function(){var t=n.get(),r=he(ye(t));Q(r,(function(t){o(t,(function(n){var r=n.previous.get();ru(e,q.some(t)).fold((function(){if(r.isSome()){s(t);n.previous.clear()}}),(function(e){var t=e.uid,i=e.name,o=e.elements;if(!Zr(r,t)){a(i,t,o);n.previous.set(t)}}));return{previous:n.previous,listeners:n.listeners}}))}))}),30);e.on("remove",(function(){c.cancel()}));e.on("NodeChange",(function(){c.throttle()}));return{addListener:function(e,t){o(e,(function(e){return{previous:e.previous,listeners:e.listeners.concat([t])}}))}}},cu=function(e,t){var n=function(e){return q.from(e.attr(tu())).bind(t.lookup)};e.on("init",(function(){e.serializer.addNodeFilter("span",(function(e){Q(e,(function(e){n(e).each((function(t){!1===t.persistent&&e.unwrap()}))}))}))}))},lu=function(){var e={};return{register:function(t,n){e[t]={name:t,settings:n}},lookup:function(t){return Ne(e,t).map((function(e){return e.settings}))}}},uu=0,du=function(e){var t=(new Date).getTime();return e+"_"+Math.floor(1e9*Math.random())+ ++uu+String(t)},pu=function(e,t){Q(t,(function(t){Kl(e,t)}))},hu=function(e,t){var n=(t||document).createElement("div");n.innerHTML=e;return $n(un.fromDom(n))},mu=function(e){return J(e,un.fromDom)},fu=function(e){return e.dom.innerHTML},gu=function(e,t){var n=Fn(e).dom,r=un.fromDom(n.createDocumentFragment()),i=hu(t,n);mr(r,i);fr(e);dr(e,r)},bu=function(e,t){return un.fromDom(e.dom.cloneNode(t))},Ou=function(e){return bu(e,!1)},yu=function(e){return bu(e,!0)},ju=function(e,t,n){void 0===n&&(n=L);var r=new Eo(e,t),i=function(e){var t;do{t=r[e]()}while(t&&!qr(t)&&!n(t));return q.from(t).filter(qr)};return{current:function(){return q.from(r.current()).filter(qr)},next:function(){return i("next")},prev:function(){return i("prev")},prev2:function(){return i("prev2")}}},vu=function(e,t){var n=t||function(t){return e.isBlock(t)||$r(t)||Xr(t)},r=function(e,t,n,i){if(qr(e)){var o=i(e,t,e.data);if(-1!==o)return q.some({container:e,offset:o})}return n().bind((function(e){return r(e.container,e.offset,n,i)}))};return{backwards:function(e,t,i,o){var a=ju(e,o,n);return r(e,t,(function(){return a.prev().map((function(e){return{container:e,offset:e.length}}))}),i).getOrNull()},forwards:function(e,t,i,o){var a=ju(e,o,n);return r(e,t,(function(){return a.next().map((function(e){return{container:e,offset:0}}))}),i).getOrNull()}}},Cu=Math.round,xu=function(e){return e?{left:Cu(e.left),top:Cu(e.top),bottom:Cu(e.bottom),right:Cu(e.right),width:Cu(e.width),height:Cu(e.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0}},Eu=function(e,t){e=xu(e);if(t)e.right=e.left;else{e.left=e.left+e.width;e.right=e.left}e.width=0;return e},Tu=function(e,t){return e.left===t.left&&e.top===t.top&&e.bottom===t.bottom&&e.right===t.right},Su=function(e,t,n){return e>=0&&e<=Math.min(t.height,n.height)/2},Iu=function(e,t){var n=Math.min(t.height/2,e.height/2);return e.bottom-n<t.top||!(e.top>t.bottom)&&Su(t.top-e.bottom,e,t)},wu=function(e,t){return e.top>t.bottom||!(e.bottom<t.top)&&Su(t.bottom-e.top,e,t)},_u=function(e,t,n){return t>=e.left&&t<=e.right&&n>=e.top&&n<=e.bottom},Nu=function(e,t,n){return Math.min(Math.max(e,t),n)},Au=function(e){var t=e.startContainer,n=e.startOffset;return t.hasChildNodes()&&e.endOffset===n+1?t.childNodes[n]:null},Du=function(e,t){if(kr(e)&&e.hasChildNodes()){var n=e.childNodes;return n[Nu(t,0,n.length-1)]}return e},ku=function(e,t){return t<0&&kr(e)&&e.hasChildNodes()?void 0:Du(e,t)},Pu=new RegExp("[̀-ͯ҃-҇҈-҉֑-ֽֿׁ-ׂׄ-ׇׅؐ-ًؚ-ٰٟۖ-ۜ۟-ۤۧ-۪ۨ-ܑۭܰ-݊ަ-ް߫-߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ࣣ-ंऺ़ु-ै्॑-ॗॢ-ॣঁ়াু-ৄ্ৗৢ-ৣਁ-ਂ਼ੁ-ੂੇ-ੈੋ-੍ੑੰ-ੱੵઁ-ં઼ુ-ૅે-ૈ્ૢ-ૣଁ଼ାିୁ-ୄ୍ୖୗୢ-ୣஂாீ்ௗఀా-ీె-ైొ-్ౕ-ౖౢ-ౣಁ಼ಿೂೆೌ-್ೕ-ೖೢ-ೣഁാു-ൄ്ൗൢ-ൣ්ාි-ුූෟัิ-ฺ็-๎ັິ-ູົ-ຼ່-ໍ༘-ཱ༹༙༵༷-ཾྀ-྄྆-྇ྍ-ྗྙ-ྼ࿆ိ-ူဲ-့္-်ွ-ှၘ-ၙၞ-ၠၱ-ၴႂႅ-ႆႍႝ፝-፟ᜒ-᜔ᜲ-᜴ᝒ-ᝓᝲ-ᝳ឴-឵ិ-ួំ៉-៓៝᠋-᠍ᢩᤠ-ᤢᤧ-ᤨᤲ᤹-᤻ᨗ-ᨘᨛᩖᩘ-ᩞ᩠ᩢᩥ-ᩬᩳ-᩿᩼᪰-᪽᪾ᬀ-ᬃ᬴ᬶ-ᬺᬼᭂ᭫-᭳ᮀ-ᮁᮢ-ᮥᮨ-ᮩ᮫-ᮭ᯦ᯨ-ᯩᯭᯯ-ᯱᰬ-ᰳᰶ-᰷᳐-᳔᳒-᳢᳠-᳨᳭᳴᳸-᳹᷀-᷵᷼-᷿‌-‍⃐-⃜⃝-⃠⃡⃢-⃤⃥-⃰⳯-⵿⳱ⷠ-〪ⷿ-〭〮-゙〯-゚꙯꙰-꙲ꙴ-꙽ꚞ-ꚟ꛰-꛱ꠂ꠆ꠋꠥ-ꠦ꣄꣠-꣱ꤦ-꤭ꥇ-ꥑꦀ-ꦂ꦳ꦶ-ꦹꦼꧥꨩ-ꨮꨱ-ꨲꨵ-ꨶꩃꩌꩼꪰꪲ-ꪴꪷ-ꪸꪾ-꪿꫁ꫬ-ꫭ꫶ꯥꯨ꯭ﬞ︀-️︠-︯ﾞ-ﾟ]"),Ru=function(e){return"string"==typeof e&&e.charCodeAt(0)>=768&&Pu.test(e)},Fu=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){for(var n=0;n<e.length;n++)if(e[n](t))return!0;return!1}},Lu=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){for(var n=0;n<e.length;n++)if(!e[n](t))return!1;return!0}},Mu=kr,Bu=ja,Uu=Rr("display","block table"),Vu=Rr("float","left right"),Hu=Lu(Mu,Bu,k(Vu)),qu=k(Rr("white-space","pre pre-line pre-wrap")),Gu=qr,Wu=$r,zu=jl.nodeIndex,$u=ku,Ku=function(e){return"createRange"in e?e.createRange():jl.DOM.createRng()},Yu=function(e){return e&&/[\r\n\t ]/.test(e)},Xu=function(e){return!!e.setStart&&!!e.setEnd},Ju=function(e){var t=e.startContainer,n=e.startOffset;if(Yu(e.toString())&&qu(t.parentNode)&&qr(t)){var r=t.data;if(Yu(r[n-1])||Yu(r[n+1]))return!0}return!1},Qu=function(e){var t=e.ownerDocument,n=Ku(t),r=t.createTextNode(zo),i=e.parentNode;i.insertBefore(r,e);n.setStart(r,0);n.setEnd(r,1);var o=xu(n.getBoundingClientRect());i.removeChild(r);return o},Zu=function(e){var t=e.startContainer,n=e.endContainer,r=e.startOffset,i=e.endOffset;if(t===n&&qr(n)&&0===r&&1===i){var o=e.cloneRange();o.setEndAfter(n);return td(o)}return null},ed=function(e){return 0===e.left&&0===e.right&&0===e.top&&0===e.bottom},td=function(e){var t,n=e.getClientRects();t=n.length>0?xu(n[0]):xu(e.getBoundingClientRect());return!Xu(e)&&Wu(e)&&ed(t)?Qu(e):ed(t)&&Xu(e)?Zu(e):t},nd=function(e,t){var n=Eu(e,t);n.width=1;n.right=n.left+1;return n},rd=function(e){var t=[],n=function(e){0!==e.height&&(t.length>0&&Tu(e,t[t.length-1])||t.push(e))},r=function(e,r){var i=Ku(e.ownerDocument);if(r<e.data.length){if(Ru(e.data[r]))return t;if(Ru(e.data[r-1])){i.setStart(e,r);i.setEnd(e,r+1);if(!Ju(i)){n(nd(td(i),!1));return t}}}if(r>0){i.setStart(e,r-1);i.setEnd(e,r);Ju(i)||n(nd(td(i),!1))}if(r<e.data.length){i.setStart(e,r);i.setEnd(e,r+1);Ju(i)||n(nd(td(i),!0))}},i=e.container(),o=e.offset();if(Gu(i)){r(i,o);return t}if(Mu(i))if(e.isAtEnd()){var a=$u(i,o);Gu(a)&&r(a,a.data.length);Hu(a)&&!Wu(a)&&n(nd(td(a),!1))}else{a=$u(i,o);Gu(a)&&r(a,0);if(Hu(a)&&e.isAtEnd()){n(nd(td(a),!1));return t}var s=$u(e.container(),e.offset()-1);Hu(s)&&!Wu(s)&&(Uu(s)||Uu(a)||!Hu(a))&&n(nd(td(s),!1));Hu(a)&&n(nd(td(a),!0))}return t},id=function(e,t,n){var r=function(){return Gu(e),0===t},i=function(){return Gu(e)?t>=e.data.length:t>=e.childNodes.length},o=function(){var n=Ku(e.ownerDocument);n.setStart(e,t);n.setEnd(e,t);return n},a=function(){n||(n=rd(id(e,t)));return n},s=function(){return a().length>0},c=function(n){return n&&e===n.container()&&t===n.offset()},l=function(n){return $u(e,n?t-1:t)};return{container:_(e),offset:_(t),toRange:o,getClientRects:a,isVisible:s,isAtStart:r,isAtEnd:i,isEqual:c,getNode:l}};id.fromRangeStart=function(e){return id(e.startContainer,e.startOffset)};id.fromRangeEnd=function(e){return id(e.endContainer,e.endOffset)};id.after=function(e){return id(e.parentNode,zu(e)+1)};id.before=function(e){return id(e.parentNode,zu(e))};id.isAbove=function(e,t){return ti(fe(t.getClientRects()),ge(e.getClientRects()),Iu).getOr(!1)};id.isBelow=function(e,t){return ti(ge(t.getClientRects()),fe(e.getClientRects()),wu).getOr(!1)};id.isAtStart=function(e){return!!e&&e.isAtStart()};id.isAtEnd=function(e){return!!e&&e.isAtEnd()};id.isTextPosition=function(e){return!!e&&qr(e.container())};id.isElementPosition=function(e){return!1===id.isTextPosition(e)};var od,ad=function(e,t){qr(t)&&0===t.data.length&&e.remove(t)},sd=function(e,t,n){t.insertNode(n);ad(e,n.previousSibling);ad(e,n.nextSibling)},cd=function(e,t,n){var r=q.from(n.firstChild),i=q.from(n.lastChild);t.insertNode(n);r.each((function(t){return ad(e,t.previousSibling)}));i.each((function(t){return ad(e,t.nextSibling)}))},ld=function(e,t,n){zr(n)?cd(e,t,n):sd(e,t,n)},ud=qr,dd=Mr,pd=jl.nodeIndex,hd=function(e){var t=e.parentNode;return dd(t)?hd(t):t},md=function(e){return e?Ue(e.childNodes,(function(e,t){dd(t)&&"BR"!==t.nodeName?e=e.concat(md(t)):e.push(t);return e}),[]):[]},fd=function(e,t){for(;(e=e.previousSibling)&&ud(e);)t+=e.data.length;return t},gd=function(e){return function(t){return e===t}},bd=function(e){var t,n;t=md(hd(e));n=Ve(t,gd(e),e);t=t.slice(0,n+1);var r=Ue(t,(function(e,n,r){ud(n)&&ud(t[r-1])&&e++;return e}),0);t=Me(t,Pr([e.nodeName]));return(n=Ve(t,gd(e),e))-r},Od=function(e){return(ud(e)?"text()":e.nodeName.toLowerCase())+"["+bd(e)+"]"},yd=function(e,t,n){var r=[];for(t=t.parentNode;t!==e&&(!n||!n(t));t=t.parentNode)r.push(t);return r},jd=function(e,t){var n,r,i,o,a,s=[];n=t.container();r=t.offset();if(ud(n))i=fd(n,r);else{if(r>=(o=n.childNodes).length){i="after";r=o.length-1}else i="before";n=o[r]}s.push(Od(n));a=yd(e,n);a=Me(a,k(Mr));return(s=s.concat(Le(a,(function(e){return Od(e)})))).reverse().join("/")+","+i},vd=function(e,t,n){var r=md(e);r=Me(r,(function(e,t){return!ud(e)||!ud(r[t-1])}));return(r=Me(r,Pr([t])))[n]},Cd=function(e,t){for(var n,r=e,i=0;ud(r);){n=r.data.length;if(t>=i&&t<=i+n){e=r;t-=i;break}if(!ud(r.nextSibling)){e=r;t=n;break}i+=n;r=r.nextSibling}ud(e)&&t>e.data.length&&(t=e.data.length);return id(e,t)},xd=function(e,t){var n;if(!t)return null;var r=t.split(","),i=r[0].split("/");n=r.length>1?r[1]:"before";var o=Ue(i,(function(e,t){var n=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(t);if(!n)return null;"text()"===n[1]&&(n[1]="#text");return vd(e,n[1],parseInt(n[2],10))}),e);if(!o)return null;if(!ud(o)){n="after"===n?pd(o)+1:pd(o);return id(o.parentNode,n)}return Cd(o,parseInt(n,10))},Ed=Xr,Td=function(e,t,n){var r,i;i=e(t.data.slice(0,n)).length;for(r=t.previousSibling;r&&qr(r);r=r.previousSibling)i+=e(r.data).length;return i},Sd=function(e,t,n,r,i){var o,a=r[i?"startContainer":"endContainer"],s=r[i?"startOffset":"endOffset"],c=[],l=0,u=e.getRoot();if(qr(a))c.push(n?Td(t,a,s):s);else{if(s>=(o=a.childNodes).length&&o.length){l=1;s=Math.max(0,o.length-1)}c.push(e.nodeIndex(o[s],n)+l)}for(;a&&a!==u;a=a.parentNode)c.push(e.nodeIndex(a,n));return c},Id=function(e,t,n,r){var i=t.dom,o={};o.start=Sd(i,e,n,r,!0);t.isCollapsed()||(o.end=Sd(i,e,n,r,!1));da(r)&&(o.isFakeCaret=!0);return o},wd=function(e,t,n){var r=0;on.each(e.select(t),(function(e){if("all"!==e.getAttribute("data-mce-bogus")){if(e===n)return!1;r++}}));return r},_d=function(e,t){var n,r,i,o=t?"start":"end";n=e[o+"Container"];r=e[o+"Offset"];if(kr(n)&&"TR"===n.nodeName&&(n=(i=n.childNodes)[Math.min(t?r:r-1,i.length-1)])){r=t?0:n.childNodes.length;e["set"+(t?"Start":"End")](n,r)}},Nd=function(e){_d(e,!0);_d(e,!1);return e},Ad=function(e,t){var n;if(kr(e)){e=Du(e,t);if(Ed(e))return e}if(ea(e)){qr(e)&&Qo(e)&&(e=e.parentNode);n=e.previousSibling;if(Ed(n))return n;n=e.nextSibling;if(Ed(n))return n}},Dd=function(e){return Ad(e.startContainer,e.startOffset)||Ad(e.endContainer,e.endOffset)},kd=function(e,t,n){var r=n.getNode(),i=r?r.nodeName:null,o=n.getRng();if(Ed(r)||"IMG"===i)return{name:i,index:wd(n.dom,i,r)};var a=Dd(o);return a?{name:i=a.tagName,index:wd(n.dom,i,a)}:Id(e,n,t,o)},Pd=function(e){var t=e.getRng();return{start:jd(e.dom.getRoot(),id.fromRangeStart(t)),end:jd(e.dom.getRoot(),id.fromRangeEnd(t))}},Rd=function(e){return{rng:e.getRng()}},Fd=function(e,t,n){var r={"data-mce-type":"bookmark",id:t,style:"overflow:hidden;line-height:0px"};return n?e.create("span",r,"&#xFEFF;"):e.create("span",r)},Ld=function(e,t){var n=e.dom,r=e.getRng(),i=n.uniqueId(),o=e.isCollapsed(),a=e.getNode(),s=a.nodeName;if("IMG"===s)return{name:s,index:wd(n,s,a)};var c=Nd(r.cloneRange());if(!o){c.collapse(!1);var l=Fd(n,i+"_end",t);ld(n,c,l)}(r=Nd(r)).collapse(!0);var u=Fd(n,i+"_start",t);ld(n,r,u);e.moveToBookmark({id:i,keep:!0});return{id:i}},Md=function(e,t,n){return 2===t?kd(Yo,n,e):3===t?Pd(e):t?Rd(e):Ld(e,!1)},Bd=D(kd,N,!0),Ud=jl.DOM,Vd="font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow",Hd=function(e,t,n){var r=e.getParam(t,n);if(-1!==r.indexOf("=")){var i=e.getParam(t,"","hash");return Ne(i,e.id).getOr(n)}return r},qd=function(e){return e.getParam("iframe_attrs",{})},Gd=function(e){return e.getParam("doctype","<!DOCTYPE html>")},Wd=function(e){return e.getParam("document_base_url","")},zd=function(e){return Hd(e,"body_id","tinymce")},$d=function(e){return Hd(e,"body_class","")},Kd=function(e){return e.getParam("content_security_policy","")},Yd=function(e){return e.getParam("br_in_pre",!0)},Xd=function(e){if(e.getParam("force_p_newlines",!1))return"p";var t=e.getParam("forced_root_block","p");return!1===t?"":!0===t?"p":t},Jd=function(e){return e.getParam("forced_root_block_attrs",{})},Qd=function(e){return e.getParam("br_newline_selector",".mce-toc h2,figcaption,caption")},Zd=function(e){return e.getParam("no_newline_selector","")},ep=function(e){return e.getParam("keep_styles",!0)},tp=function(e){return e.getParam("end_container_on_empty_block",!1)},np=function(e){return on.explode(e.getParam("font_size_style_values","xx-small,x-small,small,medium,large,x-large,xx-large"))},rp=function(e){return on.explode(e.getParam("font_size_classes",""))},ip=function(e){return e.getParam("images_dataimg_filter",M,"function")},op=function(e){return e.getParam("automatic_uploads",!0,"boolean")},ap=function(e){return e.getParam("images_reuse_filename",!1,"boolean")},sp=function(e){return e.getParam("images_replace_blob_uris",!0,"boolean")},cp=function(e){return e.getParam("icons","","string")},lp=function(e){return e.getParam("icons_url","","string")},up=function(e){return e.getParam("images_upload_url","","string")},dp=function(e){return e.getParam("images_upload_base_path","","string")},pp=function(e){return e.getParam("images_upload_credentials",!1,"boolean")},hp=function(e){return e.getParam("images_upload_handler",null,"function")},mp=function(e){return e.getParam("content_css_cors",!1,"boolean")},fp=function(e){return e.getParam("referrer_policy","","string")},gp=function(e){return e.getParam("language","en","string")},bp=function(e){return e.getParam("language_url","","string")},Op=function(e){return e.getParam("indent_use_margin",!1)},yp=function(e){return e.getParam("indentation","40px","string")},jp=function(e){var t=e.getParam("content_css");return g(t)?J(t.split(","),ut):O(t)?t:!1===t||e.inline?[]:["default"]},vp=function(e){var t=e.getParam("font_css",[]);return O(t)?t:J(t.split(","),ut)},Cp=function(e){return e.getParam("directionality",Rl.isRtl()?"rtl":void 0)},xp=function(e){return e.getParam("inline_boundaries_selector","a[href],code,.mce-annotation","string")},Ep=function(e){var t=e.getParam("object_resizing");return!1!==t&&!Qt.iOS&&(g(t)?t:"table,img,figure.image,div,video,iframe")},Tp=function(e){return e.getParam("resize_img_proportional",!0,"boolean")},Sp=function(e){return e.getParam("placeholder",Ud.getAttrib(e.getElement(),"placeholder"),"string")},Ip=function(e){return e.getParam("event_root")},wp=function(e){return e.getParam("service_message")},_p=function(e){return e.getParam("theme")},Np=function(e){return e.getParam("validate")},Ap=function(e){return!1!==e.getParam("inline_boundaries")},Dp=function(e){return e.getParam("formats")},kp=function(e){var t=e.getParam("preview_styles",Vd);return g(t)?t:""},Pp=function(e){return e.getParam("format_empty_lines",!1,"boolean")},Rp=function(e){return e.getParam("custom_ui_selector","","string")},Fp=function(e){return e.getParam("theme_url")},Lp=function(e){return e.getParam("inline")},Mp=function(e){return e.getParam("hidden_input")},Bp=function(e){return e.getParam("submit_patch")},Up=function(e){return"xml"===e.getParam("encoding")},Vp=function(e){return e.getParam("add_form_submit_trigger")},Hp=function(e){return e.getParam("add_unload_trigger")},qp=function(e){return""!==Xd(e)},Gp=function(e){return e.getParam("custom_undo_redo_levels",0,"number")},Wp=function(e){return e.getParam("disable_nodechange")},zp=function(e){return e.getParam("readonly")},$p=function(e){return e.getParam("content_css_cors")},Kp=function(e){return e.getParam("plugins","","string")},Yp=function(e){return e.getParam("external_plugins")},Xp=function(e){return e.getParam("block_unsupported_drop",!0,"boolean")},Jp=function(e){return e.getParam("visual",!0,"boolean")},Qp=function(e){return e.getParam("visual_table_class","mce-item-table","string")},Zp=function(e){return e.getParam("visual_anchor_class","mce-item-anchor","string")},eh=function(e){return e.getParam("iframe_aria_text","Rich Text Area. Press ALT-0 for help.","string")},th=kr,nh=qr,rh=function(e){var t=e.parentNode;t&&t.removeChild(e)},ih=function(e){var t=Yo(e);return{count:e.length-t.length,text:t}},oh=function(e){for(var t;-1!==(t=e.data.lastIndexOf($o));)e.deleteData(t,1)},ah=function(e,t){ph(e);return t},sh=function(e,t){var n=ih(e.data.substr(0,t.offset())),r=ih(e.data.substr(t.offset()));if((n.text+r.text).length>0){oh(e);return id(e,t.offset()-n.count)}return t},ch=function(e,t){var n=t.container(),r=K(be(n.childNodes),e).map((function(e){return e<t.offset()?id(n,t.offset()-1):t})).getOr(t);ph(e);return r},lh=function(e,t){return nh(e)&&t.container()===e?sh(e,t):ah(e,t)},uh=function(e,t){return t.container()===e.parentNode?ch(e,t):ah(e,t)},dh=function(e,t){return id.isTextPosition(t)?lh(e,t):uh(e,t)},ph=function(e){th(e)&&ea(e)&&(ta(e)?e.removeAttribute("data-mce-caret"):rh(e));if(nh(e)){oh(e);0===e.data.length&&rh(e)}},hh=qt().browser,mh=Xr,fh=Qr,gh=Jr,bh="*[contentEditable=false],video,audio,embed,object",Oh=function(e,t,n){var r,i,o=Eu(t.getBoundingClientRect(),n);if("BODY"===e.tagName){var a=e.ownerDocument.documentElement;r=e.scrollLeft||a.scrollLeft;i=e.scrollTop||a.scrollTop}else{var s=e.getBoundingClientRect();r=e.scrollLeft-s.left;i=e.scrollTop-s.top}o.left+=r;o.right+=r;o.top+=i;o.bottom+=i;o.width=1;var c=t.offsetWidth-t.clientWidth;if(c>0){n&&(c*=-1);o.left+=c;o.right+=c}return o},yh=function(e){for(var t=Zl(un.fromDom(e),bh),n=0;n<t.length;n++){var r=t[n].dom,i=r.previousSibling;if(ca(i)){1===(o=i.data).length?i.parentNode.removeChild(i):i.deleteData(o.length-1,1)}i=r.nextSibling;if(sa(i)){var o;1===(o=i.data).length?i.parentNode.removeChild(i):i.deleteData(0,1)}}},jh=function(e,t,n,r){var i,o,a=Ml(),s=Xd(e),c=s.length>0?s:"p",l=function(e,r){var i;u();if(gh(r))return null;if(!n(r)){o=na(r,e);i=r.ownerDocument.createRange();if(Ch(o.nextSibling)){i.setStart(o,0);i.setEnd(o,0)}else{i.setStart(o,1);i.setEnd(o,1)}return i}o=aa(c,r,e);var s=Oh(t,r,e);pl(o).css("top",s.top);var l=pl('<div class="mce-visual-caret" data-mce-bogus="all"></div>').css(qe({},s)).appendTo(t)[0];a.set({caret:l,element:r,before:e});e&&pl(l).addClass("mce-visual-caret-before");d();(i=r.ownerDocument.createRange()).setStart(o,0);i.setEnd(o,0);return i},u=function(){yh(t);if(o){ph(o);o=null}a.on((function(e){pl(e.caret).remove();a.clear()}));if(i){vo.clearInterval(i);i=void 0}},d=function(){i=vo.setInterval((function(){r()?pl("div.mce-visual-caret",t).toggleClass("mce-visual-caret-hidden"):pl("div.mce-visual-caret",t).addClass("mce-visual-caret-hidden")}),500)};return{show:l,hide:u,getCss:function(){return".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}"},reposition:function(){a.on((function(e){var n=Oh(t,e.element,e.before);pl(e.caret).css(qe({},n))}))},destroy:function(){return vo.clearInterval(i)}}},vh=function(){return hh.isIE()||hh.isEdge()||hh.isFirefox()},Ch=function(e){return mh(e)||fh(e)},xh=function(e){return Ch(e)||Ur(e)&&vh()},Eh=Xr,Th=Qr,Sh=Rr("display","block table table-cell table-caption list-item"),Ih=ea,wh=Qo,_h=kr,Nh=ja,Ah=function(e){return e>0},Dh=function(e){return e<0},kh=function(e,t){for(var n;n=e(t);)if(!wh(n))return n;return null},Ph=function(e,t,n,r,i){var o=new Eo(e,r),a=Eh(e)||wh(e);if(Dh(t)){if(a&&n(e=kh(o.prev.bind(o),!0)))return e;for(;e=kh(o.prev.bind(o),i);)if(n(e))return e}if(Ah(t)){if(a&&n(e=kh(o.next.bind(o),!0)))return e;for(;e=kh(o.next.bind(o),i);)if(n(e))return e}return null},Rh=function(e,t){for(;e&&e!==t;){if(Sh(e))return e;e=e.parentNode}return null},Fh=function(e,t,n){return Rh(e.container(),n)===Rh(t.container(),n)},Lh=function(e,t){if(!t)return null;var n=t.container(),r=t.offset();return _h(n)?n.childNodes[r+e]:null},Mh=function(e,t){var n=t.ownerDocument.createRange();if(e){n.setStartBefore(t);n.setEndBefore(t)}else{n.setStartAfter(t);n.setEndAfter(t)}return n},Bh=function(e,t,n){return Rh(t,e)===Rh(n,e)},Uh=function(e,t,n){for(var r=e?"previousSibling":"nextSibling";n&&n!==t;){var i=n[r];Ih(i)&&(i=i[r]);if(Eh(i)||Th(i)){if(Bh(t,i,n))return i;break}if(Nh(i))break;n=n.parentNode}return null},Vh=D(Mh,!0),Hh=D(Mh,!1),qh=function(e,t,n){var r,i=D(Uh,!0,t),o=D(Uh,!1,t),a=n.startContainer,s=n.startOffset;if(Qo(a)){_h(a)||(a=a.parentNode);var c=a.getAttribute("data-mce-caret");if("before"===c){r=a.nextSibling;if(xh(r))return Vh(r)}if("after"===c){r=a.previousSibling;if(xh(r))return Hh(r)}}if(!n.collapsed)return n;if(qr(a)){if(Ih(a)){if(1===e){if(r=o(a))return Vh(r);if(r=i(a))return Hh(r)}if(-1===e){if(r=i(a))return Hh(r);if(r=o(a))return Vh(r)}return n}if(ca(a)&&s>=a.data.length-1)return 1===e&&(r=o(a))?Vh(r):n;if(sa(a)&&s<=1)return-1===e&&(r=i(a))?Hh(r):n;if(s===a.data.length)return(r=o(a))?Vh(r):n;if(0===s)return(r=i(a))?Hh(r):n}return n},Gh=function(e,t){return q.from(Lh(e?0:-1,t)).filter(Eh)},Wh=function(e,t,n){var r=qh(e,t,n);return-1===e?id.fromRangeStart(r):id.fromRangeEnd(r)},zh=function(e){return q.from(e.getNode()).map(un.fromDom)},$h=function(e){return q.from(e.getNode(!0)).map(un.fromDom)},Kh=function(e,t){for(;t=e(t);)if(t.isVisible())return t;return t},Yh=function(e,t){var n=Fh(e,t);return!(n||!$r(e.getNode()))||n};!function(e){e[e.Backwards=-1]="Backwards";e[e.Forwards=1]="Forwards"}(od||(od={}));var Xh=Xr,Jh=qr,Qh=kr,Zh=$r,em=ja,tm=Ta,nm=Sa,rm=function(e,t){for(var n=[];e&&e!==t;){n.push(e);e=e.parentNode}return n},im=function(e,t){return e.hasChildNodes()&&t<e.childNodes.length?e.childNodes[t]:null},om=function(e,t){if(Ah(e)){if(em(t.previousSibling)&&!Jh(t.previousSibling))return id.before(t);if(Jh(t))return id(t,0)}if(Dh(e)){if(em(t.nextSibling)&&!Jh(t.nextSibling))return id.after(t);if(Jh(t))return id(t,t.data.length)}return Dh(e)?Zh(t)?id.before(t):id.after(t):id.before(t)},am=function(e,t){var n=t.nextSibling;return n&&em(n)?Jh(n)?id(n,0):id.before(n):sm(od.Forwards,id.after(t),e)},sm=function(e,t,n){var r,i,o,a;if(!Qh(n)||!t)return null;if(t.isEqual(id.after(n))&&n.lastChild){a=id.after(n.lastChild);if(Dh(e)&&em(n.lastChild)&&Qh(n.lastChild))return Zh(n.lastChild)?id.before(n.lastChild):a}else a=t;var s=a.container(),c=a.offset();if(Jh(s)){if(Dh(e)&&c>0)return id(s,--c);if(Ah(e)&&c<s.length)return id(s,++c);r=s}else{if(Dh(e)&&c>0){i=im(s,c-1);if(em(i))return!tm(i)&&(o=Ph(i,e,nm,i))?Jh(o)?id(o,o.data.length):id.after(o):Jh(i)?id(i,i.data.length):id.before(i)}if(Ah(e)&&c<s.childNodes.length){i=im(s,c);if(em(i))return Zh(i)?am(n,i):!tm(i)&&(o=Ph(i,e,nm,i))?Jh(o)?id(o,0):id.before(o):Jh(i)?id(i,0):id.after(i)}r=i||a.getNode()}if(Ah(e)&&a.isAtEnd()||Dh(e)&&a.isAtStart()){r=Ph(r,e,M,n,!0);if(nm(r,n))return om(e,r)}i=Ph(r,e,nm,n);var l=He(te(rm(s,n),Xh));return!l||i&&l.contains(i)?i?om(e,i):null:a=Ah(e)?id.after(l):id.before(l)},cm=function(e){return{next:function(t){return sm(od.Forwards,t,e)},prev:function(t){return sm(od.Backwards,t,e)}}},lm=function(e,t,n){var r=e?id.before(n):id.after(n);return gm(e,t,r)},um=function(e){return $r(e)?id.before(e):id.after(e)},dm=function(e){return id.isTextPosition(e)?0===e.offset():ja(e.getNode())},pm=function(e){if(id.isTextPosition(e)){var t=e.container();return e.offset()===t.data.length}return ja(e.getNode(!0))},hm=function(e,t){return!id.isTextPosition(e)&&!id.isTextPosition(t)&&e.getNode()===t.getNode(!0)},mm=function(e){return!id.isTextPosition(e)&&$r(e.getNode())},fm=function(e,t,n){return e?!hm(t,n)&&!mm(t)&&pm(t)&&dm(n):!hm(n,t)&&dm(t)&&pm(n)},gm=function(e,t,n){var r=cm(t);return q.from(e?r.next(n):r.prev(n))},bm=function(e,t,n){return gm(e,t,n).bind((function(r){return Fh(n,r,t)&&fm(e,n,r)?gm(e,t,r):q.some(r)}))},Om=function(e,t,n,r){return bm(e,t,n).bind((function(n){return r(n)?Om(e,t,n,r):q.some(n)}))},ym=function(e,t){var n=e?t.firstChild:t.lastChild;return qr(n)?q.some(id(n,e?0:n.data.length)):n?ja(n)?q.some(e?id.before(n):um(n)):lm(e,t,n):q.none()},jm=D(gm,!0),vm=D(gm,!1),Cm=D(ym,!0),xm=D(ym,!1),Em="_mce_caret",Tm=function(e){return kr(e)&&e.id===Em},Sm=function(e,t){for(;t&&t!==e;){if(t.id===Em)return t;t=t.parentNode}return null},Im=function(e){return g(e.start)},wm=function(e){return Ae(e,"rng")},_m=function(e){return Ae(e,"id")},Nm=function(e){return Ae(e,"name")},Am=function(e){return on.isArray(e.start)},Dm=function(e,t){kr(t)&&e.isBlock(t)&&!t.innerHTML&&!Qt.ie&&(t.innerHTML='<br data-mce-bogus="1" />');return t},km=function(e,t){var n,r=e.createRng();n=xd(e.getRoot(),t.start);r.setStart(n.container(),n.offset());n=xd(e.getRoot(),t.end);r.setEnd(n.container(),n.offset());return r},Pm=function(e,t){var n=e.ownerDocument.createTextNode($o);e.appendChild(n);t.setStart(n,0);t.setEnd(n,0)},Rm=function(e){return!1===e.hasChildNodes()},Fm=function(e,t){return xm(e).fold(L,(function(e){t.setStart(e.container(),e.offset());t.setEnd(e.container(),e.offset());return!0}))},Lm=function(e,t,n){if(Rm(t)&&Sm(e,t)){Pm(t,n);return!0}return!1},Mm=function(e,t,n,r){var i,o,a,s,c=n[t?"start":"end"],l=e.getRoot();if(c){a=c[0];for(o=l,i=c.length-1;i>=1;i--){s=o.childNodes;if(Lm(l,o,r))return!0;if(c[i]>s.length-1)return!!Lm(l,o,r)||Fm(o,r);o=s[c[i]]}3===o.nodeType&&(a=Math.min(c[0],o.nodeValue.length));1===o.nodeType&&(a=Math.min(c[0],o.childNodes.length));t?r.setStart(o,a):r.setEnd(o,a)}return!0},Bm=function(e){return qr(e)&&e.data.length>0},Um=function(e,t,n){var r,i,o,a,s,c,l=e.get(n.id+"_"+t),u=n.keep;if(l){r=l.parentNode;if("start"===t){if(u)if(l.hasChildNodes()){r=l.firstChild;i=1}else if(Bm(l.nextSibling)){r=l.nextSibling;i=0}else if(Bm(l.previousSibling)){r=l.previousSibling;i=l.previousSibling.data.length}else{r=l.parentNode;i=e.nodeIndex(l)+1}else i=e.nodeIndex(l);s=r;c=i}else{if(u)if(l.hasChildNodes()){r=l.firstChild;i=1}else if(Bm(l.previousSibling)){r=l.previousSibling;i=l.previousSibling.data.length}else{r=l.parentNode;i=e.nodeIndex(l)}else i=e.nodeIndex(l);s=r;c=i}if(!u){a=l.previousSibling;o=l.nextSibling;on.each(on.grep(l.childNodes),(function(e){qr(e)&&(e.nodeValue=e.nodeValue.replace(/\uFEFF/g,""))}));for(;l=e.get(n.id+"_"+t);)e.remove(l,!0);if(a&&o&&a.nodeType===o.nodeType&&qr(a)&&!Qt.opera){i=a.nodeValue.length;a.appendData(o.nodeValue);e.remove(o);s=a;c=i}}return q.some(id(s,c))}return q.none()},Vm=function(e,t){var n=e.createRng();return Mm(e,!0,t,n)&&Mm(e,!1,t,n)?q.some(n):q.none()},Hm=function(e,t){var n=Um(e,"start",t),r=Um(e,"end",t);return ti(n,r.or(n),(function(t,n){var r=e.createRng();r.setStart(Dm(e,t.container()),t.offset());r.setEnd(Dm(e,n.container()),n.offset());return r}))},qm=function(e,t){return q.from(e.select(t.name)[t.index]).map((function(t){var n=e.createRng();n.selectNode(t);return n}))},Gm=function(e,t){var n=e.dom;if(t){if(Am(t))return Vm(n,t);if(Im(t))return q.some(km(n,t));if(_m(t))return Hm(n,t);if(Nm(t))return qm(n,t);if(wm(t))return q.some(t.rng)}return q.none()},Wm=function(e,t,n){return Md(e,t,n)},zm=function(e,t){Gm(e,t).each((function(t){e.setRng(t)}))},$m=function(e){return kr(e)&&"SPAN"===e.tagName&&"bookmark"===e.getAttribute("data-mce-type")},Km=function(e){return function(t){return e===t}}(zo),Ym=function(e){return""!==e&&-1!==" \f\n\r\t\v".indexOf(e)},Xm=function(e){return!Ym(e)&&!Km(e)},Jm=function(e){return!!e.nodeType},Qm=function(e){return e&&/^(IMG)$/.test(e.nodeName)},Zm=function(e,t,n){var r=n.startOffset,i=n.startContainer;if((i!==n.endContainer||!Qm(i.childNodes[r]))&&kr(i)){var o=i.childNodes,a=void 0;if(r<o.length){i=o[r];a=new Eo(i,e.getParent(i,e.isBlock))}else{i=o[o.length-1];(a=new Eo(i,e.getParent(i,e.isBlock))).next(!0)}for(var s=a.current();s;s=a.next())if(qr(s)&&!rf(s)){n.setStart(s,0);t.setRng(n);return}}},ef=function(e,t,n){if(e){var r=t?"nextSibling":"previousSibling";for(e=n?e:e[r];e;e=e[r])if(kr(e)||!rf(e))return e}},tf=function(e,t){Jm(t)&&(t=t.nodeName);return!!e.schema.getTextBlockElements()[t.toLowerCase()]},nf=function(e,t,n){return e.schema.isValidChild(t,n)},rf=function(e,t){void 0===t&&(t=!1);if(x(e)&&qr(e)){var n=t?e.data.replace(/ /g," "):e.data;return wa(n)}return!1},of=function(e){return x(e)&&qr(e)&&0===e.length},af=function(e,t){E(e)?e=e(t):x(t)&&(e=e.replace(/%(\w+)/g,(function(e,n){return t[n]||e})));return e},sf=function(e,t){t=t||"";e=""+((e=e||"").nodeName||e);t=""+(t.nodeName||t);return e.toLowerCase()===t.toLowerCase()},cf=function(e,t,n){"color"!==n&&"backgroundColor"!==n||(t=e.toHex(t));"fontWeight"===n&&700===t&&(t="bold");"fontFamily"===n&&(t=t.replace(/[\'\"]/g,"").replace(/,\s+/g,","));return""+t},lf=function(e,t,n){return cf(e,e.getStyle(t,n),n)},uf=function(e,t){var n;e.getParent(t,(function(t){return(n=e.getStyle(t,"text-decoration"))&&"none"!==n}));return n},df=function(e,t,n){return e.getParents(t,n,e.getRoot())},pf=function(e,t){var n=function(e){var t=function(e){return e.length>1&&"%"===e.charAt(0)};return X(["styles","attributes"],(function(n){return Ne(e,n).exists((function(e){var n=O(e)?e:_e(e);return X(n,t)}))}))};return X(e.formatter.get(t),n)},hf=function(e,t,n){var r=["inline","block","selector","attributes","styles","classes"],i=function(e){return Ie(e,(function(e,t){return X(r,(function(e){return e===t}))}))};return X(e.formatter.get(t),(function(t){var r=i(t);return X(e.formatter.get(n),(function(e){var t=i(e);return ke(r,t)}))}))},mf=function(e){return De(e,"block")},ff=function(e){return De(e,"selector")},gf=function(e){return De(e,"inline")},bf=function(e){return ff(e)&&gf(e)&&Zr(Ne(e,"mixed"),!0)},Of=function(e){return ff(e)&&!1!==e.expand&&!gf(e)},yf=$m,jf=df,vf=rf,Cf=tf,xf=function(e){return $r(e)&&e.getAttribute("data-mce-bogus")&&!e.nextSibling},Ef=function(e,t){for(var n=t;n;){if(kr(n)&&e.getContentEditable(n))return"false"===e.getContentEditable(n)?n:t;n=n.parentNode}return t},Tf=function(e,t,n,r){for(var i=t.data,o=n;e?o>=0:o<i.length;e?o--:o++)if(r(i.charAt(o)))return e?o+1:o;return-1},Sf=function(e,t,n){return Tf(e,t,n,(function(e){return Km(e)||Ym(e)}))},If=function(e,t,n){return Tf(e,t,n,Xm)},wf=function(e,t,n,r,i,o){var a,s=e.getParent(n,e.isBlock)||t,c=function(t,n,r){var o=vu(e),c=i?o.backwards:o.forwards;return q.from(c(t,n,(function(e,t){if(yf(e.parentNode))return-1;a=e;return r(i,e,t)}),s))};return c(n,r,Sf).bind((function(e){return o?c(e.container,e.offset+(i?-1:0),If):q.some(e)})).orThunk((function(){return a?q.some({container:a,offset:i?0:a.length}):q.none()}))},_f=function(e,t,n,r,i){qr(r)&&mt(r.data)&&r[i]&&(r=r[i]);for(var o=jf(e,r),a=0;a<o.length;a++)for(var s=0;s<t.length;s++){var c=t[s];if((!x(c.collapsed)||c.collapsed===n.collapsed)&&(ff(c)&&e.is(o[a],c.selector)))return o[a]}return r},Nf=function(e,t,n,r){var i=n,o=e.dom,a=o.getRoot(),s=t[0];mf(s)&&(i=s.wrapper?null:o.getParent(n,s.block,a));if(!i){var c=o.getParent(n,"LI,TD,TH");i=o.getParent(qr(n)?n.parentNode:n,(function(t){return t!==a&&Cf(e,t)}),c)}i&&mf(s)&&s.wrapper&&(i=jf(o,i,"ul,ol").reverse()[0]||i);if(!i){i=n;for(;i[r]&&!o.isBlock(i[r]);){i=i[r];if(sf(i,"br"))break}}return i||n},Af=function(e,t,n,r){var i=n.parentNode;return!x(n[r])&&(!(i!==t&&!C(i)&&!e.isBlock(i))||Af(e,t,i,r))},Df=function(e,t,n,r,i){var o=n,a=i?"previousSibling":"nextSibling",s=e.getRoot();if(qr(n)&&!vf(n)&&(i?r>0:r<n.data.length))return n;for(;;){if(!t[0].block_expand&&e.isBlock(o))return o;for(var c=o[a];c;c=c[a]){var l=qr(c)&&!Af(e,s,c,a);if(!yf(c)&&!xf(c)&&!vf(c,l))return o}if(o===s||o.parentNode===s){n=o;break}o=o.parentNode}return n},kf=function(e){return yf(e.parentNode)||yf(e)},Pf=function(e,t,n,r){void 0===r&&(r=!1);var i=t.startContainer,o=t.startOffset,a=t.endContainer,s=t.endOffset,c=e.dom,l=n[0];if(kr(i)&&i.hasChildNodes()){i=Du(i,o);qr(i)&&(o=0)}if(kr(a)&&a.hasChildNodes()){a=Du(a,t.collapsed?s:s-1);qr(a)&&(s=a.nodeValue.length)}i=Ef(c,i);a=Ef(c,a);if(kf(i)){i=yf(i)?i:i.parentNode;i=t.collapsed?i.previousSibling||i:i.nextSibling||i;qr(i)&&(o=t.collapsed?i.length:0)}if(kf(a)){a=yf(a)?a:a.parentNode;a=t.collapsed?a.nextSibling||a:a.previousSibling||a;qr(a)&&(s=t.collapsed?0:a.length)}if(t.collapsed){wf(c,e.getBody(),i,o,!0,r).each((function(e){var t=e.container,n=e.offset;i=t;o=n}));wf(c,e.getBody(),a,s,!1,r).each((function(e){var t=e.container,n=e.offset;a=t;s=n}))}if(gf(l)||l.block_expand){gf(l)&&qr(i)&&0!==o||(i=Df(c,n,i,o,!0));gf(l)&&qr(a)&&s!==a.nodeValue.length||(a=Df(c,n,a,s,!1))}if(Of(l)){i=_f(c,n,t,i,"previousSibling");a=_f(c,n,t,a,"nextSibling")}if(mf(l)||ff(l)){i=Nf(e,n,i,"previousSibling");a=Nf(e,n,a,"nextSibling");if(mf(l)){c.isBlock(i)||(i=Df(c,n,i,o,!0));c.isBlock(a)||(a=Df(c,n,a,s,!1))}}if(kr(i)){o=c.nodeIndex(i);i=i.parentNode}if(kr(a)){s=c.nodeIndex(a)+1;a=a.parentNode}return{startContainer:i,startOffset:o,endContainer:a,endOffset:s}},Rf=function(e,t,n){var r=t.startOffset,i=Du(t.startContainer,r),o=t.endOffset,a=Du(t.endContainer,o-1),s=function(e){var t=e[0];qr(t)&&t===i&&r>=t.data.length&&e.splice(0,1);var n=e[e.length-1];0===o&&e.length>0&&n===a&&qr(n)&&e.splice(e.length-1,1);return e},c=function(e,t,n){for(var r=[];e&&e!==n;e=e[t])r.push(e);return r},l=function(t,n){return e.getParent(t,(function(e){return e.parentNode===n}),n)},u=function(e,t,r){for(var i=r?"nextSibling":"previousSibling",o=e,a=o.parentNode;o&&o!==t;o=a){a=o.parentNode;var l=c(o===e?o:o[i],i);if(l.length){r||l.reverse();n(s(l))}}};if(i===a)return n(s([i]));var d=e.findCommonAncestor(i,a);if(e.isChildOf(i,a))return u(i,d,!0);if(e.isChildOf(a,i))return u(a,d);var p=l(i,d)||i,h=l(a,d)||a;u(i,p,!0);var m=c(p===i?p:p.nextSibling,"nextSibling",h===a?h.nextSibling:h);m.length&&n(s(m));u(a,h)},Ff=function(e){var t=[];if(e)for(var n=0;n<e.rangeCount;n++)t.push(e.getRangeAt(n));return t},Lf=function(e){return ce(e,(function(e){var t=Au(e);return t?[un.fromDom(t)]:[]}))},Mf=function(e){return Ff(e).length>1},Bf=function(e){return te(Lf(e),Ho)},Uf=function(e){return Zl(e,"td[data-mce-selected],th[data-mce-selected]")},Vf=function(e,t){var n=Uf(t);return n.length>0?n:Bf(e)},Hf=function(e){return Vf(Ff(e.selection.getSel()),un.fromDom(e.getBody()))},qf=function(e,t){return ho(e,"table",t)},Gf=function(e){var t=e.startContainer,n=e.startOffset;return qr(t)?0===n?q.some(un.fromDom(t)):q.none():q.from(t.childNodes[n]).map(un.fromDom)},Wf=function(e){var t=e.endContainer,n=e.endOffset;return qr(t)?n===t.data.length?q.some(un.fromDom(t)):q.none():q.from(t.childNodes[n-1]).map(un.fromDom)},zf=function(e){return Yn(e).fold(_([e]),(function(t){return[e].concat(zf(t))}))},$f=function(e){return Xn(e).fold(_([e]),(function(t){return"br"===In(t)?qn(t).map((function(t){return[e].concat($f(t))})).getOr([]):[e].concat($f(t))}))},Kf=function(e,t){return ti(Gf(t),Wf(t),(function(t,n){var r=oe(zf(e),D(xn,t)),i=oe($f(e),D(xn,n));return r.isSome()&&i.isSome()})).getOr(!1)},Yf=function(e,t,n,r){var i=n,o=new Eo(n,i),a=Ie(e.schema.getMoveCaretBeforeOnEnterElements(),(function(e,t){return!Y(["td","th","table"],t.toLowerCase())}));do{if(qr(n)&&0!==on.trim(n.nodeValue).length){r?t.setStart(n,0):t.setEnd(n,n.nodeValue.length);return}if(a[n.nodeName]){r?t.setStartBefore(n):"BR"===n.nodeName?t.setEndBefore(n):t.setEndAfter(n);return}}while(n=r?o.next():o.prev());"BODY"===i.nodeName&&(r?t.setStart(i,0):t.setEnd(i,i.childNodes.length))},Xf=function(e){var t=e.selection.getSel();return t&&t.rangeCount>0},Jf=function(e,t){var n=Hf(e);n.length>0?Q(n,(function(n){var r=n.dom,i=e.dom.createRng();i.setStartBefore(r);i.setEndAfter(r);t(i,!0)})):t(e.selection.getRng(),!1)},Qf=function(e,t,n){var r=Ld(e,t);n(r);e.moveToBookmark(r)},Zf=function(e,t){var n=function(n){if(!e(n))throw new Error("Can only get "+t+" value of a "+t+" node");return r(n).getOr("")},r=function(t){return e(t)?q.from(t.dom.nodeValue):q.none()};return{get:n,getOption:r,set:function(n,r){if(!e(n))throw new Error("Can only set raw "+t+" value of a "+t+" node");n.dom.nodeValue=r}}}(Dn,"text"),eg=function(e){return Zf.get(e)},tg=function(e){return Dn(e)&&eg(e)===$o},ng=function(e,t,n,r){return Un(t).fold((function(){return"skipping"}),(function(i){return"br"===r||tg(t)?"valid":iu(t)?"existing":Tm(t.dom)?"caret":nf(e,n,r)&&nf(e,In(i),n)?"valid":"invalid-child"}))},rg=function(e,t){var n=Pf(e,t,[{inline:"span"}]);t.setStart(n.startContainer,n.startOffset);t.setEnd(n.endContainer,n.endOffset);e.selection.setRng(t)},ig=function(e,t,n,r){var i=t.uid,o=void 0===i?du("mce-annotation"):i,a=Ge(t,["uid"]),s=un.fromTag("span",e);Kl(s,eu());ai(s,""+nu(),o);ai(s,""+tu(),n);var c=r(o,a),l=c.attributes,u=void 0===l?{}:l,d=c.classes,p=void 0===d?[]:d;si(s,u);pu(s,p);return s},og=function(e,t,n,r,i){var o=[],a=ig(e.getDoc(),i,n,r),s=Ml(),c=function(){s.clear()},l=function(){return s.get().getOrThunk((function(){var e=Ou(a);o.push(e);s.set(e);return e}))},u=function(e){Q(e,d)},d=function(t){switch(ng(e,t,"span",In(t))){case"invalid-child":c();var n=$n(t);u(n);c();break;case"valid":var r=l();pr(t,r)}},p=function(e){var t=J(e,un.fromDom);u(t)};Rf(e.dom,t,(function(e){c();p(e)}));return o},ag=function(e,t,n,r){e.undoManager.transact((function(){var i=e.selection,o=i.getRng(),a=Hf(e).length>0;o.collapsed&&!a&&rg(e,o);if(i.getRng().collapsed&&!a){var s=ig(e.getDoc(),r,t,n.decorate);gu(s,zo);i.getRng().insertNode(s.dom);i.select(s.dom)}else Qf(i,!1,(function(){Jf(e,(function(i){og(e,i,t,n.decorate,r)}))}))}))},sg=function(e){var t=lu();cu(e,t);var n=su(e);return{register:function(e,n){t.register(e,n)},annotate:function(n,r){t.lookup(n).each((function(t){ag(e,n,t,r)}))},annotationChanged:function(e,t){n.addListener(e,t)},remove:function(t){ru(e,q.some(t)).each((function(e){var t=e.elements;Q(t,br)}))},getAll:function(t){var n=au(e,t);return Ce(n,(function(e){return J(e,(function(e){return e.dom}))}))}}},cg=function(e){return{getBookmark:D(Wm,e),moveToBookmark:D(zm,e)}};cg.isBookmarkNode=$m;var lg=function(e,t){for(;t&&t!==e;){if(Yr(t)||Xr(t))return t;t=t.parentNode}return null},ug=function(e,t,n){if(n.collapsed)return!1;if(Qt.browser.isIE()&&n.startOffset===n.endOffset-1&&n.startContainer===n.endContainer){var r=n.startContainer.childNodes[n.startOffset];if(kr(r))return X(r.getClientRects(),(function(n){return _u(n,e,t)}))}return X(n.getClientRects(),(function(n){return _u(n,e,t)}))},dg=function(e,t){return e.fire("PreProcess",t)},pg=function(e,t){return e.fire("PostProcess",t)},hg=function(e){return e.fire("remove")},mg=function(e){return e.fire("detach")},fg=function(e,t){return e.fire("SwitchMode",{mode:t})},gg=function(e,t,n,r,i){e.fire("ObjectResizeStart",{target:t,width:n,height:r,origin:i})},bg=function(e,t,n,r,i){e.fire("ObjectResized",{target:t,width:n,height:r,origin:i})},Og=function(e){return e.fire("PreInit")},yg=function(e){return e.fire("PostRender")},jg=function(e){return e.fire("Init")},vg=function(e,t){return e.fire("PlaceholderToggle",{state:t})},Cg=function(e,t,n){return e.fire(t,n)},xg=function(e,t,n,r){return e.fire("FormatApply",{format:t,node:n,vars:r})},Eg=function(e,t,n,r){return e.fire("FormatRemove",{format:t,node:n,vars:r})},Tg={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:function(e){return e.shiftKey||e.ctrlKey||e.altKey||Tg.metaKeyPressed(e)},metaKeyPressed:function(e){return Qt.mac?e.metaKey:e.ctrlKey&&!e.altKey}},Sg=Xr,Ig=function(e,t){var n,r,i,o,a,s,c,l,u,d,p,h,m,f,g,b,O,y="data-mce-selected",j=t.dom,v=on.each,C=t.getDoc(),E=document,T=Math.abs,S=Math.round,I=t.getBody(),w={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},_=function(e){return e&&("IMG"===e.nodeName||t.dom.is(e,"figure.image"))},N=function(e){return Qr(e)||j.hasClass(e,"mce-preview-object")},A=function(e,t){if("longpress"===e.type||0===e.type.indexOf("touch")){var n=e.touches[0];return _(e.target)&&!ug(n.clientX,n.clientY,t)}return _(e.target)&&!ug(e.clientX,e.clientY,t)},D=function(e){var n=e.target;A(e,t.selection.getRng())&&!e.isDefaultPrevented()&&t.selection.select(n)},k=function(e){return j.is(e,"figure.image")?[e.querySelector("img")]:j.hasClass(e,"mce-preview-object")&&x(e.firstElementChild)?[e,e.firstElementChild]:[e]},P=function(e){var n=Ep(t);return!!n&&("false"!==e.getAttribute("data-mce-resize")&&(e!==t.getBody()&&(j.hasClass(e,"mce-preview-object")?yn(un.fromDom(e.firstElementChild),n):yn(un.fromDom(e),n))))},R=function(e){return N(e)?j.create("img",{src:Qt.transparentSrc}):e.cloneNode(!0)},F=function(e,n,r){if(x(r)){var i=k(e);Q(i,(function(e){e.style[n]||!t.schema.isValid(e.nodeName.toLowerCase(),n)?j.setStyle(e,n,r):j.setAttrib(e,n,""+r)}))}},L=function(e,t,n){F(e,"width",t);F(e,"height",n)},M=function(e){var a,y,v,C;a=e.screenX-s;y=e.screenY-c;f=a*o[2]+d;g=y*o[3]+p;f=f<5?5:f;g=g<5?5:g;if((_(n)||N(n))&&!1!==Tp(t)?!Tg.modifierPressed(e):Tg.modifierPressed(e))if(T(a)>T(y)){g=S(f*h);f=S(g/h)}else{f=S(g/h);g=S(f*h)}L(r,f,g);v=(v=o.startPos.x+a)>0?v:0;C=(C=o.startPos.y+y)>0?C:0;j.setStyles(i,{left:v,top:C,display:"block"});i.innerHTML=f+" &times; "+g;o[2]<0&&r.clientWidth<=f&&j.setStyle(r,"left",l+(d-f));o[3]<0&&r.clientHeight<=g&&j.setStyle(r,"top",u+(p-g));(a=I.scrollWidth-b)+(y=I.scrollHeight-O)!==0&&j.setStyles(i,{left:v-a,top:C-y});if(!m){gg(t,n,d,p,"corner-"+o.name);m=!0}},B=function(){var e=m;m=!1;if(e){F(n,"width",f);F(n,"height",g)}j.unbind(C,"mousemove",M);j.unbind(C,"mouseup",B);if(E!==C){j.unbind(E,"mousemove",M);j.unbind(E,"mouseup",B)}j.remove(r);j.remove(i);j.remove(a);U(n);if(e){bg(t,n,f,g,"corner-"+o.name);j.setAttrib(n,"style",j.getAttrib(n,"style"))}t.nodeChanged()},U=function(e){G();var l=j.getPos(e,I),u=l.x,m=l.y,x=e.getBoundingClientRect(),T=x.width||x.right-x.left,S=x.height||x.bottom-x.top;if(n!==e){V();n=e;f=g=0}var _=t.fire("ObjectSelected",{target:e}),N=j.getAttrib(n,y,"1");P(e)&&!_.isDefaultPrevented()?v(w,(function(e,t){var l,f=function(l){var f=k(n)[0];s=l.screenX;c=l.screenY;d=f.clientWidth;p=f.clientHeight;h=p/d;(o=e).name=t;o.startPos={x:T*e[0]+u,y:S*e[1]+m};b=I.scrollWidth;O=I.scrollHeight;a=j.add(I,"div",{class:"mce-resize-backdrop","data-mce-bogus":"all"});j.setStyles(a,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"});r=R(n);j.addClass(r,"mce-clonedresizable");j.setAttrib(r,"data-mce-bogus","all");r.contentEditable="false";j.setStyles(r,{left:u,top:m,margin:0});L(r,T,S);r.removeAttribute(y);I.appendChild(r);j.bind(C,"mousemove",M);j.bind(C,"mouseup",B);if(E!==C){j.bind(E,"mousemove",M);j.bind(E,"mouseup",B)}i=j.add(I,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},d+" &times; "+p)};(l=j.get("mceResizeHandle"+t))&&j.remove(l);l=j.add(I,"div",{id:"mceResizeHandle"+t,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+t+"-resize; margin:0; padding:0"});11===Qt.ie&&(l.contentEditable=!1);j.bind(l,"mousedown",(function(e){e.stopImmediatePropagation();e.preventDefault();f(e)}));e.elm=l;j.setStyles(l,{left:T*e[0]+u-l.offsetWidth/2,top:S*e[1]+m-l.offsetHeight/2})})):V();j.getAttrib(n,y)||n.setAttribute(y,N)},V=function(){G();n&&n.removeAttribute(y);ve(w,(function(e,t){var n=j.get("mceResizeHandle"+t);if(n){j.unbind(n);j.remove(n)}}))},H=function(n){var r,i=function(e,t){if(e)do{if(e===t)return!0}while(e=e.parentNode)};if(!m&&!t.removed){v(j.select("img[data-mce-selected],hr[data-mce-selected]"),(function(e){e.removeAttribute(y)}));r="mousedown"===n.type?n.target:e.getNode();if(i(r=j.$(r).closest("table,img,figure.image,hr,video,span.mce-preview-object")[0],I)){W();if(i(e.getStart(!0),r)&&i(e.getEnd(!0),r)){U(r);return}}V()}},q=function(e){return Sg(lg(t.getBody(),e))},G=function(){ve(w,(function(e){if(e.elm){j.unbind(e.elm);delete e.elm}}))},W=function(){try{t.getDoc().execCommand("enableObjectResizing",!1,"false")}catch(e){}};t.on("init",(function(){W();if(Qt.browser.isIE()||Qt.browser.isEdge()){t.on("mousedown click",(function(e){var n=e.target,r=n.nodeName;if(!m&&/^(TABLE|IMG|HR)$/.test(r)&&!q(n)){2!==e.button&&t.selection.select(n,"TABLE"===r);"mousedown"===e.type&&t.nodeChanged()}}));var e=function(e){var n=function(e){vo.setEditorTimeout(t,(function(){return t.selection.select(e)}))};if(q(e.target)||Qr(e.target)){e.preventDefault();n(e.target)}else if(/^(TABLE|IMG|HR)$/.test(e.target.nodeName)){e.preventDefault();"IMG"===e.target.tagName&&n(e.target)}};j.bind(I,"mscontrolselect",e);t.on("remove",(function(){return j.unbind(I,"mscontrolselect",e)}))}var r=vo.throttle((function(e){t.composing||H(e)}));t.on("NodeChange ResizeEditor ResizeWindow ResizeContent drop",r);t.on("keyup compositionend",(function(e){n&&"TABLE"===n.nodeName&&r(e)}));t.on("hide blur",V);t.on("contextmenu longpress",D,!0)}));t.on("remove",G);return{isResizable:P,showResizeRect:U,hideResizeRect:V,updateResizeRect:H,destroy:function(){n=r=a=null}}},wg=function(e){return Yr(e)||Xr(e)},_g=function(e,t,n){for(;e&&e!==t;){if(n(e))return e;e=e.parentNode}return null},Ng=function(e,t,n){var r,i=n.elementFromPoint(e,t),o=n.body.createTextRange();i&&"HTML"!==i.tagName||(i=n.body);o.moveToElementText(i);if((r=(r=on.toArray(o.getClientRects())).sort((function(e,n){return(e=Math.abs(Math.max(e.top-t,e.bottom-t)))-(n=Math.abs(Math.max(n.top-t,n.bottom-t)))}))).length>0){t=(r[0].bottom+r[0].top)/2;try{o.moveToPoint(e,t);o.collapse(!0);return o}catch(e){}}return null},Ag=function(e,t){var n=e&&e.parentElement?e.parentElement():null;return Xr(_g(n,t,wg))?null:e},Dg=function(e,t,n){var r,i,o=n;if(o.caretPositionFromPoint){if(i=o.caretPositionFromPoint(e,t)){(r=n.createRange()).setStart(i.offsetNode,i.offset);r.collapse(!0)}}else if(o.caretRangeFromPoint)r=o.caretRangeFromPoint(e,t);else if(o.body.createTextRange){r=o.body.createTextRange();try{r.moveToPoint(e,t);r.collapse(!0)}catch(i){r=Ng(e,t,n)}return Ag(r,n.body)}return r},kg=function(e,t){return e&&t&&e.startContainer===t.startContainer&&e.startOffset===t.startOffset&&e.endContainer===t.endContainer&&e.endOffset===t.endOffset},Pg=function(e,t,n){for(;e&&e!==t;){if(n(e))return e;e=e.parentNode}return null},Rg=function(e,t,n){return null!==Pg(e,t,n)},Fg=function(e,t,n){return Rg(e,t,(function(e){return e.nodeName===n}))},Lg=function(e){return e&&"TABLE"===e.nodeName},Mg=function(e){return e&&/^(TD|TH|CAPTION)$/.test(e.nodeName)},Bg=function(e,t){return ea(e)&&!1===Rg(e,t,Tm)},Ug=function(e,t,n){for(var r=new Eo(t,e.getParent(t.parentNode,e.isBlock)||e.getRoot());t=r[n?"prev":"next"]();)if($r(t))return!0},Vg=function(e,t){return e.previousSibling&&e.previousSibling.nodeName===t},Hg=function(e,t){for(;t&&t!==e;){if(Xr(t))return!0;t=t.parentNode}return!1},qg=function(e,t,n,r,i){var o,a,s=e.getRoot(),c=e.schema.getNonEmptyElements(),l=e.getParent(i.parentNode,e.isBlock)||s;if(r&&$r(i)&&t&&e.isEmpty(l))return q.some(id(i.parentNode,e.nodeIndex(i)));for(var u=new Eo(i,l);a=u[r?"prev":"next"]();){if("false"===e.getContentEditableParent(a)||Bg(a,s))return q.none();if(qr(a)&&a.nodeValue.length>0)return!1===Fg(a,s,"A")?q.some(id(a,r?a.nodeValue.length:0)):q.none();if(e.isBlock(a)||c[a.nodeName.toLowerCase()])return q.none();o=a}return n&&o?q.some(id(o,0)):q.none()},Gg=function(e,t,n,r){var i,o,a,s,c=e.getRoot(),l=!1;i=r[(n?"start":"end")+"Container"];o=r[(n?"start":"end")+"Offset"];var u=kr(i)&&o===i.childNodes.length,d=e.schema.getNonEmptyElements();s=n;if(ea(i))return q.none();kr(i)&&o>i.childNodes.length-1&&(s=!1);if(Wr(i)){i=c;o=0}if(i===c){if(s&&(a=i.childNodes[o>0?o-1:0])){if(ea(a))return q.none();if(d[a.nodeName]||Lg(a))return q.none()}if(i.hasChildNodes()){o=Math.min(!s&&o>0?o-1:o,i.childNodes.length-1);i=i.childNodes[o];o=qr(i)&&u?i.data.length:0;if(!t&&i===c.lastChild&&Lg(i))return q.none();if(Hg(c,i)||ea(i))return q.none();if(i.hasChildNodes()&&!1===Lg(i)){a=i;var p=new Eo(i,c);do{if(Xr(a)||ea(a)){l=!1;break}if(qr(a)&&a.nodeValue.length>0){o=s?0:a.nodeValue.length;i=a;l=!0;break}if(d[a.nodeName.toLowerCase()]&&!Mg(a)){o=e.nodeIndex(a);i=a.parentNode;s||o++;l=!0;break}}while(a=s?p.next():p.prev())}}}if(t){qr(i)&&0===o&&qg(e,u,t,!0,i).each((function(e){i=e.container();o=e.offset();l=!0}));if(kr(i)){(a=i.childNodes[o])||(a=i.childNodes[o-1]);!a||!$r(a)||Vg(a,"A")||Ug(e,a,!1)||Ug(e,a,!0)||qg(e,u,t,!0,a).each((function(e){i=e.container();o=e.offset();l=!0}))}}s&&!t&&qr(i)&&o===i.nodeValue.length&&qg(e,u,t,!1,i).each((function(e){i=e.container();o=e.offset();l=!0}));return l?q.some(id(i,o)):q.none()},Wg=function(e,t){var n=t.collapsed,r=t.cloneRange(),i=id.fromRangeStart(t);Gg(e,n,!0,r).each((function(e){n&&id.isAbove(i,e)||r.setStart(e.container(),e.offset())}));n||Gg(e,n,!1,r).each((function(e){r.setEnd(e.container(),e.offset())}));n&&r.collapse(!0);return kg(t,r)?q.none():q.some(r)},zg=function(e,t){return e.splitText(t)},$g=function(e){var t=e.startContainer,n=e.startOffset,r=e.endContainer,i=e.endOffset;if(t===r&&qr(t)){if(n>0&&n<t.nodeValue.length){t=(r=zg(t,n)).previousSibling;if(i>n){t=r=zg(r,i-=n).previousSibling;i=r.nodeValue.length;n=0}else i=0}}else{if(qr(t)&&n>0&&n<t.nodeValue.length){t=zg(t,n);n=0}qr(r)&&i>0&&i<r.nodeValue.length&&(i=(r=zg(r,i).previousSibling).nodeValue.length)}return{startContainer:t,startOffset:n,endContainer:r,endOffset:i}},Kg=function(e){return{walk:function(t,n){return Rf(e,t,n)},split:$g,normalize:function(t){return Wg(e,t).fold(L,(function(e){t.setStart(e.startContainer,e.startOffset);t.setEnd(e.endContainer,e.endOffset);return!0}))}}};Kg.compareRanges=kg;Kg.getCaretRangeFromPoint=Dg;Kg.getSelectedNode=Au;Kg.getNode=Du;var Yg,Xg=function(e,t){var n=function(n){var r=t(n);if(r<=0||null===r){var i=fi(n,e);return parseFloat(i)||0}return r},r=function(e,t){return re(t,(function(t,n){var r=fi(e,n),i=void 0===r?0:parseInt(r,10);return isNaN(i)?t:t+i}),0)},i=function(e,t,n){var i=r(e,n);return t>i?t-i:0};return{set:function(t,n){if(!T(n)&&!n.match(/^[0-9]+$/))throw new Error(e+".set accepts only positive integer values. Value was "+n);var r=t.dom;ii(r)&&(r.style[e]=n+"px")},get:n,getOuter:n,aggregate:r,max:i}}("height",(function(e){var t=e.dom;return Or(e)?t.getBoundingClientRect().height:t.offsetHeight})),Jg=function(e){return Xg.get(e)},Qg=function(e,t){return e.view(t).fold(_([]),(function(t){var n=e.owner(t),r=Qg(e,n);return[t].concat(r)}))},Zg=function(e,t){var n=t.owner(e);return Qg(t,n)},eb=function(e){var t;return(e.dom===document?q.none():q.from(null===(t=e.dom.defaultView)||void 0===t?void 0:t.frameElement)).map(un.fromDom)},tb=function(e){return Ln(e)},nb=Object.freeze({__proto__:null,view:eb,owner:tb}),rb=function(e){var t=un.fromDom(document),n=Tr(t),r=Zg(e,nb),i=Er(e),o=ne(r,(function(e,t){var n=Er(t);return{left:e.left+n.left,top:e.top+n.top}}),{left:0,top:0});return jr(o.left+i.left+n.left,o.top+i.top+n.top)},ib=function(e){return"textarea"===In(e)},ob=function(e,t){return e.fire("ScrollIntoView",t).isDefaultPrevented()},ab=function(e,t){e.fire("AfterScrollIntoView",t)},sb=function(e,t){var n=$n(e);if(0===n.length||ib(e))return{element:e,offset:t};if(t<n.length&&!ib(n[t]))return{element:n[t],offset:0};var r=n[n.length-1];return ib(r)?{element:e,offset:t}:"img"===In(r)?{element:r,offset:1}:Dn(r)?{element:r,offset:eg(r).length}:{element:r,offset:$n(r).length}},cb=function(e,t){var n=xr(e),r=Jg(e);return{element:e,bottom:n.top+r,height:r,pos:n,cleanup:t}},lb=function(e,t){var n=sb(e,t),r=un.fromHtml('<span data-mce-bogus="all" style="display: inline-block;">'+$o+"</span>");cr(n.element,r);return cb(r,(function(){return gr(r)}))},ub=function(e){return cb(un.fromDom(e),S)},db=function(e,t,n,r){fb(e,(function(i,o){return hb(e,t,n,r)}),n)},pb=function(e,t,n,r,i){var o={elm:r.element.dom,alignToTop:i};if(!ob(e,o)){n(t,Tr(t).top,r,i);ab(e,o)}},hb=function(e,t,n,r){var i=un.fromDom(e.getBody()),o=un.fromDom(e.getDoc());yi(i);var a=lb(un.fromDom(n.startContainer),n.startOffset);pb(e,o,t,a,r);a.cleanup()},mb=function(e,t,n,r){var i=un.fromDom(e.getDoc());pb(e,i,n,ub(t),r)},fb=function(e,t,n){var r=n.startContainer,i=n.startOffset,o=n.endContainer,a=n.endOffset;t(un.fromDom(r),un.fromDom(o));var s=e.dom.createRng();s.setStart(r,i);s.setEnd(o,a);e.selection.setRng(n)},gb=function(e,t,n,r){var i=e.pos;if(n)Sr(i.left,i.top,r);else{var o=i.top-t+e.height;Sr(i.left,o,r)}},bb=function(e,t,n,r,i){var o=n+t,a=r.pos.top,s=r.bottom,c=s-a>=n;if(a<t)gb(r,n,!1!==i,e);else if(a>o){gb(r,n,c?!1!==i:!0===i,e)}else s>o&&!c&&gb(r,n,!0===i,e)},Ob=function(e,t,n,r){var i=e.dom.defaultView.innerHeight;bb(e,t,i,n,r)},yb=function(e,t,n,r){var i=e.dom.defaultView.innerHeight;bb(e,t,i,n,r);var o=rb(n.element),a=Nr(window);o.top<a.y?Ir(n.element,!1!==r):o.top>a.bottom&&Ir(n.element,!0===r)},jb=function(e,t,n){return db(e,Ob,t,n)},vb=function(e,t,n){return mb(e,t,Ob,n)},Cb=function(e,t,n){return db(e,yb,t,n)},xb=function(e,t,n){return mb(e,t,yb,n)},Eb=function(e,t,n){(e.inline?vb:xb)(e,t,n)},Tb=function(e,t,n){(e.inline?jb:Cb)(e,t,n)},Sb=function(){return un.fromDom(document)},Ib=function(e){return e.dom.focus()},wb=function(e){var t=nr(e).dom;return e.dom===t.activeElement},_b=function(e){void 0===e&&(e=Sb());return q.from(e.dom.activeElement).map(un.fromDom)},Nb=function(e){return _b(nr(e)).filter((function(t){return e.dom.contains(t.dom)}))},Ab={create:function(e,t,n,r){return{start:e,soffset:t,finish:n,foffset:r}}},Db=Ui.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),kb=function(e,t,n,r){return e.fold(t,n,r)},Pb=function(e){return e.fold(N,N,N)},Rb={before:Db.before,on:Db.on,after:Db.after,cata:kb,getStart:Pb},Fb=Ui.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),Lb=function(e){return Fb.exact(e.start,e.soffset,e.finish,e.foffset)},Mb=function(e){return e.match({domRange:function(e){return un.fromDom(e.startContainer)},relative:function(e,t){return Rb.getStart(e)},exact:function(e,t,n,r){return e}})},Bb={domRange:Fb.domRange,relative:Fb.relative,exact:Fb.exact,exactFromRange:Lb,getWin:function(e){var t=Mb(e);return Bn(t)},range:Ab.create},Ub=qt().browser,Vb=function(e,t){var n=Dn(t)?eg(t).length:$n(t).length+1;return e>n?n:e<0?0:e},Hb=function(e){return Bb.range(e.start,Vb(e.soffset,e.start),e.finish,Vb(e.foffset,e.finish))},qb=function(e,t){return!Dr(t.dom)&&(Sn(e,t)||xn(e,t))},Gb=function(e){return function(t){return qb(e,t.start)&&qb(e,t.finish)}},Wb=function(e){return!0===e.inline||Ub.isIE()},zb=function(e){return Bb.range(un.fromDom(e.startContainer),e.startOffset,un.fromDom(e.endContainer),e.endOffset)},$b=function(e){var t=e.getSelection();return(t&&0!==t.rangeCount?q.from(t.getRangeAt(0)):q.none()).map(zb)},Kb=function(e){var t=Bn(e);return $b(t.dom).filter(Gb(e))},Yb=function(e,t){return q.from(t).filter(Gb(e)).map(Hb)},Xb=function(e){var t=document.createRange();try{t.setStart(e.start.dom,e.soffset);t.setEnd(e.finish.dom,e.foffset);return q.some(t)}catch(e){return q.none()}},Jb=function(e){var t=Wb(e)?Kb(un.fromDom(e.getBody())):q.none();e.bookmark=t.isSome()?t:e.bookmark},Qb=function(e,t){var n=un.fromDom(e.getBody()),r=(Wb(e)?q.from(t):q.none()).map(zb).filter(Gb(n));e.bookmark=r.isSome()?r:e.bookmark},Zb=function(e){return(e.bookmark?e.bookmark:q.none()).bind((function(t){return Yb(un.fromDom(e.getBody()),t)})).bind(Xb)},eO=function(e){Zb(e).each((function(t){return e.selection.setRng(t)}))},tO={isEditorUIElement:function(e){var t=e.className.toString();return-1!==t.indexOf("tox-")||-1!==t.indexOf("mce-")}},nO=function(e){return"nodechange"===e.type&&e.selectionChange},rO=function(e,t){var n=function(){t.throttle()};jl.DOM.bind(document,"mouseup",n);e.on("remove",(function(){jl.DOM.unbind(document,"mouseup",n)}))},iO=function(e){e.on("focusout",(function(){Jb(e)}))},oO=function(e,t){e.on("mouseup touchend",(function(e){t.throttle()}))},aO=function(e,t){qt().browser.isIE()?iO(e):oO(e,t);e.on("keyup NodeChange",(function(t){nO(t)||Jb(e)}))},sO=function(e){var t=Bl((function(){Jb(e)}),0);e.on("init",(function(){e.inline&&rO(e,t);aO(e,t)}));e.on("remove",(function(){t.cancel()}))},cO=jl.DOM,lO=function(e){return tO.isEditorUIElement(e)},uO=function(e){var t=e.classList;return void 0!==t&&(t.contains("tox-edit-area")||t.contains("tox-edit-area__iframe")||t.contains("mce-content-body"))},dO=function(e,t){var n=Rp(e);return null!==cO.getParent(t,(function(t){return lO(t)||!!n&&e.dom.is(t,n)}))},pO=function(e){try{var t=nr(un.fromDom(e.getElement()));return _b(t).fold((function(){return document.body}),(function(e){return e.dom}))}catch(e){return document.body}},hO=function(e,t){var n=t.editor;sO(n);n.on("focusin",(function(){var t=e.focusedEditor;if(t!==n){t&&t.fire("blur",{focusedEditor:n});e.setActive(n);e.focusedEditor=n;n.fire("focus",{blurredEditor:t});n.focus(!0)}}));n.on("focusout",(function(){vo.setEditorTimeout(n,(function(){var t=e.focusedEditor;if(!dO(n,pO(n))&&t===n){n.fire("blur",{focusedEditor:null});e.focusedEditor=null}}))}));if(!Yg){Yg=function(t){var n=e.activeEditor;n&&ar(t).each((function(t){if(t.ownerDocument===document&&t!==document.body&&!dO(n,t)&&e.focusedEditor===n){n.fire("blur",{focusedEditor:null});e.focusedEditor=null}}))};cO.bind(document,"focusin",Yg)}},mO=function(e,t){e.focusedEditor===t.editor&&(e.focusedEditor=null);if(!e.activeEditor){cO.unbind(document,"focusin",Yg);Yg=null}},fO=function(e){e.on("AddEditor",D(hO,e));e.on("RemoveEditor",D(mO,e))},gO=function(e,t){return e.dom.getParent(t,(function(t){return"true"===e.dom.getContentEditable(t)}))},bO=function(e){return e.collapsed?q.from(Du(e.startContainer,e.startOffset)).map(un.fromDom):q.none()},OO=function(e,t){return bO(t).bind((function(t){return Vo(t)?q.some(t):!1===Sn(e,t)?q.some(e):q.none()}))},yO=function(e,t){OO(un.fromDom(e.getBody()),t).bind((function(e){return Cm(e.dom)})).fold((function(){e.selection.normalize()}),(function(t){return e.selection.setRng(t.toRange())}))},jO=function(e){if(e.setActive)try{e.setActive()}catch(t){e.focus()}else e.focus()},vO=function(e){return wb(e)||Nb(e).isSome()},CO=function(e){return e.iframeElement&&wb(un.fromDom(e.iframeElement))},xO=function(e){var t=e.getBody();return t&&vO(un.fromDom(t))},EO=function(e){var t=nr(un.fromDom(e.getElement()));return _b(t).filter((function(t){return!uO(t.dom)&&dO(e,t.dom)})).isSome()},TO=function(e){return e.inline?xO(e):CO(e)},SO=function(e){return TO(e)||EO(e)},IO=function(e){var t=e.selection,n=e.getBody(),r=t.getRng();e.quirks.refreshContentEditable();void 0!==e.bookmark&&!1===TO(e)&&Zb(e).each((function(t){e.selection.setRng(t);r=t}));var i=gO(e,t.getNode());if(e.$.contains(n,i)){jO(i);yO(e,r);wO(e)}else{if(!e.inline){Qt.opera||jO(n);e.getWin().focus()}if(Qt.gecko||e.inline){jO(n);yO(e,r)}wO(e)}},wO=function(e){return e.editorManager.setActive(e)},_O=function(e,t){e.removed||(t?wO(e):IO(e))},NO=function(e,t,n,r,i){var o=n?t.startContainer:t.endContainer,a=n?t.startOffset:t.endOffset;return q.from(o).map(un.fromDom).map((function(e){return r&&t.collapsed?e:Kn(e,i(e,a)).getOr(e)})).bind((function(e){return An(e)?q.some(e):Un(e).filter(An)})).map((function(e){return e.dom})).getOr(e)},AO=function(e,t,n){return NO(e,t,!0,n,(function(e,t){return Math.min(Jn(e),t)}))},DO=function(e,t,n){return NO(e,t,!1,n,(function(e,t){return t>0?t-1:t}))},kO=function(e,t){for(var n=e;e&&qr(e)&&0===e.length;)e=t?e.nextSibling:e.previousSibling;return e||n},PO=function(e,t){var n,r,i;if(!t)return e;r=t.startContainer;i=t.endContainer;var o=t.startOffset,a=t.endOffset;n=t.commonAncestorContainer;if(!t.collapsed){r===i&&a-o<2&&r.hasChildNodes()&&(n=r.childNodes[o]);if(3===r.nodeType&&3===i.nodeType){r=r.length===o?kO(r.nextSibling,!0):r.parentNode;i=0===a?kO(i.previousSibling,!1):i.parentNode;if(r&&r===i)return r}}return n&&3===n.nodeType?n.parentNode:n},RO=function(e,t,n,r){var i,o=[],a=e.getRoot();n=e.getParent(n||AO(a,t,t.collapsed),e.isBlock);r=e.getParent(r||DO(a,t,t.collapsed),e.isBlock);n&&n!==a&&o.push(n);if(n&&r&&n!==r){i=n;for(var s=new Eo(n,a);(i=s.next())&&i!==r;)e.isBlock(i)&&o.push(i)}r&&n!==r&&r!==a&&o.push(r);return o},FO=function(e,t,n){return q.from(t).map((function(t){var r=e.nodeIndex(t),i=e.createRng();i.setStart(t.parentNode,r);i.setEnd(t.parentNode,r+1);if(n){Yf(e,i,t,!0);Yf(e,i,t,!1)}return i}))},LO=function(e,t){return J(t,(function(t){var n=e.fire("GetSelectionRange",{range:t});return n.range!==t?n.range:t}))},MO={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},BO=function(e,t,n){var r=n?"lastChild":"firstChild",i=n?"prev":"next";if(e[r])return e[r];if(e!==t){var o=e[i];if(o)return o;for(var a=e.parent;a&&a!==t;a=a.parent)if(o=a[i])return o}},UO=function(e){if(!wa(e.value))return!1;var t=e.parent;return!t||"span"===t.name&&!t.attr("style")||!/^[ ]+$/.test(e.value)},VO=function(e){var t="a"===e.name&&!e.attr("href")&&e.attr("id");return e.attr("name")||e.attr("id")&&!e.firstChild||e.attr("data-mce-bookmark")||t},HO=function(){function e(e,t){this.name=e;this.type=t;if(1===t){this.attributes=[];this.attributes.map={}}}e.create=function(t,n){var r=new e(t,MO[t]||1);n&&ve(n,(function(e,t){r.attr(t,e)}));return r};e.prototype.replace=function(e){var t=this;e.parent&&e.remove();t.insert(e,t);t.remove();return t};e.prototype.attr=function(e,t){var n,r=this;if("string"!=typeof e){null!=e&&ve(e,(function(e,t){r.attr(t,e)}));return r}if(n=r.attributes){if(void 0!==t){if(null===t){if(e in n.map){delete n.map[e];for(var i=n.length;i--;)if(n[i].name===e){n.splice(i,1);return r}}return r}if(e in n.map){for(i=n.length;i--;)if(n[i].name===e){n[i].value=t;break}}else n.push({name:e,value:t});n.map[e]=t;return r}return n.map[e]}};e.prototype.clone=function(){var t,n=this,r=new e(n.name,n.type);if(t=n.attributes){var i=[];i.map={};for(var o=0,a=t.length;o<a;o++){var s=t[o];if("id"!==s.name){i[i.length]={name:s.name,value:s.value};i.map[s.name]=s.value}}r.attributes=i}r.value=n.value;r.shortEnded=n.shortEnded;return r};e.prototype.wrap=function(e){var t=this;t.parent.insert(e,t);e.append(t);return t};e.prototype.unwrap=function(){for(var e=this,t=e.firstChild;t;){var n=t.next;e.insert(t,e,!0);t=n}e.remove()};e.prototype.remove=function(){var e=this,t=e.parent,n=e.next,r=e.prev;if(t){if(t.firstChild===e){t.firstChild=n;n&&(n.prev=null)}else r.next=n;if(t.lastChild===e){t.lastChild=r;r&&(r.next=null)}else n.prev=r;e.parent=e.next=e.prev=null}return e};e.prototype.append=function(e){var t=this;e.parent&&e.remove();var n=t.lastChild;if(n){n.next=e;e.prev=n;t.lastChild=e}else t.lastChild=t.firstChild=e;e.parent=t;return e};e.prototype.insert=function(e,t,n){e.parent&&e.remove();var r=t.parent||this;if(n){t===r.firstChild?r.firstChild=e:t.prev.next=e;e.prev=t.prev;e.next=t;t.prev=e}else{t===r.lastChild?r.lastChild=e:t.next.prev=e;e.next=t.next;e.prev=t;t.next=e}e.parent=r;return e};e.prototype.getAll=function(e){for(var t=this,n=[],r=t.firstChild;r;r=BO(r,t))r.name===e&&n.push(r);return n};e.prototype.children=function(){for(var e=[],t=this.firstChild;t;t=t.next)e.push(t);return e};e.prototype.empty=function(){var e=this;if(e.firstChild){for(var t=[],n=e.firstChild;n;n=BO(n,e))t.push(n);for(var r=t.length;r--;){(n=t[r]).parent=n.firstChild=n.lastChild=n.next=n.prev=null}}e.firstChild=e.lastChild=null;return e};e.prototype.isEmpty=function(e,t,n){void 0===t&&(t={});var r=this,i=r.firstChild;if(VO(r))return!1;if(i)do{if(1===i.type){if(i.attr("data-mce-bogus"))continue;if(e[i.name])return!1;if(VO(i))return!1}if(8===i.type)return!1;if(3===i.type&&!UO(i))return!1;if(3===i.type&&i.parent&&t[i.parent.name]&&wa(i.value))return!1;if(n&&n(i))return!1}while(i=BO(i,r));return!0};e.prototype.walk=function(e){return BO(this,null,e)};return e}(),qO=function(e){for(var t,n=/data:[^;<"'\s]+;base64,([a-z0-9\+\/=\s]+)/gi,r=[],i={},o=du("img"),a=0,s=0;t=n.exec(e);){var c=t[0],l=o+"_"+s++;i[l]=c;a<t.index&&r.push(e.substr(a,t.index-a));r.push(l);a=t.index+c.length}var u=new RegExp(o+"_[0-9]+","g");if(0===a)return{prefix:o,uris:i,html:e,re:u};a<e.length&&r.push(e.substr(a));return{prefix:o,uris:i,html:r.join(""),re:u}},GO=function(e,t){return e.replace(t.re,(function(e){return Ne(t.uris,e).getOr(e)}))},WO=function(e){var t=/data:([^;]+);base64,([a-z0-9\+\/=\s]+)/i.exec(e);return t?q.some({type:t[1],data:decodeURIComponent(t[2])}):q.none()},zO=on.each,$O=on.trim,KO="source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),YO={ftp:21,http:80,https:443,mailto:25},XO=["img","video"],JO=function(e,t){return x(e)?!e:!x(t)||!Y(XO,t)},QO=function(e,t,n){return!e.allow_html_data_urls&&(/^data:image\//i.test(t)?JO(e.allow_svg_data_urls,n)&&/^data:image\/svg\+xml/i.test(t):/^data:/i.test(t))},ZO=function(){function e(t,n){t=$O(t);this.settings=n||{};var r=this.settings.base_uri,i=this;if(/^([\w\-]+):([^\/]{2})/i.test(t)||/^\s*#/.test(t))i.source=t;else{var o=0===t.indexOf("//");0!==t.indexOf("/")||o||(t=(r&&r.protocol||"http")+"://mce_host"+t);if(!/^[\w\-]*:?\/\//.test(t)){var a=this.settings.base_uri?this.settings.base_uri.path:new e(document.location.href).directory;if(this.settings.base_uri&&""==this.settings.base_uri.protocol)t="//mce_host"+i.toAbsPath(a,t);else{var s=/([^#?]*)([#?]?.*)/.exec(t);t=(r&&r.protocol||"http")+"://mce_host"+i.toAbsPath(a,s[1])+s[2]}}t=t.replace(/@@/g,"(mce_at)");var c=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(t);zO(KO,(function(e,t){var n=c[t];n&&(n=n.replace(/\(mce_at\)/g,"@@"));i[e]=n}));if(r){i.protocol||(i.protocol=r.protocol);i.userInfo||(i.userInfo=r.userInfo);i.port||"mce_host"!==i.host||(i.port=r.port);i.host&&"mce_host"!==i.host||(i.host=r.host);i.source=""}o&&(i.protocol="")}}e.parseDataUri=function(e){var t,n=decodeURIComponent(e).split(","),r=/data:([^;]+)/.exec(n[0]);r&&(t=r[1]);return{type:t,data:n[1]}};e.isDomSafe=function(e,t,n){void 0===n&&(n={});if(n.allow_script_urls)return!0;var r=ss.decode(e).replace(/[\s\u0000-\u001F]+/g,"");try{r=decodeURIComponent(r)}catch(e){r=unescape(r)}return!/((java|vb)script|mhtml):/i.test(r)&&!QO(n,r,t)};e.getDocumentBaseUrl=function(e){var t;t=0!==e.protocol.indexOf("http")&&"file:"!==e.protocol?e.href:e.protocol+"//"+e.host+e.pathname;if(/^[^:]+:\/\/\/?[^\/]+\//.test(t)){t=t.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,"");/[\/\\]$/.test(t)||(t+="/")}return t};e.prototype.setPath=function(e){var t=/^(.*?)\/?(\w+)?$/.exec(e);this.path=t[0];this.directory=t[1];this.file=t[2];this.source="";this.getURI()};e.prototype.toRelative=function(t){var n;if("./"===t)return t;var r=new e(t,{base_uri:this});if("mce_host"!==r.host&&this.host!==r.host&&r.host||this.port!==r.port||this.protocol!==r.protocol&&""!==r.protocol)return r.getURI();var i=this.getURI(),o=r.getURI();if(i===o||"/"===i.charAt(i.length-1)&&i.substr(0,i.length-1)===o)return i;n=this.toRelPath(this.path,r.path);r.query&&(n+="?"+r.query);r.anchor&&(n+="#"+r.anchor);return n};e.prototype.toAbsolute=function(t,n){var r=new e(t,{base_uri:this});return r.getURI(n&&this.isSameOrigin(r))};e.prototype.isSameOrigin=function(e){if(this.host==e.host&&this.protocol==e.protocol){if(this.port==e.port)return!0;var t=YO[this.protocol];if(t&&(this.port||t)==(e.port||t))return!0}return!1};e.prototype.toRelPath=function(e,t){var n,r,i=0,o="",a=e.substring(0,e.lastIndexOf("/")).split("/"),s=t.split("/");if(a.length>=s.length)for(n=0,r=a.length;n<r;n++)if(n>=s.length||a[n]!==s[n]){i=n+1;break}if(a.length<s.length)for(n=0,r=s.length;n<r;n++)if(n>=a.length||a[n]!==s[n]){i=n+1;break}if(1===i)return t;for(n=0,r=a.length-(i-1);n<r;n++)o+="../";for(n=i-1,r=s.length;n<r;n++)o+=n!==i-1?"/"+s[n]:s[n];return o};e.prototype.toAbsPath=function(e,t){var n,r,i=0,o=[],a=/\/$/.test(t)?"/":"",s=e.split("/"),c=t.split("/");zO(s,(function(e){e&&o.push(e)}));s=o;for(n=c.length-1,o=[];n>=0;n--)0!==c[n].length&&"."!==c[n]&&(".."!==c[n]?i>0?i--:o.push(c[n]):i++);0!==(r=(n=s.length-i)<=0?ue(o).join("/"):s.slice(0,n).join("/")+"/"+ue(o).join("/")).indexOf("/")&&(r="/"+r);a&&r.lastIndexOf("/")!==r.length-1&&(r+=a);return r};e.prototype.getURI=function(e){void 0===e&&(e=!1);var t;if(!this.source||e){t="";if(!e){this.protocol?t+=this.protocol+"://":t+="//";this.userInfo&&(t+=this.userInfo+"@");this.host&&(t+=this.host);this.port&&(t+=":"+this.port)}this.path&&(t+=this.path);this.query&&(t+="?"+this.query);this.anchor&&(t+="#"+this.anchor);this.source=t}return this.source};return e}(),ey=on.makeMap("button,fieldset,form,iframe,img,image,input,object,output,select,textarea"),ty=function(e){return 0===e.indexOf("data-")||0===e.indexOf("aria-")},ny=ze((function(){return document.implementation.createHTMLDocument("parser")})),ry=function(e,t,n){for(var r=/<([!?\/])?([A-Za-z0-9\-_:.]+)/g,i=/(?:\s(?:[^'">]+(?:"[^"]*"|'[^']*'))*[^"'>]*(?:"[^">]*|'[^'>]*)?|\s*|\/)>/g,o=e.getShortEndedElements(),a=1,s=n;0!==a;){r.lastIndex=s;for(;;){var c=r.exec(t);if(null===c)return s;if("!"===c[1]){s=ct(c[2],"--")?oy(t,!1,c.index+"!--".length):oy(t,!0,c.index+1);break}i.lastIndex=r.lastIndex;var l=i.exec(t);if(!y(l)&&l.index===r.lastIndex){"/"===c[1]?a-=1:Ae(o,c[2])||(a+=1);s=r.lastIndex+l[0].length;break}}}return s},iy=function(e,t){return/^\s*\[if [\w\W]+\]>.*<!\[endif\](--!?)?>/.test(e.substr(t))},oy=function(e,t,n){void 0===n&&(n=0);var r=e.toLowerCase();if(-1!==r.indexOf("[if ",n)&&iy(r,n)){var i=r.indexOf("[endif]",n);return r.indexOf(">",i)}if(t){var o=r.indexOf(">",n);return-1!==o?o:r.length}var a=/--!?>/g;a.lastIndex=n;var s=a.exec(e);return s?s.index+s[0].length:r.length},ay=function(e,t){var n=e.exec(t);if(n){var r=n[1],i=n[2];return"string"==typeof r&&"data-mce-bogus"===r.toLowerCase()?i:null}return null},sy=function(e,t){void 0===t&&(t=js());e=e||{};var n=ny(),r=n.createElement("form");!1!==e.fix_self_closing&&(e.fix_self_closing=!0);var i=e.comment?e.comment:S,o=e.cdata?e.cdata:S,a=e.text?e.text:S,s=e.start?e.start:S,c=e.end?e.end:S,l=e.pi?e.pi:S,u=e.doctype?e.doctype:S,d=function(d,p){void 0===p&&(p="html");for(var h,m,f,g,b,O,y,j,v,C,x,E,T,S,I,w,_,N,A,D=d.html,k=0,P=[],R=0,F=ss.decode,L=on.makeMap("src,href,data,background,action,formaction,poster,xlink:href"),M="html"===p?0:1,B=function(e){var t,n;t=P.length;for(;t--&&P[t].name!==e;);if(t>=0){for(n=P.length-1;n>=t;n--)(e=P[n]).valid&&c(e.name);P.length=t}},U=function(e,t){return a(GO(e,d),t)},V=function(t){if(""!==t){">"===t.charAt(0)&&(t=" "+t);e.allow_conditional_comments||"[if"!==t.substr(0,3).toLowerCase()||(t=" "+t);i(GO(t,d))}},H=function(e){return GO(e,d)},q=function(e,t){var n=e||"",r=!ct(n,"--"),i=oy(D,r,t);e=D.substr(t,i-t);V(r?n+e:e);return i+1},G=function(t,i,o,a,s){i=i.toLowerCase();o=H(i in Y?i:F(o||a||s||""));if(X&&!j&&!1===ty(i)){var c=S[i];if(!c&&I){for(var l=I.length;l--&&!(c=I[l]).pattern.test(i););-1===l&&(c=null)}if(!c)return;if(c.validValues&&!(o in c.validValues))return}if((!("name"===i||"id"===i)||!(t in ey)||!(o in n)&&!(o in r))&&(!L[i]||ZO.isDomSafe(o,t,e))&&(!j||!(i in L)&&0!==i.indexOf("on"))){g.map[i]=o;g.push({name:i,value:o})}},W=new RegExp("<(?:(?:!--([\\w\\W]*?)--!?>)|(?:!\\[CDATA\\[([\\w\\W]*?)\\]\\]>)|(?:![Dd][Oo][Cc][Tt][Yy][Pp][Ee]([\\w\\W]*?)>)|(?:!(--)?)|(?:\\?([^\\s\\/<>]+) ?([\\w\\W]*?)[?/]>)|(?:\\/([A-Za-z][A-Za-z0-9\\-_\\:\\.]*)>)|(?:([A-Za-z][A-Za-z0-9\\-_:.]*)(\\s(?:[^'\">]+(?:\"[^\"]*\"|'[^']*'))*[^\"'>]*(?:\"[^\">]*|'[^'>]*)?|\\s*|\\/)>))","g"),z=/([\w:\-]+)(?:\s*=\s*(?:(?:\"((?:[^\"])*)\")|(?:\'((?:[^\'])*)\')|([^>\s]+)))?/g,$=t.getShortEndedElements(),K=e.self_closing_elements||t.getSelfClosingElements(),Y=t.getBoolAttrs(),X=e.validate,J=e.remove_internals,Q=e.fix_self_closing,Z=t.getSpecialElements(),ee=D+">";h=W.exec(ee);){var te=h[0];k<h.index&&U(F(D.substr(k,h.index-k)));if(m=h[7]){":"===(m=m.toLowerCase()).charAt(0)&&(m=m.substr(1));B(m)}else if(m=h[8]){if(h.index+te.length>D.length){U(F(D.substr(h.index)));k=h.index+te.length;continue}":"===(m=m.toLowerCase()).charAt(0)&&(m=m.substr(1));v=m in $;Q&&K[m]&&P.length>0&&P[P.length-1].name===m&&B(m);var ne=ay(z,h[9]);if(null!==ne){if("all"===ne){k=ry(t,D,W.lastIndex);W.lastIndex=k;continue}x=!1}if(!X||(C=t.getElementRule(m))){x=!0;if(X){S=C.attributes;I=C.attributePatterns}if(T=h[9]){(j=-1!==T.indexOf("data-mce-type"))&&J&&(x=!1);(g=[]).map={};T.replace(z,(function(e,t,n,r,i){G(m,t,n,r,i);return""}))}else(g=[]).map={};if(X&&!j){w=C.attributesRequired;_=C.attributesDefault;N=C.attributesForced;C.removeEmptyAttrs&&!g.length&&(x=!1);if(N){b=N.length;for(;b--;){y=(E=N[b]).name;"{$uid}"===(A=E.value)&&(A="mce_"+R++);g.map[y]=A;g.push({name:y,value:A})}}if(_){b=_.length;for(;b--;)if(!((y=(E=_[b]).name)in g.map)){"{$uid}"===(A=E.value)&&(A="mce_"+R++);g.map[y]=A;g.push({name:y,value:A})}}if(w){b=w.length;for(;b--&&!(w[b]in g.map););-1===b&&(x=!1)}if(E=g.map["data-mce-bogus"]){if("all"===E){k=ry(t,D,W.lastIndex);W.lastIndex=k;continue}x=!1}}x&&s(m,g,v)}else x=!1;if(f=Z[m]){f.lastIndex=k=h.index+te.length;if(h=f.exec(D)){x&&(O=D.substr(k,h.index-k));k=h.index+h[0].length}else{O=D.substr(k);k=D.length}if(x){O.length>0&&U(O,!0);c(m)}W.lastIndex=k;continue}v||(T&&T.indexOf("/")===T.length-1?x&&c(m):P.push({name:m,valid:x}))}else if(m=h[1])V(m);else if(m=h[2]){if(!(1===M||e.preserve_cdata||P.length>0&&t.isValidChild(P[P.length-1].name,"#cdata"))){k=q("",h.index+2);W.lastIndex=k;continue}o(m)}else if(m=h[3])u(m);else{if((m=h[4])||"<!"===te){k=q(m,h.index+te.length);W.lastIndex=k;continue}if(m=h[5]){if(1!==M){k=q("?",h.index+2);W.lastIndex=k;continue}l(m,h[6])}}k=h.index+te.length}k<D.length&&U(F(D.substr(k)));for(b=P.length-1;b>=0;b--)(m=P[b]).valid&&c(m.name)};return{parse:function(e,t){void 0===t&&(t="html");d(qO(e),t)}}};sy.findEndTag=ry;var cy=function(e,t){var n=new RegExp(["\\s?("+e.join("|")+')="[^"]+"'].join("|"),"gi");return t.replace(n,"")},ly=function(e,t){for(var n,r=/<(\w+) [^>]*data-mce-bogus="all"[^>]*>/g,i=e.schema,o=cy(e.getTempAttrs(),t),a=i.getShortEndedElements();n=r.exec(o);){var s=r.lastIndex,c=n[0].length,l=void 0;l=a[n[1]]?s:sy.findEndTag(i,o,s);o=o.substring(0,s-c)+o.substring(l);r.lastIndex=s-c}return Yo(o)},uy=ly,dy=function(e,t){var n=Xd(e),r=new RegExp("^(<"+n+"[^>]*>(&nbsp;|&#160;|\\s| |<br \\/>|)<\\/"+n+">[\r\n]*|<br \\/>[\r\n]*)$");return t.replace(r,"")},py=function(e,t){return qe(qe({},e),{format:t,get:!0,getInner:!0})},hy=function(e,t,n,r){var i,o=py(t,n),a=t.no_events?o:e.fire("BeforeGetContent",o);i="raw"===a.format?on.trim(uy(e.serializer,r.innerHTML)):"text"===a.format?e.dom.isEmpty(r)?"":Yo(r.innerText||r.textContent):"tree"===a.format?e.serializer.serialize(r,a):dy(e,e.serializer.serialize(r,a));Y(["text","tree"],a.format)||qo(un.fromDom(r))?a.content=i:a.content=on.trim(i);return a.no_events?a.content:e.fire("GetContent",a).content},my=function(e,t,n){return q.from(e.getBody()).fold(_("tree"===t.format?new HO("body",11):""),(function(r){return hy(e,t,n,r)}))},fy=on.each,gy=function(e){return{compare:function(t,n){if(t.nodeName!==n.nodeName)return!1;var r=function(t){var n={};fy(e.getAttribs(t),(function(r){var i=r.nodeName.toLowerCase();0!==i.indexOf("_")&&"style"!==i&&0!==i.indexOf("data-")&&(n[i]=e.getAttrib(t,i))}));return n},i=function(e,t){var n,r;for(r in e)if(Ae(e,r)){if(void 0===(n=t[r]))return!1;if(e[r]!==n)return!1;delete t[r]}for(r in t)if(Ae(t,r))return!1;return!0};return!!i(r(t),r(n))&&(!!i(e.parseStyle(e.getAttrib(t,"style")),e.parseStyle(e.getAttrib(n,"style")))&&(!$m(t)&&!$m(n)))}}},by=on.makeMap,Oy=function(e){var t=[],n=(e=e||{}).indent,r=by(e.indent_before||""),i=by(e.indent_after||""),o=ss.getEncodeFunc(e.entity_encoding||"raw",e.entities),a="html"===e.element_format;return{start:function(e,s,c){var l,u,d,p;n&&r[e]&&t.length>0&&(p=t[t.length-1]).length>0&&"\n"!==p&&t.push("\n");t.push("<",e);if(s)for(l=0,u=s.length;l<u;l++){d=s[l];t.push(" ",d.name,'="',o(d.value,!0),'"')}t[t.length]=!c||a?">":" />";c&&n&&i[e]&&t.length>0&&(p=t[t.length-1]).length>0&&"\n"!==p&&t.push("\n")},end:function(e){var r;t.push("</",e,">");n&&i[e]&&t.length>0&&(r=t[t.length-1]).length>0&&"\n"!==r&&t.push("\n")},text:function(e,n){e.length>0&&(t[t.length]=n?e:o(e))},cdata:function(e){t.push("<![CDATA[",e,"]]>")},comment:function(e){t.push("\x3c!--",e,"--\x3e")},pi:function(e,r){r?t.push("<?",e," ",o(r),"?>"):t.push("<?",e,"?>");n&&t.push("\n")},doctype:function(e){t.push("<!DOCTYPE",e,">",n?"\n":"")},reset:function(){t.length=0},getContent:function(){return t.join("").replace(/\n$/,"")}}},yy=function(e,t){void 0===t&&(t=js());var n=Oy(e);(e=e||{}).validate=!("validate"in e)||e.validate;return{serialize:function(r){var i=e.validate,o={3:function(e){n.text(e.value,e.raw)},8:function(e){n.comment(e.value)},7:function(e){n.pi(e.name,e.value)},10:function(e){n.doctype(e.value)},4:function(e){n.cdata(e.value)},11:function(e){if(e=e.firstChild)do{a(e)}while(e=e.next)}};n.reset();var a=function(e){var r=o[e.type];if(r)r(e);else{var s=e.name,c=e.shortEnded,l=e.attributes;if(i&&l&&l.length>1){var u=[];u.map={};var d=t.getElementRule(e.name);if(d){for(var p=0,h=d.attributesOrder.length;p<h;p++){if((f=d.attributesOrder[p])in l.map){var m=l.map[f];u.map[f]=m;u.push({name:f,value:m})}}for(p=0,h=l.length;p<h;p++){var f;if(!((f=l[p].name)in u.map)){m=l.map[f];u.map[f]=m;u.push({name:f,value:m})}}l=u}}n.start(e.name,l,c);if(!c){if(e=e.firstChild)do{a(e)}while(e=e.next);n.end(s)}}};1!==r.type||e.inner?o[11](r):a(r);return n.getContent()}}},jy=new Set;Q(["margin","margin-left","margin-right","margin-top","margin-bottom","padding","padding-left","padding-right","padding-top","padding-bottom","border","border-width","border-style","border-color","background","background-attachment","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","float","position","left","right","top","bottom","z-index","display","transform","width","max-width","min-width","height","max-height","min-height","overflow","overflow-x","overflow-y","text-overflow","vertical-align","transition","transition-delay","transition-duration","transition-property","transition-timing-function"],(function(e){jy.add(e)}));var vy=["font","text-decoration","text-emphasis"],Cy=function(e,t){return ye(e.parseStyle(e.getAttrib(t,"style")))},xy=function(e){return jy.has(e)},Ey=function(e,t){return le(Cy(e,t),(function(e){return!xy(e)}))},Ty=function(e){return te(e,(function(e){return X(vy,(function(t){return ct(e,t)}))}))},Sy=function(e,t,n){var r=Cy(e,t),i=Cy(e,n),o=function(r){var i=e.getStyle(t,r),o=e.getStyle(n,r);return ht(i)&&ht(o)&&i!==o};return X(r,(function(e){var t=function(t){return X(t,(function(t){return t===e}))};if(!t(i)&&t(vy)){var n=Ty(i);return X(n,o)}return o(e)}))},Iy=function(e,t,n){return q.from(n.container()).filter(qr).exists((function(r){var i=e?0:-1;return t(r.data.charAt(n.offset()+i))}))},wy=D(Iy,!0,Ym),_y=D(Iy,!1,Ym),Ny=function(e){var t=e.container();return qr(t)&&(0===t.data.length||Ko(t.data)&&cg.isBookmarkNode(t.parentNode))},Ay=function(e,t){return function(n){return q.from(Lh(e?0:-1,n)).filter(t).isSome()}},Dy=function(e){return Kr(e)&&"block"===fi(un.fromDom(e),"display")},ky=function(e){return Xr(e)&&!Br(e)},Py=Ay(!0,Dy),Ry=Ay(!1,Dy),Fy=Ay(!0,Qr),Ly=Ay(!1,Qr),My=Ay(!0,Ur),By=Ay(!1,Ur),Uy=Ay(!0,ky),Vy=Ay(!1,ky),Hy=function(e){for(var t=[],n=e.dom;n;){t.push(un.fromDom(n));n=n.lastChild}return t},qy=function(e){var t=Zl(e,"br"),n=te(Hy(e).slice(-1),Lo);t.length===n.length&&Q(n,gr)},Gy=function(e){fr(e);dr(e,un.fromHtml('<br data-mce-bogus="1">'))},Wy=function(e){Xn(e).each((function(t){qn(t).each((function(n){Po(e)&&Lo(t)&&Po(n)&&gr(t)}))}))},zy=function(e){return e.slice(0,-1)},$y=function(e,t,n){return Sn(t,e)?zy(Vn(e,(function(e){return n(e)||xn(e,t)}))):[]},Ky=function(e,t){return $y(e,t,L)},Yy=function(e,t){return[e].concat(Ky(e,t))},Xy=function(e,t,n){return Om(e,t,n,Ny)},Jy=function(e,t){return oe(Yy(un.fromDom(t.container()),e),Po)},Qy=function(e,t,n){return Xy(e,t.dom,n).forall((function(e){return Jy(t,n).fold((function(){return!1===Fh(e,n,t.dom)}),(function(r){return!1===Fh(e,n,t.dom)&&Sn(r,un.fromDom(e.container()))}))}))},Zy=function(e,t,n){return Jy(t,n).fold((function(){return Xy(e,t.dom,n).forall((function(e){return!1===Fh(e,n,t.dom)}))}),(function(t){return Xy(e,t.dom,n).isNone()}))},ej=D(Zy,!1),tj=D(Zy,!0),nj=D(Qy,!1),rj=D(Qy,!0),ij=function(e){return zh(e).exists(Lo)},oj=function(e,t,n){var r=te(Yy(un.fromDom(n.container()),t),Po),i=fe(r).getOr(t);return gm(e,i.dom,n).filter(ij)},aj=function(e,t){return zh(t).exists(Lo)||oj(!0,e,t).isSome()},sj=function(e,t){return $h(t).exists(Lo)||oj(!1,e,t).isSome()},cj=D(oj,!1),lj=D(oj,!0),uj=function(e){return id.isTextPosition(e)&&!e.isAtStart()&&!e.isAtEnd()},dj=function(e,t){var n=te(Yy(un.fromDom(t.container()),e),Po);return fe(n).getOr(e)},pj=function(e,t){return uj(t)?_y(t):_y(t)||vm(dj(e,t).dom,t).exists(_y)},hj=function(e,t){return uj(t)?wy(t):wy(t)||jm(dj(e,t).dom,t).exists(wy)},mj=function(e){return Y(["pre","pre-wrap"],e)},fj=function(e){return zh(e).bind((function(e){return lo(e,An)})).exists((function(e){return mj(fi(e,"white-space"))}))},gj=function(e,t){return vm(e.dom,t).isNone()},bj=function(e,t){return jm(e.dom,t).isNone()},Oj=function(e,t){return gj(e,t)||bj(e,t)||ej(e,t)||tj(e,t)||sj(e,t)||aj(e,t)},yj=function(e,t){return!fj(t)&&(Oj(e,t)||pj(e,t)||hj(e,t))},jj=function(e,t){return!fj(t)&&(ej(e,t)||nj(e,t)||sj(e,t)||pj(e,t))},vj=function(e){var t=e.container(),n=e.offset();return qr(t)&&n<t.data.length?id(t,n+1):e},Cj=function(e,t){return!fj(t)&&(tj(e,t)||rj(e,t)||aj(e,t)||hj(e,t))},xj=function(e,t){return jj(e,t)||Cj(e,vj(t))},Ej=function(e,t){return Km(e.charAt(t))},Tj=function(e){var t=e.container();return qr(t)&&st(t.data,zo)},Sj=function(e){var t=e.split("");return J(t,(function(e,n){return Km(e)&&n>0&&n<t.length-1&&Xm(t[n-1])&&Xm(t[n+1])?" ":e})).join("")},Ij=function(e,t){var n=t.data,r=id(t,0);if(Ej(n,0)&&!xj(e,r)){t.data=" "+n.slice(1);return!0}return!1},wj=function(e){var t=e.data,n=Sj(t);if(n!==t){e.data=n;return!0}return!1},_j=function(e,t){var n=t.data,r=id(t,n.length-1);if(Ej(n,n.length-1)&&!xj(e,r)){t.data=n.slice(0,-1)+" ";return!0}return!1},Nj=function(e,t){return q.some(t).filter(Tj).bind((function(t){var n=t.container();return Ij(e,n)||wj(n)||_j(e,n)?q.some(t):q.none()}))},Aj=function(e){var t=un.fromDom(e.getBody());e.selection.isCollapsed()&&Nj(t,id.fromRangeStart(e.selection.getRng())).each((function(t){e.selection.setRng(t.toRange())}))},Dj=function(e,t,n){return re(e,(function(r,i){return Ym(i)||Km(i)?r.previousCharIsSpace||""===r.str&&t||r.str.length===e.length-1&&n?{previousCharIsSpace:!1,str:r.str+zo}:{previousCharIsSpace:!0,str:r.str+" "}:{previousCharIsSpace:!1,str:r.str+i}}),{previousCharIsSpace:!1,str:""}).str},kj=function(e,t,n){if(0!==n){var r=un.fromDom(e),i=co(r,Po).getOr(r),o=e.data.slice(t,t+n),a=t+n>=e.data.length&&Cj(i,id(e,e.data.length)),s=0===t&&jj(i,id(e,0));e.replaceData(t,n,Dj(o,s,a))}},Pj=function(e,t){var n=e.data.slice(t),r=n.length-dt(n).length;kj(e,t,r)},Rj=function(e,t){var n=e.data.slice(0,t),r=n.length-pt(n).length;kj(e,t-r,r)},Fj=function(e,t,n,r){void 0===r&&(r=!0);var i=pt(e.data).length,o=r?e:t,a=r?t:e;r?o.appendData(a.data):o.insertData(0,a.data);gr(un.fromDom(a));n&&Pj(o,i);return o},Lj=function(e,t){var n=e.container(),r=e.offset();return!1===id.isTextPosition(e)&&n===t.parentNode&&r>id.before(t).offset()},Mj=function(e,t){return Lj(t,e)?id(t.container(),t.offset()-1):t},Bj=function(e){return qr(e)?id(e,0):id.before(e)},Uj=function(e){return qr(e)?id(e,e.data.length):id.after(e)},Vj=function(e){return ja(e.previousSibling)?q.some(Uj(e.previousSibling)):e.previousSibling?xm(e.previousSibling):q.none()},Hj=function(e){return ja(e.nextSibling)?q.some(Bj(e.nextSibling)):e.nextSibling?Cm(e.nextSibling):q.none()},qj=function(e,t){var n=id.before(t.previousSibling?t.previousSibling:t.parentNode);return vm(e,n).fold((function(){return jm(e,id.after(t))}),q.some)},Gj=function(e,t){return jm(e,id.after(t)).fold((function(){return vm(e,id.before(t))}),q.some)},Wj=function(e,t){return Vj(t).orThunk((function(){return Hj(t)})).orThunk((function(){return qj(e,t)}))},zj=function(e,t){return Hj(t).orThunk((function(){return Vj(t)})).orThunk((function(){return Gj(e,t)}))},$j=function(e,t,n){return e?zj(t,n):Wj(t,n)},Kj=function(e,t,n){return $j(e,t,n).map(D(Mj,n))},Yj=function(e,t,n){n.fold((function(){e.focus()}),(function(n){e.selection.setRng(n.toRange(),t)}))},Xj=function(e){return function(t){return t.dom===e}},Jj=function(e,t){return t&&Ae(e.schema.getBlockElements(),In(t))},Qj=function(e){if(La(e)){var t=un.fromHtml('<br data-mce-bogus="1">');fr(e);dr(e,t);return q.some(id.before(t.dom))}return q.none()},Zj=function(e,t,n){var r=qn(e).filter(Dn),i=Gn(e).filter(Dn);gr(e);return ni(r,i,t,(function(e,t,r){var i=e.dom,o=t.dom,a=i.data.length;Fj(i,o,n);return r.container()===o?id(i,a):r})).orThunk((function(){if(n){r.each((function(e){return Rj(e.dom,e.dom.length)}));i.each((function(e){return Pj(e.dom,0)}))}return t}))},ev=function(e,t){return Ae(e.schema.getTextInlineElements(),In(t))},tv=function(e,t,n,r){void 0===r&&(r=!0);var i=Kj(t,e.getBody(),n.dom),o=co(n,D(Jj,e),Xj(e.getBody())),a=Zj(n,i,ev(e,n));if(e.dom.isEmpty(e.getBody())){e.setContent("");e.selection.setCursorLocation()}else o.bind(Qj).fold((function(){r&&Yj(e,t,a)}),(function(n){r&&Yj(e,t,q.some(n))}))},nv=function(e){return function(t){return xn(e,t)}},rv=function(e){return Zl(e,"td,th")},iv=function(e,t){var n=function(e){return qf(un.fromDom(e),t)},r=n(e.startContainer),i=n(e.endContainer),o=r.isSome(),a=i.isSome(),s=ti(r,i,xn).getOr(!1);return{startTable:r,endTable:i,isStartInTable:o,isEndInTable:a,isSameTable:s,isMultiTable:!s&&o&&a}},ov=function(e,t){return{start:e,end:t}},av=function(e,t,n){return{rng:e,table:t,cells:n}},sv=Ui.generate([{singleCellTable:["rng","cell"]},{fullTable:["table"]},{partialTable:["cells","outsideDetails"]},{multiTable:["startTableCells","endTableCells","betweenRng"]}]),cv=function(e,t){return fo(un.fromDom(e),"td,th",t)},lv=function(e){return!xn(e.start,e.end)},uv=function(e,t){return qf(e.start,t).bind((function(n){return qf(e.end,t).bind((function(e){return ri(xn(n,e),n)}))}))},dv=function(e,t){return!lv(e)&&uv(e,t).exists((function(e){var t=e.dom.rows;return 1===t.length&&1===t[0].cells.length}))},pv=function(e,t){var n=cv(e.startContainer,t),r=cv(e.endContainer,t);return ti(n,r,ov)},hv=function(e){return function(t){return qf(t,e).bind((function(e){return ge(rv(e)).map((function(e){return ov(t,e)}))}))}},mv=function(e){return function(t){return qf(t,e).bind((function(e){return fe(rv(e)).map((function(e){return ov(e,t)}))}))}},fv=function(e){return function(t){return uv(t,e).map((function(e){return av(t,e,rv(e))}))}},gv=function(e,t,n,r){if(n.collapsed||!e.forall(lv))return q.none();if(t.isSameTable){var i=e.bind(fv(r));return q.some({start:i,end:i})}var o=cv(n.startContainer,r),a=cv(n.endContainer,r),s=o.bind(hv(r)).bind(fv(r)),c=a.bind(mv(r)).bind(fv(r));return q.some({start:s,end:c})},bv=function(e,t){return ae(e,(function(e){return xn(e,t)}))},Ov=function(e){return ti(bv(e.cells,e.rng.start),bv(e.cells,e.rng.end),(function(t,n){return e.cells.slice(t,n+1)}))},yv=function(e,t,n){return e.exists((function(e){return dv(e,n)&&Kf(e.start,t)}))},jv=function(e,t){var n=t.startTable,r=t.endTable,i=e.cloneRange();n.each((function(e){return i.setStartAfter(e.dom)}));r.each((function(e){return i.setEndBefore(e.dom)}));return i},vv=function(e,t,n,r){return gv(e,t,n,r).bind((function(e){var t=e.start,n=e.end;return t.or(n)})).bind((function(e){var r=t.isSameTable,i=Ov(e).getOr([]);if(r&&e.cells.length===i.length)return q.some(sv.fullTable(e.table));if(i.length>0){if(r)return q.some(sv.partialTable(i,q.none()));var o=jv(n,t);return q.some(sv.partialTable(i,q.some(qe(qe({},t),{rng:o}))))}return q.none()}))},Cv=function(e,t,n,r){return gv(e,t,n,r).bind((function(e){var r=e.start,i=e.end,o=r.bind(Ov).getOr([]),a=i.bind(Ov).getOr([]);if(o.length>0&&a.length>0){var s=jv(n,t);return q.some(sv.multiTable(o,a,s))}return q.none()}))},xv=function(e,t){var n=nv(e),r=pv(t,n),i=iv(t,n);return yv(r,t,n)?r.map((function(e){return sv.singleCellTable(t,e.start)})):i.isMultiTable?Cv(r,i,t,n):vv(r,i,t,n)},Ev=function(e){return(Nn(e)?qn(e):Xn(e)).bind(Ev).orThunk((function(){return q.some(e)}))},Tv=function(e){return Q(e,(function(e){di(e,"contenteditable");Gy(e)}))},Sv=function(e,t){return q.from(e.dom.getParent(t,e.dom.isBlock)).map(un.fromDom)},Iv=function(e,t,n){n.each((function(n){if(t)gr(n);else{Gy(n);e.selection.setCursorLocation(n.dom,0)}}))},wv=function(e,t,n,r){var i=n.cloneRange();if(r){i.setStart(n.startContainer,n.startOffset);i.setEndAfter(t.dom.lastChild)}else{i.setStartBefore(t.dom.firstChild);i.setEnd(n.endContainer,n.endOffset)}Dv(e,i,t,!1)},_v=function(e){var t=Hf(e),n=un.fromDom(e.selection.getNode());Jr(n.dom)&&La(n)?e.selection.setCursorLocation(n.dom,0):e.selection.collapse(!0);t.length>1&&X(t,(function(e){return xn(e,n)}))&&ai(n,"data-mce-selected","1")},Nv=function(e,t,n){var r=e.selection.getRng(),i=n.bind((function(n){var i=n.rng,o=n.isStartInTable,a=Sv(e,o?i.endContainer:i.startContainer);i.deleteContents();Iv(e,o,a.filter(La));var s=o?t[0]:t[t.length-1];wv(e,s,r,o);return La(s)?q.none():q.some(o?t.slice(1):t.slice(0,-1))})).getOr(t);Tv(i);_v(e);return!0},Av=function(e,t,n,r){var i=e.selection.getRng(),o=t[0],a=n[n.length-1];wv(e,o,i,!0);wv(e,a,i,!1);var s=La(o)?t:t.slice(1),c=La(a)?n:n.slice(0,-1);Tv(s.concat(c));r.deleteContents();_v(e);return!0},Dv=function(e,t,n,r){void 0===r&&(r=!0);t.deleteContents();var i=Ev(n).getOr(n),o=un.fromDom(e.dom.getParent(i.dom,e.dom.isBlock));if(La(o)){Gy(o);r&&e.selection.setCursorLocation(o.dom,0)}if(!xn(n,o)){var a=Zr(Un(o),n)?[]:Hn(o);Q(a.concat($n(n)),(function(e){xn(e,o)||Sn(e,o)||!La(e)||gr(e)}))}return!0},kv=function(e,t){tv(e,!1,t);return!0},Pv=function(e,t,n){return xv(t,n).map((function(t){return t.fold(D(Dv,e),D(kv,e),D(Nv,e),D(Av,e))}))},Rv=function(e,t){return Vv(e,t)},Fv=function(e,t,n,r){return Bv(t,r).fold((function(){return Pv(e,t,n)}),(function(t){return Rv(e,t)})).getOr(!1)},Lv=function(e,t,n){var r=un.fromDom(e.getBody()),i=e.selection.getRng();return 0!==n.length?Nv(e,n,q.none()):Fv(e,r,i,t)},Mv=function(e,t){return oe(Yy(t,e),Ho)},Bv=function(e,t){return oe(Yy(t,e),Rn("caption"))},Uv=function(e,t,n,r,i){return bm(n,e.getBody(),i).bind((function(e){return Mv(t,un.fromDom(e.getNode())).map((function(e){return!1===xn(e,r)}))}))},Vv=function(e,t){Gy(t);e.selection.setCursorLocation(t.dom,0);return q.some(!0)},Hv=function(e,t,n,r){return Cm(e.dom).bind((function(i){return xm(e.dom).map((function(e){return t?n.isEqual(i)&&r.isEqual(e):n.isEqual(e)&&r.isEqual(i)}))})).getOr(!0)},qv=function(e,t){return Vv(e,t)},Gv=function(e,t,n){return Bv(e,un.fromDom(n.getNode())).map((function(e){return!1===xn(e,t)}))},Wv=function(e,t,n,r,i){return bm(n,e.getBody(),i).bind((function(o){return Hv(r,n,i,o)?qv(e,r):Gv(t,r,o)})).or(q.some(!0))},zv=function(e,t,n,r){var i=id.fromRangeStart(e.selection.getRng());return Mv(n,r).bind((function(r){return La(r)?Vv(e,r):Uv(e,n,t,r,i)})).getOr(!1)},$v=function(e,t,n,r){var i=id.fromRangeStart(e.selection.getRng());return La(r)?Vv(e,r):Wv(e,n,t,r,i)},Kv=function(e,t){return e?My(t):By(t)},Yv=function(e,t){var n=id.fromRangeStart(e.selection.getRng());return Kv(t,n)||gm(t,e.getBody(),n).exists((function(e){return Kv(t,e)}))},Xv=function(e,t,n){var r=un.fromDom(e.getBody());return Bv(r,n).fold((function(){return zv(e,t,r,n)||Yv(e,t)}),(function(n){return $v(e,t,r,n).getOr(!1)}))},Jv=function(e,t){var n=un.fromDom(e.selection.getStart(!0)),r=Hf(e);return e.selection.isCollapsed()&&0===r.length?Xv(e,t,n):Lv(e,n,r)},Qv=function(e,t,n,r){var i=document.createRange();i.setStart(e,t);i.setEnd(n,r);return i},Zv=function(e){var t=id.fromRangeStart(e),n=id.fromRangeEnd(e),r=e.commonAncestorContainer;return gm(!1,r,n).map((function(i){return!Fh(t,n,r)&&Fh(t,i,r)?Qv(t.container(),t.offset(),i.container(),i.offset()):e})).getOr(e)},eC=function(e){return e.collapsed?e:Zv(e)},tC=function(e){return e.firstChild&&e.firstChild===e.lastChild},nC=function(e){return"br"===e.name||e.value===zo},rC=function(e,t){return e.getBlockElements()[t.name]&&tC(t)&&nC(t.firstChild)},iC=function(e,t){var n=e.getNonEmptyElements();return t&&(t.isEmpty(n)||rC(e,t))},oC=function(e,t){var n=t.firstChild,r=t.lastChild;n&&"meta"===n.name&&(n=n.next);r&&"mce_marker"===r.attr("id")&&(r=r.prev);iC(e,r)&&(r=r.prev);return!(!n||n!==r)&&("ul"===n.name||"ol"===n.name)},aC=function(e){var t=e.firstChild,n=e.lastChild;t&&"META"===t.nodeName&&t.parentNode.removeChild(t);n&&"mce_marker"===n.id&&n.parentNode.removeChild(n);return e},sC=function(e,t,n){var r=t.serialize(n),i=e.createFragment(r);return aC(i)},cC=function(e){return te(e.childNodes,(function(e){return"LI"===e.nodeName}))},lC=function(e){return e.data===zo||$r(e)},uC=function(e){return e&&e.firstChild&&e.firstChild===e.lastChild&&lC(e.firstChild)},dC=function(e){return!e.firstChild||uC(e)},pC=function(e){return e.length>0&&dC(e[e.length-1])?e.slice(0,-1):e},hC=function(e,t){var n=e.getParent(t,e.isBlock);return n&&"LI"===n.nodeName?n:null},mC=function(e,t){return!!hC(e,t)},fC=function(e,t){var n=t.cloneRange(),r=t.cloneRange();n.setStartBefore(e);r.setEndAfter(e);return[n.cloneContents(),r.cloneContents()]},gC=function(e,t){var n=id.before(e),r=cm(t).next(n);return r?r.toRange():null},bC=function(e,t){var n=id.after(e),r=cm(t).prev(n);return r?r.toRange():null},OC=function(e,t,n,r){var i=fC(e,r),o=e.parentNode;o.insertBefore(i[0],e);on.each(t,(function(t){o.insertBefore(t,e)}));o.insertBefore(i[1],e);o.removeChild(e);return bC(t[t.length-1],n)},yC=function(e,t,n){var r=e.parentNode;on.each(t,(function(t){r.insertBefore(t,e)}));return gC(e,n)},jC=function(e,t,n,r){r.insertAfter(t.reverse(),e);return bC(t[0],n)},vC=function(e,t,n,r){var i=sC(t,e,r),o=hC(t,n.startContainer),a=pC(cC(i.firstChild)),s=1,c=2,l=t.getRoot(),u=function(e){var r=id.fromRangeStart(n),i=cm(t.getRoot()),a=e===s?i.prev(r):i.next(r);return!a||hC(t,a.getNode())!==o};return u(s)?yC(o,a,l):u(c)?jC(o,a,l,t):OC(o,a,l,n)},CC=function(e,t,n){var r=un.fromDom(e.getRoot());n=jj(r,id.fromRangeStart(t))?n.replace(/^ /,"&nbsp;"):n.replace(/^&nbsp;/," ");return n=Cj(r,id.fromRangeEnd(t))?n.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):n.replace(/&nbsp;(<br( \/)?>)?$/," ")},xC=Jr,EC=function(e,t,n){if(null!==n){return n===e.getParent(t.endContainer,xC)&&Kf(un.fromDom(n),t)}return!1},TC=function(e,t,n){if("all"===n.getAttribute("data-mce-bogus"))n.parentNode.insertBefore(e.dom.createFragment(t),n);else{var r=n.firstChild,i=n.lastChild;!r||r===i&&"BR"===r.nodeName?e.dom.setHTML(n,t):e.selection.setContent(t)}},SC=function(e,t){q.from(e.getParent(t,"td,th")).map(un.fromDom).each(Wy)},IC=function(e,t){var n=e.schema.getTextInlineElements(),r=e.dom;if(t){var i=e.getBody(),o=gy(r);on.each(r.select("*[data-mce-fragment]"),(function(e){if(x(n[e.nodeName.toLowerCase()])&&Ey(r,e))for(var t=e.parentNode;x(t)&&t!==i;t=t.parentNode){if(Sy(r,e,t))break;if(o.compare(t,e)){r.remove(e,!0);break}}}))}},wC=function(e){for(var t=e;t=t.walk();)1===t.type&&t.attr("data-mce-fragment","1")},_C=function(e){on.each(e.getElementsByTagName("*"),(function(e){e.removeAttribute("data-mce-fragment")}))},NC=function(e){return!!e.getAttribute("data-mce-fragment")},AC=function(e,t){return t&&!e.schema.getShortEndedElements()[t.nodeName]},DC=function(e,t){var n,r=e.dom,i=e.selection;if(t){i.scrollIntoView(t);var o=lg(e.getBody(),t);if("false"!==r.getContentEditable(o)){var a=r.createRng(),s=t.previousSibling;if(qr(s)){a.setStart(s,s.nodeValue.length);if(!Qt.ie){var c=t.nextSibling;if(qr(c)){s.appendData(c.data);c.parentNode.removeChild(c)}}}else{a.setStartBefore(t);a.setEndBefore(t)}var l=function(t){var n=id.fromRangeStart(t);if(n=cm(e.getBody()).next(n))return n.toRange()},u=r.getParent(t,r.isBlock);r.remove(t);if(u&&r.isEmpty(u)){e.$(u).empty();a.setStart(u,0);a.setEnd(u,0);if(xC(u)||NC(u)||!(n=l(a)))r.add(u,r.create("br",{"data-mce-bogus":"1"}));else{a=n;r.remove(u)}}i.setRng(a)}else{r.remove(t);i.select(o)}}},kC=function(e){var t=e.dom,n=eC(e.selection.getRng());e.selection.setRng(n);var r=t.getParent(n.startContainer,xC);EC(t,n,r)?Dv(e,n,un.fromDom(r)):e.getDoc().execCommand("Delete",!1,null)},PC=function(e,t,n){var r,i,o,a=e.selection,s=e.dom;/^ | $/.test(t)&&(t=CC(s,a.getRng(),t));var c=e.parser,l=n.merge,u=yy({validate:Np(e)},e.schema),d='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>',p=e.fire("BeforeSetContent",{content:t,format:"html",selection:!0,paste:n.paste});if(p.isDefaultPrevented())e.fire("SetContent",{content:p.content,format:"html",selection:!0,paste:n.paste});else{-1===(t=p.content).indexOf("{$caret}")&&(t+="{$caret}");t=t.replace(/\{\$caret\}/,d);var h=(i=a.getRng()).startContainer||(i.parentElement?i.parentElement():null),m=e.getBody();if(h===m&&a.isCollapsed()&&s.isBlock(m.firstChild)&&AC(e,m.firstChild)&&s.isEmpty(m.firstChild)){(i=s.createRng()).setStart(m.firstChild,0);i.setEnd(m.firstChild,0);a.setRng(i)}a.isCollapsed()||kC(e);var f={context:(r=a.getNode()).nodeName.toLowerCase(),data:n.data,insert:!0},g=c.parse(t,f);if(!0===n.paste&&oC(e.schema,g)&&mC(s,r)){i=vC(u,s,a.getRng(),g);a.setRng(i);e.fire("SetContent",p)}else{wC(g);if("mce_marker"===(o=g.lastChild).attr("id")){var b=o;for(o=o.prev;o;o=o.walk(!0))if(3===o.type||!s.isBlock(o.name)){e.schema.isValidChild(o.parent.name,"span")&&o.parent.insert(b,o,"br"===o.name);break}}e._selectionOverrides.showBlockCaretContainer(r);if(f.invalid){e.selection.setContent(d);r=a.getNode();var O=e.getBody();9===r.nodeType?r=o=O:o=r;for(;o!==O;){r=o;o=o.parentNode}t=r===O?O.innerHTML:s.getOuterHTML(r);t=u.serialize(c.parse(t.replace(/<span (id="mce_marker"|id=mce_marker).+?<\/span>/i,(function(){return u.serialize(g)}))));r===O?s.setHTML(O,t):s.setOuterHTML(r,t)}else{t=u.serialize(g);TC(e,t,r)}IC(e,l);DC(e,s.get("mce_marker"));_C(e.getBody());SC(s,a.getStart());e.fire("SetContent",p);e.addVisual()}}},RC=function(e,t){t(e);e.firstChild&&RC(e.firstChild,t);e.next&&RC(e.next,t)},FC=function(e,t,n){var r={},i={},o=[];n.firstChild&&RC(n.firstChild,(function(n){Q(e,(function(e){e.name===n.name&&(r[e.name]?r[e.name].nodes.push(n):r[e.name]={filter:e,nodes:[n]})}));Q(t,(function(e){"string"==typeof n.attr(e.name)&&(i[e.name]?i[e.name].nodes.push(n):i[e.name]={filter:e,nodes:[n]})}))}));for(var a in r)Ae(r,a)&&o.push(r[a]);for(var s in i)Ae(i,s)&&o.push(i[s]);return o},LC=function(e,t,n){var r=FC(e,t,n);Q(r,(function(e){Q(e.filter.callbacks,(function(t){t(e.nodes,e.filter.name,{})}))}))},MC="html",BC=function(e){return e instanceof HO},UC=function(e){TO(e)&&Cm(e.getBody()).each((function(t){var n=t.getNode(),r=Ur(n)?Cm(n).getOr(t):t;e.selection.setRng(r.toRange())}))},VC=function(e,t,n){e.dom.setHTML(e.getBody(),t);!0!==n&&UC(e)},HC=function(e,t,n,r){if(0===n.length||/^\s+$/.test(n)){var i='<br data-mce-bogus="1">';"TABLE"===t.nodeName?n="<tr><td>"+i+"</td></tr>":/^(UL|OL)$/.test(t.nodeName)&&(n="<li>"+i+"</li>");var o=Xd(e);if(o&&e.schema.isValidChild(t.nodeName.toLowerCase(),o.toLowerCase())){n=i;n=e.dom.createHTML(o,Jd(e),n)}else n||(n='<br data-mce-bogus="1">');VC(e,n,r.no_selection);e.fire("SetContent",r)}else{"raw"!==r.format&&(n=yy({validate:e.validate},e.schema).serialize(e.parser.parse(n,{isRootContent:!0,insert:!0})));r.content=qo(un.fromDom(t))?n:on.trim(n);VC(e,r.content,r.no_selection);r.no_events||e.fire("SetContent",r)}return r.content},qC=function(e,t,n,r){LC(e.parser.getNodeFilters(),e.parser.getAttributeFilters(),n);var i=yy({validate:e.validate},e.schema).serialize(n);r.content=qo(un.fromDom(t))?i:on.trim(i);VC(e,r.content,r.no_selection);r.no_events||e.fire("SetContent",r);return n},GC=function(e,t){return qe(qe({format:MC},e),{set:!0,content:BC(t)?"":t})},WC=function(e,t,n){var r=GC(n,t),i=n.no_events?r:e.fire("BeforeSetContent",r);BC(t)||(t=i.content);return q.from(e.getBody()).fold(_(t),(function(n){return BC(t)?qC(e,n,t,i):HC(e,n,t,i)}))},zC=function(e,t){return uo(e,t).isSome()},$C=function(e){return E(e)?e:L},KC=function(e,t,n){for(var r=e.dom,i=$C(n);r.parentNode;){r=r.parentNode;var o=un.fromDom(r),a=t(o);if(a.isSome())return a;if(i(o))break}return q.none()},YC=function(e,t,n){var r=t(e),i=$C(n);return r.orThunk((function(){return i(e)?q.none():KC(e,t,i)}))},XC=sf,JC=function(e,t,n){var r=e.formatter.get(n);if(r)for(var i=0;i<r.length;i++){var o=r[i];if(ff(o)&&!1===o.inherit&&e.dom.is(t,o.selector))return!0}return!1},QC=function(e,t,n,r,i){var o=e.dom.getRoot();if(t===o)return!1;t=e.dom.getParent(t,(function(t){return!!JC(e,t,n)||(t.parentNode===o||!!tx(e,t,n,r,!0))}));return!!tx(e,t,n,r,i)},ZC=function(e,t,n){return!!XC(t,n.inline)||(!!XC(t,n.block)||(n.selector?1===t.nodeType&&e.is(t,n.selector):void 0))},ex=function(e,t,n,r,i,o){var a=n[r];if(E(n.onmatch))return n.onmatch(t,n,r);if(a)if(v(a.length)){for(var s in a)if(Ae(a,s)){var c="attributes"===r?e.getAttrib(t,s):lf(e,t,s),l=af(a[s],o),u=C(c)||mt(c);if(u&&C(l))continue;if(i&&u&&!n.exact)return!1;if((!i||n.exact)&&!XC(c,cf(e,l,s)))return!1}}else for(var d=0;d<a.length;d++)if("attributes"===r?e.getAttrib(t,a[d]):lf(e,t,a[d]))return!0;return!0},tx=function(e,t,n,r,i){var o=e.formatter.get(n),a=e.dom;if(o&&t)for(var s=0;s<o.length;s++){var c=o[s];if(ZC(e.dom,t,c)&&ex(a,t,c,"attributes",i,r)&&ex(a,t,c,"styles",i,r)){var l=c.classes;if(l)for(var u=0;u<l.length;u++)if(!e.dom.hasClass(t,af(l[u],r)))return;return c}}},nx=function(e,t,n,r,i){if(r)return QC(e,r,t,n,i);r=e.selection.getNode();if(QC(e,r,t,n,i))return!0;var o=e.selection.getStart();return!(o===r||!QC(e,o,t,n,i))},rx=function(e,t,n){var r=[],i={},o=e.selection.getStart();e.dom.getParent(o,(function(o){for(var a=0;a<t.length;a++){var s=t[a];if(!i[s]&&tx(e,o,s,n)){i[s]=!0;r.push(s)}}}),e.dom.getRoot());return r},ix=function(e,t){var n=function(t){return xn(t,un.fromDom(e.getBody()))},r=function(t,n){return tx(e,t.dom,n)?q.some(n):q.none()};return q.from(e.selection.getStart(!0)).bind((function(e){return YC(un.fromDom(e),(function(e){return Oe(t,(function(t){return r(e,t)}))}),n)})).getOrNull()},ox=function(e,t){var n=e.formatter.get(t),r=e.dom;if(n)for(var i=e.selection.getStart(),o=df(r,i),a=n.length-1;a>=0;a--){var s=n[a];if(!ff(s)||x(s.defaultBlock))return!0;for(var c=o.length-1;c>=0;c--)if(r.is(o[c],s.selector))return!0}return!1},ax=function(e,t,n){return re(n,(function(n,r){var i=pf(e,r);return e.formatter.matchNode(t,r,{},i)?n.concat([r]):n}),[])},sx=$o,cx="_mce_caret",lx=function(e,t){return e.importNode(t,!0)},ux=function(e){for(var t=[];e;){if(3===e.nodeType&&e.nodeValue!==sx||e.childNodes.length>1)return[];1===e.nodeType&&t.push(e);e=e.firstChild}return t},dx=function(e){return ux(e).length>0},px=function(e){if(e){var t=new Eo(e,e);for(e=t.current();e;e=t.next())if(qr(e))return e}return null},hx=function(e){var t=un.fromTag("span");si(t,{id:cx,"data-mce-bogus":"1","data-mce-type":"format-caret"});e&&dr(t,un.fromText(sx));return t},mx=function(e){var t=px(e);t&&t.nodeValue.charAt(0)===sx&&t.deleteData(0,1);return t},fx=function(e,t,n){void 0===n&&(n=!0);var r=e.dom,i=e.selection;if(dx(t))tv(e,!1,un.fromDom(t),n);else{var o=i.getRng(),a=r.getParent(t,r.isBlock),s=o.startContainer,c=o.startOffset,l=o.endContainer,u=o.endOffset,d=mx(t);r.remove(t,!0);s===d&&c>0&&o.setStart(d,c-1);l===d&&u>0&&o.setEnd(d,u-1);a&&r.isEmpty(a)&&Gy(un.fromDom(a));i.setRng(o)}},gx=function(e,t,n){void 0===n&&(n=!0);var r=e.dom,i=e.selection;if(t)fx(e,t,n);else if(!(t=Sm(e.getBody(),i.getStart())))for(;t=r.get(cx);)fx(e,t,!1)},bx=function(e,t,n){var r=e.dom,i=r.getParent(n,D(tf,e));if(i&&r.isEmpty(i))n.parentNode.replaceChild(t,n);else{qy(un.fromDom(n));r.isEmpty(n)?n.parentNode.replaceChild(t,n):r.insertAfter(t,n)}},Ox=function(e,t){e.appendChild(t);return t},yx=function(e,t){var n=ne(e,(function(e,t){return Ox(e,t.cloneNode(!1))}),t);return Ox(n,n.ownerDocument.createTextNode(sx))},jx=function(e,t,n,r,i,o){var a=e.formatter,s=e.dom,c=te(ye(a.get()),(function(e){return e!==r&&!st(e,"removeformat")})),l=ax(e,n,c);if(te(l,(function(t){return!hf(e,t,r)})).length>0){var u=n.cloneNode(!1);s.add(t,u);a.remove(r,i,u,o);s.remove(u);return q.some(u)}return q.none()},vx=function(e,t,n){var r,i,o=e.selection,a=o.getRng(),s=a.startOffset,c=a.startContainer.nodeValue;(r=Sm(e.getBody(),o.getStart()))&&(i=px(r));var l=/[^\s\u00a0\u00ad\u200b\ufeff]/;if(c&&s>0&&s<c.length&&l.test(c.charAt(s))&&l.test(c.charAt(s-1))){var u=o.getBookmark();a.collapse(!0);var d=Pf(e,a,e.formatter.get(t));d=$g(d);e.formatter.apply(t,n,d);o.moveToBookmark(u)}else{if(r&&i.nodeValue===sx)e.formatter.apply(t,n,r);else{i=(r=lx(e.getDoc(),hx(!0).dom)).firstChild;a.insertNode(r);s=1;e.formatter.apply(t,n,r)}o.setCursorLocation(i,s)}},Cx=function(e,t,n,r){var i,o,a,s=e.dom,c=e.selection,l=[],u=c.getRng(),d=u.startContainer,p=u.startOffset;o=d;if(3===d.nodeType){p!==d.nodeValue.length&&(i=!0);o=o.parentNode}for(;o;){if(tx(e,o,t,n,r)){a=o;break}o.nextSibling&&(i=!0);l.push(o);o=o.parentNode}if(a)if(i){var h=c.getBookmark();u.collapse(!0);var m=Pf(e,u,e.formatter.get(t),!0);m=$g(m);e.formatter.remove(t,n,m,r);c.moveToBookmark(h)}else{var f=Sm(e.getBody(),a),g=hx(!1).dom;bx(e,g,null!==f?f:a);var b=jx(e,g,a,t,n,r),O=yx(l.concat(b.toArray()),g);fx(e,f,!1);c.setCursorLocation(O,1);s.isEmpty(a)&&s.remove(a)}},xx=function(e,t){var n=e.selection,r=e.getBody();gx(e,null,!1);8!==t&&46!==t||!n.isCollapsed()||n.getStart().innerHTML!==sx||gx(e,Sm(r,n.getStart()));37!==t&&39!==t||gx(e,Sm(r,n.getStart()))},Ex=function(e){e.on("mouseup keydown",(function(t){xx(e,t.keyCode)}))},Tx=function(e,t){var n=hx(!1),r=yx(t,n.dom);cr(un.fromDom(e),n);gr(un.fromDom(e));return id(r,0)},Sx=function(e,t){var n=e.schema.getTextInlineElements();return Ae(n,In(t))&&!Tm(t.dom)&&!Mr(t.dom)},Ix=function(e){return Tm(e.dom)&&dx(e.dom)},wx={},_x=Me,Nx=Fe,Ax=function(e,t){Nx(wx[e],(function(e){e(t)}))};(function(e,t){wx[e]||(wx[e]=[]);wx[e].push(t)})("pre",(function(e){var t,n=e.selection.getRng(),r=function(e){return o(e.previousSibling)&&-1!==Be(t,e.previousSibling)},i=function(e,t){pl(t).remove();pl(e).append("<br><br>").append(t.childNodes)},o=Pr(["pre"]);if(!n.collapsed){t=e.selection.getSelectedBlocks();Nx(_x(_x(t,o),r),(function(e){i(e.previousSibling,e)}))}}));var Dx=on.each,kx=function(e){return kr(e)&&!$m(e)&&!Tm(e)&&!Mr(e)},Px=function(e,t){for(var n=e;n;n=n[t]){if(qr(n)&&ht(n.data))return e;if(kr(n)&&!$m(n))return n}return e},Rx=function(e,t,n){var r=gy(e);if(t&&n){t=Px(t,"previousSibling");n=Px(n,"nextSibling");if(r.compare(t,n)){for(var i=t.nextSibling;i&&i!==n;){var o=i;i=i.nextSibling;t.appendChild(o)}e.remove(n);on.each(on.grep(n.childNodes),(function(e){t.appendChild(e)}));return t}}return n},Fx=function(e,t,n,r){if(r&&!1!==t.merge_siblings){var i=Rx(e,ef(r),r);Rx(e,i,ef(i,!0))}},Lx=function(e,t,n){if(t.clear_child_styles){var r=t.links?"*:not(a)":"*";Dx(e.select(r,n),(function(n){kx(n)&&Dx(t.styles,(function(t,r){e.setStyle(n,r,"")}))}))}},Mx=function(e,t,n){Dx(e.childNodes,(function(e){if(kx(e)){t(e)&&n(e);e.hasChildNodes()&&Mx(e,t,n)}}))},Bx=function(e,t){"SPAN"===t.nodeName&&0===e.getAttribs(t).length&&e.remove(t,!0)},Ux=function(e,t){return function(n){return!(!n||!lf(e,n,t))}},Vx=function(e,t,n){return function(r){e.setStyle(r,t,n);""===r.getAttribute("style")&&r.removeAttribute("style");Bx(e,r)}},Hx=Ui.generate([{keep:[]},{rename:["name"]},{removed:[]}]),qx=/^(src|href|style)$/,Gx=on.each,Wx=sf,zx=function(e){return/^(TR|TH|TD)$/.test(e.nodeName)},$x=function(e,t,n){return e.isChildOf(t,n)&&t!==n&&!e.isBlock(n)},Kx=function(e,t,n){var r=t[n?"startContainer":"endContainer"],i=t[n?"startOffset":"endOffset"];if(kr(r)){var o=r.childNodes.length-1;!n&&i&&i--;r=r.childNodes[i>o?o:i]}qr(r)&&n&&i>=r.nodeValue.length&&(r=new Eo(r,e.getBody()).next()||r);qr(r)&&!n&&0===i&&(r=new Eo(r,e.getBody()).prev()||r);return r},Yx=function(e,t){var n=t?"firstChild":"lastChild";if(zx(e)&&e[n]){var r=e[n];return"TR"===e.nodeName&&r[n]||r}return e},Xx=function(e,t,n,r){var i=e.create(n,r);t.parentNode.insertBefore(i,t);i.appendChild(t);return i},Jx=function(e,t,n,r,i){var o=un.fromDom(t),a=un.fromDom(e.create(r,i)),s=n?zn(o):Wn(o);mr(a,s);if(n){cr(o,a);ur(a,o)}else{lr(o,a);dr(a,o)}return a.dom},Qx=function(e,t,n){return!(!gf(n)||!Wx(t,n.inline))||(!(!mf(n)||!Wx(t,n.block))||(ff(n)?kr(t)&&e.is(t,n.selector):void 0))},Zx=function(e,t){return t.links&&"A"===e.nodeName},eE=function(e,t,n,r){var i=ef(t,n,r);return C(i)||"BR"===i.nodeName||e.isBlock(i)},tE=function(e,t,n){var r,i=t.parentNode,o=e.dom,a=Xd(e);if(mf(n))if(a)i===o.getRoot()&&(n.list_block&&Wx(t,n.list_block)||Q(be(t.childNodes),(function(t){if(nf(e,a,t.nodeName.toLowerCase()))if(r)r.appendChild(t);else{r=Xx(o,t,a);o.setAttribs(r,e.settings.forced_root_block_attrs)}else r=null})));else if(o.isBlock(t)&&!o.isBlock(i)){eE(o,t,!1)||eE(o,t.firstChild,!0,!0)||t.insertBefore(o.create("br"),t.firstChild);eE(o,t,!0)||eE(o,t.lastChild,!1,!0)||t.appendChild(o.create("br"))}bf(n)&&!Wx(n.inline,t)||o.remove(t,!0)},nE=function(e,t,n,r,i){var o,a=e.dom;if(!Qx(a,r,t)&&!Zx(r,t))return Hx.keep();var s=r;if(gf(t)&&"all"===t.remove&&O(t.preserve_attributes)){var c=te(a.getAttribs(s),(function(e){return Y(t.preserve_attributes,e.name.toLowerCase())}));a.removeAllAttribs(s);Q(c,(function(e){return a.setAttrib(s,e.name,e.value)}));if(c.length>0)return Hx.rename("span")}if("all"!==t.remove){Gx(t.styles,(function(e,r){e=cf(a,af(e,n),r+"");if(T(r)){r=e;i=null}(t.remove_similar||!i||Wx(lf(a,i,r),e))&&a.setStyle(s,r,"");o=!0}));if(o&&""===a.getAttrib(s,"style")){s.removeAttribute("style");s.removeAttribute("data-mce-style")}Gx(t.attributes,(function(e,r){var o;e=af(e,n);if(T(r)){r=e;i=null}if(t.remove_similar||!i||Wx(a.getAttrib(i,r),e)){if("class"===r&&(e=a.getAttrib(s,r))){o="";Q(e.split(/\s+/),(function(e){/mce\-\w+/.test(e)&&(o+=(o?" ":"")+e)}));if(o){a.setAttrib(s,r,o);return}}qx.test(r)&&s.removeAttribute("data-mce-"+r);if("style"===r&&Pr(["li"])(s)&&"none"===a.getStyle(s,"list-style-type")){s.removeAttribute(r);a.setStyle(s,"list-style-type","none");return}"class"===r&&s.removeAttribute("className");s.removeAttribute(r)}}));Gx(t.classes,(function(e){e=af(e,n);i&&!a.hasClass(i,e)||a.removeClass(s,e)}));for(var l=a.getAttribs(s),u=0;u<l.length;u++){var d=l[u].nodeName;if(0!==d.indexOf("_")&&0!==d.indexOf("data-"))return Hx.keep()}}if("none"!==t.remove){tE(e,s,t);return Hx.removed()}return Hx.keep()},rE=function(e,t,n,r,i){return nE(e,t,n,r,i).fold(L,(function(t){e.dom.rename(r,t);return!0}),M)},iE=function(e,t,n,r,i){var o;Q(df(e.dom,t.parentNode).reverse(),(function(t){if(!o&&"_start"!==t.id&&"_end"!==t.id){var a=tx(e,t,n,r,i);a&&!1!==a.split&&(o=t)}}));return o},oE=function(e,t,n,r){return nE(e,t,n,r,r).fold(_(r),(function(t){e.dom.createFragment().appendChild(r);return e.dom.rename(r,t)}),_(null))},aE=function(e,t,n,r,i,o,a,s){var c,l,u,d=e.dom;if(n){for(var p=n.parentNode,h=r.parentNode;h&&h!==p;h=h.parentNode){c=d.clone(h,!1);for(var m=0;m<t.length&&null!==(c=oE(e,t[m],s,c));m++);if(c){l&&c.appendChild(l);u||(u=c);l=c}}!o||a.mixed&&d.isBlock(n)||(r=d.split(n,r));if(l){i.parentNode.insertBefore(l,i);u.appendChild(i);gf(a)&&Fx(d,a,s,l)}}return r},sE=function(e,t,n,r,i){var o=e.formatter.get(t),a=o[0],s=!0,c=e.dom,l=e.selection,u=function(r){var s=iE(e,r,t,n,i);return aE(e,o,s,r,r,!0,a,n)},d=function(e){return $m(e)&&kr(e)&&("_start"===e.id||"_end"===e.id)},p=function(t){return X(o,(function(r){return rE(e,r,n,t,t)}))},h=function(t){var n=!0,r=!1;if(kr(t)&&c.getContentEditable(t)){n=s;s="true"===c.getContentEditable(t);r=!0}var i=be(t.childNodes);if(s&&!r){var l=p(t)||X(o,(function(e){return ZC(c,t,e)})),u=t.parentNode;!l&&x(u)&&Of(a)&&p(u)}if(a.deep&&i.length){for(var d=0;d<i.length;d++)h(i[d]);r&&(s=n)}Q(["underline","line-through","overline"],(function(n){kr(t)&&e.dom.getStyle(t,"text-decoration")===n&&t.parentNode&&uf(c,t.parentNode)===n&&rE(e,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:n}},null,t)}))},m=function(e){var t=c.get(e?"_start":"_end"),n=t[e?"firstChild":"lastChild"];d(n)&&(n=n[e?"firstChild":"lastChild"]);qr(n)&&0===n.data.length&&(n=e?t.previousSibling||t.nextSibling:t.nextSibling||t.previousSibling);c.remove(t,!0);return n},f=function(t){var n,r,i=Pf(e,t,o,t.collapsed);if(a.split){i=$g(i);if((n=Kx(e,i,!0))!==(r=Kx(e,i))){n=Yx(n,!0);r=Yx(r,!1);if($x(c,n,r)){var s=q.from(n.firstChild).getOr(n);u(Jx(c,s,!0,"span",{id:"_start","data-mce-type":"bookmark"}));m(!0);return}if($x(c,r,n)){s=q.from(r.lastChild).getOr(r);u(Jx(c,s,!1,"span",{id:"_end","data-mce-type":"bookmark"}));m(!1);return}n=Xx(c,n,"span",{id:"_start","data-mce-type":"bookmark"});r=Xx(c,r,"span",{id:"_end","data-mce-type":"bookmark"});var l=c.createRng();l.setStartAfter(n);l.setEndBefore(r);Rf(c,l,(function(e){Q(e,(function(e){$m(e)||$m(e.parentNode)||u(e)}))}));u(n);u(r);n=m(!0);r=m()}else n=r=u(n);i.startContainer=n.parentNode?n.parentNode:n;i.startOffset=c.nodeIndex(n);i.endContainer=r.parentNode?r.parentNode:r;i.endOffset=c.nodeIndex(r)+1}Rf(c,i,(function(e){Q(e,h)}))};if(r){if(Jm(r)){var g=c.createRng();g.setStartBefore(r);g.setEndAfter(r);f(g)}else f(r);Eg(e,t,r,n)}else if("false"!==c.getContentEditable(l.getNode())){if(l.isCollapsed()&&gf(a)&&!Hf(e).length)Cx(e,t,n,i);else{Qf(l,!0,(function(){Jf(e,f)}));gf(a)&&nx(e,t,n,l.getStart())&&Zm(c,l,l.getRng());e.nodeChanged()}Eg(e,t,r,n)}else{r=l.getNode();for(var b=0;b<o.length&&(!o[b].ceFalseOverride||!rE(e,o[b],n,r,r));b++);Eg(e,t,r,n)}},cE=on.each,lE=function(e,t,n,r){var i=function(t){if(1===t.nodeType&&t.parentNode&&1===t.parentNode.nodeType){var n=uf(e,t.parentNode);e.getStyle(t,"color")&&n?e.setStyle(t,"text-decoration",n):e.getStyle(t,"text-decoration")===n&&e.setStyle(t,"text-decoration",null)}};if(t.styles&&(t.styles.color||t.styles.textDecoration)){on.walk(r,i,"childNodes");i(r)}},uE=function(e,t,n,r){t.styles&&t.styles.backgroundColor&&Mx(r,Ux(e,"fontSize"),Vx(e,"backgroundColor",af(t.styles.backgroundColor,n)))},dE=function(e,t,n,r){if(gf(t)&&("sub"===t.inline||"sup"===t.inline)){Mx(r,Ux(e,"fontSize"),Vx(e,"fontSize",""));e.remove(e.select("sup"===t.inline?"sub":"sup",r),!0)}},pE=function(e,t,n,r){cE(t,(function(t){gf(t)&&cE(e.dom.select(t.inline,r),(function(r){kx(r)&&rE(e,t,n,r,t.exact?r:null)}));Lx(e.dom,t,r)}))},hE=function(e,t,n,r,i){tx(e,i.parentNode,n,r)&&rE(e,t,r,i)||t.merge_with_parents&&e.dom.getParent(i.parentNode,(function(o){if(tx(e,o,n,r)){rE(e,t,r,i);return!0}}))},mE=on.each,fE=function(e){return kr(e)&&!$m(e)&&!Tm(e)&&!Mr(e)},gE=function(e,t,n,r){if(Pp(e)&&gf(t)){var i=bs(e.schema),o=zC(un.fromDom(n),(function(e){return Tm(e.dom)}));return De(i,r)&&La(un.fromDom(n.parentNode),!1)&&!o}return!1},bE=function(e,t,n,r){var i=e.formatter.get(t),o=i[0],a=!r&&e.selection.isCollapsed(),s=e.dom,c=e.selection,l=function(e,t){void 0===t&&(t=o);E(t.onformat)&&t.onformat(e,t,n,r);mE(t.styles,(function(t,r){s.setStyle(e,r,af(t,n))}));if(t.styles){var i=s.getAttrib(e,"style");i&&s.setAttrib(e,"data-mce-style",i)}mE(t.attributes,(function(t,r){s.setAttrib(e,r,af(t,n))}));mE(t.classes,(function(t){t=af(t,n);s.hasClass(e,t)||s.addClass(e,t)}))},u=function(e,t){var n=!1;mE(e,(function(e){if(!ff(e))return!1;if((!x(e.collapsed)||e.collapsed===a)&&s.is(t,e.selector)&&!Tm(t)){l(t,e);n=!0;return!1}}));return n},d=function(e){if(g(e)){var t=s.create(e);l(t);return t}return null},p=function(r,a,s){var c=[],p=!0,h=o.inline||o.block,m=d(h);Rf(r,a,(function(a){var d,f=function(a){var g=!1,b=p,O=a.nodeName.toLowerCase(),y=a.parentNode,j=y.nodeName.toLowerCase();if(kr(a)&&r.getContentEditable(a)){b=p;p="true"===r.getContentEditable(a);g=!0}if(!$r(a)||gE(e,o,a,j))if(mf(o)&&o.wrapper&&tx(e,a,t,n))d=null;else if(p&&!g&&mf(o)&&!o.wrapper&&tf(e,O)&&nf(e,j,h)){var v=r.rename(a,h);l(v);c.push(v);d=null}else{if(ff(o)){var C=u(i,a);!C&&x(y)&&Of(o)&&(C=u(i,y));if(!gf(o)||C){d=null;return}}if(!p||g||!nf(e,h,O)||!nf(e,j,h)||!s&&qr(a)&&Ko(a.data)||Tm(a)||gf(o)&&r.isBlock(a)){d=null;Q(be(a.childNodes),f);g&&(p=b);d=null}else{if(!d){d=r.clone(m,!1);a.parentNode.insertBefore(d,a);c.push(d)}d.appendChild(a)}}else{d=null;mf(o)&&r.remove(a)}};Q(a,f)}));!0===o.links&&Q(c,(function(e){var t=function(e){"A"===e.nodeName&&l(e,o);Q(be(e.childNodes),t)};t(e)}));Q(c,(function(a){var s=function(e){return oe(e.childNodes,fE).filter((function(e){return ZC(r,e,o)})).map((function(t){var n=r.clone(t,!1);l(n);r.replace(n,e,!0);r.remove(t,!0);return n})).getOr(e)},u=function(e){var t=0;Q(e.childNodes,(function(e){of(e)||$m(e)||t++}));return t}(a);if(!(c.length>1)&&r.isBlock(a)||0!==u){if(gf(o)||mf(o)&&o.wrapper){o.exact||1!==u||(a=s(a));pE(e,i,n,a);hE(e,o,t,n,a);uE(r,o,n,a);lE(r,o,n,a);dE(r,o,n,a);Fx(r,o,n,a)}}else r.remove(a,!0)}))};if("false"!==s.getContentEditable(c.getNode())){if(o){if(r)if(Jm(r)){if(!u(i,r)){var h=s.createRng();h.setStartBefore(r);h.setEndAfter(r);p(s,Pf(e,h,i),!0)}}else p(s,r,!0);else if(a&&gf(o)&&!Hf(e).length)vx(e,t,n);else{var m=c.getNode(),f=i[0];e.settings.forced_root_block||!f.defaultBlock||s.getParent(m,s.isBlock)||bE(e,f.defaultBlock);c.setRng(eC(c.getRng()));Qf(c,!0,(function(){Jf(e,(function(t,n){var r=n?t:Pf(e,t,i);p(s,r,!1)}))}));Zm(s,c,c.getRng());e.nodeChanged()}Ax(t,e)}xg(e,t,r,n)}else{r=c.getNode();for(var b=0,O=i.length;b<O;b++){var y=i[b];if(y.ceFalseOverride&&ff(y)&&s.is(r,y.selector)){l(r,y);break}}xg(e,t,r,n)}},OE=function(e){return Ae(e,"vars")},yE=function(e,t){e.set({});t.on("NodeChange",(function(n){xE(t,n.element,e.get())}));t.on("FormatApply FormatRemove",(function(n){var r=q.from(n.node).map((function(e){return Jm(e)?e:e.startContainer})).bind((function(e){return kr(e)?q.some(e):q.from(e.parentElement)})).getOrThunk((function(){return jE(t)}));xE(t,r,e.get())}))},jE=function(e){return e.selection.getStart()},vE=function(e,t,n,r,i){return ie(t,(function(t){var o=e.formatter.matchNode(t,n,null!=i?i:{},r);return!v(o)}),(function(t){return!!JC(e,t,n)||!r&&x(e.formatter.matchNode(t,n,i,!0))}))},CE=function(e,t){var n=null!=t?t:jE(e);return te(df(e.dom,n),(function(e){return kr(e)&&!Mr(e)}))},xE=function(e,t,n){var r=CE(e,t);ve(n,(function(n,i){var o=function(n){var o=vE(e,r,i,n.similar,OE(n)?n.vars:void 0),a=o.isSome();if(n.state.get()!==a){n.state.set(a);var s=o.getOr(t);OE(n)?n.callback(a,{node:s,format:i,parents:r}):Q(n.callbacks,(function(e){return e(a,{node:s,format:i,parents:r})}))}};Q([n.withSimilar,n.withoutSimilar],o);Q(n.withVars,o)}))},EE=function(e,t,n,r,i,o){var a=t.get();Q(n.split(","),(function(t){var n=Ne(a,t).getOrThunk((function(){var e={withSimilar:{state:_l(!1),similar:!0,callbacks:[]},withoutSimilar:{state:_l(!1),similar:!1,callbacks:[]},withVars:[]};a[t]=e;return e})),s=function(){var n=CE(e);return vE(e,n,t,i,o).isSome()};if(v(o)){var c=i?n.withSimilar:n.withoutSimilar;c.callbacks.push(r);1===c.callbacks.length&&c.state.set(s())}else n.withVars.push({state:_l(s()),similar:i,vars:o,callback:r})}));t.set(a)},TE=function(e,t,n){var r=e.get();Q(t.split(","),(function(e){return Ne(r,e).each((function(t){r[e]={withSimilar:qe(qe({},t.withSimilar),{callbacks:te(t.withSimilar.callbacks,(function(e){return e!==n}))}),withoutSimilar:qe(qe({},t.withoutSimilar),{callbacks:te(t.withoutSimilar.callbacks,(function(e){return e!==n}))}),withVars:te(t.withVars,(function(e){return e.callback!==n}))}}))}));e.set(r)},SE=function(e,t,n,r,i,o){null===t.get()&&yE(t,e);EE(e,t,n,r,i,o);return{unbind:function(){return TE(t,n,r)}}},IE=function(e,t,n,r){var i=e.formatter.get(t);!nx(e,t,n,r)||"toggle"in i[0]&&!i[0].toggle?bE(e,t,n,r):sE(e,t,n,r)},wE=function(e,t){var n=(t||document).createDocumentFragment();Q(e,(function(e){n.appendChild(e.dom)}));return un.fromDom(n)},_E=function(e,t,n){return{element:e,width:t,rows:n}},NE=function(e,t){return{element:e,cells:t}},AE=function(e,t){return{x:e,y:t}},DE=function(e,t){var n=parseInt(ci(e,t),10);return isNaN(n)?1:n},kE=function(e,t,n,r,i){for(var o=DE(i,"rowspan"),a=DE(i,"colspan"),s=e.rows,c=n;c<n+o;c++){s[c]||(s[c]=NE(yu(r),[]));for(var l=t;l<t+a;l++){s[c].cells[l]=c===n&&l===t?i:Ou(i)}}},PE=function(e,t,n){var r=e.rows;return!!(r[n]?r[n].cells:[])[t]},RE=function(e,t,n){for(;PE(e,t,n);)t++;return t},FE=function(e){return re(e,(function(e,t){return t.cells.length>e?t.cells.length:e}),0)},LE=function(e,t){for(var n=e.rows,r=0;r<n.length;r++)for(var i=n[r].cells,o=0;o<i.length;o++)if(xn(i[o],t))return q.some(AE(o,r));return q.none()},ME=function(e,t,n,r,i){for(var o=[],a=e.rows,s=n;s<=i;s++){var c=a[s].cells,l=t<r?c.slice(t,r+1):c.slice(r,t+1);o.push(NE(a[s].element,l))}return o},BE=function(e,t,n){var r=t.x,i=t.y,o=n.x,a=n.y,s=i<a?ME(e,r,i,o,a):ME(e,r,a,o,i);return _E(e.element,FE(s),s)},UE=function(e,t){var n=Ou(e.element),r=un.fromTag("tbody");mr(r,t);dr(n,r);return n},VE=function(e){return J(e.rows,(function(e){var t=J(e.cells,(function(e){var t=yu(e);di(t,"colspan");di(t,"rowspan");return t})),n=Ou(e.element);mr(n,t);return n}))},HE=function(e){var t=_E(Ou(e),0,[]);Q(Zl(e,"tr"),(function(e,n){Q(Zl(e,"td,th"),(function(r,i){kE(t,RE(t,i,n),n,e,r)}))}));return _E(t.element,FE(t.rows),t.rows)},qE=function(e){return UE(e,VE(e))},GE=function(e,t,n){return LE(e,t).bind((function(t){return LE(e,n).map((function(n){return BE(e,t,n)}))}))},WE=function(e){return oe(e,(function(e){return"ul"===In(e)||"ol"===In(e)}))},zE=function(e,t){return oe(e,(function(e){return"li"===In(e)&&Kf(e,t)})).fold(_([]),(function(t){return WE(e).map((function(e){var t=un.fromTag(In(e)),n=Ie(Oi(e),(function(e,t){return ct(t,"list-style")}));mi(t,n);return[un.fromTag("li"),t]})).getOr([])}))},$E=function(e,t){var n=re(t,(function(e,t){dr(t,e);return t}),e);return t.length>0?wE([n]):n},KE=function(e){return Uo(e)?Un(e).filter(Bo).fold(_([]),(function(t){return[e,t]})):Bo(e)?[e]:[]},YE=function(e,t){var n=un.fromDom(t.commonAncestorContainer),r=Yy(n,e),i=te(r,(function(e){return Fo(e)||ko(e)})),o=zE(r,t),a=i.concat(o.length?o:KE(n));return J(a,Ou)},XE=function(){return wE([])},JE=function(e,t){return $E(un.fromDom(t.cloneContents()),YE(e,t))},QE=function(e,t){return ho(t,"table",D(xn,e))},ZE=function(e,t){return QE(e,t[0]).bind((function(e){var n=t[0],r=t[t.length-1],i=HE(e);return GE(i,n,r).map((function(e){return wE([qE(e)])}))})).getOrThunk(XE)},eT=function(e,t){return t.length>0&&t[0].collapsed?XE():JE(e,t[0])},tT=function(e,t){var n=Vf(t,e);return n.length>0?ZE(e,n):eT(e,t)},nT=function(e){return e.replace(/^[ \f\n\r\t\v]+/,"")},rT=function(e,t){return t>=0&&t<e.length&&Ym(e.charAt(t))},iT=function(e,t){var n=Yo(e.innerText);return t?nT(n):n},oT=function(e){return e.map((function(e){return e.nodeName})).getOr("div").toLowerCase()},aT=function(e){return q.from(e.selection.getRng()).map((function(t){var n=q.from(e.dom.getParent(t.commonAncestorContainer,e.dom.isBlock)),r=e.getBody(),i=oT(n),o=Qt.browser.isIE()&&"pre"!==i,a=e.dom.add(r,i,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},t.cloneContents()),s=iT(a,o),c=Yo(a.textContent);e.dom.remove(a);if(rT(c,0)||rT(c,c.length-1)){var l=n.getOr(r),u=iT(l,o),d=u.indexOf(s);return-1===d?s:(rT(u,d-1)?" ":"")+s+(rT(u,d+s.length)?" ":"")}return s})).getOr("")},sT=function(e,t){var n=e.selection.getRng(),r=e.dom.create("body"),i=e.selection.getSel(),o=LO(e,Ff(i)),a=t.contextual?tT(un.fromDom(e.getBody()),o).dom:n.cloneContents();a&&r.appendChild(a);return e.selection.serializer.serialize(r,t)},cT=function(e,t){return qe(qe({},e),{format:t,get:!0,selection:!0})},lT=function(e,t,n){void 0===n&&(n={});var r=cT(n,t),i=e.fire("BeforeGetContent",r);if(i.isDefaultPrevented()){e.fire("GetContent",i);return i.content}if("text"===i.format)return aT(e);i.getInner=!0;var o=sT(e,i);if("tree"===i.format)return o;i.content=e.selection.isCollapsed()?"":o;e.fire("GetContent",i);return i.content},uT=0,dT=1,pT=2,hT=function(e,t){var n=e.length+t.length+2,r=new Array(n),i=new Array(n),o=function(e,t,n){return{start:e,end:t,diag:n}},a=function(n,r,i,o,s){var l=c(n,r,i,o);if(null===l||l.start===r&&l.diag===r-o||l.end===n&&l.diag===n-i)for(var u=n,d=i;u<r||d<o;)if(u<r&&d<o&&e[u]===t[d]){s.push([uT,e[u]]);++u;++d}else if(r-n>o-i){s.push([pT,e[u]]);++u}else{s.push([dT,t[d]]);++d}else{a(n,l.start,i,l.start-l.diag,s);for(var p=l.start;p<l.end;++p)s.push([uT,e[p]]);a(l.end,r,l.end-l.diag,o,s)}},s=function(n,r,i,a){for(var s=n;s-r<a&&s<i&&e[s]===t[s-r];)++s;return o(n,s,r)},c=function(n,o,a,c){var l=o-n,u=c-a;if(0===l||0===u)return null;var d,p,h,m,f,g=l-u,b=u+l,O=(b%2==0?b:b+1)/2;r[1+O]=n;i[1+O]=o+1;for(d=0;d<=O;++d){for(p=-d;p<=d;p+=2){h=p+O;p===-d||p!==d&&r[h-1]<r[h+1]?r[h]=r[h+1]:r[h]=r[h-1]+1;f=(m=r[h])-n+a-p;for(;m<o&&f<c&&e[m]===t[f];){r[h]=++m;++f}if(g%2!=0&&g-d<=p&&p<=g+d&&i[h-g]<=r[h])return s(i[h-g],p+n-a,o,c)}for(p=g-d;p<=g+d;p+=2){h=p+O-g;p===g-d||p!==g+d&&i[h+1]<=i[h-1]?i[h]=i[h+1]-1:i[h]=i[h-1];f=(m=i[h]-1)-n+a-p;for(;m>=n&&f>=a&&e[m]===t[f];){i[h]=m--;f--}if(g%2==0&&-d<=p&&p<=d&&i[h]<=r[h+g])return s(i[h],p+n-a,o,c)}}},l=[];a(0,e.length,0,t.length,l);return l},mT=function(e){return kr(e)?e.outerHTML:qr(e)?ss.encodeRaw(e.data,!1):Gr(e)?"\x3c!--"+e.data+"--\x3e":""},fT=function(e){var t,n=document.createElement("div"),r=document.createDocumentFragment();e&&(n.innerHTML=e);for(;t=n.firstChild;)r.appendChild(t);return r},gT=function(e,t,n){var r=fT(t);if(e.hasChildNodes()&&n<e.childNodes.length){var i=e.childNodes[n];i.parentNode.insertBefore(r,i)}else e.appendChild(r)},bT=function(e,t){if(e.hasChildNodes()&&t<e.childNodes.length){var n=e.childNodes[t];n.parentNode.removeChild(n)}},OT=function(e,t){var n=0;Q(e,(function(e){if(e[0]===uT)n++;else if(e[0]===dT){gT(t,e[1],n);n++}else e[0]===pT&&bT(t,n)}))},yT=function(e){return te(J(be(e.childNodes),mT),(function(e){return e.length>0}))},jT=function(e,t){var n=J(be(t.childNodes),mT);OT(hT(n,e),t);return t},vT=ze((function(){return document.implementation.createHTMLDocument("undo")})),CT=function(e){return-1!==e.indexOf("</iframe>")},xT=function(e){return{type:"fragmented",fragments:e,content:"",bookmark:null,beforeBookmark:null}},ET=function(e){return{type:"complete",fragments:null,content:e,bookmark:null,beforeBookmark:null}},TT=function(e){var t=yT(e.getBody()),n=ce(t,(function(t){var n=ly(e.serializer,t);return n.length>0?[n]:[]})),r=n.join("");return CT(r)?xT(n):ET(r)},ST=function(e,t,n){var r=n?t.beforeBookmark:t.bookmark;"fragmented"===t.type?jT(t.fragments,e.getBody()):e.setContent(t.content,{format:"raw",no_selection:!x(r)||!Am(r)||!r.isFakeCaret});e.selection.moveToBookmark(r)},IT=function(e){return"fragmented"===e.type?e.fragments.join(""):e.content},wT=function(e){var t=un.fromTag("body",vT());gu(t,IT(e));Q(Zl(t,"*[data-mce-bogus]"),br);return fu(t)},_T=function(e,t){return IT(e)===IT(t)},NT=function(e,t){return wT(e)===wT(t)},AT=function(e,t){return!(!e||!t)&&(!!_T(e,t)||NT(e,t))},DT=function(e){return 0===e.get()},kT=function(e,t,n){DT(n)&&(e.typing=t)},PT=function(e,t){if(e.typing){kT(e,!1,t);e.add()}},RT=function(e){if(e.typing){e.typing=!1;e.add()}},FT=function(e,t,n){DT(t)&&n.set(Bd(e.selection))},LT=function(e,t,n,r,i,o,a){var s=TT(e);o=o||{};o=on.extend(o,s);if(!1===DT(r)||e.removed)return null;var c=t.data[n.get()];if(e.fire("BeforeAddUndo",{level:o,lastLevel:c,originalEvent:a}).isDefaultPrevented())return null;if(c&&AT(c,o))return null;t.data[n.get()]&&i.get().each((function(e){t.data[n.get()].beforeBookmark=e}));var l=Gp(e);if(l&&t.data.length>l){for(var u=0;u<t.data.length-1;u++)t.data[u]=t.data[u+1];t.data.length--;n.set(t.data.length)}o.bookmark=Bd(e.selection);n.get()<t.data.length-1&&(t.data.length=n.get()+1);t.data.push(o);n.set(t.data.length-1);var d={level:o,lastLevel:c,originalEvent:a};if(n.get()>0){e.setDirty(!0);e.fire("AddUndo",d);e.fire("change",d)}else e.fire("AddUndo",d);return o},MT=function(e,t,n){t.data=[];n.set(0);t.typing=!1;e.fire("ClearUndos")},BT=function(e,t,n,r,i){if(t.transact(r)){var o=t.data[n.get()].bookmark,a=t.data[n.get()-1];ST(e,a,!0);t.transact(i)&&(t.data[n.get()-1].beforeBookmark=o)}},UT=function(e,t,n){var r;if(t.get()<n.length-1){t.set(t.get()+1);r=n[t.get()];ST(e,r,!1);e.setDirty(!0);e.fire("Redo",{level:r})}return r},VT=function(e,t,n,r){var i;if(t.typing){t.add();t.typing=!1;kT(t,!1,n)}if(r.get()>0){r.set(r.get()-1);i=t.data[r.get()];ST(e,i,!0);e.setDirty(!0);e.fire("Undo",{level:i})}return i},HT=function(e){e.clear();e.add()},qT=function(e,t,n){return n.get()>0||t.typing&&t.data[0]&&!AT(TT(e),t.data[0])},GT=function(e,t){return t.get()<e.data.length-1&&!e.typing},WT=function(e,t,n){PT(e,t);e.beforeChange();e.ignore(n);return e.add()},zT=function(e,t){try{e.set(e.get()+1);t()}finally{e.set(e.get()-1)}},$T=function(e,t){var n=e.dom,r=x(t)?t:e.getBody();v(e.hasVisual)&&(e.hasVisual=Jp(e));Q(n.select("table,a",r),(function(t){switch(t.nodeName){case"TABLE":var r=Qp(e),i=n.getAttrib(t,"border");i&&"0"!==i||!e.hasVisual?n.removeClass(t,r):n.addClass(t,r);break;case"A":if(!n.getAttrib(t,"href")){var o=n.getAttrib(t,"name")||t.id,a=Zp(e);o&&e.hasVisual?n.addClass(t,a):n.removeClass(t,a)}}}));e.fire("VisualAid",{element:t,hasVisual:e.hasVisual})},KT=function(e){return{undoManager:{beforeChange:function(t,n){return FT(e,t,n)},add:function(t,n,r,i,o,a){return LT(e,t,n,r,i,o,a)},undo:function(t,n,r){return VT(e,t,n,r)},redo:function(t,n){return UT(e,t,n)},clear:function(t,n){return MT(e,t,n)},reset:function(e){return HT(e)},hasUndo:function(t,n){return qT(e,t,n)},hasRedo:function(e,t){return GT(e,t)},transact:function(e,t,n){return WT(e,t,n)},ignore:function(e,t){return zT(e,t)},extra:function(t,n,r,i){return BT(e,t,n,r,i)}},formatter:{match:function(t,n,r,i){return nx(e,t,n,r,i)},matchAll:function(t,n){return rx(e,t,n)},matchNode:function(t,n,r,i){return tx(e,t,n,r,i)},canApply:function(t){return ox(e,t)},closest:function(t){return ix(e,t)},apply:function(t,n,r){return bE(e,t,n,r)},remove:function(t,n,r,i){return sE(e,t,n,r,i)},toggle:function(t,n,r){return IE(e,t,n,r)},formatChanged:function(t,n,r,i,o){return SE(e,t,n,r,i,o)}},editor:{getContent:function(t,n){return my(e,t,n)},setContent:function(t,n){return WC(e,t,n)},insertContent:function(t,n){return PC(e,t,n)},addVisual:function(t){return $T(e,t)}},selection:{getContent:function(t,n){return lT(e,t,n)}},raw:{getModel:function(){return q.none()}}}},YT=function(e){var t=function(e){return b(e)?e:{}},n=e.undoManager,r=e.formatter,i=e.editor,o=e.selection,a=e.raw;return{undoManager:{beforeChange:n.beforeChange,add:n.add,undo:n.undo,redo:n.redo,clear:n.clear,reset:n.reset,hasUndo:n.hasUndo,hasRedo:n.hasRedo,transact:function(e,t,r){return n.transact(r)},ignore:function(e,t){return n.ignore(t)},extra:function(e,t,r,i){return n.extra(r,i)}},formatter:{match:function(e,n,i,o){return r.match(e,t(n),o)},matchAll:r.matchAll,matchNode:r.matchNode,canApply:function(e){return r.canApply(e)},closest:function(e){return r.closest(e)},apply:function(e,n,i){return r.apply(e,t(n))},remove:function(e,n,i,o){return r.remove(e,t(n))},toggle:function(e,n,i){return r.toggle(e,t(n))},formatChanged:function(e,t,n,i,o){return r.formatChanged(t,n,i,o)}},editor:{getContent:function(e,t){return i.getContent(e)},setContent:function(e,t){return i.setContent(e,t)},insertContent:function(e,t){return i.insertContent(e)},addVisual:i.addVisual},selection:{getContent:function(e,t){return o.getContent(t)}},raw:{getModel:function(){return q.some(a.getRawModel())}}}},XT=function(){var e=_(null),t=_("");return{undoManager:{beforeChange:S,add:e,undo:e,redo:e,clear:S,reset:S,hasUndo:L,hasRedo:L,transact:e,ignore:S,extra:S},formatter:{match:L,matchAll:_([]),matchNode:_(void 0),canApply:L,closest:t,apply:S,remove:S,toggle:S,formatChanged:_({unbind:S})},editor:{getContent:t,setContent:t,insertContent:S,addVisual:S},selection:{getContent:t},raw:{getModel:_(q.none())}}},JT=function(e){return Ae(e.plugins,"rtc")},QT=function(e){return Ne(e.plugins,"rtc").bind((function(e){return q.from(e.setup)}))},ZT=function(e){var t=e;return QT(e).fold((function(){t.rtcInstance=KT(e);return q.none()}),(function(e){t.rtcInstance=XT();return q.some((function(){return e().then((function(e){t.rtcInstance=YT(e);return e.rtc.isRemote}))}))}))},eS=function(e){return e.rtcInstance?e.rtcInstance:KT(e)},tS=function(e){var t=e.rtcInstance;if(t)return t;throw new Error("Failed to get RTC instance not yet initialized.")},nS=function(e,t,n){tS(e).undoManager.beforeChange(t,n)},rS=function(e,t,n,r,i,o,a){return tS(e).undoManager.add(t,n,r,i,o,a)},iS=function(e,t,n,r){return tS(e).undoManager.undo(t,n,r)},oS=function(e,t,n){return tS(e).undoManager.redo(t,n)},aS=function(e,t,n){tS(e).undoManager.clear(t,n)},sS=function(e,t){tS(e).undoManager.reset(t)},cS=function(e,t,n){return tS(e).undoManager.hasUndo(t,n)},lS=function(e,t,n){return tS(e).undoManager.hasRedo(t,n)},uS=function(e,t,n,r){return tS(e).undoManager.transact(t,n,r)},dS=function(e,t,n){tS(e).undoManager.ignore(t,n)},pS=function(e,t,n,r,i){tS(e).undoManager.extra(t,n,r,i)},hS=function(e,t,n,r,i){return tS(e).formatter.match(t,n,r,i)},mS=function(e,t,n){return tS(e).formatter.matchAll(t,n)},fS=function(e,t,n,r,i){return tS(e).formatter.matchNode(t,n,r,i)},gS=function(e,t){return tS(e).formatter.canApply(t)},bS=function(e,t){return tS(e).formatter.closest(t)},OS=function(e,t,n,r){tS(e).formatter.apply(t,n,r)},yS=function(e,t,n,r,i){tS(e).formatter.remove(t,n,r,i)},jS=function(e,t,n,r){tS(e).formatter.toggle(t,n,r)},vS=function(e,t,n,r,i,o){return tS(e).formatter.formatChanged(t,n,r,i,o)},CS=function(e,t,n){return eS(e).editor.getContent(t,n)},xS=function(e,t,n){return eS(e).editor.setContent(t,n)},ES=function(e,t,n){return eS(e).editor.insertContent(t,n)},TS=function(e,t,n){return tS(e).selection.getContent(t,n)},SS=function(e,t){return tS(e).editor.addVisual(t)},IS=function(e,t){void 0===t&&(t={});var n=t.format?t.format:"html";return TS(e,n,t)},wS=function(e){if(0===e.dom.length){gr(e);return q.none()}return q.some(e)},_S=function(e,t){return e.filter((function(e){return cg.isBookmarkNode(e.dom)})).bind(t?Gn:qn)},NS=function(e,t,n,r){var i=e.dom,o=t.dom,a=r?i.length:o.length;if(r){Fj(i,o,!1,!r);n.setStart(o,a)}else{Fj(o,i,!1,!r);n.setEnd(o,a)}},AS=function(e,t){Un(e).each((function(n){var r=e.dom;t&&jj(n,id(r,0))?Pj(r,0):!t&&Cj(n,id(r,r.length))&&Rj(r,r.length)}))},DS=function(e,t,n,r){e.bind((function(e){(r?Rj:Pj)(e.dom,r?e.dom.length:0);return t.filter(Dn).map((function(t){return NS(e,t,n,r)}))})).orThunk((function(){return _S(t,r).or(t).filter(Dn).map((function(e){return AS(e,r)}))}))},kS=function(e,t){var n=q.from(t.firstChild).map(un.fromDom),r=q.from(t.lastChild).map(un.fromDom);e.deleteContents();e.insertNode(t);var i=n.bind(qn).filter(Dn).bind(wS),o=r.bind(Gn).filter(Dn).bind(wS);DS(i,n,e,!0);DS(o,r,e,!1);e.collapse(!1)},PS=function(e,t){return qe(qe({format:"html"},e),{set:!0,selection:!0,content:t})},RS=function(e,t){if("raw"!==t.format){var n=e.selection.getRng(),r=e.dom.getParent(n.commonAncestorContainer,e.dom.isBlock),i=r?{context:r.nodeName.toLowerCase()}:{},o=e.parser.parse(t.content,qe(qe({isRootContent:!0,forced_root_block:!1},i),t));return yy({validate:e.validate},e.schema).serialize(o)}return t.content},FS=function(e,t,n){void 0===n&&(n={});var r=PS(n,t),i=r;if(!r.no_events){var o=e.fire("BeforeSetContent",r);if(o.isDefaultPrevented()){e.fire("SetContent",o);return}i=o}i.content=RS(e,i);var a=e.selection.getRng();kS(a,a.createContextualFragment(i.content));e.selection.setRng(a);Tb(e,a);i.no_events||e.fire("SetContent",i)},LS=function(e,t,n){if(e&&Ae(e,t)){var r=te(e[t],(function(e){return e!==n}));0===r.length?delete e[t]:e[t]=r}};function MS(e,t){var n,r,i=function(t,n){return oe(n,(function(n){return e.is(n,t)}))},o=function(t){return e.getParents(t,null,e.getRoot())};return{selectorChangedWithUnbind:function(e,a){if(!n){n={};r={};t.on("NodeChange",(function(e){var t=e.element,a=o(t),s={};on.each(n,(function(e,t){i(t,a).each((function(n){if(!r[t]){Q(e,(function(e){e(!0,{node:n,selector:t,parents:a})}));r[t]=e}s[t]=e}))}));on.each(r,(function(e,n){if(!s[n]){delete r[n];on.each(e,(function(e){e(!1,{node:t,selector:n,parents:a})}))}}))}))}n[e]||(n[e]=[]);n[e].push(a);i(e,o(t.selection.getStart())).each((function(){r[e]=n[e]}));return{unbind:function(){LS(n,e,a);LS(r,e,a)}}}}}var BS=function(e){return!!e.select},US=function(e){return!(!e||!e.ownerDocument)&&Sn(un.fromDom(e.ownerDocument),un.fromDom(e))},VS=function(e){return!!e&&(!!BS(e)||US(e.startContainer)&&US(e.endContainer))},HS=function(e,t,n,r){var i,o,a=MS(e,r).selectorChangedWithUnbind,s=function(t,n){var i=e.createRng();if(x(t)&&x(n)){i.setStart(t,n);i.setEnd(t,n);g(i);h(!1)}else{Yf(e,i,r.getBody(),!0);g(i)}},c=function(e,t){return FS(r,e,t)},l=function(e){return AO(r.getBody(),f(),e)},u=function(e){return DO(r.getBody(),f(),e)},d=function(t,n){FO(e,t,n).each(g);return t},p=function(){var e=f(),t=m();return!(!e||e.item)&&(e.compareEndPoints?0===e.compareEndPoints("StartToEnd",e):!t||e.collapsed)},h=function(e){var t=f();t.collapse(!!e);g(t)},m=function(){return t.getSelection?t.getSelection():t.document.selection},f=function(){var n,a,s,c=function(e,t,n){try{return t.compareBoundaryPoints(e,n)}catch(e){return-1}},l=t.document;if(void 0!==r.bookmark&&!1===TO(r)){var u=Zb(r);if(u.isSome())return u.map((function(e){return LO(r,[e])[0]})).getOr(l.createRange())}try{if((n=m())&&!Dr(n.anchorNode)){a=n.rangeCount>0?n.getRangeAt(0):n.createRange?n.createRange():l.createRange();a=LO(r,[a])[0]}}catch(e){}a||(a=l.createRange?l.createRange():l.body.createTextRange());if(a.setStart&&9===a.startContainer.nodeType&&a.collapsed){s=e.getRoot();a.setStart(s,0);a.setEnd(s,0)}if(i&&o)if(0===c(a.START_TO_START,a,i)&&0===c(a.END_TO_END,a,i))a=o;else{i=null;o=null}return a},g=function(e,t){var n;if(VS(e)){var a=BS(e)?e:null;if(a){o=null;try{a.select()}catch(e){}}else{var s=m();e=r.fire("SetSelectionRange",{range:e,forward:t}).range;if(s){o=e;try{s.removeAllRanges();s.addRange(e)}catch(e){}if(!1===t&&s.extend){s.collapse(e.endContainer,e.endOffset);s.extend(e.startContainer,e.startOffset)}i=s.rangeCount>0?s.getRangeAt(0):null}if(!e.collapsed&&e.startContainer===e.endContainer&&s.setBaseAndExtent&&!Qt.ie&&e.endOffset-e.startOffset<2&&e.startContainer.hasChildNodes()&&(n=e.startContainer.childNodes[e.startOffset])&&"IMG"===n.tagName){s.setBaseAndExtent(e.startContainer,e.startOffset,e.endContainer,e.endOffset);s.anchorNode===e.startContainer&&s.focusNode===e.endContainer||s.setBaseAndExtent(n,0,n,1)}r.fire("AfterSetSelectionRange",{range:e,forward:t})}}},b=function(t){c(e.getOuterHTML(t));return t},O=function(){return PO(r.getBody(),f())},y=function(t,n){return RO(e,f(),t,n)},j=function(){var t=m(),n=null==t?void 0:t.anchorNode,r=null==t?void 0:t.focusNode;if(!t||!n||!r||Dr(n)||Dr(r))return!0;var i=e.createRng();i.setStart(n,t.anchorOffset);i.collapse(!0);var o=e.createRng();o.setStart(r,t.focusOffset);o.collapse(!0);return i.compareBoundaryPoints(i.START_TO_START,o)<=0},v=function(){var t=f(),n=m();if(!Mf(n)&&Xf(r)){var i=Wg(e,t);i.each((function(e){g(e,j())}));return i.getOr(t)}return t},C=function(){for(var t,n=e.getRoot();n&&"BODY"!==n.nodeName;){if(n.scrollHeight>n.clientHeight){t=n;break}n=n.parentNode}return t},E=function(e,t){x(e)?Eb(r,e,t):Tb(r,f(),t)},T=function(e,t){return g(Dg(e,t,r.getDoc()))},S=function(){var e=f();return e.collapsed?id.fromRangeStart(e).getClientRects()[0]:e.getBoundingClientRect()},I=function(){t=i=o=null;N.destroy()},w={bookmarkManager:null,controlSelection:null,dom:e,win:t,serializer:n,editor:r,collapse:h,setCursorLocation:s,getContent:function(e){return IS(r,e)},setContent:c,getBookmark:function(e,t){return _.getBookmark(e,t)},moveToBookmark:function(e){return _.moveToBookmark(e)},select:d,isCollapsed:p,isForward:j,setNode:b,getNode:O,getSel:m,setRng:g,getRng:f,getStart:l,getEnd:u,getSelectedBlocks:y,normalize:v,selectorChanged:function(e,t){a(e,t);return w},selectorChangedWithUnbind:a,getScrollContainer:C,scrollIntoView:E,placeCaretAt:T,getBoundingClientRect:S,destroy:I},_=cg(w),N=Ig(w,r);w.bookmarkManager=_;w.controlSelection=N;return w},qS=function(e,t){Q(t,(function(t){e.attr(t,null)}))},GS=function(e,t,n){e.addNodeFilter("font",(function(e){Q(e,(function(e){var r=t.parse(e.attr("style")),i=e.attr("color"),o=e.attr("face"),a=e.attr("size");i&&(r.color=i);o&&(r["font-family"]=o);a&&(r["font-size"]=n[parseInt(e.attr("size"),10)-1]);e.name="span";e.attr("style",t.serialize(r));qS(e,["color","face","size"])}))}))},WS=function(e,t){e.addNodeFilter("strike",(function(e){Q(e,(function(e){var n=t.parse(e.attr("style"));n["text-decoration"]="line-through";e.name="span";e.attr("style",t.serialize(n))}))}))},zS=function(e,t){var n=Cs();t.convert_fonts_to_spans&&GS(e,n,on.explode(t.font_size_legacy_values));WS(e,n)},$S=function(e,t){t.inline_styles&&zS(e,t)},KS=function(e){return new go((function(t,n){var r=function(){n("Cannot convert "+e+" to Blob. Resource might not exist or is inaccessible.")};try{var i=new XMLHttpRequest;i.open("GET",e,!0);i.responseType="blob";i.onload=function(){200===i.status?t(i.response):r()};i.onerror=r;i.send()}catch(e){r()}}))},YS=function(e){var t,n=decodeURIComponent(e).split(","),r=/data:([^;]+)/.exec(n[0]);r&&(t=r[1]);return{type:t,data:n[1]}},XS=function(e,t){var n;try{n=atob(t)}catch(e){return q.none()}for(var r=new Uint8Array(n.length),i=0;i<r.length;i++)r[i]=n.charCodeAt(i);return q.some(new Blob([r],{type:e}))},JS=function(e){return new go((function(t){var n=YS(e),r=n.type,i=n.data;XS(r,i).fold((function(){return t(new Blob([]))}),t)}))},QS=function(e){return 0===e.indexOf("blob:")?KS(e):0===e.indexOf("data:")?JS(e):null},ZS=function(e){return new go((function(t){var n=new FileReader;n.onloadend=function(){t(n.result)};n.readAsDataURL(e)}))},eI=0,tI=function(e){return(e||"blobid")+eI++},nI=function(e,t,n,r){var i,o;if(0!==t.src.indexOf("blob:")){var a=YS(t.src),s=a.data,c=a.type;i=s;(o=e.getByData(i,c))?n({image:t,blobInfo:o}):QS(t.src).then((function(r){o=e.create(tI(),r,i);e.add(o);n({image:t,blobInfo:o})}),(function(e){r(e)}))}else(o=e.getByUri(t.src))?n({image:t,blobInfo:o}):QS(t.src).then((function(r){ZS(r).then((function(a){i=YS(a).data;o=e.create(tI(),r,i);e.add(o);n({image:t,blobInfo:o})}))}),(function(e){r(e)}))},rI=function(e){return e?be(e.getElementsByTagName("img")):[]},iI=function(e,t){var n={};return{findAll:function(r,i){i||(i=M);var o=te(rI(r),(function(t){var n=t.src;return!!Qt.fileApi&&(!t.hasAttribute("data-mce-bogus")&&(!t.hasAttribute("data-mce-placeholder")&&(!(!n||n===Qt.transparentSrc)&&(0===n.indexOf("blob:")?!e.isUploaded(n)&&i(t):0===n.indexOf("data:")&&i(t)))))})),a=J(o,(function(e){if(void 0!==n[e.src])return new go((function(t){n[e.src].then((function(n){if("string"==typeof n)return n;t({image:e,blobInfo:n.blobInfo})}))}));var r=new go((function(n,r){nI(t,e,n,r)})).then((function(e){delete n[e.image.src];return e})).catch((function(t){delete n[e.src];return t}));n[e.src]=r;return r}));return go.all(a)}}},oI=function(e,t,n,r){(e.padd_empty_with_br||t.insert)&&n[r.name]?r.empty().append(new HO("br",1)).shortEnded=!0:r.empty().append(new HO("#text",3)).value=zo},aI=function(e){return sI(e,"#text")&&e.firstChild.value===zo},sI=function(e,t){return e&&e.firstChild&&e.firstChild===e.lastChild&&e.firstChild.name===t},cI=function(e,t){var n=e.getElementRule(t.name);return n&&n.paddEmpty},lI=function(e,t,n,r){return r.isEmpty(t,n,(function(t){return cI(e,t)}))},uI=function(e,t){return e&&(Ae(t,e.name)||"br"===e.name)},dI=function(e){return x(e.attr("data-mce-bogus"))},pI=function(e){return e.attr("src")===Qt.transparentSrc||x(e.attr("data-mce-placeholder"))},hI=function(e,t){if(t.images_dataimg_filter){var n=new Image;n.src=e.attr("src");ve(e.attributes.map,(function(e,t){n.setAttribute(t,e)}));return t.images_dataimg_filter(n)}return!0},mI=function(e,t){var n=t.blob_cache,r=function(e){var r=e.attr("src");pI(e)||dI(e)||WO(r).filter((function(){return hI(e,t)})).bind((function(e){var t=e.type,r=e.data;return q.from(n.getByData(r,t)).orThunk((function(){return XS(t,r).map((function(e){var t=n.create(tI(),e,r);n.add(t);return t}))}))})).each((function(t){e.attr("src",t.blobUri())}))};n&&e.addAttributeFilter("src",(function(e){return Q(e,r)}))},fI=function(e,t){var n=e.schema;t.remove_trailing_brs&&e.addNodeFilter("br",(function(e,r,i){var o,a,s,c,l,u,d,p,h=e.length,m=on.extend({},n.getBlockElements()),f=n.getNonEmptyElements(),g=n.getWhiteSpaceElements();m.body=1;for(o=0;o<h;o++){s=(a=e[o]).parent;if(m[a.parent.name]&&a===s.lastChild){l=a.prev;for(;l;){if("span"!==(u=l.name)||"bookmark"!==l.attr("data-mce-type")){"br"===u&&(a=null);break}l=l.prev}if(a){a.remove();lI(n,f,g,s)&&(d=n.getElementRule(s.name))&&(d.removeEmpty?s.remove():d.paddEmpty&&oI(t,i,m,s))}}else{c=a;for(;s&&s.firstChild===c&&s.lastChild===c;){c=s;if(m[s.name])break;s=s.parent}if(c===s&&!0!==t.padd_empty_with_br){(p=new HO("#text",3)).value=zo;a.replace(p)}}}}));e.addAttributeFilter("href",(function(e){var n=e.length,r=function(e){return e.split(" ").filter((function(e){return e.length>0})).concat(["noopener"]).sort().join(" ")},i=function(e){var t=e?on.trim(e):"";return/\b(noopener)\b/g.test(t)?t:r(t)};if(!t.allow_unsafe_link_target)for(;n--;){var o=e[n];"a"===o.name&&"_blank"===o.attr("target")&&o.attr("rel",i(o.attr("rel")))}}));t.allow_html_in_named_anchor||e.addAttributeFilter("id,name",(function(e){for(var t,n,r,i,o=e.length;o--;)if("a"===(i=e[o]).name&&i.firstChild&&!i.attr("href")){r=i.parent;t=i.lastChild;do{n=t.prev;r.insert(t,i);t=n}while(t)}}));t.fix_list_elements&&e.addNodeFilter("ul,ol",(function(e){for(var t,n,r=e.length;r--;)if("ul"===(n=(t=e[r]).parent).name||"ol"===n.name)if(t.prev&&"li"===t.prev.name)t.prev.append(t);else{var i=new HO("li",1);i.attr("style","list-style-type: none");t.wrap(i)}}));t.validate&&n.getValidClasses()&&e.addAttributeFilter("class",(function(e){for(var t=n.getValidClasses(),r=e.length;r--;){for(var i=e[r],o=i.attr("class").split(" "),a="",s=0;s<o.length;s++){var c=o[s],l=!1,u=t["*"];u&&u[c]&&(l=!0);u=t[i.name];!l&&u&&u[c]&&(l=!0);if(l){a&&(a+=" ");a+=c}}a.length||(a=null);i.attr("class",a)}}));mI(e,t)},gI=on.makeMap,bI=on.each,OI=on.explode,yI=on.extend,jI=function(e,t){void 0===t&&(t=js());var n={},r=[],i={},o={};(e=e||{}).validate=!("validate"in e)||e.validate;e.root_name=e.root_name||"body";var a=function(e){for(var n=gI("tr,td,th,tbody,thead,tfoot,table"),r=t.getNonEmptyElements(),i=t.getWhiteSpaceElements(),o=t.getTextBlockElements(),a=t.getSpecialElements(),c=function(e,n){void 0===n&&(n=e.parent);if(a[e.name])e.empty().remove();else{for(var r=0,i=e.children();r<i.length;r++){var o=i[r];t.isValidChild(n.name,o.name)||c(o,n)}e.unwrap()}},l=0;l<e.length;l++){var u=e[l],d=void 0,p=void 0,h=void 0;if(u.parent&&!u.fixed)if(o[u.name]&&"li"===u.parent.name){for(var m=u.next;m&&o[m.name];){m.name="li";m.fixed=!0;u.parent.insert(m,u.parent);m=m.next}u.unwrap()}else{var f=[u];for(d=u.parent;d&&!t.isValidChild(d.name,u.name)&&!n[d.name];d=d.parent)f.push(d);if(d&&f.length>1)if(t.isValidChild(d.name,u.name)){f.reverse();for(var g=p=s(f[0].clone()),b=0;b<f.length-1;b++){if(t.isValidChild(g.name,f[b].name)){h=s(f[b].clone());g.append(h)}else h=g;for(var O=f[b].firstChild;O&&O!==f[b+1];){var y=O.next;h.append(O);O=y}g=h}if(lI(t,r,i,p))d.insert(u,f[0],!0);else{d.insert(p,f[0],!0);d.insert(u,p)}d=f[0];(lI(t,r,i,d)||sI(d,"br"))&&d.empty().remove()}else c(u);else if(u.parent){if("li"===u.name){if((m=u.prev)&&("ul"===m.name||"ol"===m.name)){m.append(u);continue}if((m=u.next)&&("ul"===m.name||"ol"===m.name)){m.insert(u,m.firstChild,!0);continue}u.wrap(s(new HO("ul",1)));continue}t.isValidChild(u.parent.name,"div")&&t.isValidChild("div",u.name)?u.wrap(s(new HO("div",1))):c(u)}}}},s=function(e){var t=e.name;if(t in n){(c=i[t])?c.push(e):i[t]=[e]}for(var a=r.length;a--;){var s=r[a].name;if(s in e.attributes.map){var c;(c=o[s])?c.push(e):o[s]=[e]}}return e},c=function(s,c){var l,u,d,p,h,m,f,g,b=[],O=function(e){return!1===e?"":!0===e?"p":e};c=c||{};i={};o={};var y=yI(gI("script,style,head,html,body,title,meta,param"),t.getBlockElements()),j=bs(t),v=t.getNonEmptyElements(),C=t.children,E=e.validate,T=O("forced_root_block"in c?c.forced_root_block:e.forced_root_block),S=t.getWhiteSpaceElements(),I=/^[ \t\r\n]+/,w=/[ \t\r\n]+$/,_=/[ \t\r\n]+/g,N=/^[ \t\r\n]+$/,A=Ae(S,c.context)||Ae(S,e.root_name),D=function(){var n=M.firstChild,r=null,i=function(e){if(e){(n=e.firstChild)&&3===n.type&&(n.value=n.value.replace(I,""));(n=e.lastChild)&&3===n.type&&(n.value=n.value.replace(w,""))}};if(t.isValidChild(M.name,T.toLowerCase())){for(;n;){var o=n.next;if(3===n.type||1===n.type&&"p"!==n.name&&!y[n.name]&&!n.attr("data-mce-type"))if(r)r.append(n);else{(r=k(T,1)).attr(e.forced_root_block_attrs);M.insert(r,n);r.append(n)}else{i(r);r=null}n=o}i(r)}},k=function(e,t){var r,o=new HO(e,t);e in n&&((r=i[e])?r.push(o):i[e]=[o]);return o},P=function(e){for(var n=t.getBlockElements(),r=e.prev;r&&3===r.type;){var i=r.value.replace(w,"");if(i.length>0){r.value=i;return}var o=r.next;if(o){if(3===o.type&&o.value.length){r=r.prev;continue}if(!n[o.name]&&"script"!==o.name&&"style"!==o.name){r=r.prev;continue}}var a=r.prev;r.remove();r=a}},R=function(e){var t={};for(var n in e)"li"!==n&&"p"!==n&&(t[n]=e[n]);return t},F=function(e){for(var n=e;x(n);){if(n.name in j)return lI(t,v,S,n);n=n.parent}return!1},L=sy({validate:E,document:e.document,allow_html_data_urls:e.allow_html_data_urls,allow_svg_data_urls:e.allow_svg_data_urls,allow_script_urls:e.allow_script_urls,allow_conditional_comments:e.allow_conditional_comments,preserve_cdata:e.preserve_cdata,self_closing_elements:R(t.getSelfClosingElements()),cdata:function(e){g.append(k("#cdata",4)).value=e},text:function(e,t){var n;if(!A){e=e.replace(_," ");uI(g.lastChild,y)&&(e=e.replace(I,""))}if(0!==e.length){(n=k("#text",3)).raw=!!t;g.append(n).value=e}},comment:function(e){g.append(k("#comment",8)).value=e},pi:function(e,t){g.append(k(e,7)).value=t;P(g)},doctype:function(e){g.append(k("#doctype",10)).value=e;P(g)},start:function(e,n,i){var a=E?t.getElementRule(e):{};if(a){var s=k(a.outputName||e,1);s.attributes=n;s.shortEnded=i;g.append(s);var c=C[g.name];c&&C[s.name]&&!c[s.name]&&b.push(s);for(var l=r.length;l--;){var u=r[l].name;u in n.map&&((m=o[u])?m.push(s):o[u]=[s])}y[e]&&P(s);i||(g=s);!A&&S[e]&&(A=!0)}},end:function(n){var r,i,o,a=E?t.getElementRule(n):{};if(a){if(y[n]&&!A){if((r=g.firstChild)&&3===r.type)if((i=r.value.replace(I,"")).length>0){r.value=i;r=r.next}else{o=r.next;r.remove();r=o;for(;r&&3===r.type;){i=r.value;o=r.next;if(0===i.length||N.test(i)){r.remove();r=o}r=o}}if((r=g.lastChild)&&3===r.type)if((i=r.value.replace(w,"")).length>0){r.value=i;r=r.prev}else{o=r.prev;r.remove();r=o;for(;r&&3===r.type;){i=r.value;o=r.prev;if(0===i.length||N.test(i)){r.remove();r=o}r=o}}}A&&S[n]&&(A=!1);var s=lI(t,v,S,g),l=g.parent;a.paddInEmptyBlock&&s&&F(g)?oI(e,c,y,g):a.removeEmpty&&s?y[g.name]?g.empty().remove():g.unwrap():a.paddEmpty&&(aI(g)||s)&&oI(e,c,y,g);g=l}}},t),M=g=new HO(c.context||e.root_name,11);L.parse(s,c.format);E&&b.length&&(c.context?c.invalid=!0:a(b));T&&("body"===M.name||c.isRootContent)&&D();if(!c.invalid){for(f in i)if(Ae(i,f)){m=n[f];p=(l=i[f]).length;for(;p--;)l[p].parent||l.splice(p,1);for(u=0,d=m.length;u<d;u++)m[u](l,f,c)}for(u=0,d=r.length;u<d;u++)if((m=r[u]).name in o){p=(l=o[m.name]).length;for(;p--;)l[p].parent||l.splice(p,1);for(p=0,h=m.callbacks.length;p<h;p++)m.callbacks[p](l,m.name,c)}}return M},l={schema:t,addAttributeFilter:function(e,t){bI(OI(e),(function(e){var n;for(n=0;n<r.length;n++)if(r[n].name===e){r[n].callbacks.push(t);return}r.push({name:e,callbacks:[t]})}))},getAttributeFilters:function(){return[].concat(r)},addNodeFilter:function(e,t){bI(OI(e),(function(e){var r=n[e];r||(n[e]=r=[]);r.push(t)}))},getNodeFilters:function(){var e=[];for(var t in n)Ae(n,t)&&e.push({name:t,callbacks:n[t]});return e},filterNode:s,parse:c};fI(l,e);$S(l,e);return l},vI=function(e,t,n){e.addAttributeFilter("data-mce-tabindex",(function(e,t){for(var n=e.length;n--;){var r=e[n];r.attr("tabindex",r.attr("data-mce-tabindex"));r.attr(t,null)}}));e.addAttributeFilter("src,href,style",(function(e,r){for(var i="data-mce-"+r,o=t.url_converter,a=t.url_converter_scope,s=e.length;s--;){var c=e[s],l=c.attr(i);if(void 0!==l){c.attr(r,l.length>0?l:null);c.attr(i,null)}else{l=c.attr(r);"style"===r?l=n.serializeStyle(n.parseStyle(l),c.name):o&&(l=o.call(a,l,r,c.name));c.attr(r,l.length>0?l:null)}}}));e.addAttributeFilter("class",(function(e){for(var t=e.length;t--;){var n=e[t],r=n.attr("class");if(r){r=n.attr("class").replace(/(?:^|\s)mce-item-\w+(?!\S)/g,"");n.attr("class",r.length>0?r:null)}}}));e.addAttributeFilter("data-mce-type",(function(e,t,n){for(var r=e.length;r--;){var i=e[r];if("bookmark"===i.attr("data-mce-type")&&!n.cleanup){q.from(i.firstChild).exists((function(e){return!Ko(e.value)}))?i.unwrap():i.remove()}}}));e.addNodeFilter("noscript",(function(e){for(var t=e.length;t--;){var n=e[t].firstChild;n&&(n.value=ss.decode(n.value))}}));e.addNodeFilter("script,style",(function(e,n){for(var r=function(e){return e.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"")},i=e.length;i--;){var o=e[i],a=o.firstChild?o.firstChild.value:"";if("script"===n){var s=o.attr("type");s&&o.attr("type","mce-no/type"===s?null:s.replace(/^mce\-/,""));"xhtml"===t.element_format&&a.length>0&&(o.firstChild.value="// <![CDATA[\n"+r(a)+"\n// ]]>")}else"xhtml"===t.element_format&&a.length>0&&(o.firstChild.value="\x3c!--\n"+r(a)+"\n--\x3e")}}));e.addNodeFilter("#comment",(function(e){for(var r=e.length;r--;){var i=e[r];if(t.preserve_cdata&&0===i.value.indexOf("[CDATA[")){i.name="#cdata";i.type=4;i.value=n.decode(i.value.replace(/^\[CDATA\[|\]\]$/g,""))}else if(0===i.value.indexOf("mce:protected ")){i.name="#text";i.type=3;i.raw=!0;i.value=unescape(i.value).substr(14)}}}));e.addNodeFilter("xml:namespace,input",(function(e,t){for(var n=e.length;n--;){var r=e[n];7===r.type?r.remove():1===r.type&&("input"!==t||r.attr("type")||r.attr("type","text"))}}));e.addAttributeFilter("data-mce-type",(function(t){Q(t,(function(t){"format-caret"===t.attr("data-mce-type")&&(t.isEmpty(e.schema.getNonEmptyElements())?t.remove():t.unwrap())}))}));e.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-type,data-mce-resize,data-mce-placeholder",(function(e,t){for(var n=e.length;n--;)e[n].attr(t,null)}))},CI=function(e){var t=function(e){return e&&"br"===e.name},n=e.lastChild;if(t(n)){var r=n.prev;if(t(r)){n.remove();r.remove()}}},xI=function(e,t,n){var r,i=e.dom,o=t.cloneNode(!0),a=document.implementation;if(a.createHTMLDocument){var s=a.createHTMLDocument("");on.each("BODY"===o.nodeName?o.childNodes:[o],(function(e){s.body.appendChild(s.importNode(e,!0))}));o="BODY"!==o.nodeName?s.body.firstChild:s.body;r=i.doc;i.doc=s}dg(e,qe(qe({},n),{node:o}));r&&(i.doc=r);return o},EI=function(e,t){return e&&e.hasEventListeners("PreProcess")&&!t.no_events},TI=function(e,t,n){return EI(e,n)?xI(e,t,n):t},SI=function(e,t,n){if(-1===on.inArray(t,n)){e.addAttributeFilter(n,(function(e,t){for(var n=e.length;n--;)e[n].attr(t,null)}));t.push(n)}},II=function(e,t,n){if(!t.no_events&&e){return pg(e,qe(qe({},t),{content:n})).content}return n},wI=function(e,t,n){var r=Yo(n.getInner?t.innerHTML:e.getOuterHTML(t));return n.selection||qo(un.fromDom(t))?r:on.trim(r)},_I=function(e,t,n){var r=n.selection?qe({forced_root_block:!1},n):n,i=e.parse(t,r);CI(i);return i},NI=function(e,t,n){return yy(e,t).serialize(n)},AI=function(e,t,n,r,i){var o=NI(t,n,r);return II(e,i,o)},DI=function(e,t){var n=["data-mce-selected"],r=t&&t.dom?t.dom:jl.DOM,i=t&&t.schema?t.schema:js(e);e.entity_encoding=e.entity_encoding||"named";e.remove_trailing_brs=!("remove_trailing_brs"in e)||e.remove_trailing_brs;var o=jI(e,i);vI(o,e,r);var a=function(n,a){void 0===a&&(a={});var s=qe({format:"html"},a),c=TI(t,n,s),l=wI(r,c,s),u=_I(o,l,s);return"tree"===s.format?u:AI(t,e,i,u,s)};return{schema:i,addNodeFilter:o.addNodeFilter,addAttributeFilter:o.addAttributeFilter,serialize:a,addRules:i.addValidElements,setRules:i.setValidElements,addTempAttr:D(SI,o,n),getTempAttrs:_(n),getNodeFilters:o.getNodeFilters,getAttributeFilters:o.getAttributeFilters}},kI=function(e,t){var n=DI(e,t);return{schema:n.schema,addNodeFilter:n.addNodeFilter,addAttributeFilter:n.addAttributeFilter,serialize:n.serialize,addRules:n.addRules,setRules:n.setRules,addTempAttr:n.addTempAttr,getTempAttrs:n.getTempAttrs,getNodeFilters:n.getNodeFilters,getAttributeFilters:n.getAttributeFilters}},PI="html",RI=function(e,t){void 0===t&&(t={});var n=t.format?t.format:PI;return CS(e,t,n)},FI=function(e,t,n){void 0===n&&(n={});return xS(e,t,n)},LI=jl.DOM,MI=function(e){LI.setStyle(e.id,"display",e.orgDisplay)},BI=function(e){return q.from(e).each((function(e){return e.destroy()}))},UI=function(e){e.contentAreaContainer=e.formElement=e.container=e.editorContainer=null;e.bodyElement=e.contentDocument=e.contentWindow=null;e.iframeElement=e.targetElm=null;e.selection&&(e.selection=e.selection.win=e.selection.dom=e.selection.dom.doc=null)},VI=function(e){var t=e.formElement;if(t){if(t._mceOldSubmit){t.submit=t._mceOldSubmit;t._mceOldSubmit=null}LI.unbind(t,"submit reset",e.formEventDelegate)}},HI=function(e){if(!e.removed){var t=e._selectionOverrides,n=e.editorUpload,r=e.getBody(),i=e.getElement();r&&e.save({is_removing:!0});e.removed=!0;e.unbindAllNativeEvents();e.hasHiddenInput&&i&&LI.remove(i.nextSibling);hg(e);e.editorManager.remove(e);!e.inline&&r&&MI(e);mg(e);LI.remove(e.getContainer());BI(t);BI(n);e.destroy()}},qI=function(e,t){var n=e.selection,r=e.dom;if(!e.destroyed)if(t||e.removed){if(!t){e.editorManager.off("beforeunload",e._beforeUnload);e.theme&&e.theme.destroy&&e.theme.destroy();BI(n);BI(r)}VI(e);UI(e);e.destroyed=!0}else e.remove()},GI=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(0===t.length)throw new Error("Can't merge zero objects");for(var r={},i=0;i<t.length;i++){var o=t[i];for(var a in o)Ae(o,a)&&(r[a]=e(r[a],o[a]))}return r}}((function(e,t){return b(e)&&b(t)?GI(e,t):t})),WI="autoresize_on_init,content_editable_state,convert_fonts_to_spans,inline_styles,padd_empty_with_br,block_elements,boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,tab_focus,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists".split(","),zI="bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,textcolor".split(","),$I="imagetools,toc".split(","),KI=function(e){var t=te(WI,(function(t){return Ae(e,t)})),n=e.forced_root_block;!1!==n&&""!==n||t.push("forced_root_block (false only)");return he(t)},YI=function(e){var t=on.makeMap(e.plugins," "),n=function(e){return Ae(t,e)},r=We(We([],te(zI,n),!0),ce($I,(function(e){return n(e)?[e+" (moving to premium)"]:[]})),!0);return he(r)},XI=function(e,t){var n=KI(e),r=YI(t),i=r.length>0,o=n.length>0,a="mobile"===t.theme;if(i||o||a){var s="\n- ",c=a?"\n\nThemes:"+s+"mobile":"",l=i?"\n\nPlugins:"+s+r.join(s):"",u=o?"\n\nSettings:"+s+n.join(s):"";console.warn("The following deprecated features are currently enabled, these will be removed in TinyMCE 6.0. See https://www.tiny.cloud/docs/release-notes/6.0-upcoming-changes/ for more information."+c+l+u)}},JI=function(e,t){return{sections:_(e),settings:_(t)}},QI=qt().deviceType,ZI=QI.isTouch(),ew=QI.isPhone(),tw=QI.isTablet(),nw=["lists","autolink","autosave"],rw={table_grid:!1,object_resizing:!1,resize:!1},iw=function(e){var t=O(e)?e.join(" "):e,n=J(g(t)?t.split(" "):[],ut);return te(n,(function(e){return e.length>0}))},ow=function(e){return te(e,D(Y,nw))},aw=function(e,t){var n=Se(t,(function(t,n){return Y(e,n)}));return JI(n.t,n.f)},sw=function(e,t,n){void 0===n&&(n={});var r=e.sections(),i=Ne(r,t).getOr({});return on.extend({},n,i)},cw=function(e,t){return Ae(e.sections(),t)},lw=function(e,t,n){var r=e.sections();return cw(e,t)&&r[t].theme===n},uw=function(e,t){return cw(e,t)?e.sections()[t]:{}},dw=function(e,t){return Ne(e,"toolbar_mode").orThunk((function(){return Ne(e,"toolbar_drawer").map((function(e){return!1===e?"wrap":e}))})).getOr(t)},pw=function(e,t,n,r,i){var o={id:t,theme:"silver",toolbar_mode:dw(e,"floating"),plugins:"",document_base_url:n,add_form_submit_trigger:!0,submit_patch:!0,add_unload_trigger:!0,convert_urls:!0,relative_urls:!0,remove_script_host:!0,object_resizing:!0,doctype:"<!DOCTYPE html>",visual:!0,font_size_legacy_values:"xx-small,small,medium,large,x-large,xx-large,300%",forced_root_block:"p",hidden_input:!0,inline_styles:!0,convert_fonts_to_spans:!0,indent:!0,indent_before:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist",indent_after:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist",entity_encoding:"named",url_converter:i.convertURL,url_converter_scope:i};return qe(qe({},o),r?rw:{})},hw=function(e,t){var n={resize:!1,toolbar_mode:dw(e,"scrolling"),toolbar_sticky:!1},r={menubar:!1};return qe(qe(qe({},rw),n),t?r:{})},mw=function(e,t){var n=t.external_plugins?t.external_plugins:{};return e&&e.external_plugins?on.extend({},e.external_plugins,n):n},fw=function(e,t){return[].concat(iw(e)).concat(iw(t))},gw=function(e,t,n,r){return e&&lw(t,"mobile","mobile")?ow(r):e&&cw(t,"mobile")?r:n},bw=function(e,t,n,r){var i=iw(n.forced_plugins),o=iw(r.plugins),a=uw(t,"mobile"),s=a.plugins?iw(a.plugins):o,c=gw(e,t,o,s),l=fw(i,c);if(Qt.browser.isIE()&&Y(l,"rtc"))throw new Error("RTC plugin is not supported on IE 11.");return on.extend(r,{plugins:l.join(" ")})},Ow=function(e,t){return e&&cw(t,"mobile")},yw=function(e,t,n,r,i){var o=e?{mobile:hw(i.mobile||{},t)}:{},a=aw(["mobile"],GI(o,i)),s=on.extend(n,r,a.settings(),Ow(e,a)?sw(a,"mobile"):{},{validate:!0,external_plugins:mw(r,a.settings())});return bw(e,a,r,s)},jw=function(e,t,n,r,i){var o=pw(i,t,n,ZI,e),a=yw(ew||tw,ew,o,r,i);!1!==a.deprecation_warnings&&XI(i,a);return a},vw=function(e,t,n){return q.from(t.settings[n]).filter(e)},Cw=function(e){var t={};"string"==typeof e?Q(e.indexOf("=")>0?e.split(/[;,](?![^=;,]*(?:[;,]|$))/):e.split(","),(function(e){var n=e.split("=");n.length>1?t[on.trim(n[0])]=on.trim(n[1]):t[on.trim(n[0])]=on.trim(n[0])})):t=e;return t},xw=function(e){return function(t){return O(t)&&le(t,e)}},Ew=function(e,t,n,r){var i=t in e.settings?e.settings[t]:n;return"hash"===r?Cw(i):"string"===r?vw(g,e,t).getOr(n):"number"===r?vw(T,e,t).getOr(n):"boolean"===r?vw(j,e,t).getOr(n):"object"===r?vw(b,e,t).getOr(n):"array"===r?vw(O,e,t).getOr(n):"string[]"===r?vw(xw(g),e,t).getOr(n):"function"===r?vw(E,e,t).getOr(n):i},Tw=function(){var e={};return{add:function(t,n){e[t]=n},get:function(t){return e[t]?e[t]:{icons:{}}},has:function(t){return Ae(e,t)}}}(),Sw=function(e,t){return t.dom[e]},Iw=function(e,t){return parseInt(fi(t,e),10)},ww=D(Sw,"clientWidth"),_w=D(Sw,"clientHeight"),Nw=D(Iw,"margin-top"),Aw=D(Iw,"margin-left"),Dw=function(e){return e.dom.getBoundingClientRect()},kw=function(e,t,n){var r=ww(e),i=_w(e);return t>=0&&n>=0&&t<=r&&n<=i},Pw=function(e,t,n,r){var i=Dw(t);return{x:n-(e?i.left+t.dom.clientLeft+Aw(t):0),y:r-(e?i.top+t.dom.clientTop+Nw(t):0)}},Rw=function(e,t,n){var r=un.fromDom(e.getBody()),i=e.inline?r:Mn(r),o=Pw(e.inline,i,t,n);return kw(i,o.x,o.y)},Fw=function(e){return q.from(e).map(un.fromDom)},Lw=function(e){var t=e.inline?e.getBody():e.getContentAreaContainer();return Fw(t).map(Or).getOr(!1)},Mw=function(){var e=function(){throw new Error("Theme did not provide a NotificationManager implementation.")};return{open:e,close:e,reposition:e,getArgs:e}},Bw=function(e){var t=[],n=function(){var t=e.theme;return t&&t.getNotificationManagerImpl?t.getNotificationManagerImpl():Mw()},r=function(){return q.from(t[0])},i=function(e,t){return!(e.type!==t.type||e.text!==t.text||e.progressBar||e.timeout||t.progressBar||t.timeout)},o=function(){t.length>0&&n().reposition(t)},a=function(e){t.push(e)},s=function(e){ae(t,(function(t){return t===e})).each((function(e){t.splice(e,1)}))},c=function(c,l){void 0===l&&(l=!0);if(!e.removed&&Lw(e)){l&&e.fire("BeforeOpenNotification",{notification:c});return oe(t,(function(e){return i(n().getArgs(e),c)})).getOrThunk((function(){e.editorManager.setActive(e);var t=n().open(c,(function(){s(t);o();r().fold((function(){return e.focus()}),(function(e){return Ib(un.fromDom(e.getEl()))}))}));a(t);o();e.fire("OpenNotification",{notification:qe({},t)});return t}))}},l=function(){r().each((function(e){n().close(e);s(e);o()}))},u=_(t);(function(e){e.on("SkinLoaded",(function(){var t=wp(e);t&&c({text:t,type:"warning",timeout:0},!1);o()}));e.on("show ResizeEditor ResizeWindow NodeChange",(function(){vo.requestAnimationFrame(o)}));e.on("remove",(function(){Q(t.slice(),(function(e){n().close(e)}))}))})(e);return{open:c,close:l,getNotifications:u}},Uw=Fl.PluginManager,Vw=Fl.ThemeManager;function Hw(){var e=function(){throw new Error("Theme did not provide a WindowManager implementation.")};return{open:e,openUrl:e,alert:e,confirm:e,close:e,getParams:e,setParams:e}}var qw=function(e){var t=[],n=function(){var t=e.theme;return t&&t.getWindowManagerImpl?t.getWindowManagerImpl():Hw()},r=function(e,t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return t?t.apply(e,n):void 0}},i=function(t){e.fire("OpenWindow",{dialog:t})},o=function(t){e.fire("CloseWindow",{dialog:t})},a=function(e){t.push(e);i(e)},s=function(n){o(n);0===(t=te(t,(function(e){return e!==n}))).length&&e.focus()},c=function(){return q.from(t[t.length-1])},l=function(t){e.editorManager.setActive(e);Jb(e);var n=t();a(n);return n},u=function(e,t){return l((function(){return n().open(e,t,s)}))},d=function(e){return l((function(){return n().openUrl(e,s)}))},p=function(e,t,i){var o=n();o.alert(e,r(i||o,t))},h=function(e,t,i){var o=n();o.confirm(e,r(i||o,t))},m=function(){c().each((function(e){n().close(e);s(e)}))};e.on("remove",(function(){Q(t,(function(e){n().close(e)}))}));return{open:u,openUrl:d,alert:p,confirm:h,close:m}},Gw=function(e,t){e.notificationManager.open({type:"error",text:t})},Ww=function(e,t){e._skinLoaded?Gw(e,t):e.on("SkinLoaded",(function(){Gw(e,t)}))},zw=function(e,t){Ww(e,Rl.translate(["Failed to upload image: {0}",t]))},$w=function(e,t,n){Cg(e,t,{message:n});console.error(n)},Kw=function(e,t,n){return n?"Failed to load "+e+": "+n+" from url "+t:"Failed to load "+e+" url: "+t},Yw=function(e,t,n){$w(e,"PluginLoadError",Kw("plugin",t,n))},Xw=function(e,t,n){$w(e,"IconsLoadError",Kw("icons",t,n))},Jw=function(e,t,n){$w(e,"LanguageLoadError",Kw("language",t,n))},Qw=function(e,t,n){var r=Rl.translate(["Failed to initialize plugin: {0}",t]);Cg(e,"PluginLoadError",{message:r});Zw(r,n);Ww(e,r)},Zw=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=window.console;r&&(r.error?r.error.apply(r,We([e],t,!1)):r.log.apply(r,We([e],t,!1)))},e_=function(e){return/^[a-z0-9\-]+$/i.test(e)},t_=function(e){return r_(e,jp(e))},n_=function(e){return r_(e,vp(e))},r_=function(e,t){var n=e.editorManager.baseURL+"/skins/content",r="content"+e.editorManager.suffix+".css",i=!0===e.inline;return J(t,(function(t){return e_(t)&&!i?n+"/"+t+"/"+r:e.documentBaseURI.toAbsolute(t)}))},i_=function(e){e.contentCSS=e.contentCSS.concat(t_(e),n_(e))},o_=function(){var e=1,t=2,n={},r=function(e,t){return{status:e,resultUri:t}},i=function(e){return e in n},o=function(t){return!!i(t)&&n[t].status===e},a=function(e){return!!i(e)&&n[e].status===t};return{hasBlobUri:i,getResultUri:function(e){var t=n[e];return t?t.resultUri:null},isPending:o,isUploaded:a,markPending:function(t){n[t]=r(e,null)},markUploaded:function(e,i){n[e]=r(t,i)},removeFailed:function(e){delete n[e]},destroy:function(){n={}}}},a_=0,s_=function(){var e=function(){return Math.round(4294967295*Math.random()).toString(36)};return"s"+(new Date).getTime().toString(36)+e()+e()+e()},c_=function(e){return e+a_+++s_()},l_=function(){var e=[],t=function(e){return{"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"}[e.toLowerCase()]||"dat"},n=function(e,t,n,i,o){if(g(e)){return r({id:e,name:i,filename:o,blob:t,base64:n})}if(b(e))return r(e);throw new Error("Unknown input type")},r=function(e){if(!e.blob||!e.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");var n=e.id||c_("blobid"),r=e.name||n,i=e.blob;return{id:_(n),name:_(r),filename:_(e.filename||r+"."+t(i.type)),blob:_(i),base64:_(e.base64),blobUri:_(e.blobUri||URL.createObjectURL(i)),uri:_(e.uri)}},i=function(t){a(t.id())||e.push(t)},o=function(t){return oe(e,t).getOrUndefined()},a=function(e){return o((function(t){return t.id()===e}))};return{create:n,add:i,get:a,getByUri:function(e){return o((function(t){return t.blobUri()===e}))},getByData:function(e,t){return o((function(n){return n.base64()===e&&n.blob().type===t}))},findFirst:o,removeByUri:function(t){e=te(e,(function(e){if(e.blobUri()===t){URL.revokeObjectURL(e.blobUri());return!1}return!0}))},destroy:function(){Q(e,(function(e){URL.revokeObjectURL(e.blobUri())}));e=[]}}},u_=function(e,t){var n={},r=function(e,t){return e?e.replace(/\/$/,"")+"/"+t.replace(/^\//,""):t},i=function(e,n,i,o){var a=new XMLHttpRequest;a.open("POST",t.url);a.withCredentials=t.credentials;a.upload.onprogress=function(e){o(e.loaded/e.total*100)};a.onerror=function(){i("Image upload failed due to a XHR Transport error. Code: "+a.status)};a.onload=function(){if(a.status<200||a.status>=300)i("HTTP Error: "+a.status);else{var e=JSON.parse(a.responseText);e&&"string"==typeof e.location?n(r(t.basePath,e.location)):i("Invalid JSON: "+a.responseText)}};var s=new FormData;s.append("file",e.blob(),e.filename());a.send(s)},o=function(){return new go((function(e){e([])}))},a=function(e,t){return{url:t,blobInfo:e,status:!0}},s=function(e,t,n){return{url:"",blobInfo:e,status:!1,error:{message:t,options:n}}},c=function(e,t){on.each(n[e],(function(e){e(t)}));delete n[e]},l=function(t,n,r){e.markPending(t.blobUri());return new go((function(i){var o;try{var l=function(){if(o){o.close();S}},u=function(n){l();e.markUploaded(t.blobUri(),n);c(t.blobUri(),a(t,n));i(a(t,n))},d=function(n,r){var o=r||{};l();e.removeFailed(t.blobUri());c(t.blobUri(),s(t,n,o));i(s(t,n,o))};n(t,u,d,(function(e){e<0||e>100||q.from(o).orThunk((function(){return q.from(r).map(R)})).each((function(t){o=t;t.progressBar.value(e)}))}))}catch(e){i(s(t,e.message,{}))}}))},u=function(e){return e===i},d=function(e){var t=e.blobUri();return new go((function(e){n[t]=n[t]||[];n[t].push(e)}))},p=function(n,r){n=on.grep(n,(function(t){return!e.isUploaded(t.blobUri())}));return go.all(on.map(n,(function(n){return e.isPending(n.blobUri())?d(n):l(n,t.handler,r)})))},h=function(e,n){return!t.url&&u(t.handler)?o():p(e,n)};!1===E(t.handler)&&(t.handler=i);return{upload:h}},d_=function(e){return function(){return e.notificationManager.open({text:e.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0})}},p_=function(e,t){return u_(t,{url:up(e),basePath:dp(e),credentials:pp(e),handler:hp(e)})},h_=function(e){var t=o_(),n=p_(e,t);return{upload:function(t,r){void 0===r&&(r=!0);return n.upload(t,r?d_(e):void 0)}}},m_=function(e){var t=_l(null);e.on("change AddUndo",(function(e){t.set(qe({},e.level))}));return{fireIfChanged:function(){var n=e.undoManager.data;ge(n).filter((function(e){return!AT(t.get(),e)})).each((function(t){e.setDirty(!0);e.fire("change",{level:t,lastLevel:me(n,n.length-2).getOrNull()})}))}}},f_=function(e){var t,n,r=l_(),i=o_(),o=[],a=m_(e),s=function(t){return function(n){return e.selection?t(n):[]}},c=function(e){return e+(-1===e.indexOf("?")?"?":"&")+(new Date).getTime()},l=function(e,t,n){var r=0;do{if(-1!==(r=e.indexOf(t,r))){e=e.substring(0,r)+n+e.substr(r+t.length);r+=n.length-t.length+1}}while(-1!==r);return e},u=function(e,t,n){var r='src="'+n+'"'+(n===Qt.transparentSrc?' data-mce-placeholder="1"':"");e=l(e,'src="'+t+'"',r);return e=l(e,'data-mce-src="'+t+'"','data-mce-src="'+n+'"')},d=function(t,n){Q(e.undoManager.data,(function(e){"fragmented"===e.type?e.fragments=J(e.fragments,(function(e){return u(e,t,n)})):e.content=u(e.content,t,n)}))},p=function(t,n){var r=e.convertURL(n,"src");d(t.src,n);e.$(t).attr({src:ap(e)?c(n):n,"data-mce-src":r})},h=function(n){t||(t=p_(e,i));return b().then(s((function(i){var o=J(i,(function(e){return e.blobInfo}));return t.upload(o,d_(e)).then(s((function(t){var o=[],s=J(t,(function(t,n){var a=i[n].blobInfo,s=i[n].image;if(t.status&&sp(e)){r.removeByUri(s.src);JT(e)||p(s,t.url)}else if(t.error){if(t.error.options.remove){d(s.getAttribute("src"),Qt.transparentSrc);o.push(s)}zw(e,t.error.message)}return{element:s,status:t.status,uploadUri:t.url,blobInfo:a}}));s.length>0&&a.fireIfChanged();o.length>0&&(JT(e)?console.error("Removing images on failed uploads is currently unsupported for RTC"):e.undoManager.transact((function(){Q(o,(function(t){e.dom.remove(t);r.removeByUri(t.src)}))})));n&&n(s);return s})))})))},m=function(t){if(op(e))return h(t)},f=function(t){if(!1===le(o,(function(e){return e(t)})))return!1;if(0===t.getAttribute("src").indexOf("data:")){return ip(e)(t)}return!0},g=function(e){o.push(e)},b=function(){n||(n=iI(i,r));return n.findAll(e.getBody(),f).then(s((function(t){t=te(t,(function(t){if("string"==typeof t){Ww(e,t);return!1}return!0}));JT(e)||Q(t,(function(e){d(e.image.src,e.blobInfo.blobUri());e.image.src=e.blobInfo.blobUri();e.image.removeAttribute("data-mce-src")}));return t})))},O=function(){r.destroy();i.destroy();n=t=null},y=function(t){return t.replace(/src="(blob:[^"]+)"/g,(function(t,n){var o=i.getResultUri(n);if(o)return'src="'+o+'"';var a=r.getByUri(n);a||(a=re(e.editorManager.get(),(function(e,t){return e||t.editorUpload&&t.editorUpload.blobCache.getByUri(n)}),null));if(a){return'src="data:'+a.blob().type+";base64,"+a.base64()+'"'}return t}))};e.on("SetContent",(function(){op(e)?m():b()}));e.on("RawSaveContent",(function(e){e.content=y(e.content)}));e.on("GetContent",(function(e){e.source_view||"raw"===e.format||"tree"===e.format||(e.content=y(e.content))}));e.on("PostRender",(function(){e.parser.addNodeFilter("img",(function(e){Q(e,(function(e){var t=e.attr("src");if(!r.getByUri(t)){var n=i.getResultUri(t);n&&e.attr("src",n)}}))}))}));return{blobCache:r,addFilter:g,uploadImages:h,uploadImagesAuto:m,scanForImages:b,destroy:O}},g_=function(e){var t={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"left"},inherit:!1,preview:!1,defaultBlock:"div"},{selector:"img,table,audio,video",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size",defaultBlock:"div"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size",defaultBlock:"div"},{selector:"img,table,audio,video",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"justify"},inherit:!1,defaultBlock:"div",preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:[{inline:"span",styles:{textDecoration:"line-through"},exact:!0},{inline:"strike",remove:"all",preserve_attributes:["class","style"]},{inline:"s",remove:"all",preserve_attributes:["class","style"]}],forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",defaultBlock:"p",styles:{lineHeight:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:function(e,t,n){return kr(e)&&e.hasAttribute("href")},onformat:function(t,n,r){on.each(r,(function(n,r){e.setAttrib(t,r,n)}))}},lang:{inline:"span",clear_child_styles:!0,remove_similar:!0,attributes:{lang:"%value","data-mce-lang":function(e){var t;return null!==(t=null==e?void 0:e.customValue)&&void 0!==t?t:null}}},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};on.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd samp".split(/\s/),(function(e){t[e]={block:e,remove:"all"}}));return t},b_=function(e){var t={},n=function(e){return x(e)?t[e]:t},r=function(e){return Ae(t,e)},i=function(e,n){if(e)if(g(e)){O(n)||(n=[n]);Q(n,(function(e){v(e.deep)&&(e.deep=!ff(e));v(e.split)&&(e.split=!ff(e)||gf(e));v(e.remove)&&ff(e)&&!gf(e)&&(e.remove="none");if(ff(e)&&gf(e)){e.mixed=!0;e.block_expand=!0}g(e.classes)&&(e.classes=e.classes.split(/\s+/))}));t[e]=n}else ve(e,(function(e,t){i(t,e)}))},o=function(e){e&&t[e]&&delete t[e];return t};i(g_(e.dom));i(Dp(e));return{get:n,has:r,register:i,unregister:o}},O_=on.each,y_=jl.DOM,j_=function(e,t){var n,r,i,o=t&&t.schema||js({}),a=function(e,t){t.classes.length&&y_.addClass(e,t.classes.join(" "));y_.setAttribs(e,t.attrs)},s=function(e){r="string"==typeof e?{name:e,classes:[],attrs:{}}:e;var t=y_.create(r.name);a(t,r);return t},c=function(e,t){var n="string"!=typeof e?e.nodeName.toLowerCase():e,r=o.getElementRule(n),i=r&&r.parentsRequired;return!(!i||!i.length)&&(t&&-1!==on.inArray(i,t)?t:i[0])},l=function(e,t,n){var r,i,o=t.length>0&&t[0],a=o&&o.name,u=c(e,a);if(u)if(a===u){i=t[0];t=t.slice(1)}else i=u;else if(o){i=t[0];t=t.slice(1)}else if(!n)return e;i&&(r=s(i)).appendChild(e);if(n){r||(r=y_.create("div")).appendChild(e);on.each(n,(function(t){var n=s(t);r.insertBefore(n,e)}))}return l(r,t,i&&i.siblings)};if(e&&e.length){r=e[0];n=s(r);(i=y_.create("div")).appendChild(l(n,e.slice(1),r.siblings));return i}return""},v_=function(e){var t,n={classes:[],attrs:{}};"*"!==(e=n.selector=on.trim(e))&&(t=e.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,(function(e,t,r,i,o){switch(t){case"#":n.attrs.id=r;break;case".":n.classes.push(r);break;case":":-1!==on.inArray("checked disabled enabled read-only required".split(" "),r)&&(n.attrs[r]=r)}if("["===i){var a=o.match(/([\w\-]+)(?:\=\"([^\"]+))?/);a&&(n.attrs[a[1]]=a[2])}return""})));n.name=t||"div";return n},C_=function(e){if(!e||"string"!=typeof e)return[];e=(e=e.split(/\s*,\s*/)[0]).replace(/\s*(~\+|~|\+|>)\s*/g,"$1");return on.map(e.split(/(?:>|\s+(?![^\[\]]+\]))/),(function(e){var t=on.map(e.split(/(?:~\+|~|\+)/),v_),n=t.pop();t.length&&(n.siblings=t);return n})).reverse()},x_=function(e,t){var n,r,i,o="",a=kp(e);if(""===a)return"";var s=function(e){return e.replace(/%(\w+)/g,"")};if("string"==typeof t){if(!(t=e.formatter.get(t)))return;t=t[0]}if("preview"in t){var c=Ne(t,"preview");if(Zr(c,!1))return"";a=c.getOr(a)}n=t.block||t.inline||"span";var l=C_(t.selector);if(l.length){l[0].name||(l[0].name=n);n=t.selector;r=j_(l,e)}else r=j_([n],e);var u=y_.select(n,r)[0]||r.firstChild;O_(t.styles,(function(e,t){var n=s(e);n&&y_.setStyle(u,t,n)}));O_(t.attributes,(function(e,t){var n=s(e);n&&y_.setAttrib(u,t,n)}));O_(t.classes,(function(e){var t=s(e);y_.hasClass(u,t)||y_.addClass(u,t)}));e.fire("PreviewFormats");y_.setStyles(r,{position:"absolute",left:-65535});e.getBody().appendChild(r);i=y_.getStyle(e.getBody(),"fontSize",!0);i=/px$/.test(i)?parseInt(i,10):0;O_(a.split(" "),(function(t){var n=y_.getStyle(u,t,!0);if("background-color"===t&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(n)){n=y_.getStyle(e.getBody(),t,!0);if("#ffffff"===y_.toHex(n).toLowerCase())return}if("color"!==t||"#000000"!==y_.toHex(n).toLowerCase()){if("font-size"===t&&/em|%$/.test(n)){if(0===i)return;n=parseFloat(n)/(/%$/.test(n)?100:1)*i+"px"}"border"===t&&n&&(o+="padding:0 2px;");o+=t+":"+n+";"}}));e.fire("AfterPreviewFormats");y_.remove(r);return o},E_=function(e){e.addShortcut("meta+b","","Bold");e.addShortcut("meta+i","","Italic");e.addShortcut("meta+u","","Underline");for(var t=1;t<=6;t++)e.addShortcut("access+"+t,"",["FormatBlock",!1,"h"+t]);e.addShortcut("access+7","",["FormatBlock",!1,"p"]);e.addShortcut("access+8","",["FormatBlock",!1,"div"]);e.addShortcut("access+9","",["FormatBlock",!1,"address"])},T_=function(e){var t=b_(e),n=_l(null);E_(e);Ex(e);return{get:t.get,has:t.has,register:t.register,unregister:t.unregister,apply:function(t,n,r){OS(e,t,n,r)},remove:function(t,n,r,i){yS(e,t,n,r,i)},toggle:function(t,n,r){jS(e,t,n,r)},match:function(t,n,r,i){return hS(e,t,n,r,i)},closest:function(t){return bS(e,t)},matchAll:function(t,n){return mS(e,t,n)},matchNode:function(t,n,r,i){return fS(e,t,n,r,i)},canApply:function(t){return gS(e,t)},formatChanged:function(t,r,i,o){return vS(e,n,t,r,i,o)},getCssText:D(x_,e)}},S_=function(e){switch(e.toLowerCase()){case"undo":case"redo":case"mcerepaint":case"mcefocus":return!0;default:return!1}},I_=function(e,t,n){var r=_l(!1),i=function(e){kT(t,!1,n);t.add({},e)};e.on("init",(function(){t.add()}));e.on("BeforeExecCommand",(function(e){var r=e.command;if(!S_(r)){PT(t,n);t.beforeChange()}}));e.on("ExecCommand",(function(e){var t=e.command;S_(t)||i(e)}));e.on("ObjectResizeStart cut",(function(){t.beforeChange()}));e.on("SaveContent ObjectResized blur",i);e.on("dragend",i);e.on("keyup",(function(n){var o=n.keyCode;if(!n.isDefaultPrevented()){if(o>=33&&o<=36||o>=37&&o<=40||45===o||n.ctrlKey){i();e.nodeChanged()}46!==o&&8!==o||e.nodeChanged();if(r.get()&&t.typing&&!1===AT(TT(e),t.data[0])){if(!1===e.isDirty()){e.setDirty(!0);e.fire("change",{level:t.data[0],lastLevel:null})}e.fire("TypingUndo");r.set(!1);e.nodeChanged()}}}));e.on("keydown",(function(e){var o=e.keyCode;if(!e.isDefaultPrevented())if(o>=33&&o<=36||o>=37&&o<=40||45===o)t.typing&&i(e);else{var a=e.ctrlKey&&!e.altKey||e.metaKey;if((o<16||o>20)&&224!==o&&91!==o&&!t.typing&&!a){t.beforeChange();kT(t,!0,n);t.add({},e);r.set(!0)}}}));e.on("mousedown",(function(e){t.typing&&i(e)}));var o=function(e){return"insertReplacementText"===e.inputType},a=function(e){return"insertText"===e.inputType&&null===e.data},s=function(e){return"insertFromPaste"===e.inputType||"insertFromDrop"===e.inputType};e.on("input",(function(e){e.inputType&&(o(e)||a(e)||s(e))&&i(e)}));e.on("AddUndo Undo Redo ClearUndos",(function(t){t.isDefaultPrevented()||e.nodeChanged()}))},w_=function(e){e.addShortcut("meta+z","","Undo");e.addShortcut("meta+y,meta+shift+z","","Redo")},__=function(e){var t=Ml(),n=_l(0),r=_l(0),i={data:[],typing:!1,beforeChange:function(){nS(e,n,t)},add:function(o,a){return rS(e,i,r,n,t,o,a)},undo:function(){return iS(e,i,n,r)},redo:function(){return oS(e,r,i.data)},clear:function(){aS(e,i,r)},reset:function(){sS(e,i)},hasUndo:function(){return cS(e,i,r)},hasRedo:function(){return lS(e,i,r)},transact:function(t){return uS(e,i,n,t)},ignore:function(t){dS(e,n,t)},extra:function(t,n){pS(e,i,r,t,n)}};JT(e)||I_(e,i,n);w_(e);return i},N_=[9,27,Tg.HOME,Tg.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,Tg.DOWN,Tg.UP,Tg.LEFT,Tg.RIGHT].concat(Qt.browser.isFirefox()?[224]:[]),A_="data-mce-placeholder",D_=function(e){return"keydown"===e.type||"keyup"===e.type},k_=function(e){var t=e.keyCode;return t===Tg.BACKSPACE||t===Tg.DELETE},P_=function(e){if(D_(e)){var t=e.keyCode;return!k_(e)&&(Tg.metaKeyPressed(e)||e.altKey||t>=112&&t<=123||Y(N_,t))}return!1},R_=function(e){return D_(e)&&!(k_(e)||"keyup"===e.type&&229===e.keyCode)},F_=function(e,t,n){if(La(un.fromDom(t),!1)){var r=""===n,i=t.firstElementChild;return!i||!e.getStyle(t.firstElementChild,"padding-left")&&!e.getStyle(t.firstElementChild,"padding-right")&&(r?!e.isBlock(i):n===i.nodeName.toLowerCase())}return!1},L_=function(e){var t=e.dom,n=Xd(e),r=Sp(e),i=function(o,a){if(!P_(o)){var s=e.getBody(),c=!R_(o)&&F_(t,s,n);if(""!==t.getAttrib(s,A_)!==c||a){t.setAttrib(s,A_,c?r:null);t.setAttrib(s,"aria-placeholder",c?r:null);vg(e,c);e.on(c?"keydown":"keyup",i);e.off(c?"keyup":"keydown",i)}}};r&&e.on("init",(function(t){i(t,!0);e.on("change SetContent ExecCommand",i);e.on("paste",(function(t){return vo.setEditorTimeout(e,(function(){return i(t)}))}))}))},M_=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,B_=function(e){return M_.test(e)},U_=function(e,t){return yn(un.fromDom(t),xp(e))},V_=function(e){return"rtl"===jl.DOM.getStyle(e,"direction",!0)||B_(e.textContent)},H_=function(e,t,n){return te(jl.DOM.getParents(n.container(),"*",t),e)},q_=function(e,t,n){var r=H_(e,t,n);return q.from(r[r.length-1])},G_=function(e,t,n){var r=Rh(t,e),i=Rh(n,e);return r&&r===i},W_=function(e){return ra(e)||ia(e)},z_=function(e,t){if(!t)return t;var n=t.container(),r=t.offset();return e?Zo(n)?qr(n.nextSibling)?id(n.nextSibling,0):id.after(n):ra(t)?id(n,r+1):t:Zo(n)?qr(n.previousSibling)?id(n.previousSibling,n.previousSibling.data.length):id.before(n):ia(t)?id(n,r-1):t},$_=D(z_,!0),K_=D(z_,!1),Y_=function(e){return function(t){return xn(e,un.fromDom(t.dom.parentNode))}},X_=function(e){return Mo(e)||Uo(e)},J_=function(e,t){return Sn(e,t)?lo(t,X_,Y_(e)):q.none()},Q_=function(e){var t=e.getBody(),n=t.firstChild&&e.dom.isBlock(t.firstChild)?t.firstChild:t;e.selection.setCursorLocation(n,0)},Z_=function(e){if(e.dom.isEmpty(e.getBody())){e.setContent("");Q_(e)}},eN=function(e,t,n){return ti(Cm(n),xm(n),(function(r,i){var o=z_(!0,r),a=z_(!1,i),s=z_(!1,t);return e?jm(n,s).exists((function(e){return e.isEqual(a)&&t.isEqual(o)})):vm(n,s).exists((function(e){return e.isEqual(o)&&t.isEqual(a)}))})).getOr(!0)},tN=function(e,t){return{block:e,position:t}},nN=function(e,t){return{from:e,to:t}},rN=function(e,t){var n=un.fromDom(e),r=un.fromDom(t.container());return J_(n,r).map((function(e){return tN(e,t)}))},iN=function(e){return!1===xn(e.from.block,e.to.block)},oN=function(e){return Un(e.from.block).bind((function(t){return Un(e.to.block).filter((function(e){return xn(t,e)}))})).isSome()},aN=function(e){return!1===Xr(e.from.block.dom)&&!1===Xr(e.to.block.dom)},sN=function(e,t,n){return $r(n.position.getNode())&&!1===La(n.block)?ym(!1,n.block.dom).bind((function(r){return r.isEqual(n.position)?gm(t,e,r).bind((function(t){return rN(e,t)})):q.some(n)})).getOr(n):n},cN=function(e,t,n){var r=rN(e,id.fromRangeStart(n)),i=r.bind((function(n){return gm(t,e,n.position).bind((function(n){return rN(e,n).map((function(n){return sN(e,t,n)}))}))}));return ti(r,i,nN).filter((function(e){return iN(e)&&oN(e)&&aN(e)}))},lN=function(e,t,n){return n.collapsed?cN(e,t,n):q.none()},uN=function(e){var t=$n(e);return ae(t,Po).fold(_(t),(function(e){return t.slice(0,e)}))},dN=function(e){var t=uN(e);Q(t,gr);return t},pN=function(e,t){var n=Yy(t,e);return oe(n.reverse(),(function(e){return La(e)})).each(gr)},hN=function(e){return 0===te(Wn(e),(function(e){return!La(e)})).length},mN=function(e,t,n,r){if(La(n)){Gy(n);return Cm(n.dom)}hN(r)&&La(t)&&cr(r,un.fromTag("br"));var i=vm(n.dom,id.before(r.dom));Q(dN(t),(function(e){cr(r,e)}));pN(e,t);return i},fN=function(e,t,n){if(La(n)){gr(n);La(t)&&Gy(t);return Cm(t.dom)}var r=xm(n.dom);Q(dN(t),(function(e){dr(n,e)}));pN(e,t);return r},gN=function(e,t){var n=Yy(t,e);return q.from(n[n.length-1])},bN=function(e,t){return Sn(t,e)?gN(t,e):q.none()},ON=function(e,t){ym(e,t.dom).map((function(e){return e.getNode()})).map(un.fromDom).filter(Lo).each(gr)},yN=function(e,t,n){ON(!0,t);ON(!1,n);return bN(t,n).fold(D(fN,e,t,n),D(mN,e,t,n))},jN=function(e,t,n,r){return t?yN(e,r,n):yN(e,n,r)},vN=function(e,t){var n=un.fromDom(e.getBody()),r=lN(n.dom,t,e.selection.getRng()).bind((function(e){return jN(n,t,e.from.block,e.to.block)}));r.each((function(t){e.selection.setRng(t.toRange())}));return r.isSome()},CN=function(e,t){var n=t.getRng();return ti(J_(e,un.fromDom(n.startContainer)),J_(e,un.fromDom(n.endContainer)),(function(r,i){if(!1===xn(r,i)){n.deleteContents();jN(e,!0,r,i).each((function(e){t.setRng(e.toRange())}));return!0}return!1})).getOr(!1)},xN=function(e,t){var n=un.fromDom(t),r=D(xn,e);return co(n,Ho,r).isSome()},EN=function(e,t){return xN(e,t.startContainer)||xN(e,t.endContainer)},TN=function(e,t){var n=vm(e.dom,id.fromRangeStart(t)).isNone(),r=jm(e.dom,id.fromRangeEnd(t)).isNone();return!EN(e,t)&&n&&r},SN=function(e){e.setContent("");e.selection.setCursorLocation();return!0},IN=function(e){var t=un.fromDom(e.getBody()),n=e.selection.getRng();return TN(t,n)?SN(e):CN(t,e.selection)},wN=function(e,t){return!e.selection.isCollapsed()&&IN(e)},_N=Yr,NN=Xr,AN=function(e,t,n,r,i){return q.from(t._selectionOverrides.showCaret(e,n,r,i))},DN=function(e){var t=e.ownerDocument.createRange();t.selectNode(e);return t},kN=function(e,t){return e.fire("BeforeObjectSelected",{target:t}).isDefaultPrevented()?q.none():q.some(DN(t))},PN=function(e,t,n){var r=qh(1,e.getBody(),t),i=id.fromRangeStart(r),o=i.getNode();if(Ch(o))return AN(1,e,o,!i.isAtEnd(),!1);var a=i.getNode(!0);if(Ch(a))return AN(1,e,a,!1,!1);var s=e.dom.getParent(i.getNode(),(function(e){return NN(e)||_N(e)}));return Ch(s)?AN(1,e,s,!1,n):q.none()},RN=function(e,t,n){return t.collapsed?PN(e,t,n).getOr(t):t},FN=function(e){return Uy(e)||Fy(e)},LN=function(e){return Vy(e)||Ly(e)},MN=function(e,t){qr(t)&&0===t.data.length&&e.remove(t)},BN=function(e,t,n,r,i,o){AN(r,e,o.getNode(!i),i,!0).each((function(n){if(t.collapsed){var r=t.cloneRange();i?r.setEnd(n.startContainer,n.startOffset):r.setStart(n.endContainer,n.endOffset);r.deleteContents()}else t.deleteContents();e.selection.setRng(n)}));MN(e.dom,n);return!0},UN=function(e,t){var n=e.selection.getRng();if(!qr(n.commonAncestorContainer))return!1;var r=t?od.Forwards:od.Backwards,i=cm(e.getBody()),o=D(Kh,t?i.next:i.prev),a=t?FN:LN,s=Wh(r,e.getBody(),n),c=z_(t,o(s));if(!c||!Yh(s,c))return!1;if(a(c))return BN(e,n,s.getNode(),r,t,c);var l=o(c);return!!(l&&a(l)&&Yh(c,l))&&BN(e,n,s.getNode(),r,t,l)},VN=function(e,t){return UN(e,t)},HN=function(e){return Ho(un.fromDom(e))||Uo(un.fromDom(e))},qN=Ui.generate([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),GN=function(e,t){var n=t.getNode(!1===e),r=e?"after":"before";return kr(n)&&n.getAttribute("data-mce-caret")===r},WN=function(e,t,n,r){var i=function(t){return Fo(un.fromDom(t))&&!Fh(n,r,e)};return Gh(!t,n).fold((function(){return Gh(t,r).fold(L,i)}),i)},zN=function(e,t,n,r){var i=r.getNode(!1===t);return J_(un.fromDom(e),un.fromDom(n.getNode())).map((function(e){return La(e)?qN.remove(e.dom):qN.moveToElement(i)})).orThunk((function(){return q.some(qN.moveToElement(i))}))},$N=function(e,t,n){return gm(t,e,n).bind((function(r){return HN(r.getNode())||WN(e,t,n,r)?q.none():t&&Xr(r.getNode())||!1===t&&Xr(r.getNode(!0))?zN(e,t,n,r):t&&Vy(n)||!1===t&&Uy(n)?q.some(qN.moveToPosition(r)):q.none()}))},KN=function(e,t){return e&&Xr(t.nextSibling)?q.some(qN.moveToElement(t.nextSibling)):!1===e&&Xr(t.previousSibling)?q.some(qN.moveToElement(t.previousSibling)):q.none()},YN=function(e,t,n){return n.fold((function(e){return q.some(qN.remove(e))}),(function(e){return q.some(qN.moveToElement(e))}),(function(n){return Fh(t,n,e)?q.none():q.some(qN.moveToPosition(n))}))},XN=function(e,t,n){return GN(t,n)?KN(t,n.getNode(!1===t)).fold((function(){return $N(e,t,n)}),q.some):$N(e,t,n).bind((function(t){return YN(e,n,t)}))},JN=function(e,t,n){var r=qh(t?1:-1,e,n),i=id.fromRangeStart(r),o=un.fromDom(e);return!1===t&&Vy(i)?q.some(qN.remove(i.getNode(!0))):t&&Uy(i)?q.some(qN.remove(i.getNode())):!1===t&&Uy(i)&&sj(o,i)?cj(o,i).map((function(e){return qN.remove(e.getNode())})):t&&Vy(i)&&aj(o,i)?lj(o,i).map((function(e){return qN.remove(e.getNode())})):XN(e,t,i)},QN=function(e,t){return function(n){e._selectionOverrides.hideFakeCaret();tv(e,t,un.fromDom(n));return!0}},ZN=function(e,t){return function(n){var r=t?id.before(n):id.after(n);e.selection.setRng(r.toRange());return!0}},eA=function(e){return function(t){e.selection.setRng(t.toRange());return!0}},tA=function(e,t){return q.from(lg(e.getBody(),t))},nA=function(e,t){var n=e.selection.getNode();return tA(e,n).filter(Xr).fold((function(){return JN(e.getBody(),t,e.selection.getRng()).exists((function(n){return n.fold(QN(e,t),ZN(e,t),eA(e))}))}),M)},rA=function(e){Q(Zl(e,".mce-offscreen-selection"),gr)},iA=function(e,t){var n=e.selection.getNode();if(Xr(n)&&!Jr(n)){return tA(e,n.parentNode).filter(Xr).fold((function(){rA(un.fromDom(e.getBody()));tv(e,t,un.fromDom(e.selection.getNode()));Z_(e);return!0}),M)}return!1},oA=function(e){var t=e.dom,n=e.selection,r=lg(e.getBody(),n.getNode());if(Yr(r)&&t.isBlock(r)&&t.isEmpty(r)){var i=t.create("br",{"data-mce-bogus":"1"});t.setHTML(r,"");r.appendChild(i);n.setRng(id.before(i).toRange())}return!0},aA=function(e,t){return e.selection.isCollapsed()?nA(e,t):iA(e,t)},sA=function(e,t){var n=id.fromRangeStart(e.selection.getRng());return gm(t,e.getBody(),n).filter((function(e){return t?Py(e):Ry(e)})).bind((function(e){return q.from(Lh(t?0:-1,e))})).exists((function(t){e.selection.select(t);return!0}))},cA=function(e,t){return!!e.selection.isCollapsed()&&sA(e,t)},lA=qr,uA=function(e){return lA(e)&&e.data[0]===$o},dA=function(e){return lA(e)&&e.data[e.data.length-1]===$o},pA=function(e){return e.ownerDocument.createTextNode($o)},hA=function(e){if(lA(e.previousSibling)){if(dA(e.previousSibling))return e.previousSibling;e.previousSibling.appendData($o);return e.previousSibling}if(lA(e)){if(uA(e))return e;e.insertData(0,$o);return e}var t=pA(e);e.parentNode.insertBefore(t,e);return t},mA=function(e){if(lA(e.nextSibling)){if(uA(e.nextSibling))return e.nextSibling;e.nextSibling.insertData(0,$o);return e.nextSibling}if(lA(e)){if(dA(e))return e;e.appendData($o);return e}var t=pA(e);e.nextSibling?e.parentNode.insertBefore(t,e.nextSibling):e.parentNode.appendChild(t);return t},fA=function(e,t){return e?hA(t):mA(t)},gA=D(fA,!0),bA=D(fA,!1),OA=function(e,t){return qr(e.container())?fA(t,e.container()):fA(t,e.getNode())},yA=function(e,t){var n=t.get();return n&&e.container()===n&&Zo(n)},jA=function(e,t){return t.fold((function(t){ph(e.get());var n=gA(t);e.set(n);return q.some(id(n,n.length-1))}),(function(t){return Cm(t).map((function(t){if(yA(t,e))return id(e.get(),1);ph(e.get());var n=OA(t,!0);e.set(n);return id(n,1)}))}),(function(t){return xm(t).map((function(t){if(yA(t,e))return id(e.get(),e.get().length-1);ph(e.get());var n=OA(t,!1);e.set(n);return id(n,n.length-1)}))}),(function(t){ph(e.get());var n=bA(t);e.set(n);return q.some(id(n,1))}))},vA=function(e,t){for(var n=0;n<e.length;n++){var r=e[n].apply(null,t);if(r.isSome())return r}return q.none()},CA=Ui.generate([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),xA=function(e,t){var n=Rh(t,e);return n||e},EA=function(e,t,n){var r=$_(n),i=xA(t,r.container());return q_(e,i,r).fold((function(){return jm(i,r).bind(D(q_,e,i)).map((function(e){return CA.before(e)}))}),q.none)},TA=function(e,t){return null===Sm(e,t)},SA=function(e,t,n){return q_(e,t,n).filter(D(TA,t))},IA=function(e,t,n){var r=K_(n);return SA(e,t,r).bind((function(e){return vm(e,r).isNone()?q.some(CA.start(e)):q.none()}))},wA=function(e,t,n){var r=$_(n);return SA(e,t,r).bind((function(e){return jm(e,r).isNone()?q.some(CA.end(e)):q.none()}))},_A=function(e,t,n){var r=K_(n),i=xA(t,r.container());return q_(e,i,r).fold((function(){return vm(i,r).bind(D(q_,e,i)).map((function(e){return CA.after(e)}))}),q.none)},NA=function(e){return!1===V_(DA(e))},AA=function(e,t,n){return vA([EA,IA,wA,_A],[e,t,n]).filter(NA)},DA=function(e){return e.fold(N,N,N,N)},kA=function(e){return e.fold(_("before"),_("start"),_("end"),_("after"))},PA=function(e){return e.fold(CA.before,CA.before,CA.after,CA.after)},RA=function(e){return e.fold(CA.start,CA.start,CA.end,CA.end)},FA=function(e,t){return kA(e)===kA(t)&&DA(e)===DA(t)},LA=function(e,t,n,r,i,o){return ti(q_(t,n,r),q_(t,n,i),(function(t,r){return t!==r&&G_(n,t,r)?CA.after(e?t:r):o})).getOr(o)},MA=function(e,t){return e.fold(M,(function(e){return!FA(e,t)}))},BA=function(e,t,n,r,i){var o=z_(e,i);return gm(e,n,o).map(D(z_,e)).fold((function(){return r.map(PA)}),(function(i){return AA(t,n,i).map(D(LA,e,t,n,o,i)).filter(D(MA,r))})).filter(NA)},UA=function(e,t){return e?t.fold(I(q.some,CA.start),q.none,I(q.some,CA.after),q.none):t.fold(q.none,I(q.some,CA.before),q.none,I(q.some,CA.end))},VA=function(e,t,n,r){var i=z_(e,r),o=AA(t,n,i);return AA(t,n,i).bind(D(UA,e)).orThunk((function(){return BA(e,t,n,o,r)}))};D(VA,!1);D(VA,!0);var HA,qA=function(e){return E(e.selection.getSel().modify)},GA=function(e,t,n){var r=e?1:-1;t.setRng(id(n.container(),n.offset()+r).toRange());t.getSel().modify("move",e?"forward":"backward","word");return!0},WA=function(e,t){var n=t.selection.getRng(),r=e?id.fromRangeEnd(n):id.fromRangeStart(n);return!!qA(t)&&(e&&ra(r)?GA(!0,t.selection,r):!(e||!ia(r))&&GA(!1,t.selection,r))};!function(e){e[e.Br=0]="Br";e[e.Block=1]="Block";e[e.Wrap=2]="Wrap";e[e.Eol=3]="Eol"}(HA||(HA={}));var zA,$A=function(e,t){return e===od.Backwards?ue(t):t},KA=function(e,t,n){return e===od.Forwards?t.next(n):t.prev(n)},YA=function(e,t,n,r){return $r(r.getNode(t===od.Forwards))?HA.Br:!1===Fh(n,r)?HA.Block:HA.Wrap},XA=function(e,t,n,r){for(var i=cm(n),o=r,a=[];o;){var s=KA(t,i,o);if(!s)break;if($r(s.getNode(!1)))return t===od.Forwards?{positions:$A(t,a).concat([s]),breakType:HA.Br,breakAt:q.some(s)}:{positions:$A(t,a),breakType:HA.Br,breakAt:q.some(s)};if(s.isVisible()){if(e(o,s)){var c=YA(n,t,o,s);return{positions:$A(t,a),breakType:c,breakAt:q.some(s)}}a.push(s);o=s}else o=s}return{positions:$A(t,a),breakType:HA.Eol,breakAt:q.none()}},JA=function(e,t,n,r){return t(n,r).breakAt.map((function(r){var i=t(n,r).positions;return e===od.Backwards?i.concat(r):[r].concat(i)})).getOr([])},QA=function(e,t){return re(e,(function(e,n){return e.fold((function(){return q.some(n)}),(function(r){return ti(fe(r.getClientRects()),fe(n.getClientRects()),(function(e,i){var o=Math.abs(t-e.left);return Math.abs(t-i.left)<=o?n:r})).or(e)}))}),q.none())},ZA=function(e,t){return fe(t.getClientRects()).bind((function(t){return QA(e,t.left)}))},eD=D(XA,id.isAbove,-1),tD=D(XA,id.isBelow,1),nD=D(JA,-1,eD),rD=D(JA,1,tD),iD=function(e,t){return eD(e,t).breakAt.isNone()},oD=function(e,t){return tD(e,t).breakAt.isNone()},aD=function(e){return Cm(e).map((function(t){return[t].concat(tD(e,t).positions)})).getOr([])},sD=function(e){return xm(e).map((function(t){return eD(e,t).positions.concat(t)})).getOr([])},cD=function(e){var t=function(t){return J(t,(function(t){var n=xu(t);n.node=e;return n}))};if(kr(e))return t(e.getClientRects());if(qr(e)){var n=e.ownerDocument.createRange();n.setStart(e,0);n.setEnd(e,e.data.length);return t(n.getClientRects())}},lD=function(e){return ce(e,cD)};!function(e){e[e.Up=-1]="Up";e[e.Down=1]="Down"}(zA||(zA={}));var uD,dD,pD=function(e,t,n,r){for(;r=Ph(r,e,Sa,t);)if(n(r))return},hD=function(e,t,n,r,i,o){var a=0,s=[],c=function(r){var o=lD([r]);-1===e&&(o=o.reverse());for(var c=0;c<o.length;c++){var u=o[c];if(!n(u,l)){s.length>0&&t(u,He(s))&&a++;u.line=a;if(i(u))return!0;s.push(u)}}},l=He(o.getClientRects());if(!l)return s;var u=o.getNode();c(u);pD(e,r,c,u);return s},mD=function(e,t){return t.line>e},fD=function(e,t){return t.line===e},gD=D(hD,zA.Up,Iu,wu),bD=D(hD,zA.Down,wu,Iu),OD=function(e,t,n,r){var i,o,a,s,c=cm(t),l=[],u=0,d=function(e){return He(e.getClientRects())};if(1===e){i=c.next;o=wu;a=Iu;s=id.after(r)}else{i=c.prev;o=Iu;a=wu;s=id.before(r)}var p=d(s);do{if(s.isVisible()){var h=d(s);if(!a(h,p)){l.length>0&&o(h,He(l))&&u++;var m=xu(h);m.position=s;m.line=u;if(n(m))return l;l.push(m)}}}while(s=i(s));return l},yD=function(e){return function(t){return mD(e,t)}},jD=function(e){return function(t){return fD(e,t)}},vD=Xr,CD=Ph,xD=function(e,t){return Math.abs(e.left-t)},ED=function(e,t){return Math.abs(e.right-t)},TD=function(e,t){return e>=t.left&&e<=t.right},SD=function(e,t){return e>=t.top&&e<=t.bottom},ID=function(e){return De(e,"node")},wD=function(e,t,n){void 0===n&&(n=M);return Ue(e,(function(e,r){if(TD(t,r))return n(r)?r:e;if(TD(t,e))return n(e)?e:r;var i=Math.min(xD(e,t),ED(e,t)),o=Math.min(xD(r,t),ED(r,t));return o===i&&ID(r)&&vD(r.node)||o<i?r:e}))},_D=function(e,t,n,r,i){var o=CD(r,e,Sa,t,!i);do{if(!o||n(o))return}while(o=CD(o,e,Sa,t))},ND=function(e,t,n){void 0===n&&(n=!0);var r=[],i=function(e,n){var i=te(lD([n]),(function(n){return!e(n,t)}));r=r.concat(i);return 0===i.length};r.push(t);_D(zA.Up,e,D(i,Iu),t.node,n);_D(zA.Down,e,D(i,wu),t.node,n);return r},AD=function(e){return te(be(e.getElementsByTagName("*")),xh)},DD=function(e,t){return{node:e.node,before:xD(e,t)<ED(e,t)}},kD=function(e,t,n){var r=lD(AD(e)),i=te(r,D(SD,n)),o=function(e){return!Ur(e.node)&&!Qr(e.node)},a=wD(i,t,o);if(a){var s=o(a);if((a=wD(ND(e,a,s),t,o))&&xh(a.node))return DD(a,t)}return null},PD=function(e,t){e.selection.setRng(t);Tb(e,e.selection.getRng())},RD=function(e,t,n){return q.some(RN(e,t,n))},FD=function(e,t,n,r,i,o){var a=t===od.Forwards,s=cm(e.getBody()),c=D(Kh,a?s.next:s.prev),l=a?r:i;if(!n.collapsed){var u=Au(n);if(o(u))return AN(t,e,u,t===od.Backwards,!1)}var d=Wh(t,e.getBody(),n);if(l(d))return kN(e,d.getNode(!a));var p=z_(a,c(d)),h=da(n);if(!p)return h?q.some(n):q.none();if(l(p))return AN(t,e,p.getNode(!a),a,!1);var m=c(p);return m&&l(m)&&Yh(p,m)?AN(t,e,m.getNode(!a),a,!1):h?RD(e,p.toRange(),!1):q.none()},LD=function(e,t,n,r,i,o){var a=Wh(t,e.getBody(),n),s=He(a.getClientRects()),c=t===zA.Down;if(!s)return q.none();var l,u=(c?bD:gD)(e.getBody(),yD(1),a),d=te(u,jD(1)),p=s.left,h=wD(d,p);if(h&&o(h.node)){var m=Math.abs(p-h.left),f=Math.abs(p-h.right);return AN(t,e,h.node,m<f,!1)}if(l=r(a)?a.getNode():i(a)?a.getNode(!0):Au(n)){var g=OD(t,e.getBody(),yD(1),l),b=wD(te(g,jD(1)),p);if(b)return RD(e,b.position.toRange(),!1);if(b=He(te(g,jD(0))))return RD(e,b.position.toRange(),!1)}return 0===d.length?MD(e,c).filter(c?i:r).map((function(t){return RN(e,t.toRange(),!1)})):q.none()},MD=function(e,t){var n=e.selection.getRng(),r=e.getBody();if(t){var i=id.fromRangeEnd(n),o=tD(r,i);return ge(o.positions)}i=id.fromRangeStart(n),o=eD(r,i);return fe(o.positions)},BD=function(e,t,n){return MD(e,t).filter(n).exists((function(t){e.selection.setRng(t.toRange());return!0}))},UD=function(e,t){var n=e.dom.createRng();n.setStart(t.container(),t.offset());n.setEnd(t.container(),t.offset());e.selection.setRng(n)},VD=function(e,t){e?t.setAttribute("data-mce-selected","inline-boundary"):t.removeAttribute("data-mce-selected")},HD=function(e,t,n){return jA(t,n).map((function(t){UD(e,t);return n}))},qD=function(e,t,n){var r=e.getBody(),i=id.fromRangeStart(e.selection.getRng()),o=D(U_,e);return VA(n,o,r,i).bind((function(n){return HD(e,t,n)}))},GD=function(e,t,n){var r=J(Zl(un.fromDom(t.getRoot()),'*[data-mce-selected="inline-boundary"]'),(function(e){return e.dom})),i=te(r,e),o=te(n,e);Q(de(i,o),D(VD,!1));Q(de(o,i),D(VD,!0))},WD=function(e,t){if(e.selection.isCollapsed()&&!0!==e.composing&&t.get()){var n=id.fromRangeStart(e.selection.getRng());if(id.isTextPosition(n)&&!1===W_(n)){UD(e,dh(t.get(),n));t.set(null)}}},zD=function(e,t,n,r){if(t.selection.isCollapsed()){var i=te(r,e);Q(i,(function(r){var i=id.fromRangeStart(t.selection.getRng());AA(e,t.getBody(),i).bind((function(e){return HD(t,n,e)}))}))}},$D=function(e,t,n){return!!Ap(e)&&qD(e,t,n).isSome()},KD=function(e,t,n){return!!Ap(t)&&WA(e,t)},YD=function(e){var t=_l(null),n=D(U_,e);e.on("NodeChange",(function(r){if(Ap(e)&&(!Qt.browser.isIE()||!r.initial)){GD(n,e.dom,r.parents);WD(e,t);zD(n,e,t,r.parents)}}));return t},XD=D(KD,!0),JD=D(KD,!1),QD=function(e,t,n){if(Ap(e)){var r=MD(e,t).getOrThunk((function(){var n=e.selection.getRng();return t?id.fromRangeEnd(n):id.fromRangeStart(n)}));return AA(D(U_,e),e.getBody(),r).exists((function(t){var r=PA(t);return jA(n,r).exists((function(t){UD(e,t);return!0}))}))}return!1},ZD=function(e,t){var n=document.createRange();n.setStart(e.container(),e.offset());n.setEnd(t.container(),t.offset());return n},ek=function(e){return ti(Cm(e),xm(e),(function(t,n){var r=z_(!0,t),i=z_(!1,n);return jm(e,r).forall((function(e){return e.isEqual(i)}))})).getOr(!0)},tk=function(e,t){return function(n){return jA(t,n).exists((function(t){UD(e,t);return!0}))}},nk=function(e,t,n,r){var i=e.getBody(),o=D(U_,e);e.undoManager.ignore((function(){e.selection.setRng(ZD(n,r));e.execCommand("Delete");AA(o,i,id.fromRangeStart(e.selection.getRng())).map(RA).map(tk(e,t))}));e.nodeChanged()},rk=function(e,t){var n=Rh(t,e);return n||e},ik=function(e,t,n,r){var i=rk(e.getBody(),r.container()),o=D(U_,e),a=AA(o,i,r);return a.bind((function(e){return n?e.fold(_(q.some(RA(e))),q.none,_(q.some(PA(e))),q.none):e.fold(q.none,_(q.some(PA(e))),q.none,_(q.some(RA(e))))})).map(tk(e,t)).getOrThunk((function(){var s=bm(n,i,r),c=s.bind((function(e){return AA(o,i,e)}));return ti(a,c,(function(){return q_(o,i,r).exists((function(t){if(ek(t)){tv(e,n,un.fromDom(t));return!0}return!1}))})).orThunk((function(){return c.bind((function(i){return s.map((function(i){n?nk(e,t,r,i):nk(e,t,i,r);return!0}))}))})).getOr(!1)}))},ok=function(e,t,n){if(e.selection.isCollapsed()&&Ap(e)){var r=id.fromRangeStart(e.selection.getRng());return ik(e,t,n,r)}return!1},ak=function(e,t){var n=Yy(t,e);return ae(n,Po).fold(_(n),(function(e){return n.slice(0,e)}))},sk=function(e){return 1===Jn(e)},ck=function(e,t,n,r){var i=D(Sx,t),o=J(te(r,i),(function(e){return e.dom}));if(0===o.length)tv(t,e,n);else{var a=Tx(n.dom,o);t.selection.setRng(a.toRange())}},lk=function(e,t){var n=un.fromDom(e.getBody()),r=un.fromDom(e.selection.getStart()),i=te(ak(n,r),sk);return ge(i).exists((function(n){var r=id.fromRangeStart(e.selection.getRng());if(eN(t,r,n.dom)&&!Ix(n)){ck(t,e,n,i);return!0}return!1}))},uk=function(e,t){return!!e.selection.isCollapsed()&&lk(e,t)},dk=function(e,t,n){e._selectionOverrides.hideFakeCaret();tv(e,t,un.fromDom(n));return!0},pk=function(e,t){var n=t?Fy:Ly,r=t?od.Forwards:od.Backwards,i=Wh(r,e.getBody(),e.selection.getRng());return n(i)?dk(e,t,i.getNode(!t)):q.from(z_(t,i)).filter((function(e){return n(e)&&Yh(i,e)})).exists((function(n){return dk(e,t,n.getNode(!t))}))},hk=function(e,t){var n=e.selection.getNode();return!!Qr(n)&&dk(e,t,n)},mk=function(e,t){return e.selection.isCollapsed()?pk(e,t):hk(e,t)},fk=function(e){return lo(e,(function(e){return Yr(e.dom)||Xr(e.dom)})).exists((function(e){return Yr(e.dom)}))},gk=function(e){var t=parseInt(e,10);return isNaN(t)?0:t},bk=function(e,t){return(e||Ro(t)?"margin":"padding")+("rtl"===fi(t,"direction")?"-right":"-left")},Ok=function(e,t,n,r,i,o){var a=bk(n,un.fromDom(o));if("outdent"===t){var s=Math.max(0,gk(o.style[a])-r);e.setStyle(o,a,s?s+i:"")}else{s=gk(o.style[a])+r+i;e.setStyle(o,a,s)}},yk=function(e,t){return le(t,(function(t){var n=bk(Op(e),t),r=bi(t,n).map(gk).getOr(0);return"false"!==e.dom.getContentEditable(t.dom)&&r>0}))},jk=function(e){var t=xk(e);return!e.mode.isReadOnly()&&(t.length>1||yk(e,t))},vk=function(e){return Bo(e)||Uo(e)},Ck=function(e){return Un(e).exists(vk)},xk=function(e){return te(mu(e.selection.getSelectedBlocks()),(function(e){return!vk(e)&&!Ck(e)&&fk(e)}))},Ek=function(e,t){var n=e.dom,r=e.selection,i=e.formatter,o=yp(e),a=/[a-z%]+$/i.exec(o)[0],s=parseInt(o,10),c=Op(e),l=Xd(e);e.queryCommandState("InsertUnorderedList")||e.queryCommandState("InsertOrderedList")||""!==l||n.getParent(r.getNode(),n.isBlock)||i.apply("div");Q(xk(e),(function(e){Ok(n,t,c,s,a,e.dom)}))},Tk=function(e,t){if(e.selection.isCollapsed()&&jk(e)){var n=e.dom,r=e.selection.getRng(),i=id.fromRangeStart(r),o=n.getParent(r.startContainer,n.isBlock);if(null!==o&&ej(un.fromDom(o),i)){Ek(e,"outdent");return!0}}return!1},Sk=function(e,t){e.getDoc().execCommand(t,!1,null)},Ik=function(e,t){if(!(Tk(e)||aA(e,!1)||VN(e,!1)||ok(e,t,!1)||vN(e,!1)||Jv(e)||cA(e,!1)||mk(e,!1)||wN(e)||uk(e,!1))){Sk(e,"Delete");Z_(e)}},wk=function(e,t){aA(e,!0)||VN(e,!0)||ok(e,t,!0)||vN(e,!0)||Jv(e)||cA(e,!0)||mk(e,!0)||wN(e)||uk(e,!0)||Sk(e,"ForwardDelete")},_k=function(e,t){e.addCommand("delete",(function(){Ik(e,t)}));e.addCommand("forwardDelete",(function(){wk(e,t)}))},Nk=5,Ak=400,Dk=function(e){return void 0===e.touches||1!==e.touches.length?q.none():q.some(e.touches[0])},kk=function(e,t){var n=Math.abs(e.clientX-t.x),r=Math.abs(e.clientY-t.y);return n>Nk||r>Nk},Pk=function(e){var t=Ml(),n=_l(!1),r=Ul((function(t){e.fire("longpress",qe(qe({},t),{type:"longpress"}));n.set(!0)}),Ak);e.on("touchstart",(function(e){Dk(e).each((function(i){r.cancel();var o={x:i.clientX,y:i.clientY,target:e.target};r.throttle(e);n.set(!1);t.set(o)}))}),!0);e.on("touchmove",(function(i){r.cancel();Dk(i).each((function(r){t.on((function(i){if(kk(r,i)){t.clear();n.set(!1);e.fire("longpresscancel")}}))}))}),!0);e.on("touchend touchcancel",(function(i){r.cancel();"touchcancel"!==i.type&&t.get().filter((function(e){return e.target.isEqualNode(i.target)})).each((function(){n.get()?i.preventDefault():e.fire("tap",qe(qe({},i),{type:"tap"}))}))}),!0)},Rk=function(e,t){return Ae(e,t.nodeName)},Fk=function(e,t){return!!qr(t)||!!kr(t)&&(!Rk(e,t)&&!$m(t))},Lk=function(e,t,n){return X(Ky(un.fromDom(n),un.fromDom(t)),(function(t){return Rk(e,t.dom)}))},Mk=function(e,t){if(qr(t)){if(0===t.nodeValue.length)return!0;if(/^\s+$/.test(t.nodeValue)&&(!t.nextSibling||Rk(e,t.nextSibling)))return!0}return!1},Bk=function(e){var t,n,r,i=e.dom,o=e.selection,a=e.schema,s=a.getBlockElements(),c=o.getStart(),l=e.getBody(),u=Xd(e);if(c&&kr(c)&&u){var d=l.nodeName.toLowerCase();if(a.isValidChild(d,u.toLowerCase())&&!Lk(s,l,c)){var p=o.getRng(),h=p.startContainer,m=p.startOffset,f=p.endContainer,g=p.endOffset,b=TO(e);c=l.firstChild;for(;c;)if(Fk(s,c)){if(Mk(s,c)){n=c;c=c.nextSibling;i.remove(n);continue}if(!t){t=i.create(u,Jd(e));c.parentNode.insertBefore(t,c);r=!0}n=c;c=c.nextSibling;t.appendChild(n)}else{t=null;c=c.nextSibling}if(r&&b){p.setStart(h,m);p.setEnd(f,g);o.setRng(p);e.nodeChanged()}}}},Uk=function(e){Xd(e)&&e.on("NodeChange",D(Bk,e))},Vk=function(e){return mo(un.fromDom(e.getBody()),"*[data-mce-caret]").map((function(e){return e.dom})).getOrNull()},Hk=function(e){e.selection.setRng(e.selection.getRng())},qk=function(e,t){if(t.hasAttribute("data-mce-caret")){ua(t);Hk(e);e.selection.scrollIntoView(t)}},Gk=function(e,t){var n=Vk(e);if(n)if("compositionstart"!==t.type){if(ta(n)){qk(e,n);e.undoManager.add()}}else{t.preventDefault();t.stopPropagation();qk(e,n)}},Wk=function(e){e.on("keyup compositionstart",D(Gk,e))},zk=Xr,$k=function(e,t,n){return FD(t,e,n,Uy,Vy,zk)},Kk=function(e,t,n){return LD(t,e,n,(function(e){return Uy(e)||My(e)}),(function(e){return Vy(e)||By(e)}),zk)},Yk=function(e){var t=e.dom.create(Xd(e));(!Qt.ie||Qt.ie>=11)&&(t.innerHTML='<br data-mce-bogus="1">');return t},Xk=function(e,t,n){var r=cm(e.getBody()),i=D(Kh,1===t?r.next:r.prev);if(n.collapsed&&qp(e)){var o=e.dom.getParent(n.startContainer,"PRE");if(!o)return;if(!i(id.fromRangeStart(n))){var a=Yk(e);1===t?e.$(o).after(a):e.$(o).before(a);e.selection.select(a,!0);e.selection.collapse()}}},Jk=function(e,t){var n=t?od.Forwards:od.Backwards,r=e.selection.getRng();return $k(n,e,r).orThunk((function(){Xk(e,n,r);return q.none()}))},Qk=function(e,t){var n=t?1:-1,r=e.selection.getRng();return Kk(n,e,r).orThunk((function(){Xk(e,n,r);return q.none()}))},Zk=function(e,t){return Jk(e,t).exists((function(t){PD(e,t);return!0}))},eP=function(e,t){return Qk(e,t).exists((function(t){PD(e,t);return!0}))},tP=function(e,t){return BD(e,t,t?Vy:Uy)},nP=function(e){return Y(["figcaption"],In(e))},rP=function(e){var t=document.createRange();t.setStartBefore(e.dom);t.setEndBefore(e.dom);return t},iP=function(e,t,n){n?dr(e,t):ur(e,t)},oP=function(e,t){var n=un.fromTag("br");iP(e,n,t);return rP(n)},aP=function(e,t,n,r){var i=un.fromTag(n),o=un.fromTag("br");si(i,r);dr(i,o);iP(e,i,t);return rP(o)},sP=function(e,t,n,r){return""===t?oP(e,r):aP(e,r,t,n)},cP=function(e,t){var n=D(xn,t);return lo(un.fromDom(e.container()),Po,n).filter(nP)},lP=function(e,t,n){return t?oD(e.dom,n):iD(e.dom,n)},uP=function(e,t){var n=un.fromDom(e.getBody()),r=id.fromRangeStart(e.selection.getRng()),i=Xd(e),o=Jd(e);return cP(r,n).exists((function(){if(lP(n,t,r)){var a=sP(n,i,o,t);e.selection.setRng(a);return!0}return!1}))},dP=function(e,t){return!!e.selection.isCollapsed()&&uP(e,t)},pP=function(e){return J(e,(function(e){return qe({shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0,action:S},e)}))},hP=function(e,t){return t.keyCode===e.keyCode&&t.shiftKey===e.shiftKey&&t.altKey===e.altKey&&t.ctrlKey===e.ctrlKey&&t.metaKey===e.metaKey},mP=function(e,t){return ce(pP(e),(function(e){return hP(e,t)?[e]:[]}))},fP=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return function(){return e.apply(null,t)}},gP=function(e,t){return oe(mP(e,t),(function(e){return e.action()}))},bP=function(e,t){var n=t?od.Forwards:od.Backwards,r=e.selection.getRng();return FD(e,n,r,Fy,Ly,Qr).exists((function(t){PD(e,t);return!0}))},OP=function(e,t){var n=t?1:-1,r=e.selection.getRng();return LD(e,n,r,Fy,Ly,Qr).exists((function(t){PD(e,t);return!0}))},yP=function(e,t){return BD(e,t,t?Ly:Fy)},jP=function(e,t){return{left:e.left-t,top:e.top-t,right:e.right+2*t,bottom:e.bottom+2*t,width:e.width+t,height:e.height+t}},vP=function(e,t){return ce(t,(function(t){var n=jP(xu(t.getBoundingClientRect()),-1);return[{x:n.left,y:e(n),cell:t},{x:n.right,y:e(n),cell:t}]}))},CP=function(e,t,n){return re(e,(function(e,r){return e.fold((function(){return q.some(r)}),(function(e){var i=Math.sqrt(Math.abs(e.x-t)+Math.abs(e.y-n)),o=Math.sqrt(Math.abs(r.x-t)+Math.abs(r.y-n));return q.some(o<i?r:e)}))}),q.none())},xP=function(e,t,n,r,i){var o=Zl(un.fromDom(n),"td,th,caption").map((function(e){return e.dom})),a=te(vP(e,o),(function(e){return t(e,i)}));return CP(a,r,i).map((function(e){return e.cell}))},EP=function(e){return e.bottom},TP=function(e){return e.top},SP=function(e,t){return e.y<t},IP=function(e,t){return e.y>t},wP=D(xP,EP,SP),_P=D(xP,TP,IP),NP=function(e,t){return fe(t.getClientRects()).bind((function(t){return wP(e,t.left,t.top)})).bind((function(e){return ZA(sD(e),t)}))},AP=function(e,t){return ge(t.getClientRects()).bind((function(t){return _P(e,t.left,t.top)})).bind((function(e){return ZA(aD(e),t)}))},DP=function(e,t,n){return n.breakAt.exists((function(n){return e(t,n).breakAt.isSome()}))},kP=function(e){return e.breakType===HA.Wrap&&0===e.positions.length},PP=function(e){return e.breakType===HA.Br&&1===e.positions.length},RP=function(e,t,n){var r=e(t,n);return kP(r)||!$r(n.getNode())&&PP(r)?!DP(e,t,r):r.breakAt.isNone()},FP=D(RP,eD),LP=D(RP,tD),MP=function(e,t,n){var r=id.fromRangeStart(t);return ym(!e,n).exists((function(e){return e.isEqual(r)}))},BP=function(e,t,n,r){var i=e.selection.getRng(),o=t?1:-1;if(vh()&&MP(t,i,n)){AN(o,e,n,!t,!1).each((function(t){PD(e,t)}));return!0}return!1},UP=function(e,t,n){return NP(t,n).orThunk((function(){return fe(n.getClientRects()).bind((function(n){return QA(nD(e,id.before(t)),n.left)}))})).getOr(id.before(t))},VP=function(e,t,n){return AP(t,n).orThunk((function(){return fe(n.getClientRects()).bind((function(n){return QA(rD(e,id.after(t)),n.left)}))})).getOr(id.after(t))},HP=function(e,t){var n=t.getNode(e);return kr(n)&&"TABLE"===n.nodeName?q.some(n):q.none()},qP=function(e,t,n,r){var i=Xd(t);i?t.undoManager.transact((function(){var r=un.fromTag(i);si(r,Jd(t));dr(r,un.fromTag("br"));e?lr(un.fromDom(n),r):cr(un.fromDom(n),r);var o=t.dom.createRng();o.setStart(r.dom,0);o.setEnd(r.dom,0);PD(t,o)})):PD(t,r.toRange())},GP=function(e,t,n){var r=HP(!!t,n),i=!1===t;r.fold((function(){return PD(e,n.toRange())}),(function(r){return ym(i,e.getBody()).filter((function(e){return e.isEqual(n)})).fold((function(){return PD(e,n.toRange())}),(function(i){return qP(t,e,r,n)}))}))},WP=function(e,t,n,r){var i=e.selection.getRng(),o=id.fromRangeStart(i),a=e.getBody();if(!t&&FP(r,o)){var s=UP(a,n,o);GP(e,t,s);return!0}if(t&&LP(r,o)){s=VP(a,n,o);GP(e,t,s);return!0}return!1},zP=function(e,t,n){return q.from(e.dom.getParent(e.selection.getNode(),"td,th")).bind((function(r){return q.from(e.dom.getParent(r,"table")).map((function(i){return n(e,t,i,r)}))})).getOr(!1)},$P=function(e,t){return zP(e,t,BP)},KP=function(e,t){return zP(e,t,WP)},YP=function(e,t,n){var r=qt().os;gP([{keyCode:Tg.RIGHT,action:fP(Zk,e,!0)},{keyCode:Tg.LEFT,action:fP(Zk,e,!1)},{keyCode:Tg.UP,action:fP(eP,e,!1)},{keyCode:Tg.DOWN,action:fP(eP,e,!0)},{keyCode:Tg.RIGHT,action:fP($P,e,!0)},{keyCode:Tg.LEFT,action:fP($P,e,!1)},{keyCode:Tg.UP,action:fP(KP,e,!1)},{keyCode:Tg.DOWN,action:fP(KP,e,!0)},{keyCode:Tg.RIGHT,action:fP(bP,e,!0)},{keyCode:Tg.LEFT,action:fP(bP,e,!1)},{keyCode:Tg.UP,action:fP(OP,e,!1)},{keyCode:Tg.DOWN,action:fP(OP,e,!0)},{keyCode:Tg.RIGHT,action:fP($D,e,t,!0)},{keyCode:Tg.LEFT,action:fP($D,e,t,!1)},{keyCode:Tg.RIGHT,ctrlKey:!r.isOSX(),altKey:r.isOSX(),action:fP(XD,e,t)},{keyCode:Tg.LEFT,ctrlKey:!r.isOSX(),altKey:r.isOSX(),action:fP(JD,e,t)},{keyCode:Tg.UP,action:fP(dP,e,!1)},{keyCode:Tg.DOWN,action:fP(dP,e,!0)}],n).each((function(e){n.preventDefault()}))},XP=function(e,t){e.on("keydown",(function(n){!1===n.isDefaultPrevented()&&YP(e,t,n)}))},JP=function(e,t,n){gP([{keyCode:Tg.BACKSPACE,action:fP(Tk,e,!1)},{keyCode:Tg.BACKSPACE,action:fP(aA,e,!1)},{keyCode:Tg.DELETE,action:fP(aA,e,!0)},{keyCode:Tg.BACKSPACE,action:fP(VN,e,!1)},{keyCode:Tg.DELETE,action:fP(VN,e,!0)},{keyCode:Tg.BACKSPACE,action:fP(ok,e,t,!1)},{keyCode:Tg.DELETE,action:fP(ok,e,t,!0)},{keyCode:Tg.BACKSPACE,action:fP(Jv,e,!1)},{keyCode:Tg.DELETE,action:fP(Jv,e,!0)},{keyCode:Tg.BACKSPACE,action:fP(cA,e,!1)},{keyCode:Tg.DELETE,action:fP(cA,e,!0)},{keyCode:Tg.BACKSPACE,action:fP(mk,e,!1)},{keyCode:Tg.DELETE,action:fP(mk,e,!0)},{keyCode:Tg.BACKSPACE,action:fP(wN,e,!1)},{keyCode:Tg.DELETE,action:fP(wN,e,!0)},{keyCode:Tg.BACKSPACE,action:fP(vN,e,!1)},{keyCode:Tg.DELETE,action:fP(vN,e,!0)},{keyCode:Tg.BACKSPACE,action:fP(uk,e,!1)},{keyCode:Tg.DELETE,action:fP(uk,e,!0)}],n).each((function(e){n.preventDefault()}))},QP=function(e,t){gP([{keyCode:Tg.BACKSPACE,action:fP(oA,e)},{keyCode:Tg.DELETE,action:fP(oA,e)}],t)},ZP=function(e,t){e.on("keydown",(function(n){!1===n.isDefaultPrevented()&&JP(e,t,n)}));e.on("keyup",(function(t){!1===t.isDefaultPrevented()&&QP(e,t)}))},eR=function(e){for(;e;){if(1===e.nodeType||3===e.nodeType&&e.data&&/[\r\n\s]/.test(e.data))return e;e=e.nextSibling}},tR=function(e,t){var n,r=t,i=e.dom,o=e.schema.getMoveCaretBeforeOnEnterElements();if(t){if(/^(LI|DT|DD)$/.test(t.nodeName)){var a=eR(t.firstChild);a&&/^(UL|OL|DL)$/.test(a.nodeName)&&t.insertBefore(i.doc.createTextNode(zo),t.firstChild)}var s=i.createRng();t.normalize();if(t.hasChildNodes()){for(var c=new Eo(t,t);n=c.current();){if(qr(n)){s.setStart(n,0);s.setEnd(n,0);break}if(o[n.nodeName.toLowerCase()]){s.setStartBefore(n);s.setEndBefore(n);break}r=n;n=c.next()}if(!n){s.setStart(r,0);s.setEnd(r,0)}}else if($r(t))if(t.nextSibling&&i.isBlock(t.nextSibling)){s.setStartBefore(t);s.setEndBefore(t)}else{s.setStartAfter(t);s.setEndAfter(t)}else{s.setStart(t,0);s.setEnd(t,0)}e.selection.setRng(s);Tb(e,s)}},nR=function(e,t){var n,r,i=e.getRoot();n=t;for(;n!==i&&"false"!==e.getContentEditable(n);){"true"===e.getContentEditable(n)&&(r=n);n=n.parentNode}return n!==i?r:i},rR=function(e){return q.from(e.dom.getParent(e.selection.getStart(!0),e.dom.isBlock))},iR=function(e){return rR(e).fold(_(""),(function(e){return e.nodeName.toUpperCase()}))},oR=function(e){return rR(e).filter((function(e){return Uo(un.fromDom(e))})).isSome()},aR=function(e,t){return e.firstChild&&e.firstChild.nodeName===t},sR=function(e){var t;return(null===(t=e.parentNode)||void 0===t?void 0:t.firstChild)===e},cR=function(e,t){return e&&e.parentNode&&e.parentNode.nodeName===t},lR=function(e){return e&&/^(OL|UL|LI)$/.test(e.nodeName)},uR=function(e){return lR(e)&&lR(e.parentNode)},dR=function(e){var t=e.parentNode;return/^(LI|DT|DD)$/.test(t.nodeName)?t:e},pR=function(e,t,n){for(var r=e[n?"firstChild":"lastChild"];r&&!kr(r);)r=r[n?"nextSibling":"previousSibling"];return r===t},hR=function(e,t,n,r,i){var o=e.dom,a=e.selection.getRng();if(n!==e.getBody()){uR(n)&&(i="LI");var s=i?t(i):o.create("BR");if(pR(n,r,!0)&&pR(n,r,!1))if(cR(n,"LI")){var c=dR(n);o.insertAfter(s,c);sR(n)?o.remove(c):o.remove(n)}else o.replace(s,n);else if(pR(n,r,!0)){if(cR(n,"LI")){o.insertAfter(s,dR(n));s.appendChild(o.doc.createTextNode(" "));s.appendChild(n)}else n.parentNode.insertBefore(s,n);o.remove(r)}else if(pR(n,r,!1)){o.insertAfter(s,dR(n));o.remove(r)}else{n=dR(n);var l=a.cloneRange();l.setStartAfter(r);l.setEndAfter(n);var u=l.extractContents();if("LI"===i&&aR(u,"LI")){s=u.firstChild;o.insertAfter(u,n)}else{o.insertAfter(u,n);o.insertAfter(s,n)}o.remove(r)}tR(e,s)}},mR=function(e){Q(Ql(un.fromDom(e),Dn),(function(e){var t=e.dom;t.nodeValue=Yo(t.nodeValue)}))},fR=function(e,t){return t&&"A"===t.nodeName&&e.isEmpty(t)},gR=function(e){return e&&/^(TD|TH|CAPTION)$/.test(e.nodeName)},bR=function(e){e.innerHTML='<br data-mce-bogus="1">'},OR=function(e,t){return e.nodeName===t||e.previousSibling&&e.previousSibling.nodeName===t},yR=function(e,t){return t&&e.isBlock(t)&&!/^(TD|TH|CAPTION|FORM)$/.test(t.nodeName)&&!/^(fixed|absolute)/i.test(t.style.position)&&"true"!==e.getContentEditable(t)},jR=function(e,t,n){var r,i=n,o=[];if(i){for(;i=i.firstChild;){if(e.isBlock(i))return;kr(i)&&!t[i.nodeName.toLowerCase()]&&o.push(i)}r=o.length;for(;r--;)(!(i=o[r]).hasChildNodes()||i.firstChild===i.lastChild&&""===i.firstChild.nodeValue||fR(e,i))&&e.remove(i)}},vR=function(e,t,n){return!1===qr(t)?n:e?1===n&&t.data.charAt(n-1)===$o?0:n:n===t.data.length-1&&t.data.charAt(n)===$o?t.data.length:n},CR=function(e){var t=e.cloneRange();t.setStart(e.startContainer,vR(!0,e.startContainer,e.startOffset));t.setEnd(e.endContainer,vR(!1,e.endContainer,e.endOffset));return t},xR=function(e){do{qr(e)&&(e.nodeValue=e.nodeValue.replace(/^[\r\n]+/,""));e=e.firstChild}while(e)},ER=function(e,t){var n,r,i=e.getRoot();n=t;for(;n!==i&&"false"!==e.getContentEditable(n);){"true"===e.getContentEditable(n)&&(r=n);n=n.parentNode}return n!==i?r:i},TR=function(e,t,n){var r=e.dom;q.from(n.style).map(r.parseStyle).each((function(e){var n=Oi(un.fromDom(t)),i=qe(qe({},n),e);r.setStyles(t,i)}));var i=q.from(n.class).map((function(e){return e.split(/\s+/)})),o=q.from(t.className).map((function(e){return te(e.split(/\s+/),(function(e){return""!==e}))}));ti(i,o,(function(e,n){var i=te(n,(function(t){return!Y(e,t)})),o=We(We([],e,!0),i,!0);r.setAttrib(t,"class",o.join(" "))}));var a=["style","class"],s=Ie(n,(function(e,t){return!Y(a,t)}));r.setAttribs(t,s)},SR=function(e,t){var n=Xd(e);if(n&&n.toLowerCase()===t.tagName.toLowerCase()){var r=Jd(e);TR(e,t,r)}},IR=function(e,t,n,r,i){var o,a,s,c,l,u,d=t||"P",p=e.dom,h=ER(p,r);if(!(a=p.getParent(r,p.isBlock))||!yR(p,a)){u=(a=a||h)===e.getBody()||gR(a)?a.nodeName.toLowerCase():a.parentNode.nodeName.toLowerCase();if(!a.hasChildNodes()){o=p.create(d);SR(e,o);a.appendChild(o);n.setStart(o,0);n.setEnd(o,0);return o}c=r;for(;c.parentNode!==a;)c=c.parentNode;for(;c&&!p.isBlock(c);){s=c;c=c.previousSibling}if(s&&e.schema.isValidChild(u,d.toLowerCase())){o=p.create(d);SR(e,o);s.parentNode.insertBefore(o,s);c=s;for(;c&&!p.isBlock(c);){l=c.nextSibling;o.appendChild(c);c=l}n.setStart(r,i);n.setEnd(r,i)}}return r},wR=function(e,t){t.normalize();var n=t.lastChild;n&&!/^(left|right)$/gi.test(e.getStyle(n,"float",!0))||e.add(t,"br")},_R=function(e,t){var n,r,i,o,a,s,c,l,u,d,p=e.dom,h=e.schema,m=h.getNonEmptyElements(),f=e.selection.getRng(),g=function(t){var n,i,a,s=r,c=h.getTextInlineElements();a=n=t||"TABLE"===l||"HR"===l?p.create(t||u):o.cloneNode(!1);if(!1===ep(e)){p.setAttrib(n,"style",null);p.setAttrib(n,"class",null)}else do{if(c[s.nodeName]){if(Tm(s)||$m(s))continue;i=s.cloneNode(!1);p.setAttrib(i,"id","");if(n.hasChildNodes()){i.appendChild(n.firstChild);n.appendChild(i)}else{a=i;n.appendChild(i)}}}while((s=s.parentNode)&&s!==v);SR(e,n);bR(a);return n},b=function(e){var t,n,a=vR(e,r,i);if(qr(r)&&(e?a>0:a<r.nodeValue.length))return!1;if(r.parentNode===o&&d&&!e)return!0;if(e&&kr(r)&&r===o.firstChild)return!0;if(OR(r,"TABLE")||OR(r,"HR"))return d&&!e||!d&&e;var s=new Eo(r,o);qr(r)&&(e&&0===a?s.prev():e||a!==r.nodeValue.length||s.next());for(;t=s.current();){if(kr(t)){if(!t.getAttribute("data-mce-bogus")){n=t.nodeName.toLowerCase();if(m[n]&&"br"!==n)return!1}}else if(qr(t)&&!wa(t.nodeValue))return!1;e?s.prev():s.next()}return!0},O=function(){a=/^(H[1-6]|PRE|FIGURE)$/.test(l)&&"HGROUP"!==C?g(u):g();tp(e)&&yR(p,c)&&p.isEmpty(o)?a=p.split(c,o):p.insertAfter(a,o);tR(e,a)};Wg(p,f).each((function(e){f.setStart(e.startContainer,e.startOffset);f.setEnd(e.endContainer,e.endOffset)}));r=f.startContainer;i=f.startOffset;u=Xd(e);var y=!(!t||!t.shiftKey),j=!(!t||!t.ctrlKey);if(kr(r)&&r.hasChildNodes()){d=i>r.childNodes.length-1;r=r.childNodes[Math.min(i,r.childNodes.length-1)]||r;i=d&&qr(r)?r.nodeValue.length:0}var v=ER(p,r);if(v){(u&&!y||!u&&y)&&(r=IR(e,u,f,r,i));o=p.getParent(r,p.isBlock);c=o?p.getParent(o.parentNode,p.isBlock):null;l=o?o.nodeName.toUpperCase():"";var C=c?c.nodeName.toUpperCase():"";if("LI"===C&&!j){o=c;c=c.parentNode;l=C}if(/^(LI|DT|DD)$/.test(l)&&p.isEmpty(o))hR(e,g,c,o,u);else if(!u||o!==e.getBody()){u=u||"P";if(Qo(o)){a=ua(o);p.isEmpty(o)&&bR(o);SR(e,a);tR(e,a)}else if(b())O();else if(b(!0)){a=o.parentNode.insertBefore(g(),o);tR(e,OR(o,"HR")?a:o)}else{(n=CR(f).cloneRange()).setEndAfter(o);s=n.extractContents();mR(s);xR(s);a=s.firstChild;p.insertAfter(s,o);jR(p,m,a);wR(p,o);p.isEmpty(o)&&bR(o);a.normalize();if(p.isEmpty(a)){p.remove(a);O()}else{SR(e,a);tR(e,a)}}p.setAttrib(a,"id","");e.fire("NewBlock",{newBlock:a})}}},NR=function(e,t,n){for(var r,i=new Eo(t,n),o=e.getNonEmptyElements();r=i.next();)if(o[r.nodeName.toLowerCase()]||r.length>0)return!0},AR=function(e,t,n){var r=e.dom.createRng();if(n){r.setStartBefore(t);r.setEndBefore(t)}else{r.setStartAfter(t);r.setEndAfter(t)}e.selection.setRng(r);Tb(e,r)},DR=function(e,t){var n,r,i=e.selection,o=e.dom,a=i.getRng();Wg(o,a).each((function(e){a.setStart(e.startContainer,e.startOffset);a.setEnd(e.endContainer,e.endOffset)}));var s=a.startOffset,c=a.startContainer;if(1===c.nodeType&&c.hasChildNodes()){var l=s>c.childNodes.length-1;c=c.childNodes[Math.min(s,c.childNodes.length-1)]||c;s=l&&3===c.nodeType?c.nodeValue.length:0}var u=o.getParent(c,o.isBlock),d=u?o.getParent(u.parentNode,o.isBlock):null,p=d?d.nodeName.toUpperCase():"",h=!(!t||!t.ctrlKey);"LI"!==p||h||(u=d);if(c&&3===c.nodeType&&s>=c.nodeValue.length&&!NR(e.schema,c,u)){n=o.create("br");a.insertNode(n);a.setStartAfter(n);a.setEndAfter(n);r=!0}n=o.create("br");ld(o,a,n);AR(e,n,r);e.undoManager.add()},kR=function(e,t){var n=un.fromTag("br");cr(un.fromDom(t),n);e.undoManager.add()},PR=function(e,t){FR(e.getBody(),t)||lr(un.fromDom(t),un.fromTag("br"));var n=un.fromTag("br");lr(un.fromDom(t),n);AR(e,n.dom,!1);e.undoManager.add()},RR=function(e){return $r(e.getNode())},FR=function(e,t){return!!RR(id.after(t))||jm(e,id.after(t)).map((function(e){return $r(e.getNode())})).getOr(!1)},LR=function(e){return e&&"A"===e.nodeName&&"href"in e},MR=function(e){return e.fold(L,LR,LR,L)},BR=function(e){var t=D(U_,e),n=id.fromRangeStart(e.selection.getRng());return AA(t,e.getBody(),n).filter(MR)},UR=function(e,t){t.fold(S,D(kR,e),D(PR,e),S)},VR=function(e,t){var n=BR(e);n.isSome()?n.each(D(UR,e)):DR(e,t)},HR=function(e,t){return rR(e).filter((function(e){return t.length>0&&yn(un.fromDom(e),t)})).isSome()},qR=function(e){return HR(e,Qd(e))},GR=function(e){return HR(e,Zd(e))},WR=Ui.generate([{br:[]},{block:[]},{none:[]}]),zR=function(e,t){return GR(e)},$R=function(e){return function(t,n){return""===Xd(t)===e}},KR=function(e){return function(t,n){return oR(t)===e}},YR=function(e,t){return function(n,r){return iR(n)===e.toUpperCase()===t}},XR=function(e){return YR("pre",e)},JR=function(){return YR("summary",!0)},QR=function(e){return function(t,n){return Yd(t)===e}},ZR=function(e,t){return qR(e)},eF=function(e,t){return t},tF=function(e){var t=Xd(e),n=nR(e.dom,e.selection.getStart());return n&&e.schema.isValidChild(n.nodeName,t||"P")},nF=function(e,t){return function(n,r){return re(e,(function(e,t){return e&&t(n,r)}),!0)?q.some(t):q.none()}},rF=function(e,t){return vA([nF([zR],WR.none()),nF([JR()],WR.br()),nF([XR(!0),QR(!1),eF],WR.br()),nF([XR(!0),QR(!1)],WR.block()),nF([XR(!0),QR(!0),eF],WR.block()),nF([XR(!0),QR(!0)],WR.br()),nF([KR(!0),eF],WR.br()),nF([KR(!0)],WR.block()),nF([$R(!0),eF,tF],WR.block()),nF([$R(!0)],WR.br()),nF([ZR],WR.br()),nF([$R(!1),eF],WR.br()),nF([tF],WR.block())],[e,!(!t||!t.shiftKey)]).getOr(WR.none())},iF=function(e,t){rF(e,t).fold((function(){VR(e,t)}),(function(){_R(e,t)}),S)},oF=function(e,t){if(!t.isDefaultPrevented()){t.preventDefault();RT(e.undoManager);e.undoManager.transact((function(){!1===e.selection.isCollapsed()&&e.execCommand("Delete");iF(e,t)}))}},aF=function(e){e.on("keydown",(function(t){t.keyCode===Tg.ENTER&&oF(e,t)}))},sF=function(e,t,n){gP([{keyCode:Tg.END,action:fP(tP,e,!0)},{keyCode:Tg.HOME,action:fP(tP,e,!1)},{keyCode:Tg.END,action:fP(yP,e,!0)},{keyCode:Tg.HOME,action:fP(yP,e,!1)},{keyCode:Tg.END,action:fP(QD,e,!0,t)},{keyCode:Tg.HOME,action:fP(QD,e,!1,t)}],n).each((function(e){n.preventDefault()}))},cF=function(e,t){e.on("keydown",(function(n){!1===n.isDefaultPrevented()&&sF(e,t,n)}))},lF=qt().browser,uF=function(e){var t=Bl((function(){e.composing||Aj(e)}),0);if(lF.isIE()){e.on("keypress",(function(e){t.throttle()}));e.on("remove",(function(e){t.cancel()}))}},dF=function(e){uF(e);e.on("input",(function(t){!1===t.isComposing&&Aj(e)}))},pF=qt(),hF=function(e,t,n){gP([{keyCode:Tg.PAGE_UP,action:fP(QD,e,!1,t)},{keyCode:Tg.PAGE_DOWN,action:fP(QD,e,!0,t)}],n)},mF=function(e){return e.stopImmediatePropagation()},fF=function(e){return e.keyCode===Tg.PAGE_UP||e.keyCode===Tg.PAGE_DOWN},gF=function(e,t,n){n&&!e.get()?t.on("NodeChange",mF,!0):!n&&e.get()&&t.off("NodeChange",mF);e.set(n)},bF=function(e,t){if(!pF.os.isOSX()){var n=_l(!1);e.on("keydown",(function(t){fF(t)&&gF(n,e,!0)}));e.on("keyup",(function(r){!1===r.isDefaultPrevented()&&hF(e,t,r);if(fF(r)&&n.get()){gF(n,e,!1);e.nodeChanged()}}))}},OF=function(e,t){var n=t.container(),r=t.offset();if(qr(n)){n.insertData(r,e);return q.some(id(n,r+e.length))}return zh(t).map((function(n){var r=un.fromText(e);t.isAtEnd()?lr(n,r):cr(n,r);return id(r.dom,e.length)}))},yF=D(OF,zo),jF=D(OF," "),vF=function(e){return function(t){return t.fold((function(t){return vm(e.dom,id.before(t))}),(function(e){return Cm(e)}),(function(e){return xm(e)}),(function(t){return jm(e.dom,id.after(t))}))}},CF=function(e,t){return function(n){return yj(e,n)?yF(t):jF(t)}},xF=function(e){return function(t){e.selection.setRng(t.toRange());e.nodeChanged();return!0}},EF=function(e){var t=id.fromRangeStart(e.selection.getRng()),n=un.fromDom(e.getBody());if(e.selection.isCollapsed()){var r=D(U_,e),i=id.fromRangeStart(e.selection.getRng());return AA(r,e.getBody(),i).bind(vF(n)).bind(CF(n,t)).exists(xF(e))}return!1},TF=function(e,t){gP([{keyCode:Tg.SPACEBAR,action:fP(EF,e)}],t).each((function(e){t.preventDefault()}))},SF=function(e){e.on("keydown",(function(t){!1===t.isDefaultPrevented()&&TF(e,t)}))},IF=function(e){var t=YD(e);Wk(e);XP(e,t);ZP(e,t);aF(e);SF(e);dF(e);cF(e,t);bF(e,t);return t},wF=function(e){return JT(e)?_l(null):IF(e)},_F=function(){function e(e){this.lastPath=[];this.editor=e;var t,n=this;"onselectionchange"in e.getDoc()||e.on("NodeChange click mouseup keyup focus",(function(n){var r=e.selection.getRng(),i={startContainer:r.startContainer,startOffset:r.startOffset,endContainer:r.endContainer,endOffset:r.endOffset};"nodechange"!==n.type&&kg(i,t)||e.fire("SelectionChange");t=i}));e.on("contextmenu",(function(){e.fire("SelectionChange")}));e.on("SelectionChange",(function(){var t=e.selection.getStart(!0);!t||!Qt.range&&e.selection.isCollapsed()||Xf(e)&&!n.isSameElementPath(t)&&e.dom.isChildOf(t,e.getBody())&&e.nodeChanged({selectionChange:!0})}));e.on("mouseup",(function(t){!t.isDefaultPrevented()&&Xf(e)&&("IMG"===e.selection.getNode().nodeName?vo.setEditorTimeout(e,(function(){e.nodeChanged()})):e.nodeChanged())}))}e.prototype.nodeChanged=function(e){var t,n,r,i=this.editor.selection;if(this.editor.initialized&&i&&!Wp(this.editor)&&!this.editor.mode.isReadOnly()){r=this.editor.getBody();(t=i.getStart(!0)||r).ownerDocument===this.editor.getDoc()&&this.editor.dom.isChildOf(t,r)||(t=r);n=[];this.editor.dom.getParent(t,(function(e){if(e===r)return!0;n.push(e)}));(e=e||{}).element=t;e.parents=n;this.editor.fire("NodeChange",e)}};e.prototype.isSameElementPath=function(e){var t,n=this.editor.$(e).parentsUntil(this.editor.getBody()).add(e);if(n.length===this.lastPath.length){for(t=n.length;t>=0&&n[t]===this.lastPath[t];t--);if(-1===t){this.lastPath=n;return!0}}this.lastPath=n;return!1};return e}(),NF=function(e){e.on("click",(function(t){e.dom.getParent(t.target,"details")&&t.preventDefault()}))},AF=function(e){e.parser.addNodeFilter("details",(function(e){Q(e,(function(e){e.attr("data-mce-open",e.attr("open"));e.attr("open","open")}))}));e.serializer.addNodeFilter("details",(function(e){Q(e,(function(e){var t=e.attr("data-mce-open");e.attr("open",g(t)?t:null);e.attr("data-mce-open",null)}))}))},DF=function(e){NF(e);AF(e)},kF=function(e){return kr(e)&&Mo(un.fromDom(e))},PF=function(e){var t=e.selection.getRng(),n=id.fromRangeStart(t),r=id.fromRangeEnd(t);if(id.isElementPosition(n)){var i=n.container();kF(i)&&Cm(i).each((function(e){return t.setStart(e.container(),e.offset())}))}if(id.isElementPosition(r)){i=n.container();kF(i)&&xm(i).each((function(e){return t.setEnd(e.container(),e.offset())}))}e.selection.setRng(eC(t))},RF=function(e){e.on("click",(function(t){t.detail>=3&&PF(e)}))},FF=function(e){var t=e.getBoundingClientRect(),n=e.ownerDocument,r=n.documentElement,i=n.defaultView;return{top:t.top+i.pageYOffset-r.clientTop,left:t.left+i.pageXOffset-r.clientLeft}},LF=function(e){return e.inline?FF(e.getBody()):{left:0,top:0}},MF=function(e){var t=e.getBody();return e.inline?{left:t.scrollLeft,top:t.scrollTop}:{left:0,top:0}},BF=function(e){var t=e.getBody(),n=e.getDoc().documentElement,r={left:t.scrollLeft,top:t.scrollTop},i={left:t.scrollLeft||n.scrollLeft,top:t.scrollTop||n.scrollTop};return e.inline?r:i},UF=function(e,t){if(t.target.ownerDocument!==e.getDoc()){var n=FF(e.getContentAreaContainer()),r=BF(e);return{left:t.pageX-n.left+r.left,top:t.pageY-n.top+r.top}}return{left:t.pageX,top:t.pageY}},VF=function(e,t,n){return{pageX:n.left-e.left+t.left,pageY:n.top-e.top+t.top}},HF=function(e,t){return VF(LF(e),MF(e),UF(e,t))},qF=Xr,GF=Yr,WF=function(e,t){return qF(t)&&t!==e},zF=function(e,t,n){return t!==n&&!e.dom.isChildOf(t,n)&&!qF(t)},$F=function(e){var t=e.cloneNode(!0);t.removeAttribute("data-mce-selected");return t},KF=function(e,t,n,r){var i=e.dom,o=t.cloneNode(!0);i.setStyles(o,{width:n,height:r});i.setAttrib(o,"data-mce-selected",null);var a=i.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});i.setStyles(a,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:n,height:r});i.setStyles(o,{margin:0,boxSizing:"border-box"});a.appendChild(o);return a},YF=function(e,t){e.parentNode!==t&&t.appendChild(e)},XF=function(e,t,n,r,i,o){var a=0,s=0;e.style.left=t.pageX+"px";e.style.top=t.pageY+"px";t.pageX+n>i&&(a=t.pageX+n-i);t.pageY+r>o&&(s=t.pageY+r-o);e.style.width=n-a+"px";e.style.height=r-s+"px"},JF=function(e){e&&e.parentNode&&e.parentNode.removeChild(e)},QF=function(e){return 0===e.button},ZF=function(e,t){return{pageX:t.pageX-e.relX,pageY:t.pageY+5}},eL=function(e,t){return function(n){if(QF(n)){var r=oe(t.dom.getParents(n.target),Fu(qF,GF)).getOr(null);if(WF(t.getBody(),r)){var i=t.dom.getPos(r),o=t.getBody(),a=t.getDoc().documentElement;e.set({element:r,dragging:!1,screenX:n.screenX,screenY:n.screenY,maxX:(t.inline?o.scrollWidth:a.offsetWidth)-2,maxY:(t.inline?o.scrollHeight:a.offsetHeight)-2,relX:n.pageX-i.x,relY:n.pageY-i.y,width:r.offsetWidth,height:r.offsetHeight,ghost:KF(t,r,r.offsetWidth,r.offsetHeight)})}}}},tL=function(e,t){var n=vo.throttle((function(e,n){t._selectionOverrides.hideFakeCaret();t.selection.placeCaretAt(e,n)}),0);t.on("remove",n.stop);return function(r){return e.on((function(e){var i=Math.max(Math.abs(r.screenX-e.screenX),Math.abs(r.screenY-e.screenY));if(!e.dragging&&i>10){if(t.fire("dragstart",{target:e.element}).isDefaultPrevented())return;e.dragging=!0;t.focus()}if(e.dragging){var o=ZF(e,HF(t,r));YF(e.ghost,t.getBody());XF(e.ghost,o,e.width,e.height,e.maxX,e.maxY);n(r.clientX,r.clientY)}}))}},nL=function(e){var t=e.getSel().getRangeAt(0).startContainer;return 3===t.nodeType?t.parentNode:t},rL=function(e,t){return function(n){e.on((function(e){if(e.dragging){if(zF(t,nL(t.selection),e.element)){var r=$F(e.element);t.fire("drop",{clientX:n.clientX,clientY:n.clientY}).isDefaultPrevented()||t.undoManager.transact((function(){JF(e.element);t.insertContent(t.dom.getOuterHTML(r));t._selectionOverrides.hideFakeCaret()}))}t.fire("dragend")}}));oL(e)}},iL=function(e,t){return function(){e.on((function(e){e.dragging&&t.fire("dragend")}));oL(e)}},oL=function(e){e.on((function(e){JF(e.ghost)}));e.clear()},aL=function(e){var t=Ml(),n=jl.DOM,r=document,i=eL(t,e),o=tL(t,e),a=rL(t,e),s=iL(t,e);e.on("mousedown",i);e.on("mousemove",o);e.on("mouseup",a);n.bind(r,"mousemove",o);n.bind(r,"mouseup",s);e.on("remove",(function(){n.unbind(r,"mousemove",o);n.unbind(r,"mouseup",s)}));e.on("keydown",(function(e){e.keyCode===Tg.ESC&&s()}))},sL=function(e){e.on("drop",(function(t){var n=void 0!==t.clientX?e.getDoc().elementFromPoint(t.clientX,t.clientY):null;(qF(n)||"false"===e.dom.getContentEditableParent(n))&&t.preventDefault()}))},cL=function(e){var t=function(t){if(!t.isDefaultPrevented()){var n=t.dataTransfer;if(n&&(Y(n.types,"Files")||n.files.length>0)){t.preventDefault();"drop"===t.type&&Ww(e,"Dropped file type is not supported")}}},n=function(n){dO(e,n.target)&&t(n)},r=function(){var r=jl.DOM,i=e.dom,o=document,a=e.inline?e.getBody():e.getDoc(),s=["drop","dragover"];Q(s,(function(e){r.bind(o,e,n);i.bind(a,e,t)}));e.on("remove",(function(){Q(s,(function(e){r.unbind(o,e,n);i.unbind(a,e,t)}))}))};e.on("init",(function(){vo.setEditorTimeout(e,r,0)}))},lL=function(e){aL(e);sL(e);Xp(e)&&cL(e)},uL=function(e){var t=Bl((function(){if(!e.removed&&e.getBody().contains(document.activeElement)){var t=e.selection.getRng();if(t.collapsed){var n=RN(e,t,!1);e.selection.setRng(n)}}}),0);e.on("focus",(function(){t.throttle()}));e.on("blur",(function(){t.cancel()}))},dL=function(e){e.on("init",(function(){e.on("focusin",(function(t){var n=t.target;if(Qr(n)){var r=lg(e.getBody(),n),i=Xr(r)?r:n;e.selection.getNode()!==i&&kN(e,i).each((function(t){return e.selection.setRng(t)}))}}))}))},pL=Yr,hL=Xr,mL=function(e,t){return lg(e.getBody(),t)},fL=function(e){var t,n=e.selection,r=e.dom,i=r.isBlock,o=e.getBody(),a=jh(e,o,i,(function(){return TO(e)})),s="sel-"+r.uniqueId(),c="data-mce-selected",l=function(e){return r.hasClass(e,"mce-offscreen-selection")},u=function(e){return e!==o&&(hL(e)||Qr(e))&&r.isChildOf(e,o)},d=function(e){return Uy(e)||Vy(e)||Fy(e)||Ly(e)},p=function(){var e=r.get(s);return e?e.getElementsByTagName("*")[0]:e},h=function(e){e&&n.setRng(e)},m=n.getRng,f=function(t,r,i,o){void 0===o&&(o=!0);if(e.fire("ShowCaret",{target:r,direction:t,before:i}).isDefaultPrevented())return null;o&&n.scrollIntoView(r,-1===t);return a.show(i,r)},g=function(e){if(e.hasAttribute("data-mce-caret")){ua(e);h(m());n.scrollIntoView(e)}},b=function(){e.on("mouseup",(function(t){var n=m();n.collapsed&&Rw(e,t.clientX,t.clientY)&&PN(e,n,!1).each(h)}));e.on("click",(function(t){var i=mL(e,t.target);if(i){if(hL(i)){t.preventDefault();e.focus()}pL(i)&&r.isChildOf(i,n.getNode())&&T()}}));e.on("blur NewBlock",T);e.on("ResizeWindow FullscreenStateChanged",a.reposition);var s=function(e){var t=e.firstChild;if(C(t))return!1;var n=id.before(t);if($r(n.getNode())&&1===e.childNodes.length)return!d(n);var r=cm(e).next(n);return r&&!d(r)},c=function(e,t){return r.getParent(e,i)===r.getParent(t,i)},g=function(t,n){var o=r.getParent(t,i),a=r.getParent(n,i);return!C(o)&&(!(t===a||!r.isChildOf(o,a)||!1!==hL(mL(e,o)))||!r.isChildOf(a,o)&&!c(o,a)&&s(o))};e.on("tap",(function(t){var n=t.target,r=mL(e,n);if(hL(r)){t.preventDefault();kN(e,r).each(E)}else u(n)&&kN(e,n).each(E)}),!0);e.on("mousedown",(function(t){var i=t.target;if((i===o||"HTML"===i.nodeName||r.isChildOf(i,o))&&!1!==Rw(e,t.clientX,t.clientY)){var a=mL(e,i);if(a)if(hL(a)){t.preventDefault();kN(e,a).each(E)}else{T();if(!(pL(a)&&t.shiftKey||ug(t.clientX,t.clientY,n.getRng()))){I();n.placeCaretAt(t.clientX,t.clientY)}}else if(u(i))kN(e,i).each(E);else if(!1===xh(i)){T();I();var s=kD(o,t.clientX,t.clientY);if(s&&!g(i,s.node)){t.preventDefault();var c=f(1,s.node,s.before,!1);h(c);e.getBody().focus()}}}}));e.on("keypress",(function(e){Tg.modifierPressed(e)||hL(n.getNode())&&e.preventDefault()}));e.on("GetSelectionRange",(function(e){var n=e.range;if(t){if(!t.parentNode){t=null;return}(n=n.cloneRange()).selectNode(t);e.range=n}}));e.on("SetSelectionRange",(function(e){e.range=j(e.range);var t=E(e.range,e.forward);t&&(e.range=t)}));var b=function(e){return"mcepastebin"===e.id};e.on("AfterSetSelectionRange",(function(e){var t=e.range,n=t.startContainer.parentNode;y(t)||b(n)||I();l(n)||T()}));e.on("copy",(function(e){var t=e.clipboardData;if(!e.isDefaultPrevented()&&e.clipboardData&&!Qt.ie){var n=p();if(n){e.preventDefault();t.clearData();t.setData("text/html",n.outerHTML);t.setData("text/plain",n.outerText||n.innerText)}}}));lL(e);uL(e);dL(e)},O=function(e){return ea(e)||sa(e)||ca(e)},y=function(e){return O(e.startContainer)||O(e.endContainer)},j=function(t){var n=e.schema.getShortEndedElements(),i=r.createRng(),o=t.startContainer,a=t.startOffset,s=t.endContainer,c=t.endOffset;Ae(n,o.nodeName.toLowerCase())?0===a?i.setStartBefore(o):i.setStartAfter(o):i.setStart(o,a);Ae(n,s.nodeName.toLowerCase())?0===c?i.setEndBefore(s):i.setEndAfter(s):i.setEnd(s,c);return i},v=function(t,i,o){var a=e.$,c=mo(un.fromDom(e.getBody()),"#"+s).fold((function(){return a([])}),(function(e){return a([e.dom])}));0===c.length&&(c=a('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>').attr("id",s)).appendTo(e.getBody());var l=r.createRng();if(i===o&&Qt.ie){c.empty().append('<p style="font-size: 0" data-mce-bogus="all"> </p>').append(i);l.setStartAfter(c[0].firstChild.firstChild);l.setEndAfter(i)}else{c.empty().append(zo).append(i).append(zo);l.setStart(c[0].firstChild,1);l.setEnd(c[0].lastChild,0)}c.css({top:r.getPos(t,e.getBody()).y});c[0].focus();var u=n.getSel();u.removeAllRanges();u.addRange(l);return l},x=function(n){var i=n.cloneNode(!0),o=e.fire("ObjectSelected",{target:n,targetClone:i});if(o.isDefaultPrevented())return null;var a=v(n,o.targetClone,i),s=un.fromDom(n);Q(Zl(un.fromDom(e.getBody()),"*[data-mce-selected]"),(function(e){xn(s,e)||di(e,c)}));r.getAttrib(n,c)||n.setAttribute(c,"1");t=n;I();return a},E=function(e,t){if(!e)return null;if(e.collapsed){if(!y(e)){var n=t?1:-1,i=Wh(n,o,e),a=i.getNode(!t);if(xh(a))return f(n,a,!!t&&!i.isAtEnd(),!1);var s=i.getNode(t);if(xh(s))return f(n,s,!t&&!i.isAtEnd(),!1)}return null}var c=e.startContainer,l=e.startOffset,d=e.endOffset;if(3===c.nodeType&&0===l&&hL(c.parentNode)){c=c.parentNode;l=r.nodeIndex(c);c=c.parentNode}if(1!==c.nodeType)return null;if(d===l+1&&c===e.endContainer){var p=c.childNodes[l];if(u(p))return x(p)}return null},T=function(){t&&t.removeAttribute(c);mo(un.fromDom(e.getBody()),"#"+s).each(gr);t=null},S=function(){a.destroy();t=null},I=function(){a.hide()};Qt.ceFalse&&!JT(e)&&b();return{showCaret:f,showBlockCaretContainer:g,hideFakeCaret:I,destroy:S}},gL=function(e){var t=on.each,n=Tg.BACKSPACE,r=Tg.DELETE,i=e.dom,o=e.selection,a=e.parser,s=Qt.gecko,c=Qt.ie,l=Qt.webkit,u="data:text/mce-internal,",d=c?"Text":"URL",p=function(t,n){try{e.getDoc().execCommand(t,!1,n)}catch(e){}},h=function(e){return e.isDefaultPrevented()},m=function(t){var n,r;if(t.dataTransfer){e.selection.isCollapsed()&&"IMG"===t.target.tagName&&o.select(t.target);if((n=e.selection.getContent()).length>0){r=u+escape(e.id)+","+escape(n);t.dataTransfer.setData(d,r)}}},f=function(e){var t;if(e.dataTransfer&&(t=e.dataTransfer.getData(d))&&t.indexOf(u)>=0){t=t.substr(u.length).split(",");return{id:unescape(t[0]),html:unescape(t[1])}}return null},g=function(t,n){e.queryCommandSupported("mceInsertClipboardContent")?e.execCommand("mceInsertClipboardContent",!1,{content:t,internal:n}):e.execCommand("mceInsertContent",!1,t)},b=function(){var t=function(e){var t=i.create("body"),n=e.cloneContents();t.appendChild(n);return o.serializer.serialize(t,{format:"html"})},a=function(n){var r=t(n),o=i.createRng();o.selectNode(e.getBody());return r===t(o)};e.on("keydown",(function(t){var o,s,c=t.keyCode;if(!h(t)&&(c===r||c===n)){o=e.selection.isCollapsed();s=e.getBody();if(o&&!i.isEmpty(s))return;if(!o&&!a(e.selection.getRng()))return;t.preventDefault();e.setContent("");s.firstChild&&i.isBlock(s.firstChild)?e.selection.setCursorLocation(s.firstChild,0):e.selection.setCursorLocation(s,0);e.nodeChanged()}}))},O=function(){e.shortcuts.add("meta+a",null,"SelectAll")},y=function(){e.inline||i.bind(e.getDoc(),"mousedown mouseup",(function(t){var n;if(t.target===e.getDoc().documentElement){n=o.getRng();e.getBody().focus();if("mousedown"===t.type){if(ea(n.startContainer))return;o.placeCaretAt(t.clientX,t.clientY)}else o.setRng(n)}}))},j=function(){e.on("keydown",(function(t){if(!h(t)&&t.keyCode===n){if(!e.getBody().getElementsByTagName("hr").length)return;if(o.isCollapsed()&&0===o.getRng().startOffset){var r=o.getNode(),a=r.previousSibling;if("HR"===r.nodeName){i.remove(r);t.preventDefault();return}if(a&&a.nodeName&&"hr"===a.nodeName.toLowerCase()){i.remove(a);t.preventDefault()}}}}))},v=function(){Range.prototype.getClientRects||e.on("mousedown",(function(t){if(!h(t)&&"HTML"===t.target.nodeName){var n=e.getBody();n.blur();vo.setEditorTimeout(e,(function(){n.focus()}))}}))},C=function(){e.on("click",(function(t){var n=t.target;if(/^(IMG|HR)$/.test(n.nodeName)&&"false"!==i.getContentEditableParent(n)){t.preventDefault();e.selection.select(n);e.nodeChanged()}if("A"===n.nodeName&&i.hasClass(n,"mce-item-anchor")){t.preventDefault();o.select(n)}}))},x=function(){var n=function(){var n=i.getAttribs(o.getStart().cloneNode(!1));return function(){var r=o.getStart();if(r!==e.getBody()){i.setAttrib(r,"style",null);t(n,(function(e){r.setAttributeNode(e.cloneNode(!0))}))}}},r=function(){return!o.isCollapsed()&&i.getParent(o.getStart(),i.isBlock)!==i.getParent(o.getEnd(),i.isBlock)};e.on("keypress",(function(t){var i;if(!h(t)&&(8===t.keyCode||46===t.keyCode)&&r()){i=n();e.getDoc().execCommand("delete",!1,null);i();t.preventDefault();return!1}}));i.bind(e.getDoc(),"cut",(function(t){var i;if(!h(t)&&r()){i=n();vo.setEditorTimeout(e,(function(){i()}))}}))},E=function(){e.on("keydown",(function(e){if(!h(e)&&e.keyCode===n&&o.isCollapsed()&&0===o.getRng().startOffset){var t=o.getNode().previousSibling;if(t&&t.nodeName&&"table"===t.nodeName.toLowerCase()){e.preventDefault();return!1}}}))},T=function(){e.on("keydown",(function(t){var n,r;if(!h(t)&&t.keyCode===Tg.BACKSPACE){var a=(n=o.getRng()).startContainer,s=n.startOffset,c=i.getRoot();r=a;if(n.collapsed&&0===s){for(;r&&r.parentNode&&r.parentNode.firstChild===r&&r.parentNode!==c;)r=r.parentNode;if("BLOCKQUOTE"===r.tagName){e.formatter.toggle("blockquote",null,r);(n=i.createRng()).setStart(a,0);n.setEnd(a,0);o.setRng(n)}}}}))},I=function(){var t=function(){p("StyleWithCSS",!1);p("enableInlineTableEditing",!1);Ep(e)||p("enableObjectResizing",!1)};zp(e)||e.on("BeforeExecCommand mousedown",t)},w=function(){var n=function(){t(i.select("a"),(function(e){var t=e.parentNode,n=i.getRoot();if(t.lastChild===e){for(;t&&!i.isBlock(t);){if(t.parentNode.lastChild!==t||t===n)return;t=t.parentNode}i.add(t,"br",{"data-mce-bogus":1})}}))};e.on("SetContent ExecCommand",(function(e){"setcontent"!==e.type&&"mceInsertLink"!==e.command||n()}))},_=function(){Xd(e)&&e.on("init",(function(){p("DefaultParagraphSeparator",Xd(e))}))},N=function(){e.on("keyup focusin mouseup",(function(e){Tg.modifierPressed(e)||o.normalize()}),!0)},A=function(){e.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},D=function(){e.inline||e.on("keydown",(function(){document.activeElement===document.body&&e.getWin().focus()}))},k=function(){if(!e.inline){e.contentStyles.push("body {min-height: 150px}");e.on("click",(function(t){var n;if("HTML"===t.target.nodeName){if(Qt.ie>11){e.getBody().focus();return}n=e.selection.getRng();e.getBody().focus();e.selection.setRng(n);e.selection.normalize();e.nodeChanged()}}))}},P=function(){Qt.mac&&e.on("keydown",(function(t){if(Tg.metaKeyPressed(t)&&!t.shiftKey&&(37===t.keyCode||39===t.keyCode)){t.preventDefault();e.selection.getSel().modify("move",37===t.keyCode?"backward":"forward","lineboundary")}}))},R=function(){p("AutoUrlDetect",!1)},F=function(){e.on("click",(function(e){var t=e.target;do{if("A"===t.tagName){e.preventDefault();return}}while(t=t.parentNode)}));e.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},L=function(){e.on("init",(function(){e.dom.bind(e.getBody(),"submit",(function(e){e.preventDefault()}))}))},M=function(){a.addNodeFilter("br",(function(e){for(var t=e.length;t--;)"Apple-interchange-newline"===e[t].attr("class")&&e[t].remove()}))},B=function(){e.on("dragstart",(function(e){m(e)}));e.on("drop",(function(t){if(!h(t)){var n=f(t);if(n&&n.id!==e.id){t.preventDefault();var r=Dg(t.x,t.y,e.getDoc());o.setRng(r);g(n.html,!0)}}}))},U=S,V=function(){if(!s||e.removed)return!1;var t=e.selection.getSel();return!t||!t.rangeCount||0===t.rangeCount},H=function(){if(l){y();C();L();O();if(Qt.iOS){D();k();F()}}if(s){v();I();A();P()}},q=function(){T();b();Qt.windowsPhone||N();if(l){y();C();_();L();E();M();if(Qt.iOS){D();k();F()}else O()}if(Qt.ie>=11){k();E()}if(Qt.ie){O();R();B()}if(s){j();v();x();I();w();A();P();E()}};JT(e)?H():q();return{refreshContentEditable:U,isHidden:V}},bL=jl.DOM,OL=function(e,t){var n=un.fromDom(e.getBody()),r=rr(nr(n)),i=un.fromTag("style");ai(i,"type","text/css");dr(i,un.fromText(t));dr(r,i);e.on("remove",(function(){gr(i)}))},yL=function(e){return e.inline?e.getElement().nodeName.toLowerCase():void 0},jL=function(e){return Ie(e,(function(e){return!1===v(e)}))},vL=function(e){var t=e.settings;return jL({block_elements:t.block_elements,boolean_attributes:t.boolean_attributes,custom_elements:t.custom_elements,extended_valid_elements:t.extended_valid_elements,invalid_elements:t.invalid_elements,invalid_styles:t.invalid_styles,move_caret_before_on_enter_elements:t.move_caret_before_on_enter_elements,non_empty_elements:t.non_empty_elements,schema:t.schema,self_closing_elements:t.self_closing_elements,short_ended_elements:t.short_ended_elements,special:t.special,text_block_elements:t.text_block_elements,text_inline_elements:t.text_inline_elements,valid_children:t.valid_children,valid_classes:t.valid_classes,valid_elements:t.valid_elements,valid_styles:t.valid_styles,verify_html:t.verify_html,whitespace_elements:t.whitespace_elements,padd_empty_block_inline_children:t.format_empty_lines})},CL=function(e){var t=e.settings,n=e.editorUpload.blobCache;return jL({allow_conditional_comments:t.allow_conditional_comments,allow_html_data_urls:t.allow_html_data_urls,allow_svg_data_urls:t.allow_svg_data_urls,allow_html_in_named_anchor:t.allow_html_in_named_anchor,allow_script_urls:t.allow_script_urls,allow_unsafe_link_target:t.allow_unsafe_link_target,convert_fonts_to_spans:t.convert_fonts_to_spans,fix_list_elements:t.fix_list_elements,font_size_legacy_values:t.font_size_legacy_values,forced_root_block:t.forced_root_block,forced_root_block_attrs:t.forced_root_block_attrs,padd_empty_with_br:t.padd_empty_with_br,preserve_cdata:t.preserve_cdata,remove_trailing_brs:t.remove_trailing_brs,inline_styles:t.inline_styles,root_name:yL(e),validate:!0,blob_cache:n,document:e.getDoc(),images_dataimg_filter:t.images_dataimg_filter})},xL=function(e){var t=e.settings;return qe(qe(qe({},CL(e)),vL(e)),jL({url_converter:t.url_converter,url_converter_scope:t.url_converter_scope,element_format:t.element_format,entities:t.entities,entity_encoding:t.entity_encoding,indent:t.indent,indent_after:t.indent_after,indent_before:t.indent_before}))},EL=function(e){var t=jI(CL(e),e.schema);t.addAttributeFilter("src,href,style,tabindex",(function(t,n){for(var r,i,o=t.length,a=e.dom,s="data-mce-"+n;o--;)if((i=(r=t[o]).attr(n))&&!r.attr(s)){if(0===i.indexOf("data:")||0===i.indexOf("blob:"))continue;if("style"===n){(i=a.serializeStyle(a.parseStyle(i),r.name)).length||(i=null);r.attr(s,i);r.attr(n,i)}else if("tabindex"===n){r.attr(s,i);r.attr(n,null)}else r.attr(s,e.convertURL(i,n,r.name))}}));t.addNodeFilter("script",(function(e){for(var t=e.length;t--;){var n=e[t],r=n.attr("type")||"no/type";0!==r.indexOf("mce-")&&n.attr("type","mce-"+r)}}));e.settings.preserve_cdata&&t.addNodeFilter("#cdata",(function(t){for(var n=t.length;n--;){var r=t[n];r.type=8;r.name="#comment";r.value="[CDATA["+e.dom.encode(r.value)+"]]"}}));t.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",(function(t){for(var n=t.length,r=e.schema.getNonEmptyElements();n--;){var i=t[n];i.isEmpty(r)&&0===i.getAll("br").length&&(i.append(new HO("br",1)).shortEnded=!0)}}));return t},TL=function(e){e.settings.auto_focus&&vo.setEditorTimeout(e,(function(){var t;(t=!0===e.settings.auto_focus?e:e.editorManager.get(e.settings.auto_focus)).destroyed||t.focus()}),100)},SL=function(e){var t=e.dom.getRoot();e.inline||Xf(e)&&e.selection.getStart(!0)!==t||Cm(t).each((function(t){var n=t.getNode(),r=Ur(n)?Cm(n).getOr(t):t;Qt.browser.isIE()?Qb(e,r.toRange()):e.selection.setRng(r.toRange())}))},IL=function(e){e.bindPendingEventDelegates();e.initialized=!0;jg(e);e.focus(!0);SL(e);e.nodeChanged({initial:!0});e.execCallback("init_instance_callback",e);TL(e)},wL=function(e){return e.inline?e.ui.styleSheetLoader:e.dom.styleSheetLoader},_L=function(e,t,n){var r=[new go((function(n,r){return wL(e).loadAll(t,n,r)}))];return e.inline?r:r.concat([new go((function(t,r){return e.ui.styleSheetLoader.loadAll(n,t,r)}))])},NL=function(e){var t=wL(e),n=vp(e),r=e.contentCSS,i=function(){t.unloadAll(r);e.inline||e.ui.styleSheetLoader.unloadAll(n)},o=function(){e.removed?i():e.on("remove",i)};if(e.contentStyles.length>0){var a="";on.each(e.contentStyles,(function(e){a+=e+"\r\n"}));e.dom.addStyle(a)}var s=go.all(_L(e,r,n)).then(o).catch(o);e.settings.content_style&&OL(e,e.settings.content_style);return s},AL=function(e){var t=e.settings,n=e.getDoc(),r=e.getBody();Og(e);if(!t.browser_spellcheck&&!t.gecko_spellcheck){n.body.spellcheck=!1;bL.setAttrib(r,"spellcheck","false")}e.quirks=gL(e);yg(e);var i=Cp(e);void 0!==i&&(r.dir=i);t.protect&&e.on("BeforeSetContent",(function(e){on.each(t.protect,(function(t){e.content=e.content.replace(t,(function(e){return"\x3c!--mce:protected "+escape(e)+"--\x3e"}))}))}));e.on("SetContent",(function(){e.addVisual(e.getBody())}));e.on("compositionstart compositionend",(function(t){e.composing="compositionstart"===t.type}))},DL=function(e){JT(e)||e.load({initial:!0,format:"html"});e.startContent=e.getContent({format:"raw"})},kL=function(e){if(!0!==e.removed){DL(e);IL(e)}},PL=function(e,t){var n=e.settings,r=e.getElement(),i=e.getDoc();n.inline||(e.getElement().style.visibility=e.orgVisibility);if(!t&&!e.inline){i.open();i.write(e.iframeHTML);i.close()}if(e.inline){bL.addClass(r,"mce-content-body");e.contentDocument=i=document;e.contentWindow=window;e.bodyElement=r;e.contentAreaContainer=r}var o=e.getBody();o.disabled=!0;e.readonly=!!n.readonly;if(!e.readonly){e.inline&&"static"===bL.getStyle(o,"position",!0)&&(o.style.position="relative");o.contentEditable=e.getParam("content_editable_state",!0)}o.disabled=!1;e.editorUpload=f_(e);e.schema=js(vL(e));e.dom=jl(i,{keep_values:!0,url_converter:e.convertURL,url_converter_scope:e,hex_colors:n.force_hex_style_colors,update_styles:!0,root_element:e.inline?e.getBody():null,collect:function(){return e.inline},schema:e.schema,contentCssCors:mp(e),referrerPolicy:fp(e),onSetAttrib:function(t){e.fire("SetAttrib",t)}});e.parser=EL(e);e.serializer=kI(xL(e),e);e.selection=HS(e.dom,e.getWin(),e.serializer,e);e.annotator=sg(e);e.formatter=T_(e);e.undoManager=n.UndoManager?new n.UndoManager(e):__(e);e._nodeChangeDispatcher=new _F(e);e._selectionOverrides=fL(e);Pk(e);DF(e);JT(e)||RF(e);var a=wF(e);_k(e,a);Uk(e);L_(e);var s=ZT(e);AL(e);s.fold((function(){NL(e).then((function(){return kL(e)}))}),(function(t){e.setProgressState(!0);NL(e).then((function(){t().then((function(t){e.setProgressState(!1);kL(e)}),(function(t){e.notificationManager.open({type:"error",text:String(t)});kL(e)}))}))}))},RL=jl.DOM,FL=function(e,t){if(document.domain!==window.location.hostname&&Qt.browser.isIE()){var n=c_("mce");e[n]=function(){PL(e)};var r='javascript:(function(){document.open();document.domain="'+document.domain+'";var ed = window.parent.tinymce.get("'+e.id+'");document.write(ed.iframeHTML);document.close();ed.'+n+"(true);})()";RL.setAttrib(t,"src",r);return!0}return!1},LL=function(e,t,n,r){var i=un.fromTag("iframe");si(i,r);si(i,{id:e+"_ifr",frameBorder:"0",allowTransparency:"true",title:t});Kl(i,"tox-edit-area__iframe");return i},ML=function(e){var t=Gd(e)+"<html><head>";Wd(e)!==e.documentBaseUrl&&(t+='<base href="'+e.documentBaseURI.getURI()+'" />');t+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';var n=zd(e),r=$d(e),i=e.translate(eh(e));Kd(e)&&(t+='<meta http-equiv="Content-Security-Policy" content="'+Kd(e)+'" />');return t+='</head><body id="'+n+'" class="mce-content-body '+r+'" data-id="'+e.id+'" aria-label="'+i+'"><br></body></html>'},BL=function(e,t){var n=e.translate("Rich Text Area"),r=LL(e.id,n,t.height,qd(e)).dom;r.onload=function(){r.onload=null;e.fire("load")};var i=FL(e,r);e.contentAreaContainer=t.iframeContainer;e.iframeElement=r;e.iframeHTML=ML(e);RL.add(t.iframeContainer,r);return i},UL=function(e,t){var n=BL(e,t);if(t.editorContainer){RL.get(t.editorContainer).style.display=e.orgDisplay;e.hidden=RL.isHidden(t.editorContainer)}e.getElement().style.display="none";RL.setAttrib(e.id,"aria-hidden","true");n||PL(e)},VL=jl.DOM,HL=function(e,t,n){var r=Uw.get(n),i=Uw.urls[n]||e.documentBaseUrl.replace(/\/$/,"");n=on.trim(n);if(r&&-1===on.inArray(t,n)){on.each(Uw.dependencies(n),(function(n){HL(e,t,n)}));if(e.plugins[n])return;try{var o=new r(e,i,e.$);e.plugins[n]=o;if(o.init){o.init(e,i);t.push(n)}}catch(t){Qw(e,n,t)}}},qL=function(e){return e.replace(/^\-/,"")},GL=function(e){var t=[];on.each(Kp(e).split(/[ ,]/),(function(n){HL(e,t,qL(n))}))},WL=function(e){var t=on.trim(cp(e)),n=e.ui.registry.getAll().icons,r=qe(qe({},Tw.get("default").icons),Tw.get(t).icons);ve(r,(function(t,r){Ae(n,r)||e.ui.registry.addIcon(r,t)}))},zL=function(e){var t=_p(e);if(g(t)){e.settings.theme=qL(t);var n=Vw.get(t);e.theme=new n(e,Vw.urls[t]);e.theme.init&&e.theme.init(e,Vw.urls[t]||e.documentBaseUrl.replace(/\/$/,""),e.$)}else e.theme={}},$L=function(e){return e.theme.renderUI()},KL=function(e){var t=e.getElement(),n=_p(e)(e,t);n.editorContainer.nodeType&&(n.editorContainer.id=n.editorContainer.id||e.id+"_parent");n.iframeContainer&&n.iframeContainer.nodeType&&(n.iframeContainer.id=n.iframeContainer.id||e.id+"_iframecontainer");n.height=n.iframeHeight?n.iframeHeight:t.offsetHeight;return n},YL=function(e){return{editorContainer:e,iframeContainer:e,api:{}}},XL=function(e){var t=VL.create("div");VL.insertAfter(t,e);return YL(t)},JL=function(e){var t=e.getElement();return e.inline?YL(null):XL(t)},QL=function(e){var t=e.getElement();e.orgDisplay=t.style.display;return g(_p(e))?$L(e):E(_p(e))?KL(e):JL(e)},ZL=function(e,t){var n={show:q.from(t.show).getOr(S),hide:q.from(t.hide).getOr(S),disable:q.from(t.disable).getOr(S),isDisabled:q.from(t.isDisabled).getOr(L),enable:function(){e.mode.isReadOnly()||q.from(t.enable).map(F)}};e.ui=qe(qe({},e.ui),n)},eM=function(e){e.fire("ScriptsLoaded");WL(e);zL(e);GL(e);var t=QL(e);ZL(e,q.from(t.api).getOr({}));var n={editorContainer:t.editorContainer,iframeContainer:t.iframeContainer};e.editorContainer=n.editorContainer?n.editorContainer:null;i_(e);return e.inline?PL(e):UL(e,n)},tM=jl.DOM,nM=function(e){return"-"===e.charAt(0)},rM=function(e,t){var n=gp(t),r=bp(t);if(!1===Rl.hasCode(n)&&"en"!==n){var i=""!==r?r:t.editorManager.baseURL+"/langs/"+n+".js";e.add(i,S,void 0,(function(){Jw(t,i,n)}))}},iM=function(e,t,n,r){var i=_p(t);if(g(i)){if(!nM(i)&&!Ae(Vw.urls,i)){var o=Fp(t);o?Vw.load(i,t.documentBaseURI.toAbsolute(o)):Vw.load(i,"themes/"+i+"/theme"+n+".js")}e.loadQueue((function(){Vw.waitFor(i,r)}))}else r()},oM=function(e){return q.from(lp(e)).filter((function(e){return e.length>0})).map((function(e){return{url:e,name:q.none()}}))},aM=function(e,t,n){return q.from(t).filter((function(e){return e.length>0&&!Tw.has(e)})).map((function(t){return{url:e.editorManager.baseURL+"/icons/"+t+"/icons"+n+".js",name:q.some(t)}}))},sM=function(e,t,n){var r=aM(t,"default",n),i=oM(t).orThunk((function(){return aM(t,cp(t),"")}));Q(ei([r,i]),(function(n){e.add(n.url,S,void 0,(function(){Xw(t,n.url,n.name.getOrUndefined())}))}))},cM=function(e,t){on.each(Yp(e),(function(t,n){Uw.load(n,t,S,void 0,(function(){Yw(e,t,n)}));e.settings.plugins+=" "+n}));on.each(Kp(e).split(/[ ,]/),(function(n){if((n=on.trim(n))&&!Uw.urls[n])if(nM(n)){n=n.substr(1,n.length);var r=Uw.dependencies(n);on.each(r,(function(n){var r={prefix:"plugins/",resource:n,suffix:"/plugin"+t+".js"},i=Uw.createUrl(r,n);Uw.load(i.resource,i,S,void 0,(function(){Yw(e,i.prefix+i.resource+i.suffix,i.resource)}))}))}else{var i={prefix:"plugins/",resource:n,suffix:"/plugin"+t+".js"};Uw.load(n,i,S,void 0,(function(){Yw(e,i.prefix+i.resource+i.suffix,n)}))}}))},lM=function(e,t){var n=wl.ScriptLoader;iM(n,e,t,(function(){rM(n,e);sM(n,e,t);cM(e,t);n.loadQueue((function(){e.removed||eM(e)}),e,(function(){e.removed||eM(e)}))}))},uM=function(e,t){return xo.forElement(e,{contentCssCors:$p(t),referrerPolicy:fp(t)})},dM=function(e){var t=e.id;Rl.setCode(gp(e));var n=function(){tM.unbind(window,"ready",n);e.render()};if(Fs.Event.domLoaded){if(e.getElement()&&Qt.contentEditable){var r=un.fromDom(e.getElement()),i=pi(r);e.on("remove",(function(){Z(r.dom.attributes,(function(e){return di(r,e.name)}));si(r,i)}));e.ui.styleSheetLoader=uM(r,e);if(Lp(e))e.inline=!0;else{e.orgVisibility=e.getElement().style.visibility;e.getElement().style.visibility="hidden"}var o=e.getElement().form||tM.getParent(t,"form");if(o){e.formElement=o;if(Mp(e)&&!Hr(e.getElement())){tM.insertAfter(tM.create("input",{type:"hidden",name:t}),t);e.hasHiddenInput=!0}e.formEventDelegate=function(t){e.fire(t.type,t)};tM.bind(o,"submit reset",e.formEventDelegate);e.on("reset",(function(){e.resetContent()}));if(Bp(e)&&!o.submit.nodeType&&!o.submit.length&&!o._mceOldSubmit){o._mceOldSubmit=o.submit;o.submit=function(){e.editorManager.triggerSave();e.setDirty(!1);return o._mceOldSubmit(o)}}}e.windowManager=qw(e);e.notificationManager=Bw(e);Up(e)&&e.on("GetContent",(function(e){e.save&&(e.content=tM.encode(e.content))}));Vp(e)&&e.on("submit",(function(){e.initialized&&e.save()}));if(Hp(e)){e._beforeUnload=function(){!e.initialized||e.destroyed||e.isHidden()||e.save({format:"raw",no_events:!0,set_dirty:!1})};e.editorManager.on("BeforeUnload",e._beforeUnload)}e.editorManager.add(e);lM(e,e.suffix)}}else tM.bind(window,"ready",n)},pM=function(e,t){return SS(e,t)},hM={"font-size":"size","font-family":"face"},mM=function(e,t,n){var r=function(t){return bi(t,e).orThunk((function(){return"font"===In(t)?Ne(hM,e).bind((function(e){return li(t,e)})):q.none()}))},i=function(e){return xn(un.fromDom(t),e)};return YC(un.fromDom(n),(function(e){return r(e)}),i)},fM=function(e){return e.replace(/[\'\"\\]/g,"").replace(/,\s+/g,",")},gM=function(e,t){return q.from(jl.DOM.getStyle(t,e,!0))},bM=function(e){return function(t,n){return q.from(n).map(un.fromDom).filter(An).bind((function(n){return mM(e,t,n.dom).or(gM(e,n.dom))})).getOr("")}},OM=bM("font-size"),yM=I(fM,bM("font-family")),jM=function(e){return Cm(e.getBody()).map((function(e){var t=e.container();return qr(t)?t.parentNode:t}))},vM=function(e){return q.from(e.selection.getRng()).bind((function(t){var n=e.getBody();return t.startContainer===n&&0===t.startOffset?q.none():q.from(e.selection.getStart(!0))}))},CM=function(e,t){return vM(e).orThunk(D(jM,e)).map(un.fromDom).filter(An).bind(t)},xM=function(e,t){return CM(e,w(q.some,t))},EM=function(e,t){if(/^[0-9.]+$/.test(t)){var n=parseInt(t,10);if(n>=1&&n<=7){var r=np(e),i=rp(e);return i?i[n-1]||t:r[n-1]||t}return t}return t},TM=function(e){var t=e.split(/\s*,\s*/);return J(t,(function(e){return-1===e.indexOf(" ")||ct(e,'"')||ct(e,"'")?e:"'"+e+"'"})).join(",")},SM=function(e,t){var n=EM(e,t);e.formatter.toggle("fontname",{value:TM(n)});e.nodeChanged()},IM=function(e){return xM(e,(function(t){return yM(e.getBody(),t.dom)})).getOr("")},wM=function(e,t){e.formatter.toggle("fontsize",{value:EM(e,t)});e.nodeChanged()},_M=function(e){return xM(e,(function(t){return OM(e.getBody(),t.dom)})).getOr("")},NM=function(e){return xM(e,(function(t){var n=un.fromDom(e.getBody()),r=function(){var e=parseFloat(fi(t,"line-height")),n=parseFloat(fi(t,"font-size"));return String(e/n)};return YC(t,(function(e){return bi(e,"line-height")}),D(xn,n)).getOrThunk(r)})).getOr("")},AM=function(e,t){e.formatter.toggle("lineheight",{value:String(t)});e.nodeChanged()},DM=function(e){if("string"!=typeof e){var t=on.extend({paste:e.paste,data:{paste:e.paste}},e);return{content:e.content,details:t}}return{content:e,details:{}}},kM=function(e,t){var n=DM(t);ES(e,n.content,n.details)},PM=on.each,RM=on.map,FM=on.inArray,LM=function(){function e(e){this.commands={state:{},exec:{},value:{}};this.editor=e;this.setupCommands(e)}e.prototype.execCommand=function(e,t,n,r){var i,o=!1,a=this;if(!a.editor.removed){"mcefocus"!==e.toLowerCase()&&(/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint)$/.test(e)||r&&r.skip_focus?eO(a.editor):a.editor.focus());if((r=a.editor.fire("BeforeExecCommand",{command:e,ui:t,value:n})).isDefaultPrevented())return!1;var s=e.toLowerCase();if(i=a.commands.exec[s]){i(s,t,n);a.editor.fire("ExecCommand",{command:e,ui:t,value:n});return!0}PM(this.editor.plugins,(function(r){if(r.execCommand&&r.execCommand(e,t,n)){a.editor.fire("ExecCommand",{command:e,ui:t,value:n});o=!0;return!1}}));if(o)return o;if(a.editor.theme&&a.editor.theme.execCommand&&a.editor.theme.execCommand(e,t,n)){a.editor.fire("ExecCommand",{command:e,ui:t,value:n});return!0}try{o=a.editor.getDoc().execCommand(e,t,n)}catch(e){}if(o){a.editor.fire("ExecCommand",{command:e,ui:t,value:n});return!0}return!1}};e.prototype.queryCommandState=function(e){var t;if(!this.editor.quirks.isHidden()&&!this.editor.removed){e=e.toLowerCase();if(t=this.commands.state[e])return t(e);try{return this.editor.getDoc().queryCommandState(e)}catch(e){}return!1}};e.prototype.queryCommandValue=function(e){var t;if(!this.editor.quirks.isHidden()&&!this.editor.removed){e=e.toLowerCase();if(t=this.commands.value[e])return t(e);try{return this.editor.getDoc().queryCommandValue(e)}catch(e){}}};e.prototype.addCommands=function(e,t){void 0===t&&(t="exec");var n=this;PM(e,(function(e,r){PM(r.toLowerCase().split(","),(function(r){n.commands[t][r]=e}))}))};e.prototype.addCommand=function(e,t,n){var r=this;e=e.toLowerCase();this.commands.exec[e]=function(e,i,o,a){return t.call(n||r.editor,i,o,a)}};e.prototype.queryCommandSupported=function(e){e=e.toLowerCase();if(this.commands.exec[e])return!0;try{return this.editor.getDoc().queryCommandSupported(e)}catch(e){}return!1};e.prototype.addQueryStateHandler=function(e,t,n){var r=this;e=e.toLowerCase();this.commands.state[e]=function(){return t.call(n||r.editor)}};e.prototype.addQueryValueHandler=function(e,t,n){var r=this;e=e.toLowerCase();this.commands.value[e]=function(){return t.call(n||r.editor)}};e.prototype.hasCustomCommand=function(e){e=e.toLowerCase();return!!this.commands.exec[e]};e.prototype.execNativeCommand=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=null);return this.editor.getDoc().execCommand(e,t,n)};e.prototype.isFormatMatch=function(e){return this.editor.formatter.match(e)};e.prototype.toggleFormat=function(e,t){this.editor.formatter.toggle(e,t);this.editor.nodeChanged()};e.prototype.storeSelection=function(e){this.selectionBookmark=this.editor.selection.getBookmark(e)};e.prototype.restoreSelection=function(){this.editor.selection.moveToBookmark(this.selectionBookmark)};e.prototype.setupCommands=function(e){var t=this;this.addCommands({"mceResetDesignMode,mceBeginUndoLevel":S,"mceEndUndoLevel,mceAddUndoLevel":function(){e.undoManager.add()},mceFocus:function(t,n,r){_O(e,r)},"Cut,Copy,Paste":function(n){var r,i=e.getDoc();try{t.execNativeCommand(n)}catch(e){r=!0}"paste"!==n||i.queryCommandEnabled(n)||(r=!0);if(r||!i.queryCommandSupported(n)){var o=e.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");Qt.mac&&(o=o.replace(/Ctrl\+/g,"⌘+"));e.notificationManager.open({text:o,type:"error"})}},unlink:function(){if(e.selection.isCollapsed()){var t=e.dom.getParent(e.selection.getStart(),"a");t&&e.dom.remove(t,!0)}else e.formatter.remove("link")},"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull,JustifyNone":function(n){var r=n.substring(7);"full"===r&&(r="justify");PM("left,center,right,justify".split(","),(function(t){r!==t&&e.formatter.remove("align"+t)}));"none"!==r&&t.toggleFormat("align"+r)},"InsertUnorderedList,InsertOrderedList":function(n){var r;t.execNativeCommand(n);var i=e.dom.getParent(e.selection.getNode(),"ol,ul");if(i){r=i.parentNode;if(/^(H[1-6]|P|ADDRESS|PRE)$/.test(r.nodeName)){t.storeSelection();e.dom.split(r,i);t.restoreSelection()}}},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(e){t.toggleFormat(e)},"ForeColor,HiliteColor":function(e,n,r){t.toggleFormat(e,{value:r})},FontName:function(t,n,r){SM(e,r)},FontSize:function(t,n,r){wM(e,r)},LineHeight:function(t,n,r){AM(e,r)},Lang:function(e,n,r){t.toggleFormat(e,{value:r.code,customValue:r.customCode})},RemoveFormat:function(t){e.formatter.remove(t)},mceBlockQuote:function(){t.toggleFormat("blockquote")},FormatBlock:function(e,n,r){return t.toggleFormat(r||"p")},mceCleanup:function(){var t=e.selection.getBookmark();e.setContent(e.getContent());e.selection.moveToBookmark(t)},mceRemoveNode:function(n,r,i){var o=i||e.selection.getNode();if(o!==e.getBody()){t.storeSelection();e.dom.remove(o,!0);t.restoreSelection()}},mceSelectNodeDepth:function(t,n,r){var i=0;e.dom.getParent(e.selection.getNode(),(function(t){if(1===t.nodeType&&i++===r){e.selection.select(t);return!1}}),e.getBody())},mceSelectNode:function(t,n,r){e.selection.select(r)},mceInsertContent:function(t,n,r){kM(e,r)},mceInsertRawHTML:function(t,n,r){e.selection.setContent("tiny_mce_marker");var i=e.getContent();e.setContent(i.replace(/tiny_mce_marker/g,(function(){return r})))},mceInsertNewLine:function(t,n,r){iF(e,r)},mceToggleFormat:function(e,n,r){t.toggleFormat(r)},mceSetContent:function(t,n,r){e.setContent(r)},"Indent,Outdent":function(t){Ek(e,t)},mceRepaint:S,InsertHorizontalRule:function(){e.execCommand("mceInsertContent",!1,"<hr />")},mceToggleVisualAid:function(){e.hasVisual=!e.hasVisual;e.addVisual()},mceReplaceContent:function(t,n,r){e.execCommand("mceInsertContent",!1,r.replace(/\{\$selection\}/g,e.selection.getContent({format:"text"})))},mceInsertLink:function(t,n,r){"string"==typeof r&&(r={href:r});var i=e.dom.getParent(e.selection.getNode(),"a");r.href=r.href.replace(/ /g,"%20");i&&r.href||e.formatter.remove("link");r.href&&e.formatter.apply("link",r,i)},selectAll:function(){var t=e.dom.getParent(e.selection.getStart(),Yr);if(t){var n=e.dom.createRng();n.selectNodeContents(t);e.selection.setRng(n)}},mceNewDocument:function(){e.setContent("")},InsertLineBreak:function(t,n,r){VR(e,r);return!0}});var n=function(t){return function(){var n=e.selection,r=n.isCollapsed()?[e.dom.getParent(n.getNode(),e.dom.isBlock)]:n.getSelectedBlocks(),i=RM(r,(function(n){return!!e.formatter.matchNode(n,t)}));return-1!==FM(i,!0)}};t.addCommands({JustifyLeft:n("alignleft"),JustifyCenter:n("aligncenter"),JustifyRight:n("alignright"),JustifyFull:n("alignjustify"),"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(e){return t.isFormatMatch(e)},mceBlockQuote:function(){return t.isFormatMatch("blockquote")},Outdent:function(){return jk(e)},"InsertUnorderedList,InsertOrderedList":function(t){var n=e.dom.getParent(e.selection.getNode(),"ul,ol");return n&&("insertunorderedlist"===t&&"UL"===n.tagName||"insertorderedlist"===t&&"OL"===n.tagName)}},"state");t.addCommands({Undo:function(){e.undoManager.undo()},Redo:function(){e.undoManager.redo()}});t.addQueryValueHandler("FontName",(function(){return IM(e)}),this);t.addQueryValueHandler("FontSize",(function(){return _M(e)}),this);t.addQueryValueHandler("LineHeight",(function(){return NM(e)}),this)};return e}(),MM="data-mce-contenteditable",BM=function(e,t,n){Jl(e,t)&&!1===n?Xl(e,t):n&&Kl(e,t)},UM=function(e,t,n){try{e.getDoc().execCommand(t,!1,String(n))}catch(e){}},VM=function(e,t){e.dom.contentEditable=t?"true":"false"},HM=function(e){Q(Zl(e,'*[contenteditable="true"]'),(function(e){ai(e,MM,"true");VM(e,!1)}))},qM=function(e){Q(Zl(e,"*["+MM+'="true"]'),(function(e){di(e,MM);VM(e,!0)}))},GM=function(e){q.from(e.selection.getNode()).each((function(e){e.removeAttribute("data-mce-selected")}))},WM=function(e){e.selection.setRng(e.selection.getRng())},zM=function(e,t){var n=un.fromDom(e.getBody());BM(n,"mce-content-readonly",t);if(t){e.selection.controlSelection.hideResizeRect();e._selectionOverrides.hideFakeCaret();GM(e);e.readonly=!0;VM(n,!1);HM(n)}else{e.readonly=!1;VM(n,!0);qM(n);UM(e,"StyleWithCSS",!1);UM(e,"enableInlineTableEditing",!1);UM(e,"enableObjectResizing",!1);SO(e)&&e.focus();WM(e);e.nodeChanged()}},$M=function(e){return e.readonly},KM=function(e){e.parser.addAttributeFilter("contenteditable",(function(t){$M(e)&&Q(t,(function(e){e.attr(MM,e.attr("contenteditable"));e.attr("contenteditable","false")}))}));e.serializer.addAttributeFilter(MM,(function(t){$M(e)&&Q(t,(function(e){e.attr("contenteditable",e.attr(MM))}))}));e.serializer.addTempAttr(MM)},YM=function(e){e.serializer?KM(e):e.on("PreInit",(function(){KM(e)}))},XM=function(e){return"click"===e.type},JM=function(e,t){return fo(t,"a",(function(t){return xn(t,un.fromDom(e.getBody()))})).bind((function(e){return li(e,"href")}))},QM=function(e,t){if(XM(t)&&!Tg.metaKeyPressed(t)){var n=un.fromDom(t.target);JM(e,n).each((function(n){t.preventDefault();if(/^#/.test(n)){var r=e.dom.select(n+',[name="'+at(n,"#")+'"]');r.length&&e.selection.scrollIntoView(r[0],!0)}else window.open(n,"_blank","rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes")}))}},ZM=function(e){e.on("ShowCaret",(function(t){$M(e)&&t.preventDefault()}));e.on("ObjectSelected",(function(t){$M(e)&&t.preventDefault()}))},eB=on.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," "),tB=function(){function e(e){this.bindings={};this.settings=e||{};this.scope=this.settings.scope||this;this.toggleEvent=this.settings.toggleEvent||L}e.isNative=function(e){return!!eB[e.toLowerCase()]};e.prototype.fire=function(e,t){var n=e.toLowerCase(),r=ws(n,t||{},this.scope);this.settings.beforeFire&&this.settings.beforeFire(r);var i=this.bindings[n];if(i)for(var o=0,a=i.length;o<a;o++){var s=i[o];if(!s.removed){s.once&&this.off(n,s.func);if(r.isImmediatePropagationStopped())return r;if(!1===s.func.call(this.scope,r)){r.preventDefault();return r}}}return r};e.prototype.on=function(e,t,n,r){!1===t&&(t=L);if(t){var i={func:t,removed:!1};r&&on.extend(i,r);for(var o=e.toLowerCase().split(" "),a=o.length;a--;){var s=o[a],c=this.bindings[s];if(!c){c=[];this.toggleEvent(s,!0)}c=n?We([i],c,!0):We(We([],c,!0),[i],!1);this.bindings[s]=c}}return this};e.prototype.off=function(e,t){var n=this;if(e)for(var r=e.toLowerCase().split(" "),i=r.length;i--;){var o=r[i],a=this.bindings[o];if(!o){ve(this.bindings,(function(e,t){n.toggleEvent(t,!1);delete n.bindings[t]}));return this}if(a){if(t){var s=ee(a,(function(e){return e.func===t}));a=s.fail;this.bindings[o]=a;Q(s.pass,(function(e){e.removed=!0}))}else a.length=0;if(!a.length){this.toggleEvent(e,!1);delete this.bindings[o]}}}else{ve(this.bindings,(function(e,t){n.toggleEvent(t,!1)}));this.bindings={}}return this};e.prototype.once=function(e,t,n){return this.on(e,t,n,{once:!0})};e.prototype.has=function(e){e=e.toLowerCase();return!(!this.bindings[e]||0===this.bindings[e].length)};return e}(),nB=function(e){e._eventDispatcher||(e._eventDispatcher=new tB({scope:e,toggleEvent:function(t,n){tB.isNative(t)&&e.toggleNativeEvent&&e.toggleNativeEvent(t,n)}}));return e._eventDispatcher},rB={fire:function(e,t,n){var r=this;if(r.removed&&"remove"!==e&&"detach"!==e)return t;var i=nB(r).fire(e,t);if(!1!==n&&r.parent)for(var o=r.parent();o&&!i.isPropagationStopped();){o.fire(e,i,!1);o=o.parent()}return i},on:function(e,t,n){return nB(this).on(e,t,n)},off:function(e,t){return nB(this).off(e,t)},once:function(e,t){return nB(this).once(e,t)},hasEventListeners:function(e){return nB(this).has(e)}},iB=jl.DOM,oB=function(e,t){if("selectionchange"===t)return e.getDoc();if(!e.inline&&/^mouse|touch|click|contextmenu|drop|dragover|dragend/.test(t))return e.getDoc().documentElement;var n=Ip(e);if(n){e.eventRoot||(e.eventRoot=iB.select(n)[0]);return e.eventRoot}return e.getBody()},aB=function(e){return!e.hidden&&!$M(e)},sB=function(e,t,n){aB(e)?e.fire(t,n):$M(e)&&QM(e,n)},cB=function(e,t){var n;e.delegates||(e.delegates={});if(!e.delegates[t]&&!e.removed){var r=oB(e,t);if(Ip(e)){if(!uD){uD={};e.editorManager.on("removeEditor",(function(){if(!e.editorManager.activeEditor&&uD){ve(uD,(function(t,n){e.dom.unbind(oB(e,n))}));uD=null}}))}if(uD[t])return;n=function(n){for(var r=n.target,i=e.editorManager.get(),o=i.length;o--;){var a=i[o].getBody();(a===r||iB.isChildOf(r,a))&&sB(i[o],t,n)}};uD[t]=n;iB.bind(r,t,n)}else{n=function(n){sB(e,t,n)};iB.bind(r,t,n);e.delegates[t]=n}}},lB=qe(qe({},rB),{bindPendingEventDelegates:function(){var e=this;on.each(e._pendingNativeEvents,(function(t){cB(e,t)}))},toggleNativeEvent:function(e,t){var n=this;if("focus"!==e&&"blur"!==e&&!n.removed)if(t)n.initialized?cB(n,e):n._pendingNativeEvents?n._pendingNativeEvents.push(e):n._pendingNativeEvents=[e];else if(n.initialized){n.dom.unbind(oB(n,e),e,n.delegates[e]);delete n.delegates[e]}},unbindAllNativeEvents:function(){var e=this,t=e.getBody(),n=e.dom;if(e.delegates){ve(e.delegates,(function(t,n){e.dom.unbind(oB(e,n),n,t)}));delete e.delegates}if(!e.inline&&t&&n){t.onload=null;n.unbind(e.getWin());n.unbind(e.getDoc())}if(n){n.unbind(t);n.unbind(e.getContainer())}}}),uB=["design","readonly"],dB=function(e,t,n,r){var i=n[t.get()],o=n[r];try{o.activate()}catch(e){console.error("problem while activating editor mode "+r+":",e);return}i.deactivate();i.editorReadOnly!==o.editorReadOnly&&zM(e,o.editorReadOnly);t.set(r);fg(e,r)},pB=function(e,t,n,r){if(r!==n.get()){if(!Ae(t,r))throw new Error("Editor mode '"+r+"' is invalid");e.initialized?dB(e,n,t,r):e.on("init",(function(){return dB(e,n,t,r)}))}},hB=function(e,t,n){var r;if(Y(uB,t))throw new Error("Cannot override default mode "+t);return qe(qe({},e),((r={})[t]=qe(qe({},n),{deactivate:function(){try{n.deactivate()}catch(e){console.error("problem while deactivating editor mode "+t+":",e)}}}),r))},mB=function(e){var t=_l("design"),n=_l({design:{activate:S,deactivate:S,editorReadOnly:!1},readonly:{activate:S,deactivate:S,editorReadOnly:!0}});YM(e);ZM(e);return{isReadOnly:function(){return $M(e)},set:function(r){return pB(e,n.get(),t,r)},get:function(){return t.get()},register:function(e,t){n.set(hB(n.get(),e,t))}}},fB=on.each,gB=on.explode,bB={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},OB=on.makeMap("alt,ctrl,shift,meta,access"),yB=function(e){var t,n={};fB(gB(e.toLowerCase(),"+"),(function(e){if(e in OB)n[e]=!0;else if(/^[0-9]{2,}$/.test(e))n.keyCode=parseInt(e,10);else{n.charCode=e.charCodeAt(0);n.keyCode=bB[e]||e.toUpperCase().charCodeAt(0)}}));var r=[n.keyCode];for(t in OB)n[t]?r.push(t):n[t]=!1;n.id=r.join(",");if(n.access){n.alt=!0;Qt.mac?n.ctrl=!0:n.shift=!0}if(n.meta)if(Qt.mac)n.meta=!0;else{n.ctrl=!0;n.meta=!1}return n},jB=function(){function e(e){this.shortcuts={};this.pendingPatterns=[];this.editor=e;var t=this;e.on("keyup keypress keydown",(function(e){if((t.hasModifier(e)||t.isFunctionKey(e))&&!e.isDefaultPrevented()){fB(t.shortcuts,(function(n){if(t.matchShortcut(e,n)){t.pendingPatterns=n.subpatterns.slice(0);"keydown"===e.type&&t.executeShortcutAction(n);return!0}}));if(t.matchShortcut(e,t.pendingPatterns[0])){1===t.pendingPatterns.length&&"keydown"===e.type&&t.executeShortcutAction(t.pendingPatterns[0]);t.pendingPatterns.shift()}}}))}e.prototype.add=function(e,t,n,r){var i=this,o=i.normalizeCommandFunc(n);fB(gB(on.trim(e)),(function(e){var n=i.createShortcut(e,t,o,r);i.shortcuts[n.id]=n}));return!0};e.prototype.remove=function(e){var t=this.createShortcut(e);if(this.shortcuts[t.id]){delete this.shortcuts[t.id];return!0}return!1};e.prototype.normalizeCommandFunc=function(e){var t=this,n=e;return"string"==typeof n?function(){t.editor.execCommand(n,!1,null)}:on.isArray(n)?function(){t.editor.execCommand(n[0],n[1],n[2])}:n};e.prototype.createShortcut=function(e,t,n,r){var i=on.map(gB(e,">"),yB);i[i.length-1]=on.extend(i[i.length-1],{func:n,scope:r||this.editor});return on.extend(i[0],{desc:this.editor.translate(t),subpatterns:i.slice(1)})};e.prototype.hasModifier=function(e){return e.altKey||e.ctrlKey||e.metaKey};e.prototype.isFunctionKey=function(e){return"keydown"===e.type&&e.keyCode>=112&&e.keyCode<=123};e.prototype.matchShortcut=function(e,t){if(!t)return!1;if(t.ctrl!==e.ctrlKey||t.meta!==e.metaKey)return!1;if(t.alt!==e.altKey||t.shift!==e.shiftKey)return!1;if(e.keyCode===t.keyCode||e.charCode&&e.charCode===t.charCode){e.preventDefault();return!0}return!1};e.prototype.executeShortcutAction=function(e){return e.func?e.func.call(e.scope):null};return e}(),vB=function(){var e={},t={},n={},r={},i={},o={},a={},s=function(e,t){return function(n,r){return e[n.toLowerCase()]=qe(qe({},r),{type:t})}},c=function(e,t){return r[e.toLowerCase()]=t};return{addButton:s(e,"button"),addGroupToolbarButton:s(e,"grouptoolbarbutton"),addToggleButton:s(e,"togglebutton"),addMenuButton:s(e,"menubutton"),addSplitButton:s(e,"splitbutton"),addMenuItem:s(t,"menuitem"),addNestedMenuItem:s(t,"nestedmenuitem"),addToggleMenuItem:s(t,"togglemenuitem"),addAutocompleter:s(n,"autocompleter"),addContextMenu:s(i,"contextmenu"),addContextToolbar:s(o,"contexttoolbar"),addContextForm:s(o,"contextform"),addSidebar:s(a,"sidebar"),addIcon:c,getAll:function(){return{buttons:e,menuItems:t,icons:r,popups:n,contextMenus:i,contextToolbars:o,sidebars:a}}}},CB=function(){var e=vB();return{addAutocompleter:e.addAutocompleter,addButton:e.addButton,addContextForm:e.addContextForm,addContextMenu:e.addContextMenu,addContextToolbar:e.addContextToolbar,addIcon:e.addIcon,addMenuButton:e.addMenuButton,addMenuItem:e.addMenuItem,addNestedMenuItem:e.addNestedMenuItem,addSidebar:e.addSidebar,addSplitButton:e.addSplitButton,addToggleButton:e.addToggleButton,addGroupToolbarButton:e.addGroupToolbarButton,addToggleMenuItem:e.addToggleMenuItem,getAll:e.getAll}},xB=jl.DOM,EB=on.extend,TB=on.each,SB=on.resolve,IB=Qt.ie,wB=function(){function e(e,t,n){var r=this;this.plugins={};this.contentCSS=[];this.contentStyles=[];this.loadedCSS={};this.isNotDirty=!1;this.editorManager=n;this.documentBaseUrl=n.documentBaseURL;EB(this,lB);this.settings=jw(this,e,this.documentBaseUrl,n.defaultSettings,t);this.settings.suffix&&(n.suffix=this.settings.suffix);this.suffix=n.suffix;this.settings.base_url&&n._setBaseUrl(this.settings.base_url);this.baseUri=n.baseURI;if(this.settings.referrer_policy){wl.ScriptLoader._setReferrerPolicy(this.settings.referrer_policy);jl.DOM.styleSheetLoader._setReferrerPolicy(this.settings.referrer_policy)}Fl.languageLoad=this.settings.language_load;Fl.baseURL=n.baseURL;this.id=e;this.setDirty(!1);this.documentBaseURI=new ZO(this.settings.document_base_url,{base_uri:this.baseUri});this.baseURI=this.baseUri;this.inline=!!this.settings.inline;this.shortcuts=new jB(this);this.editorCommands=new LM(this);this.settings.cache_suffix&&(Qt.cacheSuffix=this.settings.cache_suffix.replace(/^[\?\&]+/,""));this.ui={registry:CB(),styleSheetLoader:void 0,show:S,hide:S,enable:S,disable:S,isDisabled:L};var i=mB(this);this.mode=i;this.setMode=i.set;n.fire("SetupEditor",{editor:this});this.execCallback("setup",this);this.$=pl.overrideDefaults((function(){return{context:r.inline?r.getBody():r.getDoc(),element:r.getBody()}}))}e.prototype.render=function(){dM(this)};e.prototype.focus=function(e){this.execCommand("mceFocus",!1,e)};e.prototype.hasFocus=function(){return TO(this)};e.prototype.execCallback=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r,i=this,o=i.settings[e];if(o){if(i.callbackLookup&&(r=i.callbackLookup[e])){o=r.func;r=r.scope}if("string"==typeof o){r=(r=o.replace(/\.\w+$/,""))?SB(r):0;o=SB(o);i.callbackLookup=i.callbackLookup||{};i.callbackLookup[e]={func:o,scope:r}}return o.apply(r||i,t)}};e.prototype.translate=function(e){return Rl.translate(e)};e.prototype.getParam=function(e,t,n){return Ew(this,e,t,n)};e.prototype.hasPlugin=function(e,t){return!!Y(Kp(this).split(/[ ,]/),e)&&(!t||void 0!==Uw.get(e))};e.prototype.nodeChanged=function(e){this._nodeChangeDispatcher.nodeChanged(e)};e.prototype.addCommand=function(e,t,n){this.editorCommands.addCommand(e,t,n)};e.prototype.addQueryStateHandler=function(e,t,n){this.editorCommands.addQueryStateHandler(e,t,n)};e.prototype.addQueryValueHandler=function(e,t,n){this.editorCommands.addQueryValueHandler(e,t,n)};e.prototype.addShortcut=function(e,t,n,r){this.shortcuts.add(e,t,n,r)};e.prototype.execCommand=function(e,t,n,r){return this.editorCommands.execCommand(e,t,n,r)};e.prototype.queryCommandState=function(e){return this.editorCommands.queryCommandState(e)};e.prototype.queryCommandValue=function(e){return this.editorCommands.queryCommandValue(e)};e.prototype.queryCommandSupported=function(e){return this.editorCommands.queryCommandSupported(e)};e.prototype.show=function(){var e=this;if(e.hidden){e.hidden=!1;if(e.inline)e.getBody().contentEditable="true";else{xB.show(e.getContainer());xB.hide(e.id)}e.load();e.fire("show")}};e.prototype.hide=function(){var e=this,t=e.getDoc();if(!e.hidden){IB&&t&&!e.inline&&t.execCommand("SelectAll");e.save();if(e.inline){e.getBody().contentEditable="false";e===e.editorManager.focusedEditor&&(e.editorManager.focusedEditor=null)}else{xB.hide(e.getContainer());xB.setStyle(e.id,"display",e.orgDisplay)}e.hidden=!0;e.fire("hide")}};e.prototype.isHidden=function(){return!!this.hidden};e.prototype.setProgressState=function(e,t){this.fire("ProgressState",{state:e,time:t})};e.prototype.load=function(e){var t,n=this,r=n.getElement();if(n.removed)return"";if(r){(e=e||{}).load=!0;var i=Hr(r)?r.value:r.innerHTML;t=n.setContent(i,e);e.element=r;e.no_events||n.fire("LoadContent",e);e.element=r=null;return t}};e.prototype.save=function(e){var t,n,r=this,i=r.getElement();if(i&&r.initialized&&!r.removed){(e=e||{}).save=!0;e.element=i;t=e.content=r.getContent(e);e.no_events||r.fire("SaveContent",e);"raw"===e.format&&r.fire("RawSaveContent",e);t=e.content;if(Hr(i))i.value=t;else{!e.is_removing&&r.inline||(i.innerHTML=t);(n=xB.getParent(r.id,"form"))&&TB(n.elements,(function(e){if(e.name===r.id){e.value=t;return!1}}))}e.element=i=null;!1!==e.set_dirty&&r.setDirty(!1);return t}};e.prototype.setContent=function(e,t){return FI(this,e,t)};e.prototype.getContent=function(e){return RI(this,e)};e.prototype.insertContent=function(e,t){t&&(e=EB({content:e},t));this.execCommand("mceInsertContent",!1,e)};e.prototype.resetContent=function(e){void 0===e?FI(this,this.startContent,{format:"raw"}):FI(this,e);this.undoManager.reset();this.setDirty(!1);this.nodeChanged()};e.prototype.isDirty=function(){return!this.isNotDirty};e.prototype.setDirty=function(e){var t=!this.isNotDirty;this.isNotDirty=!e;e&&e!==t&&this.fire("dirty")};e.prototype.getContainer=function(){var e=this;e.container||(e.container=xB.get(e.editorContainer||e.id+"_parent"));return e.container};e.prototype.getContentAreaContainer=function(){return this.contentAreaContainer};e.prototype.getElement=function(){this.targetElm||(this.targetElm=xB.get(this.id));return this.targetElm};e.prototype.getWin=function(){var e,t=this;t.contentWindow||(e=t.iframeElement)&&(t.contentWindow=e.contentWindow);return t.contentWindow};e.prototype.getDoc=function(){var e,t=this;t.contentDocument||(e=t.getWin())&&(t.contentDocument=e.document);return t.contentDocument};e.prototype.getBody=function(){var e=this.getDoc();return this.bodyElement||(e?e.body:null)};e.prototype.convertURL=function(e,t,n){var r=this,i=r.settings;return i.urlconverter_callback?r.execCallback("urlconverter_callback",e,n,!0,t):!i.convert_urls||n&&"LINK"===n.nodeName||0===e.indexOf("file:")||0===e.length?e:i.relative_urls?r.documentBaseURI.toRelative(e):e=r.documentBaseURI.toAbsolute(e,i.remove_script_host)};e.prototype.addVisual=function(e){pM(this,e)};e.prototype.remove=function(){HI(this)};e.prototype.destroy=function(e){qI(this,e)};e.prototype.uploadImages=function(e){return this.editorUpload.uploadImages(e)};e.prototype._scanForImages=function(){return this.editorUpload.scanForImages()};e.prototype.addButton=function(){throw new Error("editor.addButton has been removed in tinymce 5x, use editor.ui.registry.addButton or editor.ui.registry.addToggleButton or editor.ui.registry.addSplitButton instead")};e.prototype.addSidebar=function(){throw new Error("editor.addSidebar has been removed in tinymce 5x, use editor.ui.registry.addSidebar instead")};e.prototype.addMenuItem=function(){throw new Error("editor.addMenuItem has been removed in tinymce 5x, use editor.ui.registry.addMenuItem instead")};e.prototype.addContextToolbar=function(){throw new Error("editor.addContextToolbar has been removed in tinymce 5x, use editor.ui.registry.addContextToolbar instead")};return e}(),_B=jl.DOM,NB=on.explode,AB=on.each,DB=on.extend,kB=0,PB=!1,RB=[],FB=[],LB=function(e){return"length"!==e},MB=function(e){var t=e.type;AB(qB.get(),(function(n){switch(t){case"scroll":n.fire("ScrollWindow",e);break;case"resize":n.fire("ResizeWindow",e)}}))},BB=function(e){if(e!==PB){e?pl(window).on("resize scroll",MB):pl(window).off("resize scroll",MB);PB=e}},UB=function(e){var t=FB;delete RB[e.id];for(var n=0;n<RB.length;n++)if(RB[n]===e){RB.splice(n,1);break}FB=te(FB,(function(t){return e!==t}));qB.activeEditor===e&&(qB.activeEditor=FB.length>0?FB[0]:null);qB.focusedEditor===e&&(qB.focusedEditor=null);return t.length!==FB.length},VB=function(e){if(e&&e.initialized&&!(e.getContainer()||e.getBody()).parentNode){UB(e);e.unbindAllNativeEvents();e.destroy(!0);e.removed=!0;e=null}return e},HB="CSS1Compat"!==document.compatMode,qB=qe(qe({},rB),{baseURI:null,baseURL:null,defaultSettings:{},documentBaseURL:null,suffix:null,$:pl,majorVersion:"5",minorVersion:"10.6",releaseDate:"2022-10-19",editors:RB,i18n:Rl,activeEditor:null,focusedEditor:null,settings:{},setup:function(){var e,t,n=this,r="";t=ZO.getDocumentBaseUrl(document.location);if(/^[^:]+:\/\/\/?[^\/]+\//.test(t)){t=t.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,"");/[\/\\]$/.test(t)||(t+="/")}var i=window.tinymce||window.tinyMCEPreInit;if(i){e=i.base||i.baseURL;r=i.suffix}else{for(var o=document.getElementsByTagName("script"),a=0;a<o.length;a++){if(""!==(c=o[a].src||"")){var s=c.substring(c.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(c)){-1!==s.indexOf(".min")&&(r=".min");e=c.substring(0,c.lastIndexOf("/"));break}}}if(!e&&document.currentScript){var c;-1!==(c=document.currentScript.src).indexOf(".min")&&(r=".min");e=c.substring(0,c.lastIndexOf("/"))}}n.baseURL=new ZO(t).toAbsolute(e);n.documentBaseURL=t;n.baseURI=new ZO(n.baseURL);n.suffix=r;fO(n)},overrideDefaults:function(e){var t=e.base_url;t&&this._setBaseUrl(t);var n=e.suffix;e.suffix&&(this.suffix=n);this.defaultSettings=e;var r=e.plugin_base_urls;void 0!==r&&ve(r,(function(e,t){Fl.PluginManager.urls[t]=e}))},init:function(e){var t,n=this,r=on.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," "),i=function(e,t){return e.inline&&t.tagName.toLowerCase()in r},o=function(e){var t=e.id;if(!t){t=Ne(e,"name").filter((function(e){return!_B.get(e)})).getOrThunk(_B.uniqueId);e.setAttribute("id",t)}return t},a=function(t){var r=e[t];if(r)return r.apply(n,[])},s=function(e,t){return t.constructor===RegExp?t.test(e.className):_B.hasClass(e,t)},c=function(e){var t=[];if(Qt.browser.isIE()&&Qt.browser.version.major<11){Zw("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tinymce.com/docs/get-started/system-requirements/");return[]}if(HB){Zw("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode.");return[]}if(e.types){AB(e.types,(function(e){t=t.concat(_B.select(e.selector))}));return t}if(e.selector)return _B.select(e.selector);if(e.target)return[e.target];switch(e.mode){case"exact":var n=e.elements||"";n.length>0&&AB(NB(n),(function(e){var n=_B.get(e);n?t.push(n):AB(document.forms,(function(n){AB(n.elements,(function(n){if(n.name===e){e="mce_editor_"+kB++;_B.setAttrib(n,"id",e);t.push(n)}}))}))}));break;case"textareas":case"specific_textareas":AB(_B.select("textarea"),(function(n){e.editor_deselector&&s(n,e.editor_deselector)||e.editor_selector&&!s(n,e.editor_selector)||t.push(n)}))}return t},l=function(e){t=e},u=function(){var t,r=0,s=[],d=function(e,i,o){var a=new wB(e,i,n);s.push(a);a.on("init",(function(){++r===t.length&&l(s)}));a.targetElm=a.targetElm||o;a.render()};_B.unbind(window,"ready",u);a("onpageload");t=pl.unique(c(e));if(e.types)AB(e.types,(function(n){on.each(t,(function(t){if(_B.is(t,n.selector)){d(o(t),DB({},e,n),t);return!1}return!0}))}));else{on.each(t,(function(e){VB(n.get(e.id))}));0===(t=on.grep(t,(function(e){return!n.get(e.id)}))).length?l([]):AB(t,(function(t){i(e,t)?Zw("Could not initialize inline editor on invalid inline target element",t):d(o(t),e,t)}))}};n.settings=e;_B.bind(window,"ready",u);return new go((function(e){t?e(t):l=function(t){e(t)}}))},get:function(e){return 0===arguments.length?FB.slice(0):g(e)?oe(FB,(function(t){return t.id===e})).getOr(null):T(e)&&FB[e]?FB[e]:null},add:function(e){var t=this;if(RB[e.id]===e)return e;if(null===t.get(e.id)){LB(e.id)&&(RB[e.id]=e);RB.push(e);FB.push(e)}BB(!0);t.activeEditor=e;t.fire("AddEditor",{editor:e});if(!dD){dD=function(e){var n=t.fire("BeforeUnload");if(n.returnValue){e.preventDefault();e.returnValue=n.returnValue;return n.returnValue}};window.addEventListener("beforeunload",dD)}return e},createEditor:function(e,t){return this.add(new wB(e,t,this))},remove:function(e){var t,n,r=this;if(e){if(!g(e)){n=e;if(y(r.get(n.id)))return null;UB(n)&&r.fire("RemoveEditor",{editor:n});0===FB.length&&window.removeEventListener("beforeunload",dD);n.remove();BB(FB.length>0);return n}AB(_B.select(e),(function(e){(n=r.get(e.id))&&r.remove(n)}))}else for(t=FB.length-1;t>=0;t--)r.remove(FB[t])},execCommand:function(e,t,n){var r=this,i=r.get(n);switch(e){case"mceAddEditor":r.get(n)||new wB(n,r.settings,r).render();return!0;case"mceRemoveEditor":i&&i.remove();return!0;case"mceToggleEditor":if(!i){r.execCommand("mceAddEditor",!1,n);return!0}i.isHidden()?i.show():i.hide();return!0}return!!r.activeEditor&&r.activeEditor.execCommand(e,t,n)},triggerSave:function(){AB(FB,(function(e){e.save()}))},addI18n:function(e,t){Rl.add(e,t)},translate:function(e){return Rl.translate(e)},setActive:function(e){var t=this.activeEditor;if(this.activeEditor!==e){t&&t.fire("deactivate",{relatedTarget:e});e.fire("activate",{relatedTarget:t})}this.activeEditor=e},_setBaseUrl:function(e){this.baseURL=new ZO(this.documentBaseURL).toAbsolute(e.replace(/\/+$/,""));this.baseURI=new ZO(this.baseURL)}});qB.setup();var GB,WB,zB=Math.min,$B=Math.max,KB=Math.round,YB=function(e,t,n){var r=t.x,i=t.y,o=e.w,a=e.h,s=t.w,c=t.h,l=(n||"").split("");"b"===l[0]&&(i+=c);"r"===l[1]&&(r+=s);"c"===l[0]&&(i+=KB(c/2));"c"===l[1]&&(r+=KB(s/2));"b"===l[3]&&(i-=a);"r"===l[4]&&(r-=o);"c"===l[3]&&(i-=KB(a/2));"c"===l[4]&&(r-=KB(o/2));return eU(r,i,o,a)},XB=function(e,t,n,r){var i,o;for(o=0;o<r.length;o++)if((i=YB(e,t,r[o])).x>=n.x&&i.x+i.w<=n.w+n.x&&i.y>=n.y&&i.y+i.h<=n.h+n.y)return r[o];return null},JB=function(e,t,n){return eU(e.x-t,e.y-n,e.w+2*t,e.h+2*n)},QB=function(e,t){var n=$B(e.x,t.x),r=$B(e.y,t.y),i=zB(e.x+e.w,t.x+t.w),o=zB(e.y+e.h,t.y+t.h);return i-n<0||o-r<0?null:eU(n,r,i-n,o-r)},ZB=function(e,t,n){var r=e.x,i=e.y,o=e.x+e.w,a=e.y+e.h,s=t.x+t.w,c=t.y+t.h,l=$B(0,t.x-r),u=$B(0,t.y-i),d=$B(0,o-s),p=$B(0,a-c);r+=l;i+=u;if(n){o+=l;a+=u;r-=d;i-=p}return eU(r,i,(o-=d)-r,(a-=p)-i)},eU=function(e,t,n,r){return{x:e,y:t,w:n,h:r}},tU=function(e){return eU(e.left,e.top,e.width,e.height)},nU={inflate:JB,relativePosition:YB,findBestRelativePosition:XB,intersect:QB,clamp:ZB,create:eU,fromClientRect:tU},rU=function(e,t,n){void 0===n&&(n=1e3);var r=!1,i=null,o=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(!r){r=!0;if(null!==i){clearTimeout(i);i=null}e.apply(null,t)}}},a=o(e),s=o(t);return{start:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];r||null!==i||(i=setTimeout((function(){return s.apply(null,e)}),n))},resolve:a,reject:s}},iU=function(){var e={},t={};return{load:function(n,r){var i='Script at URL "'+r+'" failed to load',o='Script at URL "'+r+"\" did not call `tinymce.Resource.add('"+n+"', data)` within 1 second";if(void 0!==e[n])return e[n];var a=new go((function(e,a){var s=rU(e,a);t[n]=s.resolve;wl.ScriptLoader.loadScript(r,(function(){return s.start(o)}),(function(){return s.reject(i)}))}));e[n]=a;return a},add:function(n,r){if(void 0!==t[n]){t[n](r);delete t[n]}e[n]=go.resolve(r)}}}(),oU=on.each,aU=on.extend,sU=function(){};sU.extend=GB=function(e){var t=this,n=t.prototype,r=function(){var e,t,n,r=this;if(!WB){r.init&&r.init.apply(r,arguments);if(t=r.Mixins){e=t.length;for(;e--;)(n=t[e]).init&&n.init.apply(r,arguments)}}},i=function(){return this},o=function(e,t){return function(){var r=this,i=r._super;r._super=n[e];var o=t.apply(r,arguments);r._super=i;return o}};WB=!0;var a=new t;WB=!1;if(e.Mixins){oU(e.Mixins,(function(t){for(var n in t)"init"!==n&&(e[n]=t[n])}));n.Mixins&&(e.Mixins=n.Mixins.concat(e.Mixins))}e.Methods&&oU(e.Methods.split(","),(function(t){e[t]=i}));e.Properties&&oU(e.Properties.split(","),(function(t){var n="_"+t;e[t]=function(e){var t=this;if(void 0!==e){t[n]=e;return t}return t[n]}}));e.Statics&&oU(e.Statics,(function(e,t){r[t]=e}));e.Defaults&&n.Defaults&&(e.Defaults=aU({},n.Defaults,e.Defaults));ve(e,(function(e,t){"function"==typeof e&&n[t]?a[t]=o(t,e):a[t]=e}));r.prototype=a;r.constructor=r;r.extend=GB;return r};var cU,lU=Math.min,uU=Math.max,dU=Math.round,pU=function(e){var t={},n=0,r=0,i=0,o=function(e,t,n){var r,i;0;r=0;i=0;var o=lU(e/=255,lU(t/=255,n/=255)),a=uU(e,uU(t,n));if(o===a)return{h:0,s:0,v:100*(i=o)};r=(a-o)/a;i=a;return{h:dU(60*((e===o?3:n===o?1:5)-(e===o?t-n:n===o?e-t:n-e)/(a-o))),s:dU(100*r),v:dU(100*i)}},a=function(e,t,o){e=(parseInt(e,10)||0)%360;t=parseInt(t,10)/100;o=parseInt(o,10)/100;t=uU(0,lU(t,1));o=uU(0,lU(o,1));if(0!==t){var a=e/60,s=o*t,c=s*(1-Math.abs(a%2-1)),l=o-s;switch(Math.floor(a)){case 0:n=s;r=c;i=0;break;case 1:n=c;r=s;i=0;break;case 2:n=0;r=s;i=c;break;case 3:n=0;r=c;i=s;break;case 4:n=c;r=0;i=s;break;case 5:n=s;r=0;i=c;break;default:n=r=i=0}n=dU(255*(n+l));r=dU(255*(r+l));i=dU(255*(i+l))}else n=r=i=dU(255*o)},s=function(){var e=function(e){return(e=parseInt(e,10).toString(16)).length>1?e:"0"+e};return"#"+e(n)+e(r)+e(i)},c=function(){return{r:n,g:r,b:i}},l=function(){return o(n,r,i)},u=function(e){var o;if("object"==typeof e)if("r"in e){n=e.r;r=e.g;i=e.b}else"v"in e&&a(e.h,e.s,e.v);else if(o=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)[^\)]*\)/gi.exec(e)){n=parseInt(o[1],10);r=parseInt(o[2],10);i=parseInt(o[3],10)}else if(o=/#([0-F]{2})([0-F]{2})([0-F]{2})/gi.exec(e)){n=parseInt(o[1],16);r=parseInt(o[2],16);i=parseInt(o[3],16)}else if(o=/#([0-F])([0-F])([0-F])/gi.exec(e)){n=parseInt(o[1]+o[1],16);r=parseInt(o[2]+o[2],16);i=parseInt(o[3]+o[3],16)}n=n<0?0:n>255?255:n;r=r<0?0:r>255?255:r;i=i<0?0:i>255?255:i;return t};e&&u(e);t.toRgb=c;t.toHsv=l;t.toHex=s;t.parse=u;return t},hU={serialize:function(e){var t=JSON.stringify(e);return g(t)?t.replace(/[\u0080-\uFFFF]/g,(function(e){var t=e.charCodeAt(0).toString(16);return"\\u"+"0000".substring(t.length)+t})):t},parse:function(e){try{return JSON.parse(e)}catch(e){}}},mU={callbacks:{},count:0,send:function(e){var t=this,n=jl.DOM,r=void 0!==e.count?e.count:t.count,i="tinymce_jsonp_"+r;t.callbacks[r]=function(o){n.remove(i);delete t.callbacks[r];e.callback(o)};n.add(n.doc.body,"script",{id:i,src:e.url,type:"text/javascript"});t.count++}},fU=qe(qe({},rB),{send:function(e){var t,n=0,r=function(){if(!e.async||4===t.readyState||n++>1e4){e.success&&n<1e4&&200===t.status?e.success.call(e.success_scope,""+t.responseText,t,e):e.error&&e.error.call(e.error_scope,n>1e4?"TIMED_OUT":"GENERAL",t,e);t=null}else vo.setTimeout(r,10)};e.scope=e.scope||this;e.success_scope=e.success_scope||e.scope;e.error_scope=e.error_scope||e.scope;e.async=!1!==e.async;e.data=e.data||"";fU.fire("beforeInitialize",{settings:e});(t=new XMLHttpRequest).overrideMimeType&&t.overrideMimeType(e.content_type);t.open(e.type||(e.data?"POST":"GET"),e.url,e.async);e.crossDomain&&(t.withCredentials=!0);e.content_type&&t.setRequestHeader("Content-Type",e.content_type);e.requestheaders&&on.each(e.requestheaders,(function(e){t.setRequestHeader(e.key,e.value)}));t.setRequestHeader("X-Requested-With","XMLHttpRequest");(t=fU.fire("beforeSend",{xhr:t,settings:e}).xhr).send(e.data);if(!e.async)return r();vo.setTimeout(r,10)}}),gU=on.extend,bU=function(){function e(e){this.settings=gU({},e);this.count=0}e.sendRPC=function(t){return(new e).send(t)};e.prototype.send=function(e){var t=e.error,n=e.success,r=gU(this.settings,e);r.success=function(e,i){void 0===(e=hU.parse(e))&&(e={error:"JSON Parse error."});e.error?t.call(r.error_scope||r.scope,e.error,i):n.call(r.success_scope||r.scope,e.result)};r.error=function(e,n){t&&t.call(r.error_scope||r.scope,e,n)};r.data=hU.serialize({id:e.id||"c"+this.count++,method:e.method,params:e.params});r.content_type="application/json";fU.send(r)};return e}(),OU=function(){return function(){var e={},t=[],n={getItem:function(t){var n=e[t];return n||null},setItem:function(n,r){t.push(n);e[n]=String(r)},key:function(e){return t[e]},removeItem:function(n){t=t.filter((function(e){return e===n}));delete e[n]},clear:function(){t=[];e={}},length:0};Object.defineProperty(n,"length",{get:function(){return t.length},configurable:!1,enumerable:!1});return n}()};try{var yU="__storage_test__";(cU=window.localStorage).setItem(yU,yU);cU.removeItem(yU)}catch(e){cU=OU()}var jU={geom:{Rect:nU},util:{Promise:go,Delay:vo,Tools:on,VK:Tg,URI:ZO,Class:sU,EventDispatcher:tB,Observable:rB,I18n:Rl,XHR:fU,JSON:hU,JSONRequest:bU,JSONP:mU,LocalStorage:cU,Color:pU,ImageUploader:h_},dom:{EventUtils:Fs,Sizzle:jc,DomQuery:pl,TreeWalker:Eo,TextSeeker:vu,DOMUtils:jl,ScriptLoader:wl,RangeUtils:Kg,Serializer:kI,StyleSheetLoader:Co,ControlSelection:Ig,BookmarkManager:cg,Selection:HS,Event:Fs.Event},html:{Styles:Cs,Entities:ss,Node:HO,Schema:js,SaxParser:sy,DomParser:jI,Writer:Oy,Serializer:yy},Env:Qt,AddOnManager:Fl,Annotator:sg,Formatter:T_,UndoManager:__,EditorCommands:LM,WindowManager:qw,NotificationManager:Bw,EditorObservable:lB,Shortcuts:jB,Editor:wB,FocusManager:tO,EditorManager:qB,DOM:jl.DOM,ScriptLoader:wl.ScriptLoader,PluginManager:Uw,ThemeManager:Vw,IconManager:Tw,Resource:iU,trim:on.trim,isArray:on.isArray,is:on.is,toArray:on.toArray,makeMap:on.makeMap,each:on.each,map:on.map,grep:on.grep,inArray:on.inArray,extend:on.extend,create:on.create,walk:on.walk,createNS:on.createNS,resolve:on.resolve,explode:on.explode,_addCacheSuffix:on._addCacheSuffix,isOpera:Qt.opera,isWebKit:Qt.webkit,isIE:Qt.ie,isGecko:Qt.gecko,isMac:Qt.mac},vU=on.extend(qB,jU),CU=function(t){try{e.exports=t}catch(e){}};(function(e){window.tinymce=e;window.tinyMCE=e})(vU);CU(vU)}()}).call(this,n(74))},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(9),i=n.n(r);const o=e=>{if(e&&"na1"!==e)return"-"+e;const t=i.a.getHublet();return"na1"===t||"na1"===e?"":"-"+t},a=(e="app",t="hubspot",n)=>`https://${e}${o(n)}.${t}${i.a.isProd()?"":"qa"}.com`},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));n.d(t,"b",(function(){return i}));function r(e,t){const n=t||window.hubspot&&window.hubspot.bender||{},{staticDomainPrefix:r,depVersions:i,depPathPrefixes:o}=n;if(!r||!i||!o)return"";let a=r;"//local.hsappstatic.net"===r&&"static"!==i[e]&&(a="//static.hsappstatic.net");if(!o[e]){console.error("Bender package %s is missing from static_conf.json",e);return""}return`${a}${o[e]}`}function i(e,t,n){return`${r(e,n)}${t}`}},function(e,t,n){"use strict";n.d(t,"b",(function(){return i}));n.d(t,"e",(function(){return o}));n.d(t,"a",(function(){return a}));n.d(t,"c",(function(){return s}));n.d(t,"i",(function(){return c}));n.d(t,"g",(function(){return l}));n.d(t,"h",(function(){return u}));n.d(t,"f",(function(){return d}));n.d(t,"d",(function(){return f}));var r=n(46);function i(e){return(...t)=>{Object(r.a)(t.length>0,"Empty Invocation");return t.length>=e.length?e(...t):i(e.bind(null,...t))}}const o=e=>e;function a(...e){return e.reduceRight((e,t)=>(...n)=>t(e(...n)),o)}const s=(e,t)=>{if("object"!=typeof e||"object"!=typeof t||null===e||null===t)return e===t;const n=Object.getOwnPropertyNames(e),r=Object.getOwnPropertyNames(t);if(n.length!==r.length)return!1;for(let r=0;r<n.length;r++){const i=n[r];if(!s(e[i],t[i]))return!1}return!0},c=i((e,t)=>{Object(r.a)(Array.isArray(e),"keys must be an Array");const n={};e.forEach(e=>{e in t&&(n[e]=t[e])});return n}),l=i((e,t)=>{Object(r.a)(Array.isArray(e),"keys must be an Array");const n={},i={};e.forEach(e=>{i[e]=1});Object.keys(t).forEach(e=>{i[e]||(n[e]=t[e])});return n}),u=i((e,t)=>{let n=t,r=0;for(;r<e.length;){if(null==n)return;n=n[e[r]];r+=1}return n}),d=i((e,t={})=>Object.keys(t).reduce((n,r)=>{n[r]=e(t[r],r);return n},{})),p=/[&<>"'`]/g,h={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},m=e=>h[e],f=function(e){return p.test(e)?e.replace(p,m):e}},,function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));const r=(e,t)=>{const n={};return function(...r){const i=t?t.apply(this,r):r[0];if(Object.prototype.hasOwnProperty.call(n,i))return n[i];const o=e.apply(this,r);n[i]=o;return o}}},function(e,t,n){"use strict";n.d(t,"e",(function(){return a}));n.d(t,"d",(function(){return s}));n.d(t,"f",(function(){return c}));n.d(t,"h",(function(){return u}));n.d(t,"a",(function(){return d}));n.d(t,"c",(function(){return p}));n.d(t,"b",(function(){return h}));n.d(t,"g",(function(){return m}));var r=n(41),i=n.n(r),o=n(324);const a={BUTTON:"BUTTON",SELECT:"SELECT",DIVIDER:"DIVIDER",MORE_MENU:"MORE_MENU",ADVANCED_MENU:"ADVANCED_MENU",INSERT_MENU:"INSERT_MENU"},s=(a.ADVANCED_MENU,a.INSERT_MENU,a.MORE_MENU,{DEFAULT:8,BUTTON:2,ZERO:0}),c=i.a.shape({type:i.a.oneOf(Object.keys(a)).isRequired,control:i.a.string}),l="RichTextLib.toolbar",u=e=>`${l}.${e}`,d=500,p="mce-submenu-item--open",h="mce-submenu-item--close",m=`\n  padding-left: 5px !important;\n  padding-right: 5px !important;\n  font-size: 13px !important;\n  margin-bottom: 1px !important;\n  color: ${o.CALYPSO_DARK} !important;\n`},function(e,t,n){"use strict";var r=n(287),i=n.n(r),o=n(2739);t.a=i()(o.a).withConfig({displayName:"StyleProtectedUIDropdown",componentId:"yff0qz-0"})(["display:block !important;"])},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(2),i=n(40),o=n(345),a=n(1221),s=n(45);const c=["disabled"];function l(e){function t(t){const{disabled:n}=t,o=Object(r.a)(t,c),l=Object(i.useContext)(a.a);return Object(s.jsx)(e,Object.assign({disabled:n||l||!1},o))}t.displayName=`WithDisabled(${Object(o.a)(e)})`;return t}},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(2),i=n(41),o=n.n(i),a=n(40),s=n(2654),c=n(45);const l=["disabled","toolbarTooltip"],u=Object(a.createContext)(!1);class d extends a.Component{render(){const e=this.props,{disabled:t,toolbarTooltip:n}=e,i=Object(r.a)(e,l);return Object(c.jsx)(u.Provider,{value:t,children:Object(c.jsx)(s.a,Object.assign({disabled:!t||!n,placement:"bottom",title:n},i,{children:this.props.children}))})}}d.propTypes={disabled:o.a.bool,children:o.a.node,toolbarTooltip:o.a.string};d.defaultProps={disabled:!1};t.b=d},function(e,t,n){"use strict";var r=n(443),i=n(287),o=n.n(i),a=n(324);t.a=o()(r.a).withConfig({displayName:"StyleProtectedMenuButton",componentId:"sc-1he3b0t-0"})(["color:"," !important;background-color:"," !important;&:hover{background-color:"," !important;}"],a.OBSIDIAN,a.OLAF,a.CALYPSO_LIGHT)},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));n.d(t,"b",(function(){return i}));n.d(t,"c",(function(){return o}));const r={canvaslink:"link",canvasimage:"insertImage",canvasemoji:"emoji",canvassnippet:"textSnippet",canvascta:"ctas",canvasembed:"embed",canvasvideo:"insertVideo",canvastable:"table",canvascallout:"spacer",canvasanchor:"anchor",canvascharmap:"specialCharacter",canvasmore:"readMore",canvashr:"horizontalRule",canvasnonbreaking:"nonbreakingSpace",canvasrsstokens:"socialRss",canvasicon:"logo",canvascontentgeneration:"artificialIntelligence",canvascopilotcollabortation:"artificialIntelligence"},i="SHOW_TOOLBAR_SHEPHERD",o="toggleMenuItemDisabledState"},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));n.d(t,"b",(function(){return a}));var r=n(1215),i=n(307);const o=Object(r.b)((function e(t,n){return!(!n||1===!n.nodeType)&&(n.className.indexOf(t)>-1||!(!n.parentNode||1!==n.parentNode.nodeType)&&e(t,n.parentNode))})),a=e=>null!==Object(i.b)(e,"[class*=mce-]")},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));const r="hubspot",i="hsPlugins",o=e=>e.settings[i]&&e.settings[i].namespaceClass?e.settings[i].namespaceClass:r},function(e,t,n){"use strict";n.d(t,"b",(function(){return r}));n.d(t,"a",(function(){return i}));const r="canvasinline",i="canvasiframe"},function(e,t,n){"use strict";n.d(t,"c",(function(){return u}));n.d(t,"a",(function(){return d}));n.d(t,"b",(function(){return p}));var r=n(1212),i=n.n(r),o=n(40),a=n(0),s=n.n(a),c=n(45);let l=0;i.a.canvas={addPopover(e,t,n){e.popovers||(e.popovers={});e.popovers[t]=n},addToolbarPopover(e,t,n){e.toolbarPopovers||(e.toolbarPopovers={});e.toolbarPopovers[t]=n},addNodeChangeHandler(e,t){e.nodeChangeHandlers||(e.nodeChangeHandlers=[]);e.nodeChangeHandlers.push(t)},addButton(e,t,n){e.buttons||(e.buttons={});e.buttons[t]=n},addMenuItem(e,t,n){e.menuItems||(e.menuItems={});e.menuItems[t]=n},addIdleCallback(e,t,n){e.idleCallbackQueue||(e.idleCallbackQueue=[]);e.idleCallbackQueue.push({selector:t,callback:n})},addAutocompleteCommand(e,t){e.autoCompleteCommands||(e.autoCompleteCommands={});e.autoCompleteCommands[t.trigger]?e.autoCompleteCommands[t.trigger].push(t.getFilteredCommands):e.autoCompleteCommands[t.trigger]=[t.getFilteredCommands]},addAutocompleteQuickInsertOption(e,t){e.autocompleteQuickInsertOptions||(e.autocompleteQuickInsertOptions={});e.autocompleteQuickInsertOptions[t.trigger]?e.autocompleteQuickInsertOptions[t.trigger].push(t.getFilteredCommands):e.autocompleteQuickInsertOptions[t.trigger]=[t.getFilteredCommands]}};const u=e=>{if(!e.popovers)return;const t=document.createElement("div");t.dataset.testId=e.id+"__popover-container";t.id=e.id+"__popover-container";document.body.appendChild(t);s.a.render(Object(c.jsx)(o.Fragment,{children:Object.keys(e.popovers).map(t=>e.popovers[t].renderPopover({key:"mce-hubspot-popover-"+ ++l}))}),t);e.on("remove",()=>{s.a.unmountComponentAtNode(t)})},d=e=>{const t=e.settings.target;t&&t.style.setProperty("min-height",e.settings.min_height,"important")},p=e=>{e.on("init",()=>{const t=e.getBody();e.idleCallbackQueue&&e.idleCallbackQueue.forEach(({selector:n,callback:r})=>{t.querySelector(n)?r():"requestIdleCallback"in window?window.requestIdleCallback(r,{timeout:4e3}):i.a.util.Delay.setEditorTimeout(e,r,4e3)})})}},function(e,t,n){n(1229)},function(e,t){!function(){"use strict";var e,t,n=function(e){var t=e;return{get:function(){return t},set:function(e){t=e}}},r=tinymce.util.Tools.resolve("tinymce.PluginManager"),i=function(e){if(e.hasPlugin("powerpaste",!0)){void 0!==window.console&&window.console.log&&window.console.log("PowerPaste is incompatible with Paste plugin! Remove 'paste' from the 'plugins' option.");return!0}return!1},o=function(e){return{clipboard:e}},a=function(e){var t=typeof e;return null===e?"null":"object"===t&&(Array.prototype.isPrototypeOf(e)||e.constructor&&"Array"===e.constructor.name)?"array":"object"===t&&(String.prototype.isPrototypeOf(e)||e.constructor&&"String"===e.constructor.name)?"string":t},s=function(e){return function(t){return typeof t===e}},c=function(e){return function(t){return a(t)===e}}("array"),l=function(e){return null==e},u=function(e){return!l(e)},d=s("function"),p=function(){},h=function(e){return function(){return e}},m=function(e){return e},f=h(!1),g=h(!0),b=function(){return O},O={fold:function(e,t){return e()},isSome:f,isNone:g,getOr:t=m,getOrThunk:e=function(e){return e()},getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:h(null),getOrUndefined:h(void 0),or:t,orThunk:e,map:b,each:p,bind:b,exists:f,forall:g,filter:function(){return b()},toArray:function(){return[]},toString:h("none()")},y=function(e){var t=h(e),n=function(){return i},r=function(t){return t(e)},i={fold:function(t,n){return n(e)},isSome:g,isNone:f,getOr:t,getOrThunk:t,getOrDie:t,getOrNull:t,getOrUndefined:t,or:n,orThunk:n,map:function(t){return y(t(e))},each:function(t){t(e)},bind:r,exists:r,forall:r,filter:function(t){return t(e)?i:O},toArray:function(){return[e]},toString:function(){return"some("+e+")"}};return i},j=function(e){return null==e?O:y(e)},v={some:y,none:b,from:j},C=Array.prototype.slice,x=Array.prototype.push,E=function(e,t){for(var n=0,r=e.length;n<r;n++){if(t(e[n],n))return!0}return!1},T=function(e,t){for(var n=e.length,r=new Array(n),i=0;i<n;i++){var o=e[i];r[i]=t(o,i)}return r},S=function(e,t){for(var n=0,r=e.length;n<r;n++){t(e[n],n)}},I=function(e,t){for(var n=[],r=0,i=e.length;r<i;r++){var o=e[r];t(o,r)&&n.push(o)}return n},w=function(e,t,n){S(e,(function(e,r){n=t(n,e,r)}));return n},_=function(e){for(var t=[],n=0,r=e.length;n<r;++n){if(!c(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);x.apply(t,e[n])}return t},N=function(e,t){return _(T(e,t))},A=d(Array.from)?Array.from:function(e){return C.call(e)},D=function(){return(D=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e}).apply(this,arguments)},k=function(e){var t=n(v.none()),r=function(){return t.get().each(e)};return{clear:function(){r();t.set(v.none())},isSet:function(){return t.get().isSome()},get:function(){return t.get()},set:function(e){r();t.set(v.some(e))}}},P=function(){var e=k(p),t=function(t){return e.get().each(t)};return D(D({},e),{on:t})},R=function(e,t,n){return""===t||e.length>=t.length&&e.substr(n,n+t.length)===t},F=function(e,t){return R(e,t,0)},L=function(e,t){return R(e,t,e.length-t.length)},M=function(e,t){return t<=0?"":new Array(t+1).join(e)},B=tinymce.util.Tools.resolve("tinymce.Env"),U=tinymce.util.Tools.resolve("tinymce.util.Delay"),V=tinymce.util.Tools.resolve("tinymce.util.Promise"),H=tinymce.util.Tools.resolve("tinymce.util.VK"),q=function(e,t,n,r){return e.fire("PastePreProcess",{content:t,internal:n,wordContent:r})},G=function(e,t,n,r){return e.fire("PastePostProcess",{node:t,internal:n,wordContent:r})},W=function(e,t){return e.fire("PastePlainTextToggle",{state:t})},z=function(e,t){return e.fire("paste",{ieFake:t})},$=tinymce.util.Tools.resolve("tinymce.util.Tools"),K=function(e){return e.getParam("paste_block_drop",!1)},Y=function(e){return e.getParam("paste_data_images",!1)},X=function(e){return e.getParam("paste_filter_drop",!0)},J=function(e){return e.getParam("paste_preprocess")},Q=function(e){return e.getParam("paste_postprocess")},Z=function(e){return e.getParam("paste_webkit_styles")},ee=function(e){return e.getParam("paste_remove_styles_if_webkit",!0)},te=function(e){return e.getParam("paste_merge_formats",!0)},ne=function(e){return e.getParam("smart_paste",!0)},re=function(e){return e.getParam("paste_as_text",!1)},ie=function(e){return e.getParam("paste_retain_style_properties")},oe=function(e){var t="-strong/b,-em/i,-u,-span,-p,-ol,-ul,-li,-h1,-h2,-h3,-h4,-h5,-h6,-p/div,-a[href|name],sub,sup,strike,br,del,table[width],tr,td[colspan|rowspan|width],th[colspan|rowspan|width],thead,tfoot,tbody";return e.getParam("paste_word_valid_elements",t)},ae=function(e){return e.getParam("paste_convert_word_fake_lists",!0)},se=function(e){return e.getParam("paste_enable_default_filters",!0)},ce=function(e){return e.getParam("validate")},le=function(e){return e.getParam("allow_html_data_urls",!1,"boolean")},ue=function(e){return e.getParam("paste_data_images",!1,"boolean")},de=function(e){return e.getParam("images_dataimg_filter")},pe=function(e){return e.getParam("images_reuse_filename")},he=function(e){return e.getParam("forced_root_block")},me=function(e){return e.getParam("forced_root_block_attrs")},fe=function(e){return e.getParam("paste_tab_spaces",4,"number")},ge=function(e){var t="jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp";return $.explode(e.getParam("images_file_types",t,"string"))},be="x-tinymce/html",Oe="\x3c!-- "+be+" --\x3e",ye=function(e){return Oe+e},je=function(e){return e.replace(Oe,"")},ve=function(e){return-1!==e.indexOf(Oe)},Ce=h(be),xe=Object.hasOwnProperty,Ee=function(e,t){return xe.call(e,t)},Te=tinymce.util.Tools.resolve("tinymce.html.Entities"),Se=function(e){return!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(e)},Ie=function(e){return e.replace(/\r?\n/g,"<br>")},we=function(e,t){var n=[],r="<"+e;if("object"==typeof t){for(var i in t)Ee(t,i)&&n.push(i+'="'+Te.encodeAllRaw(t[i])+'"');n.length&&(r+=" "+n.join(" "))}return r+">"},_e=function(e,t,n){var r=e.split(/\n\n/),i=we(t,n),o="</"+t+">",a=$.map(r,(function(e){return e.split(/\n/).join("<br />")})),s=function(e){return i+e+o};return 1===a.length?a[0]:$.map(a,s).join("")},Ne=function(e,t,n){return t?_e(e,!0===t?"p":t,n):Ie(e)},Ae=tinymce.util.Tools.resolve("tinymce.html.DomParser"),De=tinymce.util.Tools.resolve("tinymce.html.Serializer"),ke=" ",Pe=tinymce.util.Tools.resolve("tinymce.html.Node"),Re=tinymce.util.Tools.resolve("tinymce.html.Schema"),Fe=function(e){return e.constructor===RegExp},Le=function(e,t){$.each(t,(function(t){e=Fe(t)?e.replace(t,""):e.replace(t[0],t[1])}));return e},Me=function(e){var t=Re(),n=Ae({},t),r="",i=t.getShortEndedElements(),o=$.makeMap("script noscript style textarea video audio iframe object"," "),a=t.getBlockElements(),s=function(e){var t=e.name,n=e;if("br"!==t){if("wbr"!==t){i[t]&&(r+=" ");if(o[t])r+=" ";else{3===e.type&&(r+=e.value);if(!e.shortEnded&&(e=e.firstChild))do{s(e)}while(e=e.next);if(a[t]&&n.next){r+="\n";"p"===t&&(r+="\n")}}}}else r+="\n"};e=Le(e,[/<!\[[^\]]+\]>/g]);s(n.parse(e));return r},Be=function(e){return e=Le(e,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/gi,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,function(e,t,n){return t||n?ke:" "}],/<br class="Apple-interchange-newline">/g,/<br>$/i])},Ue=function(e){var t=e.toLowerCase(),n={jpg:"jpeg",jpe:"jpeg",jfi:"jpeg",jif:"jpeg",jfif:"jpeg",pjpeg:"jpeg",pjp:"jpeg",svg:"svg+xml"};return $.hasOwn(n,t)?"image/"+n[t]:"image/"+t},Ve=function(e){return/<font face="Times New Roman"|class="?Mso|style="[^"]*\bmso-|style='[^']*\bmso-|w:WordDocument/i.test(e)||/class="OutlineElement/.test(e)||/id="?docs\-internal\-guid\-/.test(e)},He=function(e){var t=!1,n=[/^[IVXLMCD]+\.[ \u00a0]/,/^[ivxlmcd]+\.[ \u00a0]/,/^[a-z]{1,2}[\.\)][ \u00a0]/,/^[A-Z]{1,2}[\.\)][ \u00a0]/,/^[0-9]+\.[ \u00a0]/,/^[\u3007\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d]+\.[ \u00a0]/,/^[\u58f1\u5f10\u53c2\u56db\u4f0d\u516d\u4e03\u516b\u4e5d\u62fe]+\.[ \u00a0]/];e=e.replace(/^[\u00a0 ]+/,"");$.each(n,(function(n){if(n.test(e)){t=!0;return!1}}));return t},qe=function(e){return/^[\s\u00a0]*[\u2022\u00b7\u00a7\u25CF]\s*/.test(e)},Ge=function(e){for(var t,n,r=1,i=function(e){var t="";if(3===e.type)return e.value;if(e=e.firstChild)do{t+=i(e)}while(e=e.next);return t},o=function(e,t){if(3===e.type&&t.test(e.value)){e.value=e.value.replace(t,"");return!1}if(e=e.firstChild)do{if(!o(e,t))return!1}while(e=e.next);return!0},a=function(e){if(e._listIgnore)e.remove();else if(e=e.firstChild)do{a(e)}while(e=e.next)},s=function(e,i,s){var c=e._listLevel||r;if(c!==r)if(c<r)t&&(t=t.parent.parent);else{n=t;t=null}if(t&&t.name===i)t.append(e);else{n=n||t;t=new Pe(i,1);s>1&&t.attr("start",""+s);e.wrap(t)}e.name="li";c>r&&n&&n.lastChild.append(t);r=c;a(e);o(e,/^\u00a0+/);o(e,/^\s*([\u2022\u00b7\u00a7\u25CF]|\w+\.)/);o(e,/^\u00a0+/)},c=[],l=e.firstChild;null!=l;){c.push(l);if(null!==(l=l.walk()))for(;void 0!==l&&l.parent!==e;)l=l.walk()}for(var u=0;u<c.length;u++)if("p"===(e=c[u]).name&&e.firstChild){var d=i(e);if(qe(d)){s(e,"ul");continue}if(He(d)){var p=/([0-9]+)\./.exec(d),h=1;p&&(h=parseInt(p[1],10));s(e,"ol",h);continue}if(e._listLevel){s(e,"ul",1);continue}t=null}else{n=t;t=null}},We=function(e,t,n,r){var i={},o=e.dom.parseStyle(r);$.each(o,(function(o,a){switch(a){case"mso-list":var s=/\w+ \w+([0-9]+)/i.exec(r);s&&(n._listLevel=parseInt(s[1],10));if(/Ignore/i.test(o)&&n.firstChild){n._listIgnore=!0;n.firstChild._listIgnore=!0}break;case"horiz-align":a="text-align";break;case"vert-align":a="vertical-align";break;case"font-color":case"mso-foreground":a="color";break;case"mso-background":case"mso-highlight":a="background";break;case"font-weight":case"font-style":"normal"!==o&&(i[a]=o);return;case"mso-element":if(/^(comment|comment-list)$/i.test(o)){n.remove();return}}0!==a.indexOf("mso-comment")?0!==a.indexOf("mso-")&&("all"===ie(e)||t&&t[a])&&(i[a]=o):n.remove()}));if(/(bold)/i.test(i["font-weight"])){delete i["font-weight"];n.wrap(new Pe("b",1))}if(/(italic)/i.test(i["font-style"])){delete i["font-style"];n.wrap(new Pe("i",1))}var a=e.dom.serializeStyle(i,n.name);return a||null},ze=function(e,t){var n,r=ie(e);r&&(n=$.makeMap(r.split(/[, ]/)));t=Le(t,[/<br class="?Apple-interchange-newline"?>/gi,/<b[^>]+id="?docs-internal-[^>]*>/gi,/<!--[\s\S]+?-->/gi,/<(!|script[^>]*>.*?<\/script(?=[>\s])|\/?(\?xml(:\w+)?|img|meta|link|style|\w:\w+)(?=[\s\/>]))[^>]*>/gi,[/<(\/?)s>/gi,"<$1strike>"],[/&nbsp;/gi,ke],[/<span\s+style\s*=\s*"\s*mso-spacerun\s*:\s*yes\s*;?\s*"\s*>([\s\u00a0]*)<\/span>/gi,function(e,t){return t.length>0?t.replace(/./," ").slice(Math.floor(t.length/2)).split("").join(ke):""}]]);var i=oe(e),o=Re({valid_elements:i,valid_children:"-li[p]"});$.each(o.elements,(function(e){if(!e.attributes.class){e.attributes.class={};e.attributesOrder.push("class")}if(!e.attributes.style){e.attributes.style={};e.attributesOrder.push("style")}}));var a=Ae({},o);a.addAttributeFilter("style",(function(t){for(var r,i=t.length;i--;){(r=t[i]).attr("style",We(e,n,r,r.attr("style")));"span"===r.name&&r.parent&&!r.attributes.length&&r.unwrap()}}));a.addAttributeFilter("class",(function(e){for(var t,n,r=e.length;r--;){n=(t=e[r]).attr("class");/^(MsoCommentReference|MsoCommentText|msoDel)$/i.test(n)&&t.remove();t.attr("class",null)}}));a.addNodeFilter("del",(function(e){for(var t=e.length;t--;)e[t].remove()}));a.addNodeFilter("a",(function(e){for(var t,n,r,i=e.length;i--;){n=(t=e[i]).attr("href");r=t.attr("name");if(n&&-1!==n.indexOf("#_msocom_"))t.remove();else{n&&0===n.indexOf("file://")&&(n=n.split("#")[1])&&(n="#"+n);if(n||r){if(r&&!/^_?(?:toc|edn|ftn)/i.test(r)){t.unwrap();continue}t.attr({href:n,name:r})}else t.unwrap()}}}));var s=a.parse(t);ae(e)&&Ge(s);return t=De({validate:ce(e)},o).serialize(s)},$e=function(e,t){return se(e)?ze(e,t):t},Ke=function(e,t){var n=Ae({},e.schema);n.addNodeFilter("meta",(function(e){$.each(e,(function(e){e.remove()}))}));var r=n.parse(t,{forced_root_block:!1,isRootContent:!0});return De({validate:ce(e)},e.schema).serialize(r)},Ye=function(e,t){return{content:e,cancelled:t}},Xe=function(e,t,n,r){var i=e.dom.create("div",{style:"display:none"},t),o=G(e,i,n,r);return Ye(o.node.innerHTML,o.isDefaultPrevented())},Je=function(e,t,n,r){var i=q(e,t,n,r),o=Ke(e,i.content);return e.hasEventListeners("PastePostProcess")&&!i.isDefaultPrevented()?Xe(e,o,n,r):Ye(o,i.isDefaultPrevented())},Qe=function(e,t,n){var r=Ve(t),i=r?$e(e,t):t;return Je(e,i,n,r)},Ze=function(e,t){e.insertContent(t,{merge:te(e),paste:!0});return!0},et=function(e){return/^https?:\/\/[\w\-\/+=.,!;:&%@^~(){}?#]+$/i.test(e)},tt=function(e,t){return et(t)&&E(ge(e),(function(e){return L(t.toLowerCase(),"."+e.toLowerCase())}))},nt=function(e,t,n){e.undoManager.extra((function(){n(e,t)}),(function(){e.insertContent('<img src="'+t+'">')}));return!0},rt=function(e,t,n){e.undoManager.extra((function(){n(e,t)}),(function(){e.execCommand("mceInsertLink",!1,t)}));return!0},it=function(e,t,n){return!(!1!==e.selection.isCollapsed()||!et(t))&&rt(e,t,n)},ot=function(e,t,n){return!!tt(e,t)&&nt(e,t,n)},at=function(e,t){$.each([it,ot,Ze],(function(n){return!0!==n(e,t,Ze)}))},st=function(e,t,n){n||!1===ne(e)?Ze(e,t):at(e,t)},ct=function(e){return-1!==" \f\t\v".indexOf(e)},lt=function(e){return"\n"===e||"\r"===e},ut=function(e,t){return t<e.length&&t>=0&&lt(e[t])},dt=function(e,t){var n=M(" ",fe(e)),r=t.replace(/\t/g,n);return w(r,(function(e,t){return ct(t)||t===ke?e.pcIsSpace||""===e.str||e.str.length===r.length-1||ut(r,e.str.length+1)?{pcIsSpace:!1,str:e.str+ke}:{pcIsSpace:!0,str:e.str+" "}:{pcIsSpace:lt(t),str:e.str+t}}),{pcIsSpace:!1,str:""}).str},pt=function(e,t,n,r){var i=Qe(e,t,n);!1===i.cancelled&&st(e,i.content,r)},ht=function(e,t,n){var r=n||ve(t);pt(e,je(t),r,!1)},mt=function(e,t){var n=e.dom.encode(t).replace(/\r\n/g,"\n"),r=dt(e,n),i=Ne(r,he(e),me(e));pt(e,i,!1,!0)},ft=function(e){var t={},n="data:text/mce-internal,";if(e){if(e.getData){var r=e.getData("Text");r&&r.length>0&&-1===r.indexOf(n)&&(t["text/plain"]=r)}if(e.types)for(var i=0;i<e.types.length;i++){var o=e.types[i];try{t[o]=e.getData(o)}catch(e){t[o]=""}}}return t},gt=function(e,t){return ft(t.clipboardData||e.getDoc().dataTransfer)},bt=function(e,t){return t in e&&e[t].length>0},Ot=function(e){return bt(e,"text/html")||bt(e,"text/plain")},yt=function(e){var t=/data:([^;]+);base64,([a-z0-9\+\/=]+)/i.exec(e);return t?{type:t[1],data:decodeURIComponent(t[2])}:{type:null,data:null}},jt=function(e,t){var n=de(e);return!n||n(t)},vt=function(e,t){var n=t.match(/([\s\S]+?)(?:\.[a-z0-9.]+)$/i);return u(n)?e.dom.encode(n[1]):null},Ct=function(e){var t=0;return function(){return e+t++}}("mceclip"),xt=function(e,t){var n=yt(t.uri),r=n.data,i=n.type,o=Ct(),a=t.blob,s=new Image;s.src=t.uri;if(jt(e,s)){var c=e.editorUpload.blobCache,l=void 0,d=c.getByData(r,i);if(d)l=d;else{var p=pe(e)&&u(a.name),h=p?vt(e,a.name):o,m=p?a.name:void 0;l=c.create(o,a,r,h,m);c.add(l)}ht(e,'<img src="'+l.blobUri()+'">',!1)}else ht(e,'<img src="'+t.uri+'">',!1)},Et=function(e){return"paste"===e.type},Tt=function(e){return u(e.getAsFile)},St=function(e){return V.all(T(e,(function(e){return new V((function(t){var n=Tt(e)?e.getAsFile():e,r=new window.FileReader;r.onload=function(){t({blob:n,uri:r.result})};r.readAsDataURL(n)}))})))},It=function(e){var t=ge(e);return function(e){return F(e.type,"image/")&&E(t,(function(t){return Ue(t)===e.type}))}},wt=function(e,t){var n=t.items?N(A(t.items),(function(e){return"file"===e.kind?[e.getAsFile()]:[]})):[],r=t.files?A(t.files):[];return I(n.length>0?n:r,It(e))},_t=function(e,t,n){var r=Et(t)?t.clipboardData:t.dataTransfer;if(ue(e)&&r){var i=wt(e,r);if(i.length>0){t.preventDefault();St(i).then((function(t){n&&e.selection.setRng(n);S(t,(function(t){xt(e,t)}))}));return!0}}return!1},Nt=function(e){var t=e.clipboardData;return-1!==navigator.userAgent.indexOf("Android")&&t&&t.items&&0===t.items.length},At=function(e){return H.metaKeyPressed(e)&&86===e.keyCode||e.shiftKey&&45===e.keyCode},Dt=function(e,t,n){var r,i=P(),o=P();e.on("keyup",o.clear);e.on("keydown",(function(n){var a=function(e){At(e)&&!e.isDefaultPrevented()&&t.remove()};if(At(n)&&!n.isDefaultPrevented()){if((r=n.shiftKey&&86===n.keyCode)&&B.webkit&&-1!==navigator.userAgent.indexOf("Version/"))return;n.stopImmediatePropagation();i.set(n);o.set(!0);if(B.ie&&r){n.preventDefault();z(e,!0);return}t.remove();t.create();e.once("keyup",a);e.once("paste",(function(){e.off("keyup",a)}))}}));var a=function(e,n,r,i,o){var a;if(bt(n,"text/html"))a=n["text/html"];else{a=t.getHtml();o=o||ve(a);t.isDefaultContent(a)&&(i=!0)}a=Be(a);t.remove();var s=!1===o&&Se(a),c=et(a);(!a.length||s&&!c)&&(i=!0);(i||c)&&(a=bt(n,"text/plain")&&s?n["text/plain"]:Me(a));t.isDefaultContent(a)?r||e.windowManager.alert("Please use Ctrl+V/Cmd+V keyboard shortcuts to paste contents."):i?mt(e,a):ht(e,a,o)},s=function(){return t.getLastRng()||e.selection.getRng()};e.on("paste",(function(c){var l=i.isSet()||o.isSet();l&&i.clear();var u=gt(e,c),d="text"===n.get()||r,p=bt(u,Ce());r=!1;if(c.isDefaultPrevented()||Nt(c))t.remove();else if(Ot(u)||!_t(e,c,s())){l||c.preventDefault();if(B.ie&&(!l||c.ieFake)&&!bt(u,"text/html")){t.create();e.dom.bind(t.getEl(),"paste",(function(e){e.stopPropagation()}));e.getDoc().execCommand("Paste",!1,null);u["text/html"]=t.getHtml()}if(bt(u,"text/html")){c.preventDefault();p||(p=ve(u["text/html"]));a(e,u,l,d,p)}else U.setEditorTimeout(e,(function(){a(e,u,l,d,p)}),0)}else t.remove()}))},kt=function(e,t,n){Dt(e,t,n);var r;e.parser.addNodeFilter("img",(function(t,n,i){var o=function(e){return e.data&&!0===e.data.paste},a=function(e){e.attr("data-mce-object")||r===B.transparentSrc||e.remove()},s=function(e){return 0===e.indexOf("webkit-fake-url")},c=function(e){return 0===e.indexOf("data:")};if(!ue(e)&&o(i))for(var l=t.length;l--;)(r=t[l].attr("src"))&&(s(r)||!le(e)&&c(r))&&a(t[l])}))},Pt=function(e){return B.ie&&e.inline?document.body:e.getBody()},Rt=function(e){return Pt(e)!==e.getBody()},Ft=function(e,t,n){Rt(e)&&e.dom.bind(t,"paste keyup",(function(t){qt(e,n)||e.fire("paste")}))},Lt=function(e,t,n){var r=e.dom,i=e.getBody();t.set(e.selection.getRng());var o=e.dom.add(Pt(e),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},n);(B.ie||B.gecko)&&r.setStyle(o,"left","rtl"===r.getStyle(i,"direction",!0)?65535:-65535);r.bind(o,"beforedeactivate focusin focusout",(function(e){e.stopPropagation()}));Ft(e,o,n);o.focus();e.selection.select(o,!0)},Mt=function(e,t){if(Bt(e)){for(var n=void 0,r=t.get();n=e.dom.get("mcepastebin");){e.dom.remove(n);e.dom.unbind(n)}r&&e.selection.setRng(r)}t.set(null)},Bt=function(e){return e.dom.get("mcepastebin")},Ut=function(e){var t=function(t,n){t.appendChild(n);e.dom.remove(n,!0)},n=$.grep(Pt(e).childNodes,(function(e){return"mcepastebin"===e.id})),r=n.shift();$.each(n,(function(e){t(r,e)}));for(var i=e.dom.select("div[id=mcepastebin]",r),o=i.length-1;o>=0;o--){var a=e.dom.create("div");r.insertBefore(a,i[o]);t(a,i[o])}return r?r.innerHTML:""},Vt=function(e,t){return t===e},Ht=function(e){return e&&"mcepastebin"===e.id},qt=function(e,t){var n=Bt(e);return Ht(n)&&Vt(t,n.innerHTML)},Gt=function(e){var t=n(null),r="%MCEPASTEBIN%";return{create:function(){return Lt(e,t,r)},remove:function(){return Mt(e,t)},getEl:function(){return Bt(e)},getHtml:function(){return Ut(e)},getLastRng:t.get,isDefault:function(){return qt(e,r)},isDefaultContent:function(e){return Vt(r,e)}}},Wt=function(e,t){var n=Gt(e);e.on("PreInit",(function(){return kt(e,n,t)}));return{pasteFormat:t,pasteHtml:function(t,n){return ht(e,t,n)},pasteText:function(t){return mt(e,t)},pasteImageData:function(t,n){return _t(e,t,n)},getDataTransferItems:ft,hasHtmlOrText:Ot,hasContentType:bt}},zt=function(e,t){if("text"===t.pasteFormat.get()){t.pasteFormat.set("html");W(e,!1)}else{t.pasteFormat.set("text");W(e,!0)}e.focus()},$t=function(e,t){e.addCommand("mceTogglePlainTextPaste",(function(){zt(e,t)}));e.addCommand("mceInsertClipboardContent",(function(e,n){n.content&&t.pasteHtml(n.content,n.internal);n.text&&t.pasteText(n.text)}))},Kt=function(e){return!1===B.iOS&&"function"==typeof(null==e?void 0:e.setData)},Yt=function(e,t,n){if(!Kt(e))return!1;try{e.clearData();e.setData("text/html",t);e.setData("text/plain",n);e.setData(Ce(),t);return!0}catch(e){return!1}},Xt=function(e,t,n,r){if(Yt(e.clipboardData,t.html,t.text)){e.preventDefault();r()}else n(t.html,r)},Jt=function(e){return function(t,n){var r=ye(t),i=e.dom.create("div",{contenteditable:"false","data-mce-bogus":"all"}),o=e.dom.create("div",{contenteditable:"true"},r);e.dom.setStyles(i,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"});i.appendChild(o);e.dom.add(e.getBody(),i);var a=e.selection.getRng();o.focus();var s=e.dom.createRng();s.selectNodeContents(o);e.selection.setRng(s);U.setTimeout((function(){e.selection.setRng(a);i.parentNode.removeChild(i);n()}),0)}},Qt=function(e){return{html:e.selection.getContent({contextual:!0}),text:e.selection.getContent({format:"text"})}},Zt=function(e){return!!e.dom.getParent(e.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",e.getBody())},en=function(e){return!e.selection.isCollapsed()||Zt(e)},tn=function(e){return function(t){en(e)&&Xt(t,Qt(e),Jt(e),(function(){if(B.browser.isChrome()||B.browser.isFirefox()){var t=e.selection.getRng();U.setEditorTimeout(e,(function(){e.selection.setRng(t);e.execCommand("Delete")}),0)}else e.execCommand("Delete")}))}},nn=function(e){return function(t){en(e)&&Xt(t,Qt(e),Jt(e),p)}},rn=function(e){e.on("cut",tn(e));e.on("copy",nn(e))},on=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),an=function(e,t){return on.getCaretRangeFromPoint(t.clientX,t.clientY,e.getDoc())},sn=function(e){var t=e["text/plain"];return!!t&&0===t.indexOf("file://")},cn=function(e,t){e.focus();e.selection.setRng(t)},ln=function(e,t,n){K(e)&&e.on("dragend dragover draggesture dragdrop drop drag",(function(e){e.preventDefault();e.stopPropagation()}));Y(e)||e.on("drop",(function(e){var t=e.dataTransfer;t&&t.files&&t.files.length>0&&e.preventDefault()}));e.on("drop",(function(r){var i=an(e,r);if(!r.isDefaultPrevented()&&!n.get()){var o=t.getDataTransferItems(r.dataTransfer),a=t.hasContentType(o,Ce());if((t.hasHtmlOrText(o)&&!sn(o)||!t.pasteImageData(r,i))&&i&&X(e)){var s=o["mce-internal"]||o["text/html"]||o["text/plain"];if(s){r.preventDefault();U.setEditorTimeout(e,(function(){e.undoManager.transact((function(){o["mce-internal"]&&e.execCommand("Delete");cn(e,i);s=Be(s);o["text/html"]?t.pasteHtml(s,a):t.pasteText(s)}))}))}}}}));e.on("dragstart",(function(e){n.set(!0)}));e.on("dragover dragend",(function(t){if(Y(e)&&!1===n.get()){t.preventDefault();cn(e,an(e,t))}"dragend"===t.type&&n.set(!1)}))},un=function(e){var t=e.plugins.paste,n=J(e);n&&e.on("PastePreProcess",(function(e){n.call(t,t,e)}));var r=Q(e);r&&e.on("PastePostProcess",(function(e){r.call(t,t,e)}))},dn=function(e,t){e.on("PastePreProcess",(function(n){n.content=t(e,n.content,n.internal,n.wordContent)}))},pn=function(e,t){e.on("PastePostProcess",(function(n){t(e,n.node)}))},hn=function(e,t){if(!Ve(t))return t;var n=[];$.each(e.schema.getBlockElements(),(function(e,t){n.push(t)}));var r=new RegExp("(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*(<\\/?("+n.join("|")+")[^>]*>)(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*","g");t=Le(t,[[r,"$1"]]);return t=Le(t,[[/<br><br>/g,"<BR><BR>"],[/<br>/g," "],[/<BR><BR>/g,"<br>"]])},mn=function(e,t,n,r){if(r||n)return t;var i,o=Z(e);if(!1===ee(e)||"all"===o)return t;o&&(i=o.split(/[, ]/));if(i){var a=e.dom,s=e.selection.getNode();t=t.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,(function(e,t,n,r){var o=a.parseStyle(a.decode(n)),c={};if("none"===i)return t+r;for(var l=0;l<i.length;l++){var u=o[i[l]],d=a.getStyle(s,i[l],!0);if(/color/.test(i[l])){u=a.toHex(u);d=a.toHex(d)}d!==u&&(c[i[l]]=u)}var p=a.serializeStyle(c,"span");return p?t+' style="'+p+'"'+r:t+r}))}else t=t.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return t=t.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,(function(e,t,n,r){return t+' style="'+n+'"'+r}))},fn=function(e,t){e.$("a",t).find("font,u").each((function(t,n){e.dom.remove(n,!0)}))},gn=function(e){B.webkit&&dn(e,mn);if(B.ie){dn(e,hn);pn(e,fn)}},bn=function(e,t){return function(n){n.setActive("text"===t.pasteFormat.get());var r=function(e){return n.setActive(e.state)};e.on("PastePlainTextToggle",r);return function(){return e.off("PastePlainTextToggle",r)}}},On=function(e,t){var n=function(){return e.execCommand("mceTogglePlainTextPaste")};e.ui.registry.addToggleButton("pastetext",{active:!1,icon:"paste-text",tooltip:"Paste as text",onAction:n,onSetup:bn(e,t)});e.ui.registry.addToggleMenuItem("pastetext",{text:"Paste as text",icon:"paste-text",onAction:n,onSetup:bn(e,t)})};function yn(){r.add("paste",(function(e){if(!1===i(e)){var t=n(!1),r=n(re(e)?"text":"html"),a=Wt(e,r);gn(e);On(e,a);$t(e,a);un(e);rn(e);ln(e,a,t);return o(a)}}))}yn()}()},function(e,t,n){n(1231)},function(e,t){!function(){"use strict";var e=function(e){var t=e;return{get:function(){return t},set:function(e){t=e}}},t=Object.hasOwnProperty,n=function(e,n){return t.call(e,n)},r=tinymce.util.Tools.resolve("tinymce.PluginManager"),i=tinymce.util.Tools.resolve("tinymce.Env"),o=tinymce.util.Tools.resolve("tinymce.util.Delay"),a=function(e){return e.fire("ResizeEditor")},s=function(e){return e.getParam("min_height",e.getElement().offsetHeight,"number")},c=function(e){return e.getParam("max_height",0,"number")},l=function(e){return e.getParam("autoresize_overflow_padding",1,"number")},u=function(e){return e.getParam("autoresize_bottom_margin",50,"number")},d=function(e){return e.getParam("autoresize_on_init",!0,"boolean")},p=function(e){return e.plugins.fullscreen&&e.plugins.fullscreen.isFullscreen()},h=function(e,t,n,r,i){o.setEditorTimeout(e,(function(){b(e,t);n--?h(e,t,n,r,i):i&&i()}),r)},m=function(e,t){var n=e.getBody();if(n){n.style.overflowY=t?"":"hidden";t||(n.scrollTop=0)}},f=function(e,t,n,r){var i=parseInt(e.getStyle(t,n,r),10);return isNaN(i)?0:i},g=function(e){if("setcontent"===(null==e?void 0:e.type.toLowerCase())){var t=e;return!0===t.selection||!0===t.paste}return!1},b=function(e,t,n){var r=e.dom,o=e.getDoc();if(o)if(p(e))m(e,!0);else{var l=o.documentElement,d=u(e),h=s(e),O=f(r,l,"margin-top",!0),y=f(r,l,"margin-bottom",!0),j=l.offsetHeight+O+y+d;j<0&&(j=0);var v=e.getContainer().offsetHeight-e.getContentAreaContainer().offsetHeight;j+v>s(e)&&(h=j+v);var C=c(e);if(C&&h>C){h=C;m(e,!0)}else m(e,!1);if(h!==t.get()){var x=h-t.get();r.setStyle(e.getContainer(),"height",h+"px");t.set(h);a(e);if(i.browser.isSafari()&&i.mac){var E=e.getWin();E.scrollTo(E.pageXOffset,E.pageYOffset)}e.hasFocus()&&g(n)&&e.selection.scrollIntoView();i.webkit&&x<0&&b(e,t,n)}}},O=function(e,t){e.on("init",(function(){var t=l(e),n=e.dom;n.setStyles(e.getDoc().documentElement,{height:"auto"});n.setStyles(e.getBody(),{paddingLeft:t,paddingRight:t,"min-height":0})}));e.on("NodeChange SetContent keyup FullscreenStateChanged ResizeContent",(function(n){b(e,t,n)}));d(e)&&e.on("init",(function(){h(e,t,20,100,(function(){h(e,t,5,1e3)}))}))},y=function(e,t){e.addCommand("mceAutoResize",(function(){b(e,t)}))};function j(){r.add("autoresize",(function(t){n(t.settings,"resize")||(t.settings.resize=!1);if(!t.inline){var r=e(0);y(t,r);O(t,r)}}))}j()}()},function(e,t,n){"use strict";n.d(t,"f",(function(){return i}));n.d(t,"c",(function(){return a}));n.d(t,"d",(function(){return s}));n.d(t,"b",(function(){return c}));n.d(t,"a",(function(){return l}));n.d(t,"g",(function(){return u}));n.d(t,"e",(function(){return d}));const r={};function i(e){const t=(new DOMParser).parseFromString(e,"text/html");if(t.head&&t.head.childNodes.length){const e=document.createDocumentFragment(),n=t.head.querySelectorAll("script");Array.from(n).forEach(t=>{e.appendChild(t)});t.body.firstChild?t.body.insertBefore(e,t.body.firstChild):t.body.appendChild(e)}Array.from(t.childNodes).reverse().forEach(e=>{8===e.nodeType&&t.body.insertBefore(e,t.body.firstChild)});return t}function o(e){return e.body?e.body.innerHTML:""}function a(e,t){const n=i(e);if(!n.body)return"";t.forEach(e=>{e(n)});return o(n)}function s(e){r[e.id]||(r[e.id]={preProcess:[],postProcess:[]});return r[e.id]}function c(e,t){s(e).preProcess.push(t)}function l(e,t){s(e).postProcess.push(t)}const u=(e,t)=>{Array.from(e).forEach(e=>{if(e.parentNode){const n=t(e);if(n instanceof NodeList){Array.from(n).forEach(t=>{e.parentNode.insertBefore(t,e)});e.parentNode.removeChild(e)}else e.parentNode.replaceChild(n,e)}})};function d(e){return()=>{delete r[e.id]}}},function(e,t,n){"use strict";n.d(t,"b",(function(){return r}));n.d(t,"a",(function(){return i}));n.d(t,"h",(function(){return o}));n.d(t,"e",(function(){return a}));n.d(t,"i",(function(){return s}));n.d(t,"f",(function(){return l}));n.d(t,"g",(function(){return u}));n.d(t,"j",(function(){return d}));n.d(t,"c",(function(){return p}));n.d(t,"d",(function(){return h}));const r="data-mce-bogus",i=`<br ${r}="1">`,o=(e,t)=>{if(!e||!t)return!1;if(e===t)return!0;do{if(e===t)return!0;e=e.parentElement}while(e);return!1},a=e=>{const t=[];function n(e){[...e.childNodes].forEach(e=>{t.push(e);e.childNodes.length&&n(e)})}e.childNodes.length&&n(e);return t},s=e=>e&&"P"===e.nodeName&&1===e.childElementCount&&e.firstElementChild&&"BR"===e.firstElementChild.nodeName,c=e=>e&&!e.hasChildNodes(),l=e=>{let t=e;for(;!c(t);){if(e.childElementCount>1)return null;t=t.firstChild}return t},u=(e,t)=>{const n=l(e);n&&n.appendChild(t)},d=(e,t)=>{const n=l(e);n&&n.parentNode&&n.parentNode.replaceChild(t,n)},p=(e,t)=>{let n="";e.undoManager.ignore(()=>{const r=t.cloneRange(),i=document.createTextNode("<<"),o=document.createTextNode(">>");r.insertNode(i);r.collapse(!1);r.insertNode(o);n=e.getContent({format:"text"});i.remove();o.remove();t.commonAncestorContainer.normalize()});return n},h=(e,t)=>p(e,t).replace(/<<(.*)>>/g,"<<>>")},function(e,t,n){"use strict";n.d(t,"b",(function(){return r}));n.d(t,"a",(function(){return i}));n.d(t,"c",(function(){return o}));const r="hsPasteImageIdentifier",i="hsPasteHrIdentifier",o="<meta source='HubSpot-TinyMCE'>"},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));const r=e=>{const t=document.implementation.createHTMLDocument("");t.documentElement.innerHTML=e;return t};function i(e){let t;if("undefined"!=typeof DOMParser){t=(new DOMParser).parseFromString(`<html><body>${e}</body></html>`,"text/html");null!==t&&null!==t.body||(t=r(e))}else t=r(e);return t.body}},function(e,t,n){"use strict";n.d(t,"e",(function(){return i}));n.d(t,"f",(function(){return o}));n.d(t,"d",(function(){return a}));n.d(t,"b",(function(){return s}));n.d(t,"g",(function(){return c}));n.d(t,"c",(function(){return l}));n.d(t,"a",(function(){return u}));var r=n(1215);const i=e=>{const t=document.activeElement;e();t&&t.focus()},o=e=>{if("string"==typeof e)return e;if("object"!=typeof e)return"";let t="";Object.keys(e).forEach(n=>{t+=`${n}: ${e[n]}; `});return t.trim()},a=e=>{if("object"==typeof e)return e;if("string"!=typeof e)return{};const t={};e.split(";").forEach(e=>{const[n,r]=e.split(":");n&&r&&(t[n.trim()]=r.trim())});return t},s={"font-size":e=>{const t=parseFloat(e);return e.includes("pt")?Math.ceil(t)+"px":e}},c=(e,t)=>Object.keys(e).reduce((n,r)=>{Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r](e[r]));return n},e),l=Object(r.b)((e,t)=>{Array.prototype.forEach.call(t,e)}),u=e=>{if("SPAN"===e.nodeName&&0===e.style.length){const t=e.parentNode,n=e.nextSibling;if(!t)return;t.removeChild(e);l(e=>{null===n?t.appendChild(e):t.insertBefore(e,n)},Array.from(e.childNodes))}}},function(e,t,n){"use strict";n.d(t,"ab",(function(){return i}));n.d(t,"K",(function(){return o}));n.d(t,"gb",(function(){return a}));n.d(t,"x",(function(){return s}));n.d(t,"b",(function(){return c}));n.d(t,"c",(function(){return l}));n.d(t,"g",(function(){return u}));n.d(t,"f",(function(){return d}));n.d(t,"h",(function(){return p}));n.d(t,"d",(function(){return h}));n.d(t,"C",(function(){return m}));n.d(t,"L",(function(){return f}));n.d(t,"M",(function(){return g}));n.d(t,"P",(function(){return b}));n.d(t,"z",(function(){return O}));n.d(t,"fb",(function(){return y}));n.d(t,"W",(function(){return j}));n.d(t,"F",(function(){return v}));n.d(t,"lb",(function(){return C}));n.d(t,"u",(function(){return x}));n.d(t,"X",(function(){return E}));n.d(t,"N",(function(){return T}));n.d(t,"y",(function(){return S}));n.d(t,"eb",(function(){return I}));n.d(t,"I",(function(){return w}));n.d(t,"v",(function(){return _}));n.d(t,"Q",(function(){return N}));n.d(t,"bb",(function(){return A}));n.d(t,"A",(function(){return D}));n.d(t,"V",(function(){return k}));n.d(t,"ib",(function(){return P}));n.d(t,"e",(function(){return R}));n.d(t,"a",(function(){return F}));n.d(t,"Y",(function(){return L}));n.d(t,"G",(function(){return M}));n.d(t,"cb",(function(){return B}));n.d(t,"R",(function(){return U}));n.d(t,"T",(function(){return V}));n.d(t,"B",(function(){return H}));n.d(t,"U",(function(){return G}));n.d(t,"E",(function(){return W}));n.d(t,"t",(function(){return z}));n.d(t,"r",(function(){return $}));n.d(t,"kb",(function(){return K}));n.d(t,"Z",(function(){return Y}));n.d(t,"jb",(function(){return X}));n.d(t,"hb",(function(){return J}));n.d(t,"H",(function(){return Q}));n.d(t,"s",(function(){return Z}));n.d(t,"O",(function(){return ee}));n.d(t,"S",(function(){return te}));n.d(t,"db",(function(){return ne}));n.d(t,"w",(function(){return re}));n.d(t,"J",(function(){return ie}));n.d(t,"k",(function(){return oe}));n.d(t,"o",(function(){return ae}));n.d(t,"n",(function(){return se}));n.d(t,"l",(function(){return ce}));n.d(t,"p",(function(){return le}));n.d(t,"m",(function(){return ue}));n.d(t,"q",(function(){return de}));n.d(t,"j",(function(){return pe}));n.d(t,"i",(function(){return he}));n.d(t,"D",(function(){return me}));var r=n(1238);const i=r.U,o=r.D,a=r.ab,s=r.q,c=r.c,l="automatic-image-upload-not-allowed",u=r.h,d=r.g,p=r.j,h=r.e,m=r.v,f=r.E,g=r.F,b=r.H,O=r.s,y="personalization-token-casing",j=r.Q,v=r.y,C=r.fb,x=r.n,E=r.R,T=r.G,S=r.r,I=r.Y,w=r.B,_=r.o,N=r.I,A=r.V,D=r.t,k=r.P,P=r.cb,R=r.f,F=r.b,L=r.S,M=r.z,B=r.W,U=r.J,V=r.L,H=r.u,q=r.Z,G=r.M,W=r.w,z=r.l,$=r.k,K=r.eb,Y=(r.x,r.m,r.T),X=r.db,J=r.bb,Q="insert-horizontal-rule",Z="drag-read-more",ee="insert-nonbreaking-space",te=r.K,ne=r.X,re=(r.A,r.a,r.d,r.p),ie=r.C,oe="inlineEditInteraction",ae="slash-command",se="selection-command",ce="menu-open",le="text-selected",ue="menu-selection",de="tiny-mce-toolbar-menu-selection",pe="click-settings-link",he={bold:r.i,italic:r.i,underline:r.i,copy:"cut",cut:"copy",indent:"indent",insertunorderedlist:r.O,insertorderedlist:r.N,justifycenter:"align-center",justifyleft:"align-left",justifyright:"align-right",justifynone:"remove-alignment",mcehsmore:"insert-read-more",mcetoggleformat:r.i,outdent:"outdent",redo:"redo",removeformat:"remove-formatting",selectall:"select-all",undo:"undo"},me={pasteFromWord:"paste-from-word",paste:q,pastePreProcess:"pastePreProcess"}},function(e,t,n){"use strict";n.d(t,"U",(function(){return r}));n.d(t,"D",(function(){return i}));n.d(t,"ab",(function(){return o}));n.d(t,"q",(function(){return a}));n.d(t,"c",(function(){return s}));n.d(t,"i",(function(){return c}));n.d(t,"h",(function(){return l}));n.d(t,"g",(function(){return u}));n.d(t,"j",(function(){return d}));n.d(t,"e",(function(){return p}));n.d(t,"v",(function(){return h}));n.d(t,"O",(function(){return m}));n.d(t,"N",(function(){return f}));n.d(t,"E",(function(){return g}));n.d(t,"gb",(function(){return b}));n.d(t,"F",(function(){return O}));n.d(t,"H",(function(){return y}));n.d(t,"s",(function(){return j}));n.d(t,"Q",(function(){return v}));n.d(t,"y",(function(){return C}));n.d(t,"fb",(function(){return x}));n.d(t,"n",(function(){return E}));n.d(t,"R",(function(){return T}));n.d(t,"G",(function(){return S}));n.d(t,"r",(function(){return I}));n.d(t,"Y",(function(){return w}));n.d(t,"B",(function(){return _}));n.d(t,"o",(function(){return N}));n.d(t,"I",(function(){return A}));n.d(t,"V",(function(){return D}));n.d(t,"t",(function(){return k}));n.d(t,"eb",(function(){return P}));n.d(t,"P",(function(){return R}));n.d(t,"cb",(function(){return F}));n.d(t,"f",(function(){return L}));n.d(t,"b",(function(){return M}));n.d(t,"S",(function(){return B}));n.d(t,"z",(function(){return U}));n.d(t,"W",(function(){return V}));n.d(t,"J",(function(){return H}));n.d(t,"L",(function(){return q}));n.d(t,"u",(function(){return G}));n.d(t,"Z",(function(){return W}));n.d(t,"M",(function(){return z}));n.d(t,"w",(function(){return $}));n.d(t,"l",(function(){return K}));n.d(t,"k",(function(){return Y}));n.d(t,"x",(function(){return X}));n.d(t,"m",(function(){return J}));n.d(t,"T",(function(){return Q}));n.d(t,"db",(function(){return Z}));n.d(t,"bb",(function(){return ee}));n.d(t,"K",(function(){return te}));n.d(t,"X",(function(){return ne}));n.d(t,"A",(function(){return re}));n.d(t,"a",(function(){return ie}));n.d(t,"d",(function(){return oe}));n.d(t,"p",(function(){return ae}));n.d(t,"C",(function(){return se}));const r="open-image-picker",i="insert-image",o="replace-image",a="edit-image",s="automatic-image-upload",c="change-inline-style",l="change-font-size",u="change-font",d="change-line-height",p="change-block-format",h="escape-block-format",m="make-unordered-list",f="make-ordered-list",g="insert-link",b="update-link",O="insert-link-to-file",y="insert-personalization-token",j="edit-personalization-token",v="open-cta-picker",C="insert-cta",x="update-cta",E="edit-cta",T="open-embed-modal",S="insert-embed-code",I="edit-embed-code",w="open-video-picker",_="insert-hubspot-video",N="edit-hubspot-video",A="insert-rss-token",D="open-rss-token-popover",k="edit-source-code",P="toggle-visual-blocks",R="open-colorpicker-popover",F="reset-color-to-default",L="change-colorpicker-mode",M="change-color",B="open-emoji-picker-popover",U="insert-emoji",V="open-snippet-popover",H="insert-snippet",q="insert-table",G="edit-table",W="paste",z="insert-temp-anchor",$="insert-anchor",K="edit-anchor",Y="drag-drop-anchor",X="insert-callout",J="edit-callout",Q="open-find-replace",Z="show-replace",ee="replace-text-all",te="insert-special-character",ne="open-special-character-popover",re="insert-google-doc",ie="add-new-google-account",oe="cancel-google-doc",ae="edit-icon",se="insert-icon"},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));n.d(t,"b",(function(){return l}));var r=n(1240),i=n(1241);const o="rich-text";let a=null;const s=(e,t)=>{if(a)return a;a=e.clone({properties:{namespace:o,inApp:t||"unknown"}});return a},c=({usageTracker:e,appName:t,trackInteraction:n,inpage:r=!1})=>(i,o,a={})=>{const c="Edit"===i?"tinymceEdit":i;if(e){s(e,t).track(c,Object.assign({action:o,inline:r?"yes":"no"},a))}else n&&n(c,Object.assign({action:o,inline:r?"yes":"no",inApp:t||"unknown"},a))},l=(e,t,n,o={})=>{c({usageTracker:Object(i.f)(e,"usageTracker"),trackInteraction:Object(i.f)(e,"trackInteraction"),appName:Object(i.f)(e,"appName"),inpage:e.settings[r.a]})(t,n,o)}},function(e,t,n){"use strict";n.d(t,"b",(function(){return r}));n.d(t,"a",(function(){return i}));const r="hsPlugins",i="hsInpage"},function(e,t,n){"use strict";n.d(t,"g",(function(){return c}));n.d(t,"f",(function(){return u}));n.d(t,"b",(function(){return d}));n.d(t,"e",(function(){return p}));n.d(t,"d",(function(){return h}));n.d(t,"c",(function(){return m}));n.d(t,"a",(function(){return g}));n.d(t,"h",(function(){return b}));var r=n(1240),i=n(1242),o=n(1243),a=n(1244),s=n(1246);function c(e,t){return e.settings.plugins.includes(t)}function l(e){return e?e[r.b]:null}function u(e,t,n=null){const r=l(e.settings);return r&&void 0!==r[t]?r[t]:n}function d(e,t){const n=u(e,a.b);return!!n&&n[t]}function p(e,t){const n=u(e,o.a);return n?n[t]:null}function h(e,t,n=null){const r=l(e);return r&&r[s.f]&&r[s.f][t]?r[s.f][t]:n}function m(e){const t=e.settings?e.settings[r.b]:null;return t&&t[i.J]?t[i.J]:null}let f=0;function g(e,t){const n=e.getContainer();if(n){const e=document.createElement("div");e.id=t||"modal-container-"+ ++f;return n.appendChild(e)}return null}function b(e=""){return!e.trim()}},function(e,t,n){"use strict";n.d(t,"m",(function(){return r}));n.d(t,"w",(function(){return i}));n.d(t,"K",(function(){return o}));n.d(t,"v",(function(){return a}));n.d(t,"H",(function(){return s}));n.d(t,"y",(function(){return c}));n.d(t,"z",(function(){return l}));n.d(t,"A",(function(){return u}));n.d(t,"B",(function(){return d}));n.d(t,"J",(function(){return p}));n.d(t,"p",(function(){return h}));n.d(t,"u",(function(){return m}));n.d(t,"n",(function(){return f}));n.d(t,"o",(function(){return g}));n.d(t,"j",(function(){return b}));n.d(t,"k",(function(){return O}));n.d(t,"F",(function(){return y}));n.d(t,"D",(function(){return j}));n.d(t,"E",(function(){return v}));n.d(t,"P",(function(){return C}));n.d(t,"Q",(function(){return x}));n.d(t,"l",(function(){return E}));n.d(t,"L",(function(){return T}));n.d(t,"I",(function(){return S}));n.d(t,"q",(function(){return I}));n.d(t,"r",(function(){return w}));n.d(t,"s",(function(){return _}));n.d(t,"N",(function(){return N}));n.d(t,"O",(function(){return A}));n.d(t,"M",(function(){return D}));n.d(t,"G",(function(){return k}));n.d(t,"C",(function(){return P}));n.d(t,"R",(function(){return R}));n.d(t,"h",(function(){return F}));n.d(t,"i",(function(){return L}));n.d(t,"t",(function(){return M}));n.d(t,"f",(function(){return B}));n.d(t,"g",(function(){return U}));n.d(t,"x",(function(){return V}));n.d(t,"e",(function(){return H}));n.d(t,"b",(function(){return q}));n.d(t,"c",(function(){return G}));n.d(t,"a",(function(){return W}));n.d(t,"d",(function(){return z}));const r="hscore",i="hsi18n",o="hsprotect",a="hshr",s="hsnonbreaking",c="hsimage_v3",l="hsimage_v3_inpage",u="hslink_v2_inapp",d="hslink_v2_inpage",p="hspersonalize_v2",h="hsdatatokens",m="hsformatting",f="hscta_v2",g="hscta_v2_inpage",b="hscode_v2",O="hscode_v2_inpage",y="hsmore_v2",j="hsmedia",v="hsmedia_inpage",C="hsvideo_v2",x="hsvideo_v2_inpage",E="hscolor",T="hsrsstoken_v2",S="hspaste",I="hsemaileditor",w="hsemoji",_="hsemoji_inpage",N="hssnippet",A="hstable2",D="hssettingpassthrough",k="hsnewline",P="hslists",R="hsvisualblocks",F="hsanchor",L="hscharmap",M="hsfindreplace",B="hsgoogledocs",U="hsgoogledocs_inpage",V="hsicon",H="hsescapenewlines",q="hscontentgeneration",G="hscontentgeneration_inpage",W="hsautocomplete",z="hscopilotcollaboration"},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));n.d(t,"d",(function(){return i}));n.d(t,"e",(function(){return o}));n.d(t,"b",(function(){return a}));n.d(t,"c",(function(){return s}));const r="hsLink",i={ALLOW_ANCHOR_LINKS:"allowAnchorLinks",ALLOW_EMAIL_WEB_VERSION_LINK:"allowEmailWebVersionLink",ALLOW_FILE_DOWNLOAD:"allowFileDownload",ALLOW_MEETING_LINKS:"allowMeetingLink",ALLOW_RAW_LINKS_ONLY:"allowRawLinksOnly",ALLOW_RELATIVE_LINKS:"allowRelativeLinks",EMAIL_SUBSCRIPTION_LINK_TYPES:"emailSubscriptionLinkTypes",HIDE_TARGET_BLANK_AND_NO_FOLLOW:"hideTargetBlankAndNoFollow"},o={HREF:"href",TEXT:"linkText",REL:"rel",TARGET:"target"},a="Meta+K",s="_blank"},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));n.d(t,"e",(function(){return o}));n.d(t,"d",(function(){return a}));n.d(t,"g",(function(){return s}));n.d(t,"c",(function(){return c}));n.d(t,"b",(function(){return l}));n.d(t,"f",(function(){return u}));var r=n(1245);const i="mce-hs-anchor",o="data-insert-anchor",a="data-hs-anchor",s=Object(r.a)("TinymcePlugins.hsanchor"),c={tier1:"iframe, video, div[data-hs-callout-type]",tier2:"blockquote, pre",tier3:"p, h1, h2, h3, h4, h5, h6"},l="hsanchor",u={GET_ALL_CONTENT_ANCHORS:"getAllContentAnchors"}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(4);const i=e=>(t,n)=>r.a.text(`${e}.${t}`,n)},function(e,t,n){"use strict";n.d(t,"h",(function(){return i}));n.d(t,"b",(function(){return o}));n.d(t,"g",(function(){return l}));n.d(t,"e",(function(){return u}));n.d(t,"f",(function(){return d}));n.d(t,"j",(function(){return p}));n.d(t,"c",(function(){return h}));n.d(t,"d",(function(){return m}));n.d(t,"k",(function(){return f}));n.d(t,"a",(function(){return g}));n.d(t,"i",(function(){return b}));var r=n(1247);const i="line_height",o="block_font_size",a="inherited_italic",s="inherited_underline",c=e=>({on:e+"_enabled",off:e+"_disabled"}),l={bold:c("inherited_bold"),italic:c(a),underline:c(s)},u=["p","blockquote","ul","ol","h1","h2","h3","h4","h5","h6","div"],d="hsformatting",p={WEBFONT_FORMATS:"webfont_formats",FONT_FORMATS:"font_formats_v2",FONT_SIZE_FORMATS:"fontsize_formats_v2",LINE_HEIGHTS:"line_heights",BLOCK_FORMATS:"block_formats",APPLY_LINE_HEIGHT_PERCENTAGE:"apply_lineheight_percentage",OVERRIDE_INHERITED_STYLES_CONFIG:"override_inherited_styles_config",KEYBOARD_ESCAPE_FORMATS:"keyboard_escape_formats",HIDE_FONT_FAMILY:"hide_font_family",HIDE_FONT_SIZE:"hide_font_size",USE_PARSED_FONTS:"use_parsed_fonts",USE_BRANDING_FONTS:"use_branding_fonts",ENABLE_PARSED_FONTS:"enable_parsed_fonts",USE_FONT_SIZE_TYPEABLE:"use_font_size_typeable"},h=[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"},{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}],m=h.map(e=>e.format),f="TinymcePlugins.hsformatting",g={[r.b.LEFT]:"JustifyLeft",[r.b.CENTER]:"JustifyCenter",[r.b.RIGHT]:"JustifyRight",[r.b.JUSTIFY]:"JustifyFull",[r.b.NONE]:"JustifyNone"},b=["terminal"]},function(e,t,n){"use strict";n.d(t,"b",(function(){return r}));n.d(t,"d",(function(){return i}));n.d(t,"c",(function(){return o}));n.d(t,"a",(function(){return a}));const r={LEFT:"left",CENTER:"center",RIGHT:"right",NONE:"none",JUSTIFY:"justify"},i={BOTTOM:"baseline",MIDDLE:"middle",TOP:"top"},o={[r.LEFT]:"alignleft",[r.CENTER]:"aligncenter",[r.RIGHT]:"alignright",[r.JUSTIFY]:"alignjustify",[r.NONE]:""},a={left:"imageAlignmentLeft",center:"imageAlignmentMiddle",right:"imageAlignmentRight",none:"inline",baseline:"blockAlignmentBottom",middle:"blockAlignmentCenter",top:"blockAlignmentTop"}},function(e,t,n){"use strict";n.d(t,"b",(function(){return i}));n.d(t,"a",(function(){return a}));const r="RichTextLib.embed.",i=e=>`${r}${e}`,o=/<script[\s\S]*?>[\s\S]*?<\/script>/,a=(e="")=>o.test(e)},function(e,t,n){"use strict";n.d(t,"b",(function(){return a}));n.d(t,"d",(function(){return s}));n.d(t,"c",(function(){return c}));n.d(t,"j",(function(){return l}));n.d(t,"n",(function(){return u}));n.d(t,"m",(function(){return d}));n.d(t,"o",(function(){return p}));n.d(t,"p",(function(){return h}));n.d(t,"k",(function(){return m}));n.d(t,"g",(function(){return f}));n.d(t,"q",(function(){return g}));n.d(t,"f",(function(){return b}));n.d(t,"e",(function(){return O}));n.d(t,"i",(function(){return y}));n.d(t,"h",(function(){return j}));n.d(t,"a",(function(){return C}));n.d(t,"l",(function(){return E}));var r=n(9),i=n.n(r),o=n(1213);const a={URL:"url",EMBED:"embed",GENERIC_EMBED:"genericEmbed"},s={CUSTOM:"customWidth",FULL:"fullWidth"},c="https://knowledge.hubspot.com/articles/kcs_article/cos-pages-editor/how-can-i-add-a-video-on-my-hubspot-cos-page",l=["a","img"],u={vimeo:{title:"0",byline:"0",portrait:"0",color:"8dc7dc"}},d={ELEMENT:1,TEXT:3};let p;!function(e){e.mp3="audio/mpeg";e.mp4="video/mp4";e.ogg="video/ogg";e.swf="application/x-shockwave-flash";e.wav="audio/wav";e.webm="video/webm"}(p||(p={}));const h={wistiaInlineResponsive:new RegExp(/<script src="(?:http(?:s)?:)?\/\/fast\.wistia\.com\/embed\/medias\/(.*?)\.jsonp" async[\s\S]*?><\/script>[\s]*?<script src="(?:http(?:s)?:)?\/\/fast\.wistia\.com\/assets\/external\/E-v1\.js" async[\s\S]*?><\/script>[\s]*?<div class="wistia_responsive_padding"[\s\S]*?">[\s]*?<div class="wistia_embed.*?>[\s\S]*?<\/div>[\s]*?<\/div>[\s]*?<\/div>/i),wistiaInlineFixed:new RegExp(/<script src="(?:http(?:s)?:)?\/\/fast.wistia.com\/embed\/medias\/(.*?).jsonp" async[\s\S]*?><\/script>[\s]*?<script src="(?:http(?:s)?:)?\/\/fast.wistia.com\/assets\/external\/E-v1.js" async[\s\S]*?><\/script>[\s]*?<div class="wistia_embed.*?" style="(.*?)">[\s\S]*?<\/div>[\s]*?/i),wistiaPopoverTextLink:new RegExp(/<script src="(?:http(?:s)?:)?\/\/fast.wistia.com\/embed\/medias\/(.*?).jsonp" async[\s\S]*?><\/script><script src="(?:http(?:s)?:)?\/\/fast.wistia.com\/assets\/external\/E-v1.js" async[s\S]*?><span class="wistia_embed [\s\S]*?popover=true[\s\S]*?<a href="#">([.\s\S]*?)<\/a><\/span>/i),wistiaPopoverThumbnail:new RegExp(/<script src="(?:http(?:s)?:)?\/\/fast.wistia.com\/embed\/medias\/(.*?).jsonp" async[\s\S]*?><\/script><script src="(?:http(?:s)?:)?\/\/fast.wistia.com\/assets\/external\/E-v1.js" async[s\S]*?>(?:<div class="wistia_responsive_padding"[\s\S]*?><div class="wistia_responsive_wrapper"[\s\S]*?>)?<span class="wistia_embed [\s\S]*?popover=true[\s\S]*?style="(.*?)">[\s\S]*?<\/span>(?:<\/div><\/div>)?/i),embedlySeo:new RegExp(/<blockquote.*?class="embedly-card".*><a\W+href="(.*)">(.*)<\/a>.*<p>(.*)<\/p><\/blockquote>\n*<script.*src="(?:http(?:s)?:)?\/\/cdn\.embedly\.com\/widgets\/platform.js".*><\/script>/i),embedlyPlain:new RegExp(/<a\W+hubspot-new-embed\W.*class="embedly-card".*href="(.+?)".*>(.*)<\/a>\n*\W*<script.*cdn.embedly.com.*<\/script>/i),scriptEmbed:new RegExp(/{{\s*script_embed\((.*?)\)\s?}}/i)},m=/<iframe(?:[^>]*( loading="([^ ]+)"){1}[^>]*)+>/,f=["dailymotion","giphy","google-maps","slideshare","twentythree","vimeo","wistia","youtube"],g=[{regex:/youtu\.be\/([\w\-.]+)/i,type:"iframe",w:560,h:315,url:"//www.youtube.com/embed/$1",allowFullscreen:!0,service:"youtube"},{regex:/youtube\.com(.+)v=([^&]+)/i,type:"iframe",w:560,h:315,url:"//www.youtube.com/embed/$2",allowFullscreen:!0,service:"youtube"},{regex:/youtube.com\/embed\/videoseries?(.*)list=([^&]+)/i,type:"iframe",w:560,h:315,url:"//www.youtube.com/embed/videoseries?list=$2",allowFullscreen:!0,service:"youtube"},{regex:/youtube.com\/embed\/([a-z0-9\-_?&;=]+)/i,type:"iframe",w:560,h:315,url:"//www.youtube.com/embed/$1",allowFullscreen:!0,service:"youtube"},{regex:/vimeo\.com\/([0-9]+[a-z0-9\-_?&;=]*)/i,type:"iframe",w:640,h:360,url:"//player.vimeo.com/video/$1",allowFullscreen:!0,service:"vimeo"},{regex:/vimeo\.com\/(.*)\/([0-9]+[a-z0-9\-_?&;=]*)/i,type:"iframe",w:640,h:360,url:"//player.vimeo.com/video/$2",allowFullscreen:!0,service:"vimeo"},{regex:/instagram.com\/p\/([^/]+)/i,type:"iframe",w:425,h:505,url:"//instagram.com/p/$1/embed/",allowFullscreen:"",service:"instagram"},{regex:/wistia\.(com|net)\/medias\/([^/]+)/i,type:"iframe",w:620,h:349,url:"//fast.wistia.net/embed/iframe/$2",service:"wistia"},{regex:/maps\.google\.([a-z]{2,3})\/maps\/(.+)msid=(.+)/i,type:"iframe",w:425,h:350,url:'//maps.google.com/maps/ms?msid=$2&output=embed"',allowFullscreen:"",service:"google-maps"},{regex:/dai\.ly\/([\w\-.]+)/i,type:"iframe",w:480,h:270,url:"//www.dailymotion.com/embed/video/$1",allowFullscreen:!0,service:"dailymotion"},{regex:/dailymotion\.com\/video\/([^_]+)/i,type:"iframe",w:480,h:270,url:"//www.dailymotion.com/embed/video/$1",allowFullscreen:!0,service:"dailymotion"},{regex:/\/\/(\S+)\/((?:\d+|v)\.ihtml\/player\.html)([^/]+)/i,type:"iframe",w:560,h:315,url:"//$1/$2$3",allowFullscreen:!0,service:"twentythree"},{regex:/giphy\.com\/(gifs|embed|media)\/([^/]+)/i,type:"iframe",w:480,h:460,url:"//giphy.com/embed/$2",allowFullscreen:!0,service:"giphy"}],b={NONE:null,LOADING:"loading",COMPLETE:"complete"},O={NONE:null,FETCH:"fetch",EMBED_CODE:"embedCode",GENERAL:"general"},y=()=>"local"===i.a.getShort("content_embed")?Object(o.a)("local"):Object(o.a)("preview","hubspoteditor","na1"),j=(y(),()=>y()+"/content-embed-ui"),v="ContentEmbedUI",C={READY:v+":Ready",SIZE_CHANGE:v+":SizeChange",SET_CONTENT:v+":SetContent",SET_CONTENT_DONE:v+":SetContentDone",DISCONNECT:v+":Disconnect"},x=()=>i.a.debug("CONTENT_EMBED_UI"),E=(...e)=>{x()&&console.log("[embed-live-preview]",...e)}},function(e,t,n){"use strict";n.d(t,"d",(function(){return r}));n.d(t,"c",(function(){return i}));n.d(t,"a",(function(){return o}));n.d(t,"b",(function(){return a}));const r=e=>"RichTextLib.shared."+e,i={default:null,lazy:"lazy",eager:"eager"},o="https://knowledge.hubspot.com/cos-pages-editor/how-do-i-insert-an-image-in-a-page-or-blog-post#edit-advanced-image-options",a="https://knowledge.hubspot.com/cos-pages-editor/how-do-i-insert-a-link-on-a-hubspot-page#customize-your-link-s-attributes-optional"},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));n.d(t,"b",(function(){return i}));const r="hsPaste",i={CLEAR_ALL_STYLES:"pasteClearAllStyles",DEFAULT_ATTRIBUTES_MAP:"pasteDefaultAttributesMap",DEFAULT_STYLES_MAP:"pasteDefaultStylesMap",EMBED_URL_PASTING:"pasteEmbedUrls",FORMAT_TRANSFORM_MAP:"pasteFormatTransformMap",IMAGES_UPLOAD_FILE_ACCESS:"imagesUploadFileAccess"}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));n.d(t,"b",(function(){return a}));var r=n(1241),i=n(1251);function o(e,t){const n=Object(r.f)(e,i.a);return n?n[t]:null}const a=(e,t)=>{const{dom:n}=e;t.forEach(e=>{const{originalUrl:t,fileManagerUrl:r}=e,i=n.$(`img[src*='${t}']`);n.setAttrib(i,"src",r)})}},function(e,t,n){"use strict";n.d(t,"i",(function(){return c}));n.d(t,"h",(function(){return l}));n.d(t,"e",(function(){return u}));n.d(t,"d",(function(){return d}));n.d(t,"c",(function(){return p}));n.d(t,"k",(function(){return h}));n.d(t,"g",(function(){return m}));n.d(t,"j",(function(){return f}));n.d(t,"a",(function(){return g}));n.d(t,"f",(function(){return b}));n.d(t,"b",(function(){return j}));var r=n(1247),i=n(1254),o=n(1250),a=n(1241),s=n(1255);function c(e,t){return e.dom.is(t,"img:not([data-mce-object],[data-mce-placeholder])")}function l(e,t){if(c(e,t))return!0;const n=Array.from(t.childNodes).filter(e=>3!==e.nodeType||!e.textContent||""!==e.textContent.trim());return 1===n.length&&l(e,n[0])}function u(e,t){const n=Object(a.f)(e,s.b);return n?n[t]:null}function d(e){const t=Object(a.f)(e,s.b),n=s.d.IMAGE_LOADING_DEFAULT_VALUE;return t&&void 0!==t[n]?u(e,n):Object(a.f)(e,"isEmail")?o.c.default:o.c.lazy}const p=(e,t)=>{if(!!u(e,s.d.USE_ALIGNMENT_CLASSES)){return Object.keys(i.a).find(n=>e.dom.hasClass(t,i.a[n]))||r.b.NONE}return Object.values(r.b).find(n=>e.formatter.matchNode(t,r.c[n]))||r.b.NONE},h=(e,t,n)=>{const r=Object.values(i.a),o=t.className.split(" ").filter(e=>!r.includes(e));o.push(n);e.dom.setAttrib(t,"class",o.join(" ").trim())},m=(e,t,n)=>{const r=e.style.getPropertyValue(n);return r.includes("%")||r.includes("auto")?r:parseInt(t.getPropertyValue(n),10)||0},f=(e,t,n,r)=>{let i,o,a=n,s=r,c={};if(t){a=Math.min(t.width,n);s=Math.round(r/n*a);c=e.dom.parseStyle(t.getAttribute("style")||"");i=t.className;o=e.dom.getAttrib(t,"loading")}return{width:a,height:s,styles:c,className:i,loading:o}};function g(e,t){return t&&e.meta&&e.meta.title?e.meta.title:e.name}const b=e=>Boolean(e.meta&&"ai_generated"in e.meta&&e.meta.ai_generated),O=e=>Boolean(e.meta&&"shutterstock_id"in e.meta&&e.meta.shutterstock_id),y=e=>Boolean(e.meta&&"canva_id"in e.meta&&e.meta.canva_id),j=e=>b(e)?s.a.AI_GENERATED:y(e)?s.a.CANVA:O(e)?s.a.SHUTTERSTOCK:null},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(1247);const i={[r.b.CENTER]:"hs-image-align-center",[r.b.LEFT]:"hs-image-align-left",[r.b.RIGHT]:"hs-image-align-right",[r.b.NONE]:"hs-image-align-none"}},function(e,t,n){"use strict";n.d(t,"b",(function(){return i}));n.d(t,"d",(function(){return o}));n.d(t,"c",(function(){return a}));n.d(t,"a",(function(){return s}));var r=n(1247);const i="hsImage",o={AUTO_MAX_WIDTH:"imageAutoMaxWidth",DISABLE_RESIZING_PREDICATE:"imageDisableResizing",DISABLE_SPACING:"imageDisableSpacing",USE_ALIGNMENT_CLASSES:"imageUseAlignmentClasses",MAX_DIMENSION_WIDTH:"imageMaxDimensionWidth",STRIP_IMAGE_BLOBS:"stripImageBlobs",USE_CUSTOM_ALT_TEXT:"useCustomAltText",HAS_IMAGE_GENERATION_TOOLBAR_BUTTON:"hasImageGenerationToolbarButton",USE_IMAGE_GENERATION_SLASH_COMMAND:"useImageGenerationSlashCommand",IMAGE_LOADING_DEFAULT_VALUE:"imageLoadingDefaultValue"},a={[r.b.LEFT]:{float:"left","margin-left":"0px","margin-right":"10px",display:null},[r.b.CENTER]:{float:null,"margin-left":"auto","margin-right":"auto",display:"block"},[r.b.RIGHT]:{float:"right","margin-left":"10px","margin-right":"0px",display:null},[r.b.NONE]:{float:null,"margin-left":null,"margin-right":null,display:null}},s={AI_GENERATED:"AI_GENERATED",CANVA:"CANVA",SHUTTERSTOCK:"SHUTTERSTOCK"}},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));n.d(t,"b",(function(){return d}));n.d(t,"c",(function(){return h}));n.d(t,"d",(function(){return m}));var r=n(1),i=n.n(r),o=n(1257),a=n(1258),s=n(2643);const c={};function l(e){const t=Object(a.b)(e.get,o.a.USERS.getUrl,c,a.a),n=i.a.get();return function(){return t("",{query:{hubId:n}})}}const u={};function d(e){const t=Object(a.b)(e.get,o.a.PORTAL_CURRENCY.getUrl,u,a.a);return function(){return t()}}const p=s.a.forCaller("hubspot-tinymce");function h(){const e="";return async function(t){return await p.fetch(t,e)}}function m(){return function(e,t){return p.write(e,t)}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));const r="composition/v1/googledrive",i={BLOGS:{getUrl:()=>"blog-settings/v1/blogs",regex:new RegExp("^blog-settings/v1/blogs$"),methods:["GET"]},CTAS:{getUrl:e=>"ctas/v3/placements/"+e,regex:new RegExp("^ctas/v3/placements/[^/]+"),methods:["GET"]},FILE_INFO:{getUrl:e=>"filemanager/api/v2/files/info/"+e,regex:new RegExp("^filemanager/api/v2/files/info/.*"),methods:["GET"]},FILE_RESOLVE:{getUrl:()=>"filemanager/api/v2/files/resolve",regex:new RegExp("^filemanager/api/v2/files/resolve"),methods:["GET"]},FILE_UPLOAD_URL:{getUrl:()=>"filemanager/api/v3/files/synchronous-download-from-url",regex:new RegExp("^filemanager/api/v3/files/synchronous-download-from-url"),methods:["POST"]},FORMS:{getUrl:e=>"forms/v2/forms/"+e,regex:new RegExp("^forms/v2/forms/[^/]+"),methods:["GET"]},FORMS_LIST:{getUrl:()=>"forms/v2/forms",regex:new RegExp("^forms/v2/forms"),methods:["GET"]},MEETINGS:{getUrl:()=>"meetings/v2/link/portal",regex:new RegExp("^meetings/v2/link/portal$"),methods:["GET"]},MEETINGS_SEARCH:{getUrl:e=>"meetings/v1/link/slug/"+e,regex:new RegExp("^meetings/v1/link/slug/[^/]+"),methods:["GET"]},PAGES_CONTENT:{getUrl:()=>"content/api/v4/contents",regex:new RegExp("^content/api/v4/contents$"),methods:["GET"]},PAGES_SEARCH:{getUrl:()=>"contentsearch/v2/search/internal",regex:new RegExp("^contentsearch/v2/search/internal$"),methods:["GET"]},SNIPPETS:{getUrl:()=>"salescontentsearch/v2/search",regex:new RegExp("^salescontentsearch/v2/search$"),methods:["POST"]},USERS:{getUrl:()=>"users/v2/app/hub-users",regex:new RegExp("^users/v2/app/hub-users$"),methods:["GET"]},VIDEO_PLAYER:{getUrl:e=>`filemanager/api/v3/players/${e}/videos/file-metadata`,regex:new RegExp("^filemanager/api/v3/players/[^/]+"),methods:["GET"]},VIDEO:{getUrl:e=>"video/v1/videos/"+e,regex:new RegExp("^video/v1/videos/[^/]+"),methods:["GET"]},PROPERTIES:{getUrl:e=>"properties/v4/"+e,regex:new RegExp("^properties/v4/[^/]+"),methods:["GET"]},PATHS:{getUrl:()=>"data-tokens/v1",regex:new RegExp("^data-tokens/v1$"),methods:["POST"]},CUSTOM_OBJECT_META:{getUrl:()=>"crm-object-schemas/v3/schemas/",regex:new RegExp("^crm-object-schemas/v3/schemas/"),methods:["GET"]},OEMBED_PROXY:{getUrl:()=>"oembedproxy/v1/oembed",regex:new RegExp("^oembedproxy/v1/oembed$"),methods:["GET"]},OWNERS:{getUrl:()=>"owners/v2/owners",regex:new RegExp("^owners/v2/owners$"),methods:["GET"]},SITE_SETTINGS:{getUrl:e=>"content-settings/v1/site-settings/by-portal-id/"+e,regex:new RegExp("^content-settings/v1/site-settings/by-portal-id/[^/]+"),methods:["GET"]},PORTAL_CURRENCY:{getUrl:()=>"multi-currency/v1/currencies/information",regex:new RegExp("^multi-currency/v1/currencies/information"),methods:["GET"]},BRAND_COLORS:{getUrl:()=>"branding/v1/colors",regex:new RegExp("^branding/v1/colors"),methods:["GET"]},BRAND_FONTS:{getUrl:()=>"/branding/v1/fonts-with-variants",regex:new RegExp("^/branding/v1/fonts-with-variants"),methods:["GET"]},GOOGLE_AUTH_INFO:{getUrl:()=>r+"/auth-info",regex:new RegExp(`^${r}/auth-info`),methods:["GET"]},GOOGLE_AUTH_TOKEN:{getUrl:()=>r+"/default-auth-info",regex:new RegExp(`^${r}/default-auth-info`),methods:["GET"]},GOOGLE_DOC_METADATA:{getUrl:e=>`${r}/${e}/metadata`,regex:new RegExp(`^${r}/[^/]+/metadata`),methods:["GET"]},IMPORT_GOOGLE_DOC:{getUrl:e=>`${r}/${e}/to-composition`,regex:new RegExp(`^${r}/[^/]+/to-composition`),methods:["POST"]},DISCONNECT_GOOGLE_ACCOUNT:{getUrl:e=>"oauthor/v1/google/revoke/"+e,regex:new RegExp("^oauthor/v1/google/revoke/[^/]*"),methods:["POST"]},RENDER_MODULE_WITH_META:{getUrl:()=>"cos-rendering/v1/internal/render/widget-with-meta",regex:new RegExp("^cos-rendering/v1/internal/render/widget-with-meta"),methods:["POST"]},ICON_SET:{getUrl:e=>"content-icons/v1/sets/"+e,regex:new RegExp("^content-icons/v1/sets/[^/]*"),methods:["GET"]}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));n.d(t,"b",(function(){return o}));const r=15e3,i=36e5;function o(e,t,n={},i=r){return function(r="",o={},a={}){const s=t(r),c=()=>e(s,o),{cacheKey:l="",clearCache:u=!1}=a,d=Math.max(0,i);if(null===l||0===d)return c();"string"!=typeof l&&console.warn(`API call received 'cacheKey' of type '${typeof l}' but expected type 'string'. Using default cacheKey...`);const{query:p}=o,h=p?"?"+Object.keys(p).map(e=>`${e}=${p[e]}`).join("&"):"",m=l||`${s}${h}`;let f=n[m];if(f){(f.stale||u)&&(f.promise=c());f.stale=!1;clearTimeout(f.timeout);f.timeout=setTimeout(()=>{n[m].stale=!0},d)}else{f={promise:c(),stale:!1,timeout:setTimeout(()=>{n[m].stale=!0},d)};n[m]=f}return f.promise}}},function(e,t,n){"use strict";n.d(t,"c",(function(){return i}));n.d(t,"a",(function(){return o}));n.d(t,"b",(function(){return a}));n.d(t,"d",(function(){return s}));var r=n(1233);const i="hsInlineTarget",o="data-mce-inline-target",a="data-mce-inline-target-range",s={inline:"span",attributes:{[r.b]:"1",[o]:"true",[a]:"true"},remove:"empty"}},function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n(2),i=n(41),o=n.n(i),a=n(40),s=n(2654),c=n(1261),l=n(1263),u=n(45);const d=["iconName","tooltip","placement","onClick","disabled","disabledTooltip"];class p extends a.Component{render(){const e=this.props,{iconName:t,tooltip:n,placement:i,onClick:o,disabled:a,disabledTooltip:p}=e,h=Object(r.a)(e,d),m=a&&!p,f=a?p:n;return Object(u.jsx)(s.a,{disabled:m,title:f,placement:i,children:Object(u.jsx)(c.a,Object.assign({onClick:o,disabled:a},h,{children:Object(u.jsx)(l.a,{disabled:a,name:t})}))})}}p.propTypes={iconName:o.a.string.isRequired,tooltip:o.a.string.isRequired,placement:o.a.string,onClick:o.a.func.isRequired,disabled:o.a.bool,disabledTooltip:o.a.string};p.defaultProps={placement:"bottom"}},function(e,t,n){"use strict";var r=n(2),i=n(41),o=n.n(i),a=n(40),s=n(1262),c=n(297),l=n(298),u=n(2682),d=n(45);const p=["onSelectedChange","selected"];class h extends a.PureComponent{constructor(...e){super(...e);this.handleClick=e=>{const{onClick:t,onSelectedChange:n,selected:r}=this.props;n(Object(l.a)(!r));Object(c.a)(t,e)}}render(){const e=this.props,{selected:t}=e,n=Object(r.a)(e,p);return Object(d.jsx)(s.a,Object.assign({},n,{"aria-pressed":t,onClick:this.handleClick}))}}h.propTypes={children:o.a.node,disabled:o.a.bool,onSelectedChange:o.a.func,selected:o.a.bool,onClick:o.a.func};h.defaultProps={selected:!1};h.displayName="UITextToolbarButtonCore";const m=Object(u.a)(h,["selected"]);m.displayName="UITextToolbarButton";t.a=m},function(e,t,n){"use strict";var r=n(2),i=n(324),o=n(287),a=n.n(o),s=n(343),c=n(341),l=n(326),u=n(45);const d=["hovered","use","_useNativeButton","active"],p=({"aria-pressed":e,hovered:t,active:n,disabled:r})=>{if(!r){if(e||n)return i.FLINT;if(t)return i.BATTLESHIP}return"transparent"},h=a()(e=>{const t=Object(r.a)(e,d);return Object(u.jsx)(s.a,Object.assign({},t))}).withConfig({displayName:"SimpleStyledClickable__Clickable",componentId:"sc-1w4ijya-0"})(["background:",";border:1px solid ",";border-radius:3px;display:inline-block;height:27px;padding:0 4px 0 4px;vertical-align:middle;",";&&{cursor:",";}"],({"aria-pressed":e,active:t})=>e||t?i.BATTLESHIP:"",p,Object(l.k)(),({disabled:e})=>e?"not-allowed":"initial"),m=e=>Object(u.jsx)(c.a,Object.assign({},e,{children:t=>Object(u.jsx)(h,Object.assign({},e,t))}));m.displayName="SimpleStyledClickable";t.a=m},function(e,t,n){"use strict";var r=n(324),i=n(41),o=n.n(i),a=n(287),s=n.n(a),c=n(2679);const l=s()(c.a).attrs({size:14}).withConfig({displayName:"UITextToolbarIcon",componentId:"sc-1ly9j88-0"})(["color:",";"],({disabled:e})=>e?r.BUTTON_DISABLED_TEXT:r.HEFFALUMP);l.propTypes={disabled:o.a.bool,name:o.a.string.isRequired};l.displayName="UITextToolbarIcon";t.a=l},function(e,t,n){"use strict";var r=n(2),i=n(41),o=n.n(i),a=n(40),s=n(1265),c=n(1262),l=n(2682),u=n(1263),d=n(501),p=n(2654),h=n(45);const m=["open","options","placement","tooltip","value","disabled"];class f extends a.Component{render(){const e=this.props,{open:t,options:n,placement:i,tooltip:o,value:a,disabled:l}=e,d=Object(r.a)(e,m),f=n.find(({value:e})=>e===a),g=f?Object(h.jsx)(u.a,{name:f.icon,disabled:l}):null;return Object(h.jsx)(p.a,{open:!t&&void 0,placement:i,title:o,disabled:l,children:Object(h.jsx)(s.a,Object.assign({Button:c.a,buttonText:g,open:t,options:n,value:a,disabled:l},d))})}}f.propTypes={defaultValue:d.d,onChange:o.a.func,onOpenChange:o.a.func,open:o.a.bool.isRequired,options:o.a.arrayOf(o.a.shape({icon:u.a.propTypes.name,value:d.d}).isRequired).isRequired,placement:p.a.propTypes.placement,tooltip:p.a.propTypes.title,value:d.d,disabled:o.a.bool};f.defaultProps={open:!1,placement:"bottom"};f.displayName="UITextToolbarIconDropdownCore";const g=Object(l.a)(f,["open","value"]);g.displayName="UITextToolbarIconDropdown";t.a=g},function(e,t,n){"use strict";var r=n(2),i=n(41),o=n.n(i),a=n(40),s=n(288),c=n.n(s),l=n(338),u=n(1266),d=n(1262),p=n(710),h=n(298),m=n(447),f=n(1263),g=n(456),b=n(501),O=n(307),y=n(310),j=n(45);const v=["icon","value"],C=["dropdownClassName","open","options","value"],x=e=>c()("private-dropdown--list",e);class E extends a.Component{constructor(e){super(e);this.handleKeyDown=e=>{const{key:t}=e,{open:n}=this.props;if(n&&("ArrowDown"===t||"ArrowUp"===t)){const n=document.getElementById(this._id);if(!n)return;Object(O.m)("li",n,"ArrowUp"===t)&&e.preventDefault();e.stopPropagation()}};this._id="icon-dropdown-"+Object(y.d)();this.getHandleChange=Object(l.a)(this.getHandleChange.bind(this))}getHandleChange(e){const t=Object(h.a)(e);return()=>{const{onOpenChange:e,onChange:n,open:r}=this.props;n(t);e(Object(h.a)(!r))}}renderOptions(e){return e.map(e=>{let{icon:t,value:n}=e,i=Object(r.a)(e,v);return Object(a.createElement)(p.a,Object.assign({},i,{key:t,onClick:this.getHandleChange(n),placement:"right",use:"transparent"}),Object(j.jsx)(f.a,{name:t}))})}render(){const e=this.props,{dropdownClassName:t,open:n,options:i}=e,o=Object(r.a)(e,C),a=x(t);return Object(j.jsx)(m.a,Object.assign({},o,{Button:d.a,caretRenderer:Object(j.jsx)(u.a,{}),dropdownClassName:a,menuWidth:50,open:n,onKeyDown:this.handleKeyDown,children:Object(j.jsx)(g.a,{id:this._id,children:this.renderOptions(i)})}))}}E.propTypes=Object.assign({},m.a.propTypes,{defaultValue:b.d,dropdownClassName:o.a.string,onChange:o.a.func,onOpenChange:o.a.func,open:o.a.bool.isRequired,options:o.a.arrayOf(o.a.shape({icon:f.a.propTypes.name,value:b.d}).isRequired).isRequired,value:b.d});E.defaultProps=Object.assign({},m.a.defaultProps,{open:!1});E.displayName="UIAbstractIconDropdown";t.a=E},function(e,t,n){"use strict";var r=n(324),i=n(287),o=n.n(i),a=n(451);t.a=o()(a.a).withConfig({displayName:"SimpleStyledCaret",componentId:"dfb982-0"})(["color:",";"],r.EERIE)},function(e,t,n){"use strict";n.d(t,"j",(function(){return r}));n.d(t,"z",(function(){return i}));n.d(t,"A",(function(){return o}));n.d(t,"k",(function(){return a}));n.d(t,"H",(function(){return s}));n.d(t,"eb",(function(){return c}));n.d(t,"db",(function(){return l}));n.d(t,"i",(function(){return u}));n.d(t,"a",(function(){return d}));n.d(t,"m",(function(){return p}));n.d(t,"n",(function(){return h}));n.d(t,"M",(function(){return m}));n.d(t,"N",(function(){return f}));n.d(t,"I",(function(){return g}));n.d(t,"O",(function(){return b}));n.d(t,"G",(function(){return O}));n.d(t,"R",(function(){return y}));n.d(t,"X",(function(){return j}));n.d(t,"Z",(function(){return v}));n.d(t,"Y",(function(){return C}));n.d(t,"r",(function(){return x}));n.d(t,"J",(function(){return E}));n.d(t,"E",(function(){return T}));n.d(t,"x",(function(){return S}));n.d(t,"U",(function(){return I}));n.d(t,"P",(function(){return w}));n.d(t,"T",(function(){return _}));n.d(t,"o",(function(){return N}));n.d(t,"u",(function(){return A}));n.d(t,"w",(function(){return D}));n.d(t,"jb",(function(){return k}));n.d(t,"ab",(function(){return P}));n.d(t,"p",(function(){return R}));n.d(t,"q",(function(){return F}));n.d(t,"C",(function(){return L}));n.d(t,"h",(function(){return M}));n.d(t,"Q",(function(){return B}));n.d(t,"B",(function(){return U}));n.d(t,"L",(function(){return V}));n.d(t,"s",(function(){return H}));n.d(t,"t",(function(){return q}));n.d(t,"V",(function(){return G}));n.d(t,"W",(function(){return W}));n.d(t,"kb",(function(){return z}));n.d(t,"F",(function(){return $}));n.d(t,"e",(function(){return K}));n.d(t,"f",(function(){return Y}));n.d(t,"b",(function(){return X}));n.d(t,"g",(function(){return J}));n.d(t,"d",(function(){return Q}));n.d(t,"c",(function(){return Z}));n.d(t,"fb",(function(){return ee}));n.d(t,"hb",(function(){return te}));n.d(t,"ib",(function(){return ne}));n.d(t,"gb",(function(){return re}));n.d(t,"v",(function(){return ie}));n.d(t,"K",(function(){return oe}));n.d(t,"y",(function(){return ae}));n.d(t,"S",(function(){return se}));n.d(t,"D",(function(){return ce}));n.d(t,"l",(function(){return le}));n.d(t,"cb",(function(){return ue}));n.d(t,"bb",(function(){return de}));n.d(t,"mb",(function(){return pe}));n.d(t,"lb",(function(){return he}));const r="canvasblock",i="canvasfontselect",o="canvasfontsizeselect",a="canvasbold",s="canvasitalic",c="canvasunderline",l="canvasforecolor",u="canvasbackcolor",d="canvasalignment",p="canvasbullist",h="canvasbullistbutton",m="canvasnumlist",f="canvasnumlistbutton",g="canvaslineheight",b="canvasoutdent",O="canvasindent",y="canvasremoveformat",j="canvasstrikethrough",v="canvassuperscript",C="canvassubscript",x="canvascodeformat",E="canvaslink",T="canvasimage",S="canvasemoji",I="canvassnippet",w="canvaspersonalize",_="canvasrsstokens",N="canvascallout",A="canvascta",D="canvasembed",k="canvasvideo",P="canvastable",R="canvascharmap",F="canvascharmapbutton",L="canvasicon",M="canvasanchor",B="canvasmore",U="canvashr",V="canvasnonbreaking",H="canvascontentgeneration",q="canvascopilotcollabortation",G="canvassourcecode",W="canvassourcecodebutton",z="canvasvisualblocks",$="canvasimportgoogledoc",K="canvasalignmentinline",Y="canvasalignmentleft",X="canvasalignmentcenter",J="canvasalignmentright",Q="canvasalignmentfullwidth",Z="canvasalignmentdropdown",ee="canvasverticalalignmentbottom",te="canvasverticalalignmentmiddle",ne="canvasverticalalignmenttop",re="canvasverticalalignmentdropdown",ie="canvasdimensions",oe="canvasmargins",ae="canvasfillcolor",se="canvasrotation",ce="canvasicontype",le="canvasbordercolor",ue="canvastablestyles",de="canvastablecellstyles",pe={block:[r],font_family:[i],font_size:[o],bold:[a],italic:[s],underline:[c],text_color:[l],background_color:[u],alignment:[d],bulleted_list:[p],numbered_list:[m],lineheight:[g],outdent:[b],indent:[O],strikethrough:[j],superscript:[v],subscript:[C],code_format:[x],link:[E],image:[T],emoji:[S],snippet:[I],personalize:[w],cta:[A],embed:[D],video:[k],table:[P],charmap:[R],icon:[L],anchor:[M],hr:[U],nonbreaking_space:[V],content_generation:[H],copilot_collaboration:[q],source_code:[G],visual_blocks:[z],colors:[l,u],fonts:[i,o],indents:[b,O],lists:[p,m],standard_emphasis:[a,s,c],advanced_emphasis:[j,v,C,x],glyphs:[S,R,L]},he=Object.keys(pe).reduce((e,t)=>{e[t]=t;return e},{})},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));const r={EMBED:"embed",IMAGE:"image",VIDEO:"video",TABLE:"table"}},function(e,t,n){"use strict";n.d(t,"d",(function(){return r}));n.d(t,"e",(function(){return i}));n.d(t,"b",(function(){return o}));n.d(t,"a",(function(){return a}));n.d(t,"c",(function(){return s}));const r={PREVIEW:"preview",EDIT:"edit"},i={INSERT:"insert",EDIT:"edit"},o={ESCAPE:"Escape",ENTER:"Enter"},a={ADVANCED:"advanced",SIMPLE:"simple"},s={EDIT:"edit",REPLACE:"replace",REMOVE:"delete",UNLINK:"unlink",ADD:"add",DELETE:"minus",MERGE:"merge",SPLIT:"splitModule"}},function(e,t,n){"use strict";n.d(t,"d",(function(){return s}));n.d(t,"a",(function(){return c}));n.d(t,"b",(function(){return l}));n.d(t,"e",(function(){return d}));n.d(t,"c",(function(){return p}));var r=n(1212),i=n.n(r),o=n(2634);const a=/rgba\(\s*([0-9]{1,3}),\s*([0-9]{1,3}),\s*([0-9]{1,3}),\s*([0-9,.]+)\s*\)/,s=(e,t)=>{if(e&&null!==t&&t<100){const n=new i.a.util.Color(e).toRgb();return`rgba(${n.r}, ${n.g}, ${n.b}, ${t/100})`}return e},c=e=>{let t,n=100;if(a.exec(e)){const r=a.exec(e);t=new i.a.util.Color(`rgb(${r[1]}, ${r[2]}, ${r[3]})`).toHex();n=100*parseFloat(r[4],10)}else{t=new i.a.util.Color(e).toHex()}return{hex:t,alpha:n}},l=(e,t,n=!0,r=null)=>e.dom.getStyle(r||e.selection.getStart(),"forecolor"===t?"color":"backgroundColor",n),u=(e,t,n,r)=>{let i,o=!!l(e,t,!1,n),a=n===r,s=0;for(;s<n.childNodes.length&&!o;){i=u(e,t,n.childNodes[s],r);o=i.hasColor;a=a||i.sawEndNode;s++}return{hasColor:o,sawEndNode:a}},d=(e,t)=>{if(!e.selection)return!1;const n=e.selection.getRng();if(n.startContainer===n.endContainer&&"#text"===n.commonAncestorContainer.nodeName)return!!l(e,t,!1,n.commonAncestorContainer.parentNode);let r,i=e.selection.getStart(),o=!1;for(;!o&&i;){r=u(e,t,i,n.endContainer);o=r.hasColor;if(r.sawEndNode)break;i=i.nextSibling}return o},p=e=>`${e.settings.appUrl}${o.b.accountDefaults("branding/colors")}`},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(1),i=n.n(r),o=n(1258),a=n(1257);const s={};function c(e){const t=Object(o.b)(e.get,a.a.BRAND_COLORS.getUrl,s,o.a),n=i.a.get();return function(){return new Promise((r,i)=>{if(e&&n)t(n).then(e=>{r(e.map(({color:e})=>e))}).catch(i);else{i(`Error: ${n?"An http client":"A portalId"} is needed to fetch favorite colors.`)}})}}},,function(e,t,n){"use strict";n.d(t,"f",(function(){return r}));n.d(t,"g",(function(){return i}));n.d(t,"d",(function(){return o}));n.d(t,"e",(function(){return a}));n.d(t,"a",(function(){return s}));n.d(t,"c",(function(){return c}));n.d(t,"b",(function(){return l}));const r={"fontawesome-5.14.0":void 0,"fontawesome-6.4.2":"fontAwesome"},i=Object.assign({},r,{frequentlyUsed:"frequentlyUsed"}),o={SOLID:"SOLID",REGULAR:"REGULAR"},a={SEMANTIC:"semantic",DECORATIVE:"decorative"},s=14,c=["frequently","last"],l="rich-text.icon"},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));n.d(t,"b",(function(){return i}));n.d(t,"c",(function(){return o}));const r={MIN:9,MAX:15},i=["solid","dashed","dotted","none","hidden"],o={PERCENTAGE:"percentage",PIXELS:"pixels"}},function(e,t,n){"use strict";n.d(t,"e",(function(){return O}));n.d(t,"h",(function(){return v}));n.d(t,"g",(function(){return E}));n.d(t,"b",(function(){return I}));n.d(t,"c",(function(){return D}));n.d(t,"d",(function(){return P}));n.d(t,"f",(function(){return V}));n.d(t,"a",(function(){return W}));var r=n(46),i=n(2823),o=n(1276),a=n(4),s=n(1277),c=n(1278);const l=(e,t={})=>a.a.text("RichTextLib.personalize."+e,t),u=()=>{const e=s.r.map(e=>({text:Object(i.b)(e),value:"site_settings."+e,name:e,category:"site_settings",isHubSpotDefined:!0}));return{help:l("help.categories.site_settings"),options:e,text:l("categories.site_settings"),value:"site_settings"}},d=()=>{const e="subscription_name",t=[{text:l("categories.subscription_type"),value:"subscription_type."+e,name:e,category:"subscription_type",isHubSpotDefined:!0}];return{help:l("help.categories.subscription_type"),options:t,text:l("categories.subscription_type"),value:"subscription_type"}},p=e=>{const{hideSiteSettingsCategory:t,includeSubscriptionTypeCategory:n}=e,r=[];t||r.push(u());n&&r.push(d());return r},h={property:{label:"Internal Contact Record",name:"hubspot_contact_record"}},m={},f=(e,t,n=!1)=>{if(m[e]&&!n)return m[e];{Object(r.a)(Array.isArray(t),"properties must be an Array");const n=t.reduce((t,{property:n})=>{if(!n.hidden&&!s.f.includes(n.name)){const r=!!n.hubspotDefined;if(r){const{label:e=""}=n;n.label=Object(i.b)(e)}const s=n.dataSensitivity===o.a.STANDARD||n.dataSensitivity===o.a.HIGH;t.push({text:n.label,value:`${e}.${n.name}`,name:n.name,referencedObjectType:n.referencedObjectType,category:e,isHubSpotDefined:r,fieldType:n.fieldType,originalProperty:n,disabled:s,disabledTooltip:s?a.a.text("RichTextLib.personalize.dataSensitivityTooltip"):void 0})}return t},[]);n.sort(({text:e=""},{text:t=""})=>e>t?1:-1);m[e]=n;return n}},g={},b=(e={})=>{const t=e.supportedCrmObjectFQNs||[],n=e.dataTokenContext||{};return Object.keys(n).length>0?JSON.stringify(e.dataTokenContext):t.join(",")},O=(e,t=!1,n)=>function(){const{includeInternalContactRecord:r,useFlexibleAssociations:i=!1}=n,o=b(n);if(Object.prototype.hasOwnProperty.call(g,o)&&!t)return g[o];const a=e(n),u=Promise.resolve(a).then(e=>e.map(e=>{const{fqn:n,propertiesForCategory:o,customObjectLabels:a}=e;n===s.m.CONTACT&&r&&o.push(h);const u=f(n,o,t);if(!Object(c.i)(n)){let e=n;n===s.m.COMPANY&&i&&(e=s.m.PRIMARY_COMPANY);return{text:l("categories."+e),help:l("help.categories."+e),options:u,value:n}}const d=a[n]||n;return{text:d,help:l("help.categories.customObject",{translatedCategory:d}),options:u,value:n}}));g[o]=Promise.resolve(u).then(e=>{const t=p(n);return e.concat(t).sort((e,t)=>{const n=s.d.indexOf(e.value),r=s.d.indexOf(t.value);return n<0&&r<0?0:n<0?1:r<0?-1:n-r})});return g[o]},y={},j={},v=e=>{const t=b(e);return y[t]},C=(e,t)=>{const n=b(t);y[n]=e},x=e=>e.reduce((e,t)=>{t&&t.options.forEach(({value:t="",text:n=""})=>{e[t]=n});return e},{}),E=e=>{const t=b(e);return j[t]},T=(e,t)=>{const n=b(t);j[n]=e},S=e=>e.reduce((e,t)=>{t&&t.options.forEach(({value:t="",originalProperty:n={}})=>{n.dataSensitivity!==o.a.STANDARD&&n.dataSensitivity!==o.a.HIGH||(e[t]=!0)});return e},{}),I=(e,t,n)=>O(e,n,t)().then(e=>{const n=x(e);C(n,t);const r=S(e);T(r,t);return Promise.resolve(n)}),w=(e,t)=>{if(e.path&&"FIELD"===e.nodeType){const n=e.parentLabels?[...e.parentLabels,e.label].join(" > "):e.label;t[e.path]=n}e.childNodes&&e.childNodes.forEach(e=>w(e,t))},_=(e,t)=>{const n={};t.dataTokenNodes.forEach(e=>w(e,n));C(n,e)},N=e=>{const{dataTokenContext:t,supportedCrmObjectFQNs:n=[],hideSiteSettingsCategory:r,includeSubscriptionTypeCategory:i,hideFallbacks:o,isEmail:a}=e;return JSON.stringify([t,n,r,i,o,a])},A={},D=e=>A[N(e)],k={},P=e=>k[N(e)],R=(e,t)=>{const n=e.text.toLowerCase(),r=t.text.toLowerCase();return n<r?-1:n>r?1:0},F=e=>{const{label:t,description:n,path:r,childNodes:i}=e;let o,a;const s=i&&i.length;s&&"FIELD"!==i[0].nodeType?o=i.map(F):a=n;return!r&&s&&"FIELD"===i[0].nodeType?{text:t,value:"property-only",help:a,options:o}:{text:t,value:r,help:a,options:o}},L=(e,t)=>{const{label:n,fieldType:r,hubspotDefined:i,path:c="",childNodes:l,fieldDefaultValue:u,parentFieldDefaultValue:d,parentLabels:p,dataSensitivity:h}=e;let m;l&&l.length&&(m=l.map(t=>L(t,e)).sort(R));const f=h||t&&t.dataSensitivity,g=f===o.a.STANDARD||f===o.a.HIGH;return{text:p?[...p,n].join(" > "):n,value:c,fieldType:r,isOwnerField:t&&t.referencedType===s.t,hubspotDefined:i,children:m,fieldDefaultValue:u,parentFieldDefaultValue:d,disabled:g,disabledTooltip:g?a.a.text("RichTextLib.personalize.dataSensitivityTooltip"):void 0}},M=(e,t)=>{const{childNodes:n,path:r="property-only"}=t;n&&n.length&&("FIELD"===n[0].nodeType?e[r]=n.map(e=>L(e)).sort(R):n.forEach(t=>M(e,t)));return e},B=(e,t)=>{A[N(e)]=t.dataTokenNodes.map(F);k[N(e)]=t.dataTokenNodes.reduce(M,{})},U={},V=e=>{const t=N(e);return U[t]},H=(e,t)=>{const n=N(t);U[n]=e},q=(e,t,n)=>{if(e.path&&"FIELD"===e.nodeType){const r=e.dataSensitivity===o.a.STANDARD||e.dataSensitivity===o.a.HIGH,i=n?e.path.replace(n+".",""):e.path;t[e.path]={label:e.parentLabels?[...e.parentLabels,e.label].join(" > "):e.label,path:e.path,category:n||"property-only",field:i,hasDataSensitivity:r}}if(e.childNodes){const r=n||e.path;e.childNodes.forEach(e=>q(e,t,r))}},G=(e,t)=>{const n={};t.dataTokenNodes.forEach(e=>q(e,n));H(n,e)},W=(e,t)=>{if(t){_(e,t);G(e,t);B(e,t)}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));const r={NONE:"none",STANDARD:"standard",HIGH:"high"}},function(e,t,n){"use strict";n.d(t,"c",(function(){return r}));n.d(t,"b",(function(){return i}));n.d(t,"e",(function(){return o}));n.d(t,"s",(function(){return a}));n.d(t,"k",(function(){return s}));n.d(t,"p",(function(){return c}));n.d(t,"q",(function(){return l}));n.d(t,"g",(function(){return u}));n.d(t,"l",(function(){return d}));n.d(t,"a",(function(){return p}));n.d(t,"h",(function(){return h}));n.d(t,"j",(function(){return m}));n.d(t,"m",(function(){return f}));n.d(t,"d",(function(){return g}));n.d(t,"r",(function(){return b}));n.d(t,"u",(function(){return O}));n.d(t,"n",(function(){return y}));n.d(t,"o",(function(){return j}));n.d(t,"f",(function(){return v}));n.d(t,"t",(function(){return C}));n.d(t,"i",(function(){return x}));const r="contact",i="company",o="deal",a="ticket",s="line_item",c="quote",l="subscription",u="feedback_submission",d="payment",p="commerce_payment",h="goal_target",m="lead",f={CONTACT:r,COMPANY:i,PRIMARY_COMPANY:"primary_company",DEAL:o,LINE_ITEM:s,SITE_SETTINGS:"site_settings",SUBSCRIPTION_TYPE:"subscription_type",TICKET:a,QUOTE:c,FEEDBACK_SUBMISSION:u,CONVERSATION:"conversation",SUBSCRIPTION:l,PAYMENT:d,GOAL_TARGET:h,COMMERCE_PAYMENT:p,INVOICE:"invoice",CART:"cart",LEAD:m},g=[f.COMPANY,f.CONTACT,f.LEAD,f.SITE_SETTINGS,f.DEAL,f.LINE_ITEM,f.SUBSCRIPTION_TYPE,f.TICKET,f.QUOTE,f.SUBSCRIPTION,f.PAYMENT,f.COMMERCE_PAYMENT,f.GOAL_TARGET,f.INVOICE,f.CART],b=["company_name","company_street_address_1","company_street_address_2","company_city","company_state","company_zip","company_country","company_phone"],O=[{value:"fullname",text:"Full name"},{value:"firstname",text:"First name"},{value:"lastname",text:"Last name"},{value:"email",text:"Email"},{value:"signature",text:"Signature"},{value:"meetings_link",text:"Meetings link"}],y={subscription_name:"subscription_type"},j=["subscription_name"],v=["ownername","owneremail"],C="OWNER",x="hubspot_owner_id"},function(e,t,n){"use strict";n.d(t,"h",(function(){return a}));n.d(t,"i",(function(){return s}));n.d(t,"j",(function(){return c}));n.d(t,"e",(function(){return u}));n.d(t,"c",(function(){return d}));n.d(t,"b",(function(){return h}));n.d(t,"l",(function(){return f}));n.d(t,"k",(function(){return g}));n.d(t,"g",(function(){return b}));n.d(t,"d",(function(){return O}));n.d(t,"a",(function(){return y}));n.d(t,"f",(function(){return j}));var r=n(1277);const i=[r.m.CONTACT,r.m.COMPANY],o=[r.m.SITE_SETTINGS,r.m.SUBSCRIPTION_TYPE];[r.c,r.b,r.e,r.s,r.k,r.p,r.q,r.g,r.l,r.a,r.h,r.j].map(e=>e.toUpperCase());const a=e=>"RichTextLib.personalize."+e,s=e=>!Object.values(r.m).includes(e),c=e=>!!e&&(e.name===r.i||e.referencedObjectType===r.t),l=["subscription_type","property-only"],u=(e,t)=>(!e||l.includes(e))&&r.o.includes(t),d=(e,t)=>{const n=e.property;let i=e.category;u(i,n)&&(i=r.n[n]);const o=t.find(e=>e.value===i);return o&&o.text},p=(e,t=!1)=>{switch(e){case r.m.CONTACT:return t?"mergeTagDefaults":"pageMergeTagDefaults";case r.m.COMPANY:return t?"accountMergeTagDefaults":"pageAccountMergeTagDefaults";default:return""}},h=e=>i.includes(e),m=e=>o.includes(e),f=({name:e,category:t})=>e&&h(t),g=(e,t)=>{const n=e.name,r=e.category,i=c(e)&&h(r),o=c(e)&&!t;return n&&!i&&!o&&!m(r)},b=({defaultValue:e,currentOption:t})=>!!t.category&&(h(t.category)?null===e&&!c(t):!m(t.category)),O=(e,t,n,r)=>{const i=p(t,r);if(e&&i){const t=n[i];if(t){const n=t[e];if(n)return n}}return null},y=({prefix:e="",category:t,property:n,subProperty:r,defaultValue:i,filter:o})=>{const a=e&&0!==e.length;if(u(t,n))return`{{ ${a?e:n} }}`;const s=`${a?e:t}.${n}${r?"."+r:""}`;return null===i?`{{ ${s}${o?"|"+o:""} }}`:`{{ personalization_token('${s}', '${i}')${o?"|"+o:""} }}`},j=(e="")=>{switch(e.toLowerCase()){case r.m.CONTACT:return"sorbet";case r.m.COMPANY:return"calypso";case r.m.SITE_SETTINGS:return"default";case r.m.DEAL:case r.m.QUOTE:return"success";case r.m.LINE_ITEM:return"warning";default:return"thunderdome"}}},function(e,t,n){"use strict";var r=n(443),i=n(287),o=n.n(i),a=n(324);t.a=o()(r.a).withConfig({displayName:"StyleProtectedTransparentButton",componentId:"sc-10ff5z1-0"})(["color:"," !important;background-color:transparent !important;padding-left:5px !important;padding-right:5px !important;font-size:13px !important;margin-bottom:1px !important;"],a.CALYPSO_DARK)},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(1257);const i={},o=e=>{const{dataTokenContext:t,supportedCrmObjectFQNs:n=[],hideSiteSettingsCategory:r,includeInternalContactRecord:i,includeSubscriptionTypeCategory:o,hideFallbacks:a,isEmail:s,unsupportedDataTokenPaths:c}=e;return JSON.stringify([t,n,r,i,o,a,s,c])},a=(e=[],t)=>{if(e.length>0){const n=e.map(e=>new RegExp(e));return t.reduce((t,r)=>{const i=Object.assign({},r);r.childNodes&&(i.childNodes=a(e,r.childNodes));let o=!1;n.forEach(e=>{o=o||e.test(r.path||"")});o||t.push(i);return t},[])}return t};function s(e,t){return()=>{const n=o(t);if(Object.prototype.hasOwnProperty.call(i,n))return i[n];const{dataTokenContext:s,hideFallbacks:c,hideSiteSettingsCategory:l,includeInternalContactRecord:u,includeSubscriptionTypeCategory:d,isEmail:p,supportedCrmObjectFQNs:h,unsupportedDataTokenPaths:m,useDefaultLabelForCrmObjectTypes:f=!1}=t,g={includeInternalContactRecord:u};let b;b=c?"NONE":p?"EMAIL":"PAGE";s&&(g.dataTokenContext=s);h&&h.length>0&&(g.dataTokenSources={crmObjectTypeFQNs:h,deliverOfficeSettings:!l,deliverSubscriptionType:d,fieldDefaultValueSource:b,useDefaultLabelForCrmObjectTypes:f});i[n]=e.post(r.a.PATHS.getUrl(),{data:g}).then(e=>{const{dataTokenNodes:t}=e;return{dataTokenNodes:a(m,t)}});return i[n]}}},function(e,t,n){"use strict";n.d(t,"c",(function(){return l}));n.d(t,"b",(function(){return u}));n.d(t,"d",(function(){return d}));n.d(t,"a",(function(){return p}));var r=n(1282);function i(e){return e.replace(new RegExp(/[[]/g),"\\$&")}const o=e=>e.replace(new RegExp(/\(([^()]*)\)/g),(e,t)=>`\\(${t}\\)`),a=e=>{const t=[r.c],n=e[r.g.SUPPORTED_CRM_OBJECT_FQNS];Array.isArray(n)&&t.push(...n.map(e=>{const t=o(e);return t===t.toLowerCase()?t:`${t}|${t.toLowerCase()}`}));!e[r.g.HIDE_SITE_SETTINGS_CATEGORY]&&t.push(r.e);return t.filter((e,t,n)=>n.indexOf(e)===t).sort()},s=e=>{const t=e[r.g.CUSTOM_OBJECT_PREFIXES];return"object"!=typeof t?[]:Object.values(t).map(e=>i(e))},c=e=>!!e[r.g.PROPERTY_FILTERS_CALLBACK],l=e=>{if(!e)return r.a;const t=a(e).join("|"),n=s(e).join("|"),i=c(e);return new RegExp(`{{\\s*(${t}${0!==n.length?"|"+n:""})\\.(\\w+)(?:\\.(\\w+))?\\s*${i?r.b:""}}}`,"g")},u=e=>{if(!e)return r.d;const t=s(e).join("|");return new RegExp(`{{\\s*(subscription_name${0!==t.length?"|"+t:""})?\\s*}}`,"g")},d=e=>{if(!e)return r.f;const t=a(e).join("|"),n=s(e).join("|"),i=c(e);return new RegExp(`{{\\s*personalization_token\\(\\s*["']{1}(${t}${0!==n.length?"|"+n:""})\\.(\\w+)(?:\\.(\\w+))?["']{1}\\s*,\\s*["']{1}(.*?)["']{1}\\s*\\)\\s*${i?r.b:""}}}`,"g")},p=e=>""===e?"empty":null===e?"global":"local"},function(e,t,n){"use strict";n.d(t,"c",(function(){return r}));n.d(t,"e",(function(){return i}));n.d(t,"a",(function(){return o}));n.d(t,"d",(function(){return a}));n.d(t,"f",(function(){return s}));n.d(t,"b",(function(){return c}));n.d(t,"g",(function(){return l}));const r="owner",i="site_settings",o=/{{\s*(company|contact|deal|line_item|owner|quote|site_settings|ticket)\.(\w+)(?:\.(\w+))?\s*}}/g,a=/{{\s*(subscription_name)?\s*}}/g,s=/{{\s*personalization_token\(\s*["']{1}([^\\.\s]+)\.(\w+)\.?(\w+)?["']{1}\s*,\s*["']{1}(.*?)["']{1}\s*\)\s*}}/g,c="(?:\\|(.*?))?\\s*",l={ALLOW_EMPTY_DEFAULTS:"allowEmptyDefaults",HIDE_SITE_SETTINGS_CATEGORY:"hideSiteSettingsCategory",INCLUDE_SUBSCRIPTION_TYPE_CATEGORY:"includeSubscriptionTypeCategory",INCLUDE_INTERNAL_CONTACT_RECORD:"includeInternalContactRecord",ALLOW_EMPTY_FALLBACKS:"allowEmptyFallbacks",IS_EMAIL:"isEmail",HIDE_FALLBACKS:"hideFallbacks",SUPPORTED_CRM_OBJECT_FQNS:"supportedCrmObjectFQNs",CUSTOM_OBJECT_PREFIXES:"customObjectPrefixes",USE_FLEXIBLE_ASSOCIATIONS:"useFlexibleAssociations",PROPERTY_FILTERS_CALLBACK:"propertyFiltersCallback",USE_AS_UPGRADE_POINT:"useAsUpgradePoint",TOKEN_PATHS_CONTEXT:"dataTokenContext",UNSUPPORTED_TOKENS:"unsupportedTokens"}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));const r=/^{{\s*([a-zA-Z0-9_.]+)\s*}}$/,i=e=>{if("string"!=typeof e)return null;const t=e.trim().match(r);return t?t[1]:null}},function(e,t,n){"use strict";n.d(t,"e",(function(){return f}));n.d(t,"d",(function(){return y}));n.d(t,"a",(function(){return v}));n.d(t,"b",(function(){return C}));n.d(t,"c",(function(){return x}));var r=n(1212),i=n.n(r),o=n(1275),a=n(1278),s=n(1215),c=n(1281),l=n(2817),u=n(1241),d=n(1232);const p=e=>e.split("").reverse().join(""),h=Object(s.b)((e,t,n)=>n.replaceAll(e,t)),m=Object(s.a)(p,h(/'(?!\\)/g,"'\\"),p),f=Object(s.a)(p,h(/'\\/g,"'"),p),g=({href:e,text:t,style:n})=>{const r=document.createElement("a");r.setAttribute("href",e);r.setAttribute("target","_blank");r.setAttribute("style",n);r.textContent=t;return r},b=e=>t=>{const{property:n,category:r,subProperty:i,defaultValue:s,filter:c}=t,u=Object(a.f)(r),d=Object(a.e)(r,n),p=Object(o.g)(e),h=p&&!0===p[`${r}.${n}`],m=Object(l.d)({category:r,property:n,subProperty:i},e),f=m||`${n}${i?"."+i:""}`,g=e=>{e.setAttribute("data-mce-hubspot-object","true");e.setAttribute("data-mce-property-category",d?"property-only":r);e.setAttribute("data-mce-property-name",n);i&&e.setAttribute("data-mce-subproperty",i);m&&e.setAttribute("data-mce-property-label",m);null!=s&&e.setAttribute("data-mce-property-default-value",s);c&&e.setAttribute("data-mce-filter",c);h&&e.setAttribute("data-mce-data-sensitivity",!0);e.classList.add(u)};return Object(l.j)(f,r,g,h)},O=e=>t=>{const n=["unsubscribe","viewaswebpage","emailoptin"],r=e=>n.find(t=>e.hasAttribute("data-"+t)),i=Array.from(t.querySelectorAll("input.hubspot-mergetag"));Object(d.g)(i,t=>{if(t.hasAttribute("data-canspam")){const n=Object(l.f)(t.getAttribute("data-canspam"));if(n)return b(e)(n)}else if(r(t)){const e=r(t);if(e)return g({text:t.getAttribute("value"),href:t.getAttribute("data-"+e),style:t.getAttribute("data-style")})}else if(t.hasAttribute("value")){const n=Object(l.k)("contact."+t.getAttribute("value"));if(n)return b(e)(n)}return t})},y=e=>t=>{const n=t.getAttribute("data-mce-property-category"),r=t.getAttribute("data-mce-property-name"),o=t.getAttribute("data-mce-subproperty"),s=t.getAttribute("data-mce-property-default-value"),c=t.getAttribute("data-mce-filter"),u=s&&i.a.html.Entities.decode(s);let d="";const{customObjectPrefixes:p}=e||{};if(p){const e="property-only"===n?r:n;d=p&&p[e]||""}const h=document.createTextNode(Object(a.a)({prefix:d,category:n,property:r,subProperty:o,defaultValue:u?m(u):u,filter:c}));return Object(l.b)(t,h)},j=e=>t=>b(e)(t).outerHTML,v=e=>{const t=Object(u.c)(e);let n={},r=[];if(t){n=t.customObjectPrefixes;r=t.supportedCrmObjectFQNs}Object(d.b)(e,O(t));Object(l.a)(e,r,n,[{TOKEN_PATTERN:Object(c.c)(t),USES_DEFAULT:!1,PROPERTY_ONLY:!1},{TOKEN_PATTERN:Object(c.b)(t),USES_DEFAULT:!1,PROPERTY_ONLY:!0},{TOKEN_PATTERN:Object(c.d)(t),USES_DEFAULT:!0,PROPERTY_ONLY:!1}],j(t),y(t))},C=e=>{const t=Object(u.c)(e),n=e.getBody();if(n){Array.from(n.querySelectorAll("[data-mce-property-name]:not([data-mce-property-label]):not([data-mce-rss-link]):not([data-mce-property-category=post])")).forEach(e=>{const n=e.getAttribute("data-mce-property-name"),r=e.getAttribute("data-mce-property-category"),i=e.getAttribute("data-mce-subproperty"),o=e.getAttribute("data-mce-property-default-value"),a=e.getAttribute("data-mce-filter"),s=b(t)({property:n,category:r,subProperty:i,defaultValue:o,filter:a}),c=e.parentNode;c&&s&&c.replaceChild(s,e)})}},x=e=>{const t=Object(u.c)(e);return t?{isEmail:t.isEmail,hideFallbacks:t.hideFallbacks,hideSiteSettingsCategory:t.hideSiteSettingsCategory,includeInternalContactRecord:t.includeInternalContactRecord,includeSubscriptionTypeCategory:t.includeSubscriptionTypeCategory,allowEmptyFallbacks:t.allowEmptyFallbacks,supportedCrmObjectFQNs:t.supportedCrmObjectFQNs,customObjectPrefixes:t.customObjectPrefixes,useFlexibleAssociations:t.useFlexibleAssociations,useAsUpgradePoint:t.useAsUpgradePoint,dataTokenContext:t.dataTokenContext,unsupportedTokens:t.unsupportedTokens}:{}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));const r={UNINITIALIZED:"uninitialized",PENDING:"pending",SUCCEEDED:"succeeded",FAILED:"failed"}},function(e,t,n){"use strict";function r(){let e=()=>{},t=()=>{};return{promise:new Promise((n,r)=>{e=n;t=r}),resolve:e,reject:t}}t.a=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(40),i=n(41),o=n(0);function a(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function s(e,t){return e(t={exports:{}},t.exports),t.exports}var c=function(){for(var e=arguments.length,t=[],n=0;n<e;n++)t[n]=arguments[n];if(0!==(t=t.filter((function(e){return null!=e}))).length)return 1===t.length?t[0]:t.reduce((function(e,t){return function(){e.apply(this,arguments);t.apply(this,arguments)}}))},l=function(){};!1&&(l=function(e,t,n){var r=arguments.length;n=new Array(r>2?r-2:0);for(var i=2;i<r;i++)n[i-2]=arguments[i];if(void 0===t)throw new Error("`warning(condition, format, ...args)` requires a warning message argument");if(t.length<10||/^[s\W]*$/.test(t))throw new Error("The warning format should be able to uniquely identify this warning. Please, use a more descriptive format than: "+t);if(!e){var o=0,a="Warning: "+t.replace(/%s/g,(function(){return n[o++]}));"undefined"!=typeof console&&console.error(a);try{throw new Error(a)}catch(e){}}});var u=l,d=s((function(e,t){t.__esModule=!0;t.getChildMapping=n;t.mergeChildMappings=i;function n(e){if(!e)return e;var t={};r.Children.map(e,(function(e){return e})).forEach((function(e){t[e.key]=e}));return t}function i(e,t){e=e||{};t=t||{};function n(n){return t.hasOwnProperty(n)?t[n]:e[n]}var r={},i=[];for(var o in e)if(t.hasOwnProperty(o)){if(i.length){r[o]=i;i=[]}}else i.push(o);var a=void 0,s={};for(var c in t){if(r.hasOwnProperty(c))for(a=0;a<r[c].length;a++){var l=r[c][a];s[r[c][a]]=n(l)}s[c]=n(c)}for(a=0;a<i.length;a++)s[i[a]]=n(i[a]);return s}}));a(d);d.getChildMapping,d.mergeChildMappings;var p=s((function(e,t){t.__esModule=!0;var n=Object.assign,o=l(c),a=l(r),s=l(i);l(u);function l(e){return e&&e.__esModule?e:{default:e}}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function m(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}s.default.any,s.default.func,s.default.node;var f={component:"span",childFactory:function(e){return e}},g=function(e){m(t,e);function t(r,i){p(this,t);var o=h(this,e.call(this,r,i));o.performAppear=function(e,t){o.currentlyTransitioningKeys[e]=!0;t.componentWillAppear?t.componentWillAppear(o._handleDoneAppearing.bind(o,e,t)):o._handleDoneAppearing(e,t)};o._handleDoneAppearing=function(e,t){t.componentDidAppear&&t.componentDidAppear();delete o.currentlyTransitioningKeys[e];var n=(0,d.getChildMapping)(o.props.children);n&&n.hasOwnProperty(e)||o.performLeave(e,t)};o.performEnter=function(e,t){o.currentlyTransitioningKeys[e]=!0;t.componentWillEnter?t.componentWillEnter(o._handleDoneEntering.bind(o,e,t)):o._handleDoneEntering(e,t)};o._handleDoneEntering=function(e,t){t.componentDidEnter&&t.componentDidEnter();delete o.currentlyTransitioningKeys[e];var n=(0,d.getChildMapping)(o.props.children);n&&n.hasOwnProperty(e)||o.performLeave(e,t)};o.performLeave=function(e,t){o.currentlyTransitioningKeys[e]=!0;t.componentWillLeave?t.componentWillLeave(o._handleDoneLeaving.bind(o,e,t)):o._handleDoneLeaving(e,t)};o._handleDoneLeaving=function(e,t){t.componentDidLeave&&t.componentDidLeave();delete o.currentlyTransitioningKeys[e];var r=(0,d.getChildMapping)(o.props.children);r&&r.hasOwnProperty(e)?o.keysToEnter.push(e):o.setState((function(t){var r=n({},t.children);delete r[e];return{children:r}}))};o.childRefs=Object.create(null);o.state={children:(0,d.getChildMapping)(r.children)};return o}t.prototype.UNSAFE_componentWillMount=function(){this.currentlyTransitioningKeys={};this.keysToEnter=[];this.keysToLeave=[]};t.prototype.componentDidMount=function(){var e=this.state.children;for(var t in e)e[t]&&this.performAppear(t,this.childRefs[t])};t.prototype.UNSAFE_componentWillReceiveProps=function(e){var t=(0,d.getChildMapping)(e.children),n=this.state.children;this.setState({children:(0,d.mergeChildMappings)(n,t)});for(var r in t){var i=n&&n.hasOwnProperty(r);!t[r]||i||this.currentlyTransitioningKeys[r]||this.keysToEnter.push(r)}for(var o in n){var a=t&&t.hasOwnProperty(o);!n[o]||a||this.currentlyTransitioningKeys[o]||this.keysToLeave.push(o)}};t.prototype.componentDidUpdate=function(){var e=this,t=this.keysToEnter;this.keysToEnter=[];t.forEach((function(t){return e.performEnter(t,e.childRefs[t])}));var n=this.keysToLeave;this.keysToLeave=[];n.forEach((function(t){return e.performLeave(t,e.childRefs[t])}))};t.prototype.render=function(){var e=this,t=[],r=function(n){var r=e.state.children[n];if(r){var i="string"!=typeof r.ref,s=e.props.childFactory(r),c=function(t){e.childRefs[n]=t};s===r&&i&&(c=(0,o.default)(r.ref,c));t.push(a.default.cloneElement(s,{key:n,ref:c}))}};for(var i in this.state.children)r(i);var s=n({},this.props);delete s.transitionLeave;delete s.transitionName;delete s.transitionAppear;delete s.transitionEnter;delete s.childFactory;delete s.transitionLeaveTimeout;delete s.transitionEnterTimeout;delete s.transitionAppearTimeout;delete s.component;return a.default.createElement(this.props.component,s,t)};return t}(a.default.Component);g.displayName="TransitionGroup";g.propTypes={};g.defaultProps=f;t.default=g;e.exports=t.default}));a(p);var h=s((function(e){function t(e){return e&&e.__esModule?e:{default:e}}e.exports=t}));a(h);var m=s((function(e,t){t.__esModule=!0;t.default=n;function n(e,t){return e.classList?!!t&&e.classList.contains(t):-1!==(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")}e.exports=t.default}));a(m);var f=s((function(e,t){t.__esModule=!0;t.default=r;var n=h(m);function r(e,t){e.classList?e.classList.add(t):(0,n.default)(e,t)||("string"==typeof e.className?e.className=e.className+" "+t:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+t))}e.exports=t.default}));a(f);function g(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}var b=function(e,t){e.classList?e.classList.remove(t):"string"==typeof e.className?e.className=g(e.className,t):e.setAttribute("class",g(e.className&&e.className.baseVal||"",t))},O=s((function(e,t){t.__esModule=!0;t.default=void 0;var n=!("undefined"==typeof window||!window.document||!window.document.createElement);t.default=n;e.exports=t.default}));a(O);var y=s((function(e,t){t.__esModule=!0;t.default=void 0;var n,r=h(O),i=["","webkit","moz","o","ms"],o="clearTimeout",a=l,s=function(e,t){return e+(e?t[0].toUpperCase()+t.substr(1):t)+"AnimationFrame"};r.default&&i.some((function(e){var t=s(e,"request");if(t in window){o=s(e,"cancel");return a=function(e){return window[t](e)}}}));var c=(new Date).getTime();function l(e){var t=(new Date).getTime(),n=Math.max(0,16-(t-c)),r=setTimeout(e,n);c=t;return r}(n=function(e){return a(e)}).cancel=function(e){window[o]&&"function"==typeof window[o]&&window[o](e)};var u=n;t.default=u;e.exports=t.default}));a(y);var j=s((function(e,t){t.__esModule=!0;t.default=t.animationEnd=t.animationDelay=t.animationTiming=t.animationDuration=t.animationName=t.transitionEnd=t.transitionDuration=t.transitionDelay=t.transitionTiming=t.transitionProperty=t.transform=void 0;var n,r,i,o,a,s,c,l,u,d,p,m=h(O),f="transform";t.transform=f;t.animationEnd=i;t.transitionEnd=r;t.transitionDelay=c;t.transitionTiming=s;t.transitionDuration=a;t.transitionProperty=o;t.animationDelay=p;t.animationTiming=d;t.animationDuration=u;t.animationName=l;if(m.default){var g=y();n=g.prefix;t.transitionEnd=r=g.transitionEnd;t.animationEnd=i=g.animationEnd;t.transform=f=n+"-"+f;t.transitionProperty=o=n+"-transition-property";t.transitionDuration=a=n+"-transition-duration";t.transitionDelay=c=n+"-transition-delay";t.transitionTiming=s=n+"-transition-timing-function";t.animationName=l=n+"-animation-name";t.animationDuration=u=n+"-animation-duration";t.animationTiming=d=n+"-animation-delay";t.animationDelay=p=n+"-animation-timing-function"}var b={transform:f,end:r,property:o,timing:s,delay:c,duration:a};t.default=b;function y(){for(var e,t,n=document.createElement("div").style,r={O:function(e){return"o"+e.toLowerCase()},Moz:function(e){return e.toLowerCase()},Webkit:function(e){return"webkit"+e},ms:function(e){return"MS"+e}},i=Object.keys(r),o="",a=0;a<i.length;a++){var s=i[a];if(s+"TransitionProperty"in n){o="-"+s.toLowerCase();e=r[s]("TransitionEnd");t=r[s]("AnimationEnd");break}}!e&&"transitionProperty"in n&&(e="transitionend");!t&&"animationName"in n&&(t="animationend");n=null;return{animationEnd:t,transitionEnd:e,prefix:o}}}));a(j);j.animationEnd,j.animationDelay,j.animationTiming,j.animationDuration,j.animationName,j.transitionEnd,j.transitionDuration,j.transitionDelay,j.transitionTiming,j.transitionProperty,j.transform;var v=s((function(e,t){t.__esModule=!0;t.nameShape=void 0;t.transitionTimeout=a;o(r);var n=o(i);function o(e){return e&&e.__esModule?e:{default:e}}function a(e){var t="transition"+e+"Timeout",n="transition"+e;return function(e){if(e[n]){if(null==e[t])return new Error(t+" wasn't supplied to CSSTransitionGroup: this can cause unreliable animations and won't be supported in a future version of React. See https://fb.me/react-animation-transition-group-timeout for more information.");if("number"!=typeof e[t])return new Error(t+" must be a number (in milliseconds)")}return null}}t.nameShape=n.default.oneOfType([n.default.string,n.default.shape({enter:n.default.string,leave:n.default.string,active:n.default.string}),n.default.shape({enter:n.default.string,enterActive:n.default.string,leave:n.default.string,leaveActive:n.default.string,appear:n.default.string,appearActive:n.default.string})])}));a(v);v.nameShape,v.transitionTimeout;var C=s((function(e,t){t.__esModule=!0;var n=Object.assign,a=d(f),s=d(b),c=d(y),l=d(r),u=d(i);function d(e){return e&&e.__esModule?e:{default:e}}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function m(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var g=[];j.transitionEnd&&g.push(j.transitionEnd);j.animationEnd&&g.push(j.animationEnd);function O(e,t){g.length?g.forEach((function(n){return e.addEventListener(n,t,!1)})):setTimeout(t,0);return function(){g.length&&g.forEach((function(n){return e.removeEventListener(n,t,!1)}))}}u.default.node,v.nameShape.isRequired,u.default.bool,u.default.bool,u.default.bool,u.default.number,u.default.number,u.default.number;var C=function(e){m(t,e);function t(){var n,r,i;p(this,t);for(var o=arguments.length,a=Array(o),s=0;s<o;s++)a[s]=arguments[s];return i=(n=r=h(this,e.call.apply(e,[this].concat(a))),r.componentWillAppear=function(e){r.props.appear?r.transition("appear",e,r.props.appearTimeout):e()},r.componentWillEnter=function(e){r.props.enter?r.transition("enter",e,r.props.enterTimeout):e()},r.componentWillLeave=function(e){r.props.leave?r.transition("leave",e,r.props.leaveTimeout):e()},n),h(r,i)}t.prototype.UNSAFE_componentWillMount=function(){this.classNameAndNodeQueue=[];this.transitionTimeouts=[]};t.prototype.componentWillUnmount=function(){this.unmounted=!0;this.timeout&&clearTimeout(this.timeout);this.transitionTimeouts.forEach((function(e){clearTimeout(e)}));this.classNameAndNodeQueue.length=0};t.prototype.transition=function(e,t,n){var r=(0,o.findDOMNode)(this);if(r){var i=this.props.name[e]||this.props.name+"-"+e,c=this.props.name[e+"Active"]||i+"-active",l=null,u=void 0;(0,a.default)(r,i);this.queueClassAndNode(c,r);var d=function(e){if(!e||e.target===r){clearTimeout(l);u&&u();(0,s.default)(r,i);(0,s.default)(r,c);u&&u();t&&t()}};if(n){l=setTimeout(d,n);this.transitionTimeouts.push(l)}else j.transitionEnd&&(u=O(r,d))}else t&&t()};t.prototype.queueClassAndNode=function(e,t){var n=this;this.classNameAndNodeQueue.push({className:e,node:t});this.rafHandle||(this.rafHandle=(0,c.default)((function(){return n.flushClassNameAndNodeQueue()})))};t.prototype.flushClassNameAndNodeQueue=function(){this.unmounted||this.classNameAndNodeQueue.forEach((function(e){e.node.scrollTop;(0,a.default)(e.node,e.className)}));this.classNameAndNodeQueue.length=0;this.rafHandle=null};t.prototype.render=function(){var e=n({},this.props);delete e.name;delete e.appear;delete e.enter;delete e.leave;delete e.appearTimeout;delete e.enterTimeout;delete e.leaveTimeout;delete e.children;return l.default.cloneElement(l.default.Children.only(this.props.children),e)};return t}(l.default.Component);C.displayName="CSSTransitionGroupChild";C.propTypes={};t.default=C;e.exports=t.default}));a(C);var x=s((function(e,t){t.__esModule=!0;var n=Object.assign,o=l(r),a=l(i),s=l(p),c=l(C);function l(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}v.nameShape.isRequired,a.default.bool,a.default.bool,a.default.bool,(0,v.transitionTimeout)("Appear"),(0,v.transitionTimeout)("Enter"),(0,v.transitionTimeout)("Leave");var m={transitionAppear:!1,transitionEnter:!0,transitionLeave:!0},f=function(e){h(t,e);function t(){var n,r,i;u(this,t);for(var a=arguments.length,s=Array(a),l=0;l<a;l++)s[l]=arguments[l];return i=(n=r=d(this,e.call.apply(e,[this].concat(s))),r._wrapChild=function(e){return o.default.createElement(c.default,{name:r.props.transitionName,appear:r.props.transitionAppear,enter:r.props.transitionEnter,leave:r.props.transitionLeave,appearTimeout:r.props.transitionAppearTimeout,enterTimeout:r.props.transitionEnterTimeout,leaveTimeout:r.props.transitionLeaveTimeout},e)},n),d(r,i)}t.prototype.render=function(){return o.default.createElement(s.default,n({},this.props,{childFactory:this._wrapChild}))};return t}(o.default.Component);f.displayName="CSSTransitionGroup";f.propTypes={};f.defaultProps=m;t.default=f;e.exports=t.default}));a(x);var E=s((function(e){var t=r(x),n=r(p);function r(e){return e&&e.__esModule?e:{default:e}}e.exports={TransitionGroup:n.default,CSSTransitionGroup:t.default}})),T=a(E),S=E.TransitionGroup,I=E.CSSTransitionGroup;t.CSSTransitionGroup=I;t.TransitionGroup=S;t.default=T},function(e,t,n){"use strict";var r=n(2),i=n(4),o=n(434),a=n(2735),s=n(2679),c=n(710),l=n(45);const u=["iconButtons","i18nKey","tooltipPlacement","children"],d=(e,t,n,r=!1)=>{const o=e=>{e.preventDefault()};return e.map(({iconName:u,onClick:d},p)=>{const h={};(p<e.length-1||r)&&(h.className="popover-preview__head-node");const m="popover-lite-icon-button-"+u;return Object(l.jsx)(a.a,Object.assign({},h,{children:Object(l.jsx)(c.a,{"data-test-id":m,use:"transparent",placement:n,size:"small",tooltip:i.a.text(t(u)),onClick:d,onMouseDown:o,children:Object(l.jsx)(s.a,{name:u})})}),m)})};function p(e){const{iconButtons:t,i18nKey:n,tooltipPlacement:i="bottom",children:a}=e,s=Object(r.a)(e,u);return Object(l.jsxs)(o.a,Object.assign({},s,{className:"p-all-1",tabIndex:-1,children:[d(t,n,i,!!a),a]}))}p.displayName="PopoverBodyLiteBase";t.a=p},function(e,t,n){"use strict";var r=n(41),i=n.n(r),o=n(40),a=n(1215),s=n(453),c=n(302),l=n(1290),u=n(45);class d extends o.Component{constructor(e){super(e);e.editor.settings.inline&&e.editor.settings.canvasToolbar&&(this.zIndex=Number(c.A))}render(){return Object(u.jsx)(s.a,Object.assign({},Object(a.g)(["editor","onRemove","zIndex"],this.props),{zIndex:this.zIndex}))}}d.propTypes=Object.assign({},s.a.propTypes,{open:i.a.bool});d.defaultProps=Object.assign({},Object(a.g)(["placement","arrowSize"],s.a.defaultProps),{arrowSize:"medium",placement:"right bottom",animateOnToggle:!1,open:!0});t.a=Object(l.a)(d)},function(e,t,n){"use strict";var r=n(41),i=n.n(r),o=n(40),a=n(345),s=n(45);const c=e=>{class t extends o.Component{constructor(e){super(e);this.handleEditorBlur=this.handleEditorBlur.bind(this);this.handleEditorRemove=this.handleEditorRemove.bind(this);this.blurEvents=e.editor.settings.blurEvents?["blur",e.editor.settings.blurEvents].join(" "):"blur"}componentDidMount(){const{onRemove:e,editor:t}=this.props;t.settings.inline||(t.getWin()?t.getWin().addEventListener("scroll",e):t.on("init",()=>{t.getWin().addEventListener("scroll",e)}));t.on("remove",this.handleEditorRemove,!0);t.on(this.blurEvents,this.handleEditorBlur)}componentWillUnmount(){const{onRemove:e,editor:t}=this.props;if(!t.removed){t.getWin().removeEventListener("scroll",e);t.off("remove",this.handleEditorRemove);t.off(this.blurEvents,this.handleEditorBlur)}}handleEditorBlur(){const{onRemove:e}=this.props;setTimeout(e)}handleEditorRemove(){const{onRemove:e,editor:t}=this.props;!t.settings.inline&&t.getWin()&&t.getWin().removeEventListener&&t.getWin().removeEventListener("scroll",e);e()}render(){return Object(s.jsx)(e,Object.assign({className:"mce-hubspot-popover",pinToConstraint:["left","right","top","bottom"]},this.props))}}t.propTypes={editor:i.a.object.isRequired,onRemove:i.a.func};t.defaultProps={onRemove:()=>{}};t.displayName=`TinyMcePopoverLifecycle(${Object(a.a)(e)})`;return t};t.a=c},function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n(2),i=n(41),o=n.n(i),a=n(40),s=n(345),c=n(1269),l=n(45);const u=["defaultMode"];function d(e){class t extends a.Component{constructor(e){super(e);this.handleModeChange=e=>{e||(e=this.state.mode===c.d.PREVIEW?c.d.EDIT:c.d.PREVIEW);e!==this.state.mode&&this.setState({mode:e})};this.state={mode:this.props.defaultMode||c.d.PREVIEW}}render(){const t=this.props,n=Object(r.a)(t,u);return Object(l.jsx)(e,Object.assign({mode:this.state.mode,onModeChange:this.handleModeChange},n))}}t.propTypes={defaultMode:o.a.string};t.displayName=`PopoverModeState(${Object(s.a)(e)})`;return t}},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(2),i=n(40),o=n(4),a=n(2654),s=n(45);const c=["editor"];function l(e){const{editor:t}=e,n=Object(r.a)(e,c),[l,u]=Object(i.useState)(""),[d,p]=Object(i.useState)(null),h=Object(i.useRef)(d);Object(i.useEffect)(()=>{h.current=d});const m=Object(i.useCallback)(()=>{if(h.current){u("");p(null)}},[h]);Object(i.useEffect)(()=>{const e=({target:e})=>{if(!e){m();return}const t=e,n="true"===t.getAttribute("data-mce-data-sensitivity"),r="true"===t.getAttribute("data-mce-truncated-label");if(e!==h.current)if(n){u(o.a.text("TinymcePlugins.hsdatatoken.dataSensitivityTooltip"));p(t)}else if(t.hasAttribute("data-mce-token-path")&&r){u(t.getAttribute("data-mce-property-label")||"");p(t)}else m()};t.on("mouseover",e);return()=>{t.off("mouseover",e)}},[t,h,m]);return Object(s.jsx)(a.a,Object.assign({},n,{"data-test-id":"data-token-tooltip",open:!!d,target:d,title:l,children:Object(s.jsx)(s.Fragment,{})}))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));n.d(t,"c",(function(){return a}));n.d(t,"b",(function(){return s}));var r=n(1240);const i=e=>`\`${e}\` component is required`,o=(e,t,n)=>{const o=n||i(t);if(e.settings[r.b]&&e.settings[r.b].pickerComponents){const n=e.settings[r.b].pickerComponents[t];if(!n)throw new Error(o);return n}throw new Error(o)},a=(e,t)=>{const n=e.settings.gates;return Array.isArray(n)&&n.includes(t)},s=(e,t)=>Array.isArray(t)&&t.includes(e)},function(e,t,n){"use strict";n.d(t,"b",(function(){return r}));n.d(t,"c",(function(){return i}));n.d(t,"a",(function(){return o}));n.d(t,"d",(function(){return a}));const r=/{{-?\s*([a-zA-Z0-9_()\-[\]]+(?:[.][a-zA-Z0-9_()\-[\]]+)*)\s*-?}}/g,i=/{{-?\s*personalization_token\(\s*["']([a-zA-Z0-9_()\-[\]]+(?:[.][a-zA-Z0-9_()\-[\]]+)*)["']\s*,\s*["'](.*?)["']{1}\s*\)\s*-?}}/g,o="(?:\\|(.*?))?",a={HIDE_SITE_SETTINGS_CATEGORY:"hideSiteSettingsCategory",INCLUDE_SUBSCRIPTION_TYPE_CATEGORY:"includeSubscriptionTypeCategory",INCLUDE_INTERNAL_CONTACT_RECORD:"includeInternalContactRecord",ALLOW_EMPTY_FALLBACKS:"allowEmptyFallbacks",IS_EMAIL:"isEmail",HIDE_FALLBACKS:"hideFallbacks",SUPPORTED_CRM_OBJECT_FQNS:"supportedCrmObjectFQNs",CUSTOM_OBJECT_PREFIXES:"customObjectPrefixes",USE_FLEXIBLE_ASSOCIATIONS:"useFlexibleAssociations",PROPERTY_FILTERS_CALLBACK:"propertyFiltersCallback",USE_AS_UPGRADE_POINT:"useAsUpgradePoint",TOKEN_PATHS_CONTENT_CONTEXT:"dataTokenContentContext",UNSUPPORTED_TOKENS:"unsupportedTokens",UNSUPPORTED_DATA_TOKEN_PATHS:"unsupportedDataTokenPaths",RENDER_DATA_TOKEN_POPOVER:"renderDataTokenPopover",USE_DEFAULT_LABEL_FOR_CRM_OBJECT_TYPES:"useDefaultLabelForCrmObjectTypes",MAX_TOKEN_WIDTH:"maxTokenWidth"}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));const r="post"},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(1212),i=n.n(r),o=n(1242),a=n(2702);const s=o.r;function c(e){Object(a.a)(e,s)}i.a.PluginManager.add(s,c)},function(e,t,n){"use strict";var r=n(2),i=n(41),o=n.n(i),a=n(40),s=n(345),c=n(45);const l=["editor","eventKey"],u=e=>{function t(t){const{editor:n,eventKey:i}=t,o=Object(r.a)(t,l),[s,u]=Object(a.useState)(!1);Object(a.useEffect)(()=>{const e=({selected:e})=>{u(!!e)};n.on(i,e);return()=>{n.off(i,e)}},[n,i]);return Object(c.jsx)(e,Object.assign({selected:s},o))}t.propTypes={editor:o.a.object.isRequired,eventKey:o.a.string.isRequired};t.displayName=`WithSelectedState(${Object(s.a)(e)})`;return t};t.a=u},function(e,t,n){"use strict";n.d(t,"b",(function(){return o}));n.d(t,"c",(function(){return a}));n.d(t,"a",(function(){return s}));var r=n(1215);const i=(e,t)=>Array.isArray(t)&&t.includes(e),o=(e,t)=>Array.isArray(t)&&t.includes(e),a=Object(r.b)((e,t,n)=>e.reduce((e,{gate:t,plugin:r})=>[...e,...i(t,n)?[r]:[]],t)),s=Object(r.b)((e,t)=>Object.keys(e).reduce((n,r)=>{if(i(r,t)){const{plugin:t,flag:i}=e[r];t&&n.plugins.push(t);i&&(n.flags[i]=!0)}return n},{plugins:[],flags:{}}))},function(e,t,n){"use strict";n.d(t,"h",(function(){return o}));n.d(t,"d",(function(){return a}));n.d(t,"f",(function(){return s}));n.d(t,"a",(function(){return c}));n.d(t,"c",(function(){return l}));n.d(t,"g",(function(){return u}));n.d(t,"b",(function(){return d}));n.d(t,"e",(function(){return p}));n.d(t,"j",(function(){return h}));n.d(t,"k",(function(){return m}));n.d(t,"n",(function(){return f}));n.d(t,"i",(function(){return g}));n.d(t,"m",(function(){return b}));n.d(t,"l",(function(){return O}));var r=n(324),i=n(1257);const o=["de","es","ja","pt","fr"],a="marketing-video",s="video-advanced-lead-gen",c="chatspot-access",l="cta-access",u="calls-to-action-read",d="file-manager-write",p="flexible-associations",h={"Andale Mono":'"Andale Mono", AndaleMono, "Lucida Console", monospace',Arial:"Arial, Helvetica, sans-serif","Book Antiqua":'"Book Antiqua", Palatino, Georgia, serif',"Courier New":'"Courier New", Courier, monospace',Georgia:'Georgia, Palatino, Times, "Times New Roman", serif',Helvetica:"Helvetica, Arial, sans-serif",Impact:"Impact, Chicago, Arial Black, Arial, sans serif",Symbol:"Symbol",Tahoma:"Tahoma, Arial, Helvetica, sans-serif",Monaco:"monaco, monospace",Terminal:"terminal, monospace","Times New Roman":'"Times New Roman", Times, serif',"Trebuchet MS":'"Trebuchet MS", Geneva, Tahoma, sans-serif',Verdana:"Verdana, Geneva, sans-serif"},m=["8","10","12","14","16","18","20","24","30","36","48","60","72"],f=[1,1.15,1.25,1.5,1.75,2,2.5,3,4],g=(Object.keys(i.a).map(e=>({regex:i.a[e].regex,methods:i.a[e].methods})),{BUTTON:"BUTTON",SELECT:"SELECT",DIVIDER:"DIVIDER",MORE_MENU:"MORE_MENU",ADVANCED_MENU:"ADVANCED_MENU",INSERT_MENU:"INSERT_MENU"}),b=()=>({width:"100%","margin-left":"auto","margin-right":"auto","border-color":r.FLINT,"border-width":"1px","border-style":"solid","border-collapse":"collapse","table-layout":"fixed"}),O=()=>({padding:"4px"})},function(e,t,n){"use strict";n.d(t,"c",(function(){return a}));n.d(t,"a",(function(){return s}));n.d(t,"b",(function(){return l}));var r=n(1212),i=n.n(r);const o=e=>{if(!(i.a.activeEditor.id===e.id)){const t=e.bodyElement;if(t.hasChildNodes()){const n=t.childNodes,r=n[n.length-1];e.selection.select(r);e.selection.collapse()}else{e.selection.select(t);e.selection.collapse()}}},a=e=>{if(e){o(e);e.fire("OpenPersonalizePopover")}else console.error("[tinymce-config] openPersonalizePopover called without editor argument")},s=e=>i.a.html.Entities.decode(e.getContent()),c=i.a.html.Entities.getEncodeFunc("named"),l=e=>c(e)},function(e,t,n){(function(e){"use strict";e.defineOption("search",{bottom:!1});function t(e,t){"string"==typeof e?e=new RegExp(e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),t?"gi":"g"):e.global||(e=new RegExp(e.source,e.ignoreCase?"gi":"g"));return{token:function(t){e.lastIndex=t.pos;var n=e.exec(t.string);if(n&&n.index==t.pos){t.pos+=n[0].length||1;return"searching"}n?t.pos=n.index:t.skipToEnd()}}}function n(){this.posFrom=this.posTo=this.lastQuery=this.query=null;this.overlay=null}function r(e){return e.state.search||(e.state.search=new n)}function i(e){return"string"==typeof e&&e==e.toLowerCase()}function o(e,t,n){return e.getSearchCursor(t,n,{caseFold:i(t),multiline:!0})}function a(e,t,n,r,i){e.openDialog(t,r,{value:n,selectValueOnOpen:!0,closeOnEnter:!1,onClose:function(){m(e)},onKeyDown:i,bottom:e.options.search.bottom})}function s(e,t,n,r,i){e.openDialog?e.openDialog(t,i,{value:r,selectValueOnOpen:!0,bottom:e.options.search.bottom}):i(prompt(n,r))}function c(e,t,n,r){e.openConfirm?e.openConfirm(t,r):confirm(n)&&r[0]()}function l(e){return e.replace(/\\([nrt\\])/g,(function(e,t){return"n"==t?"\n":"r"==t?"\r":"t"==t?"\t":"\\"==t?"\\":e}))}function u(e){var t=e.match(/^\/(.*)\/([a-z]*)$/);if(t)try{e=new RegExp(t[1],-1==t[2].indexOf("i")?"":"i")}catch(e){}else e=l(e);("string"==typeof e?""==e:e.test(""))&&(e=/x^/);return e}function d(e,n,r){n.queryText=r;n.query=u(r);e.removeOverlay(n.overlay,i(n.query));n.overlay=t(n.query,i(n.query));e.addOverlay(n.overlay);if(e.showMatchesOnScrollbar){if(n.annotate){n.annotate.clear();n.annotate=null}n.annotate=e.showMatchesOnScrollbar(n.query,i(n.query))}}function p(t,n,i,o){var c=r(t);if(c.query)return h(t,n);var l=t.getSelection()||c.lastQuery;l instanceof RegExp&&"x^"==l.source&&(l=null);if(i&&t.openDialog){var u=null,p=function(n,r){e.e_stop(r);if(n){if(n!=c.queryText){d(t,c,n);c.posFrom=c.posTo=t.getCursor()}u&&(u.style.opacity=1);h(t,r.shiftKey,(function(e,n){var r;n.line<3&&document.querySelector&&(r=t.display.wrapper.querySelector(".CodeMirror-dialog"))&&r.getBoundingClientRect().bottom-4>t.cursorCoords(n,"window").top&&((u=r).style.opacity=.4)}))}};a(t,g(t),l,p,(function(n,i){var o=e.keyName(n),a=t.getOption("extraKeys"),s=a&&a[o]||e.keyMap[t.getOption("keyMap")][o];if("findNext"==s||"findPrev"==s||"findPersistentNext"==s||"findPersistentPrev"==s){e.e_stop(n);d(t,r(t),i);t.execCommand(s)}else if("find"==s||"findPersistent"==s){e.e_stop(n);p(i,n)}}));if(o&&l){d(t,c,l);h(t,n)}}else s(t,g(t),"Search for:",l,(function(e){e&&!c.query&&t.operation((function(){d(t,c,e);c.posFrom=c.posTo=t.getCursor();h(t,n)}))}))}function h(t,n,i){t.operation((function(){var a=r(t),s=o(t,a.query,n?a.posFrom:a.posTo);if(s.find(n)||(s=o(t,a.query,n?e.Pos(t.lastLine()):e.Pos(t.firstLine(),0))).find(n)){t.setSelection(s.from(),s.to());t.scrollIntoView({from:s.from(),to:s.to()},20);a.posFrom=s.from();a.posTo=s.to();i&&i(s.from(),s.to())}}))}function m(e){e.operation((function(){var t=r(e);t.lastQuery=t.query;if(t.query){t.query=t.queryText=null;e.removeOverlay(t.overlay);if(t.annotate){t.annotate.clear();t.annotate=null}}}))}function f(e,t){var n=e?document.createElement(e):document.createDocumentFragment();for(var r in t)n[r]=t[r];for(var i=2;i<arguments.length;i++){var o=arguments[i];n.appendChild("string"==typeof o?document.createTextNode(o):o)}return n}function g(e){var t=f("label",{className:"CodeMirror-search-label"},e.phrase("Search:"),f("input",{type:"text",style:"width: 10em",className:"CodeMirror-search-field",id:"CodeMirror-search-field"}));t.setAttribute("for","CodeMirror-search-field");return f("",null,t," ",f("span",{style:"color: #666",className:"CodeMirror-search-hint"},e.phrase("(Use /re/ syntax for regexp search)")))}function b(e){return f("",null," ",f("input",{type:"text",style:"width: 10em",className:"CodeMirror-search-field"})," ",f("span",{style:"color: #666",className:"CodeMirror-search-hint"},e.phrase("(Use /re/ syntax for regexp search)")))}function O(e){return f("",null,f("span",{className:"CodeMirror-search-label"},e.phrase("With:"))," ",f("input",{type:"text",style:"width: 10em",className:"CodeMirror-search-field"}))}function y(e){return f("",null,f("span",{className:"CodeMirror-search-label"},e.phrase("Replace?"))," ",f("button",{},e.phrase("Yes"))," ",f("button",{},e.phrase("No"))," ",f("button",{},e.phrase("All"))," ",f("button",{},e.phrase("Stop")))}function j(e,t,n){e.operation((function(){for(var r=o(e,t);r.findNext();)if("string"!=typeof t){var i=e.getRange(r.from(),r.to()).match(t);r.replace(n.replace(/\$(\d)/g,(function(e,t){return i[t]})))}else r.replace(n)}))}function v(e,t){if(!e.getOption("readOnly")){var n=e.getSelection()||r(e).lastQuery,i=t?e.phrase("Replace all:"):e.phrase("Replace:"),a=f("",null,f("span",{className:"CodeMirror-search-label"},i),b(e));s(e,a,i,n,(function(n){if(n){n=u(n);s(e,O(e),e.phrase("Replace with:"),"",(function(r){r=l(r);if(t)j(e,n,r);else{m(e);var i=o(e,n,e.getCursor("from")),a=function(){var t,l=i.from();if(!(t=i.findNext())){i=o(e,n);if(!(t=i.findNext())||l&&i.from().line==l.line&&i.from().ch==l.ch)return}e.setSelection(i.from(),i.to());e.scrollIntoView({from:i.from(),to:i.to()});c(e,y(e),e.phrase("Replace?"),[function(){s(t)},a,function(){j(e,n,r)}])},s=function(e){i.replace("string"==typeof n?r:r.replace(/\$(\d)/g,(function(t,n){return e[n]})));a()};a()}}))}}))}}e.commands.find=function(e){m(e);p(e)};e.commands.findPersistent=function(e){m(e);p(e,!1,!0)};e.commands.findPersistentNext=function(e){p(e,!1,!0,!0)};e.commands.findPersistentPrev=function(e){p(e,!0,!0,!0)};e.commands.findNext=p;e.commands.findPrev=function(e){p(e,!0)};e.commands.clearSearch=m;e.commands.replace=v;e.commands.replaceAll=function(e){v(e,!0)}})(n(522),n(582),n(584))},function(e,t){e.exports={addMenuItem:{name:"advancedMenusInteraction",class:"interaction",properties:{type:["NO_LINK","PAGE_LINK","URL_LINK","PAGE_LINK_WITH_PARAMS"],method:["button","divider"]},namespace:"advanced-menus",version:"1"}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(40),i=n(46),o=n(345),a=n(45);function s(e){return t=>{Object(i.a)("string"==typeof e,"%s.sessionStorage:  expected `baseKey` to be a string but got %s",Object(o.a)(t),e);const n=t=>`${e}:${t}`;class s extends r.Component{setSessionStorageItem(e,t){window.sessionStorage.setItem(n(e),JSON.stringify(t))}getSessionStorageItem(e){return JSON.parse(window.sessionStorage.getItem(n(e)))}removeSessionStorageItem(e){window.sessionStorage.removeItem(n(e))}render(){return Object(a.jsx)(t,Object.assign({},this.props,{setSessionStorageItem:this.setSessionStorageItem,getSessionStorageItem:this.getSessionStorageItem,removeSessionStorageItem:this.removeSessionStorageItem}))}}return s}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r=n(2),i=n(41),o=n.n(i),a=n(288),s=n.n(a),c=n(4),l=n(351),u=n(2679),d=n(460),p=n(461),h=n(45);const m=["className","size","titleText"];function f(e){let{className:t,size:n,titleText:i=(()=>c.a.text("salesUI.UILockBadge.title"))}=e,o=Object(r.a)(e,m);const a=s()("private-lock-badge",t);return Object(h.jsx)(u.a,Object.assign({},o,{"aria-label":Object(d.a)(i),className:a,name:"locked",size:n}))}f.propTypes={size:o.a.oneOfType([o.a.oneOf(Object.keys(l.c)),o.a.number]),titleText:Object(p.a)(o.a.string).isRequired};f.defaultProps={titleText:()=>c.a.text("salesUI.UILockBadge.title")};f.displayName="UILockBadge"},,,,,,,,function(e,t,n){"use strict";n.d(t,"a",(function(){return S}));var r=n(40),i=n(2634),o=n(4),a=n(279),s=n(2766),c=n(717),l=n(723),u=n(724),d=n(508),p=n(751),h=n(443),m=n(1305),f=n(2654),g=n(2741),b=n(2734),O=n(2679),y=n(160),j=n(72),v=n(607),C=n(66),x=n(45);const E=e=>"ContentComponents.cmv2.fields.baseResource."+e,T=e=>"ContentComponents.buttons."+e;function S(e){return t=>{class n extends r.PureComponent{constructor(e){super(e);this.onCreateModalOpen=this.onCreateModalOpen.bind(this);this.onCreateModalClose=this.onCreateModalClose.bind(this);this.onResourceNameChange=this.onResourceNameChange.bind(this);this.onCreateResource=this.onCreateResource.bind(this);this.openResource=this.openResource.bind(this);this.openNewResource=this.openNewResource.bind(this);this.onConflictError=this.onConflictError.bind(this);this.createResourceURL=this.createResourceURL.bind(this);this.onClickAddButton=this.onClickAddButton.bind(this);this.setHasLoadedOptions=this.setHasLoadedOptions.bind(this);this.renderCreateNewFooter=this.renderCreateNewFooter.bind(this);this.resourceWindow=null;const t=!!e.options.length;this.state={isOpen:!1,resourceName:"",hasConflictError:!1,hasLoadedOptions:t,hasAnyOptions:t,isCreating:!1}}componentDidMount(){const{hasAnyOptions:e}=this.state,{loadOptions:t}=this.props;e||t("",this.setHasLoadedOptions)}componentDidUpdate(){const{hasAnyOptions:e}=this.state,{options:t}=this.props;!e&&t.length&&this.setState({hasAnyOptions:!0})}setHasLoadedOptions(){this.setState({hasLoadedOptions:!0})}onCreateModalOpen(){this.setState({isOpen:!0,isCreating:!1})}onCreateModalClose(){this.setState({isOpen:!1,isCreating:!1,resourceName:""})}onResourceNameChange(e){this.setState({resourceName:e.target.value});this.state.hasConflictError&&this.setState({hasConflictError:!1})}onConflictError(){this.setState({hasConflictError:!0,isCreating:!1})}createResourceURL(t){switch(e){case y.FORM:return i.b.forms(t,this.props.redirectUrl);case y.WORKFLOW:return i.b.workflows(t);case y.FOLLOW_UP_EMAIL:return i.b.edit(t,2);case y.MENU:return i.b.advancedMenuSettings(t);default:return null}}openResource(){return window.open(this.createResourceURL(this.props.value))}openNewResource(e){this.resourceWindow.location=this.createResourceURL(e)}onCreateResource(){this.setState({isCreating:!0});if(this.props.onCreateResource)this.props.onCreateResource(this.state.resourceName,{onCreateModalClose:this.onCreateModalClose,onConflictError:this.onConflictError});else{this.resourceWindow=this.openResource();this.props.createResource(this.state.resourceName).then(e=>{if(e){if(e.status===j.a){this.onConflictError();return}const t=e.id;if(t){this.props.onFieldChange(t);this.openNewResource(t);this.onCreateModalClose()}else this.resourceWindow&&this.resourceWindow.close()}}).catch(e=>{setTimeout(()=>{throw e})})}}onClickAddButton(){this.props.onClickAddButton&&this.props.onClickAddButton();this.props.createResourceUrl?window.open(this.props.createResourceUrl):this.onCreateModalOpen()}getResourceTypeLabel(t=1){return o.a.text(E("typeLabels."+e),{count:t})}renderCreateResourceModal(){const{external:e}=this.props,{isOpen:t,resourceName:n,hasConflictError:r}=this.state;if(!t)return null;const i=this.getResourceTypeLabel(),o=r&&Object(x.jsx)(a.a,{message:E("conflictErrorMessage"),options:{type:i}});return Object(x.jsxs)(s.a,{children:[Object(x.jsxs)(l.a,{children:[Object(x.jsx)(c.a,{onClick:this.onCreateModalClose}),Object(x.jsx)(v.a,{children:Object(x.jsx)(a.a,{message:E("create"),options:{type:i}})})]}),Object(x.jsx)(u.a,{children:Object(x.jsx)(g.a,{error:r,validationMessage:o,label:Object(x.jsx)(a.a,{message:E("name")}),children:Object(x.jsx)(d.a,{value:n,onChange:this.onResourceNameChange})})}),Object(x.jsxs)(p.a,{children:[Object(x.jsxs)(m.a,{loading:this.state.isCreating,disabled:!n,onClick:this.onCreateResource,use:"primary",children:[Object(x.jsx)(a.a,{message:T("create")}),e?Object(x.jsx)(O.a,{name:"externalLink"}):null]}),Object(x.jsx)(h.a,{onClick:this.onCreateModalClose,children:Object(x.jsx)(a.a,{message:T("cancel")})})]})]})}renderCreateNewFooter(){return i.b.isUngated("CMv2:SelectResourceActionsUpdates")&&Object(x.jsx)(h.a,{onClick:this.onClickAddButton,use:"link",children:Object(x.jsx)(a.a,{message:E("add")})})}renderEditAddControls(){const{hasAnyOptions:e}=this.state,{addTooltip:t,disableAdd:n,disabled:r,disableEdit:o,editTooltip:s,external:c,onEditResource:l,value:u}=this.props;let d;if(e){d=Object(x.jsxs)(h.a,{"data-selenium":"edit-resource-button",use:"tertiary-light",disabled:!u||r||o,onClick:l||this.openResource,size:"extra-small",children:[Object(x.jsx)(a.a,{message:T("edit")}),c?Object(x.jsx)(O.a,{name:"externalLink"}):null]});s&&(d=Object(x.jsx)(f.a,{title:s,placement:"top right",children:d}))}let p=(!i.b.isUngated("CMv2:SelectResourceActionsUpdates")||!e)&&Object(x.jsx)(h.a,{"data-selenium":"create-resource-button",className:d?"m-left-2":"",disabled:r||n,use:"tertiary-light",onClick:this.onClickAddButton,size:"extra-small",children:Object(x.jsx)(a.a,{message:E(e?"add":"firstAdd"),options:{type:this.getResourceTypeLabel()}})});p&&t&&(p=Object(x.jsx)(f.a,{title:t,placement:"top right",children:p}));return Object(x.jsxs)("div",{children:[Object(x.jsxs)("div",{className:"cmv2-field-buttons",children:[d,p]}),this.renderCreateResourceModal()]})}renderComponent(){const{hasAnyOptions:e}=this.state,{optionsRequestStatus:n}=this.props;return n!==C.SUCCEEDED||e?Object(x.jsx)(t,Object.assign({},this.props,{createNewFooter:this.renderCreateNewFooter()})):Object(x.jsx)(a.a,{message:E("emptyMessage"),options:{type:this.getResourceTypeLabel(2)}})}render(){const{hasLoadedOptions:e}=this.state;return e?Object(x.jsxs)("div",{children:[this.renderComponent(),this.renderEditAddControls()]}):Object(x.jsx)(b.a,{})}}n.defaultProps={};n.displayName="WithCreateResourceModal";return n}}},,function(e,t,n){"use strict";var r=n(40),i=n(59),o=n(279),a=n(1136),s=n(73),c=n(2599),l=n(1088),u=n(1191),d=n(1315),p=n(443),h=n(1181),m=n(2793),f=n(1066),g=n(35),b=n(2758),O=n(45);const y=e=>"ContentComponents.cmv2.fields.icon."+e,j=e=>"ContentComponents.buttons."+e;function v(){const e=Object(f.c)();return function(t){return e(t)}}const C={fetchIcon:m.b,saveIcon:m.e,fetchSelectedIcons:m.d};class x extends r.PureComponent{constructor(e){super(e);this.onIconClear=this.onIconClear.bind(this);this.toggleIconDrawer=this.toggleIconDrawer.bind(this);this.onIconSelect=this.onIconSelect.bind(this);this.state={isIconDrawerOpen:!1}}componentDidMount(){const{value:e,icon_set:t}=this.props;e&&this.props.fetchIcon(t,{search:e.name})}componentDidUpdate(e){const{fetchIcon:t,fetchSelectedIcons:n,selectedIcons:r,icon_set:i,value:o}=this.props,{value:c}=e;e.selectedIcons!==r&&n();c&&o&&!Object(s.isEqual)(c.name,o.name)&&!r[Object(a.b)(o.name)]&&t(i,{search:o.name})}get icon(){const{selectedIcons:e,value:t}=this.props,n=t&&t.type?":"+t.type:"";return e[`${t&&Object(a.b)(t.name)}${n}`]}get iconName(){const{selectedIcons:e,value:t}=this.props;return t&&t.name?Object(a.a)(t.name,e):null}onIconClear(){this.props.onFieldChange({name:""})}toggleIconDrawer(){this.setState({isIconDrawerOpen:!this.state.isIconDrawerOpen})}onIconSelect(e){const{onFieldChange:t,saveIcon:n}=this.props,{name:r,unicode:i,type:o}=e;if(i!==b.n){this.toggleIconDrawer();const a={name:r,unicode:i,type:o};n(e);t(a)}}renderIconDrawer(){return Object(O.jsx)(d.a,{iconSet:this.props.icon_set,isOpen:this.state.isIconDrawerOpen,onClose:this.toggleIconDrawer,onIconSelect:this.onIconSelect})}renderIconPreview(){const{readOnly:e,value:t}=this.props,n=t&&Object(a.b)(t.name),i=this.icon;if(!!!i)return Object(O.jsxs)(u.a,{size:"lg",use:"default",children:[Object(O.jsx)(o.a,{message:y("noneSelected")}),Object(O.jsx)(p.a,{"data-test-id":"icon-field-button",size:"sm",disabled:e,onClick:this.toggleIconDrawer,use:"tertiary-light",children:Object(O.jsx)(o.a,{message:y("selectLabel")})})]});const s={name:n,viewPort:i.viewPort,svg:i.svg};return Object(O.jsxs)(r.Fragment,{children:[Object(O.jsx)(h.a,{alt:this.iconName,previewImage:Object(O.jsx)(l.a,{className:"cmv2-default-icon",height:150,width:150,iconData:s,onIconSelect:()=>{}}),onHoverlayClick:this.toggleIconDrawer,hoverlayLabel:Object(O.jsx)(o.a,{message:j("replace")}),readOnly:e}),Object(O.jsx)("div",{className:"text-center m-top-2",children:this.iconName})]})}render(){const{label:e,help_text:t,inline_help_text:n,readOnly:r,required:i,uploadedFileAccess:o}=this.props;return Object(O.jsxs)("section",{children:[Object(O.jsx)(c.a,{handleFileSelect:this.onIconSelect,hasValue:!!this.icon,helpText:t,inlineHelpText:n,label:e,onClearFile:this.onIconClear,onFileManagerOpen:this.toggleIconDrawer,readOnly:r,required:i,uploadedFileAccess:o,children:this.renderIconPreview()}),this.renderIconDrawer()]})}}x.defaultProps={icon_set:g.a,value:{}};t.a=Object(i.connect)(v,C)(x)},function(e,t,n){"use strict";var r=n(40),i=n(59),o=n(1148),a=n.n(o),s=n(73),c=n(279),l=n(282),u=n(443),d=n(724),p=n(717),h=n(723),m=n(1002),f=n(2754),g=n(2712),b=n(2734),O=n(2760),y=n(2745),j=n(2654),v=n(2758),C=n(1136),x=n(1088),E=n(2793),T=n(1066),S=n(607),I=n(35),w=n(45);const _=e=>"ContentComponents.cmv2.fields.icon."+e,N=100,A=100;function D(){const e=Object(T.c)();return function(t){return e(t)}}const k={fetchIcons:E.c,clearIcons:E.a};class P extends r.Component{constructor(e){super(e);this.increaseOffset=this.increaseOffset.bind(this);this.renderIcons=this.renderIcons.bind(this);this.renderShowMoreButton=this.renderShowMoreButton.bind(this);this.updateSearchInput=this.updateSearchInput.bind(this);this.debouncedSearchInput=Object(s.debounce)(this.updateSearchInput,v.c);this.state={searchTerm:"",offset:0,limit:N}}componentDidMount(){const{fetchIcons:e,icons:t,iconSet:n}=this.props;if(Object(s.isEmpty)(t)){e(n,{search:"",offset:0,limit:100})}}shouldComponentUpdate(e,t){return a()(this,e,t)}componentDidUpdate(e,t){const{clearIcons:n,fetchIcons:r,isOpen:i,iconSet:o}=this.props,{searchTerm:a,offset:s,limit:c}=this.state,l={search:a.toLowerCase(),offset:s,limit:c};if(a===t.searchTerm&&i===e.isOpen)s!==t.offset&&r(o,l);else{e.isOpen||(l.search="");n();r(o,l)}}increaseOffset(){const{offset:e}=this.state,t=e+A;this.setState({offset:t})}updateSearchInput(e){this.setState({searchTerm:e,offset:0,limit:N})}renderIcons(){const{isFetching:e,icons:t,onIconSelect:n,iconSet:r}=this.props,i=Object.keys(t).filter(e=>t[e].unicode!==v.n);return i.length?Object(s.flatten)(i.map(e=>t[e].styles.map(i=>{const o=t[e],{unicode:a,viewPort:s,categories:c}=o,l=o.svg[i],u={name:e,unicode:a,viewPort:s,svg:l,type:i,categories:c,iconSet:r};return Object(w.jsx)(j.a,{placement:"bottom",title:Object(C.a)(u.name,t),children:Object(w.jsx)(f.a,{className:"m-top-2",size:{md:2},children:Object(w.jsx)(x.a,{className:"menu-icon",height:50,iconData:u,onIconSelect:n,width:50})})},`${e}-${i}`)}))):e?Object(w.jsx)(b.a,{className:"icon-loading-spinner"}):Object(w.jsx)("div",{className:"p-all-2",children:Object(w.jsx)(c.a,{message:_("empty")})})}renderShowMoreButton(){const{hasMoreIcons:e,isFetching:t,totalIcons:n}=this.props,{offset:r,limit:i}=this.state;if(!e)return null;if(t)return Object(w.jsx)(b.a,{className:"show-more-loading-spinner"});const o=n-(r+i),a=Object(w.jsx)(g.a,{children:Object(w.jsx)(c.a,{message:_("loadMoreLabel")})});return Object(w.jsx)(u.a,{className:"show-more-button",onClick:this.increaseOffset,use:"unstyled",children:Object(w.jsx)(l.a,{message:_("showMoreLabel"),options:{count:o,link:a}})})}render(){const{isOpen:e,onClose:t}=this.props;return e?Object(w.jsxs)(O.a,{"data-test-id":"cmv2-icon-field-drawer",width:600,children:[Object(w.jsxs)(h.a,{children:[Object(w.jsx)(p.a,{onClick:t}),Object(w.jsx)(S.a,{children:Object(w.jsx)(c.a,{message:_("selectLabel")})})]}),Object(w.jsxs)(d.a,{children:[Object(w.jsx)(y.a,{onChange:e=>this.debouncedSearchInput(e.target.value)}),Object(w.jsxs)(m.a,{className:"m-top-5 cmv2-icon-field-icon-list",children:[this.renderIcons(),this.renderShowMoreButton()]})]})]}):null}}P.defaultProps={iconSet:I.a,isOpen:!1};t.a=Object(i.connect)(D,k)(P)},,function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));n.d(t,"b",(function(){return o}));const r=new Map,i=(e="default")=>{if(!r.has(e))throw new Error('usage-tracker-container error. "getPrimaryTracker" was be called before "setPrimaryTracker".');return r.get(e)},o=(e,t="default")=>{if(r.has(t))throw new Error("usage-tracker-container error. Primary tracker has already been set. You can only set one primary tracker per runtime.");r.set(t,e)}},function(e,t){e.exports={blogQuickCreateModalOpened:{name:"blog quick create modal action",class:"interaction",namespace:"content-components"},blogQuickCreateModalClickedCreate:{name:"blog quick create modal action",class:"interaction",namespace:"content-components"},audienceAccessInteraction:{name:"audience access interaction",class:"interaction",properties:{action:{type:["click-radio-all","click-radio-password","click-radio-sso","click-radio-specificContacts","click-radio-ssoWithSpecificContacts","show-password-help","show-sso-help","show-specificContacts-help","show-ssoWithSpecificContacts-help","change-lists","click-kb-article","show-sso-disabled-tooltip","show-registration-disabled-tooltip"]}},namespace:"content-components"},partnerMatchingAppInteraction:{name:"partner matching app interaction",namespace:"partner-matching-app",class:"interaction",properties:{action:{type:"string"},app:{type:"string"}}},colorImportInteraction:{name:"color import modal interaction",class:"interaction",properties:{action:{type:["submit-url","website-colors-retrieved","toggle-color-selection","import-colors"]}},namespace:"content-components"},setupCustomDomainModalInteraction:{name:"setup custom domain modal interaction",class:"interaction",properties:{action:{type:["view","clicked-add-custom-domain-button"]},screen:["detail"]},namespace:"content-components"},ContentComponentsInteraction:{name:"ContentComponents interaction",class:"interaction",properties:{action:{type:["custom-fonts-upload-modal-opened","custom-fonts-upload-modal-closed","custom-fonts-create-font","custom-fonts-edit-font","custom-fonts-delete-font"]}},namespace:"content-components"},contentCreateAutoTranslationActionUsage:{name:"content-create-autotranslation-action",class:"usage",properties:{action:["create-multi-language-variation","direct-translate"],status:["success","fail"],screen:{type:"string"},subscreen:{type:"string"},pageType:{type:"string",isOptional:!0}},namespace:"content-components"},contentCreateAutoTranslationActionActivation:{name:"content-create-autotranslation-action",class:"activation",properties:{screen:{type:"string"},subscreen:{type:"string"},pageType:{type:"string",isOptional:!0}},namespace:"content-components"},contentCreateAutoTranslationActionInteraction:{name:"content-create-autotranslation-action",class:"interaction",properties:{action:["clicked-submit-create-multi-language-variation","clicked-ai-translate-toggle"],screen:{type:"string"},subscreen:{type:"string"},pageType:{type:"string",isOptional:!0},isAutoTranslateEnabled:{type:"boolean",isOptional:!0}},namespace:"content-components"}}},,function(e,t,n){"use strict";var r=n(4),i=n(287),o=n.n(i),a=n(41),s=n.n(a),c=n(40),l=n(288),u=n.n(l),d=n(285),p=n(334),h=n(324),m=n(443),f=n(297),g=n(2682),b=n(298),O=n(460),y=n(461),j=n(768),v=n(339),C=n(611),x=n(2679),E=n(47),T=n(320),S=n(45);const I=o()(C.a).withConfig({displayName:"UIExpandableText__ExpandableTextOverhang",componentId:"feai6x-0"})(["",";"],e=>e.scrollable&&"\n    /* Compensate for border on scroll container */\n    right: 1px;\n    bottom: 1px;\n    left: 1px;\n  ");I.propTypes=Object.assign({},C.a.propTypes,{scrollable:s.a.bool.isRequired});I.defaultProps=C.a.defaultProps;const w=e=>({maxHeight:e}),_=(e,t)=>null!=t?16*t:e;class N extends c.Component{constructor(e){super(e);this.delayedFitToMaxLines=()=>{Object(T.b)(this._timeout);this._timeout=Object(T.e)(this.fitToMaxLines)};this.getButtonHeight=e=>{if(!e)return 0;const t=window.getComputedStyle(e),n=parseFloat(t.marginTop)+parseFloat(t.marginBottom);return Math.ceil(e.offsetHeight+n)};this.fitToMaxLines=()=>{if(!this._el)return;const{maxHeight:e,maxHeightRems:t}=this.props,{collapsible:n,contentHeight:r}=this.state,i=this.getButtonHeight(this._containerEl.children[1]),o=this._el.scrollHeight+i;r!==o&&this.setState({contentHeight:o});const a=o>_(e,t);n!==a&&this.setState({collapsible:a})};this.handleExpandButtonClick=e=>{const{onExpandButtonClick:t,onExpandedChange:n}=this.props;Object(f.a)(t,e);n(Object(b.a)(!0))};this.handleCollapseButtonClick=e=>{const{onCollapseButtonClick:t,onExpandedChange:n}=this.props;Object(f.a)(t,e);const r=this._containerEl;r.style.maxHeight=r.scrollHeight+"px";n(Object(b.a)(!1))};this.handleTextWrapperFocus=e=>{const{expandOnFocus:t,onExpandedChange:n,toggleable:r}=this.props;if(t&&r){if(!Object(d.a)()&&!/TEXTAREA|INPUT/.test(e.target.tagName))return;n(Object(b.a)(!0))}};this.handleTextWrapperTransitionEnd=e=>{const t=this._el;if(e.target===t&&"max-height"===e.propertyName){const{expanded:e,fullyExpanded:t}=this.state;e&&!t&&this.setState({fullyExpanded:!0})}};this.textWrapperRefCallback=e=>{this._el=e};this.textContainerRefCallback=e=>{this._containerEl=e};this.state={contentHeight:null,collapsible:!1,fullyExpanded:!1};this._getStyle=Object(E.a)(w)}componentDidMount(){this.delayedFitToMaxLines();this.startMutationObserver();addEventListener("resize",this.delayedFitToMaxLines);this._el&&this._el.addEventListener("load",this.delayedFitToMaxLines,!0);Object(j.a)()||j.b.then(this.delayedFitToMaxLines)}componentDidUpdate(e,t){this.stopMutationObserver();t.contentHeight===this.state.contentHeight&&t.collapsible===this.state.collapsible&&this.delayedFitToMaxLines();t.collapsible!==this.state.collapsible&&Object(f.a)(this.props.onCollapsibleChange,this.state.collapsible);this.startMutationObserver()}componentWillUnmount(){this.stopMutationObserver();Object(T.b)(this._timeout);removeEventListener("resize",this.delayedFitToMaxLines);this._el&&this._el.removeEventListener&&this._el.removeEventListener("load",this.delayedFitToMaxLines,!0)}startMutationObserver(){if(this._el){this._observer=new MutationObserver(this.delayedFitToMaxLines);this._observer.observe(this._el,{attributes:!0,childList:!0,subtree:!0})}}stopMutationObserver(){if(this._observer){this._observer.disconnect();this._observer=null}}render(){const{buttonAlign:e,children:t,className:n,collapseButtonText:r,expandButtonText:i,expanded:o,fadeOutHeight:a,fadeOutHeightRems:s,gradientColor:c,hideButtonCaret:l,maxHeight:d,maxHeightRems:p,onCollapseButtonClick:f,onExpandButtonClick:g,Overhang:b,scrollable:y,toggleable:j,use:v}=this.props,{collapsible:C,contentHeight:E,fullyExpanded:T}=this.state,I=j&&C,w=!y&&I,N=u()(n,"private-expandable-text",y&&"private-expandable-text--scrollable",w&&"private-expandable-text__overhang-wrapper"),A="private-expandable-text__container"+(w?"":" private-expandable-text__overhang-wrapper"),D=u()("private-expandable-text__toggle-button",y?"align-right":"left"===e&&"align-left"),k=o?E:_(d,p),P=I?Object(S.jsxs)(m.a,{"aria-hidden":o?!f:!g,className:D,onClick:o?this.handleCollapseButtonClick:this.handleExpandButtonClick,use:"link",children:[y||l?null:Object(S.jsx)(x.a,{color:h.CALYPSO,name:o?"up":"down"}),Object(O.a)(o?r:i)]}):null,R="on-dark"===v?h.GYPSUM:h.OLAF;return Object(S.jsxs)("div",{className:A,"data-collapsible":C,ref:this.textContainerRefCallback,style:T?null:this._getStyle(k),children:[y&&P,Object(S.jsxs)("div",{className:N,onFocus:this.handleTextWrapperFocus,onTransitionEnd:this.handleTextWrapperTransitionEnd,ref:this.textWrapperRefCallback,children:[t,C&&!o?Object(S.jsx)(b,{gradientColor:null!=c?c:R,scrollable:y,side:"bottom",size:_(a,s)}):null]}),!y&&P]})}}N.propTypes={buttonAlign:s.a.oneOf(["left","center"]).isRequired,children:s.a.node.isRequired,collapseButtonText:Object(y.a)(s.a.node).isRequired,expandButtonText:Object(y.a)(s.a.node).isRequired,expanded:s.a.bool,expandOnFocus:s.a.bool.isRequired,fadeOutHeight:s.a.number.isRequired,fadeOutHeightRems:Object(v.a)(s.a.number),gradientColor:s.a.string,hideButtonCaret:s.a.bool.isRequired,maxHeight:s.a.number.isRequired,maxHeightRems:Object(v.a)(s.a.number),onCollapsibleChange:Object(v.a)(s.a.func),onCollapseButtonClick:s.a.func,onExpandButtonClick:s.a.func,onExpandedChange:s.a.func,Overhang:Object(p.a)(I),scrollable:s.a.bool,toggleable:s.a.bool,use:s.a.oneOf(["default","on-dark"])};N.defaultProps={buttonAlign:"center",collapseButtonText:()=>r.a.text("salesUI.UIExpandableText.collapseButtonText"),expandButtonText:()=>r.a.text("salesUI.UIExpandableText.expandButtonText"),expanded:!1,expandOnFocus:!0,fadeOutHeight:32,hideButtonCaret:!1,maxHeight:120,Overhang:I,scrollable:!1,toggleable:!0,use:"default"};N.displayName="UIExpandableText";t.a=Object(g.a)(N,["expanded"])},function(e,t,n){"use strict";var r=n(2812);t.a=(e,t="")=>{let n=e,i=t;if(!i){n=e.replace(/\D/g,"");const t="+"===e[0]&&Object(r.a)(n);i=t&&t.format}if(!i)return e;if(n&&n.length<2||!i)return"+"+n.replace(/\D/g,"");const o=i.split("").reduce((e,t)=>0===e.remainingText.length?e:"."!==t?{formattedText:e.formattedText+t,remainingText:e.remainingText}:{formattedText:e.formattedText+e.remainingText[0],remainingText:e.remainingText.slice(1)},{formattedText:"",remainingText:n});return o.formattedText+o.remainingText}},function(e,t){e.exports={embedPointsPageView:{name:"pageview",class:"view",properties:{screen:"string",displayType:"string"},namespace:"payments-embed-points",version:"1"},embedPointsInteraction:{name:"interaction",class:"interaction",properties:{screen:"string",action:["hover","click"]},namespace:"payments-embed-points",version:"1"},paymentsInterstitialModalInteraction:{name:"interaction",class:"interaction",properties:{screen:"string",action:["click"],subscreen:{type:"string",isOptional:!0},value:{type:"string",isOptional:!0}},namespace:"payments-embed-points",version:"1"},paymentsInterstitialModalView:{name:"pageview",class:"view",properties:{screen:"string",subscreen:{type:"string",isOptional:!0},displayType:"string",subtype:["paymentsInterstitialModal"]},namespace:"payments-embed-points",version:"1"}}},function(e,t){e.exports={growthPaymentsPageView:{name:"pageview",class:"view",properties:{screen:"string",hasCreateAccess:{type:"boolean",isOptional:!0},value:{type:"string",isOptional:!0},productLevel:{type:["pro","none","enterprise","starter"],isOptional:!0},chargesEnabled:{type:"boolean",isOptional:!0},payoutsEnabled:{type:"boolean",isOptional:!0},referrerUrl:{type:"string",isOptional:!0}},namespace:"payments-home",version:"1"},hubSpotApplicationFormInteraction:{name:"hubspot-application-form-interaction",class:"interaction",properties:{action:["focus","blur","click","select"],field:{type:"string"},value:{type:"string",isOptional:!0},location:{type:"string",isOptional:!0},referrerUrl:{type:"string",isOptional:!0}},namespace:"payments-home",version:"1"},paymentSettingsInteraction:{name:"payment-settings-interaction",class:"interaction",properties:{action:{type:["goToPaymentsEnrollmentViewed","goToPaymentsEnrollmentClicked","setUpHubspotPaymentsViewed","goToProcessorPickerViewed","setUpHubspotPaymentsClicked","goToProcessorPickerClicked","viewPricingDetailsClicked","viewPriceComparisonTableClicked","priceComparisonTableModalCloseClicked","priceComparisonTableLinkClicked","goToZeroStateButtonClicked","setUpStripePaymentsViewed","setUpStripePaymentsClicked","HSApplicationGoBackClicked","HSApplicationNextStepClicked","BYOSApplicationNextStepClicked","BYOSJoinWaitlistClicked","closeHSApplicationClicked","closeProcessorPickerClicked","closeBYOSApplicationClicked","openFaq","cancelModalGoBackButtonClicked","cancelModalConfirmButtonClicked","openCancelSurvey","noPermissionsModalViewed","submitCancelSurvey","rejectCancelSurvey","scrollOnEmptyState","emptyStateLinkClick","emptyStateButtonClick","quoteScroll","videoPlay","clickBackToPaymentsOverviewButton","stripeApplicationSuccessModalButtonClicked","fullApplicationSubmitted","stripeApplicationFallbackRedirectButtonClicked","showFallbackModal","stripeBusinessOwnerClickAdd","stripeBusinessOwnerClickExisting","stripeBusinessOwnerClickEdit","stripeBusinessOwnerClickRemove","stripeBusinessOwnerUpdate","stripeBusinessOwnerUpdateAndAddAnother","stripeBusinessOwnerEditCancelClicked","stripeBusinessOwnerEditDeleteClicked","applicationSubmitButtonClicked","contactSidePanelButtonClicked","contactSidePanelInputInteraction","contactSidePanelSubmissionSuccess","gotoGuideButtonClicked","gotoUpgradeButtonClicked","gotoZeroStateButtonClicked","setupButtonIneligibleCountryClicked","processorPickerLinkClick"]},productLevel:{type:["pro","none","enterprise","starter"],isOptional:!0},value:{type:"string",isOptional:!0},values:{type:"array",isOptional:!0},page:{type:"string",isOptional:!0},location:{type:"string",isOptional:!0},referrerUrl:{type:"string",isOptional:!0},section:{type:"string",isOptional:!0},index:{type:"number",isOptional:!0},fields:{type:"array",isOptional:!0},customFormFields:{type:"array",isOptional:!0},missingFeatures:{type:"array",isOptional:!0},pendingVerificationRequirements:{type:"array",isOptional:!0}},namespace:"payments-home",version:"1"},commerceSpecialistsInteraction:{name:"interaction",class:"interaction",namespace:"commerce",properties:{action:{type:["commerceSpecialistsContactModalInteraction","commerceSpecialistsContactLinkInteraction","commerceSpecialistsTooltipInteraction"]},subAction:{type:["meetingsLinkClicked","emailLinkClicked","emailLinkHovered","contactModalClosed","openContactModal","tooltipViewed"]},app:{type:["invoices","subscriptions","payment-links","payments-enrollment"]},referrerUrl:{type:"string",isOptional:!0}},version:"1"},commerceSurveyInteraction:{name:"commerce-survey-interaction",class:"interaction",properties:{action:{type:["surveyButtonClicked","surveyAccessPointViewed","surveyCompleted","surveyClosed","surveyQuestionViewed","surveyAnswerSelected"]},location:{type:["processorPicker","commerceZeroState","learnAboutFeesModal"],isOptional:!0},surveyType:{type:"string",isOptional:!0},question:{type:"string",isOptional:!0},questionNumber:{type:"number",isOptional:!0},answers:{type:"array",isOptional:!0},referrerUrl:{type:"string",isOptional:!0}},namespace:"payments-home",version:"1"}}},function(e,t,n){"use strict";var r=n(40),i=n(45);const o=e=>Object(i.jsx)(r.Fragment,{children:Object(i.jsx)("div",{className:"video-container-background",children:Object(i.jsx)("div",{className:"video-container",children:e.children})})});t.a=o},function(e,t,n){"use strict";var r=n(279),i=n(456),o=n(1326),a=n(1327),s=n(45);const c=({className:e,conversionAsset:t})=>{if(!t||!t.type)return null;let n=t.position||o.a.PRE;n!==o.a.CUSTOM||t.overlay_delay_seconds||(n=o.a.PRE);const c=Object(a.a)(t.overlay_delay_seconds||0),l=Object(s.jsx)(r.a,{message:"RichTextLib.video.conversionAssetSummary.position."+n.toLowerCase(),options:{timeDisplay:c}}),u=Object(s.jsx)(r.a,{message:t.prevent_skip?"RichTextLib.video.conversionAssetSummary.preventSkip":"RichTextLib.video.conversionAssetSummary.allowSkip"});return Object(s.jsxs)(i.a,{className:e,styled:!0,children:[l,u]})};t.a=c},function(e,t,n){"use strict";n.d(t,"e",(function(){return r}));n.d(t,"d",(function(){return i}));n.d(t,"b",(function(){return o}));n.d(t,"a",(function(){return a}));n.d(t,"g",(function(){return s}));n.d(t,"f",(function(){return c}));n.d(t,"c",(function(){return l}));const r={NONE:"NONE",CTA:"CTA",FORM:"FORM"},i={BEFORE:"PRE",AFTER:"POST"},o={FORM:"FORM",CTA:"CTA"},a={PRE:"PRE",POST:"POST",CUSTOM:"CUSTOM"},s={CUSTOM:"customWidth",FULL:"fullWidth"},c={LOOP:"loop",MUTED:"muted",AUTOPLAY:"autoplay",HIDE_CONTROLS:"hidden_controls"},l={SET_CURRENT_TIME:"SET_CURRENT_TIME",UPDATE_DISPLAY_OPTIONS:"UPDATE_DISPLAY_OPTIONS"}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));n.d(t,"d",(function(){return c}));n.d(t,"e",(function(){return u}));n.d(t,"b",(function(){return p}));n.d(t,"c",(function(){return h}));var r=n(9),i=n.n(r),o=n(28),a=n(29);function s(e){const t=Math.floor(e/3600),n=Math.floor(e%3600/60),r=Math.floor(e%60);return`${t<10?"0":""}${t}:${n<10?"0":""}${n}:${r<10?"0":""}${r}`}function c(e){if(e.includes(":")){const t=e.split(":");let n=0,r=0,i=0;if(3===t.length){n=parseInt(t[0],10);r=parseInt(t[1],10);i=parseInt(t[2],10)}else if(2===t.length){r=parseInt(t[0],10);i=parseInt(t[1],10)}else 1===t.length&&(i=parseInt(t[0],10));return 60*n*60+60*r+i}const t=parseInt(e,10);return Number.isNaN(t)?null:t}const l=()=>"local"===i.a.getShort("video_player");function u(e){const t={};Object.keys(e).forEach(n=>{e[n]&&(t[n]=e[n])});return Object(a.stringify)(t)}function d(e){return"object"==typeof e&&Object.keys(e).length?"?"+u(e):""}function p(){return l()?Object(o.getFullUrl)("local"):Object(o.getFullUrl)("app")}function h(e,t,n={}){const r=`video/${e}/id/${t}`;return`${p()}/${r}${d(n)}`}},function(e,t,n){"use strict";var r=n(2),i=n(40),o=n(41),a=n.n(o),s=n(55),c=n(59),l=n(279),u=n(282),d=n(729),p=n(73),h=n(2634),m=n(1206),f=n(696),g=n(485),b=n(434),O=n(357),y=n(707),j=n(2654),v=n(324),C=n(2782),x=n(1082),E=n(160),T=n(2758),S=n(71),I=n(70),w=n(1083),_=n(45);const N=["readOnly","required","extraOptions","defaultOptions","isInEmail","isPublicContent","object_type","crmObjectSchema","crmObjectSchemaFetchFailed","crmObjectFetchFailed"],A=["overrideConnectedProps"],D=e=>"ContentComponents.cmv2.fields.crmObject."+e;function k(e,t){const{display_format:n,display_properties:r,object_type:i,value:o}=t;return{crmObjects:x.l(e,{objectType:i}),crmObjectSchema:x.g(e,{objectType:i}),crmObjectSchemaFetchFailed:x.h(e,{objectType:i}),crmObjectFetchFailed:x.c(e,{objectType:i,id:o&&o.id}),defaultOptions:x.r(e,{displayFormat:n,displayProperties:r,objectType:i}),options:x.p(e,{displayFormat:n,displayProperties:r,objectType:i}),optionsRequestStatus:x.n(e)}}const P={clearCache:C.a,fetchCrmObject:C.d,fetchCrmObjects:C.h,fetchCrmObjectSchema:C.e,saveCache:C.i},R=500;class F extends i.Component{constructor(e){super(e);this.fetchCrmObject=this.fetchCrmObject.bind(this);this.fetchCrmObjects=this.fetchCrmObjects.bind(this);this.clearCache=this.clearCache.bind(this);this.saveCache=this.saveCache.bind(this);this.onChange=this.onChange.bind(this);this.onOpenChange=this.onOpenChange.bind(this);this.loadOptions=this.loadOptions.bind(this);this.debouncedLoadOptions=Object(p.debounce)(this.loadOptions,R);this.renderMissingLabelTooltip=this.renderMissingLabelTooltip.bind(this);this.renderOption=this.renderOption.bind(this);this.renderValue=this.renderValue.bind(this);this.state={input:""}}componentDidMount(){const{crmObjectSchema:e,fetchCrmObjectSchema:t,object_type:n}=this.props;n&&!e&&t(n);e&&this.objectId&&this.fetchCrmObject(this.objectId)}componentDidUpdate(e){const{crmObjectSchema:t,crmObjects:n,display_properties:r,fetchCrmObjectSchema:i,object_type:o,value:a}=this.props,{crmObjectSchema:s,object_type:c,value:l}=e;c!==o&&o&&!t&&i(o);const u=n[this.objectId]?Object.keys(n[this.objectId].properties):[];if((!Object(p.isEqual)(s,t)||!Object(p.isEqual)(l,a))&&this.objectId&&t){const e=r||[];(!u.length||!e.every(e=>u.includes(e)))&&this.fetchCrmObject(this.objectId)}}get objectId(){const{id:e}=this.props.value||{};return e||void 0}fetchCrmObject(e){const{fetchCrmObject:t,display_properties:n,object_type:r}=this.props;return t(r,n,e)}fetchCrmObjects(e){const{fetchCrmObjects:t,display_properties:n,object_type:r}=this.props;return t(r,n,e)}saveCache(e){const{saveCache:t,object_type:n}=this.props;t(n,e)}clearCache(){const{clearCache:e,object_type:t}=this.props;e(t)}loadOptions(e,t,n={offset:0}){let r=n.offset;if(e!==this.state.input){this.setState({input:e});this.clearCache();r=0}let i={count:T.f,offset:r};if(e){const{display_properties:t}=this.props;i=Object.assign({},i,Object(w.f)(e,t))}this.fetchCrmObjects(i).then(e=>{const{options:n}=this.props,{total:i}=e;t(null,{options:n,pagination:{hasMore:i>n.length,offset:r+T.f,length:i}})}).catch(e=>{setTimeout(()=>{throw e})})}onChange(e){const{onFieldChange:t}=this.props;t({id:e.target.value||null})}onOpenChange(e){this.objectId&&e.target.value&&this.clearCache()}renderMissingLabelTooltip(){const{crmObjectSchema:e={},display_properties:t,object_type:n}=this.props,r=Object(w.d)(e,t),i=Object(w.e)(e,n),o=r.length?Object(_.jsx)(u.a,{message:D("errors.missingLabellingPropertiesValues"),options:{objectType:i,propertiesList:Object(_.jsx)(d.a,{children:r.map(e=>Object(_.jsxs)("span",{children:['"',e,'"']},e))})}}):Object(_.jsx)(l.a,{message:D("errors.missingLabellingProperties"),options:{objectType:i}});return Object(_.jsx)(j.a,{maxWidth:175,title:o,children:Object(_.jsx)("span",{className:"p-left-1",children:Object(_.jsx)(y.a,{backgroundColor:v.CANDY_APPLE,borderWidth:0,color:v.OLAF,name:"exclamation",padding:0,size:12})})})}renderPlaceholder(){const{crmObjectSchema:e={},object_type:t,placeholder:n}=this.props;if(n)return n;const r=S.a[t.toUpperCase()];if(e.metaType===I.a.HUBSPOT&&r)return Object(_.jsx)(l.a,{message:`ContentComponents.crmObjectTypes.${r}.placeholder`});const{singular:i}=e.labels||{},o=(i||t).toLowerCase();return Object(_.jsx)(l.a,{message:D("placeholder"),options:{typeLabel:o}})}renderOption(e){const t=e.dropdownClassName||"m-x-4 p-y-2",n=e.dropdownText||e.text||e.value;return Object(_.jsxs)("div",{"data-selenium-option":n,className:t,children:[n,e.dropdownText||e.text?null:this.renderMissingLabelTooltip()]})}renderValue(e){const t=e.dropdownText||e.text||e.value;return Object(_.jsx)(b.a,{children:Object(_.jsxs)(O.a,{children:[t,e.dropdownText||e.text?null:this.renderMissingLabelTooltip()]})})}renderMissingObjectTypeWarning(){return Object(_.jsx)(f.a,{"data-selenium":"crm-object-missing-object-type-alert",type:"danger",titleText:Object(_.jsx)(l.a,{message:D("errors.missingObjectType.titleText")}),children:Object(_.jsx)(l.a,{message:D("errors.missingObjectType.message")})})}renderUnsupportedObjectTypeWarning(e){return Object(_.jsx)(f.a,{type:"danger",titleText:Object(_.jsx)(l.a,{message:D("errors.unsupportedObjectType.titleText")}),children:Object(_.jsx)(l.a,{message:D("errors.unsupportedObjectType.message"),options:{objectType:e}})})}renderRestrictedObjectTypeWarning(e){return Object(_.jsx)(f.a,{type:"danger",titleText:Object(_.jsx)(l.a,{message:D("errors.restrictedObjectType.titleText")}),children:Object(_.jsx)(l.a,{message:D("errors.restrictedObjectType.message"),options:{objectType:e}})})}renderSchemaFetchFailedWarning(e){return Object(_.jsx)(f.a,{type:"danger",titleText:Object(_.jsx)(u.a,{message:D("errors.schemaFetchFailed.titleText"),options:{fieldName:Object(_.jsx)(l.a,{message:D("errors.schemaFetchFailed.crmObjectField")})}}),children:Object(_.jsx)(l.a,{message:D("errors.schemaFetchFailed.message"),options:{objectType:e}})})}render(){const e=this.props,{readOnly:t,required:n,extraOptions:i,defaultOptions:o,isInEmail:a,isPublicContent:s,object_type:c,crmObjectSchema:u,crmObjectSchemaFetchFailed:d,crmObjectFetchFailed:p}=e,f=Object(r.a)(e,N);if(!c)return this.renderMissingObjectTypeWarning();const{metaType:b}=u||{};if(b===I.a.HUBSPOT&&!S.a[c.toUpperCase()])return this.renderUnsupportedObjectTypeWarning(c);const O=a&&h.b.isUngated("CMv2:EnablePrivateObjectTypesInEmail")?w.b:w.a;if(b===I.a.HUBSPOT&&s&&O[c.toUpperCase()])return this.renderRestrictedObjectTypeWarning(c);if(d)return this.renderSchemaFetchFailedWarning(c);const y=Object(_.jsx)(m.a,Object.assign({},f,{clearable:!n,clearCache:this.clearCache,"data-selenium":"crm-object",defaultOptions:o.concat(i),loadOptions:this.debouncedLoadOptions,onChange:this.onChange,onOpenChange:this.onOpenChange,optionRenderer:this.renderOption,placeholder:this.renderPlaceholder(),readOnly:t,saveCache:this.saveCache,value:this.objectId,valueRenderer:this.renderValue}));return this.objectId&&p?Object(_.jsxs)("div",{children:[y,Object(_.jsx)("div",{className:"m-top-1",children:Object(_.jsx)(g.a,{use:"error",children:Object(_.jsx)(l.a,{message:D("errors.missingObject.message"),options:{objectType:Object(w.e)(u,c),objectId:""+this.objectId}})})})]}):y}}F.propTypes={clearCache:a.a.func.isRequired,crmObjectFetchFailed:a.a.bool,crmObjects:a.a.object.isRequired,crmObjectSchema:a.a.object,crmObjectSchemaFetchFailed:a.a.bool,defaultOptions:a.a.array.isRequired,display_properties:a.a.arrayOf(a.a.string),display_format:a.a.string,extraOptions:a.a.array,fetchCrmObject:a.a.func.isRequired,fetchCrmObjects:a.a.func.isRequired,fetchCrmObjectSchema:a.a.func.isRequired,isInEmail:a.a.bool,isPublicContent:a.a.bool,object_type:a.a.string.isRequired,onFieldChange:a.a.func.isRequired,options:a.a.array.isRequired,placeholder:a.a.string,readOnly:a.a.bool,required:a.a.bool.isRequired,saveCache:a.a.func.isRequired,type:a.a.string.isRequired,useOnDark:a.a.bool,value:a.a.object};F.defaultProps={defaultOptions:[],extraOptions:[],onFieldChange:s.a,required:!1,type:E.CRM_OBJECT};t.a=Object(c.connect)(k,P,(e,t,n)=>{const{overrideConnectedProps:i}=n,o=Object(r.a)(n,A);return Object.assign({},o,e,t,i||{})})(F)},function(e,t,n){"use strict";var r=n(2),i=n(40),o=n(59),a=n(1148),s=n.n(a),c=n(73),l=n(2634),u=n(279),d=n(282),p=n(485),h=n(2655),m=n(696),f=n(2782),g=n(1082),b=n(71),O=n(70),y=n(1083),j=n(45);const v=["crmObjectSchema","crmObjectSchemaFetchFailed","error","isInEmail","isPublicContent","object_type","readOnly","required","useOnDark","value"],C=e=>"ContentComponents.cmv2.fields.crmObject."+e,x=(e,t)=>{const{object_type:n}=t;return{crmObjectSchema:g.g(e,{objectType:n}),crmObjectSchemaFetchFailed:g.h(e,{objectType:n}),options:g.f(e,{objectType:n})}},E={fetchCrmObjectSchema:f.e,saveCache:f.j},T=Object(o.connect)(x,E);class S extends i.Component{constructor(e){super(e);this.onChange=this.onChange.bind(this)}componentDidMount(){const{crmObjectSchema:e,fetchCrmObjectSchema:t,object_type:n}=this.props;n&&!e&&t(n).catch(e=>{throw e})}shouldComponentUpdate(e,t){return s()(this,e,t)}componentDidUpdate(e){const{crmObjectSchema:t,fetchCrmObjectSchema:n,object_type:r}=this.props,{object_type:i}=e;i!==r&&r&&!t&&n(r).catch(e=>{throw e})}onChange(e){const{object_type:t,onFieldChange:n,options:r,saveCache:i}=this.props,o=e.target.value||null;o&&i(t,r,o);n({property:o})}renderPlaceholder(){const{crmObjectSchema:e={},object_type:t,placeholder:n}=this.props;if(n)return n;const r=b.a[t.toUpperCase()];if(e.metaType===O.a.HUBSPOT&&r)return Object(j.jsx)(u.a,{message:`ContentComponents.crmObjectTypes.${r}.propertyPlaceholder`});const{singular:i}=e.labels||{},o=(i||t).toLowerCase();return Object(j.jsx)(u.a,{message:C("propertyPlaceholder"),options:{typeLabel:o}})}renderMissingObjectTypeWarning(){return Object(j.jsx)(m.a,{"data-selenium":"crm-object-missing-object-type-alert",type:"danger",titleText:Object(j.jsx)(u.a,{message:C("errors.missingObjectType.titleText")}),children:Object(j.jsx)(u.a,{message:C("errors.missingObjectType.message")})})}renderUnsupportedObjectTypeWarning(e){return Object(j.jsx)(m.a,{type:"danger",titleText:Object(j.jsx)(u.a,{message:C("errors.unsupportedObjectType.titleText")}),children:Object(j.jsx)(u.a,{message:C("errors.unsupportedObjectType.message"),options:{objectType:e}})})}renderRestrictedObjectTypeWarning(e){return Object(j.jsx)(m.a,{type:"danger",titleText:Object(j.jsx)(u.a,{message:C("errors.restrictedObjectType.titleText")}),children:Object(j.jsx)(u.a,{message:C("errors.restrictedObjectType.message"),options:{objectType:e}})})}renderSchemaFetchFailedWarning(e){return Object(j.jsx)(m.a,{type:"danger",titleText:Object(j.jsx)(d.a,{message:C("errors.schemaFetchFailed.titleText"),options:{fieldName:Object(j.jsx)(u.a,{message:C("errors.schemaFetchFailed.crmObjectPropertyField")})}}),children:Object(j.jsx)(u.a,{message:C("errors.schemaFetchFailed.message"),options:{objectType:e}})})}render(){const e=this.props,{crmObjectSchema:t,crmObjectSchemaFetchFailed:n,error:i=!1,isInEmail:o,isPublicContent:a,object_type:s,readOnly:d=!1,required:m,useOnDark:f,value:g}=e,x=Object(r.a)(e,v),{property:E}=g||{},T=Object(c.pick)(x,Object.keys(h.a.propTypes));if(!s)return this.renderMissingObjectTypeWarning();const{metaType:S}=t||{};if(S===O.a.HUBSPOT&&!b.a[s.toUpperCase()])return this.renderUnsupportedObjectTypeWarning(s);const I=o&&l.b.isUngated("CMv2:EnablePrivateObjectTypesInEmail")?y.b:y.a;if(S===O.a.HUBSPOT&&a&&I[s.toUpperCase()])return this.renderRestrictedObjectTypeWarning(s);if(!E&&n)return this.renderSchemaFetchFailedWarning(s);const w=Object(j.jsx)(h.a,Object.assign({},T,{buttonUse:f?"form-on-dark":"form",clearable:!m,"data-selenium":"crm-object-property-select",error:i,onChange:this.onChange,placeholder:this.renderPlaceholder(),readOnly:d,value:E}));return E&&n?Object(j.jsxs)("div",{children:[w,Object(j.jsx)("div",{className:"m-top-1",children:Object(j.jsx)(p.a,{use:"error",children:Object(j.jsx)(u.a,{message:C("errors.schemaFetchFailed.message"),options:{objectType:s}})})})]}):w}}t.a=T(S)},function(e,t,n){"use strict";n.d(t,"c",(function(){return r}));n.d(t,"b",(function(){return i}));n.d(t,"a",(function(){return o}));n.d(t,"e",(function(){return a}));n.d(t,"d",(function(){return s}));const r=Object.freeze({NONE:"none",SOLID:"solid",DOTTED:"dotted",DASHED:"dashed",DOUBLE:"double"}),i=Object.freeze({TOP:"top",BOTTOM:"bottom",LEFT:"left",RIGHT:"right"}),o=Object.freeze({WIDTH:"width",STYLE:"style",COLOR:"color",OPACITY:"opacity"}),a=Object.freeze({BOTTOM:"BOTTOM",TOP:"TOP"}),s=Object.freeze({LEFT:"LEFT",RIGHT:"RIGHT"})},function(e,t,n){"use strict";var r=n(40),i=n(287),o=n.n(i),a=n(4),s=n(279),c=n(443),l=n(434),u=n(2741),d=n(2735),p=n(2669),h=n(350),m=n(2679),f=n(1332),g=n(324),b=n(2758),O=n(1180),y=n(160),j=n(67),v=n(45);const C=O.a[y.SPACING],x=200,E=Object.freeze({[b.d.pt]:100,[b.d["%"]]:100,[b.d.em]:15,[b.d.rem]:15,[b.d.ex]:15,[b.d.ch]:15}),T="calc(50% - 12px)",S="margin",I="padding",w=Object.freeze({bottom:"bottom",left:"left",right:"right",top:"top"}),_={color:g.BATTLESHIP,name:"text",padding:0,size:"xxs"},N={value:null,units:null},A={top:N,bottom:N,left:N,right:N},D={top:N,bottom:N},k=o.a.div.withConfig({displayName:"Spacing__FlexCenterDiv",componentId:"sc-14pnb8f-0"})(["display:flex;align-items:center;justify-content:center;"]),P=o()(k).withConfig({displayName:"Spacing__FlexCenterColumnDiv",componentId:"sc-14pnb8f-1"})(["flex-direction:column;"]),R=e=>"ContentComponents.cmv2.fields.spacing."+e,F=e=>E[e]||x;class L extends r.Component{constructor(e){super(e);this.getDefaultUnit=this.getDefaultUnit.bind(this);this.getUniformPaddingLimits=this.getUniformPaddingLimits.bind(this);this.toggleUseAdvancedPadding=this.toggleUseAdvancedPadding.bind(this);this.handleMarginBottomChange=this.handleMarginBottomChange.bind(this);this.handleMarginTopChange=this.handleMarginTopChange.bind(this);this.handlePaddingBottomChange=this.handlePaddingBottomChange.bind(this);this.handlePaddingLeftChange=this.handlePaddingLeftChange.bind(this);this.handlePaddingRightChange=this.handlePaddingRightChange.bind(this);this.handlePaddingTopChange=this.handlePaddingTopChange.bind(this);this.handleUniformPaddingChange=this.handleUniformPaddingChange.bind(this);this.state={useAdvancedPadding:!this.isPaddingUniform}}get margin(){const{value:e={}}=this.props,{margin:t}=e;return Object.assign({},D,t)||D}get marginLimits(){const{limits:e}=this.props;return e&&e.margin||{}}get padding(){const{value:e={}}=this.props,{padding:t}=e;return Object.assign({},A,t)||A}get paddingLimits(){const{limits:e}=this.props;return e&&e.padding||{}}get seleniumKey(){const{fieldKey:e=[]}=this.props;return e.join(".")}get isPaddingUniform(){const{bottom:e,left:t,right:n,top:r}=this.padding;return e.value===t.value&&e.value===n.value&&e.value===r.value&&e.units===t.units&&e.units===n.units&&e.units===r.units}get hiddenSubfields(){const{visibility:e={}}=this.props;return e.hidden_subfields||{}}getMarginPlaceholder(e){const{placeholders:t}=this.props;if(t&&t.margin&&e)return t.margin[e]}getPaddingPlaceholder(e){const{placeholders:t}=this.props;if(t&&t.padding&&e)return t.padding[e]}getUniformPaddingLimits(){const e=this.paddingLimits,t={};if(!Object.keys(e).length)return t;Object.keys(e).forEach(n=>{const{max:r,min:i,units:o}=e[n]||{};i&&(!t.min||i>t.min)&&(t.min=i);r&&(!t.max||r<t.max)&&(t.max=r);if(o&&t.units){const e=[];o.forEach(n=>{t.units.includes(n)&&e.push(n)});t.units=e}o&&!t.units&&(t.units=o)});return t}getDefaultUnit(e){return e&&e.length?e[0]:b.d.px}getUpdatedFields(e,t,n){const r={};e.forEach(e=>{r[e]=Object.assign({},N);if(null!==t){r[e].value=t;r[e].units=n||b.d.px}});return r}toggleUseAdvancedPadding(){const{useAdvancedPadding:e}=this.state;this.setState({useAdvancedPadding:!e})}handleChange({units:e,value:t},n,r){const{onFieldChange:i,value:o={}}=this.props,a=r?[r]:Object.keys(w),s=this.getUpdatedFields(a,t,e);i(Object.assign({},o,{[n]:Object.assign({},this[n],s)}))}handleMarginBottomChange(e){this.handleChange(e,S,w.bottom)}handleMarginTopChange(e){this.handleChange(e,S,w.top)}handleUniformPaddingChange(e){this.handleChange(e,I)}handlePaddingBottomChange(e){this.handleChange(e,I,w.bottom)}handlePaddingLeftChange(e){this.handleChange(e,I,w.left)}handlePaddingRightChange(e){this.handleChange(e,I,w.right)}handlePaddingTopChange(e){this.handleChange(e,I,w.top)}renderTopMarginInput(){const{readOnly:e=!1,useOnDark:t}=this.props,{top:n}=this.margin,{value:r,units:i}=n,{top:o}=this.marginLimits,{max:a,min:c,units:l}=o||{},d=this.getDefaultUnit(l),h=Object(j.c)(c)?-F(i):c,m=Object(j.c)(a)?F(i):a;return Object(v.jsx)(u.a,{label:Object(v.jsx)(s.a,{message:R("marginAbove")}),children:Object(v.jsxs)("div",{"data-selenium":this.seleniumKey+":marginTop",children:[Object(v.jsx)(f.a,{clearable:!0,defaultUnit:d,max:a,min:c,onChange:this.handleMarginTopChange,placeholder:this.getMarginPlaceholder(w.top),readOnly:e,unit:i,useOnDark:t,validUnits:l,value:void 0===r?null:r}),Object(v.jsx)(p.a,{className:"p-top-4",max:m,min:h,onChange:({target:{value:e}})=>this.handleMarginTopChange({value:e,units:i||d}),readOnly:e,value:r||0})]})})}renderBottomMarginInput(){const{readOnly:e=!1,useOnDark:t}=this.props,{bottom:n}=this.margin,{bottom:r}=this.marginLimits,{value:i,units:o}=n,{max:a,min:c,units:l}=r||{},d=this.getDefaultUnit(l),h=Object(j.c)(c)?-F(o):c,m=Object(j.c)(a)?F(o):a;return Object(v.jsx)(u.a,{label:Object(v.jsx)(s.a,{message:R("marginBelow")}),children:Object(v.jsxs)("div",{"data-selenium":this.seleniumKey+":marginBottom",children:[Object(v.jsx)(f.a,{clearable:!0,defaultUnit:d,max:a,min:c,onChange:this.handleMarginBottomChange,placeholder:this.getMarginPlaceholder(w.bottom),readOnly:e,unit:o,useOnDark:t,validUnits:l,value:void 0===i?null:i}),Object(v.jsx)(p.a,{className:"p-top-4",max:m,min:h,onChange:({target:{value:e}})=>this.handleMarginBottomChange({value:e,units:o||d}),readOnly:e,value:i||0})]})})}renderMarginInputs(){return this.hiddenSubfields[C.margin]?null:Object(v.jsxs)(l.a,{children:[Object(v.jsx)(d.a,{className:"p-right-3",grow:1,children:this.renderTopMarginInput()}),Object(v.jsx)(d.a,{className:"p-left-3",grow:1,children:this.renderBottomMarginInput()})]})}renderPaddingIcon(){return Object(v.jsxs)(k,{className:"p-all-1",children:[Object(v.jsx)(h.a,Object.assign({},_,{rotate:-90,rotateLock:!0})),Object(v.jsxs)(P,{className:"p-x-1",children:[Object(v.jsx)(h.a,Object.assign({},_)),Object(v.jsx)(m.a,{className:"p-top-1",name:"insertImage",size:"xs"}),Object(v.jsx)(h.a,Object.assign({},_,{rotate:180,rotateLock:!0}))]}),Object(v.jsx)(h.a,Object.assign({},_,{rotate:90,rotateLock:!0}))]})}renderAdvancedPaddingInput(e,t){const{readOnly:n=!1,useOnDark:r}=this.props,{value:i,units:o}=this.padding[e],a=this.paddingLimits[e],{max:s,min:c,units:l}=a||{};return Object(v.jsx)(f.a,{"data-selenium":`${this.seleniumKey}:advancedPadding:${e}`,clearable:!0,defaultUnit:this.getDefaultUnit(l),max:s,min:c,onChange:t,placeholder:this.getPaddingPlaceholder(e),preventNegativeValues:!0,readOnly:n,stepper:!0,style:{width:"100px"},unit:o,useOnDark:r,validUnits:l,value:void 0===i?null:i})}renderSeparatePaddingInputs(){return Object(v.jsxs)("div",{children:[Object(v.jsx)(k,{children:this.renderAdvancedPaddingInput(w.top,this.handlePaddingTopChange)}),Object(v.jsxs)(k,{children:[this.renderAdvancedPaddingInput(w.left,this.handlePaddingLeftChange),this.renderPaddingIcon(),this.renderAdvancedPaddingInput(w.right,this.handlePaddingRightChange)]}),Object(v.jsx)(k,{children:this.renderAdvancedPaddingInput(w.bottom,this.handlePaddingBottomChange)})]})}renderUniformPaddingInput(){const{readOnly:e=!1,useOnDark:t}=this.props,{bottom:n}=this.padding,{value:r,units:i}=n,{max:o,min:s,units:c}=this.getUniformPaddingLimits(),l=this.getDefaultUnit(c);let u,d=void 0===r?null:r,h=i||l,m=F(i);if(!this.isPaddingUniform){d=null;h=l;m=x;u=a.a.text(R("nonUniformValuesMessage"))}return Object(v.jsxs)("div",{children:[Object(v.jsx)(f.a,{"data-selenium":this.seleniumKey+":uniformPadding",clearable:!0,defaultUnit:l,max:o,min:s,onChange:this.handleUniformPaddingChange,placeholder:u,preventNegativeValues:!0,readOnly:e,style:{width:T},unit:h,useOnDark:t,validUnits:c,value:d}),Object(v.jsx)(p.a,{className:"p-top-4",max:Object(j.c)(o)?m:o,min:Object(j.c)(s)?0:s,onChange:({target:{value:e}})=>this.handleUniformPaddingChange({value:e,units:h}),readOnly:e,value:d||void 0})]})}renderUseAdvancedPaddingButton(){const{useAdvancedPadding:e}=this.state;return Object(v.jsx)(c.a,{onClick:this.toggleUseAdvancedPadding,use:"link",children:Object(v.jsx)(s.a,{message:R(e?"editTogether":"editSeparately")})})}renderPaddingControls(){const{useAdvancedPadding:e}=this.state,t=this.hiddenSubfields[C.margin]?"":"p-top-4";return this.hiddenSubfields[C.padding]?null:Object(v.jsx)(u.a,{className:t,label:Object(v.jsx)(s.a,{message:R("padding")}),help:this.renderUseAdvancedPaddingButton(),children:Object(v.jsx)("div",{children:e?this.renderSeparatePaddingInputs():this.renderUniformPaddingInput()})})}render(){return Object(v.jsxs)("div",{children:[this.renderMarginInputs(),this.renderPaddingControls()]})}}t.a=L},function(e,t,n){"use strict";var r=n(40),i=n(4),o=n(513),a=n(512),s=n(2758),c=n(45);const l=/(\d*(\.?\d+)?)\s*([A-Za-z]+|%)/,u=/^\s*$/,d=(e,t)=>{const n=null!=e?e:t;if("string"==typeof n){const e=n.match(l);if(e&&e[3])return e[3]}},p=(e,t)=>t&&e.substring(e.length-t.length)===t?e.substring(0,e.length-t.length):e,h=(e,t)=>u.test(e)?null:i.a.parseNumber(p(e,t));class m extends r.Component{constructor(e){super(e);this.handleBlur=this.handleBlur.bind(this);this.handleChange=this.handleChange.bind(this);this.formatter=this.formatter.bind(this);this.parser=this.parser.bind(this);this.currentUnit=e.unit;this.validateCurrentUnit()}componentDidUpdate(e){const{unit:t}=this.props;e.unit!==t&&(this.currentUnit=t)}get parsedValue(){const{value:e}=this.props;return isNaN(e)?void 0:e}get stepSize(){const{unit:e}=this.props;return s.o[e]?s.p:s.a}validateCurrentUnit(){const{validUnits:e}=this.props;this.isValidUnit=null==this.currentUnit||e&&e.includes(this.currentUnit)}handleBlur({target:{value:e}}){const{value:t}=this.props,n=d(e),r=h(e,n);null!==t&&isNaN(r)&&this.handleChange(r)}handleChange(e){const{clearable:t,defaultUnit:n,onChange:r,preventNegativeValues:i}=this.props;this.validateCurrentUnit();let o=e;null!==o||t||(o=0);i&&(o=Math.abs(o));r({value:o,units:this.currentUnit||n})}formatter(){const{defaultUnit:e,value:t}=this.props;return null!=t?`${t}${this.currentUnit||e}`:t}parser(e){const t=d(e),n=h(e,t);if(t!==this.currentUnit){this.currentUnit=t;this.handleChange(n)}return n}render(){const{className:e,disabled:t,max:n,min:r,placeholder:i,readOnly:s,stepper:l,style:u,useOnDark:d}=this.props,p=l?a.a:o.a,h=l?{stepSize:this.stepSize}:{};return Object(c.jsx)(p,Object.assign({className:e,disabled:t,error:!this.isValidUnit,formatter:this.formatter,max:n,min:r,onBlur:this.handleBlur,onChange:e=>this.handleChange(e.target.value),parser:this.parser,placeholder:i,readOnly:s,style:u,use:d?"on-dark":"default",value:this.parsedValue},h))}}m.defaultProps={clearable:!1,defaultUnit:s.d.px,placeholder:"0px",readOnly:!1,stepper:!1,validUnits:Object.keys(s.d)};t.a=m},function(e,t,n){"use strict";n.d(t,"f",(function(){return a}));n.d(t,"g",(function(){return s}));n.d(t,"d",(function(){return l}));n.d(t,"c",(function(){return u}));n.d(t,"e",(function(){return d}));n.d(t,"b",(function(){return h}));n.d(t,"a",(function(){return m}));var r=n(65),i=n(64),o=n(66);const a=(e,t)=>e.resources.embeds.embeds[t.oEmbedUrl],s=(e,t)=>e.resources.embeds.requestStatus[t.oEmbedUrl],c=(e,t)=>{const n=e.resources.embeds.mediaBridgeProviders;if(!n)return{};const{supportedMediaBridgeProviders:r}=t||{};return r&&r.length?r.reduce((e,t)=>{n[t]&&(e[t]=n[t]);return e},{}):n},l=Object(r.a)([c],e=>Object.keys(e).map(e=>parseInt(e,10))),u=(e,t)=>{const n=e.resources.embeds.mediaBridgeProviders,r=Object.keys(n),{supportedMediaBridgeProviders:i,provider_id:o}=t||{};let a=o;const s=l(e,{supportedMediaBridgeProviders:i});i&&1===i.length&&(a=i[0]);1===s.length&&(a=s[0]);return a?n[a]||{}:1===r.length?n[r[0]]:{}},d=Object(i.c)(c),p=e=>e.resources.embeds.mediaBridgeProvidersRequestStatus,h=(e,t)=>e.resources.embeds.mediaBridgeAssetRequestStatus[t.id],m=(e,t)=>{const{supportedMediaBridgeProviders:n}=t||{},r=p(e);if(n&&n.length){const{byProviderId:e}=r;return n.every(t=>{const n=e[t];return n===o.SUCCEEDED||n===o.FAILED})}{const e=r.installedProviders;return e===o.SUCCEEDED||e===o.FAILED}}},function(e,t,n){"use strict";const r=Object.freeze({VIDEO:"VIDEO",AUDIO:"AUDIO",IMAGE:"IMAGE",DOCUMENT:"DOCUMENT"});t.a=r},function(e,t,n){"use strict";var r=n(287),i=n.n(r),o=n(692),a=n(434),s=n(2734),c=n(45);const l=i()(a.a).withConfig({displayName:"RichTextWithConfigLoader__StyledUIFlex",componentId:"sc-2zuxjo-0"})(["height:400px;"]),u=Object(o.a)({delay:500,loader:()=>Promise.all([n.e("expanded-mofo~layout-editor"),n.e("expanded-mofo")]).then(n.bind(null,2580)),LoadingComponent:({pastDelay:e})=>e?Object(c.jsx)(l,{align:"center",justify:"center",direction:"column",children:Object(c.jsx)(s.a,{layout:"centered",showLabel:!0})}):null});t.a=u},function(e,t,n){"use strict";var r=n(2),i=n(40),o=n(58),a=n(59),s=n(1148),c=n.n(s),l=n(73),u=n(27),d=n(279),p=n(282),h=n(729),m=n(696),f=n(434),g=n(357),b=n(707),O=n(2654),y=n(324),j=n(1206),v=n(1028),C=n(1070),x=n(67),E=n(2781),T=n(1067),S=n(1069),I=n(1207),w=n(2634),_=n(2758),N=n(248),A=n(45);const D=["defaultOptions","hubDbTable","isUnpublished","partial","readOnly","required","saveHubDbRowCache","table_name_or_id","value"],k=e=>"ContentComponents.cmv2.fields.hubdb."+e,P=(e,t)=>{const{display_columns:n,display_format:r,table_name_or_id:i}=t,o=T.i(e,{id:i});return{hubDbRows:T.h(e,{id:o&&o.id}),hubDbTable:o,isUnpublished:T.o(e,{id:i}),defaultOptions:T.b(e,{id:o&&o.id,displayColumns:n,displayFormat:r}),options:T.g(e,{id:o&&o.id,displayColumns:n,displayFormat:r}),optionsRequestStatus:T.d(e)}},R={clearCache:E.a,fetchHubDbRow:E.b,fetchHubDbRows:E.c,fetchHubDbTable:E.d,saveHubDbRowCache:E.g,searchHubDbRows:E.h},F=Object(a.connect)(P,R);class L extends i.Component{constructor(e){super(e);const{user:t}=Object(u.userInfoSync)();this.formatSearchQuery=this.formatSearchQuery.bind(this);this.loadOptions=this.loadOptions.bind(this);this.onChange=this.onChange.bind(this);this.renderOption=this.renderOption.bind(this);this.renderValue=this.renderValue.bind(this);this.renderMissingLabelTooltip=this.renderMissingLabelTooltip.bind(this);this.hasHubDbAccess=t.scopes.includes("hubdb-schemas-read")&&t.scopes.includes("hubdb-data-read");this.hasHubDbPageAccess=t.scopes.includes("hubdb-page-template-access");this.hasHubDbEmailAccess=t.scopes.includes("hubdb-email-template-access");this.debouncedLoadOptions=Object(l.debounce)(this.loadOptions,_.c);this.state={input:""}}componentDidMount(){const{fetchHubDbRow:e,fetchHubDbTable:t,hubDbTable:n,isUnpublished:r,table_name_or_id:i,value:o}=this.props;i&&(n?o&&o.id&&e({tableId:n.id,rowId:o.id}).catch(e=>{throw e}):t(i).then(t=>{const n=t&&t.objects&&isNaN(parseInt(i,10))?t.objects[0]:t;n&&!r&&o&&o.id&&e({tableId:n.id,rowId:o.id}).catch(e=>{throw e})}).catch(e=>{setTimeout(()=>{throw e})}))}shouldComponentUpdate(e,t){return c()(this,e,t)}componentDidUpdate(e){const{fetchHubDbRow:t,hubDbRows:n,hubDbTable:r,value:i}=this.props,{id:o}=i||{},{value:a}=e;o&&r&&(a&&a.id)!==o&&!n[o]&&t({tableId:r.id,rowId:o}).catch(e=>{throw e})}get isInContentEditor(){const{editor:e}=this.props;return e!==I.a.GLOBAL_CONTENT&&e!==I.a.EMAIL&&e!==I.a.DESIGN_MANAGER}get isMissingEmailPermissions(){const{editor:e,isEmailOrAnyType:t}=this.props;return w.b.isUngated("HubDb:EnforceScopeValidations")&&(e===I.a.EMAIL||e===I.a.DESIGN_MANAGER&&t)&&!this.hasHubDbEmailAccess}get isMissingContentPermissions(){const{editor:e}=this.props;return w.b.isUngated("HubDb:EnforceScopeValidations")&&(this.isInContentEditor||e===I.a.DESIGN_MANAGER&&this.isInContentHostTemplateType)&&!this.hasHubDbPageAccess}get isInContentHostTemplateType(){const{contentTypes:e,hostTemplateTypes:t}=this.props;return w.b.isUngated("CMv2:UseContentTypes")?e&&(e.includes(N.ANY)||e.includes(N.LANDING_PAGE)||e.includes(N.SITE_PAGE)||e.includes(N.BLOG_POST)||e.includes(N.BLOG_LISTING)):t&&(t.includes(_.l.ANY)||t.includes(_.l.PAGE)||t.includes(_.l.BLOG_POST)||t.includes(_.l.BLOG_LISTING))}onChange(e){const{onFieldChange:t}=this.props;t({id:e.target.value||null})}formatSearchQuery(e,t){const{display_columns:n,display_format:r}=this.props;t.searchTerm=e;t.columns=[...n];let i=Object(S.a)(r,n&&n.length);n.forEach((e,t)=>{i=i.replaceAll("%"+t,"%"+e)});t.columnFormat=i;return t}loadOptions(e,t,n={offset:0}){const{clearCache:r,display_columns:i,fetchHubDbRows:o,hubDbTable:a,searchHubDbRows:s}=this.props;let c=n.offset,l=o;if(e!==this.state.input){this.setState({input:e});r();c=0}let u={limit:_.f,offset:c};if(""!==e&&i&&i.length>1){l=s;u=this.formatSearchQuery(e,u)}else{u[(i&&i[0]||a.columns[0].name)+"__icontains"]=e||void 0}l({tableId:a.id,query:u}).then(e=>{const{options:n}=this.props,{total:r}=e;t(null,{options:n,pagination:{hasMore:r>n.length,offset:c+_.f,length:r}})}).catch(e=>{setTimeout(()=>{throw e})})}renderMissingLabelTooltip(){const{display_columns:e=[]}=this.props;return Object(A.jsx)(O.a,{maxWidth:175,title:Object(A.jsx)(p.a,{message:k("missingLabelValues"),options:{columnList:Object(A.jsx)(h.a,{children:e.map(e=>Object(A.jsxs)("span",{children:['"',e,'"']},e))})}}),children:Object(A.jsx)("span",{className:"p-left-1",children:Object(A.jsx)(b.a,{backgroundColor:y.CANDY_APPLE,borderWidth:0,color:y.OLAF,name:"exclamation",padding:0,size:12})})})}renderOption(e){const t=e.dropdownClassName||"m-x-4 p-y-2";let n=e.dropdownText||e.textArray;n&&n.length&&(n=Object(C.a)(n));(Object(x.c)(n)||0===n.length)&&(n=Object(A.jsxs)(i.Fragment,{children:[e.value,this.renderMissingLabelTooltip()]}));return Object(A.jsx)(f.a,{className:t,children:n})}renderValue(e){let t=e.dropdownText||e.textArray;t&&t.length&&(t=Object(C.a)(t));(Object(x.c)(t)||0===t.length)&&(t=Object(A.jsxs)(i.Fragment,{children:[e.value,this.renderMissingLabelTooltip()]}));return Object(A.jsx)(f.a,{children:Object(A.jsx)(g.a,{children:t})})}renderPermissionsWarning(){let e,t;if(this.hasHubDbAccess){if(this.isMissingEmailPermissions){e=k("missingScopeTitle");t=k("missingScopeEmailText")}else if(this.isMissingContentPermissions){e=k("missingScopeTitle");t=k("missingScopeCMSText")}}else{e=k("missingPermissionsTitle");t=k("missingPermissionsText")}return t&&e?Object(A.jsx)(m.a,{className:"m-top-2",titleText:Object(A.jsx)(d.a,{message:e}),type:"warning",children:Object(A.jsx)(d.a,{message:t})}):null}renderUnpublishedTableWarning(){return this.props.isUnpublished?Object(A.jsx)(m.a,{className:"m-top-2",titleText:Object(A.jsx)(d.a,{message:k("unpublishedTitle")}),type:"warning",children:Object(A.jsx)(d.a,{message:k("unpublishedText")})}):null}render(){const e=this.props,{defaultOptions:t,hubDbTable:n,isUnpublished:o,partial:a,readOnly:s=!1,required:c,saveHubDbRowCache:l,table_name_or_id:u,value:p}=e,h=Object(r.a)(e,D),{id:f}=p||{},{id:g,deleted:b}=n||{},O=t.length?t:[],y=s||!g||o||this.isMissingEmailPermissions||this.isMissingContentPermissions||!this.hasHubDbAccess;return u?b?Object(A.jsx)(m.a,{titleText:Object(A.jsx)(d.a,{message:k("deletedTableTitle")}),type:"danger",children:Object(A.jsx)(d.a,{message:k("deletedTableText")})}):Object(A.jsxs)(i.Fragment,{children:[Object(A.jsx)(j.a,Object.assign({clearable:!c,"data-selenium":"hubdbrow-select",defaultOptions:O,loadOptions:this.debouncedLoadOptions,onChange:this.onChange,optionRenderer:this.renderOption,readOnly:y,saveCache:a(l,g),value:f||"",valueRenderer:this.renderValue},h)),this.renderPermissionsWarning(),this.renderUnpublishedTableWarning()]}):Object(A.jsx)(m.a,{titleText:Object(A.jsx)(d.a,{message:k("missingTableTitle")}),type:"danger",children:Object(A.jsx)(d.a,{message:k("missingTableText")})})}}t.a=Object(o.compose)(F,Object(v.a)())(L)},function(e,t,n){"use strict";var r=n(40),i=n(73),o=n(99),a=n(279),s=n(2796),c=n(1332),l=n(2794),u=n(2655),d=n(2741),p=n(2742),h=n(443),m=n(520),f=n(1330),g=n(2758),b=n(1180),O=n(160),y=n(67),j=n(45);const v=b.a[O.BORDER],C=e=>"ContentComponents.cmv2.fields.border."+e,x={[f.b.TOP]:{},[f.b.BOTTOM]:{},[f.b.LEFT]:{},[f.b.RIGHT]:{}};class E extends r.Component{constructor(e){super(e);this.onChange=this.onChange.bind(this);this.onBorderUpdate=this.onBorderUpdate.bind(this);this.toggleSidesSelect=this.toggleSidesSelect.bind(this);this.onBorderSideChange=this.onBorderSideChange.bind(this);const{value:t={}}=e,n=Object.keys(f.b).reduce((e,n)=>{const r=f.b[n];t&&!Object(i.isEmpty)(t[r])&&e.push(r);return e},[]),r=!n.length||4===n.length;this.state={showSideOptions:!r,selectedSides:r?Object.values(f.b):n}}get borderStyles(){const{value:e={}}=this.props,{selectedSides:t}=this.state;return e&&e[t[0]]?e[t[0]]:{}}get borderStyleOptions(){return Object.keys(f.c).map(e=>({text:Object(o.a)(C("borderStyles."+e)),value:f.c[e]}))}get hiddenSubfields(){const{visibility:e={}}=this.props;return e.hidden_subfields||{}}onBorderUpdate(e,t){const{onFieldChange:n,value:r={}}=this.props,i=Object.assign({},x);e.forEach(e=>i[e]=t);const o=Object.assign({},r||{},i);Object.keys(f.b).forEach(e=>{const t=f.b[e];Object(y.b)(o[t])&&delete o[t]});n(o)}onChange(e,t){const{selectedSides:n}=this.state,r=Object.assign({},this.borderStyles,{[e]:t});e===f.a.COLOR&&null==r[f.a.OPACITY]&&(r[f.a.OPACITY]=100);this.onBorderUpdate(n,r)}onBorderSideChange(e){const{selectedSides:t}=this.state,n=t.includes(e)?Object(i.without)(t,e):t.concat(e);if(n.length>0){this.setState({selectedSides:n});this.onBorderUpdate(n,this.borderStyles)}}toggleSidesSelect({target:{checked:e}}){const{selectedSides:t}=this.state;let n=[...t];if(!e){n=Object.values(f.b);this.onBorderUpdate(n,this.borderStyles)}this.setState({selectedSides:n,showSideOptions:e})}renderColorInput(){const{ColorPicker:e=s.a,readOnly:t=!1,useOnDark:n}=this.props,{color:r=null,opacity:i}=this.borderStyles;return this.hiddenSubfields[v.color]?null:Object(j.jsx)(d.a,{label:Object(j.jsx)(a.a,{message:C("color")}),children:Object(j.jsx)(l.a,{"data-test-id":"cmv2-border-color",color:r,ColorPicker:e,onColorChange:e=>{this.onChange(f.a.COLOR,e.target.value)},onOpacityChange:e=>{this.onChange(f.a.OPACITY,e.target.value)},opacity:i,readOnly:t,use:n?"on-dark":"default"})})}renderBorderThicknessInput(){const{readOnly:e=!1,useOnDark:t}=this.props,{width:n={}}=this.borderStyles;return this.hiddenSubfields[v.thickness]?null:Object(j.jsx)(d.a,{className:"m-right-2",label:Object(j.jsx)(a.a,{message:C("thickness")}),children:Object(j.jsx)(c.a,{"data-test-id":"cmv2-border-width",defaultUnit:g.d.px,onChange:e=>{this.onChange(f.a.WIDTH,e)},readOnly:e,stepper:!0,unit:n.units,useOnDark:t,value:n.value})})}renderStyleSelect(){const{readOnly:e=!1,useOnDark:t}=this.props,{style:n=null}=this.borderStyles;return this.hiddenSubfields[v.style]?null:Object(j.jsx)(d.a,{label:Object(j.jsx)(a.a,{message:C("style")}),children:Object(j.jsx)(u.a,{"data-test-id":"cmv2-border-style",buttonUse:t?"form-on-dark":"form",onChange:e=>{this.onChange(f.a.STYLE,e.target.value)},options:this.borderStyleOptions,placeholder:"",readOnly:e,searchable:!1,value:n})})}renderSidesSelect(){const{allow_custom_border_sides:e,readOnly:t=!1}=this.props,{selectedSides:n,showSideOptions:r}=this.state;return!e||this.hiddenSubfields[v.custom_border_sides]?null:Object(j.jsxs)("div",{children:[Object(j.jsx)(p.a,{checked:r,className:"m-top-3","data-test-id":"cmv2-border-sides-checkbox",onChange:this.toggleSidesSelect,readOnly:t,children:Object(j.jsx)(a.a,{message:C("showSideOptions")})}),r&&Object(j.jsx)(d.a,{label:Object(j.jsx)(a.a,{message:C("sides")}),children:Object(j.jsx)(m.a,{"data-test-id":"cmv2-border-sides",children:Object.values(f.b).map(e=>Object(j.jsx)(h.a,{"data-test-id":"cmv2-border-side-"+e,active:n.includes(e),onClick:()=>this.onBorderSideChange(e),size:"small",use:"tertiary-light",children:Object(j.jsx)(a.a,{message:C("borderSides."+e)})},e))})})]})}render(){const{style:e=null}=this.borderStyles;return Object(j.jsxs)("div",{"data-test-id":"cmv2-border-field",children:[this.renderStyleSelect(),e&&e!==f.c.NONE?Object(j.jsxs)("span",{children:[this.renderColorInput(),this.renderBorderThicknessInput(),this.renderSidesSelect()]}):null]})}}t.a=E},function(e,t,n){"use strict";var r=n(40),i=n(279),o=n(520),a=n(2679),s=n(710),c=n(490),l=n(434),u=n(2758),d=n(1180),p=n(160),h=n(4),m=n(45);const f=[u.k.LEFT,u.k.CENTER,u.k.RIGHT],g=[u.v.BOTTOM,u.v.MIDDLE,u.v.TOP],b={[u.k.LEFT]:"blockAlignmentLeft",[u.k.CENTER]:"blockAlignmentCenter",[u.k.RIGHT]:"blockAlignmentRight",[u.v.BOTTOM]:"blockAlignmentBottom",[u.v.MIDDLE]:"blockAlignmentMiddle",[u.v.TOP]:"blockAlignmentTop"},O=d.a[p.ALIGNMENT],y=e=>"ContentComponents.cmv2.fields.alignment."+e;class j extends r.PureComponent{constructor(e){super(e);this.onVerticalAlignmentChange=this.onVerticalAlignmentChange.bind(this);this.onHorizontalAlignmentChange=this.onHorizontalAlignmentChange.bind(this)}get horizontalAlignment(){const{value:e}=this.props;return e&&e.horizontal_align?e.horizontal_align:null}get verticalAlignment(){const{value:e}=this.props;return e&&e.vertical_align?e.vertical_align:null}get hiddenSubfields(){const{visibility:e={}}=this.props;return e.hidden_subfields||{}}onHorizontalAlignmentChange(e){const{onFieldChange:t,value:n={}}=this.props;t(Object.assign({},n,{horizontal_align:e}))}onVerticalAlignmentChange(e){const{onFieldChange:t,value:n={}}=this.props;t(Object.assign({},n,{vertical_align:e}))}renderHorizontalAlignmentControls(){const{alignment_direction:e,buttonSize:t,readOnly:n,hideLabel:r}=this.props;if(e!==u.b.BOTH&&e!==u.b.HORIZONTAL)return null;const d=f.map(e=>{const r=O[e];if(this.hiddenSubfields[r])return null;const o=Object(m.jsx)(i.a,{message:y("horizontal.direction."+e)}),c=this.horizontalAlignment===e;return Object(m.jsx)(s.a,{"aria-label":h.a.text(y("horizontal.direction."+e)),active:c,disabled:n,onClick:()=>{this.onHorizontalAlignmentChange(c?null:e)},size:t,tooltip:o,children:Object(m.jsx)(a.a,{name:b[e]})},e)}).filter(Boolean);return d.length?Object(m.jsxs)(l.a,{direction:"column",children:[!r&&Object(m.jsx)(c.a,{children:Object(m.jsx)(i.a,{message:y("horizontal.title")})}),Object(m.jsx)(o.a,{children:d})]}):null}renderVerticalAlignmentControls(){const{alignment_direction:e,buttonSize:t,readOnly:n,hideLabel:r}=this.props;if(e!==u.b.BOTH&&e!==u.b.VERTICAL)return null;const d=g.map(e=>{const r=O[e];if(this.hiddenSubfields[r])return null;const o=Object(m.jsx)(i.a,{message:y("vertical.direction."+e)}),c=this.verticalAlignment===e;return Object(m.jsx)(s.a,{"aria-label":h.a.text(y("vertical.direction."+e)),active:this.verticalAlignment===e,disabled:n,onClick:()=>this.onVerticalAlignmentChange(c?null:e),size:t,tooltip:o,children:Object(m.jsx)(a.a,{name:b[e]})},e)}).filter(Boolean);return d.length?Object(m.jsxs)(l.a,{direction:"column",children:[!r&&Object(m.jsx)(c.a,{children:Object(m.jsx)(i.a,{message:y("vertical.title")})}),Object(m.jsx)(o.a,{children:d})]}):null}render(){return Object(m.jsxs)(l.a,{children:[this.renderHorizontalAlignmentControls(),this.renderVerticalAlignmentControls()]})}}j.defaultProps={alignment_direction:u.b.BOTH,buttonSize:"small",hideLabel:!1};t.a=j},function(e,t,n){"use strict";var r=n(40),i=n(279),o=n(520),a=n(2679),s=n(710),c=n(2758),l=n(160),u=n(1180),d=n(45);const p=[c.t.LEFT,c.t.CENTER,c.t.RIGHT,c.t.JUSTIFY],h={[c.t.LEFT]:"alignLeft",[c.t.CENTER]:"alignCenter",[c.t.RIGHT]:"alignRight",[c.t.JUSTIFY]:"alignJustify"},m=u.a[l.TEXT_ALIGNMENT],f=e=>"ContentComponents.cmv2.fields.textAlignment."+e;class g extends r.PureComponent{constructor(e){super(e);this.onAlignmentChange=this.onAlignmentChange.bind(this)}get textAlignment(){const{value:e}=this.props;return e&&e.text_align?e.text_align.toUpperCase():null}get hiddenSubfields(){const{visibility:e={}}=this.props;return e.hidden_subfields||{}}onAlignmentChange(e){const{onFieldChange:t}=this.props;t({text_align:e})}render(){const{buttonSize:e="small",readOnly:t}=this.props;return Object(d.jsx)(o.a,{children:p.map(n=>{const r=m[n];if(this.hiddenSubfields[r])return null;const o=Object(d.jsx)(i.a,{message:f("direction."+n)});return Object(d.jsx)(s.a,{active:this.textAlignment===n,"data-test-id":"text-align-"+n,disabled:t,onClick:()=>this.onAlignmentChange(n),size:e,tooltip:o,children:Object(d.jsx)(a.a,{name:h[n]})},n)})})}}t.a=g},function(e,t,n){"use strict";n.d(t,"b",(function(){return i}));n.d(t,"c",(function(){return c}));n.d(t,"a",(function(){return l}));var r=n(4);const i={short:"short",long:"long"},o=({code:e,symbol:t,symbolNative:n})=>{let r=t;e===t&&e!==n?r=n:e===t&&(r="");return r},a=(e,t)=>{const n=r.a.currencySymbols[e]||r.a.currencySymbols.USD,a=n.code,s=o({code:a,symbol:n.symbol,symbolNative:n.symbol_native});return t===i.short?`${a} ${s}`:`${n.name} (${a}) ${s}`},s=e=>a(e,i.short),c=e=>a(e,i.long),l={[i.short]:s,[i.long]:c}},function(e,t,n){"use strict";n.d(t,"c",(function(){return r}));n.d(t,"i",(function(){return i}));n.d(t,"j",(function(){return o}));n.d(t,"k",(function(){return a}));n.d(t,"l",(function(){return s}));n.d(t,"m",(function(){return c}));n.d(t,"n",(function(){return l}));n.d(t,"q",(function(){return u}));n.d(t,"r",(function(){return d}));n.d(t,"s",(function(){return p}));n.d(t,"u",(function(){return h}));n.d(t,"t",(function(){return m}));n.d(t,"v",(function(){return f}));n.d(t,"w",(function(){return g}));n.d(t,"x",(function(){return b}));n.d(t,"y",(function(){return O}));n.d(t,"z",(function(){return y}));n.d(t,"C",(function(){return j}));n.d(t,"D",(function(){return v}));n.d(t,"A",(function(){return C}));n.d(t,"a",(function(){return x}));n.d(t,"d",(function(){return E}));n.d(t,"o",(function(){return T}));n.d(t,"B",(function(){return S}));n.d(t,"b",(function(){return I}));n.d(t,"e",(function(){return w}));n.d(t,"p",(function(){return _}));n.d(t,"h",(function(){return N}));n.d(t,"f",(function(){return A}));n.d(t,"g",(function(){return D}));n.d(t,"E",(function(){return k}));n.d(t,"H",(function(){return P}));n.d(t,"F",(function(){return R}));n.d(t,"G",(function(){return F}));const r="amount",i="hs_recurring_billing_terms",o="createdate",a="description",s="discount",c="hs_discount_percentage",l="hs_line_item_currency_code",u="name",d="hs_recurring_billing_number_of_payments",p="hs_position_on_quote",h="hs_product_id",m="price",f="quantity",g="recurringbillingfrequency",b="hs_sku",O="hs_recurring_billing_start_date",y="tax",j="hs_recurring_billing_period",v="hs_cost_of_goods_sold",C="hs_tcv",x="hs_acv",E="hs_arr",T="hs_mrr",S="hs_margin_tcv",I="hs_margin_acv",w="hs_margin_arr",_="hs_margin_mrr",N="hs_billing_start_delay_type",A="hs_billing_start_delay_days",D="hs_billing_start_delay_months",k="hs_price_",P=e=>0===e.indexOf(k),R=e=>{const t=e.split(k)[1];return t?t.toUpperCase():null},F=e=>`${k}${e.toLowerCase()}`},function(e,t,n){"use strict";var r=n(1343),i=n(2748);t.a=Object(i.a)(r.a)},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(674);function i(e,t){let n=t;for(let t=0;t<e.length&&void 0!==n;t++)n=Object(r.a)(e[t],n);return n}},,,function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));n.d(t,"b",(function(){return i}));n.d(t,"c",(function(){return o}));n.d(t,"e",(function(){return a}));n.d(t,"f",(function(){return s}));n.d(t,"g",(function(){return c}));n.d(t,"d",(function(){return l}));const r="booleancheckbox",i="checkbox",o="file",a="phonenumber",s="text",c="textarea",l="html"},function(e,t,n){"use strict";n.d(t,"f",(function(){return r}));n.d(t,"e",(function(){return i}));n.d(t,"a",(function(){return o}));n.d(t,"c",(function(){return a}));n.d(t,"d",(function(){return s}));n.d(t,"b",(function(){return c}));const r="string",i="number",o="bool",a="datetime",s="enumeration",c="date"},function(e,t,n){"use strict";n.d(t,"e",(function(){return r}));n.d(t,"b",(function(){return i}));n.d(t,"c",(function(){return o}));n.d(t,"a",(function(){return a}));n.d(t,"d",(function(){return s}));const r="unformatted",i="formatted",o="percentage",a="duration",s="probability"},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));n.d(t,"b",(function(){return o}));const r=/^userId:\d+$/;function i(e){return!(!e||!r.test(e))}function o(e){if(e&&r.test(e)){const t=e.split("userId:")[1];return parseInt(t,10)}}},function(e,t,n){"use strict";n.d(t,"y",(function(){return r}));n.d(t,"O",(function(){return i}));n.d(t,"v",(function(){return o}));n.d(t,"A",(function(){return a}));n.d(t,"B",(function(){return s}));n.d(t,"C",(function(){return c}));n.d(t,"I",(function(){return l}));n.d(t,"S",(function(){return u}));n.d(t,"c",(function(){return d}));n.d(t,"x",(function(){return p}));n.d(t,"e",(function(){return h}));n.d(t,"N",(function(){return m}));n.d(t,"k",(function(){return f}));n.d(t,"Q",(function(){return g}));n.d(t,"f",(function(){return b}));n.d(t,"r",(function(){return O}));n.d(t,"P",(function(){return y}));n.d(t,"J",(function(){return j}));n.d(t,"E",(function(){return v}));n.d(t,"D",(function(){return C}));n.d(t,"l",(function(){return x}));n.d(t,"L",(function(){return E}));n.d(t,"w",(function(){return T}));n.d(t,"d",(function(){return S}));n.d(t,"b",(function(){return I}));n.d(t,"G",(function(){return w}));n.d(t,"t",(function(){return _}));n.d(t,"s",(function(){return N}));n.d(t,"u",(function(){return A}));n.d(t,"M",(function(){return D}));n.d(t,"z",(function(){return k}));n.d(t,"H",(function(){return P}));n.d(t,"K",(function(){return R}));n.d(t,"a",(function(){return F}));n.d(t,"q",(function(){return L}));n.d(t,"j",(function(){return M}));n.d(t,"m",(function(){return B}));n.d(t,"n",(function(){return U}));n.d(t,"g",(function(){return V}));n.d(t,"o",(function(){return H}));n.d(t,"F",(function(){return q}));n.d(t,"p",(function(){return G}));n.d(t,"R",(function(){return W}));n.d(t,"h",(function(){return z}));n.d(t,"i",(function(){return $}));const r="OWNER",i="TEAM",o="MULTI_CURRENCY_CURRENCY_CODE",a="PERSONA",s="PIPELINE",c="PIPELINE_STAGE",l="SEQUENCE",u="WORKFLOW",d="BUSINESS_UNIT",p="ORIGINAL_SOURCE_1",h="CAMPAIGN",m="TASK_QUEUE",f="CRM_OBJECT",g="USER",b="CHANNEL_INSTANCE",O="GENERIC_CHANNEL",y="TRACKED_TERM",j="SEQUENCE_WITH_PERMISSIONS",v="PIPELINE_WITH_PERMISSIONS",C="PIPELINE_STAGE_WITH_PERMISSIONS",x="CRM_OBJECT_TAG",E="STATIC_INBOUND_DB_LIST",T="OPTIMIZATION_TYPE",S="CALL_DISPOSITION",I="AD_ACCOUNT",w="SALES_DOCUMENT",_="MARKETING_SMS_ROOT_MIC",N="MARKETING_EMAIL",A="MEETING_OUTCOME",D="SYNC_ACCOUNT",k="PERMISSION_SET",P="SEAT",R="SOURCE_LABEL",F="ACTIVITY_TYPE",L="FORM",M="CONTENT",B="FILE_ID_OR_URL",U="FLOW_ACTION_TYPE",V="COMMERCE_PAYMENT_METHOD",H="FLOW_ACTION_TYPE_GROUP",q="PLAYBOOK",G="FORECAST_TYPE",W="USER_MANAGER",z="COMMERCE_PRODUCT_TAX_CATEGORY",$="CONTACT_EMAIL_ADDRESS"},function(e,t,n){"use strict";n.d(t,"b",(function(){return o}));n.d(t,"a",(function(){return a}));var r=n(99);const i={nobreakdown:"NO_BREAKDOWN","c90e6907-e895-479c-8689-0d22fa660677":"NO_DETAIL_GUID","30434570-5795-496c-b0ae-8d2dc9053483":"EMPTY_LIST_GUID","5ca1ab1e-fb50-4e89-9cff-a000ba5eba11":"UNKNOWN","9bae4a1c-0f1c-11e1-9afb-58b0357d1cb3":"UNKNOWN_CAMPAIGN_GUID","bd185678-735d-4c78-a673-d9528d37a4a6":"UNKNOWN_COUNTRY_GUID","c1d25565-f664-4089-9f0a-1734cc1b3a65":"UNKNOWN_KEYWORD_GUID","1ca35c16-25e9-49f1-bfcb-960300c42b6f":"UNKNOWN_REFERRER_GUID","1d3f1024-9c84-4955-8a30-a84fd506915b":"UNKNOWN_DEVICE_GUID","1b7853ea-92b0-483f-a480-9c8595259731":"UNKNOWN_DEVICE_OS_GUID","5636aafb-35ed-4881-bd4c-3fa6eb95a194":"UNKNOWN_DEVICE_MARKET_NAME","7081c5b2-d128-4ec1-a9be-cba29cfc540a":"UNKNOWN_GEO_GUID","f67178c8-9eba-4f66-a560-c02206160915":"UNKNOWN_BROWSER_VERSION","e3875d32-ab81-48f1-9e78-493eae864f12":"UNKNOWN_URL","Unknown keywords (SSL)":"SSL_REMOVED_KEYWORDS","Unknown keywords (image preview)":"LYCOS_IMAGE_KEYWORD_PLACEHOLDER","Auto-tagged PPC":"PPC_GCLID_BUCKET",EMAIL_INTEGRATION:"EMAIL_INTEGRATION",BCC_TO_CRM:"BCC_TO_CRM",GMAIL_INTEGRATION:"GMAIL_INTEGRATION"},o=e=>Object.prototype.hasOwnProperty.call(i,e),a=e=>o(e)?Object(r.a)("customerDataObjects.guids."+i[e]):e},function(e,t){e.exports={productPanelUsage:{name:"Product panel",properties:{action:["Create product","Edit product"],subAction:["Save","Save and add another"],propertyName:{type:"string"}},namespace:"products",class:"usage"},productExport:{name:"Products export",properties:{action:["Export success"],subAction:["Export specific objects","Export all objects"],containsSearchQuery:{type:"boolean"}},namespace:"products",class:"usage"},deleteObject:{properties:{action:["Delete product","Delete folder"]},namespace:"products",name:"Products usage",class:"usage"},bulkDeleteObjects:{properties:{action:["Bulk delete"],containsSearchQuery:{type:"boolean"}},namespace:"products",name:"Products usage",class:"usage"},modifyFolderModal:{properties:{action:["Create folder","Edit folder"]},namespace:"products",name:"Products usage",class:"usage"},moveProductToFolder:{properties:{action:["Move product to folder"]},namespace:"products",name:"Products usage",class:"usage"},openProductOrLineItemPanel:{properties:{action:["create","edit","view"],objectType:["PRODUCT","LINE_ITEM"],sourceIsShopify:"boolean",sourceIsEcommBridge:{type:"boolean",isOptional:!0}},namespace:"products",name:"Products interaction",class:"interaction"},toggleFilePickerForImageURL:{properties:{action:["Open file picker for image URL","Close file picker for image URL"],objectType:["PRODUCT","LINE_ITEM"]},namespace:"products",name:"Products interaction",class:"interaction"},selectFileForImageURL:{properties:{action:["Select file for image URL"],objectType:["PRODUCT","LINE_ITEM"]},namespace:"products",name:"Products interaction",class:"interaction"},productLibraryFilter:{properties:{action:["Filter product library"]},namespace:"products",name:"Products interaction",class:"interaction"},productPaymentLinkModalInteraction:{properties:{action:["View modal","Create Payment Link"]},namespace:"products",name:"Products interaction",class:"interaction"}}},function(e,t,n){var r=n(1354);function i(e,t){return r(e,t)}e.exports=i},function(e,t,n){var r=n(1355),i=n(113);function o(e,t,n,a,s){return e===t||(null==e||null==t||!i(e)&&!i(t)?e!=e&&t!=t:r(e,t,n,a,o,s))}e.exports=o},function(e,t,n){var r=n(1356),i=n(1362),o=n(1364),a=n(1367),s=n(1383),c=n(104),l=n(1375),u=n(1377),d=1,p="[object Arguments]",h="[object Array]",m="[object Object]",f=Object.prototype.hasOwnProperty;function g(e,t,n,g,b,O){var y=c(e),j=c(t),v=y?h:s(e),C=j?h:s(t),x=(v=v==p?m:v)==m,E=(C=C==p?m:C)==m,T=v==C;if(T&&l(e)){if(!l(t))return!1;y=!0;x=!1}if(T&&!x){O||(O=new r);return y||u(e)?i(e,t,n,g,b,O):o(e,t,v,n,g,b,O)}if(!(n&d)){var S=x&&f.call(e,"__wrapped__"),I=E&&f.call(t,"__wrapped__");if(S||I){var w=S?e.value():e,_=I?t.value():t;O||(O=new r);return b(w,_,n,g,O)}}if(!T)return!1;O||(O=new r);return a(e,t,n,g,b,O)}e.exports=g},function(e,t,n){var r=n(134),i=n(1357),o=n(1358),a=n(1359),s=n(1360),c=n(1361);function l(e){var t=this.__data__=new r(e);this.size=t.size}l.prototype.clear=i;l.prototype.delete=o;l.prototype.get=a;l.prototype.has=s;l.prototype.set=c;e.exports=l},function(e,t,n){var r=n(134);function i(){this.__data__=new r;this.size=0}e.exports=i},function(e,t){function n(e){var t=this.__data__,n=t.delete(e);this.size=t.size;return n}e.exports=n},function(e,t){function n(e){return this.__data__.get(e)}e.exports=n},function(e,t){function n(e){return this.__data__.has(e)}e.exports=n},function(e,t,n){var r=n(134),i=n(142),o=n(117),a=200;function s(e,t){var n=this.__data__;if(n instanceof r){var s=n.__data__;if(!i||s.length<a-1){s.push([e,t]);this.size=++n.size;return this}n=this.__data__=new o(s)}n.set(e,t);this.size=n.size;return this}e.exports=s},function(e,t,n){var r=n(618),i=n(1363),o=n(628),a=1,s=2;function c(e,t,n,c,l,u){var d=n&a,p=e.length,h=t.length;if(p!=h&&!(d&&h>p))return!1;var m=u.get(e);if(m&&u.get(t))return m==t;var f=-1,g=!0,b=n&s?new r:void 0;u.set(e,t);u.set(t,e);for(;++f<p;){var O=e[f],y=t[f];if(c)var j=d?c(y,O,f,t,e,u):c(O,y,f,e,t,u);if(void 0!==j){if(j)continue;g=!1;break}if(b){if(!i(t,(function(e,t){if(!o(b,t)&&(O===e||l(O,e,n,c,u)))return b.push(t)}))){g=!1;break}}else if(O!==y&&!l(O,y,n,c,u)){g=!1;break}}u.delete(e);u.delete(t);return g}e.exports=c},function(e,t){function n(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}e.exports=n},function(e,t,n){var r=n(108),i=n(1365),o=n(138),a=n(1362),s=n(1366),c=n(652),l=1,u=2,d="[object Boolean]",p="[object Date]",h="[object Error]",m="[object Map]",f="[object Number]",g="[object RegExp]",b="[object Set]",O="[object String]",y="[object Symbol]",j="[object ArrayBuffer]",v="[object DataView]",C=r?r.prototype:void 0,x=C?C.valueOf:void 0;function E(e,t,n,r,C,E,T){switch(n){case v:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer;t=t.buffer;case j:return!(e.byteLength!=t.byteLength||!E(new i(e),new i(t)));case d:case p:case f:return o(+e,+t);case h:return e.name==t.name&&e.message==t.message;case g:case O:return e==t+"";case m:var S=s;case b:var I=r&l;S||(S=c);if(e.size!=t.size&&!I)return!1;var w=T.get(e);if(w)return w==t;r|=u;T.set(e,t);var _=a(S(e),S(t),r,C,E,T);T.delete(e);return _;case y:if(x)return x.call(e)==x.call(t)}return!1}e.exports=E},function(e,t,n){var r=n(109).Uint8Array;e.exports=r},function(e,t){function n(e){var t=-1,n=Array(e.size);e.forEach((function(e,r){n[++t]=[r,e]}));return n}e.exports=n},function(e,t,n){var r=n(1368),i=1,o=Object.prototype.hasOwnProperty;function a(e,t,n,a,s,c){var l=n&i,u=r(e),d=u.length;if(d!=r(t).length&&!l)return!1;for(var p=d;p--;){var h=u[p];if(!(l?h in t:o.call(t,h)))return!1}var m=c.get(e);if(m&&c.get(t))return m==t;var f=!0;c.set(e,t);c.set(t,e);for(var g=l;++p<d;){var b=e[h=u[p]],O=t[h];if(a)var y=l?a(O,b,h,t,e,c):a(b,O,h,e,t,c);if(!(void 0===y?b===O||s(b,O,n,a,c):y)){f=!1;break}g||(g="constructor"==h)}if(f&&!g){var j=e.constructor,v=t.constructor;j==v||!("constructor"in e)||!("constructor"in t)||"function"==typeof j&&j instanceof j&&"function"==typeof v&&v instanceof v||(f=!1)}c.delete(e);c.delete(t);return f}e.exports=a},function(e,t,n){var r=n(1369),i=n(1370),o=n(1372);function a(e){return r(e,o,i)}e.exports=a},function(e,t,n){var r=n(644),i=n(104);function o(e,t,n){var o=t(e);return i(e)?o:r(o,n(e))}e.exports=o},function(e,t,n){var r=n(641),i=n(1371),o=Object.prototype.propertyIsEnumerable,a=Object.getOwnPropertySymbols,s=a?function(e){if(null==e)return[];e=Object(e);return r(a(e),(function(t){return o.call(e,t)}))}:i;e.exports=s},function(e,t){function n(){return[]}e.exports=n},function(e,t,n){var r=n(1373),i=n(1380),o=n(638);function a(e){return o(e)?r(e):i(e)}e.exports=a},function(e,t,n){var r=n(1374),i=n(646),o=n(104),a=n(1375),s=n(158),c=n(1377),l=Object.prototype.hasOwnProperty;function u(e,t){var n=o(e),u=!n&&i(e),d=!n&&!u&&a(e),p=!n&&!u&&!d&&c(e),h=n||u||d||p,m=h?r(e.length,String):[],f=m.length;for(var g in e)!t&&!l.call(e,g)||h&&("length"==g||d&&("offset"==g||"parent"==g)||p&&("buffer"==g||"byteLength"==g||"byteOffset"==g)||s(g,f))||m.push(g);return m}e.exports=u},function(e,t){function n(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}e.exports=n},function(e,t,n){(function(e){var r=n(109),i=n(1376),o=t&&!t.nodeType&&t,a=o&&"object"==typeof e&&e&&!e.nodeType&&e,s=a&&a.exports===o?r.Buffer:void 0,c=(s?s.isBuffer:void 0)||i;e.exports=c}).call(this,n(75)(e))},function(e,t){function n(){return!1}e.exports=n},function(e,t,n){var r=n(1378),i=n(627),o=n(1379),a=o&&o.isTypedArray,s=a?i(a):r;e.exports=s},function(e,t,n){var r=n(107),i=n(639),o=n(113),a="[object Arguments]",s="[object Array]",c="[object Boolean]",l="[object Date]",u="[object Error]",d="[object Function]",p="[object Map]",h="[object Number]",m="[object Object]",f="[object RegExp]",g="[object Set]",b="[object String]",O="[object WeakMap]",y="[object ArrayBuffer]",j="[object DataView]",v="[object Float64Array]",C="[object Int8Array]",x="[object Int16Array]",E="[object Int32Array]",T="[object Uint8Array]",S="[object Uint8ClampedArray]",I="[object Uint16Array]",w="[object Uint32Array]",_={};_["[object Float32Array]"]=_[v]=_[C]=_[x]=_[E]=_[T]=_[S]=_[I]=_[w]=!0;_[a]=_[s]=_[y]=_[c]=_[j]=_[l]=_[u]=_[d]=_[p]=_[h]=_[m]=_[f]=_[g]=_[b]=_[O]=!1;function N(e){return o(e)&&i(e.length)&&!!_[r(e)]}e.exports=N},function(e,t,n){(function(e){var r=n(110),i=t&&!t.nodeType&&t,o=i&&"object"==typeof e&&e&&!e.nodeType&&e,a=o&&o.exports===i&&r.process,s=function(){try{var e=o&&o.require&&o.require("util").types;return e||a&&a.binding&&a.binding("util")}catch(e){}}();e.exports=s}).call(this,n(75)(e))},function(e,t,n){var r=n(1381),i=n(1382),o=Object.prototype.hasOwnProperty;function a(e){if(!r(e))return i(e);var t=[];for(var n in Object(e))o.call(e,n)&&"constructor"!=n&&t.push(n);return t}e.exports=a},function(e,t){var n=Object.prototype;function r(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||n)}e.exports=r},function(e,t,n){var r=n(658)(Object.keys,Object);e.exports=r},function(e,t,n){var r=n(1384),i=n(142),o=n(1385),a=n(650),s=n(1386),c=n(107),l=n(128),u="[object Map]",d="[object Object]",p="[object Promise]",h="[object Set]",m="[object WeakMap]",f="[object DataView]",g=l(r),b=l(i),O=l(o),y=l(a),j=l(s),v=c;(r&&v(new r(new ArrayBuffer(1)))!=f||i&&v(new i)!=u||o&&v(o.resolve())!=p||a&&v(new a)!=h||s&&v(new s)!=m)&&(v=function(e){var t=c(e),n=t==d?e.constructor:void 0,r=n?l(n):"";if(r)switch(r){case g:return f;case b:return u;case O:return p;case y:return h;case j:return m}return t});e.exports=v},function(e,t,n){var r=n(122)(n(109),"DataView");e.exports=r},function(e,t,n){var r=n(122)(n(109),"Promise");e.exports=r},function(e,t,n){var r=n(122)(n(109),"WeakMap");e.exports=r},function(e,t){e.exports={"view-listcreate":{name:"view-listcreate",class:"view",properties:{action:"string",screen:"string",subscreen:{isOptional:!0,type:"string"},"wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}},namespace:"lists"},"view-listdetail":{name:"view-listdetail",class:"view",properties:{action:"string",screen:"string",subscreen:{isOptional:!0,type:"string"},"wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}},namespace:"lists"},"view-listsindex":{name:"view-listsindex",class:"view",properties:{action:"string",screen:"string",subscreen:{isOptional:!0,type:"string"},"wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}},namespace:"lists"},createReport:{name:"create report",class:"usage",properties:{objectTypeId:"string",screen:["list-detail"],"wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}},namespace:"lists"},editListColumns:{name:"edit columns",class:"usage",properties:{objectTypeId:"string",screen:["list-detail"],"wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}},namespace:"lists"},createList:{name:"create list",class:"usage",properties:{objectTypeId:"string",classicListId:{isOptional:!0,type:"number"},ilsListId:{isOptional:!0,type:"number"},fromClone:{isOptional:!0,type:"boolean"},listType:["static","dynamic"],screen:["list-detail","list-index","unused-lists"],"wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}},namespace:"lists"},deleteList:{name:"delete list",class:"usage",properties:{objectTypeId:"string",isBulk:{isOptional:!0,type:"boolean"},partialSuccess:{isOptional:!0,type:"boolean"},screen:["list-detail","list-index","unused-lists"],subscreen:{isOptional:!0,type:"string"},"wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}},namespace:"lists"},exportList:{name:"export list",class:"usage",properties:{objectTypeId:"string",screen:["list-detail","list-index","unused-lists"],"wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}},namespace:"lists"},updateList:{name:"update list",class:"usage",properties:{objectTypeId:"string",classicListId:{isOptional:!0,type:"number"},ilsListId:{isOptional:!0,type:"number"},listType:["static","dynamic"],screen:["list-detail","list-index","unused-lists"],"wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}},namespace:"lists"},createFolder:{name:"create folder",class:"usage",properties:{screen:["list-index"],subscreen:"string","wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}},namespace:"lists"},deleteFolder:{name:"delete folder",class:"usage",properties:{screen:["list-index"],subscreen:"string","wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}},namespace:"lists"},moveToFolder:{name:"move to folder",class:"usage",properties:{isBulk:{isOptional:!0,type:"boolean"},screen:["list-detail","list-index"],"wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}},namespace:"lists"},listsPageview:{name:"pageview",class:"view",properties:{screen:["list-detail","list-index","unused-lists","recently-deleted","empty-list","settings","activity"],subscreen:{type:"string",isOptional:!0},"wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}},namespace:"lists"},listsInteraction:{name:"lists interaction",class:"interaction",properties:{ilsListId:{isOptional:!0,type:"number"},objectTypeId:{type:"string",isOptional:!0},listType:{isOptional:!0,type:["static","dynamic"]},action:"string",screen:{isOptional:!0,type:["list-detail","list-index","unused-lists","manage-registration","recently-deleted","empty-list","settings","activity"]},subAction:{type:"string",isOptional:!0},type:{type:"string",isOptional:!0},condition:{type:"string",isOptional:!0},filterFamily:{type:"string",isOptional:!0},panelKey:{type:"string",isOptional:!0},maxCount:{type:"number",isOptional:!0},targetListType:{type:"string",isOptional:!0},listId:{type:"string",isOptional:!0},notificationTypes:{isOptional:!0,type:"array"},listsExcluded:{isOptional:!0,type:"number"},recordsExcluded:{isOptional:!0,type:"number"},AIGeneratedListFilters:{isOptional:!0,type:"string"},"wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}},namespace:"lists"},addContactsToRestrictedList:{name:"lists interaction",class:"interaction",properties:{objectTypeId:"string",action:"string",count:"number","wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}},namespace:"lists"},bulkAddToList:{name:"bulk add to list",class:"usage",properties:{objectTypeId:"string",screen:"string",subscreen:["index"],subscreen2:["bulk-list-modal"],"wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}},namespace:"lists"}}},function(e,t){e.exports={"settings-interaction":{name:"settings-interaction",class:"interaction",properties:{action:"string",app:{type:"string",isOptional:!0},actionType:{type:["CONTACT","COMPANY","DEAL","TASK","TICKET"],isOptional:!0},subAction:{type:"string",isOptional:!0},clientType:{type:"string",isOptional:!0},quotasChanged:{type:"number",isOptional:!0},screen:{type:"string",isOptional:!0},subscreen:{type:"string",isOptional:!0}},namespace:"settingsui"},settingsInteractionWithType:{name:"settings interaction",class:"interaction",properties:{action:"string",type:"string",hasWriteScope:{type:"boolean",isOptional:!0},modal:{type:"string",isOptional:!0},screen:{type:"string",isOptional:!0},subscreen:{type:"string",isOptional:!0}},namespace:"settingsui"},settingsInteractionWithSuccess:{name:"settings interaction",class:"interaction",properties:{action:"string",type:{type:"boolean"},screen:{type:"string",isOptional:!0},subscreen:{type:"string",isOptional:!0}},namespace:"settingsui"},saveBoardCardCustomizationSettings:{name:"Save Board Card Customization Settings",class:"usage",properties:{screen:{type:"string",isOptional:!0},subscreen:{type:"string",isOptional:!0},location:"string",objectTypeId:"string",properties:"array",propertiesCount:"number"},namespace:"settingsui"},"settings-email-plugin-check-retry-clicked":{name:"settings-email-plugin-check-retry-clicked",class:"interaction",properties:{screen:{type:"string",isOptional:!0},subscreen:{type:"string",isOptional:!0}},namespace:"settingsui"},"settings-enable-company-autocreate":{name:"settings-enable-company-autocreate",class:"usage",properties:{backfillRequired:"boolean",screen:{type:"string",isOptional:!0},subscreen:{type:"string",isOptional:!0}},namespace:"settingsui"},"settings-import-export-clicked-import-button":{name:"settings-import-export-clicked-import-button",class:"interaction",properties:{screen:{type:"string",isOptional:!0},subscreen:{type:"string",isOptional:!0}},namespace:"settingsui"},"settings-start-company-autocreate-backfill":{name:"settings-start-company-autocreate-backfill",class:"interaction",properties:{screen:{type:"string",isOptional:!0},subscreen:{type:"string",isOptional:!0}},namespace:"settingsui"},"view-settings-activitytypes":{name:"view-settings-activitytypes",class:"view",properties:{screen:{type:"string",isOptional:!0},subscreen:{type:"string",isOptional:!0}},namespace:"settingsui"},"view-settings-bcc":{name:"view-settings-bcc",class:"view",properties:{screen:{type:"string",isOptional:!0},subscreen:{type:"string",isOptional:!0}},namespace:"settingsui"},"view-settings-calling":{name:"view-settings-calling",class:"view",properties:{screen:{type:"string",isOptional:!0},subscreen:{type:"string",isOptional:!0}},namespace:"settingsui"},"view-settings-companies":{name:"view-settings-companies",class:"view",properties:{screen:{type:"string",isOptional:!0},subscreen:{type:"string",isOptional:!0},deprecated:{type:"boolean",isOptional:!0}},namespace:"settingsui"},"view-settings-config":{name:"view-settings-config",class:"view",properties:{screen:{type:"string",isOptional:!0},subscreen:{type:"string",isOptional:!0}},namespace:"settingsui"},"view-settings-contacts":{name:"view-settings-contacts",class:"view",properties:{screen:{type:"string",isOptional:!0},subscreen:{type:"string",isOptional:!0},deprecated:{type:"boolean",isOptional:!0}},namespace:"settingsui"},"view-settings-deals":{name:"view-settings-deals",class:"view",properties:{screen:{type:"string",isOptional:!0},subscreen:{type:"string",isOptional:!0},deprecated:{type:"boolean",isOptional:!0}},namespace:"settingsui"},"view-settings-email":{name:"view-settings-email",class:"view",properties:{screen:{type:"string",isOptional:!0},subscreen:{type:"string",isOptional:!0}},namespace:"settingsui"},"view-settings-importexport":{name:"view-settings-importexport",class:"view",properties:{screen:{type:"string",isOptional:!0},subscreen:{type:"string",isOptional:!0}},namespace:"settingsui"},"view-settings-notifications":{name:"view-settings-notifications",class:"view",properties:{screen:{type:"string",isOptional:!0},subscreen:{type:"string",isOptional:!0}},namespace:"settingsui"},"view-settings-privacy":{name:"view-settings-privacy",class:"view",properties:{screen:{type:"string",isOptional:!0},subscreen:{type:"string",isOptional:!0}},namespace:"settingsui"},"view-settings-supportForm":{name:"view-settings-supportForm",class:"view",properties:{screen:{type:"string",isOptional:!0},subscreen:{type:"string",isOptional:!0}},namespace:"settingsui"},"view-settings-salestools":{name:"view-settings-salestools",class:"view",properties:{screen:{type:"string",isOptional:!0},subscreen:{type:"string",isOptional:!0}},namespace:"settingsui"},"view-settings-tasks":{name:"view-settings-tasks",class:"view",properties:{screen:{type:"string",isOptional:!0},subscreen:{type:"string",isOptional:!0}},namespace:"settingsui"},"view-settings-tickets":{name:"view-settings-tickets",class:"view",properties:{screen:{type:"string",isOptional:!0},subscreen:{type:"string",isOptional:!0},deprecated:{type:"boolean",isOptional:!0}},namespace:"settingsui"},"deal-pipeline-saved":{name:"Deal Pipeline Saved",class:"usage",properties:{screen:{type:"string",isOptional:!0},subscreen:{type:"string",isOptional:!0}},namespace:"settingsui"},"deal-pipeline-created":{name:"Deal Pipeline Created",class:"usage",properties:{screen:{type:"string",isOptional:!0},subscreen:{type:"string",isOptional:!0},atPipelineLimit:{type:"boolean"},pipelineLimit:{type:"number"}},namespace:"settingsui"},"lifecycle-stage-automation-setting-changed":{name:"Lifecycle stage automation setting update",class:"usage",properties:{action:{type:"string"},enabled:{type:"boolean"},stage:{type:"string",isOptional:!0},screen:{type:"string",isOptional:!0},subscreen:{type:"string",isOptional:!0}},namespace:"settingsui"},"lifecycle-stage-saved":{name:"Lifecycle Stage Saved",class:"usage",properties:{action:"string",count:{type:"number"},screen:{type:"string",isOptional:!0},subscreen:{type:"string",isOptional:!0}},namespace:"settingsui"},"ticket-pipeline-saved":{name:"Ticket Pipeline Saved",class:"usage",properties:{screen:{type:"string",isOptional:!0},subscreen:{type:"string",isOptional:!0}},namespace:"settingsui"},"ticket-pipeline-created":{name:"Ticket Pipeline Created",class:"usage",properties:{screen:{type:"string",isOptional:!0},subscreen:{type:"string",isOptional:!0},atPipelineLimit:{type:"boolean"},pipelineLimit:{type:"number"}},namespace:"settingsui"},"deal-stage-created":{name:"Deal Stage Created",class:"usage",properties:{screen:{type:"string",isOptional:!0},subscreen:{type:"string",isOptional:!0}},namespace:"settingsui"},"ticket-stage-created":{name:"Ticket Stage Created",class:"usage",properties:{screen:{type:"string",isOptional:!0},subscreen:{type:"string",isOptional:!0}},namespace:"settingsui"},"settings-usage":{name:"Settings Usage",class:"usage",properties:{screen:{type:"string",isOptional:!0},subscreen:{type:"string",isOptional:!0},action:"string",subAction:{type:"string",isOptional:!0},enabled:{type:"boolean",isOptional:!0},value:{type:"string",isOptional:!0}},namespace:"settingsui"},"settings-navigation":{name:"Settings Navigation",class:"interaction",properties:{screen:{type:"string",isOptional:!0},subscreen:{type:"string",isOptional:!0}},namespace:"settingsui"},"contact-settings-pageview":{name:"Contact Settings Pageview",class:"view",properties:{screen:{type:"string",isOptional:!0},subscreen:{type:"string",isOptional:!0}},namespace:"settingsui"},"company-settings-pageview":{name:"Company Settings Pageview",class:"view",properties:{screen:{type:"string",isOptional:!0},subscreen:{type:"string",isOptional:!0}},namespace:"settingsui"},"deal-settings-pageview":{name:"Deal Settings Pageview",class:"view",properties:{screen:{type:"string",isOptional:!0},subscreen:{type:"string",isOptional:!0}},namespace:"settingsui"},"ticket-settings-pageview":{name:"Ticket Settings Pageview",class:"view",properties:{screen:{type:"string",isOptional:!0},subscreen:{type:"string",isOptional:!0}},namespace:"settingsui"},"import-export-pageview":{name:"Import Export Pageview",class:"view",properties:{screen:{type:"string",isOptional:!0},subscreen:{type:"string",isOptional:!0}},namespace:"settingsui"}}},function(e,t){e.exports={createTaskFromUI:{name:"Create Task From UI",class:"interaction",properties:{datePreset:{type:["today","tomorrow","oneBusinessDay","twoBusinessDays","threeBusinessDays","oneWeek","twoWeeks","oneMonth","threeMonths","sixMonths","CUSTOM"],isOptional:!0},reminderPreset:{type:["sameTime","halfHourBefore","hourBefore","dayBefore","weekBefore","CUSTOM"],isOptional:!0},screen:{type:"string",isOptional:!0},source:{type:["CONTACT","COMPANY","DEAL","TICKET","CUSTOM"],isOptional:!0}},namespace:"tasks"},taskQueueBarInteraction:{name:"Task Queue Bar Interaction",class:"interaction",properties:{action:{type:["backToTasks","completed","rescheduled","skipped","skipToRemainingTask","viewRemainingTasks"],isOptional:!1},category:{type:"string",isOptional:!0},screen:{type:"string",isOptional:!0},source:{type:"string",isOptional:!0},type:{type:["private","shared","view"],isOptional:!0}},namespace:"tasks"},unassociatedTaskModalInteraction:{name:"Unassociated Task Modal Interaction",class:"interaction",properties:{screen:"string",action:{type:["viewed","associationsAdded","dismissed","markedCompleted","skipped"]},associationCount:{type:"number",isOptional:!0},category:{type:"string",isOptional:!0},"wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}},namespace:"tasks"}}},function(e,t){e.exports={clickToViewConversation:{properties:{action:["click to view conversation"],channel:["LIVE_CHAT (1000)","FB_MESSENGER (1001)","EMAIL (1002)","WHATS_APP (1007)"],platform:{type:"string"}},namespace:"Conversations",name:"Thread Interaction",class:"interaction"},viewFullConversation:{properties:{action:["view full conversation","view full conversation within 24hr","view full conversation after 24hr"],channel:["LIVE_CHAT (1000)","FB_MESSENGER (1001)","EMAIL (1002)","WHATS_APP (1007)"],platform:{type:"string"}},namespace:"Conversations",name:"Thread Interaction",class:"interaction"},collapseConversation:{properties:{action:["collapse conversation"],channel:["LIVE_CHAT (1000)","FB_MESSENGER (1001)","EMAIL (1002)","WHATS_APP (1007)"],platform:{type:"string"}},namespace:"Conversations",name:"Thread Interaction",class:"interaction"},viewConversationInInbox:{properties:{action:["view conversation in inbox"],channel:["LIVE_CHAT (1000)","FB_MESSENGER (1001)","EMAIL (1002)","WHATS_APP (1007)"],platform:{type:"string"}},namespace:"Conversations",name:"Thread Interaction",class:"interaction"},indexInteractions:{name:"index interactions",class:"interaction",properties:{action:{type:"string"},subAction:{type:"string",isOptional:!0},type:{type:"string",isOptional:!0},property:{type:"string",isOptional:!0},objectTypeId:{type:"string",isOptional:!0},objectId:{type:"string",isOptional:!0},objectTypeName:{type:"string",isOptional:!0},isInactive:{type:"boolean",isOptional:!0},hasDealPriority:{type:"boolean",isOptional:!0},dealPriority:{type:"string",isOptional:!0},numberOfPinnedViews:{type:"number",isOptional:!0},"wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}},namespace:"crm"},filterUsage:{name:"filter usage",class:"usage",properties:{action:{type:"string",isOptional:!0},subscreen2:{type:"string",isOptional:!0},"wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}},namespace:"crm"},filterInteractions:{name:"filter interactions",class:"interaction",properties:{action:{type:"string",isOptional:!0},component:{type:"string",isOptional:!0},property:{type:"string",isOptional:!0},subAction:{type:"string",isOptional:!0},type:{type:"string",isOptional:!0},condition:{type:"string",isOptional:!0},filterFamily:{type:"string",isOptional:!0},panelKey:{type:"string",isOptional:!0},maxCount:{type:"number",isOptional:!0},"wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}},namespace:"crm"},useLocalSearch:{name:"use local search",class:"interaction",properties:{type:{type:"string"},"wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}},namespace:"crm"},createSavedView:{name:"create saved view",class:"usage",properties:{action:"string",fromClone:{type:"boolean",isOptional:!0},"wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}},namespace:"crm"},createSavedForecastView:{name:"create saved Forecast view",class:"usage",properties:{action:"string",fromClone:{type:"boolean",isOptional:!0},"wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}},namespace:"crm"},openForecastSubmissionPanel:{name:"openForecastSubmissionPanel",class:"usage",properties:{action:"string","wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}},namespace:"crm"},openForecastView:{name:"openForecastView",class:"usage",properties:{action:"string","wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}},namespace:"crm"},editSavedView:{name:"edit saved view",class:"usage",properties:{action:"string",modified:{type:"boolean",isOptional:!0},"wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}},namespace:"crm"},openSavedView:{name:"open saved view",class:"interaction",properties:{action:"string","wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}},namespace:"crm"},exportSavedView:{name:"export view",class:"usage",properties:{exportedPropertiesNum:{type:"number"},exportType:{type:["selected columns","all columns","COLUMNS_ON_VIEW","ALL_PROPERTIES_WITHOUT_ASSOCIATIONS","ALL_PROPERTIES_WITH_ASSOCIATIONS"]},"wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}},namespace:"crm"},movedBoardColumnItem:{name:"moved board column item",class:"usage",properties:{type:{type:"string"},objectTypeId:{type:"string"},stageType:{type:"string",isOptional:!0},stageName:{type:"string"},"wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}},namespace:"crm"},editColumns:{name:"edit columns",class:"usage",properties:{action:{type:"string",isOptional:!0},value:{type:"string",isOptional:!0},subscreen2:{type:"string"},objectTypeId:{type:"string"},objectTypeName:{type:"string"},"wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}},namespace:"crm"},bulkAssign:{name:"bulk assign",class:"usage",namespace:"crm",properties:{"wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}}},bulkEditRecords:{name:"bulk edit records",class:"usage",properties:{subscreen2:{type:"string"},totalCount:{type:"string"},editedProperties:{type:"string"},"wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}},namespace:"crm"},bulkDelete:{name:"bulk delete",class:"usage",properties:{subscreen2:{type:"string"},"wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}},namespace:"crm"},indexPageview:{name:"index pageview",class:"view",properties:{viewType:{type:"string"},objectTypeId:{type:"string"},objectTypeName:{type:"string"},screen:{type:"string"},subscreen:{type:"string"},numberOfPinnedViews:{type:"number",isOptional:!0},pinnedViewsLimit:{type:"number",isOptional:!0},"wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}},namespace:"crm"},saveBulkCommunicationSubscription:{name:"save bulk communication subscription",class:"usage",properties:{step:{type:["MODAL_OPEN","FINISH_SUCCESS","FINISH_FAILURE"],isOptional:!0},channel:{type:["EMAIL","WHATSAPP","SMS"],isOptional:!0},type:{type:"string",isOptional:!0},legalBasis:{type:["LEGITIMATE_INTEREST_PQL","LEGITIMATE_INTEREST_CLIENT","PERFORMANCE_OF_CONTRACT","CONSENT_WITH_NOTICE","NON_GDPR","PROCESS_AND_STORE","LEGITIMATE_INTEREST_OTHER"],isOptional:!0},removeFromAllEmail:{type:"boolean",isOptional:!0},count:{type:"number",isOptional:!0},"wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}},namespace:"crm"},marketingEventsOptInModal:{name:"marketing events opt in modal",class:"interaction",properties:{action:{type:["object added","object rejected"]},"wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}},namespace:"crm"},transcriptQuickfilter:{name:"transcriptQuickfilter",class:"interaction",properties:{action:"string",componentOrigin:"string","wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}},namespace:"crm"},inlineEditing:{name:"inline editing",class:"interaction",properties:{action:{type:["save","cancel","shown unsaved changes modal","navigated away with unsaved changes","canceled unsaved changes modal","confirmed unsaved changes modal"]},objectTypeId:{type:"string"},numberOfProperties:{type:"number",isOptional:!0},totalRecords:{type:"number",isOptional:!0},"wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}},namespace:"crm"},"scheduling-interaction":{name:"Scheduling interaction",class:"interaction",properties:{action:["clicked-insert-proposed-times","clicked-insert-scheduling-link","inserted-scheduling-link"]},namespace:"meetings"},"use-android-app-installprompt":{name:"use-android-app-installprompt",class:"interaction",properties:{what_event_subtype:"string","wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}},namespace:"crm"},"use-bulk-add-to-list":{name:"use-bulk-add-to-list",class:"usage",namespace:"crm",properties:{"wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}}},"use-bulk-create-tasks":{name:"use-bulk-create-tasks",class:"usage",properties:{what_event_subtype:"string","wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}},namespace:"crm"},"use-bulk-enroll-in-sequence":{name:"use-bulk-enroll-in-sequence",class:"usage",namespace:"crm",properties:{"wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}}},"use-bulk-enroll-in-workflow":{name:"use-bulk-enroll-in-workflow",class:"usage",namespace:"crm",properties:{"wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}}},"use-bulk-remove-from-list":{name:"use-bulk-remove-from-list",class:"usage",namespace:"crm",properties:{"wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}}},"use-linked-sales-object-iframe":{name:"use-linked-sales-object-iframe",class:"usage",properties:{applicationName:"string","wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}},namespace:"crm"},"use-sequence-timeline-edit":{name:"use-sequence-timeline-edit",class:"usage",namespace:"crm",properties:{"wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}}},"use-sfdc-card-clicked-force-sync":{name:"use-sfdc-card-clicked-force-sync",class:"usage",namespace:"crm",properties:{"wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}}},"inserted-content-from-popover":{name:"inserted-content-from-popover",class:"interaction",properties:{sawPopover:{type:"boolean",isOptional:!0}},namespace:"crm"},"inserted-snippet":{name:"inserted-snippet",class:"interaction",properties:{"wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}},namespace:"crm"},"settings-interaction":{name:"settings-interaction",class:"interaction",properties:{action:"string",app:{type:"string",isOptional:!0},actionType:{type:["CONTACT","COMPANY","DEAL","TASK","TICKET"],isOptional:!0},subAction:{type:"string",isOptional:!0},clientType:{type:"string",isOptional:!0},quotasChanged:{type:"number",isOptional:!0},screen:{type:"string",isOptional:!0},subscreen:{type:"string",isOptional:!0}},namespace:"settingsui"},settingsInteractionWithType:{name:"settings interaction",class:"interaction",properties:{action:"string",type:"string",hasWriteScope:{type:"boolean",isOptional:!0},modal:{type:"string",isOptional:!0},screen:{type:"string",isOptional:!0},subscreen:{type:"string",isOptional:!0}},namespace:"settingsui"},settingsInteractionWithSuccess:{name:"settings interaction",class:"interaction",properties:{action:"string",type:{type:"boolean"},screen:{type:"string",isOptional:!0},subscreen:{type:"string",isOptional:!0}},namespace:"settingsui"},saveBoardCardCustomizationSettings:{name:"Save Board Card Customization Settings",class:"usage",properties:{screen:{type:"string",isOptional:!0},subscreen:{type:"string",isOptional:!0},location:"string",objectTypeId:"string",properties:"array",propertiesCount:"number"},namespace:"settingsui"},"settings-email-plugin-check-retry-clicked":{name:"settings-email-plugin-check-retry-clicked",class:"interaction",properties:{screen:{type:"string",isOptional:!0},subscreen:{type:"string",isOptional:!0}},namespace:"settingsui"},"settings-enable-company-autocreate":{name:"settings-enable-company-autocreate",class:"usage",properties:{backfillRequired:"boolean",screen:{type:"string",isOptional:!0},subscreen:{type:"string",isOptional:!0}},namespace:"settingsui"},"settings-import-export-clicked-import-button":{name:"settings-import-export-clicked-import-button",class:"interaction",properties:{screen:{type:"string",isOptional:!0},subscreen:{type:"string",isOptional:!0}},namespace:"settingsui"},"settings-start-company-autocreate-backfill":{name:"settings-start-company-autocreate-backfill",class:"interaction",properties:{screen:{type:"string",isOptional:!0},subscreen:{type:"string",isOptional:!0}},namespace:"settingsui"},"view-settings-activitytypes":{name:"view-settings-activitytypes",class:"view",properties:{screen:{type:"string",isOptional:!0},subscreen:{type:"string",isOptional:!0}},namespace:"settingsui"},"view-settings-bcc":{name:"view-settings-bcc",class:"view",properties:{screen:{type:"string",isOptional:!0},subscreen:{type:"string",isOptional:!0}},namespace:"settingsui"},"view-settings-calling":{name:"view-settings-calling",class:"view",properties:{screen:{type:"string",isOptional:!0},subscreen:{type:"string",isOptional:!0}},namespace:"settingsui"},"view-settings-companies":{name:"view-settings-companies",class:"view",properties:{screen:{type:"string",isOptional:!0},subscreen:{type:"string",isOptional:!0},deprecated:{type:"boolean",isOptional:!0}},namespace:"settingsui"},"view-settings-config":{name:"view-settings-config",class:"view",properties:{screen:{type:"string",isOptional:!0},subscreen:{type:"string",isOptional:!0}},namespace:"settingsui"},"view-settings-contacts":{name:"view-settings-contacts",class:"view",properties:{screen:{type:"string",isOptional:!0},subscreen:{type:"string",isOptional:!0},deprecated:{type:"boolean",isOptional:!0}},namespace:"settingsui"},"view-settings-deals":{name:"view-settings-deals",class:"view",properties:{screen:{type:"string",isOptional:!0},subscreen:{type:"string",isOptional:!0},deprecated:{type:"boolean",isOptional:!0}},namespace:"settingsui"},"view-settings-email":{name:"view-settings-email",class:"view",properties:{screen:{type:"string",isOptional:!0},subscreen:{type:"string",isOptional:!0}},namespace:"settingsui"},"view-settings-importexport":{name:"view-settings-importexport",class:"view",properties:{screen:{type:"string",isOptional:!0},subscreen:{type:"string",isOptional:!0}},namespace:"settingsui"},"view-settings-notifications":{name:"view-settings-notifications",class:"view",properties:{screen:{type:"string",isOptional:!0},subscreen:{type:"string",isOptional:!0}},namespace:"settingsui"},"view-settings-privacy":{name:"view-settings-privacy",class:"view",properties:{screen:{type:"string",isOptional:!0},subscreen:{type:"string",isOptional:!0}},namespace:"settingsui"},"view-settings-supportForm":{name:"view-settings-supportForm",class:"view",properties:{screen:{type:"string",isOptional:!0},subscreen:{type:"string",isOptional:!0}},namespace:"settingsui"},"view-settings-salestools":{name:"view-settings-salestools",class:"view",properties:{screen:{type:"string",isOptional:!0},subscreen:{type:"string",isOptional:!0}},namespace:"settingsui"},"view-settings-tasks":{name:"view-settings-tasks",class:"view",properties:{screen:{type:"string",isOptional:!0},subscreen:{type:"string",isOptional:!0}},namespace:"settingsui"},"view-settings-tickets":{name:"view-settings-tickets",class:"view",properties:{screen:{type:"string",isOptional:!0},subscreen:{type:"string",isOptional:!0},deprecated:{type:"boolean",isOptional:!0}},namespace:"settingsui"},"deal-pipeline-saved":{name:"Deal Pipeline Saved",class:"usage",properties:{screen:{type:"string",isOptional:!0},subscreen:{type:"string",isOptional:!0}},namespace:"settingsui"},"deal-pipeline-created":{name:"Deal Pipeline Created",class:"usage",properties:{screen:{type:"string",isOptional:!0},subscreen:{type:"string",isOptional:!0},atPipelineLimit:{type:"boolean"},pipelineLimit:{type:"number"}},namespace:"settingsui"},"lifecycle-stage-automation-setting-changed":{name:"Lifecycle stage automation setting update",class:"usage",properties:{action:{type:"string"},enabled:{type:"boolean"},stage:{type:"string",isOptional:!0},screen:{type:"string",isOptional:!0},subscreen:{type:"string",isOptional:!0}},namespace:"settingsui"},"lifecycle-stage-saved":{name:"Lifecycle Stage Saved",class:"usage",properties:{action:"string",count:{type:"number"},screen:{type:"string",isOptional:!0},subscreen:{type:"string",isOptional:!0}},namespace:"settingsui"},"ticket-pipeline-saved":{name:"Ticket Pipeline Saved",class:"usage",properties:{screen:{type:"string",isOptional:!0},subscreen:{type:"string",isOptional:!0}},namespace:"settingsui"},"ticket-pipeline-created":{name:"Ticket Pipeline Created",class:"usage",properties:{screen:{type:"string",isOptional:!0},subscreen:{type:"string",isOptional:!0},atPipelineLimit:{type:"boolean"},pipelineLimit:{type:"number"}},namespace:"settingsui"},"deal-stage-created":{name:"Deal Stage Created",class:"usage",properties:{screen:{type:"string",isOptional:!0},subscreen:{type:"string",isOptional:!0}},namespace:"settingsui"},"ticket-stage-created":{name:"Ticket Stage Created",class:"usage",properties:{screen:{type:"string",isOptional:!0},subscreen:{type:"string",isOptional:!0}},namespace:"settingsui"},"settings-usage":{name:"Settings Usage",class:"usage",properties:{screen:{type:"string",isOptional:!0},subscreen:{type:"string",isOptional:!0},action:"string",subAction:{type:"string",isOptional:!0},enabled:{type:"boolean",isOptional:!0},value:{type:"string",isOptional:!0}},namespace:"settingsui"},"settings-navigation":{name:"Settings Navigation",class:"interaction",properties:{screen:{type:"string",isOptional:!0},subscreen:{type:"string",isOptional:!0}},namespace:"settingsui"},"contact-settings-pageview":{name:"Contact Settings Pageview",class:"view",properties:{screen:{type:"string",isOptional:!0},subscreen:{type:"string",isOptional:!0}},namespace:"settingsui"},"company-settings-pageview":{name:"Company Settings Pageview",class:"view",properties:{screen:{type:"string",isOptional:!0},subscreen:{type:"string",isOptional:!0}},namespace:"settingsui"},"deal-settings-pageview":{name:"Deal Settings Pageview",class:"view",properties:{screen:{type:"string",isOptional:!0},subscreen:{type:"string",isOptional:!0}},namespace:"settingsui"},"ticket-settings-pageview":{name:"Ticket Settings Pageview",class:"view",properties:{screen:{type:"string",isOptional:!0},subscreen:{type:"string",isOptional:!0}},namespace:"settingsui"},"import-export-pageview":{name:"Import Export Pageview",class:"view",properties:{screen:{type:"string",isOptional:!0},subscreen:{type:"string",isOptional:!0}},namespace:"settingsui"},"view-listcreate":{name:"view-listcreate",class:"view",properties:{action:"string",screen:"string",subscreen:{isOptional:!0,type:"string"},"wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}},namespace:"lists"},"view-listdetail":{name:"view-listdetail",class:"view",properties:{action:"string",screen:"string",subscreen:{isOptional:!0,type:"string"},"wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}},namespace:"lists"},"view-listsindex":{name:"view-listsindex",class:"view",properties:{action:"string",screen:"string",subscreen:{isOptional:!0,type:"string"},"wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}},namespace:"lists"},createReport:{name:"create report",class:"usage",properties:{objectTypeId:"string",screen:["list-detail"],"wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}},namespace:"lists"},editListColumns:{name:"edit columns",class:"usage",properties:{objectTypeId:"string",screen:["list-detail"],"wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}},namespace:"lists"},createList:{name:"create list",class:"usage",properties:{objectTypeId:"string",classicListId:{isOptional:!0,type:"number"},ilsListId:{isOptional:!0,type:"number"},fromClone:{isOptional:!0,type:"boolean"},listType:["static","dynamic"],screen:["list-detail","list-index","unused-lists"],"wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}},namespace:"lists"},deleteList:{name:"delete list",class:"usage",properties:{objectTypeId:"string",isBulk:{isOptional:!0,type:"boolean"},partialSuccess:{isOptional:!0,type:"boolean"},screen:["list-detail","list-index","unused-lists"],subscreen:{isOptional:!0,type:"string"},"wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}},namespace:"lists"},exportList:{name:"export list",class:"usage",properties:{objectTypeId:"string",screen:["list-detail","list-index","unused-lists"],"wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}},namespace:"lists"},updateList:{name:"update list",class:"usage",properties:{objectTypeId:"string",classicListId:{isOptional:!0,type:"number"},ilsListId:{isOptional:!0,type:"number"},listType:["static","dynamic"],screen:["list-detail","list-index","unused-lists"],"wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}},namespace:"lists"},createFolder:{name:"create folder",class:"usage",properties:{screen:["list-index"],subscreen:"string","wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}},namespace:"lists"},deleteFolder:{name:"delete folder",class:"usage",properties:{screen:["list-index"],subscreen:"string","wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}},namespace:"lists"},moveToFolder:{name:"move to folder",class:"usage",properties:{isBulk:{isOptional:!0,type:"boolean"},screen:["list-detail","list-index"],"wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}},namespace:"lists"},listsPageview:{name:"pageview",class:"view",properties:{screen:["list-detail","list-index","unused-lists","recently-deleted","empty-list","settings","activity"],subscreen:{type:"string",isOptional:!0},"wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}},namespace:"lists"},listsInteraction:{name:"lists interaction",class:"interaction",properties:{ilsListId:{isOptional:!0,type:"number"},objectTypeId:{type:"string",isOptional:!0},listType:{isOptional:!0,type:["static","dynamic"]},action:"string",screen:{isOptional:!0,type:["list-detail","list-index","unused-lists","manage-registration","recently-deleted","empty-list","settings","activity"]},subAction:{type:"string",isOptional:!0},type:{type:"string",isOptional:!0},condition:{type:"string",isOptional:!0},filterFamily:{type:"string",isOptional:!0},panelKey:{type:"string",isOptional:!0},maxCount:{type:"number",isOptional:!0},targetListType:{type:"string",isOptional:!0},listId:{type:"string",isOptional:!0},notificationTypes:{isOptional:!0,type:"array"},listsExcluded:{isOptional:!0,type:"number"},recordsExcluded:{isOptional:!0,type:"number"},AIGeneratedListFilters:{isOptional:!0,type:"string"},"wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}},namespace:"lists"},addContactsToRestrictedList:{name:"lists interaction",class:"interaction",properties:{objectTypeId:"string",action:"string",count:"number","wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}},namespace:"lists"},bulkAddToList:{name:"bulk add to list",class:"usage",properties:{objectTypeId:"string",screen:"string",subscreen:["index"],subscreen2:["bulk-list-modal"],"wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}},namespace:"lists"},"view-indexinteraction":{name:"index-interaction",class:"view",properties:{action:"string",screen:"string",subscreen:{isOptional:!0,type:"string"},"wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}},namespace:"crm"},"view-recordinteraction":{name:"record-interaction",class:"view",properties:{action:"string",screen:"string",subscreen:{isOptional:!0,type:"string"},"wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}},namespace:"crm"},individualEmailThreadInteraction:{name:"record interactions",class:"interaction",properties:{action:"string","wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}},namespace:"crm"},"bizops-interaction":{name:"bizops-interaction",class:"interaction",properties:{action:"string","wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}},namespace:"crm"},"internal-crm-tracking":{name:"internal-crm-tracking",class:"interaction",properties:{cachedVersion:"string",asset:"string","wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}},namespace:"crm"},createRecord:{name:"create record",class:"usage",properties:{type:"string",objectTypeId:{type:"string",isOptional:!0},"wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}},namespace:"crm"},createRecordActivation:{name:"create first record",class:"activation",properties:{type:["contact","company","deal","ticket"],"wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}},namespace:"crm"},createEngagementActivation:{name:"create first engagement",class:"activation",properties:{type:["email","task","call","meeting","note","linkedin_message","postal_mail","sms","whats_app"],"wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}},namespace:"crm"},crmActivation:{name:"crm activation",class:"activation",properties:{type:"string","wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}},namespace:"crm"},"crm-onboarding":{name:"crm-onboarding",class:"interaction",properties:{action:{type:"string",isOptional:!0},type:{type:"string",isOptional:!0},subAction:{type:"string",isOptional:!0},link:{type:"string",isOptional:!0},text:{type:"string",isOptional:!0},experiment:{type:"string",isOptional:!0},step:{type:"string",isOptional:!0},"wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}},namespace:"crm"},"crm-debug":{name:"crm-debug",class:"interaction",properties:{action:"string",consumer:"string","wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}},namespace:"crm"},debugChunkLoadIssues:{name:"crm-debug",class:"interaction",properties:{chunk:"string",error:"string","wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}},namespace:"crm"},"crm-api-error":{name:"crm-api-error",class:"interaction",properties:{action:"string",taskId:"number","wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}},namespace:"crm"},crmErrorBoundary:{name:"crm error boundary",class:"interaction",properties:{action:{type:"string",isOptional:!1},type:{type:"string",isOptional:!1},"wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}},namespace:"crm"},exportView:{name:"index interaction",class:"usage",properties:{action:"string",exportedPropertiesNum:"number",exportType:"string",exportPageType:{type:["allViews","table","board"]},"wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}},namespace:"crm"},emailCommunicatorInteraction:{name:"record interaction",class:"interaction",properties:{action:"string",subAction:"string",legalBasis:{type:"string",isOptional:!0},"wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}},namespace:"crm"},"index-interaction":{name:"index-interaction",class:"interaction",properties:{action:"string",subAction:{type:"string",isOptional:!0},type:{type:"string",isOptional:!0},count:{type:"number",isOptional:!0},"wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}},namespace:"crm"},indexUsage:{name:"index interaction",class:"usage",properties:{action:"string",subAction:{type:"string",isOptional:!0},objectTypeId:{type:"string",isOptional:!0},inactiveCardsIsTurnedOn:{type:"boolean",isOptional:!0},inactiveCardsUnit:{type:["days","weeks"],isOptional:!0},inactiveCardsValue:{type:"number",isOptional:!0},cozyCardsStyle:{type:["COZY","COMFORTABLE"],isOptional:!0},cozyCardsBottomPanel:{type:["WITH_PANEL","WITHOUT_PANEL"],isOptional:!0},type:{type:["CONTACT","COMPANY","DEAL","TICKET","TASK","VISIT"],isOptional:!0},"wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}},namespace:"crm"},indexPageActivation:{name:"first view crm index",class:"activation",namespace:"crm",properties:{"wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}}},savedFilterActivation:{name:"load first saved filter",class:"activation",properties:{type:{type:["contact","company","deal","ticket","visit"],isOptional:!0},"wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}},namespace:"crm"},useFilters:{name:"index interaction",class:"usage",properties:{action:"string",subAction:"string",type:["contacts","companies","deals","tickets","visits"],property:{type:"string",isOptional:!0},filter:{type:"string",isOptional:!0},isFirstTime:{type:"boolean",isOptional:!0},"wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}},namespace:"crm"},"record-interaction":{name:"record-interaction",class:"interaction",properties:{action:"string",subAction:{type:"string",isOptional:!0},type:{type:"string",isOptional:!0},label:{type:"string",isOptional:!0},count:{type:"number",isOptional:!0},step:{type:"string",isOptional:!0},isRecommended:{type:"boolean",isOptional:!0},"wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}},namespace:"crm"},recordUsage:{name:"record interaction",class:"usage",properties:{action:"string",subAction:{type:"string",isOptional:!0},location:{type:"string",isOptional:!0},type:{type:"string",isOptional:!0},what_value:{type:"number",isOptional:!0},property_name:{type:"string",isOptional:!0},property:{type:"string",isOptional:!0},"wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}},namespace:"crm"},playbookInteraction:{namespace:"playbooks-admin-ui",name:"playbook interaction",class:"interaction",properties:{playbookId:"number",playbookType:"string",action:"string",engagementType:{type:"string",isOptional:!0},activityType:{type:"string",isOptional:!0},callDisposition:{type:"string",isOptional:!0},what_value_str:{type:"string",isOptional:!0},"wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}}},openIntegrationIframeInTimeline:{name:"record-interaction",class:"interaction",properties:{applicationName:{type:"string"},"wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}},namespace:"crm"},timelineCardInteraction:{name:"record interaction",class:"interaction",properties:{action:"string",subAction:"string",eventType:"string",type:"string","wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}},namespace:"crm"},timelineCommentsUsage:{name:"timeline usage",class:"usage",properties:{action:"string",activity:["logged-email","note","logged-activity","call","logged-call","schedule","logged-meeting","task","meeting","linkedin_message","logged-linked-in-message","postal_mail","logged-postal-mail","sms","logged-sms","whats-app","logged-whats-app"],alreadyCreatedComments:{type:"number",isOptional:!0},"wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}},namespace:"crm"},timelineUsage:{name:"timeline usage",class:"usage",properties:{action:"string",activity:["conversation_session","email","logged-email","note","logged-activity","call","logged-call","schedule","logged-meeting","task","sequence","meeting","linkedin_message","logged-linked-in-message","postal_mail","logged-postal-mail","sms","logged-sms","whats-app","logged-whats-app"],"wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}},namespace:"crm"},timelineInteraction:{name:"timeline interactions",class:"interaction",properties:{action:"string",eventType:{isOptional:!0,type:"string"},type:"string","wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}},namespace:"crm"},timelineEmailThreadInteraction:{name:"timeline interactions",class:"interaction",properties:{action:"string",engagementId:"number",threadId:"string","wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}},namespace:"crm"},timelineExpandCollapseInteraction:{name:"timeline interactions",class:"interaction",properties:{action:"string",subjectId:"string",type:"string","wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}},namespace:"crm"},productExperimentExposure:{name:"product experiment exposure",class:"interaction",properties:{experimentName:"string",experimentParams:"string",version:"string","wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}},namespace:"crm"},sidebarInteraction:{name:"record interaction",class:"interaction",properties:{action:"string",subAction:"string","wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}},namespace:"crm"},previewSidebarObject:{name:"sidebar interaction",class:"interaction",properties:{action:"string",objectTypeId:"string",objectId:"string","wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}},namespace:"crm"},ticketsActivation:{name:"tickets activation",class:"activation",namespace:"crm",properties:{"wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}}},ticketsDayZero:{name:"tickets day zero",class:"activation",namespace:"crm",properties:{"wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}}},"virality-sent-email-with-brand-banner":{name:"virality",class:"interaction",properties:{action:"string",loop:"string","wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}},namespace:"crm"},"virality-removed-brand-banner":{name:"virality",class:"interaction",properties:{action:"string",loop:"string","wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}},namespace:"crm"},"use-bulk-double-opt-in":{name:"use-bulk-double-opt-in",class:"usage",namespace:"crm",properties:{"wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}}},createTask:{name:"create task",class:"interaction",properties:{action:{type:["task created"]},createMethod:{type:["manual","automatic"]},createSource:{type:"string",isOptional:!0},reminderType:{type:["absolute","relative"],isOptional:!0},relativeReminderOption:{type:"number",isOptional:!0},hasAssociations:{type:"boolean",isOptional:!0},priority:{type:["HIGH","NONE"],isOptional:!0},"wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}},namespace:"crm"},completedTask:{name:"complete task",class:"interaction",properties:{action:["mark as complete","bulk mark as complete"],version:{type:["control","tasks-usability-beta"],isOptional:!0},"wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}},namespace:"crm"},startTaskQueueActivation:{namespace:"tasks",name:"start first task queue",class:"activation",properties:{"wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}}},finishTaskQueueActivation:{namespace:"tasks",name:"finish first task queue",class:"activation",properties:{"wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}}},sentFirstCrmEmail:{name:"sent first crm email",class:"activation",namespace:"crm",properties:{"wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}}},selectedActionsRedesignOption:{name:"activity interaction",class:"interaction",properties:{action:["opened communicator from activity redesign"],subAction:["click from the timeline dropdown"],"wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}},namespace:"crm"},communicationSubscriptionCardInteraction:{name:"record interactions",class:"interaction",properties:{action:{type:["open current subscriptions","open add subscription","open subscription history","open updated subscription panel","subscription feedback","subscribe action","unsubscribe action","gdpr note click","open brand","open primary","open secondary","open default","view history"]},isHelpful:{type:"boolean",isOptional:!0},textFeedback:{type:"string",isOptional:!0},isGdprEnabled:{type:"boolean",isOptional:!0},isGdprEnforced:{type:"boolean",isOptional:!0},"wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}},namespace:"crm"},"saved-properties":{name:"saved-properties",class:"interaction",properties:{properties:{type:"string",isOptional:!0},type:{type:"string",isOptional:!0},action:{type:"string",isOptional:!0},objectType:{type:"string",isOptional:!0},location:{type:"string",isOptional:!0},"wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}},namespace:"crm"},associateSidebarInteraction:{name:"record interaction",class:"interaction",properties:{action:{type:["Associated objects from the associate panel","Associated objects from the associate panel with flexible associations flow","Created a new object from the associate panel"]},type:{type:"string"},"wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}},namespace:"crm"},timelineShowDetailsInteraction:{name:"timeline interactions",class:"interaction",properties:{action:"string",activity:["call","email","logged-call","logged-email","logged-meeting","meeting","note","sequence","task","linkedin_message","logged-linked-in-message","postal_mail","logged-postal-mail","sms","logged-sms","whats-app","logged-whats-app","integration"],"wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}},namespace:"crm"},timelineUsageDetailsInteraction:{name:"timeline usage",class:"usage",properties:{action:"string",activity:["call","email","logged-call","logged-email","logged-meeting","meeting","note","sequence","task","linkedin_message","logged-linked-in-message","postal_mail","logged-postal-mail","sms","logged-sms","whats-app","logged-whats-app","integration"],engagementId:{type:"string",isOptional:!0},"wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}},namespace:"crm"},timelineEngagementInteraction:{name:"timeline usage",class:"usage",properties:{action:"string",activity:["call","email","logged-call","logged-email","logged-meeting","meeting","note","sequence","task","linkedin_message","logged-linked-in-message","postal_mail","logged-postal-mail","sms","logged-sms","whats-app","logged-whats-app"],"wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}},namespace:"crm"},timelineEditEventInteraction:{name:"timeline usage",class:"usage",properties:{action:"string",activity:["email","note","call","task","sequence","meeting","logged-call","logged-email","logged-meeting","linkedin_message","logged-linked-in-message","postal_mail","logged-postal-mail","sms","logged-sms","whats-app","logged-whats-app"],"wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}},namespace:"crm"},pageRefresh:{name:"refresh",class:"interaction",properties:{objectType:{type:"string"},"wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}},namespace:"crm"},propertyEditorInteraction:{name:"record interactions",class:"interaction",properties:{action:{type:["open single property history sidebar","open email from contact property"]},property:{type:"string",isOptional:!0},"wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}},namespace:"crm"},aboutCardUsage:{name:"record usage",class:"usage",properties:{action:{type:["add property to about card","reorder about card","confirm record properties account default reset"]},property:{type:"string",isOptional:!0},"wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}},namespace:"crm"},recordHighlightInteraction:{name:"record interactions",class:"interaction",properties:{action:{type:["unbounce"]},"wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}},namespace:"crm"},recordHighlightUsage:{name:"record usage",class:"usage",properties:{action:{type:["edit record highlight","merge objects"]},objectType:{type:"string",isOptional:!0},"wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}},namespace:"crm"},recordPageView:{name:"Record Pageview",class:"view",properties:{type:"string",screen:"string",subscreen:{isOptional:!0,type:"string"},subjectId:{isOptional:!0,type:"string"},"wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}},namespace:"crm"},pageview:{name:"pageview",class:"view",namespace:"crm",properties:{"wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}}},savedProperties:{name:"saved properties",class:"usage",properties:{action:{type:["update primary in multiple emails","add new secondary in multiple emails","delete secondary in multiple emails","update secondary in multiple emails"]},property:{type:"string",isOptional:!0},"wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}},namespace:"crm"},communicatorFullScreenOpenInteractionV2:{name:"activity interaction",class:"interaction",properties:{action:["expand to full screen"],activity:["EMAIL","NOTE","LOGGED-CALL","LOGGED-EMAIL","LOGGED-LINKED-IN-MESSAGE","LOGGED-MEETING","LOGGED-POSTAL-MAIL","LOGGED-SMS","LOGGED-WHATS-APP","SCHEDULE"],"wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}},namespace:"crm"},timelineInteractions:{name:"timeline interactions",class:"interaction",properties:{action:"string","wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}},namespace:"crm"},timelineThreadInteractions:{name:"timeline interactions",class:"interaction",properties:{action:"string",threadId:"string",engagementId:"string","wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}},namespace:"crm"},recordInteractions:{name:"record interactions",class:"interaction",properties:{action:"string",objectType:{type:"string",isOptional:!0},type:{type:"string",isOptional:!0},subAction:{type:"string",isOptional:!0},toObjectTypeId:{type:"string",isOptional:!0},fromObjectTypeId:{type:"string",isOptional:!0},"wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}},namespace:"crm"},cardInteractions:{name:"card interactions",class:"interaction",properties:{action:"string",type:{type:"string",isOptional:!0},objectTypeId:{type:"string",isOptional:!0},subAction:{type:"string",isOptional:!0},toObjectTypeId:{type:"string",isOptional:!0},fromObjectTypeId:{type:"string",isOptional:!0},card:{type:"string",isOptional:!0},"wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}},namespace:"crm"},engagementUsage:{name:"create engagement",class:"usage",properties:{activity:"string","wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}},namespace:"crm"},engagementInteraction:{name:"create engagement",class:"interaction",properties:{activity:"string","wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}},namespace:"crm"},activityCreatorInteractions:{name:"activity creator interactions",class:"interaction",properties:{screen:{type:"string",isOptional:!0},subscreen:{type:"string",isOptional:!0},action:{type:"string"},subAction:{type:"string",isOptional:!0},activity:{type:"string",isOptional:!0},objectType:{type:"string",isOptional:!0},source:{type:"string",isOptional:!0},"wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}},namespace:"crm"},activityCreatorReorderInteractions:{name:"activity creator interactions",class:"interaction",properties:{screen:{type:"string",isOptional:!0},subscreen:{type:"string",isOptional:!0},action:{type:"string"},subAction:{type:"string",isOptional:!0},activity:{type:"string",isOptional:!0},objectType:{type:"string",isOptional:!0},source:{type:"string",isOptional:!0},activity1:{type:"string",isOptional:!0},activity2:{type:"string",isOptional:!0},activity3:{type:"string",isOptional:!0},activity4:{type:"string",isOptional:!0},activity5:{type:"string",isOptional:!0},validationError:{type:"boolean",isOptional:!0},"wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}},namespace:"crm"},activityCreatorFileInteractions:{name:"activity creator interactions",class:"interaction",properties:{screen:{type:"string",isOptional:!0},subscreen:{type:"string",isOptional:!0},action:{type:"string"},subAction:{type:"string",isOptional:!0},activity:{type:"string",isOptional:!0},objectType:{type:"string",isOptional:!0},source:{type:"string",isOptional:!0},fileType:{type:"string"},fileSource:{type:"string",isOptional:!0},"wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}},namespace:"crm"},onboardingMissionInteraction:{name:"onboarding mission interaction",class:"interaction",properties:{action:"string","wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}},namespace:"crm"},useMention:{name:"use @mention",class:"usage",properties:{location:{type:"string"},"wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}},namespace:"crm"},changeTicketStatusToClosedInRecord:{name:"change ticket status to closed in record",class:"usage",namespace:"crm",properties:{"wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}}},changeTicketStatusToOpenInRecord:{name:"change ticket status to open in record",class:"usage",namespace:"crm",properties:{"wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}}},deleteRecord:{name:"delete record",class:"usage",properties:{type:{type:["permanent","with_option_to_restore"],isOptional:!0},"wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}},namespace:"crm"},gdprExportRecord:{name:"gdpr export record",class:"usage",namespace:"crm",properties:{"wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}}},addAssociation:{name:"add association",class:"usage",properties:{toObjectTypeId:{type:"string"},fromObjectTypeId:{type:"string"},action:{type:"string"},"wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}},namespace:"crm"},removeAssociation:{name:"remove association",class:"usage",properties:{toObjectTypeId:{type:"string"},fromObjectTypeId:{type:"string"},"wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}},namespace:"crm"},"sidebar-interaction":{name:"sidebar-interaction",class:"interaction",properties:{action:"string",subAction:{type:"string",isOptional:!0},type:{type:"string",isOptional:!0},subType:{type:"string",isOptional:!0},"wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}},namespace:"crm"},universalAssociationsSelect:{name:"universal associations select",class:"usage",properties:{action:{type:"string"},toObjectTypId:{type:"string",isOptional:!0},engagementOrInteractionType:{type:"string"},location:{type:"string"},pluralObjectName:{type:"string"},subjectObjectTypeId:{type:"string"},"wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}},namespace:"crm"},marketableContactsCheckboxInteraction:{name:"record interactions",class:"interaction",properties:{action:["checkbox-marketing-contact"],isEnabled:{type:"boolean"},"wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}},namespace:"crm"},"sample-contact-failure":{name:"sample-contact-failure",class:"interaction",namespace:"crm",properties:{"wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}}}}},function(e,t){e.exports={viewLineItems:{properties:{screen:"string",sourceIsShopify:{type:"boolean",isOptional:!0},sourceIsEcommBridge:{type:"boolean",isOptional:!0},readOnly:{type:"boolean"},"wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}},namespace:"line-items",name:"pageview",class:"view"},saveProductFromLineItem:{properties:{action:["Save product from line item"],screen:{type:"string",isOptional:!0},subscreen:{type:"string",isOptional:!0},"wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}},namespace:"line-items",name:"LineItems usage",class:"usage"},bulkSaveLineItems:{properties:{action:["Bulk save line items"],numLineItemsWithTax:{type:"number",isOptional:!0},screen:{type:"string",isOptional:!0},subscreen:{type:"string",isOptional:!0},"wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}},namespace:"line-items",name:"LineItems usage",class:"usage"},updateDealAmount:{properties:{action:["Update deal amount"],screen:{type:"string",isOptional:!0},subscreen:{type:"string",isOptional:!0},"wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}},namespace:"line-items",name:"LineItems usage",class:"usage"},updateLineItemTableColumns:{properties:{action:["Update line item table columns"],added:{type:"array",isOptional:!0},removed:{type:"array",isOptional:!0},screen:{type:"string",isOptional:!0},subscreen:{type:"string",isOptional:!0},"wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}},namespace:"line-items",name:"LineItems usage",class:"usage"},cancelLineItemTableColumnsUpdate:{properties:{action:["Cancel edit columns","Cancel edit columns confirmation"],screen:{type:"string",isOptional:!0},subscreen:{type:"string",isOptional:!0},"wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}},namespace:"line-items",name:"LineItems usage",class:"usage"},addLineItem:{properties:{action:["Add line item","Clone line item"],screen:{type:"string"},isCustom:{type:"boolean",isOptional:!0},"wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0},subscreen:{type:"string",isOptional:!0}},namespace:"line-items",name:"LineItems interaction",class:"interaction"},editLineItem:{properties:{action:["Edit line item"],screen:{type:"string"},propertyName:{type:"string"},isInlineEdit:"boolean","wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0},subscreen:{type:"string",isOptional:!0}},namespace:"line-items",name:"LineItems interaction",class:"interaction"},removeLineItem:{properties:{action:["Remove line item"],screen:{type:"string"},"wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0},subscreen:{type:"string",isOptional:!0}},namespace:"line-items",name:"LineItems interaction",class:"interaction"},reorderLineItem:{properties:{action:["Reorder line item"],screen:{type:"string"},"wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0},subscreen:{type:"string",isOptional:!0}},namespace:"line-items",name:"LineItems interaction",class:"interaction"},selectInvalidCurrencyResolutionOption:{properties:{action:["Select invalid currency resolution option"],option:["product_price","exchange_rate","custom"],"wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0},screen:{type:"string",isOptional:!0},subscreen:{type:"string",isOptional:!0}},namespace:"line-items",name:"LineItems interaction",class:"interaction"},resolveInvalidCurrencies:{properties:{action:["Resolve line item currencies"],"wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0},screen:{type:"string",isOptional:!0},subscreen:{type:"string",isOptional:!0}},namespace:"line-items",name:"LineItems interaction",class:"interaction"},cancelStagedLineItemChanges:{properties:{action:["Cancel staged line item changes"],screen:{type:"string"},"wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0},subscreen:{type:"string",isOptional:!0}},namespace:"line-items",name:"LineItems interaction",class:"interaction"},goToLineItemEditorFromRecordCard:{properties:{action:["Click line items sidebar card button"],"wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0},screen:{type:"string",isOptional:!0},subscreen:{type:"string",isOptional:!0}},namespace:"line-items",name:"LineItems interaction",class:"interaction"},goToDealFromLineItemEditor:{properties:{action:["Click deal link"],"wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0},screen:{type:"string",isOptional:!0},subscreen:{type:"string",isOptional:!0}},namespace:"line-items",name:"LineItems interaction",class:"interaction"},editGlobalTerms:{properties:{action:["Edit global terms"],screen:{type:"string"},propertyName:{type:"string"},"wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0},subscreen:{type:"string",isOptional:!0}},namespace:"line-items",name:"LineItems interaction",class:"interaction"},openGlobalTermsModal:{properties:{action:["Open global terms modal"],screen:{type:"string"},"wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0},subscreen:{type:"string",isOptional:!0}},namespace:"line-items",name:"LineItems interaction",class:"interaction"},openEditColumnsModal:{properties:{action:["Open edit columns modal"],screen:{type:"string"},"wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0},subscreen:{type:"string",isOptional:!0}},namespace:"line-items",name:"LineItems interaction",class:"interaction"},clickTableCell:{properties:{action:["Click table cell"],propertyName:{type:"string"},screen:{type:"string"},"wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0},subscreen:{type:"string",isOptional:!0}},namespace:"line-items",name:"LineItems interaction",class:"interaction"},addLineItemsPanelFilter:{properties:{action:["Filter products","Select product view","Clear selected product view"],filterProperties:{type:"array",isOptional:!0},"wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0},screen:{type:"string",isOptional:!0},subscreen:{type:"string",isOptional:!0}},namespace:"line-items",name:"LineItems interaction",class:"interaction"},clickAddLineItemFromZeroState:{properties:{action:["Select from product library","Create custom line item"],"wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0},screen:{type:"string",isOptional:!0},subscreen:{type:"string",isOptional:!0}},namespace:"line-items",name:"LineItems interaction",class:"interaction"},addLineItemsPanelInteractions:{properties:{action:["Select product","Cancel add line item from product","Open add line items panel"],"wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0},screen:{type:"string",isOptional:!0},subscreen:{type:"string",isOptional:!0}},namespace:"line-items",name:"LineItems interaction",class:"interaction"},lineItemValidation:{properties:{propertyName:{type:"string"},action:{type:"string"},"wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0},screen:{type:"string",isOptional:!0},subscreen:{type:"string",isOptional:!0}},namespace:"line-items",name:"LineItems interaction",class:"interaction"}}},function(e,t){e.exports={embeddedReportView:{name:"embedded report view",class:"view",properties:{action:"string",subscreen2:{type:"string",isOptional:!0}},namespace:"reporting"},embeddedReportInteraction:{name:"embedded report interaction",class:"interaction",properties:{action:"string",value:{type:"string",isOptional:!0},subscreen2:{type:"string",isOptional:!0}},namespace:"reporting"}}},function(e,t){e.exports={communicatorPermissionsPageview:{name:"communicator permissions page view",class:"view",namespace:"communicator",properties:{"wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}}},communicatorInteraction:{name:"communicator interaction",class:"interaction",properties:{action:"string",message:{type:"string",isOptional:!0},source:{type:"string",isOptional:!0},channel:{type:"string",isOptional:!0},activity:{type:"string",isOptional:!0},status:{type:"string",isOptional:!0},duration:{type:"number",isOptional:!0},widgetName:{type:"string",isOptional:!0},averageMosScore:{type:"string",isOptional:!0},is_inverse_registration:{type:"boolean",isOptional:!0},issues:{type:"string",isOptional:!0},comments:{type:"string",isOptional:!0},callDuration:{type:"number",isOptional:!0},callToCountry:{type:"string",isOptional:!0},startCallSla:{type:"number",isOptional:!0},isNewActivityCreatorInteraction:{type:"boolean",isOptional:!0},"wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}},namespace:"communicator"},communicator_fileInteraction:{name:"communicator interaction",class:"interaction",properties:{action:"string",message:{type:"string",isOptional:!0},source:{type:"string",isOptional:!0},channel:{type:"string",isOptional:!0},activity:{type:"string",isOptional:!0},status:{type:"string",isOptional:!0},duration:{type:"number",isOptional:!0},widgetName:{type:"string",isOptional:!0},averageMosScore:{type:"string",isOptional:!0},is_inverse_registration:{type:"boolean",isOptional:!0},issues:{type:"string",isOptional:!0},comments:{type:"string",isOptional:!0},callDuration:{type:"number",isOptional:!0},callToCountry:{type:"string",isOptional:!0},startCallSla:{type:"number",isOptional:!0},isNewActivityCreatorInteraction:{type:"boolean",isOptional:!0},fileType:{type:"string"},fileSource:{type:"string"},"wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}},namespace:"communicator"},communicator_bannerInteraction:{name:"banner interaction",class:"interaction",properties:{activity:{type:"string",isOptional:!0},channel:{type:"string",isOptional:!0},source:{type:"string",isOptional:!0},bannerName:{type:"string",isOptional:!0},cta:{type:"string",isOptional:!0},"wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}},namespace:"communicator"},communicatorUsage_createFollowUpTask:{name:"create followup task",class:"usage",properties:{action:{type:"string",isOptional:!0},message:{type:"string",isOptional:!0},source:{type:"string",isOptional:!0},channel:{type:"string",isOptional:!0},activity:{type:"string",isOptional:!0},status:{type:"string",isOptional:!0},duration:{type:"number",isOptional:!0},widgetName:{type:"string",isOptional:!0},averageMosScore:{type:"string",isOptional:!0},is_inverse_registration:{type:"boolean",isOptional:!0},issues:{type:"string",isOptional:!0},comments:{type:"string",isOptional:!0},callDuration:{type:"number",isOptional:!0},callToCountry:{type:"string",isOptional:!0},startCallSla:{type:"number",isOptional:!0},isNewActivityCreatorInteraction:{type:"boolean",isOptional:!0},"wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}},namespace:"communicator"},communicator_emailActivation:{name:"email activation",class:"activation",namespace:"communicator",properties:{"wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}}},communicator_firstEmailActivation:{name:"first email activation",class:"activation",namespace:"communicator",properties:{"wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}}},communicator_timelineInteraction:{name:"timeline interaction",class:"interaction",properties:{action:"string",message:{type:"string",isOptional:!0},source:{type:"string",isOptional:!0},channel:{type:"string",isOptional:!0},activity:{type:"string",isOptional:!0},status:{type:"string",isOptional:!0},duration:{type:"number",isOptional:!0},widgetName:{type:"string",isOptional:!0},averageMosScore:{type:"string",isOptional:!0},is_inverse_registration:{type:"boolean",isOptional:!0},issues:{type:"string",isOptional:!0},comments:{type:"string",isOptional:!0},callDuration:{type:"number",isOptional:!0},callToCountry:{type:"string",isOptional:!0},startCallSla:{type:"number",isOptional:!0},isNewActivityCreatorInteraction:{type:"boolean",isOptional:!0},callType:{type:"string",isOptional:!0},outcomeType:{type:"string",isOptional:!0},"wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}},namespace:"communicator"},communicator_formatText:{name:"communicator interaction",class:"interaction",properties:{action:["format text"],message:{type:"string",isOptional:!0},source:{type:"string",isOptional:!0},channel:{type:"string",isOptional:!0},activity:{type:"string",isOptional:!0},status:{type:"string",isOptional:!0},duration:{type:"number",isOptional:!0},widgetName:{type:"string",isOptional:!0},averageMosScore:{type:"string",isOptional:!0},is_inverse_registration:{type:"boolean",isOptional:!0},issues:{type:"string",isOptional:!0},comments:{type:"string",isOptional:!0},callDuration:{type:"number",isOptional:!0},callToCountry:{type:"string",isOptional:!0},startCallSla:{type:"number",isOptional:!0},isNewActivityCreatorInteraction:{type:"boolean",isOptional:!0},formatType:{type:"string"},"wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}},namespace:"communicator"},communicator_saveSignature:{name:"communicator interaction",class:"interaction",properties:{action:["save signature"],message:{type:"string",isOptional:!0},source:{type:"string",isOptional:!0},channel:{type:"string",isOptional:!0},activity:{type:"string",isOptional:!0},status:{type:"string",isOptional:!0},duration:{type:"number",isOptional:!0},widgetName:{type:"string",isOptional:!0},averageMosScore:{type:"string",isOptional:!0},is_inverse_registration:{type:"boolean",isOptional:!0},issues:{type:"string",isOptional:!0},comments:{type:"string",isOptional:!0},callDuration:{type:"number",isOptional:!0},callToCountry:{type:"string",isOptional:!0},startCallSla:{type:"number",isOptional:!0},isNewActivityCreatorInteraction:{type:"boolean",isOptional:!0},signatureType:{type:"string"},"wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}},namespace:"communicator"},communicator_recipientInteraction:{name:"communicator interaction",class:"interaction",properties:{action:['Add "to" recipient','Add "cc" recipient','Add "bcc" recipient'],message:{type:"string",isOptional:!0},source:{type:"string",isOptional:!0},channel:{type:"string",isOptional:!0},activity:{type:"string",isOptional:!0},status:{type:"string",isOptional:!0},duration:{type:"number",isOptional:!0},widgetName:{type:"string",isOptional:!0},averageMosScore:{type:"string",isOptional:!0},is_inverse_registration:{type:"boolean",isOptional:!0},issues:{type:"string",isOptional:!0},comments:{type:"string",isOptional:!0},callDuration:{type:"number",isOptional:!0},callToCountry:{type:"string",isOptional:!0},startCallSla:{type:"number",isOptional:!0},isNewActivityCreatorInteraction:{type:"boolean",isOptional:!0},count:{type:"number"},"wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}},namespace:"communicator"},communicator_sendEmail:{name:"communicator interaction",class:"interaction",properties:{action:["click to send email","click to schedule email"],message:{type:"string",isOptional:!0},source:{type:"string",isOptional:!0},channel:{type:"string",isOptional:!0},activity:{type:"string",isOptional:!0},status:{type:"string",isOptional:!0},duration:{type:"number",isOptional:!0},widgetName:{type:"string",isOptional:!0},averageMosScore:{type:"string",isOptional:!0},is_inverse_registration:{type:"boolean",isOptional:!0},issues:{type:"string",isOptional:!0},comments:{type:"string",isOptional:!0},callDuration:{type:"number",isOptional:!0},callToCountry:{type:"string",isOptional:!0},startCallSla:{type:"number",isOptional:!0},isNewActivityCreatorInteraction:{type:"boolean",isOptional:!0},emailType:"string",replyAllCount:"number",isReply:"boolean",scheduleEmailType:{type:"string",isOptional:!0},"wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}},namespace:"communicator"},communicatorUsage_sendEmail:{name:"send email",class:"usage",properties:{emailType:"string",replyAllCount:"number",isReply:"boolean",source:"string",numberOfAttachments:"number",numberOfImages:"number",numberOfLinks:"number",numberOfVideos:"number",scheduleEmailType:{type:"string",isOptional:!0},senderAccountType:{type:"string",isOptional:!0},"wordpress-plugin":{type:"string",isOptional:!0},"usage-portal-first-week":{type:"string",isOptional:!0},user_was_invited:{type:"string",isOptional:!0},"chrome-extension-installed":{type:"string",isOptional:!0}},namespace:"communicator"}}},function(e,t,n){"use strict";n.d(t,"e",(function(){return r}));n.d(t,"d",(function(){return i}));n.d(t,"a",(function(){return c}));n.d(t,"f",(function(){return h}));n.d(t,"b",(function(){return m}));n.d(t,"c",(function(){return f}));const r="weekly",i="biweekly",o="monthly",a="quarterly",s="per_six_months",c="annually",l="per_two_years",u="per_three_years",d="per_four_years",p="per_five_years",h=new Set([r,i]),m=(new Set([o,a,s,c,l,u,d,p]),{[r]:{days:7,weeks:1},[i]:{days:14,weeks:2},[o]:{months:1},[a]:{months:3},[s]:{months:6},[c]:{months:12},[l]:{months:24},[u]:{months:36},[d]:{months:48},[p]:{months:60}}),f=Object.keys(m)},function(e,t,n){"use strict";n.d(t,"c",(function(){return a}));n.d(t,"f",(function(){return s}));n.d(t,"d",(function(){return c}));n.d(t,"b",(function(){return l}));n.d(t,"e",(function(){return u}));n.d(t,"g",(function(){return d}));n.d(t,"a",(function(){return b}));var r=n(4),i=n(1394);function o(e){if(null===e)return null;const t=Number(e);return isNaN(t)?null:t}function a(e){if(!e)return null;return r.a.moment.duration(e.toUpperCase()).asMonths()}function s(e){if(!e)return null;return r.a.moment.duration(e.toUpperCase()).asWeeks()}function c(e){return o(e)?`P${e}M`:""}function l(e){return i.b[e].months}function u(e){return i.b[e].weeks}function d(e){return i.f.has(e)}const p=/^P(\d+)D$/i,h=/^P(\d+)M$/i,m="WEEKS",f="MONTHS";function g(e){if(!e)return null;const t=e.match(p);if(t){const e=o(t[1]);return{unit:m,periodValue:e?Math.floor(e/7):e}}const n=e.match(h);return n?{unit:f,periodValue:o(n[1])}:null}function b(e,t){var n,r;if(!t||!e)return!0;const i=null!==(n=null===(r=g(e))||void 0===r?void 0:r.periodValue)&&void 0!==n?n:0;if(d(t)){return i%u(t)==0}return i%l(t)==0}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));function r(e){let t,n=!1;return function(...r){if(!n){n=!0;t=e(...r)}return t}}},function(e,t,n){"use strict";var r=n(2748),i=n(181),o=n(1398);function a(e,t){const n=i.Seq.Set(e);return Object(o.a)((e,t)=>!n.contains(t),t)}t.a=Object(r.a)(a)},function(e,t,n){"use strict";var r=n(181),i=n(546);i.c.implement(Array,(e,t)=>t.filter(e));i.c.implementInherited(r.Iterable,(e,t)=>t.filter(e));i.c.implement(Object,(e,t)=>{const n={},r=Object.keys(t),i=r.length;for(let o=0;o<i;o++){const i=r[o],a=t[i];e(a,i,t)&&(n[i]=a)}return n});i.c.implementInherited(r.Record,(e,t)=>t.reduce((n,r,i)=>e(r,i,t)?n.set(i,r):n,Object(r.Map)()));t.a=i.c},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(40);const i=Object(r.createContext)(void 0)},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(40),i=n(1401);const o=()=>Object(r.useContext)(i.a).objectId},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(40);const i=Object(r.createContext)(void 0)},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(40);const i=Object(r.createContext)(void 0)},function(e,t,n){"use strict";function r(e,t,n){(e=arguments.length>1?e.then(t,n):e).then(null,e=>{setTimeout(()=>{throw e},0)})}t.a=r},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(40),i=n(30),o=n.n(i);const a=Object(r.createContext)(o.a),s=()=>Object(r.useContext)(a)},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(1406);const i=()=>Object(r.a)().objectTypeId},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(40),i=n(1399);const o=()=>Object(r.useContext)(i.a)},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(1406);const i=()=>Object(r.a)().property},function(e,t,n){"use strict";n.d(t,"c",(function(){return o}));n.d(t,"d",(function(){return a}));n.d(t,"a",(function(){return s}));n.d(t,"b",(function(){return c}));var r=n(1409),i=n(1344);const o=e=>e===i.g?r.g:e===i.f?r.c:e===i.h?r.h:e===i.u?r.m:r.k,a=e=>e===i.g?r.e:e===i.f?r.b:e===i.h?r.i:e===i.u?r.n:r.l,s=e=>e===i.g||e===i.f,c=e=>e!==i.g&&e!==i.f},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));n.d(t,"d",(function(){return i}));n.d(t,"h",(function(){return o}));n.d(t,"i",(function(){return a}));n.d(t,"m",(function(){return s}));n.d(t,"n",(function(){return c}));n.d(t,"g",(function(){return l}));n.d(t,"e",(function(){return u}));n.d(t,"c",(function(){return d}));n.d(t,"b",(function(){return p}));n.d(t,"k",(function(){return h}));n.d(t,"l",(function(){return m}));n.d(t,"f",(function(){return f}));n.d(t,"j",(function(){return g}));const r="hs_additional_domains",i="hs_additional_emails",o="pipeline",a="dealstage",s="hs_pipeline",c="hs_pipeline_stage",l="hs_pipeline",u="lifecyclestage",d="hs_pipeline",p="lifecyclestage",h="hs_pipeline",m="hs_pipeline_stage",f="hs_marketable_reason_type",g="hs_is_closed"},function(e,t,n){"use strict";n.d(t,"c",(function(){return r}));n.d(t,"b",(function(){return i}));n.d(t,"a",(function(){return o}));const r="edit",i="create",o="bulk"},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(1348),i=n(2672),o=n(1349),a=n(40),s=n(1406);const c=()=>{const{property:e,value:t}=Object(s.a)();return Object(a.useMemo)(()=>Object(i.w)(e)&&!Object(i.e)(e)&&t&&e.numberDisplayHint!==r.e?isNaN(Number(t))?I18n.parseNumber(t,{precision:5}):Number(t):t&&Object(i.I)(e,t)?Object(o.b)(t):t,[t,e])}},function(e,t,n){"use strict";n.r(t);var r=n(324),i=n(279),o=n(40),a=n(2679),s=n(508),c=n(2654),l=n(1413),u=n(45);const d=e=>e&&e.label?Object(u.jsx)(i.a,{message:"customerDataProperties.PropertyInputHidden.noPermissionWithLabel",options:{propertyLabel:e.label}}):Object(u.jsx)(i.a,{message:"customerDataProperties.PropertyInputHidden.noPermission"}),p=e=>"compact"===e.formControlUse?Object(u.jsx)("span",Object.assign({},Object(l.a)(e),{children:Object(u.jsx)(s.a,{disabled:!0})})):Object(u.jsx)("span",Object.assign({},Object(l.a)(e),{children:Object(u.jsx)(c.a,{title:d(e.property),autoPlacement:!0,children:Object(u.jsx)(a.a,{name:"hide",size:"xxs",color:r.FLINT})})}));t.default=Object(o.memo)(p)},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));const r=e=>Object.keys(e).reduce((t,n)=>{n.startsWith("data")&&(t[n]=e[n]);return t},{})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(40),i=n(10),o=n(27),a=n.n(o);const s=()=>{const[e,t]=Object(r.useState)(()=>{try{return Object(o.userInfoSync)()}catch(e){i.a.warn({message:"propertyinputv2-userinfosync: Failure reading userinfo sync",key:"propertyinputv2-userinfosync"})}});Object(r.useEffect)(()=>{if(!e)try{a()({ignoreRedirect:!0}).then(e=>{t(e)}).catch(()=>{i.a.warn({message:"propertyinputv2-userinfo: API failure fetching userinfo",key:"propertyinputv2-userinfo-api"})})}catch(e){i.a.warn({message:"propertyinputv2-userinfo: Failure fetching userinfo",key:"propertyinputv2-userinfo"})}},[]);return e}},function(e,t,n){"use strict";n.d(t,"c",(function(){return r}));n.d(t,"b",(function(){return i}));n.d(t,"e",(function(){return o}));n.d(t,"f",(function(){return a}));n.d(t,"d",(function(){return s}));n.d(t,"a",(function(){return c}));n.d(t,"g",(function(){return l}));n.d(t,"h",(function(){return u}));const r="CRM:Properties:FileTypeEnhancedUX",i="file-manager-no-upload-limit",o=20,a=50,s=10,c="DISALLOWED_EXTENSION",l="MAX_UPLOAD_SIZE_EXCEEDED",u="TIMEOUT"},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(1406);const i=()=>Object(r.a)().timestamp},function(e,t,n){"use strict";n.r(t);var r=n(40),i=n(1418),o=n(2672),a=n(55),s=n(1422),c=n(298),l=n(1423),u=n(1344),d=n(1424),p=n(45);const h=e=>{const{inputRef:t,internalValue:n,isRequired:h,objectType:m,onChange:f=a.a,options:g,placeholder:b,property:O,multi:y=Object(o.u)(O),readOnly:j,referenceToOption:v,resolver:C,value:x}=e,E=Object(u.x)(m),T=Object(r.useCallback)(({target:{value:e}})=>{f(Object(c.a)(Array.isArray(e)?e.join(";"):e))},[f]),S=Object(r.useMemo)(()=>y?Object(s.b)(x):x,[x,y]),I=Object(p.jsx)(i.a,Object.assign({},Object(l.a)(e),{referenceToOption:v,clearable:!h,ref:t,multi:y,onChange:T,options:g,placeholder:b||"",readOnly:j,resolver:C,value:S,deferAutoloadUntilOpen:!0}));return j?Object(p.jsx)(d.a,{internalValue:n,objectTypeId:E,property:O,tooltipAlignment:"flex-end",children:I}):I};t.default=Object(r.memo)(h)},function(e,t,n){"use strict";var r=n(2),i=n(1419),o=n(40),a=n(47),s=n(2655),c=n(722),l=n(539),u=n(1420),d=n(1421),p=n(45);const h=["autoload","deferAutoloadUntilOpen","filterOptions","onOpenChange","ignoreCase","ignoreAccents","referenceToOption","options","resolver","searchCount","loadReferences","value"];function m(e){const t=new Set;return e.filter(e=>{if(!e)return!1;if(t.has(e.value))return!1;t.add(e.value);return!0})}const f=e=>null!=e&&""!==e,g=Object(a.a)((e,t)=>(Array.isArray(e)?e:[e]).map(e=>"number"==typeof e?""+e:e).filter(f).filter(e=>!t.find(t=>t&&t.value===e))),b=e=>e.reduce((e,t)=>{"fulfilled"===t.status&&e.push(t.value);return e},[]),O=(e,t)=>e.api.search(t),y=e=>({value:e,text:e,buttonText:Object(p.jsx)(d.a,{use:"form-on-dark"})}),j=e=>({value:e,text:e}),v=(e,t,n,r,i,o,a={offset:0},s,c)=>{const{offset:l}=a,u={count:n,offset:l,query:i};0===l&&(r.current=[]);c(t,u).then(({hasMore:t,offset:n,references:i})=>{r.current=r.current.concat(i.map(s));const a=m(e.concat(r.current));o(null,{options:a,pagination:{hasMore:t,offset:n}})}).catch(()=>{})},C=[],x=Object(o.forwardRef)((e,t)=>{let{autoload:n=!0,deferAutoloadUntilOpen:a=!1,filterOptions:d=!1,onOpenChange:p,ignoreCase:f=Object(c.a)(!1),ignoreAccents:x=Object(c.a)(!1),referenceToOption:E=i.a,options:T=C,resolver:S,searchCount:I=25,loadReferences:w=O,value:_}=e,N=Object(r.a)(e,h);const A=Object(o.useRef)([]),[D,k]=Object(o.useState)([]),P=Object(o.useRef)({resolver:S,key:0});if(S!==P.current.resolver){A.current=[];P.current.resolver=S;P.current.key=P.current.key+1}Object(o.useEffect)(()=>{const e=T.concat(A.current),t=g(_,e);if(0===t.length){k([]);return}const n=t.map(e=>S.api.byId(e));k(t.map(y));Object(u.a)(n).then(e=>{const n=b(e),r=new Set(n.map(e=>e.id)),i=t.filter(e=>!r.has(e));k([...n.map(E),...i.map(j)])}).catch(()=>{k(t.map(j))})},[T,_,S,E]);const R=Object(o.useMemo)(()=>Object(l.a)((e,t,n)=>v(T,S,I,A,e,t,n,E,w),500),[T,S,I,E,w]),{defaultOpen:F,open:L}=N,M=Object(o.useRef)(Boolean(F||L||!1)),B=Object(o.useCallback)((e,t,n)=>{a&&!M.current||(e?R(e,t,n):v(T,S,I,A,e,t,n,E,w))},[R,T,S,I,E,w,a]),U=Object(o.useCallback)(e=>{e.target.value&&(M.current=!0);p&&p(e)},[p]),V=Object(o.useMemo)(()=>m([...T,...D]),[T,D]);return Object(o.createElement)(s.a,Object.assign({},N,{autoload:n,anchorType:"button",filterOptions:d,ignoreCase:f,ignoreAccents:x,key:P.current.key,loadOptions:B,options:V,ref:t,value:_,onOpenChange:U}))});x.displayName="ReferenceLiteSearchSelect";t.a=x},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));const r=e=>Object.assign({disabled:e.disabled,help:e.description,text:e.label,value:e.id},e.icon&&{imageUrl:e.icon.src})},function(e,t,n){"use strict";function r(e){return Promise.resolve(e).then(e=>Promise.all(e.map(e=>Promise.resolve(e).then(e=>({status:"fulfilled",value:e})).catch(e=>({status:"rejected",reason:e})))))}t.a=r},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(287),i=n.n(r),o=n(324);const a=i.a.div.withConfig({displayName:"SkeletonText",componentId:"sc-1ohndlj-0"})(["background-color:",";border-radius:999px;display:inline-block;height:0.8em;width:6em;"],e=>"form-on-dark"===e.use?o.GREAT_WHITE:o.KOALA)},function(e,t,n){"use strict";n.d(t,"b",(function(){return r}));n.d(t,"a",(function(){return i}));function r(e){return"string"==typeof e?e.split(";").map(e=>e.trim()).filter(e=>""!==e):null==e?[]:[e]}function i(e){return e.join(";")}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(1397);const i=["accessLevel","actions","baseUrl","caretRenderer","componentResolver","componentConfig","currencyCode","dateFormat","dateTimeFormat","defaultCurrency","enableCheckboxInput","enablePopovers","formControlUse","gdprError","handleBlur","handleFocus","hasBlurred","inputRef","inputMode","isHtmlInputDisabled","isPhoneNumberInputDisabled","isRequired","internalValue","momentType","MomentType","multiCurrencyCurrencyCode","objectType","objectTypeId","onCancel","onChangeMultiple","onSecondaryChange","onTracking","onValidationChange","options","popoverProps","popoverOpen","property","relativeDate","relativeDateTime","resolver","resolvers","resolverType","secondaryChanges","onSecondaryChange","setPopoverOpen","showAutoSaveText","showPlaceholder","showAutoSaveText","stripInsignificantZeros","subject","subjectCurrencyCode","subjectId","suppressAlerts","type","unstyled","validationMessage","validationResult","validationSettings","wrappers","disableValidation"],o=(e,t=[])=>Object(r.a)([...i,...t],e)},function(e,t,n){"use strict";var r=n(279),i=n(479),o=n(287),a=n.n(o),s=n(1344),c=n(1350),l=n(1425),u=n(45);const d=a.a.div.withConfig({displayName:"InternalValueTooltip__StyledRow",componentId:"sc-1lpcnhq-0"})(["display:flex;align-items:",";"],({alignment:e="center"})=>e),p=new Set(["hubspot_team_id"]),h={[s.g]:{salesforcecampaignids:!0}},m=new Set([c.l,c.K]),f=({children:e,internalValue:t,objectTypeId:n,property:o,tooltipAlignment:a})=>{if(!t)return Object(u.jsx)(u.Fragment,{children:e});const s=Object(l.a)(o,n);if(p.has(o.name)||s&&m.has(s))return Object(u.jsx)(u.Fragment,{children:e});const c=h[n],f=c&&c[o.name]?"customerDataProperties.PropertyInputExternalOption.internalValueTooltip":"customerDataProperties.PropertyInputExternalOption.internalValueRequiredForFiltersTooltip";return Object(u.jsxs)(d,{alignment:a,children:[Object(u.jsx)(i.a,{tooltipPlacement:"top right",className:"m-right-1",title:Object(u.jsx)(r.a,{message:f,options:{internalValue:t}})}),e]})};t.a=f},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(1344),i=n(1350);const o={[r.b]:{hs_call_disposition:i.d},[r.c]:{hs_owner:i.y},[r.f]:{lifecyclestage:i.C,hs_analytics_first_touch_converting_campaign:i.e,hs_analytics_last_touch_converting_campaign:i.e},[r.g]:{hs_persona:i.A,lifecyclestage:i.C,hs_analytics_first_touch_converting_campaign:i.e,hs_analytics_last_touch_converting_campaign:i.e},[r.h]:{dealstage:i.C,pipeline:i.B,deal_currency_code:i.v,"engagement.ownerId":i.y},[r.j]:{hs_attendee_owner_ids:i.y,hs_at_mentioned_owner_ids:i.y,hs_created_by:i.Q,hs_call_disposition:i.d},[r.m]:{hs_line_item_currency_code:i.v},[r.t]:{hs_queue_membership_ids:i.N},[r.u]:{}},a={hs_persona:i.A,hubspot_owner_id:i.y,hubspot_team_id:i.O,hs_pipeline:i.B,hs_pipeline_stage:i.C,hs_created_by:i.Q,hs_created_by_user_id:i.Q,hs_updated_by_user_id:i.Q},s=(e,t)=>{const n=e&&"property"in e?e.property:e;if(n&&n.externalOptionsReferenceType)return n.externalOptionsReferenceType;const r=n?n.name:null,i=!!n&&n.hubspotDefined,s=o[t]||{},c=r?s[r]:null;if(c&&i)return c;const l=r?a[r]:null;return l&&i?l:null}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));const r=e=>!e&&0!==e||Number.isNaN(+e)?null:+e},function(e,t,n){"use strict";n.r(t);var r=n(40),i=n(508),o=n(1428),a=n(1423),s=n(1426),c=n(45);const l=e=>{const{autoFocus:t,inputRef:n,onChange:r,value:l}=e,u=null===Object(s.a)(l)?"":Object(o.a)(l);return Object(c.jsx)(i.a,Object.assign({},Object(a.a)(e),{onChange:r,autoFocus:t,inputRef:n,value:u||"",autoComplete:"off",readOnly:!0}))};t.default=Object(r.memo)(l)},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(4);const i=e=>null==e||isNaN(+e)||""===e?e:r.a.moment.duration(parseInt(e,10)).humanize()},function(e,t,n){"use strict";n.r(t);var r=n(2),i=n(40),o=n(4),a=n(1430),s=n(508),c=n(2708),l=n(1432),u=n(1407),d=n(1411),p=n(1423),h=n(55),m=n(45);const f=["settlementCurrencyCode","settlementCurrencyValue"],g=e=>{let{settlementCurrencyCode:t,settlementCurrencyValue:n}=e,i=Object(r.a)(e,f);const a=Object(c.a)(),l=Object(c.a)({defaultValue:n,defaultCurrencyCode:t}),u=`${o.a.formatCurrency(a.currencyValue,{currencyCode:a.currencyCode})} (${o.a.formatCurrency(l.currencyValue,{currencyCode:l.currencyCode})})`;return Object(m.jsx)(s.a,Object.assign({},Object(p.a)(i),{value:u,onChange:h.a,readOnly:!0}))},b=e=>{const t=Object(d.a)(),n=Object(u.a)(),{data:r}=Object(l.a)({exchangeRate:"hs_presentment_to_settlement_currency_exchange_rate",settlementCurrencyValue:n.name+"_in_settlement_currency",settlementCurrencyCode:"hs_settlement_currency_code"});return e.readOnly&&t&&null!=r&&r.exchangeRate&&null!=r&&r.settlementCurrencyValue&&null!=r&&r.settlementCurrencyCode?Object(m.jsx)(g,Object.assign({},e,{settlementCurrencyValue:r.settlementCurrencyValue,settlementCurrencyCode:r.settlementCurrencyCode})):Object(m.jsx)(a.default,Object.assign({},e))};t.default=Object(i.memo)(b)},function(e,t,n){"use strict";n.r(t);var r=n(40),i=n(2708),o=n(515),a=n(513),s=n(1423),c=n(298),l=n(45);const u=e=>{const{onChange:t,inputRef:n,multiCurrencyCurrencyCode:u,min:d}=e,{currencyValue:p,currencyCode:h,formattingOptions:{min:m,fractionalCurrencyProps:f}}=Object(i.a)({defaultCurrencyCode:u,defaultMin:d}),g=Object(r.useCallback)(e=>{"function"==typeof t&&t(null==e.target.value?e:Object(c.a)(String(e.target.value)))},[t]);return h?Object(l.jsx)(o.a,Object.assign({},Object(s.a)(e),f,{isNativeCurrency:!1,currency:h,onChange:g,inputRef:n,value:p,min:m})):Object(l.jsx)(a.a,Object.assign({},Object(s.a)(e),{onChange:g,inputRef:n,value:p}))};t.default=Object(r.memo)(u)},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(40);function i(){const e=Object(r.useRef)(!0);Object(r.useEffect)(()=>()=>{e.current=!1},[]);return e}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(1433),i=n(1400),o=n(1405);const a=(e,t)=>{const n=Object(i.a)(),a=Object(o.a)(),s=Object(r.a)();if(null!=t&&t.skip)return{data:void 0,loading:!1,error:void 0};const c={};for(const t in e)Object.prototype.hasOwnProperty.call(e,t)&&(c[t]=s(e[t],n,a));return{data:c,loading:!1,error:void 0}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(40),i=n(1401);const o=()=>Object(r.useContext)(i.a).getAdditionalPropertyValue},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(1344);const i=new Set([r.r]);function o(e){return i.has(e)}},function(e,t,n){"use strict";n.r(t);var r=n(40),i=n(298),o=n(515),a=n(1341),s=n(1423),c=n(1426),l=n(1434),u=n(45);const d=e=>{const{onChange:t,inputRef:n,property:d,currencyCode:p,value:h,min:m=0,objectTypeId:f}=e,g=Object(r.useCallback)(e=>{const{target:{value:n}}=e;"function"==typeof t&&t(null==n?e:Object(i.a)(String(n)))},[t]),b=p||Object(a.F)(d.name)||"",O=Object(c.a)(h),y={maxFractionDigits:6},j=Object(l.a)(f)?y:void 0;return Object(u.jsx)(o.a,Object.assign({},Object(s.a)(e),j,{min:m,currency:b,onChange:g,inputRef:n,value:O}))};t.default=Object(r.memo)(d)},function(e,t,n){"use strict";n.r(t);var r=n(40),i=n(298),o=n(1423),a=n(513),s=n(1395),c=n(45);const l=e=>{const{onChange:t,inputRef:n,value:l}=e,u=Object(r.useCallback)(({target:{value:e}})=>{const n=Object(s.d)(e);t(Object(i.a)(n))},[t]),d=Object(s.c)(l);return Object(c.jsx)(a.a,Object.assign({},Object(o.a)(e),{min:0,onChange:u,inputRef:n,value:d}))};t.default=Object(r.memo)(l)},,function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));const r=({enablePopovers:e,objectId:t})=>!(!e||!t)},,function(e,t,n){"use strict";n.r(t);var r=n(279),i=n(40),o=n(287),a=n.n(o),s=n(479),c=n(1409),l=n(1432),u=n(1441),d=n(1442),p=n(1410),h=n(45);const m=a.a.div.withConfig({displayName:"PropertyInputDealExchangeRateWrapper__StyledRow",componentId:"ahh5q-0"})(["display:flex;align-items:center;"]),f=e=>null!=e&&""!==e,g=e=>{const t=Object(u.a)(),{data:n,loading:o}=Object(l.a)({isDealClosed:c.j}),[a,g]=Object(i.useState)(!1),{inputMode:b,onBlur:O,onFocus:y}=e,j=Object(i.useCallback)(e=>{g(!0);y&&y(e)},[y]),v=Object(i.useCallback)(e=>{g(!1);O&&O(e)},[O]);if(o||void 0===n)return null;const{isDealClosed:C}=n,x=!e.readOnly&&(f(e.value)||a),E=b===p.a,T=("true"===C||E)&&t&&t("multi-currency-write");return Object(h.jsxs)(m,{children:[x&&Object(h.jsx)(s.a,{className:"m-right-1",title:Object(h.jsx)(r.a,{message:"customerDataProperties.PropertyInputDealExchangeRateWrapper.help"}),tooltipPlacement:"top right"}),Object(h.jsx)(d.default,Object.assign({},e,{onBlur:v,onFocus:j,readOnly:e.readOnly||!T}))]})};t.default=Object(i.memo)(g)},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(40),i=n(1414),o=n(47);const a=new Set,s=Object(o.a)(e=>new Set(e)),c=()=>{const e=Object(i.a)(),t=e&&e.user?s(e.user.scopes):a;return Object(r.useCallback)(e=>t.has(e),[t])}},function(e,t,n){"use strict";n.r(t);var r=n(2672),i=n(40),o=n(298),a=n(513),s=n(508),c=n(1423),l=n(1426),u=n(45);const d=/^\s*$/,p=new RegExp("[^0-9.-]","g"),h=e=>{const t=e.replace(p,"");return d.test(t)?null:t},m=e=>{const{value:t,onChange:n,inputRef:d,property:p,precision:m=5}=e,f=Object(i.useCallback)(e=>{"function"==typeof n&&n(null==e.target.value?e:Object(o.a)(String(e.target.value)))},[n]),g=Object(i.useCallback)(e=>{"function"==typeof n&&n(null==e.target.value?e:Object(o.a)(h(e.target.value)))},[n]);return Object(r.o)(p)?Object(u.jsx)(a.a,Object.assign({},Object(c.a)(e),{precision:m,value:Object(l.a)(t),onChange:f,inputRef:d})):Object(u.jsx)(s.a,Object.assign({},Object(c.a)(e),{value:null==t?"":""+t,onChange:g,inputRef:d}))};t.default=Object(i.memo)(m)},function(e,t,n){"use strict";var r=n(1350);n.d(t,"a",(function(){return r.l}));n.d(t,"b",(function(){return r.v}));n.d(t,"c",(function(){return r.y}));n.d(t,"d",(function(){return r.A}));n.d(t,"e",(function(){return r.E}));n.d(t,"f",(function(){return r.N}));n.d(t,"g",(function(){return r.Q}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));n.d(t,"b",(function(){return o}));var r=n(1445);const i=(e,t)=>{const{useFetchQuery:n}=e,i=n(e,void 0===t?void 0:[t]);if(i.status===r.d){const{references:e}=i;return{status:i.status,error:void 0,reference:e[0]}}return i.status===r.b||(i.status,r.c),{status:i.status,error:i.error,reference:void 0}},o=(e,t)=>{const{useSearchQuery:n}=e;return n(e,t)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));n.d(t,"b",(function(){return i}));n.d(t,"c",(function(){return o}));n.d(t,"d",(function(){return a}));n.d(t,"e",(function(){return s}));n.d(t,"f",(function(){return c}));n.d(t,"g",(function(){return l}));const r="error",i="idle",o="loading",a="success",s=e=>e===r,c=e=>e===i,l=e=>e===o},function(e,t,n){"use strict";n.d(t,"c",(function(){return c}));n.d(t,"d",(function(){return l}));n.d(t,"a",(function(){return u}));n.d(t,"b",(function(){return d}));n.d(t,"e",(function(){return p}));const r="Invalid ID",i="Object not found",o="Fetch request failed",a="Search request failed",s="Objects not found",c=e=>({type:r,reason:`${r}: ${e}`}),l=e=>({type:i,reason:`${i} for ID: ${e}`}),u=e=>({type:s,reason:`${s} for IDs: ${e.join(",")}`}),d=e=>({type:o,reason:e}),p=e=>({type:a,reason:e})},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(46);const i=e=>Object(r.a)(e&&"string"==typeof e,"expected `referenceType` to be a non-empty string")},function(e,t,n){"use strict";const r=e=>t=>t.reduce((t,n)=>{t[e(n)]=n;return t},{});t.a=r},function(e,t,n){"use strict";e.exports=function(e,t){t||(t={});"function"==typeof t&&(t={cmp:t});var n,r="boolean"==typeof t.cycles&&t.cycles,i=t.cmp&&(n=t.cmp,function(e){return function(t,r){var i={key:t,value:e[t]},o={key:r,value:e[r]};return n(i,o)}}),o=[];return function e(t){t&&t.toJSON&&"function"==typeof t.toJSON&&(t=t.toJSON());if(void 0!==t){if("number"==typeof t)return isFinite(t)?""+t:"null";if("object"!=typeof t)return JSON.stringify(t);var n,a;if(Array.isArray(t)){a="[";for(n=0;n<t.length;n++){n&&(a+=",");a+=e(t[n])||"null"}return a+"]"}if(null===t)return"null";if(-1!==o.indexOf(t)){if(r)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var s=o.push(t)-1,c=Object.keys(t).sort(i&&i(t));a="";for(n=0;n<c.length;n++){var l=c[n],u=e(t[l]);if(u){a&&(a+=",");a+=JSON.stringify(l)+":"+u}}o.splice(s,1);return"{"+a+"}"}}(e)}},function(e,t,n){"use strict";n.r(t);var r=n(2),i=n(40),o=n(2655),a=n(1424),s=n(2648),c=n(1350),l=n(279),u=n(1423),d=n(1444),p=n(24),h=n.n(p),m=n(1445),f=n(45);const g=["inputRef","internalValue","value","isRequired","objectTypeId","placeholder","property","readOnly"],b=e=>{let{inputRef:t,internalValue:n,value:p,isRequired:b,objectTypeId:O,placeholder:y=Object(f.jsx)(l.a,{message:"customerDataProperties.PropertyInputTaxCategory.placeholder"}),property:j,readOnly:v}=e,C=Object(r.a)(e,g);const x=Object(s.a)(c.h,O),{status:E,error:T,results:{references:S=[]}={}}=Object(d.b)(x,{count:1e4,offset:0,query:""}),I=Object(i.useMemo)(()=>Object.values(S.reduce((e,t)=>{var n;const r=t.additionalProperties.group;null!==(n=e[r])&&void 0!==n||(e[r]={text:r,options:[]});e[r].options.push({text:t.label,value:t.id});return e},{})),[S]);if(T){h.a.captureException(new Error(T.reason));return null}const w=Object(m.g)(E),_=Object(f.jsx)(o.a,Object.assign({},Object(u.a)(C),{value:p,clearable:!b,isLoading:w,minimumSearchCount:0,inputRef:t,options:I,placeholder:y,readOnly:v}));return v?Object(f.jsx)(a.a,{internalValue:n,objectTypeId:O,property:j,children:_}):_};t.default=Object(i.memo)(b)},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));n.d(t,"d",(function(){return d}));n.d(t,"e",(function(){return p}));n.d(t,"c",(function(){return h}));n.d(t,"b",(function(){return m}));var r=n(1344),i=n(1345),o=n(2672),a=n(9),s=n.n(a),c=n(1),l=n.n(c);const u=(e,t)=>t===r.h&&"hs_exchange_rate"===e.name&&!e.calculated,d=(e,t)=>t===r.d&&("hs_fees_amount"===e.name||"hs_platform_fee"===e.name||"hs_net_amount"===e.name),p=(e,t)=>(t===i.K||t===i.C)&&"hs_tax_category"===e.name,h=(e,t)=>(s.a.isQa()?99535353:53)===l.a.get()&&Object(o.k)(e,t),m=(e,t)=>t===r.l&&"hs_lead_label"===e.name},function(e,t,n){"use strict";n.r(t);var r=n(40),i=n(1351),o=n(508),a=n(1423),s=n(1424),c=n(45);const l=e=>{const{value:t,objectTypeId:n,property:l,inputRef:u}=e,d=Object(r.useMemo)(()=>t&&Object(i.b)(t)?Object(i.a)(t):t||"",[t]),p=Object(c.jsx)(o.a,Object.assign({},Object(a.a)(e),{readOnly:!0,inputRef:u,value:d}));return t&&Object(i.b)(t)?Object(c.jsx)(s.a,{internalValue:t,objectTypeId:n,property:l,children:p}):p};t.default=Object(r.memo)(l)},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));n.d(t,"b",(function(){return i}));n.d(t,"c",(function(){return o}));n.d(t,"e",(function(){return a}));n.d(t,"d",(function(){return s}));const r="INVALID",i="NOT_YET_VALIDATED",o="PENDING",a="VALID",s="UNKNOWN"},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));n.d(t,"d",(function(){return i}));n.d(t,"c",(function(){return o}));n.d(t,"f",(function(){return a}));n.d(t,"b",(function(){return s}));n.d(t,"e",(function(){return c}));const r="CONFLICTING_CONTACT_EMAIL_VALUE",i="INVALID_EMAIL_FORMAT",o="INVALID_DOMAIN_FORMAT",a="INVALID_NAME_WITH_QUOTES",s="INVALID_BILLING_TERM_FREQUENCY_RATIO",c="INVALID_FILE_VALUE"},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));const r=e=>""===e||void 0===e},function(e,t,n){"use strict";var r=n(287),i=n.n(r),o=n(335);const a=i()(o.a).withConfig({displayName:"PropertyInputMultiplePropertyPopoverBody",componentId:"sc-14gsy4w-0"})(["max-height:50vh;overflow-y:auto;"]);t.a=a},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));const r="--"},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));n.d(t,"b",(function(){return l}));n.d(t,"d",(function(){return u}));n.d(t,"c",(function(){return d}));n.d(t,"e",(function(){return p}));n(673);var r=n(554),i=(n(2810),n(2838));n(1347),n(2672),n(1422);const o=/(^[^:/?#]*:(?:\/+)?)?(?:.*)/;const a=e=>e.replace(/https?:\/\//i,"").replace(/(www\.)?/i,"");function s(e){return-1!==a(e).indexOf("/")}function c(e){return e.match(o)[1]}function l(e){return Boolean(e&&void 0!==c(e))}function u(e){if(!e)return{domain:e,protocol:void 0};const t=c(e);return void 0!==t?{domain:e.replace(t,""),protocol:t}:{domain:e,protocol:void 0}}function d(e){if(!e)return{domain:e,path:void 0};const t=a(e),n=t.match(/([^/]*)(.*)/);return s(e)?{domain:n[1],path:n[2]}:{domain:t,path:void 0}}Object(r.a)(e=>{if(!e)return;return d(e).domain});function p(e){const{domain:t}=d(e);return!!t&&i.a.test(t)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(40),i=n(1431);const o=(e,t={skip:!1})=>{const[n,o]=Object(r.useState)({loading:!t.skip,data:void 0,error:void 0}),a=Object(i.a)(),s=Object(r.useRef)(0);Object(r.useEffect)(()=>{if(t.skip){o({loading:!1,data:void 0,error:void 0});return}o({loading:!0,data:void 0,error:void 0});const n=++s.current;e().then(e=>{a.current&&n===s.current&&o({loading:!1,data:e,error:void 0})}).catch(e=>{a.current&&n===s.current&&o({loading:!1,data:void 0,error:e})})},[e,a,t.skip]);return n}},function(e,t,n){"use strict";n.r(t);var r=n(40),i=n(2672),o=n(2644),a=n(508),s=n(1320),c=n(2779),l=n(1423),u=n(55),d=n(2828),p=n(188),h=n(45);const m=e=>{const{property:t,value:n,dateFormat:r,dateTimeFormat:m,relativeDate:f,relativeDateTime:g,objectTypeId:b}=e,O=Object(d.a)(),y=Object(o.a)(t,n,void 0,{dateFormat:r,dateTimeFormat:m,relativeDate:f,relativeDateTime:g,showDateDisplayHintLabel:O(Object(p.a)("CRM:PropMgmt:TimeSinceUntil"))},b);return Object(i.M)(t)||Object(i.K)(t)||Object(i.l)(t)&&Object(i.u)(t)?Object(h.jsx)(s.a,{hideButtonCaret:!0,children:Object(h.jsx)(c.a,Object.assign({},Object(l.a)(e),{value:y,onChange:u.a,readOnly:!0,shrink:!0,children:y}))}):Object(h.jsx)(a.a,Object.assign({},Object(l.a)(e),{value:y,onChange:u.a,readOnly:!0}))};t.default=Object(r.memo)(m)},function(e,t,n){"use strict";n.r(t);n.d(t,"default",(function(){return f}));var r=n(41),i=n.n(r),o=n(40),a=n(1422),s=n(2644),c=n(298),l=n(2655),u=n(2672),d=n(2710),p=n(1423),h=n(313),m=n(45);class f extends o.PureComponent{constructor(...e){super(...e);this.handleChange=({target:{value:e}})=>{const{onChange:t}=this.props;t(Object(c.a)(Array.isArray(e)?e.join(";"):e))}}getOptionsWithInvalidPlaceholders(e,t){const{property:n}=this.props;if(e.length){const r=n.options.reduce((e,t)=>{e.add(t.value);return e},new Set),i=e.filter(e=>!r.has(e));if(i.length)return[...t||[],...i.map(e=>({text:e||"",value:e||void 0,tagUse:"candy-apple"}))]}return t}render(){const e=Object(u.u)(this.props.property),t=e?Object(a.b)(this.props.value):this.props.value;let n=!e&&!this.props.isRequired||this.props.emptyOptionLabel?Object(s.b)(this.props.property):Object(s.c)(this.props.property);this.props.emptyOptionLabel&&(n=n.map(e=>""===e.value?Object.assign({},e,{text:this.props.emptyOptionLabel}):e));return Object(m.jsx)(l.a,Object.assign({},Object(p.a)(this.props,["onFocus","onKeyUp"]),{onChange:this.handleChange,multi:e,anchorType:"button",options:e?this.getOptionsWithInvalidPlaceholders(t,n):n,placeholder:null==this.props.placeholder?"":this.props.placeholder,ref:this.props.inputRef,value:t}))}}f.propTypes={inputRef:h.a.isRequired,isRequired:i.a.bool,onChange:i.a.func,placeholder:i.a.node,property:d.a.isRequired,value:i.a.node}},function(e,t,n){"use strict";n.r(t);var r=n(2),i=n(41),o=n.n(i),a=n(40),s=n(2705),c=n(1463),l=n(298),u=n(4),d=n(2710),p=n(1423),h=n(313),m=n(1347),f=n(45);const g=["inputRef","onChange","property"],b={inputRef:h.a.isRequired,onChange:o.a.func,property:d.a.isRequired,value:o.a.string},O=e=>{const t=u.a.moment.userTz().startOf("day").valueOf(),n=u.a.moment.userTz().valueOf()-t;return u.a.moment.userTz(e).add(n).valueOf()},y=e=>{let{inputRef:t,onChange:n,property:i}=e,o=Object(r.a)(e,g);const u=Object(a.useCallback)(e=>{const{target:{value:t}}=e;"function"==typeof n&&n(null==t?e:Object(l.a)(String(O(t))))},[n]);return Object(f.jsx)(s.a,Object.assign({},Object(p.a)(o),{momentType:c.a.USER,onChange:u,inputRef:t,type:i.type===m.b?"date":void 0}))};y.propTypes=b;t.default=Object(a.memo)(y)},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));const r={USER:"USER",PORTAL:"PORTAL",MOMENT:"MOMENT"}},function(e,t,n){"use strict";n.r(t);var r=n(2),i=n(41),o=n.n(i),a=n(2705),s=n(1463),c=n(298),l=n(2710),u=n(1423),d=n(40),p=n(313),h=n(1347),m=n(45);const f=["inputRef","onChange","property","inputSize"],g={inputRef:p.a.isRequired,onChange:o.a.func,property:l.a.isRequired,value:o.a.string},b=e=>{let{inputRef:t,onChange:n,property:i,inputSize:o}=e,l=Object(r.a)(e,f);const p=Object(d.useCallback)(e=>{const{target:{value:t}}=e;"function"==typeof n&&n(null==t?Object(c.a)(null):Object(c.a)(String(t)))},[n]);return Object(m.jsx)(a.a,Object.assign({},Object(u.a)(l),{momentType:s.a.USER,onChange:p,inputRef:t,inputSize:o,type:i.type===h.b?"date":void 0,dateDisplayHint:i.dateDisplayHint}))};b.propTypes=g;t.default=Object(d.memo)(b)},function(e,t,n){"use strict";n.r(t);n.d(t,"PropertyInputExpandableText",(function(){return h}));var r=n(41),i=n.n(r),o=n(40),a=n(1320),s=n(2779),c=n(2672),l=n(313),u=n(2710),d=n(1423),p=n(45);class h extends o.PureComponent{constructor(...e){super(...e);this.handleChange=e=>{if(!Object(c.M)(this.props.property)){const t=e.target.value;if(e.target.value.includes("\n"))return this.props.onChange(Object.assign({},e,{target:Object.assign({},e.target,{value:t.replace(/\n/g,"")})}))}return this.props.onChange(e)}}render(){const{inputRef:e,value:t}=this.props;return Object(p.jsx)(a.a,{buttonAlign:"left",hideButtonCaret:!0,children:Object(p.jsx)(s.a,Object.assign({},Object(d.a)(this.props),{value:null===t?"":t,inputRef:e,onChange:this.handleChange,shrink:!0}))})}}h.propTypes={onChange:i.a.func.isRequired,inputRef:l.a.isRequired,property:u.a.isRequired,value:i.a.string};h.defaultProps=s.a.defaultProps;t.default=h},function(e,t,n){"use strict";n.r(t);var r=n(2742),i=n(1423),o=n(40),a=n(298),s=n(45);const c=e=>{const{property:t,value:n,disabled:c,onChange:l,readOnly:u,className:d,autoFocus:p,inputRef:h}=e,m=Object(o.useCallback)(({target:{checked:e}})=>l(Object(a.a)(e?"true":"false")),[l]);return Object(s.jsx)(r.a,Object.assign({},Object(i.a)(e),{className:d,readOnly:u,autoFocus:p,disabled:c,onChange:m,checked:"true"===n,ref:h,children:t&&t.description}))};t.default=c},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));n.d(t,"b",(function(){return i}));n.d(t,"c",(function(){return o}));n.d(t,"d",(function(){return a}));n.d(t,"f",(function(){return s}));n.d(t,"e",(function(){return c}));const r="EMAIL_CAMPAIGN",i="IMPORT_NAME",o="INTEGRATION_NAME",a="MARKETING_REASON",s="SALESFORCE_CAMPAIGN",c="PIPELINE_STAGE_IN_PIPELINE"},function(e,t,n){"use strict";n.d(t,"b",(function(){return d}));n.d(t,"a",(function(){return m}));var r=n(10),i=n(2629),o=n(665),a=n(1467),s=n(1),c=n.n(s);const l=/^(.*?)\/(.*)$/,u=e=>l.test(e),d=({reasonType:e,reasonSourceObjectId:t})=>`${e}/${t}`,p=e=>{const t=e.match(l);if(t){const[e,n,r]=t;return{reasonType:n,reasonSourceObjectId:r}}return null},h=e=>e.map(e=>({id:d(e),label:e.reportingLabel.label||"",description:null===e.reportingLabel.url?void 0:e.reportingLabel.url})),m=({httpClient:e})=>Object(i.a)({fetchByIds:t=>{const n=t.map(p);return e.post("/marketable-contacts/v1/marketable-labels/reasons",{query:{portalId:c.a.get()},data:n})},fetchBySearch:()=>{r.a.warn({message:"Marketing Reason resolver does not support search fetching",key:"marketing-reason-resolver"});return Promise.resolve({hasMore:!1,offset:0,references:[]})},formatByIdResponse:h,formatSearchResponse:o.a,referenceType:a.d,isIdValid:u})},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(1419);const i=e=>Object.assign({},Object(r.a)(e),{reference:e})},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));n.d(t,"c",(function(){return s}));n.d(t,"b",(function(){return c}));n.d(t,"d",(function(){return d}));var r=n(1471),i=n(1472);const o=e=>{let t={};if(e&&e.stageTransitions&&e.stageTransitions.transitions){const n=e.stageTransitions.transitions;t=Object(r.a)(({targetStageId:e})=>e)(n)}return t},a=(e,t)=>{const n=o(t);return!Object.prototype.hasOwnProperty.call(n,e)||n[e].validation.valid},s=(e,t)=>{if(t&&(null===t.userCanBypassValidations||void 0===t.userCanBypassValidations)&&t.stageTransitions){const n=t.stageTransitions.transitions.find(t=>t.targetStageId===e);if(n&&null!==n.validation.userCanBypassValidation&&void 0!==n.validation.userCanBypassValidation)return n.validation.userCanBypassValidation}return Boolean(t&&t.userCanBypassValidations)},c=(e,t)=>({objectTypeId:e,stageTransitions:t.reduce((e,t)=>{null===e&&(e={originStageId:t.originStageId,transitions:[]});t.stageValidations.length&&e&&(e.transitions=e.transitions.concat(t.stageValidations.map(e=>({targetStageId:e.targetStageId,validation:{valid:e.validation.valid,message:e.validation.statusCode,userCanBypassValidation:e.validation.userCanBypass}}))));return e},null)}),l=(e,t,n)=>{if(e===t)return!1;return e>=n&&t<=n},u={isValid:!0},d=({originStageId:e,originPipelineId:t,targetStageId:n,targetPipeline:r})=>{if(t!==r.pipelineId)return u;const o=r.stages.findIndex(t=>t.stageId===e),a=r.stages.findIndex(e=>e.stageId===n);if(o<0||a<0)return u;let s=o;for(;s>=0;s--){if(r.stages[s].isApprovalStage)break}return s<0?u:l(o,a,s)?Object.assign({},u,{code:i.a}):u}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));function r(e){return t=>t.reduce((t,n)=>{t[e(n)]=n;return t},{})}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));const r="RESTART_APPROVAL_WARNING"},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));class r{constructor(e,t){this.cache=new Map;this.cache=new Map;this.fetch=e;this.serializeKey=t}get(e,t,n=!1){const r=this.serializeKey(e);this.cache.has(r)&&!n||this.cache.set(r,this.fetch(e,t));return this.cache.get(r)}delete(e){const t=this.serializeKey(e);return this.cache.delete(t)}clear(){this.cache.clear()}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(1475),i=n(1473);const o=({objectTypeId:e,objectId:t})=>`${e}/${t}`,a=(e,t)=>{const{objectTypeId:n,objectId:i}=e;return Object(r.a)(i,n,t).then(e=>Object.entries(e.properties).reduce((e,[t,n])=>{e[t]=n.value;return e},{}))},s=()=>new i.a(a,o)},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));n.d(t,"b",(function(){return c}));var r=n(1),i=n.n(r),o=n(24),a=n.n(o);function s(e,t,n){return n.get(`inbounddb-objects/v1/crm-objects/${encodeURIComponent(t)}/${encodeURIComponent(e)}?includeAllValues=true`,{query:{portalId:i.a.get()}})}const c=({objectTypeId:e,objectId:t,propertyName:n,timestamp:r,httpClient:i})=>i.get(`inbounddb-objects-sensitive/v1/decrypted/${encodeURIComponent(e)}/${encodeURIComponent(t)}/${encodeURIComponent(n)}`,r?{query:{timestamp:r}}:{}).then(e=>e&&e.value||"").catch(r=>{if(404===r.status)return"";a.a.captureException(r,{extra:{apiError:"DECRYPT_HIGHLY_SENSITIVE_PROPERTY_VALUE_FAILED",objectId:t,objectTypeId:e,propertyName:n}});throw r})},function(e,t,n){"use strict";n.r(t);var r=n(40),i=n(1423),o=n(1418),a=n(1467),s=n(2611),c=n(1404),l=n(1432),u=n(1405),d=n(1408),p=n(1469),h=n(279),m=n(1400),f=n(2711),g=n(2676),b=n(45);const O=e=>{const{value:t,inputRef:n,clearable:g,onChangeMultiple:O,placeholder:y,inputMode:j,stageChangeValidatorLoading:v}=e,C=Object(u.a)(),x=Object(m.a)(),E=Object(c.a)(),{data:T,loading:S}=Object(l.a)({pipelineId:Object(d.c)(C)}),I=null==T?void 0:T.pipelineId,w=Object(f.a)({httpClient:E,objectTypeId:C,pipelineId:I,inputMode:j,objectId:x}),_=Object(s.a)(a.e,C,{pipelineId:null===I?void 0:I,httpClient:E}),N=Object(r.useCallback)(e=>{const n=""+e.target.value.value;if(n===t)return;const r=e.target.value.reference,i=r&&r.additionalProperties&&r.additionalProperties.pipelineId?""+r.additionalProperties.pipelineId:null,o={[Object(d.d)(C)]:n};i&&i!==I&&(o[Object(d.c)(C)]=i);O(o)},[C,O,I,t]);return v||S?null:Object(b.jsx)(o.a,Object.assign({},Object(i.a)(e),{cache:!1,loadReferences:w,referenceToOption:p.a,onChange:void 0,onSelectedOptionChange:N,resolver:_,ref:n,anchorType:"button",value:t,clearable:void 0!==g?g:Object(d.a)(C),placeholder:y||Object(b.jsx)(h.a,{message:"customerDataProperties.PropertyInputPipelineStageV2.placeholder"})}))},y=e=>{const{onChangeMultiple:t,inputMode:n}=e,{stageChangeValidatorLoading:r,stageValidationModal:i,onChangeWithStageValidation:o}=Object(g.a)({onChangeMultiple:t,inputMode:n});return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(O,Object.assign({},e,{onChangeMultiple:o,stageChangeValidatorLoading:r})),i]})};t.default=y},function(e,t,n){"use strict";n.r(t);var r=n(40),i=n(508),o=n(2600),a=n(1423),s=n(279),c=n(45);const l={success:"",error:Object(c.jsx)(s.a,{message:"customerDataProperties.propertyValidationErrorMessages.invalidUrl"})},u=e=>{const{onChange:t,inputRef:n,value:r}=e,s=Object(a.a)(e);return Object(c.jsx)(o.a,{type:"basic",requireProtocol:!0,validationMessage:l,children:Object(c.jsx)(i.a,Object.assign({},s,{value:r||"",onChange:t,inputRef:n}))})};t.default=Object(r.memo)(u)},function(e,t){e.exports={revenuestagechangesubmit:{name:"revenuestagechangesubmit",class:"usage",properties:{stageName:"string"},namespace:"customer-data-properties",version:"1"},Interaction:{name:"interaction",class:"interaction",properties:{screen:{type:"string"},subscreen:{type:"string"},action:{type:"string"}},namespace:"customer-data-properties",version:"1"},Pageview:{name:"Pageview",class:"view",properties:{screen:"string"},namespace:"customer-data-properties",version:"1"}}},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return o}));var r=n(2649),i="ReactNative"==Object(r.b)((function(){return navigator.product})),o=("function"==typeof WeakMap&&(i&&e.HermesInternal),"function"==typeof Symbol&&"function"==typeof Symbol.for);o&&Symbol.asyncIterator,Object(r.b)((function(){return window.document.createElement})),Object(r.b)((function(){return navigator.userAgent.indexOf("jsdom")>=0}))}).call(this,n(74))},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));function r(e){try{return e()}catch(e){}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(1482);function i(e,t){void 0===t&&(t=0);var n=Object(r.a)("stringifyForDisplay");return JSON.stringify(e,(function(e,t){return void 0===t?n:t}),t).split(JSON.stringify(n)).join("<undefined>")}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=new Map;function i(e){var t=r.get(e)||1;r.set(e,t+1);return"".concat(e,":").concat(t,":").concat(Math.random().toString(36).slice(2))}},function(e,t,n){"use strict";(function(e){var r=n(1480);t.a=Object(r.a)((function(){return globalThis}))||Object(r.a)((function(){return window}))||Object(r.a)((function(){return self}))||Object(r.a)((function(){return e}))||Object(r.a)((function(){return r.a.constructor("return this")()}))}).call(this,n(74))},function(e,t,n){"use strict";var r=n(2),i=n(40),o=n(41),a=n.n(o),s=n(24),c=n.n(s),l=n(747),u=n(748),d=n(749);const p=["pickerType","disableUpload"],h=e=>{let{pickerType:t=l.k.PANEL,disableUpload:n=!1}=e,o=Object(r.a)(e,p);const{openPicker:a,closePicker:s}=Object(i.useContext)(u.a);Object(i.useEffect)(()=>{if(o.type)if(Object.values(l.b).includes(o.type)){if(a){a(Object.assign({},o,{pickerType:t,disableUpload:n}));return()=>{s&&s()}}{const e=new Error("[file-manager] FilePickerPanel must be wrapped in `file-manager-components/configureFileManager` HOC");Object(d.h)(e);c.a.captureException(e);o.onClose&&o.onClose()}}else{const e=new Error("[file-manager] `type` prop is not valid");Object(d.h)(e)}else{const e=new Error("[file-manager] `type` prop is required");Object(d.h)(e)}},[o.type,t,o.filterType,o.filteredExtensions]);return null};h.displayName="FilePickerPanel";h.propTypes={type:a.a.oneOf(Object.keys(l.b)).isRequired,pickerType:a.a.oneOf(Object.keys(l.k)).isRequired,disableUpload:a.a.bool,onClose:a.a.func.isRequired,onSelect:a.a.func.isRequired,filterType:a.a.oneOf(Object.keys(l.d)),filteredExtensions:a.a.arrayOf(a.a.string),filteredReasons:a.a.object,renderContext:a.a.string,initialPanel:a.a.oneOf(Object.keys(l.j))};h.defaultProps={pickerType:l.k.PANEL,disableUpload:!1};t.a=h},function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var r=n(40),i=n(73),o=n(41),a=n.n(o),s=n(55),c=n(2763),l=n(2679),u=n(434),d=n(1182),p=n(1119),h=n(45);class m extends r.PureComponent{constructor(e){super(e);this.handlePreload=()=>{p.a.preload()};this.state={iframeSrc:null};this.createPreview=Object(i.debounce)(this.createPreview,100)}componentDidMount(){const{value:e=""}=this.props;this.createPreview(e)}componentDidUpdate(e){const{value:t=""}=e,{value:n=""}=this.props;t!==n&&this.createPreview(n)}componentWillUnmount(){clearTimeout(this.createPreviewTimeout)}get iconClassName(){return"rich-text-preview orientation--"+(this.props.orientation||"right")}createPreview(e){this.createPreviewTimeout=setTimeout(()=>{const t=Object(c.c)(e,{styles:{zoom:"50%"}});this.setState({iframeSrc:t})})}renderIcon(){const{iconName:e="expand"}=this.props;return Object(h.jsx)(u.a,{align:"center",justify:"center",children:Object(h.jsx)(l.a,{className:this.iconClassName,name:e,size:"xl"})})}render(){const{onClick:e=s.a}=this.props,{iframeSrc:t}=this.state;return t?Object(h.jsx)(d.a,{className:"rich-text-preview",foregroundContent:this.renderIcon(),onMouseEnter:this.handlePreload,onMouseDown:this.handlePreload,onClick:e,"data-test-id":"module-field-sidebar-iframe-preview",children:Object(h.jsx)("iframe",{sandbox:"",src:t})}):null}}m.propTypes={iconName:a.a.string.isRequired,onClick:a.a.func.isRequired,orientation:a.a.oneOf(["left","right"]).isRequired,value:a.a.string.isRequired};m.defaultProps={iconName:"expand",onClick:s.a,orientation:"right",value:""}},function(e,t,n){"use strict";var r=n(40),i=n(41),o=n.n(i),a=n(2634),s=n(696),c=n(443),l=n(279),u=n(45);const d=e=>"DesignEditorsUI.shared.globalContentAlert."+e;class p extends r.Component{render(){const{className:e,contentPath:t}=this.props;return Object(u.jsxs)(s.a,{className:e,type:"info",children:[Object(u.jsx)(l.a,{message:d("message")}),Object(u.jsx)(c.a,{className:"m-y-3",external:!0,href:Object(a.d)(null,{assetPath:t}),size:"small",use:"tertiary",children:Object(u.jsx)(l.a,{message:d("buttonText")})})]})}}p.propTypes={className:o.a.string,contentPath:o.a.string.isRequired};t.a=p},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";var r=n(40),i=n(59),o=n(2782),a=n(64),s=n(68),c=n(1049);const l=(...e)=>Object(c.a)(e).get("multi-currency/v2/currencies/information"),u=Object(a.b)(s.CURRENCY_FETCH_HOME,l);var d=n(1082);const p=e=>e.resources.currency.currencyInfo.homeCurrency&&e.resources.currency.currencyInfo.homeCurrency.currencyCode;var h=n(71),m=n(443),f=n(1084),g=n(725),b=n(2742),O=n(724),y=n(751),j=n(2760),v=n(279),C=n(717),x=n(723),E=n(2703),T=n(2798),S=n(690),I=n(2758),w=n(66),_=n(2734),N=n(2741),A=n(2745),D=n(2712),k=n(485),P=n(2634),R=n(4),F=n(2654),L=n(696),M=n(606),B=n(45);const U=e=>"ContentComponents.selectorModal.selectCrmObject."+e,V={product:P.b.productsLibrary()};class H extends r.PureComponent{constructor(e){super(e);this.handleSelect=()=>{const{onSelect:e,onCloseModal:t}=this.props,{selectedObjectId:n}=this.state;e(n);t()};this.handlePageChange=(e,t)=>{const{onUpdateObjects:n}=this.props;n({offset:I.f*(t-1)});this.setState({tablePage:t})};this.handleSearch=e=>{const{onUpdateObjects:t}=this.props;if(e.length>=3||0===e.length){t({query:e});this.setState({tablePage:1})}};this.validateSearch=e=>e&&e.length>0&&e.length<3?R.a.text(U("minimumSearchMessage"),{count:3-e.length}):null;this.renderObjectTable=e=>{const{failedFetchMessage:t,fetchedProps:n,homeCurrencyCode:r,objectsFetchRequestStatus:i}=this.props,{selectedObjectId:o,tablePage:a}=this.state,s=Object.values(n).reduce((e,t)=>[...e,...t.tableLabel?[t.tableLabel]:[]],[""]);return i!==w.SUCCEEDED?i===w.FAILED?Object(B.jsx)(L.a,{type:"danger",children:Object(B.jsx)(v.a,{message:t})}):Object(B.jsx)(_.a,{layout:"centered"}):e.length?Object(B.jsxs)(B.Fragment,{children:[Object(B.jsxs)(g.a,{condensed:!0,className:"m-bottom-5",children:[Object(B.jsx)("colgroup",{children:Object(B.jsx)("col",{style:{width:"35px"}})}),Object(B.jsx)("thead",{children:Object(B.jsx)("tr",{children:s.map((e,t)=>Object(B.jsx)("th",{children:e},t))})}),Object(B.jsx)("tbody",{children:e.map(e=>{const{properties:t,objectId:n}=e;return Object(B.jsx)("tr",{children:[Object(B.jsx)(b.a,{checked:n===o,onChange:()=>{this.setState({selectedObjectId:n})},"data-test-id":"select-product-checkbox"},"select-"+n),t.name,Object(B.jsx)(T.a,{style:"currency",value:parseFloat(t.price),currencyCode:r,stripInsignificantZeros:!1},"key")].map((e,t)=>Object(B.jsx)("td",{children:e},t))},"row-"+n)})})]}),Object(B.jsx)(S.a,{maxVisiblePageButtons:5,showLastPageNumber:!0,onPageChange:({target:{value:e}})=>this.handlePageChange(a,e),page:a,pageCount:this.tablePageCount})]}):Object(B.jsx)(M.a,{illustration:"empty-state-charts",illustrationProps:{width:187},children:Object(B.jsx)(v.a,{message:U("noObjects")})})};this.renderBody=()=>{const{objects:e,objectType:t}=this.props;return Object(B.jsxs)(B.Fragment,{children:[Object(B.jsx)(k.a,{className:"m-bottom-4 justify-end",children:Object(B.jsx)(D.a,{external:!0,href:V[t],children:Object(B.jsx)(v.a,{message:U("manageObjectsLink"),options:{objectType:t}})})}),Object(B.jsx)(N.a,{"aria-label":"Search",className:"m-bottom-5",children:Object(B.jsx)(A.a,{onChange:e=>this.handleSearch(e.target.value),getValidationMessage:this.validateSearch})}),e&&this.renderObjectTable(Object.values(e))]})};const{value:t}=e;this.state={selectedObjectId:t&&t.id,tablePage:1}}get tablePageCount(){const{totalObjects:e}=this.props;return Math.ceil(e/I.f)}render(){const{onCloseModal:e,objectType:t}=this.props,{selectedObjectId:n}=this.state;return Object(B.jsxs)(j.a,{"data-test-id":"crm-object-select-modal",children:[Object(B.jsxs)(x.a,{children:[Object(B.jsx)(E.a,{children:Object(B.jsx)(v.a,{message:U("heading.select"),options:{objectType:t}})}),Object(B.jsx)(C.a,{onClick:()=>e()})]}),Object(B.jsx)(O.a,{children:this.renderBody()}),Object(B.jsxs)(y.a,{children:[Object(B.jsx)(F.a,{disabled:!!n,title:Object(B.jsx)(v.a,{message:U("selectDisableTooltip"),options:{objectType:t}}),children:Object(B.jsx)(m.a,{use:"primary",onClick:()=>this.handleSelect(),disabled:!n,"data-test-id":"confirm-select-button",children:Object(B.jsx)(v.a,{message:U("selectButton")})})}),Object(B.jsx)(m.a,{use:"secondary",onClick:()=>e(),children:Object(B.jsx)(v.a,{message:U("cancelButton")})})]})]})}}var q=n(281),G=n(1340).c,W=n(1305);function z(e){if(e instanceof Error)throw e;return e}var $=n(607),K=n(758),Y=n(434);const X="lineiteminformation";var J=n(1341),Q=n(673),Z=n(1342),ee=n(546),te=n(181);ee.a.implement(Array,e=>e.length);ee.a.implementInherited(te.Iterable,e=>e.count());ee.a.implement(Object,e=>Object.keys(e).length);ee.a.implement(String,e=>e.length);ee.a.implement(Number,e=>e);var ne=ee.a;ee.f.implement(Array,(e,t)=>t.hasOwnProperty(e));ee.f.implementInherited(te.Iterable,(e,t)=>t.has(e));ee.f.implement(Object,(e,t)=>t.hasOwnProperty(e));var re=ee.f,ie=n(674);const oe=()=>({});ee.g.implement(Array,oe);ee.g.implement(Object,oe);ee.g.implementInherited(te.Collection,()=>Object(te.Map)());ee.g.implementInherited(te.Seq,()=>te.Seq.Keyed());var ae=ee.g,se=n(686),ce=n(545);function le(e,t){return Object(se.a)([],(e,n)=>{if(!e.length){e.push([t,n]);return e}const[r,i]=e[e.length-1],o=Object(ie.a)(i,r),a=void 0!==o||re(i,r)?o:ae(r);e.push([a,n]);return e},e)}function ue(e,t,n){if(0===ne(e))return t;const r=le(e,n);let i=t;for(;r.length>0;){const[e,t]=r.pop();i=Object(ce.a)(t,i,e)}return i}var de=n(2748),pe=Object(de.a)(ue),he=n(1344);function me(e,{useLegacyIdKey:t=!1}={}){if(!t)return"objectId";switch(e){case he.g:return"vid";case he.f:return"companyId";case he.h:return"dealId";default:return"objectId"}}function fe(e,t,{useLegacyIdKey:n=!1}={}){return Object(Q.a)(me(e,{useLegacyIdKey:n}),t)}function ge(e,t){if(void 0!==t)return Object(Z.a)(["properties",t,"value"],e)}function be(e,t,n){if(!e||!t)return e;let r=pe(["properties",t,"value"],n,e);r=pe(["properties",t,"name"],t,r);return r}const Oe="ip__ecomm_bridge__ecomm_synced",ye="hs_folder_id",je="ip__sync_extension__external_source_account_id",ve="ip__sync_extension__external_source_app_id",Ce="productinformation",xe="price",Ee="multi_currency_prices",Te="term",Se="billing";var Ie=n(2672);const we="crm",_e="communicator",Ne="settingsui",Ae="lists",De="products",ke="line-items",Pe="reporting",Re="tasks";var Fe=n(9),Le=n.n(Fe),Me=n(2592),Be=n(1352),Ue=n.n(Be),Ve=function(e){let t,n=!1;return function(...r){if(!n){t=e.apply(this,r);n=!0}return t}};class He{static track(e,t,n={},r,i){const{sendImmediate:o=!1}=n;(o?i:r).track(e,t)}}const qe={properties:{namespace:De},onError(e){console.error(e)},lastKnownEventProperties:["screen","subscreen"],debug:()=>Le.a.debug("customer-data-tracker")},Ge=Ve(()=>Object(Me.a)(Object.assign({events:Ue.a},qe))),We=Ve(()=>Object(Me.a)(Object.assign({bypassPool:!0,events:Ue.a},qe))),ze={init:e=>{Ge().setProperties(e);We().setProperties(e)},logImmediate:(e,t={},n={})=>{ze.log(e,t,Object.assign({},n,{sendImmediate:!0}))},log:(e,t={},n={sendImmediate:!1})=>{ze._log(e,t,n)},_log(e="",t={},n={sendImmediate:!1}){He.track(e,t,n,Ge(),We())}};var $e=ze,Ke=n(2818),Ye=n(2),Xe=n(30),Je=n.n(Xe),Qe=n(1),Ze=n.n(Qe),et=n(1345),tt={[et.i]:["companyId"],[et.j]:["vid"],[et.q]:["dealId"],[et.s]:["engagement","id"],[et.t]:["objectId"],[et.C]:["objectId"],[et.I]:["listId"],[et.K]:["objectId"],[et.L]:["objectId"],[et.T]:["engagement","id"],[et.U]:["objectId"],[et.W]:["domain"],[et.v]:["folderId"]},nt=n(547),rt=n(685),it=n(2770);function ot(e){return String(e)}const at=Object(nt.a)(void 0),st=Object(it.a)({args:[it.a.TYPE],name:"Identifiable#getId"});st.implement(null,at);st.implement(void 0,at);function ct(e){const t=st(e);return null==t?t:ot(t)}Object(rt.a)(st),Object(rt.a)(ct);const lt=Object.assign(Object(te.Record)({name:void 0,source:null,sourceId:null,timestamp:null,updatedByUserId:null,value:void 0,versions:Object(te.List)()},"PropertyValueRecord"),{fromJS:e=>e&&"object"==typeof e?lt(Object(te.fromJS)(e)):e});var ut=lt,dt=n(665);const pt="-",ht=(e,t)=>{if(e&&t)return e.getIn(["properties",t,"value"])},mt=e=>{const t=e.join(" ").trim();return""===t?null:t},ft=(e,{primary:t,secondary:n})=>{t||(t=[]);n||(n=[]);const r=ht.bind(null,e);return{primary:"function"==typeof t?t(e):mt(t.map(r).filter(dt.a)),secondary:"function"==typeof n?n(e):mt(n.map(r).filter(dt.a))}};function gt({idKey:e,recordName:t,objectType:n,defaults:r},i={}){const o=Object(te.Record)(r,t),a=Object.assign(o,{_idKey:e,_objectType:n,toString(e){if(!e)return pt;const{primary:t,secondary:n}=ft(e,i);return t||n||pt},toStringExpanded(e){if(!e)return pt;const{primary:t,secondary:n}=ft(e,i);let r="";if(t){r=t;return n?`${r} (${n})`:r}return n||pt},fromJS(e){if(null==e)return e;let t=Object(te.fromJS)(e);t.has("properties")&&(t=t.update("properties",e=>e.map(ut.fromJS)));return a(t)}});st.implement(a,Object(Z.a)(e));return a}var bt=gt({idKey:tt[et.q],objectType:et.q,recordName:"DealRecord",defaults:{associations:Object(te.Map)(),dealId:null,imports:Object(te.List)(),isDeleted:!1,portalId:null,properties:Object(te.Map)()}},{primary:["dealname"]}),Ot=gt({idKey:tt[et.C],objectType:et.C,recordName:"LineItemRecord",defaults:{properties:Object(te.Map)(),objectId:null,isNew:!1}},{primary:["name"]}),yt=n(2819),jt=n(554),vt=gt({idKey:tt[et.K],objectType:et.K,recordName:"ProductRecord",defaults:{properties:Object(te.Map)(),objectId:null}},{primary:["name"]});const Ct=gt({idKey:tt[et.v],objectType:et.v,recordName:"FolderRecord",defaults:{folderId:null,objectTypeId:null,portalId:null,name:"",createDate:null,createdBy:null,updatedBy:null,properties:Object(te.Map)()}},{primary:["name"]});Ct.fromJS=e=>{const t=Object.prototype.hasOwnProperty.call(e,"folderId")?String(e.folderId):null;return Ct(Object.assign({},e,{folderId:t}))};Object(Z.a)(["homeCurrency","currencyCode"]),Object(Z.a)(["isMulticurrencyActive"]),Object(Z.a)(["currency","isMulticurrencyActive"]),Object(Z.a)(["currency","homeCurrency","currencyCode"]),Object(Z.a)(["exchangeRates"]);const xt=Object(jt.a)(e=>{if(!e)return{};const t=e.reduce((e,t)=>e.concat(t.allPropertyDefinitions),[]),n={};t.forEach(e=>{n[e.name]=yt.a.fromJS(e)});return n});function Et(e,t=(e=>e)){const n=new Map;return e?e.reduce((e,n,r)=>e.set(n.name,{displayName:n.label,displayOrder:n.displayOrder||r,name:n.name,hubspotDefined:n.hubspotDefined,properties:n.allPropertyDefinitions.map(t)}),n):n}et.q,et.C,et.K;const Tt="crm/v3/objects/products";function St(e){return Je.a.get(`${Tt}/${encodeURIComponent(e)}?idProperty=${J.x}`)}const It="cpq:frontend-term-frequency-validation",wt="commerce:products:revealNewFolderProperty",_t="commerce:products:weeklybilling",Nt="hs_optional",At={user:{scopes:[]},gates:[],portal:{}},Dt=Object(r.createContext)(At);var kt=n(29);const Pt=e=>{const{gated:t,ungated:n}=Object(kt.parse)(e.substring(1)),r={};n&&(Array.isArray(n)?n:[n]).reduce((e,t)=>{t&&(e[t]=!0);return e},r);t&&(Array.isArray(t)?t:[t]).reduce((e,t)=>{t&&(e[t]=!1);return e},r);return r},Rt=(e,t,n=Pt(window.location.search))=>{const r=n[e];return void 0!==r?r:t};function Ft(e={},t){const{gates:n=[]}=e;return Rt(t,n.includes(t))}const Lt=(...e)=>ge(...e);function Mt(e){return""===e?null:e}function Bt(e){if(null===e)return null;const t=Number(e);return isNaN(t)?null:t}function Ut(e){const t=Number(e);return isNaN(t)?0:t}function Vt(e){if("number"==typeof e)return e;const t=Number(e);return isNaN(t)?R.a.parseNumber(e):t}var Ht=Bt;n(1353);function qt(e){return e?Kt(e)?zt(e):$t(e):e}function Gt(e){return Kt(e)?et.C:et.K}function Wt(e){return Kt(e)?he.m:he.r}function zt(e){if(!e||!Yt(e))return e;const{isNew:t,objectId:n,properties:r}=e;return{isNew:t,objectId:n,properties:r.toJS()}}function $t(e){if(!e||!Yt(e))return e;const{objectId:t,properties:n}=e;return{objectId:t,properties:n.toJS()}}function Kt(e){return void 0!==e.isNew}function Yt(e){return te.Map.isMap(e.properties)}function Xt(e){const{objectId:t}=qt(e);return Vt(t)}n(549),n(550);const Jt=6;var Qt=n(516);function Zt(e){return String(e).includes("e")}function en(e,t=2){return Zt(e)?Number(Object(Qt.b)(e,{precision:t})):Number(`${Math.round(Number(`${e}e${t}`))}e-${t}`)}function tn(e={},t){if(!t)return 2;const n=e[t];return n?n.alternative_decimal_digits||n.decimal_digits:2}const nn="bizops-interaction",rn="crm-api-error",on="crm-debug",an="crm-onboarding",sn="index-interaction",cn="internal-crm-tracking",ln="record-interaction",un="settings-interaction";Object(te.fromJS)({[ln]:{CONTACT:"Contact",COMPANY:"Company",DEAL:"Deal",QUOTE:"Quote",TICKET:"Ticket",TASK:"Tasks",LEAD:"Lead"},[sn]:{CONTACT:"Contact index",COMPANY:"Company index",DEAL:"Deal Index",TICKET:"Ticket index",TASK:"Tasks",VISIT:"Visits"},[cn]:{CONTACT:"Contacts",COMPANY:"Companies",DEAL:"Deals",TASK:"Tasks",VISIT:"Visits"},[un]:{CONTACT:"Contact",COMPANY:"Company",DEAL:"Deal"},[an]:{CONTACT:"Contact",COMPANY:"Company",DEAL:"Deal",QUOTE:"Quote",TASK:"Tasks",SETTINGS:"Settings"},[rn]:{CONTACT:"Contact",COMPANY:"Company",DEAL:"Deal",TASK:"Tasks"},[on]:{CONTACT:"Contact",COMPANY:"Company",DEAL:"Deal",TASK:"Tasks"},[nn]:{CONTACT:"Contact",COMPANY:"Company",DEAL:"Deal"}});n(1317);var dn=n(1387),pn=n.n(dn);const hn={properties:{namespace:Ae},onError(e){console.error(e)},lastKnownEventProperties:["screen","subscreen"],debug:()=>Le.a.debug("customer-data-tracker")},mn=Ve(()=>Object(Me.a)(Object.assign({},hn,{events:pn.a}))),fn=Ve(()=>Object(Me.a)(Object.assign({bypassPool:!0,events:pn.a},hn)));var gn=n(1388),bn=n.n(gn);const On={properties:{namespace:Ne},onError(e){console.error(e)},lastKnownEventProperties:["screen","subscreen"],debug:()=>Le.a.debug("customer-data-tracker")},yn=Ve(()=>Object(Me.a)(Object.assign({},On,{events:bn.a}))),jn=Ve(()=>Object(Me.a)(Object.assign({bypassPool:!0,events:bn.a},On)));var vn=n(1389),Cn=n.n(vn);const xn={properties:{namespace:Re},onError(e){console.error(e)},lastKnownEventProperties:["screen","subscreen"],debug:()=>Le.a.debug("customer-data-tracker")},En=Ve(()=>Object(Me.a)(Object.assign({},xn,{events:Cn.a}))),Tn=Ve(()=>Object(Me.a)(Object.assign({bypassPool:!0,events:Cn.a},xn)));var Sn=n(1390),In=n.n(Sn);const wn="tracker",_n="trackerSendImmediate",Nn=Ve(()=>Object(Me.a)({events:In.a,properties:{namespace:we},onError(e){console.error(e)},lastKnownEventProperties:["screen","subscreen"],debug:()=>Le.a.debug("customer-data-tracker")})),An=Ve(()=>Nn().clone({bypassPool:!0}));Ve(()=>({[we]:{[wn]:Nn,[_n]:An},[Ne]:{[wn]:yn,[_n]:jn},[Ae]:{[wn]:mn,[_n]:fn},[Re]:{[wn]:En,[_n]:Tn}}));var Dn=n(1391),kn=n.n(Dn);const Pn={properties:{namespace:ke},onError(e){console.error(e)},lastKnownEventProperties:["screen","subscreen"],debug:()=>Le.a.debug("customer-data-tracker")};Ve(()=>Object(Me.a)(Object.assign({},Pn,{events:kn.a}))),Ve(()=>Object(Me.a)(Object.assign({bypassPool:!0,events:kn.a},Pn)));var Rn=n(1392),Fn=n.n(Rn);const Ln={properties:{namespace:Pe},onError(e){console.error(e)},lastKnownEventProperties:["screen","subscreen"],debug:()=>Le.a.debug("customer-data-tracker")};Ve(()=>Object(Me.a)(Object.assign({},Ln,{events:Fn.a}))),Ve(()=>Object(Me.a)(Object.assign({bypassPool:!0,events:Fn.a},Ln)));var Mn=n(1393),Bn=n.n(Mn);const Un={properties:{namespace:_e},onError(e){console.error(e)},lastKnownEventProperties:["screen","subscreen"],debug:()=>Le.a.debug("customer-data-tracker")};Ve(()=>Object(Me.a)(Object.assign({},Un,{events:Bn.a}))),Ve(()=>Object(Me.a)(Object.assign({bypassPool:!0,events:Bn.a},Un)));var Vn=n(553);function Hn(e,t,...n){Object(Vn.a)(e);return e.bind(null,t,...n)}var qn=n(695);const Gn=(e,t,n={},...r)=>{!R.a.lookup(t)&&n._defaultMessage&&R.a.lookup(n._defaultMessage)&&(t=n._defaultMessage);if(R.a.lookup(t))t=Object(B.jsx)(q.a,{message:t,options:n});else if(!Le.a.deployed()){console.warn("Alert key not translated: ",t);n._defaultMessage&&console.warn("Alert default key not translated: ",n._defaultMessage)}qn.a.addAlert(Object.assign({message:t,type:e,"data-alert-type":e},...r))};Hn(Gn,"danger"),Hn(Gn,"warning"),Hn(Gn,"success"),Hn(Gn,"danger");function Wn(e){return e.reduce((e,t)=>{const n=Lt(t,"hs_tax_rate_group_id");n&&e.add(n);return e},new Set)}var zn=n(2685),$n=n(2826);const Kn="-";et.W,et.j;n(682);function Yn(e,t){return e.hasIn(["properties",t,"value"])}J.A,J.B,J.a,J.b,J.o,J.p,J.d,J.e;var Xn=n(1394),Jn=n(1395);const Qn=e=>{if(!e)return null;return R.a.moment.duration(e.toUpperCase()).asMonths()};function Zn(e){return e?`P${e}M`:""}function er(e){const t=ge(e,J.C),n=ge(e,J.w);if(!n)return 1;if(Object(Jn.g)(n)){const e=Object(Jn.f)(t);if(!e)return null;const r=Object(Jn.e)(n);return Math.ceil(e/r)}const r=Qn(t);if(!r)return null;const i=Object(Jn.b)(n);return Math.ceil(r/i)}function tr(e){return nr(Lt(Kt(e)?zt(e):e,J.w))}function nr(e){return Xn.c.includes(e)}const rr="ip__shopify__vendor",ir="ip__shopify__source_name",or="ip__shopify__title",ar={QA:"1161155",PROD:"51381"},sr={QA:"1165378",PROD:"188574"};function cr(e){const t=qt(e),n=Lt(t,"hs_sync_amount");return!["",null,void 0].includes(n)}function lr(e){const t=qt(e);return!Lt(t,je)&&!Lt(t,Oe)}function ur(e){if(e instanceof bt)return Yn(e,ir);const t=qt(e),n=Gt(e);return n===et.K?rr in t.properties:n===et.C&&or in t.properties}function dr(e){const t=Le.a.isQa()?"QA":"PROD",n=qt(e),r=Lt(n,ve);return!lr(n)&&r!==ar[t]&&r!==sr[t]}function pr(e){const t=qt(e);return ur(t)&&"amount"in t.properties?"amount":J.t}const hr={[J.q]:e=>Lt(e,J.q),[J.j]:e=>Lt(e,J.j),[J.k]:e=>Lt(e,J.k),[J.v]:e=>Bt(Lt(e,J.v)),[J.t]:e=>Bt(Lt(e,pr(e))),[J.l]:e=>Bt(Mt(Lt(e,J.l))),[J.m]:e=>Bt(Mt(Lt(e,J.m))),[J.D]:e=>Bt(Lt(e,J.D)),[J.u]:e=>Lt(e,J.u),[J.w]:e=>Lt(e,J.w)||"",[J.x]:e=>Lt(e,J.x),[J.C]:e=>Lt(e,J.C)||"",[J.y]:e=>Bt(Lt(e,J.y)),[J.n]:e=>Lt(e,J.n),[J.s]:e=>Bt(Lt(e,J.s)),hs_tax_rate:e=>Bt(Lt(e,"hs_tax_rate")),hs_recurring_billing_terms:e=>Lt(e,"hs_recurring_billing_terms")},mr={[J.q]:"name",[J.j]:"createDate",[J.k]:"description",[J.v]:"quantity",[J.t]:"price",[J.l]:"discount",[J.m]:"discountPercentage",[J.D]:"unitCost",[J.u]:"productId",[J.w]:"recurringBillingFrequency",[J.x]:"sku",[J.C]:"term",[J.y]:"startDate",[J.n]:"lineItemCurrencyCode",[J.s]:"order",hs_tax_rate:"taxRate",hs_recurring_billing_terms:"recurringBillingTerms"},fr=Object.keys(mr);function gr(e,...t){0===t.length&&(t=fr);const n=qt(e);return 1===t.length?hr[t[0]]?hr[t[0]](n):Lt(n,t[0]):t.reduce((e,t)=>hr[t]?Object.assign({},e,{[mr[t]]:hr[t](n)}):Object.assign({},e,{[t]:Lt(n,t)}),{})}var br=Object(jt.a)(gr);const Or="percentage",yr="fixed",jr=(Object(jt.a)(e=>[{text:"%",value:Or},{text:e,value:yr}]),e=>null!=e),vr=(e,t)=>jr(e)?yr:jr(t)?Or:null,Cr=(e,t,n)=>n===yr?e:n===Or?t:0,xr=(e,t,n=yr)=>{if(e){if(!t)return e;if(n===yr)return e-t;if(n===Or)return e-e*t/100}return e};const Er=({price:e=0,unitCost:t=0,quantity:n=1,decimalDigits:r=2,maxFractionDigits:i=0})=>{const o=Math.max(r,i),a=en(n*t,o);return en(e-a,o)};function Tr(e){return!e||0===ne(e)}const Sr=e=>null!=e?String(e):e,Ir="hs_created_by";function wr(e){return Ut(ge(e,"price"))<0}const _r=new Set([J.s,J.j,Ir]);new Set([..._r,J.x]);function Nr(e){return cr(e)||wr(e)}function Ar(e,t){const n=zt(t),r=Lt(n,J.n);return!Nr(n)&&!!r&&r!==e}function Dr(e,t,n=!1){return Kt(e)||!n?J.t:Object(J.G)(t)}function kr(e,t,n=!1){const r=qt(e),i=Dr(r,t,n);return Bt(Lt(r,i))}var Pr=n(1396),Rr=n(28);const Fr=Object(Pr.a)(()=>`${Object(Rr.getFullUrl)("app")}/settings/${Ze.a.get()}/account-defaults/multicurrency`),Lr=(Object(Pr.a)(()=>`/settings/${Ze.a.get()}/sales/products`),Object(Pr.a)(()=>`/contacts/${Ze.a.get()}/objects/0-7`)),Mr=(Object(Pr.a)(()=>Lr()+"?createNewObject=0-7"),Object(Pr.a)(()=>`/settings/${Ze.a.get()}/sales/products/taxRates`)),Br=Object.freeze({[Ce]:[J.q,J.k,ye,J.j],[X]:[J.q,J.k,J.j],[J.t]:[J.t,J.l,J.m,J.w,J.z,J.D],[Te]:[J.C,J.y],[Se]:[J.C,J.i,J.r,J.y]});function Ur(e){return Object.keys(Br).includes(e)}var Vr=n(2823);function Hr(e,t){const n=Ur(e.name)?Br[e.name]:[];return[...new Set(e.properties.filter(e=>!n.includes(e))).values()].reduce((e,n)=>{const r=t.get(n);r&&!r.hubspotDefined&&e.push(r);return e},[])}const qr=e=>e.hubspotDefined?Object(Vr.b)(e.displayName):e.displayName,Gr=(Object(jt.a)((e,t)=>new Map(e&&[...e].filter(([e,n])=>t?n.hubspotDefined===t:!n.hubspotDefined))),e=>!!e&&e.size>0&&[...e.values()].some(e=>Boolean(Object(Ie.t)(e)))),Wr="commerce-tax-rates/v1";function zr(e){return Je.a.post(Wr+"/tax-rate/batch",{data:e})}function $r(e,t,n){return!n||!t||Object(Jn.a)(e,t)}function Kr(e,t){if(!t)return!0;const n=qt(e),r=Lt(n,J.w);return $r(Lt(n,J.C)||"",r,t)}const Yr=Object(jt.a)(async e=>{if(!e.length)return!1;return(await zr(e)).some(e=>!e.active)},e=>e.join("-"));async function Xr(e,t){const n=[],r=e.map(e=>qt(e));r.every(e=>Kr(e,t))||n.push({errorMessage:R.a.text("lineItems.validation.termBillingFrequency")});const i=Array.from(Wn(r));await Yr(i)&&n.push({errorMessage:R.a.text("lineItemTaxes.validation.taxRateError")});return n}var Jr=n(287),Qr=n.n(Jr);function Zr(e,t){let n=t;for(let t=e.length-1;t>=0;t--)n=e[t](n);return n}function ei(...e){e.forEach(Vn.a);return Zr.bind(null,e)}var ti=n(41),ni=n.n(ti),ri=n(664),ii=n(666),oi=n(670);const ai=["referenceResolverContext","forwardedRef"],si=(e,t,n={})=>{class i extends r.Component{render(){const n=this.props,{referenceResolverContext:r,forwardedRef:i}=n,o=Object(Ye.a)(n,ai);return Object(B.jsx)(t,Object.assign({ref:i},o,e(r,o)))}}i.propTypes=Object.assign({},ii.b,{forwardedRef:ni.a.oneOfType([ni.a.func,ni.a.shape({current:ni.a.object})])});const o=Object(oi.a)(i);o.displayName=Object(ri.a)("ConnectReferenceResolvers",t);o.WrappedComponent=t;if(n.forwardRef){const e=Object(r.forwardRef)((e,t)=>Object(B.jsx)(o,Object.assign({},e,{forwardedRef:t})));e.WrappedComponent=o.WrappedComponent;return e}return o};var ci=Object(de.a)(si),li=n(688),ui=n(2752),di=n(501),pi=n(677),hi=n(679),mi=n(2751),fi=n(668),gi=n(2655),bi=n(687),Oi=n(1397),yi=n(2658);const ji=e=>{const t=Object.assign({},yi.a.toOption(e));e.archived&&(t.help=R.a.text("customerDataReferenceUiComponents.archived"));return t};var vi=n(313);const Ci=e=>e.getIn(["referencedObject","hubspotDefined"])?e.update("label",Vr.b):e,xi={filter:ni.a.func,innerRef:ni.a.any,inputRef:vi.a,onChange:ni.a.func.isRequired,optionFormatter:ni.a.func.isRequired,options:ni.a.arrayOf(di.c.isRequired),readOnly:ni.a.bool,resolver:fi.a.isRequired,value:ni.a.oneOfType([ni.a.string,ni.a.arrayOf(ni.a.string.isRequired)]),multi:ni.a.bool},Ei={options:[],optionFormatter:ji},Ti={options:[]};class Si extends r.Component{constructor(){super();this.handleOptionsChange=e=>{const{filter:t,optionFormatter:n}=this.props;if(Object(bi.c)(e)){const r=t?e.filter(t):e;this.setState({options:r.map(Ci).sort((e,t)=>e.getIn(["referencedObject","displayOrder"],-1)-t.getIn(["referencedObject","displayOrder"],-1)).map(n).toArray()})}};this.state=Ti;this.referenceAtom=null}componentDidMount(){this.configureResolver(this.props)}componentDidUpdate(e){if(this.props.resolver!==e.resolver){this.referenceAtom&&Object(mi.g)(this.referenceAtom,this.handleOptionsChange);this.configureResolver(this.props)}}componentWillUnmount(){this.referenceAtom&&Object(mi.g)(this.referenceAtom,this.handleOptionsChange)}configureResolver(e){const{resolver:t}=e;this.referenceAtom=t.all();Object(mi.h)(this.referenceAtom,this.handleOptionsChange);this.handleOptionsChange(Object(mi.b)(this.referenceAtom))}getOptions(){const{options:e}=this.props;return e.concat(this.state.options)}render(){const e=Object(Oi.a)(["innerRef","onCancel","onSecondaryChange"],this.props);return Object(B.jsx)(gi.a,Object.assign({},e,{anchorType:"button",inputRef:this.props.inputRef,ref:this.props.innerRef,options:this.getOptions()}))}}Si.propTypes=xi;Si.defaultProps=Ei;var Ii=Object(r.forwardRef)((e,t)=>Object(B.jsx)(Si,Object.assign({},e,{innerRef:t})));const wi=["options"],_i={innerRef:ni.a.any,inputRef:vi.a,onChange:ni.a.func.isRequired,options:ni.a.arrayOf(di.c.isRequired),value:ni.a.oneOfType([ni.a.string,ni.a.arrayOf(ni.a.string.isRequired)])},Ni={options:[]},Ai=Object(r.forwardRef)((e,t)=>{const{options:n}=e,r=Object(Ye.a)(e,wi);return Object(B.jsx)(gi.a,Object.assign({},r,{ref:t,options:n}))});Ai.propTypes=_i;Ai.defaultProps=Ni;var Di=Ai,ki=n(2753),Pi=n(669);const Ri=e=>e.replace(/^\s+|\s+$/g,""),Fi=gi.a.stripDiacritics,Li=e=>null!=e&&""!==e;var Mi=(e,t,n,r)=>{r.ignoreAccents&&(t=Fi(t));r.ignoreCase&&(t=t.toLowerCase());r.trimFilter&&(t=Ri(t));n&&(n=n.map(e=>e[r.valueKey]));return e.filter(e=>{if(n&&n.indexOf(e[r.valueKey])>-1)return!1;if(r.filterOption)return r.filterOption.call(void 0,e,t);if(!t)return!0;const i=e[r.valueKey],o=e[r.labelKey],a=e.help,s=Li(i),c=Li(o),l=Li(a);if(!s&&!c)return!1;let u=s?String(i):null,d=c?String(o):null,p=l?String(a):null;if(r.ignoreAccents){u=s&&Fi(u);d=c&&Fi(d);p=l&&Fi(p)}if(r.ignoreCase){u=s&&u.toLowerCase();d=c&&d.toLowerCase();p=l&&p.toLowerCase()}return"start"===r.matchPos?u&&u.substr(0,t.length)===t||d&&d.substr(0,t.length)===t||p&&p.substr(0,t.length)===t:u&&u.indexOf(t)>=0||d&&d.indexOf(t)>=0||p&&p.indexOf(t)>=0})};const Bi=["open","defaultOpen","onOpenChange","onSecondaryChange","onCancel","requestOptions","optionFormatter","minimumSearchLength","searchCount","onTracking","innerRef"],Ui=Object(ki.a)(e=>e());function Vi(e){const t={};return e.filter(({value:e,options:n})=>{if(n)return!0;if(t[e])return!1;t[e]=!0;return!0})}const Hi=e=>Object.assign({},ji(e),{record:e}),qi={autoload:ni.a.bool.isRequired,ButtonContent:ni.a.func,filterOptions:ni.a.oneOfType([ni.a.func,ni.a.bool]),innerRef:ni.a.any,inputRef:vi.a,menuWidth:ni.a.oneOfType([ni.a.number,ni.a.oneOf(["auto"])]),minimumSearchLength:ni.a.number.isRequired,multi:ni.a.bool,onChange:ni.a.func.isRequired,onOpenChange:ni.a.func,open:ni.a.bool,optionFormatter:ni.a.func.isRequired,options:ni.a.arrayOf(di.c.isRequired),placeholder:ni.a.node,readOnly:ni.a.bool.isRequired,requestOptions:ni.a.object,resolver:Pi.a.isRequired,searchCount:ni.a.number.isRequired,searchDebounceTimeout:ni.a.number.isRequired,showTags:ni.a.bool,value:ni.a.oneOfType([ni.a.string,ni.a.arrayOf(ni.a.string.isRequired)]),defaultOpen:ni.a.bool},Gi={autoload:!0,minimumSearchLength:0,optionFormatter:Hi,options:[],readOnly:!1,searchCount:10,searchDebounceTimeout:300,showTags:!0,filterOptions:Mi,defaultOpen:!1};class Wi extends r.Component{constructor(e){super();this.handleInputChange=({target:{value:e}})=>{this.setState({value:e})};this.handleLoadOptionsSearch=(e,t)=>{if(!this.isOpen())return;const{minimumSearchLength:n,optionFormatter:r,requestOptions:i,resolver:o,searchCount:a}=this.props;if(e.length<n){const e=Vi(this.getOptions());t(null,{options:e,pagination:{hasMore:!1,length:e.length}});return}if(!this.searchHasMore&&!1!==this.props.filterOptions&&0===e.indexOf(this.prevSearchValue)&&this.prevSearchResult){t(null,this.createSearchResult());return}const s=this.nextSearchId(),c=o.search(Object.assign({query:e,count:a,offset:this.prevSearchValue===e&&this.prevSearchResult&&this.prevSearchResult.pagination.searchOffset||0,nextCursor:this.prevSearchValue===e&&this.prevSearchResult&&this.prevSearchResult.pagination.nextCursor||null},i)),l=n=>{if(Object(bi.a)(n)){this.unwatchSearchAtom(s);t(null,this.prevSearchResult?this.createSearchResult():null);return}if(!Object(bi.c)(n))return;const i=Object(Q.a)("hasMore",n),o=Object(Q.a)("offset",n),a=Object(Q.a)("results",n),c=Object(Q.a)("total",n),l=Object(Q.a)("nextCursor",n),u=Vi((this.prevSearchValue===e&&this.prevSearchResult&&this.prevSearchResult.options||[]).concat(a.map(r).toArray()));this.searchHasMore=i;this.prevSearchValue=e;this.prevSearchResult={options:u,pagination:{hasMore:i,length:c,offset:c?c-u.length:void 0,searchOffset:o,nextCursor:l}};this.unwatchSearchAtom(s);t(null,this.createSearchResult())},u=Object(mi.b)(c);Object(bi.c)(u)?l(u):this.watchSearchAtom(s,c,l)};this.handleLoadOptions=(e,t)=>{e?this.handleLoadOptionsSearchDebounced(e,t):this.handleLoadOptionsSearch(e,t)};this.handleOpenChange=e=>{const{onOpenChange:t}=this.props,{value:n}=e.target;this.setState({open:n});t&&t(e)};this.handleValueOptionReferenceResolved=e=>{const{optionFormatter:t}=this.props;Object(bi.c)(e)&&this.setState(n=>({valueOptions:n.valueOptions.concat(t(e))}))};this.handleLoadOptionsSearchDebounced=Object(Ke.a)(e.searchDebounceTimeout,this.handleLoadOptionsSearch);this.prevSearchResult=null;this.prevSearchValue="";this.unwatchSearchAtoms={};this.searchHasMore=!0;this.watchedReferenceAtoms=[];this.searchId=0;this.state={open:e.defaultOpen,valueOptions:[]}}componentDidMount(){const{resolver:e,value:t,options:n}=this.props;this.loadCurrentValueOptions(e,t,n)}componentDidUpdate(e){const{resolver:t,value:n,options:r}=this.props;n!==e.value&&this.loadCurrentValueOptions(t,n,r)}componentWillUnmount(){this.unwatchAllSearchAtoms();this.watchedReferenceAtoms.forEach(e=>{Object(mi.g)(e,this.handleValueOptionReferenceResolved)})}nextSearchId(){return String(++this.searchId)}getOptions(e=[]){const{options:t}=this.props,{valueOptions:n}=this.state;return t.concat(n,e)}isOpen(){return void 0!==this.props.open?this.props.open:this.state.open}createSearchResult(){return Object.assign({},this.prevSearchResult,{options:Vi(this.getOptions(this.prevSearchResult.options))})}watchSearchAtom(e,t,n){this.unwatchSearchAtoms[e]=()=>Object(mi.g)(t,n);Object(mi.h)(t,n)}unwatchSearchAtom(e){if(this.unwatchSearchAtoms[e]){this.unwatchSearchAtoms[e]();delete this.unwatchSearchAtoms[e]}}unwatchAllSearchAtoms(){Ui(this.unwatchSearchAtoms);this.unwatchSearchAtoms={}}loadCurrentValueOptions(e,t,n=[]){if(!t)return;const r=n.map(e=>e.value),i=Array.isArray(t)?t:[t];this.watchedReferenceAtoms.forEach(e=>{Object(mi.g)(e,this.handleValueOptionReferenceResolved)});this.watchedReferenceAtoms=i.filter(e=>-1===r.indexOf(e)).map(t=>e.byId(t));this.watchedReferenceAtoms.forEach(e=>{Object(mi.h)(e,this.handleValueOptionReferenceResolved);this.handleValueOptionReferenceResolved(Object(mi.b)(e))})}getButtonContent(){return this.props.showTags?null:this.props.ButtonContent}render(){const{value:e,placeholder:t,filterOptions:n}=this.props,r=Object(Oi.a)(Bi,this.props);return Object(B.jsx)(gi.a,Object.assign({},r,{anchorType:"button",cache:null,filterOptions:n,loadOptions:this.handleLoadOptions,onInputValueChange:this.handleInputChange,onOpenChange:this.handleOpenChange,ButtonContent:this.getButtonContent(),inputRef:this.props.inputRef,open:this.isOpen(),options:this.getOptions(),placeholder:t,ref:this.props.innerRef,value:e,menuWidth:this.props.menuWidth}))}}Wi.propTypes=qi;Wi.defaultProps=Gi;var zi=Object(r.forwardRef)((e,t)=>Object(B.jsx)(Wi,Object.assign({},e,{innerRef:t}))),$i=n(667),Ki=n(298),Yi=n(678);function Xi(e){return te.Iterable.isKeyed(e)&&!te.Map.isMap(e)&&!te.Seq.isSeq(e)}const Ji=Z.a.operation;function Qi(e,t,n){return"function"==typeof e?e(n,t):!0===e?Object(ie.a)(t,n):Array.isArray(e)?Ji(e,n):Object(ie.a)(e,n)}function Zi(e,t){const n=Xi(t)?Object(te.Map)():new t.constructor;return Object(se.a)(n,(e,n,r)=>Object(ce.a)(r,Qi(n,r,t),e),e)}var eo=Object(de.a)(Zi);const to="[`~!@#$%^&*()\\\\\\-_=+[{}\\]\\|;:'\",<.>/?\\s]+",no=new RegExp(to,"g");function ro(e){return new RegExp(e.trim().toLowerCase().replace(no,to),"i")}function io(e){if(1===e.length){let t,n;return function(r){if(void 0===t||!Object(te.is)(r,t)){n=e(r);t=r}return n}}let t,n;return function(...r){const i=Object(te.Seq)(r);if(void 0===t||!Object(te.is)(i,t)){n=e(...r);t=i}return n}}const oo=io(ro),ao=(e,t)=>{const n=gi.a.stripDiacritics(t),r=oo(n),i=e.text&&gi.a.stripDiacritics(e.text),o=e.help&&("string"==typeof e.help?gi.a.stripDiacritics(e.help):void 0);return Boolean(i&&r.test(i)||o&&r.test(o))},so=Object(pi.a)(Object(ui.a)(eo({help:e=>e.hubspotDefined?Object(Vr.a)(e.label,e.description):e.description,icon:!0,text:e=>e.hubspotDefined?Object(Vr.b)(e.label):e.label,value:!0,disabled:!0})),Yi.a),co={inputRef:vi.a,innerRef:ni.a.any,multi:ni.a.bool,onChange:ni.a.func.isRequired,options:ni.a.oneOfType([ni.a.arrayOf(di.c.isRequired).isRequired,Object(hi.listOf)(Object(hi.recordOf)({label:ni.a.string.isRequired,value:ni.a.string.isRequired})).isRequired]).isRequired,resolver:$i.a,value:ni.a.oneOfType([ni.a.string,Object(hi.listOf)(ni.a.string.isRequired)])},lo={options:[]};class uo extends r.Component{constructor(...e){super(...e);this.handleChange=e=>{const{multi:t,onChange:n}=this.props;n(t?Object(Ki.a)(Object(te.List)(e.target.value)):e)}}getOptions(){const{options:e}=this.props;return!e||Array.isArray(e)?e:so(e)}getReferenceEnumComponent(){const{resolver:e}=this.props;return e?e.search?zi:Ii:Di}getValue(){const{multi:e,value:t}=this.props;return e?t?t.toArray():[]:t}render(){const e=this.getReferenceEnumComponent(),t=Object(Oi.a)(["getProperty","objectType","showError","showPlaceholder","subjectId","secondaryChanges","onSecondaryChange","onChangeMultiple","innerRef"],this.props);return Object(B.jsx)(e,Object.assign({},t,{anchorType:"button",filterOption:ao,inputRef:this.props.inputRef,onChange:this.handleChange,options:this.getOptions(),ref:this.props.innerRef,value:this.getValue()}))}}uo.propTypes=co;uo.defaultProps=lo;var po=Object(r.forwardRef)((e,t)=>Object(B.jsx)(uo,Object.assign({},e,{innerRef:t}))),ho=n(55),mo=n(663),fo=n(671);const go="folders/v1/folders",bo=(e,t)=>n=>{const r=`${go}/${t}/batch`;return e.get(r,{query:{folderId:n}}).then(e=>{const t=n.map(t=>new yi.a({id:String(t),label:e[t].name||String(t),referencedObject:Object(te.fromJS)(e[t])}));return Object(te.List)(t)})},Oo=({httpClient:e})=>bo(e,"product"),yo=Oo({httpClient:Je.a}),jo=Object(de.a)(({getId:e,getLabel:t,getIcon:n=Object(nt.a)(void 0),getDescription:r=Object(nt.a)(void 0),getDisabled:i=Object(nt.a)(void 0),getArchived:o=Object(nt.a)(void 0)},a)=>Object(te.List)(a.map(a=>new yi.a({id:String(e(a)),label:t(a),icon:n(a),description:r(a),referencedObject:Object(te.fromJS)(a),disabled:i(a),archived:o(a)})))),vo=Z.a.operation;function Co(e,t){const n=ne(e);if(0===n)return!1;const r=vo(e.slice(0,-1),t);return void 0!==r&&re(e[n-1],r)}var xo=Object(de.a)(Co),Eo=n(1343);function To(e,t,n){return ue(e,t(Object(Eo.a)(e,n)),n)}var So=Object(de.a)(To),Io=n(1398),wo=Object(de.a)(Io.a),_o=n(675);const No=xo(["identityProfiles",0,"identity"]),Ao=Object(Z.a)(["identityProfiles",0,"identity"]),Do=Object(Z.a)(["identity-profiles",0,"identities"]),ko=Object(_o.a)(No,Ao,Do),Po=wo(e=>"EMAIL"===Object(Q.a)("type",e)),Ro=Object(ui.a)(Object(Q.a)("value")),Fo=e=>e.join(", "),Lo=e=>{const t=Object(Z.a)(["properties","firstname","value"],e)||"",n=Object(Z.a)(["properties","lastname","value"],e)||"",r=Object(Z.a)(["properties","email","value"],e),i=Object(zn.a)({firstName:t,lastName:n});return null!=i&&i.length>0?i:r||""},Mo=(Object(pi.a)(ko,Po,Ro,Fo),e=>Object(Z.a)(["properties","name","value"],e)||Object(Z.a)(["properties","domain","value"],e)||""),Bo="contacts/search/v1/search/",Uo=Object(de.a)((e,t)=>null==(t=t.toJS()).sorts||0===t.sorts.length?Object.assign({},t,{sorts:[{property:e,order:"ASC"}]}):t),Vo=Object(de.a)((e,t)=>({count:t.length,filterGroups:[{filters:[{property:e,operator:"IN",values:t}]}]})),Ho=Object(de.a)((e,t,n)=>{const{offset:r,total:i,[e]:o}=n,a=Object.prototype.hasOwnProperty.call(n,"has-more")?n["has-more"]:n.hasMore;return Object(te.Map)({hasMore:a,offset:r,count:i,results:jo(t,o)})}),qo=Object(de.a)((e,t,n,r)=>{const{[e]:i}=r,o=i.filter(e=>"true"===n(e));return Ho(e,t,Object.assign({},r,{[e]:o}))}),Go=Object(de.a)((e,t)=>t.find(t=>Object(Q.a)("name",t)===e)),Wo={[li.c]:{url:Bo+"contacts",adapter:{mapIds:Vo("vid"),mapQuery:e=>e.update("sorts",(e=Object(te.List)())=>e.push({property:"createdate",order:"DESC"}).push({property:"vid",order:"DESC"})).toJS(),mapResponse:Ho("contacts",{getId:Object(Q.a)("vid"),getLabel:Lo})}},[li.b]:{url:Bo+"companies",adapter:{mapIds:Vo("companyId"),mapQuery:Uo("createdate"),mapResponse:Ho("companies",{getDescription:Object(Z.a)(["properties","domain","value"]),getId:Object(Q.a)("company-id"),getLabel:Mo})}},[li.d]:{url:Bo+"deals",adapter:{mapIds:Vo("dealId"),mapQuery:Uo("createdate"),mapResponse:Ho("deals",{getId:Object(Q.a)("dealId"),getLabel:Object(Z.a)(["properties","dealname","value"])})}},[li.e]:{url:Bo+"deals?requestAction=EDIT",adapter:{mapIds:Vo("dealId"),mapQuery:Uo("createdate"),mapResponse:Ho("deals",{getId:Object(Q.a)("dealId"),getLabel:Object(Z.a)(["properties","dealname","value"])})}},[li.f]:{url:Bo+"engagements",adapter:{mapIds:Vo("engagement.id"),mapQuery:Uo("engagement.createdAt"),mapResponse:Ho("engagements",{getId:Object(Z.a)(["engagement","id"]),getLabel:e=>{const{metadata:{text:t,body:n,subject:r,title:i},engagement:{type:o}}=e;let a=t||n;["EMAIL","INCOMING_EMAIL","TASK"].includes(o)?a=r:"MEETING"===o&&i&&(a=i);const s=a?String(a).replace(/<\/?[^>]+(>|$)/g,"").replace(/&nbsp;/g," ").replace(/&#x27;/g,"'").replace(/&#8230;/,"…").replace(/&quot;/,'"'):"";return s.length>200?s.slice(0,200)+"…":s}})}},[li.l]:{url:Bo+"engagements",adapter:{mapIds:Vo("engagement.id"),mapQuery:e=>{const t=new te.Map({operator:"EQ",property:"engagement.type",value:"TASK"}),n=So(["filterGroups"],(e=new te.List)=>So([0,"filters"],(e=new te.List)=>e.concat([t]),e));return Uo("engagement.createdAt",n(e))},mapResponse:Ho("engagements",{getId:Object(Z.a)(["engagement","id"]),getLabel:e=>Object(Z.a)(["metadata","subject"],e)||Object(Z.a)(["metadata","body"],e),getDescription:e=>xo(["metadata","subject"],e)?Object(Z.a)(["metadata","body"],e):void 0})}},[li.m]:{url:Bo+"services/tickets?includeAllValues=true&allPropertiesFetchMode=latest_version",adapter:{mapIds:Vo("hs_ticket_id"),mapQuery:Uo("createdate"),mapResponse:Ho("results",{getId:Object(Q.a)("objectId"),getLabel:Object(Z.a)(["properties","subject","value"])})}},[li.h]:{url:Bo+"products?includeAllValues=true",adapter:{mapIds:Vo("objectId"),mapQuery:Uo("createdate"),mapResponse:Ho("results",{getId:Object(Q.a)("objectId"),getLabel:e=>Object(Z.a)(["properties","name","value"],e)||""})}},[li.i]:{url:"folders/v1/search/products?includeAllValues=true",adapter:{mapIds:Vo("folderId"),mapQuery:e=>{const t=2,n=new te.Map({operator:"EQ",property:"type",value:t}),r=So(["filterGroups"],(e=new te.List)=>So([0,"filters"],(e=new te.List)=>e.concat([n]),e));return Uo("createdate",r(e))},mapResponse:Ho("results",{getId:Object(Q.a)("folderId"),getLabel:Object(Q.a)("name")})}},[li.g]:{url:Bo+"lineitems?includeAllValues=true",adapter:{mapIds:Vo("objectId"),mapQuery:Uo("createdate"),mapResponse:Ho("results",{getId:Object(Q.a)("objectId"),getLabel:Object(Z.a)(["properties","name","value"])})}},[li.j]:{url:Bo+"quotes?includeAllValues=true",adapter:{mapIds:Vo("quoteId"),mapQuery:Uo("createdate"),mapResponse:Ho("results",{getId:Object(Q.a)("quoteId"),getLabel:ei(Object(Q.a)("value"),Go("hs_title"),Object(Q.a)("properties"))})}},[li.k]:{url:Bo+"deals",adapter:{mapIds:Vo("dealId"),mapQuery:Uo("createdate"),mapResponse:qo("deals",{getId:Object(Q.a)("dealId"),getLabel:Object(Z.a)(["properties","dealname","value"])},Object(Z.a)(["properties","is_open","value"]))}}},zo=((({httpClient:e})=>{Object(de.a)((t,n)=>{const{url:r,adapter:i}=Wo[t],o=i.mapIds(n);return e.post(r,{data:o}).then(i.mapResponse).then(Object(Q.a)("results"))})})({httpClient:Je.a}),({httpClient:e})=>Object(de.a)((t,n)=>{const{url:r,adapter:i}=Wo[t],o=i.mapQuery(n);return e.post(r,{data:o}).then(i.mapResponse)})),$o=zo({httpClient:Je.a});var Ko=n(2637),Yo=n(684),Xo=n(683);function Jo(e){return Array.isArray(e)}function Qo(e,t){return Object(se.a)(t,(e,t,n)=>Object(ce.a)(n,t,e),e)}var Zo=Object(de.a)(Qo);const ea=_o.a.operation;function ta(e,t,n){return ea(e,t,dt.a,n)}var na=Object(de.a)(ta);function ra(e,t){return Object(Io.a)((...t)=>!e(...t),t)}var ia=Object(de.a)(ra),oa=n(46);const aa=(e,t)=>Object(te.Range)(0,e.count(),t).map(n=>e.slice(n,n+t)),sa=Object(de.a)((e,t)=>!e(t)),ca=(e=[])=>{Jo(e)||(e=[e]);return Object(te.Set)(e.map(String))},la=e=>{Object(mi.f)(e,na(Tr,Object(nt.a)(Object(te.Map)({idQueue:Object(te.Set)(),objects:Object(te.Map)(),startDates:Object(te.Map)()}))));return{queueId(t){Object(mi.f)(e,na(sa(xo(["objects",t])),Object(pi.a)(So(["idQueue"],e=>e.add(t)),pe(["startDates",t],Date.now()))))},getQueue:()=>Object(mi.b)(e).get("idQueue"),loadingData(t){const n=Object(rt.a)(dt.a,t).map(()=>Object(te.Map)({loading:!0,reference:null}));Object(mi.f)(e,e=>e.update("objects",Zo(n)).update("idQueue",e=>e.subtract(t)))},loadingDataFailed(t,n){const r=Object(rt.a)(dt.a,t).map(()=>Object(te.Map)({loading:!1,error:n,reference:null}));Object(mi.f)(e,Object(pi.a)(So(["objects"],Zo(r)),So(["startDates"],ia((e,n)=>t.contains(n)))))},loadedData(t,n){const r=Object(rt.a)(Object(Q.a)("id"),n).map(e=>Object(te.Map)({loading:!1,reference:e})),i=Object(rt.a)(dt.a,t.filter(e=>!r.has(e))).map(()=>Object(te.Map)({loading:!1,reference:null}));Object(mi.f)(e,Object(pi.a)(So(["objects"],Zo(r.merge(i))),So(["startDates"],ia((e,n)=>t.contains(n)))))},listen(t){Object(mi.h)(e,t);t(Object(mi.b)(e));return()=>{Object(mi.g)(e,t)}},evict(t){t.isEmpty()&&(t=Object(mi.b)(e).get("objects").keySeq());Object(mi.f)(e,So(["objects"],ia((e,n)=>!e.get("loading")&&t.contains(n))))}}};var ua=({cacheKey:e,createFetchSearchPage:t,createFetchByIds:n,fetchSearchPage:r,fetchByIds:i,httpClient:o,debouncePeriod:a=500,maxBatchSize:s=500,idIsValid:c=(()=>!0)})=>{Object(oa.a)(e&&"string"==typeof e,"expected `cacheKey` to be a non-empty string");if(o){Object(oa.a)(!(!t&&!n),"createFetchSearchPage or createFetchByIds factory function not provided for supplied httpClient for batched resolver");r=t&&t({httpClient:o});i=n&&n({httpClient:o})}return t=>{const n=la(t(e)),o=Object(Ke.a)(a,()=>{const e=n.getQueue();if(e.size>0){n.loadingData(e);aa(e,s).forEach(e=>{i(e.toArray()).then(t=>n.loadedData(e,t),t=>{n.loadingDataFailed(e,t)})})}}),l=e=>{n.queueId(e);o()};return Object(Ko.a)({byId:(e,t)=>n.listen(n=>{if(!c(e))return;const r=n.getIn(["objects",e]),i=n.hasIn(["idQueue",e]);if(null!=r||i)if(null==r||r&&r.get("loading")){const r=n.getIn(["startDates",e]);t(Object(Yo.a)({startDate:r}))}else r.get("error")?t(Object(Xo.a)({reason:r.get("error")})):r.get("loading")||t(r.get("reference"));else l(e)}),search(e,t){t(Object(Yo.a)({startDate:Date.now()}));r(e).then(t).catch(e=>t(Object(Xo.a)({reason:e})));return()=>{}},refreshCache(e){n.evict(ca(e))}},"BatchedReferenceResolver_"+e)}};var da=(e=>ua(Object.assign({cacheKey:fo.b,createFetchByIds:Oo,createFetchSearchPage:e=>zo(e)(li.i),fetchByIds:yo,fetchSearchPage:$o(li.i)},e)))();const pa=Qr()(_.a).withConfig({displayName:"ProductFolderResolverSelect__ValueSpinner",componentId:"sc-1qfrzwx-0"})(["margin-top:1px !important;margin-bottom:0 !important;"]);class ha extends r.Component{render(){const{className:e,onChange:t=ho.a,resolver:n,value:r,disabled:i=!1}=this.props;function o(e){t({hs_folder_id:e.target.value})}return Object(B.jsx)(po,{className:e,onChange:o,disabled:i,"data-selenium-test":"folder-select","data-test-id":"folder-select",placeholder:R.a.text("folders.folderSelect.selectAFolder"),menuWidth:"auto",multi:!1,ref:e=>{null===e?delete this.refs.input:this.refs.input=e},resolver:n,value:r,requestOptions:{sorts:[{property:"createdate",order:"DESC"}]},valueRenderer:e=>"buttonText"in e?e.buttonText:"text"in e?e.text:"record"in e?e.record.label:Object(B.jsx)(pa,{size:"xs"}),options:[{text:R.a.text("folders.folderSelect.noFolder"),value:""}]})}}var ma=ei(Object(mo.a)({[li.i]:da}),ci(e=>({resolver:e[li.i]})))(ha),fa=n(2735);const ga=Object(Pr.a)(e=>e.map(e=>({text:e.label,value:e.value})));function ba({billingStartDelayTypeProperty:e,subject:t,onPropertiesChange:n,readOnly:i,propertyName:o=J.h,className:a}){const s=Lt(t,o)||J.y,c=Object(r.useCallback)(({target:{value:e}})=>n({[o]:e}),[n,o]),l=ga(e.toJS().options);return Object(B.jsx)(N.a,{label:e.label,children:Object(B.jsx)(gi.a,{"data-test-id":"property-input-billing-start-delay-type",searchable:!1,placeholder:e.label,onChange:c,value:s,options:l,readOnly:i,className:a})})}var Oa=Object(r.memo)(ba),ya=n(479),ja=n(283),va=n(2809),Ca=n(2649),xa=n(1479).a?Symbol.for("__APOLLO_CONTEXT__"):"__APOLLO_CONTEXT__";function Ea(){Object(Ca.a)("createContext"in r,46);var e=r.createContext[xa];if(!e){Object.defineProperty(r.createContext,xa,{value:e=r.createContext({}),enumerable:!1,writable:!1,configurable:!0});e.displayName="ApolloContext"}return e}function Ta(e){var t=r.useContext(Ea()),n=e||t.client;Object(Ca.a)(!!n,50);return n}const Sa="not_specified",Ia="read_only",wa="hidden",_a="not_specified",Na="readOnly",Aa="hidden",Da="",ka="readOnly",Pa="hidden";ni.a.oneOf([Sa,Ia,wa]),ni.a.oneOf([Sa,Ia,wa,_a,Na,Aa,Da,ka,Pa]);function Ra(e){if(null==e)return e;switch(e){case Sa:case _a:case Da:return Sa;case Ia:case Na:case ka:return Ia;case wa:case Aa:case Pa:return wa;default:throw new Error(`Unrecognized permission level "${e}"`)}}var Fa=n(1399),La=n(1400),Ma=n(1402),Ba=n(1276);const Ua=e=>{const{accessLevelOverride:t,objectTypeId:n,property:i,value:o,autoManageHighlySensitiveValue:a,timestamp:s}=e,c=Object(r.useContext)(Ma.a),l=Object(La.a)(),u=Object(r.useMemo)(()=>{let e=o;if(a&&i.dataSensitivity===Ba.a.HIGH){if(!c)throw new Error("Cannot use autoManageHighlySensitiveValue without highlySensitivePropertyContext");if(l){const t=c.getHighlySensitivePropertyValue({objectTypeId:n,objectId:l,propertyName:i.name,timestamp:s});"SUCCEEDED"===(null==t?void 0:t.status)&&(e=t.value)}}return{accessLevelOverride:t,objectTypeId:n,property:i,timestamp:s,value:e}},[a,c,o,l,n,i,s,t]);return Object(B.jsx)(Fa.a.Provider,{value:u,children:e.children})},Va=Object(r.createContext)(void 0);var Ha=n(1401),qa=n(1403),Ga=n(1404),Wa=n(2590);const za=({objectTypeId:e,httpClient:t})=>Object(Wa.a)({httpClient:t}).then(t=>t.properties.get({frameworkTypeIdentifier:e,query:{showHighlySensitiveProperties:!0}}));function $a(e){return e}function Ka(e,t,n=$a){return e.reduce((e,r,i)=>{const o=t(r,i);e[o]=n(r,i,e[o]);return e},{})}const Ya=(e,t)=>za({objectTypeId:e,httpClient:t}).then(e=>Ka(e.filter(({permission:e})=>e&&e.accessLevel&&e.accessLevel!==Sa),({property:{name:e}})=>e,({permission:e})=>Ra(e.accessLevel)));function Xa(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}const Ja={UNINITIALIZED:"UNINITIALIZED",PENDING:"PENDING",SUCCEEDED:"SUCCEEDED",FAILED:"FAILED"},Qa=Object(r.createContext)(null),Za=({isDisabled:e,children:t})=>{const n=Object(r.useRef)({}),[i,o]=Object(r.useReducer)((e,{objectTypeId:t,accessLevels:n})=>Object.assign({},e,{[t]:n}),{}),a=Object(r.useCallback)(({objectTypeId:e,fetchStatus:t})=>{n.current=Object.assign({},n.current,{[e]:t})},[]),s=Object(r.useMemo)(()=>({isDisabled:e,fetchStatusesRef:n,accessLevelsByObjectTypeId:i,setFetchStatus:a,setAccessLevels:o}),[e,n,i,a,o]);return Object(B.jsx)(Qa.Provider,{value:s,children:t})};Za.propTypes={children:ni.a.node};const es=({children:e})=>null!==Object(r.useContext)(Qa)?Object(B.jsx)(B.Fragment,{children:e}):Object(B.jsx)(Za,{isDisabled:!1,children:e});es.propTypes={children:ni.a.node};(({children:e})=>Object(B.jsx)(Za,{isDisabled:!0,children:e})).propTypes={children:ni.a.node};const ts=(e,t)=>e.fetchStatusesRef.current[t]||Ja.UNINITIALIZED,ns=({context:e,httpClient:t,objectTypeId:n})=>{const{setFetchStatus:r,setAccessLevels:i}=e,o=ts(e,n);if(o===Ja.UNINITIALIZED||o===Ja.FAILED){r({objectTypeId:n,fetchStatus:Ja.PENDING});Object(qa.a)(Ya(n,t).then(e=>{r({objectTypeId:n,fetchStatus:Ja.SUCCEEDED});i({objectTypeId:n,accessLevels:e})}).catch(()=>{r({objectTypeId:n,fetchStatus:Ja.FAILED})}))}},rs=({context:e,httpClient:t,objectType:n,propertyName:r})=>{if(null===e||e.isDisabled)return Sa;const i=Object(he.x)(n);if(!i||!r)return null;ns({context:e,httpClient:t,objectTypeId:i});const o=ts(e,i),a=e.accessLevelsByObjectTypeId[i];return o===Ja.SUCCEEDED&&a?Xa(a,r)||Sa:null},is=({context:e,httpClient:t,objectType:n,propertyNames:r=[],accessLevelsOverride:i={}})=>r.reduce((r,o)=>{const a=Xa(i,o),s=null!=a?Ra(a):rs({context:e,httpClient:t,objectType:n,propertyName:o});r[o]=s;return r},{}),os=({objectType:e,propertyNames:t=[],accessLevelsOverride:n={}})=>{const i=Object(r.useContext)(Qa),o=Object(Ga.a)();return Object(r.useMemo)(()=>is({context:i,httpClient:o,objectType:e,propertyNames:t,accessLevelsOverride:n}),[i,o,e,t,n])},as=[wa,Ia,Sa],ss=e=>Object.values(e).reduce((e,t)=>null===e?t:null===t?e:as.indexOf(t)<as.indexOf(e)?t:e,null);var cs=n(1405);const ls=()=>{const e=Object(cs.a)();return Object(he.v)(e)};var us=n(1406);const ds=()=>Object(us.a)().accessLevelOverride;var ps=n(1407),hs=n(1408);const ms=()=>{const e=ls(),t=Object(cs.a)(),n=Object(ps.a)(),r=ds();let i=[n.name];Object(Ie.B)(n,t)&&(i=[Object(hs.c)(t),Object(hs.d)(t)]);const o=os({objectType:e,propertyNames:i,accessLevelsOverride:{[n.name]:r}});return Object.keys(o).length>1?ss(o):o[n.name]};var fs=n(1410),gs=n(1411);const bs=()=>{const e=Object(ps.a)(),t=ls(),{actions:n}=Object(r.useContext)(Va);if(Object(Ie.c)(e,t))return n.email};function Os(e){class t extends r.Component{constructor(t){super(t);this.Component=e.loader()}render(){return this.Component?Object(B.jsx)(this.Component,Object.assign({},this.props)):null}}t.displayName="Requirable";return t}const ys=Os({loader:()=>{const e=n(1412);return e.default||e}}),js=Os({loader:()=>{const e=n(2622);return e.default||e}}),vs=Os({loader:()=>{const e=n(1417);return e.default||e}}),Cs=Os({loader:()=>{const e=n(2830);return e.default||e}}),xs=Os({loader:()=>{const e=n(1427);return e.default||e}}),Es=Os({loader:()=>{const e=n(1429);return e.default||e}}),Ts=Os({loader:()=>{const e=n(1435);return e.default||e}}),Ss=Os({loader:()=>{const e=n(1430);return e.default||e}}),Is=Os({loader:()=>{const e=n(1436);return e.default||e}}),ws=Os({loader:()=>{const e=n(2831);return e.default||e}}),_s=Os({loader:()=>{const e=n(2619);return e.default||e}}),Ns=Os({loader:()=>{const e=n(1440);return e.default||e}}),As=Os({loader:()=>{const e=n(1442);return e.default||e}}),Ds=Os({loader:()=>{const e=n(2673);return e.default||e}}),ks=Os({loader:()=>{const e=n(1450);return e.default||e}}),Ps=Os({loader:()=>{const e=n(2832);return e.default||e}}),Rs=Os({loader:()=>{const e=n(1452);return e.default||e}}),Fs=Os({loader:()=>{const e=n(2674);return e.default||e}}),Ls=Os({loader:()=>{const e=n(2834);return e.default||e}}),Ms=Os({loader:()=>{const e=n(2835);return e.default||e}}),Bs=Os({loader:()=>{const e=n(2836);return e.default||e}}),Us=Os({loader:()=>{const e=n(2598);return e.default||e}}),Vs=Os({loader:()=>{const e=n(1460);return e.default||e}}),Hs=Os({loader:()=>{const e=n(1461);return e.default||e}}),qs=Os({loader:()=>{const e=n(2833);return e.default||e}}),Gs=Os({loader:()=>{const e=n(2645);return e.default||e}}),Ws=Os({loader:()=>{const e=n(1462);return e.default||e}}),zs=Os({loader:()=>{const e=n(1464);return e.default||e}}),$s=Os({loader:()=>{const e=n(1465);return e.default||e}}),Ks=Os({loader:()=>{const e=n(2837);return e.default||e}}),Ys=Os({loader:()=>{const e=n(1466);return e.default||e}}),Xs=Os({loader:()=>{const e=n(2646);return e.default||e}}),Js=Os({loader:()=>{const e=n(1476);return e.default||e}}),Qs=Os({loader:()=>{const e=n(1477);return e.default||e}}),Zs=Os({loader:()=>{const e=n(2647);return e.default||e}});var ec=n(99);var tc=e=>{const t=Object(ps.a)(),n=Object(ec.a)("customerDataProperties.PropertyInputEnumShim.billingFrequencyPlaceholder"),r=Object(ec.a)("customerDataProperties.PropertyInputEnumShim.billingFrequencyPlaceholder");return Object(B.jsx)(Hs,Object.assign({},e,{placeholder:n,property:t,emptyOptionLabel:r,clearable:!1}))};var nc=e=>Object(B.jsx)(Ss,Object.assign({},e)),rc=n(1409),ic=n(1432);var oc=e=>{const{data:t,loading:n}=Object(ic.a)({additionalDomains:rc.a});return n||void 0===t?null:Object(B.jsx)(Gs,Object.assign({},e,{additionalDomains:t.additionalDomains}))};var ac=e=>{const t=bs();Object(oa.a)(!!t,"PropertyInputV2: `actions` is required when `enableMultipleEmailInput={true}`. See https://product.hubteam.com/docs/crm-properties/frontend.html");const{data:n,loading:r}=Object(ic.a)({additionalEmails:rc.d});return r||void 0===n?null:Object(B.jsx)(Fs,Object.assign({},e,{additionalEmails:n.additionalEmails}))};var sc=(e,t,n)=>n&&"hs_optional"===e.name&&t===et.C,cc=n(1443),lc=n(1422),uc=n(1433);const dc=()=>Object(us.a)().value;var pc=n(2648),hc=n(1425);const mc=e=>{const{property:t,objectTypeId:n,httpClient:r,searchIncludeDeleted:i}=e,o=Object(hc.a)(t,n);return o?Object(pc.a)(o,n,{httpClient:r,searchIncludeDeleted:i,propertyName:t.name}):null};var fc=n(2704),gc=n(1467);const bc=(e,t,n)=>n&&Object(fc.r)({analyticsSourceData2:n})?cc.g:e&&Object(fc.o)({analyticsSource:e})?gc.a:t&&Object(fc.q)({analyticsSourceData1:t})?gc.c:e&&t&&Object(fc.p)({analyticsSource:e,analyticsSourceData1:t})?gc.b:void 0,Oc=(e,t,n,r,i)=>e.name===fc.f?{sourceProperty:i(fc.l,n,t),data1Property:i(fc.e,n,t),data2Property:r}:e.name===fc.j?{sourceProperty:i(fc.k,n,t),data1Property:i(fc.i,n,t),data2Property:r}:{sourceProperty:void 0,data1Property:void 0,data2Property:void 0},yc=e=>e.name===fc.f||e.name===fc.j,jc=(e,t,n,r,i)=>{if(e.name!==fc.f&&e.name!==fc.j)return;const{sourceProperty:o,data1Property:a,data2Property:s}=Oc(e,t,n,r,i);return bc(o,a,s)};var vc=n(2611);const Cc={[he.g]:{hs_marketable_reason_id:gc.d,salesforcecampaignids:gc.f}},xc=(e,t)=>{const n=Cc[t]||{};return Object.prototype.hasOwnProperty.call(n,e.name)?n[e.name]:void 0};var Ec=n(1350),Tc=n(1415);const Sc=(e,t,{httpClient:n})=>{const r=xc(e,t);if(r)return Object(vc.a)(r,t,{httpClient:n})},Ic=(e,t,n,r,i,{httpClient:o})=>{const a=jc(e,t,n,r,i);if(a)return Object(vc.b)(a)?Object(vc.a)(a,t,{httpClient:o}):Object(pc.a)(a,t,{httpClient:o})},wc=(e,t,{httpClient:n})=>Object(pc.a)(Ec.m,t,{httpClient:n}),_c=e=>{const{getAdditionalPropertyValue:t,getIsUngated:n,httpClient:r,objectId:i,objectTypeId:o,property:a,value:s}=e,c=Sc(a,o,{httpClient:r});return c||(yc(a)?Ic(a,o,i,s,t,{httpClient:r}):Object(Ie.m)(a)&&n(Tc.c)?wc(a,o,{httpClient:r}):mc({property:a,objectTypeId:o,httpClient:r})||void 0)};var Nc=n(2828);function Ac(){const e=Object(ps.a)(),t=dc(),n=Object(La.a)(),r=Object(cs.a)(),i=Object(Ga.a)(),o=Object(uc.a)(),a=Object(Nc.a)();return _c({getAdditionalPropertyValue:o,getIsUngated:a,property:e,objectId:n,objectTypeId:r,httpClient:i,value:t})}var Dc=n(1468),kc=n(1419),Pc=n(1457);function Rc(e){if(!e)return e;const t=Object(lc.b)(e);return t.length>1?t[0]:e}const Fc=e=>Object.assign({},Object(kc.a)(e),{tagUse:e.additionalProperties?e.additionalProperties.color:"default"});var Lc=e=>{const{value:t}=e,n=Ac(),i=Object(cs.a)(),o=Object(La.a)(),a=Object(uc.a)(),s=Object(r.useMemo)(()=>{if(!n)return{};if(n.referenceType===cc.g)return{placeholder:Object(ec.a)("customerDataProperties.PropertyInputExternalOption.users.placeholder")};if(n.referenceType===cc.c)return{placeholder:Object(ec.a)("customerDataProperties.PropertyInputExternalOption.owners.placeholder")};if(n.referenceType===cc.d)return{placeholder:Object(ec.a)("customerDataProperties.PropertyInputExternalOption.personas.placeholder")};if(n.referenceType===cc.f)return{placeholder:Object(ec.a)("customerDataProperties.PropertyInputExternalOption.taskQueues.placeholder"),value:Rc(t),multi:!1};if(n.referenceType===gc.d){const e=a(rc.f,o,i);return{buttonUse:"unstyled",readOnly:!0,value:e&&t?Object(Dc.b)({reasonType:e,reasonSourceObjectId:t}):t,placeholder:Pc.a}}return n.referenceType===cc.a?{referenceToOption:Fc}:{}},[n,t,i,o,a]);return Object(B.jsx)(vs,Object.assign({},e,s,{resolver:n}))},Mc=n(1451),Bc=n(1438);const Uc=({accessLevel:e,enableMultipleEmailInput:t,enablePopovers:n,enableCheckboxInput:r,enablePhoneNumberInput:i,getAdditionalPropertyValue:o,getIsUngated:a,httpClient:s,objectId:c,objectTypeId:l,propertyDefinition:u,propertyValue:d,readOnly:p})=>{const h=Object(he.v)(l);if(e===wa)return ys;const m=_c({getAdditionalPropertyValue:o,getIsUngated:a,property:u,objectId:c,objectTypeId:l,httpClient:s,value:d});return Object(Ie.B)(u,l)?Xs:Object(Ie.C)(u,l)?Js:Object(Ie.s)(u,h)?Ds:Object(Ie.m)(u)&&a(Tc.c)?Us:Object(Mc.e)(u,h)?ks:m?Lc:Object(Bc.a)({enablePopovers:n,objectId:c})&&Object(Ie.i)(u,h)?oc:t&&Object(Bc.a)({enablePopovers:n,objectId:c})&&Object(Ie.c)(u,h)?ac:Object(Ie.c)(u,h)||Object(Mc.c)(u,h)?qs:Object(Ie.y)(u)||Object(Ie.E)(u)?Cs:Object(Ie.j)(u)?xs:Object(Mc.d)(u,l)?Es:Object(Ie.t)(u)?Ts:Object(Ie.e)(u)?nc:Object(Ie.r)(u,l)?Is:Object(Ie.q)(u)?ws:i&&Object(Ie.A)(u)?_s:Object(Mc.a)(u,l)?Ns:Object(Ie.w)(u)?As:l===he.l&&"hs_lead_label"===u.name?a("Leads:Tags")?Ps:Hs:Object(Ie.D)(u)?Ps:Object(Ie.p)(u,h,d)?Rs:Object(Ie.L)(u,h)?Ls:Object(Ie.x)(u,h)?Ms:Object(Ie.b)(u)&&sc(u,h,r)?Ys:Object(Ie.H)(u,l)?Qs:p?Object(Ie.n)(u)?Bs:Vs:Object(Ie.l)(u)?Object(Ie.a)(u,l)?tc:Hs:Object(Ie.d)(u,h)?Ws:Object(Ie.g)(u)?Object(Ie.h)(u,l)?zs:Zs:Object(Ie.f)(u)?zs:Object(Ie.M)(u)?Ks:$s},Vc=({isPropertyReadOnly:e,enableMultipleEmailInput:t,enablePopovers:n,enableCheckboxInput:i,enablePhoneNumberInput:o})=>{const a=ms(),s=Object(cs.a)(),c=Object(ps.a)(),l=Object(La.a)(),u=Object(uc.a)(),d=Object(Nc.a)(),p=Object(Ga.a)(),h=dc();return Object(r.useMemo)(()=>Uc({accessLevel:a,enableMultipleEmailInput:t,enablePopovers:n,enableCheckboxInput:i,enablePhoneNumberInput:o,getAdditionalPropertyValue:u,getIsUngated:d,httpClient:p,objectTypeId:s,propertyDefinition:c,objectId:l,propertyValue:h,readOnly:e}),[a,t,n,i,o,u,d,p,s,c,l,h,e])};const Hc=["InputComponent"];var qc=(e=>class extends r.Component{constructor(e){super(e);this.setPopoverOpen=e=>{this.setState({popoverOpen:e})};this.inputRef=Object(r.createRef)();this.state={popoverOpen:!1}}focus(){const e=this.getSafeRef();if(e.current){e.current.focus();"function"==typeof e.current.select&&e.current.select()}this.setState({popoverOpen:!0})}getSafeRef(){return this.props.inputRef||this.inputRef}render(){return Object(B.jsx)(e,Object.assign({},this.props,{inputRef:this.getSafeRef(),popoverOpen:this.state.popoverOpen,setPopoverOpen:this.setPopoverOpen}))}})(e=>{let{InputComponent:t}=e,n=Object(Ye.a)(e,Hc);return Object(B.jsx)(t,Object.assign({},n))}),Gc=n(2609),Wc=n(2707),zc=n(8);const $c=Object(zc.createMetricsFactory)("customer-data-properties",{library:"customer-data-properties"});var Kc=n(10),Yc=n(1453);const Xc=({objectTypeId:e,getFormValue:t,properties:n,rule:r})=>{if(e!==r.objectTypeId)return!1;const{fieldName:i,fieldValue:o}=r.controllingField,a=t(i),s=n[i];if(Object(Ie.u)(s)){const e=Object(lc.b)(o),t=Object(lc.b)(a);return e.every(e=>t.includes(e))}return o===a},Jc=(e,t,n,r)=>{const i={};for(const o of r){if(Xc({rule:o,objectTypeId:e,getFormValue:t,properties:n})){const e=o.controllingField.fieldName;i[e]=(Object.prototype.hasOwnProperty.call(i,e)?i[e]:[]).concat(o.dependentFields)}}return i},Qc=e=>{function t(e,n){e.push(n);return n.dependents.reduce(t,e)}return e.reduce(t,[])},Zc=e=>{function t(e,n){e.push(n);return n.dependents.reduce(t,e)}return e.reduce(t,[])},el=e=>{function t(e,n){e.push(n);return n.dependents.reduce(t,e)}return e.reduce((e,n)=>n.dependents.reduce(t,e),[])},tl=e=>Zc(e).reduce((e,t)=>{e.add(t.propertyName);return e},new Set);function nl(e,t){return[...e].filter(e=>!t.has(e))}const rl={added:[],removed:[]},il=(e,t)=>{if(e===t)return rl;const n=tl(e),r=tl(t);return{added:nl(r,n),removed:nl(n,r)}},ol=e=>{const t=new Set;return Qc(e).reduce((e,n)=>{if(!t.has(n.property.name)){t.add(n.property.name);e.push(n)}return e},[])},al=e=>Object.assign({},e,{isRequired:Boolean(e.isRequired),dependents:[],parent:void 0}),sl=(e,t,n,r)=>{const i=[],o=[],a=new Set,s=[];for(const t of e){const e=al(t);i.push([e]);s.push(e);o.push(new Set)}for(;i.some(e=>e.length>0);)for(let e=0;e<i.length;e++){const s=i[e],c=o[e],l=[];for(const e of s){const i=e.propertyName;e.isRequired&&a.add(i);if(!c.has(i)){e.parent&&e.parent.dependents.push(e);if(r||n.has(i)){const n=(t[i]||[]).map(t=>({propertyName:t.fieldName,isRequired:t.required,dependents:[],parent:e}));l.push(...n)}c.add(i)}}i[e]=l}const c=e=>{e.isRequired=a.has(e.propertyName);e.dependents.forEach(c)};s.forEach(c);return s},cl=({formProperties:e,formDependencies:t,changedProperties:n,alwaysShowConditionalPropertyOptionsWithErrors:r,conditionalPropertyOptionsRules:i})=>{const o=Object.assign({},t);for(const e of i){const t=e.controllingField.fieldName,n=e.dependentFieldName,r={fieldName:n,required:!1,displayOrder:o[t]?o[t].length:0};Object.prototype.hasOwnProperty.call(o,t)?o[t].some(e=>e.fieldName===n)||o[t].push(r):o[t]=[r]}return sl(e,o,n,r)},ll=()=>({validationStatus:"INITIALIZING",initializing:!0,initializationFailed:!1,loading:!1,invalid:!1,saveable:!1,errors:new Map}),ul=()=>({validationStatus:"INITIALIZATION_FAILED",initializing:!1,initializationFailed:!0,loading:!1,invalid:!1,saveable:!1,errors:new Map}),dl=()=>({validationStatus:Yc.c,initializing:!1,initializationFailed:!1,loading:!0,invalid:!1,saveable:!1,errors:new Map}),pl=()=>({validationStatus:Yc.e,initializing:!1,initializationFailed:!1,loading:!1,invalid:!1,saveable:!0,errors:new Map}),hl=e=>({validationStatus:Yc.a,initializing:!1,initializationFailed:!1,loading:!1,invalid:!0,saveable:!1,errors:e});var ml=n(468),fl=n(604),gl=n(324);const bl=Qr.a.div.withConfig({displayName:"PropertiesFormDependentSection__Tile",componentId:"ip5jlq-0"})(["position:relative;border-radius:3px;background-color:",";border:1px solid ",";border-left:solid 5px ",";margin-top:16px;margin-bottom:8px;"],gl.OLAF,gl.GREAT_WHITE,gl.CALYPSO),Ol=Qr.a.div.withConfig({displayName:"PropertiesFormDependentSection__TileSection",componentId:"ip5jlq-1"})(["padding:16px;"]);function yl({children:e,property:t}){return Object(B.jsx)(bl,{"data-test-id":t.name+"-dependents",children:Object(B.jsxs)(Ol,{children:[Object(B.jsx)(k.a,{weight:"medium",children:Object(B.jsx)(ya.a,{title:Object(B.jsx)(v.a,{message:"propertiesForm.dependentFieldsHelp",options:{label:t.label}}),children:Object(B.jsx)(v.a,{message:"propertiesForm.dependentFieldsTitle"})})}),e]})})}var jl=yl,vl=n(1473);const Cl=(e,t,n)=>t.get("conditional-properties/v2/unified-rules",{query:Object.assign({objectTypeId:e,pageSize:100,includeActualConditionalPropertyRules:!0},n)}).then(r=>{const{results:i,offset:o,hasMore:a}=r;return a?Cl(e,t,Object.assign({},n,{offset:o})).then(e=>i.concat(e)):i}),xl=(()=>new vl.a(Cl,dt.a))(),El=(e,t,n)=>t.get(`conditional-properties/v2/options/${e}/unmerged/paged`,{query:{pageSize:100,offset:n}}).then(n=>{const{results:r,hasMore:i,offset:o}=n;return i?El(e,t,o).then(e=>r.concat(e)):r}).catch(e=>{console.log(e);throw e}),Tl=(()=>new vl.a(El,dt.a))();var Sl=n(1474),Il=n(47);const wl=Object(Il.a)(e=>Ka(e,({property:{name:e}})=>e,({property:e})=>e)),_l=(e,t)=>za({objectTypeId:e,httpClient:t}).then(wl);var Nl=({objectTypeId:e,objectId:t,fetchConditionalPropertyRules:n})=>{const i=Object(Ga.a)(),[o,a]=Object(r.useState)({loading:!0,error:!1,properties:{},conditionalPropertyRules:[],conditionalPropertyOptionsRules:[],cachedPropertyValues:{}}),s=Object(r.useRef)(Object(Sl.a)());Object(r.useEffect)(()=>{const r=_l(e,i),o=n?n(e,i):xl.get(e,i),c=Tl.get(e,i);let l;l=t?s.current.get({objectTypeId:e,objectId:t},i):Promise.resolve({});Promise.all([r,o,c,l]).then(([e,t,n,r])=>{a({loading:!1,error:!1,properties:e,conditionalPropertyRules:t,conditionalPropertyOptionsRules:n,cachedPropertyValues:r})}).catch(e=>{a({loading:!1,error:!0,properties:{},conditionalPropertyRules:[],conditionalPropertyOptionsRules:[],cachedPropertyValues:{}})})},[e]);const{loading:c,error:l,properties:u,conditionalPropertyRules:d,conditionalPropertyOptionsRules:p,cachedPropertyValues:h}=o;return{loading:c,error:l,properties:u,conditionalPropertyRules:d,conditionalPropertyOptionsRules:p,cachedPropertyValues:h}};var Al=({properties:e,changedProperties:t,alwaysShowConditionalProperties:n,conditionalPropertyDependencies:i})=>Object(r.useMemo)(()=>Object.keys(i).length>0?sl(e,i,t,n):e.map(al),[n,t,i,e]);function Dl(e,t){return!!xc(e,t)}var kl=n(1455);function Pl(e,t){return Boolean(Object(hc.a)(e,t))}const Rl=(e,t)=>{const n=[];for(const e of t)n.push(...e.dependentOptions);return 0===n.length?e:Object.assign({},e,{options:e.options.filter(e=>n.includes(e.value))})},Fl=(e,t)=>e.includes(t.controllingField.fieldValue),Ll=(e,t)=>0===e.length||0===t.length||!e.every(e=>t.some(t=>t.controllingField.fieldValue===e)),Ml=(e,t)=>Ll(e,t)?[]:t.filter(t=>Fl(e,t)),Bl=(e,t)=>Object(kl.a)(t)?[]:Object(Ie.u)(e)?Object(lc.b)(t):[t],Ul=({originalPropertyDefinition:e,propertyDefinitionForActiveRules:t,value:n})=>{if(Object(kl.a)(n))return!1;const r=Bl(e,n),i=e.options.map(e=>e.value),o=t.options.map(e=>e.value);for(const e of r)if(i.includes(e)&&!o.includes(e))return!0;return!1},Vl=({originalPropertyDefinition:e,error:t,controllingFieldLabel:n})=>t?Object(Ie.u)(e)?Object(B.jsx)(q.a,{message:"conditionalPropertyOptions.propertyInputV2.errors.hiddenOptionSelectedMulti",options:{controllingFieldLabel:n}}):Object(B.jsx)(q.a,{message:"conditionalPropertyOptions.propertyInputV2.errors.hiddenOptionSelected",options:{controllingFieldLabel:n}}):null,Hl=({originalPropertyDefinition:e,propertyDefinitionForActiveRules:t,value:n,controllingFieldLabel:r})=>{const i=Ul({originalPropertyDefinition:e,propertyDefinitionForActiveRules:t,value:n});return{error:i,validationMessage:Vl({originalPropertyDefinition:e,error:i,controllingFieldLabel:r})}},ql=({enableConditionalPropertyOptions:e,propertyDefinition:t,objectTypeId:n})=>{if(!e)return!1;const r=Object(hs.d)(n);return!(t.name===r)&&(!!Object(Ie.l)(t)&&(!Dl(t,n)&&!Pl(t,n)))},Gl=({dependentProperty:e,dependentValue:t,conditionalPropertyOptionsRules:n})=>{const r=Bl(e,t),i=n.filter(t=>t.dependentFieldName===e.name);if(0===r.length)return!0;const o=Rl(e,i);return!Ul({originalPropertyDefinition:e,propertyDefinitionForActiveRules:o,value:t})},Wl=(e,t,n,r)=>e.filter(i=>{const{dependentFieldName:o}=i;if(!Object.prototype.hasOwnProperty.call(t,o))return!1;if(r&&r.find(e=>e.dependentFieldName===o))return!0;return!Gl({dependentProperty:t[o],dependentValue:Xa(n,o),conditionalPropertyOptionsRules:e})}),zl=({conditionalPropertyOptionsRules:e,formProperties:t,getFormValue:n,properties:i,changedProperties:o,dependencies:a,alwaysShowConditionalPropertyOptionsWithErrors:s})=>{const c=Object(r.useRef)([]),l=Object(r.useCallback)(()=>{c.current=[]},[]);return Object(r.useMemo)(()=>{const r=[],u=[],d={activeRules:u,formProperties:t,resetConditionalPropertyOptionsRules:l};if(0===e.length)return d;for(const o of t){const{propertyName:t}=o,a=Bl(i[t],n(t));if(0===a.length)continue;const s=e.filter(e=>e.controllingField.fieldName===t);if(0===s.length)continue;const l=Ml(a,s);if(0===l.length)continue;u.push(...l);const d=l.reduce((e,t)=>{e[t.dependentFieldName]=n(t.dependentFieldName);return e},{}),p=Wl(l,i,d,c.current);r.push(...p)}if(0===r.length)return d;c.current=r;return{activeRules:u,formProperties:cl({formProperties:t,formDependencies:a,changedProperties:o,alwaysShowConditionalPropertyOptionsWithErrors:s,conditionalPropertyOptionsRules:r}),resetConditionalPropertyOptionsRules:l}},[s,o,e,a,t,n,i,l])},$l=(e,t)=>ol(e).filter(e=>e.isRequired&&!t(e.property.name)).map(e=>e.property),Kl=(e,t,n,r,i)=>{const o={};for(const a of e){const s=a.controllingField.fieldName;if(t.has(s)||r){const t=a.dependentFieldName;if(!0===o[t])continue;o[t]=Gl({dependentProperty:n[t],dependentValue:i(t),conditionalPropertyOptionsRules:e})}}const a=[];for(const[e,t]of Object.entries(o))t||a.push(n[e]);return a},Yl=(e,t)=>e.filter(([e,t])=>t.invalid).map(([e])=>t[e]);var Xl=({loading:e,error:t,objectTypeId:n,conditionalPropertyRules:i,getFormValue:o,properties:a})=>Object(r.useMemo)(()=>e||t?{}:Jc(n,o,a,i),[i,t,o,e,n,a]);const Jl=(e,t)=>e===t,Ql=(e,t=Jl)=>{const n=Object(r.useRef)(e),i=n.current,o=e;i===o||t(i,o)||(n.current=o);return n},Zl=({objectTypeId:e,objectId:t,defaultValues:n})=>{const i=Object(r.useContext)(Ma.a);if(!i&&!n)throw new Error("useHighlySensitivePropertyValues must be used within a HighlySensitivePropertyContextProvider");return Object(r.useMemo)(()=>i?Array.from(i.propertyValuesMap.values()).filter(n=>n.objectTypeId===e&&n.objectId===t&&"SUCCEEDED"===n.status&&void 0===n.timestamp).reduce((e,t)=>{e[t.propertyName]=t.value;return e},{}):n,[i,e,t,n])},eu=[],tu=ll(),nu=ul(),ru=(e,t,n,r,i,o,a)=>{const s=[...n.entries()];if(s.some(([e,{loading:t}])=>t))return dl();const c=new Map,l=$l(r,e);l.length>0&&c.set("MISSING_REQUIRED_PROPERTY",l);const u=Kl(i,o,t,a,e),d=Yl(s,t);[...u,...d].length>0&&c.set("INVALID_PROPERTIES",[...u,...d]);return c.size>0?hl(c):pl()},iu=({properties:e,property:t,getFormValue:n,handleChange:i,handleValidationChange:o,objectId:a,objectTypeId:s,inputMode:c,showPropertyDescription:l})=>{const u=t.propertyName,d=e[u];if(!d)return;const p=[];for(const r of t.dependents){const t=iu({properties:e,property:r,getFormValue:n,handleChange:i,handleValidationChange:o,objectId:a,objectTypeId:s,inputMode:c,showPropertyDescription:l});void 0!==t&&p.push(t)}const h=n(u)||null;return{property:d,isRequired:t.isRequired,dependents:p,render:e=>Object(r.createElement)(Dd,Object.assign({},e,{onChange:i,onValidationChange:o,getAdditionalPropertyValue:n,enableConditionalPropertiesPanel:!1,enableConditionalPropertyOptions:!0,inputMode:c,key:d.name,objectId:a,objectTypeId:s,formControlProps:Object.assign({label:d.label},e?e.formControlProps:void 0,{required:t.isRequired,help:l?d.description:void 0}),property:d,value:h}))}},ou=e=>e.map(({propertyName:e,isRequired:t})=>`${e}/${t}`).join(":"),au={};var su=({fetchConditionalPropertyRules:e,objectId:t,objectTypeId:n,onChange:i,properties:o,values:a,alwaysShowConditionalProperties:s=!1,alwaysShowConditionalPropertyOptionsWithErrors:c=!1,inputMode:l=fs.c,showPropertyDescription:u=!1,getSavedValue:d})=>{const[p,h]=Object(r.useState)(new Map),[m,f]=Object(r.useState)(new Set),[g,b]=Object(r.useState)({}),O=Object(r.useRef)();O.current=i;const y=Ql(o,(e,t)=>ou(e)===ou(t)),j=Object(r.useRef)();j.current=a;const v=Object(r.useRef)([]),{loading:C,error:x,properties:E,conditionalPropertyRules:T,conditionalPropertyOptionsRules:S,cachedPropertyValues:I}=Nl({objectTypeId:n,objectId:t,fetchConditionalPropertyRules:e}),w=Zl({objectTypeId:n,objectId:t,defaultValues:au}),_=Object(r.useCallback)(e=>{if(Object.prototype.hasOwnProperty.call(a,e))return a[e];if(Object.prototype.hasOwnProperty.call(w,e))return w[e];const r=d(e,t,n);return void 0!==r?r:Object.prototype.hasOwnProperty.call(I,e)?I[e]:void 0},[a,t,n,d,I,w]),N=Xl({loading:C,error:x,objectTypeId:n,getFormValue:_,properties:E,conditionalPropertyRules:T}),A=Al({properties:y.current,changedProperties:m,alwaysShowConditionalProperties:s,conditionalPropertyDependencies:N}),{activeRules:D,formProperties:k,resetConditionalPropertyOptionsRules:P}=zl({conditionalPropertyOptionsRules:S,formProperties:A,getFormValue:_,properties:E,changedProperties:m,dependencies:N,alwaysShowConditionalPropertyOptionsWithErrors:c}),R=Object(r.useCallback)(e=>{h(t=>new Map(t).set(e.propertyName,e))},[]),F=Object(r.useCallback)(e=>{const t=Object.keys(e);f(e=>new Set([...e,...t]));O.current&&O.current(Object.assign({},j.current,e))},[]),L=Object(r.useMemo)(()=>{if(C||x)return eu;const e=[];for(const r of k){const i=iu({properties:E,property:r,getFormValue:_,handleChange:F,handleValidationChange:R,objectId:t,objectTypeId:n,inputMode:l,showPropertyDescription:u});void 0!==i&&e.push(i)}return e},[C,x,k,E,_,F,R,t,n,l,u]);Object(r.useEffect)(()=>{const e=v.current;v.current=k;if(e===k)return;const t=el(e),n=el(k),r=tl(k),{added:i,removed:o}=il(t,n);i.length&&b(e=>{const t=Object.assign({},e);for(const e of i)Object.prototype.hasOwnProperty.call(a,e)&&(t[e]=a[e]);return t});if(o.length){const e=o.filter(e=>!r.has(e));let t=!1;const n=Object.assign({},j.current);for(const r of e)if(Object.prototype.hasOwnProperty.call(n,r)){Object.prototype.hasOwnProperty.call(g,r)?n[r]=g[r]:delete n[r];t=!0}t&&O.current&&O.current(n);h(t=>{const n=new Map(t);for(const t of e)n.delete(t);return n});f(t=>{const n=new Set(t);for(const t of e)n.delete(t);return n});b(e=>{const t=Object.assign({},e);for(const e of o)delete t[e];return t})}},[k,g,a]);const M=Object(r.useMemo)(()=>ru(_,E,p,L,D,m,c),[L,E,p,_,D,m,c]),B=Object(r.useCallback)(()=>{h(new Map);f(new Set);b({});P();v.current=[]},[P]);return x?{status:nu,inputs:eu,reset:B}:C?{status:tu,inputs:eu,reset:B}:{status:M,inputs:L,reset:B}},cu=n(1475);const lu=({objectTypeId:e,objectId:t,propertyName:n,timestamp:r})=>`${e}/${t}/${n}/${r}`,uu=e=>{const t=Object(r.useContext)(Ma.a),n=Object(Ga.a)(),[i,o]=Object(r.useState)(new Map),a=Object(r.useCallback)(e=>{const t=lu(e);return i.get(t)},[i]),s=Object(r.useCallback)(e=>{const t=lu(e),r=i.get(t);if("LOADING"===(null==r?void 0:r.status)||"SUCCEEDED"===(null==r?void 0:r.status))return r.promise;const{objectTypeId:a,objectId:s,propertyName:c,timestamp:l}=e,u=Object(cu.b)({objectTypeId:a,objectId:s,propertyName:c,timestamp:l,httpClient:n});o(n=>new Map(n).set(t,Object.assign({},e,{promise:u,status:"LOADING"})));return u.then(n=>{o(r=>new Map(r).set(t,Object.assign({},e,{promise:u,status:"SUCCEEDED",value:n})));return n},n=>{o(r=>new Map(r).set(t,Object.assign({},e,{status:"FAILED",error:n})));throw n})},[n,i]),c=Object(r.useCallback)(({objectTypeId:e,objectId:t})=>{o(n=>{const r=new Map(n);for(const[n,i]of r.entries())i.objectTypeId===e&&i.objectId===t&&r.delete(n);return r})},[]),l=Object(r.useCallback)(({objectTypeId:e,objectId:t,values:n})=>{o(r=>{const i=new Map(r);for(const[r,o]of i.entries())if(o.objectTypeId===e&&o.objectId===t&&Object.prototype.hasOwnProperty.call(n,o.propertyName)){const a=n[o.propertyName];i.set(r,{objectTypeId:e,objectId:t,propertyName:o.propertyName,value:a,status:"SUCCEEDED",error:void 0,promise:Promise.resolve(a)})}return i})},[]),u=Object(r.useMemo)(()=>({propertyValuesMap:i,fetchHighlySensitivePropertyValue:s,getHighlySensitivePropertyValue:a,clearHighlySensitivePropertyValues:c,updateHighlySensitivePropertyValues:l}),[i,s,a,c,l]);return void 0!==t?Object(B.jsx)(B.Fragment,{children:e.children}):Object(B.jsx)(Ma.a.Provider,{value:u,children:e.children})},du=Object(r.createContext)(void 0),pu=e=>{if(void 0!==Object(r.useContext)(du))return Object(B.jsx)(B.Fragment,{children:e.children});let t=Object(B.jsx)(uu,{children:e.children});const{enableFieldLevelPermissions:n=!0}=e;t=n?Object(B.jsx)(es,{children:t}):t;return Object(B.jsx)(du.Provider,{value:!0,children:t})},hu=e=>{const t=Object(r.useRef)(e),n=Object(r.useRef)();t.current=e;n.current||(n.current=function(...e){return t.current.call(this,...e)});return n.current};function mu({onStatusChange:e,enableFieldLevelPermissions:t=!0,alwaysShowConditionalProperties:n,alwaysShowConditionalPropertyOptionsWithErrors:i,fetchConditionalPropertyRules:o,inputMode:a,objectId:s,objectTypeId:c,onChange:l,properties:u,values:d,renderInput:p,renderDependentSection:h,renderProps:m,resetRef:f,showPropertyDescription:g,getSavedValue:b}){const{inputs:O,status:y,reset:j}=su({alwaysShowConditionalProperties:n,alwaysShowConditionalPropertyOptionsWithErrors:i,fetchConditionalPropertyRules:o,inputMode:a,objectId:s,objectTypeId:c,onChange:l,properties:u,values:d,showPropertyDescription:g,getSavedValue:b});f&&(f.current=j);const v=hu(e);Object(r.useEffect)(()=>{v(y)},[y,v]);const C=Object.assign({},m);function x(e,t){return Object(B.jsx)(B.Fragment,{children:e.map(e=>Object(B.jsxs)(r.Fragment,{children:[Object(B.jsx)("div",{"data-test-id":`${t}-${e.property.name}`,children:p?p(e):e.render(C)}),x(e.dependents,`${t}-${e.property.name}`)]},`${t}-${e.property.name}`))})}return Object(B.jsx)(pu,{enableFieldLevelPermissions:t,children:O.map(e=>Object(B.jsxs)(r.Fragment,{children:[Object(B.jsx)("span",{"data-test-id":e.property.name,children:p?p(e):e.render(C)}),e.dependents.length>0&&(h?h(e,C):Object(B.jsx)(jl,{property:e.property,children:x(e.dependents,e.property.name)}))]},e.property.name))})}var fu=n(1216),gu=n(771);var bu=()=>Object(B.jsx)(fu.a,{incrementFactor:.1,maximum:95,render:({value:e,done:t})=>Object(B.jsx)("div",{style:{position:"relative"},children:Object(B.jsx)(gu.a,{value:e,animateOnComplete:t})})});const Ou=170,yu=16,ju=12,vu=520,Cu=40,xu=9,Eu=16,Tu=Object(Jr.keyframes)(["0%{background-color:","}50%{background-color:","}100%{background-color:","}"],gl.KOALA,gl.GREAT_WHITE,gl.KOALA),Su=Qr.a.div.withConfig({displayName:"Skeleton__SkeletonBase",componentId:"sc-1p2ujnb-0"})(["display:inline-block;height:","px;width:","px;border-radius:3px;margin-top:","px;margin-bottom:","px;animation:"," 2s ease-in-out infinite;"],e=>"description"===e.type?Cu:yu,e=>"description"===e.type?vu:Ou,e=>"description"===e.type?xu:ju,e=>"description"===e.type?Eu:0,Tu);var Iu=e=>Object(B.jsx)(Su,Object.assign({},e));var wu=()=>Object(B.jsxs)(B.Fragment,{children:[Object(B.jsx)(Iu,{"data-test-id":"conditional-properties-panel-skeleton-loader"}),Object(B.jsx)(Iu,{type:"description"}),Object(B.jsx)(Iu,{}),Object(B.jsx)(Iu,{type:"description"})]}),_u=n(24),Nu=n.n(_u);let Au;function Du(e){qn.a.addAlert({id:e,type:"danger",use:"inline",titleText:R.a.text("componentErrorAlert.title"),message:Object(B.jsx)(ja.a,{message:"componentErrorAlert.message_jsx",options:{href:window.location.href},elements:{Link:D.a}}),onClose:()=>{Au=Object(Pr.a)(Du)}})}Au=Object(Pr.a)(Du);class ku extends r.Component{static getDerivedStateFromError(){return{hasError:!0}}constructor(e){super(e);this.attemptToRemount=()=>{const{boundaryName:e,showRefreshAlert:t}=this.props;if(t&&e){Au=Object(Pr.a)(Du);qn.a.removeAlert(e)}this.setState({hasError:!1})};this.state={hasError:!1}}componentDidCatch(e,t={}){const{shouldAutoReset:n,onComponentDidCatch:r,boundaryName:i,shouldReportAllErrors:o}=this.props,a=n(e);a?this.setState({hasError:!1}):this.props.showRefreshAlert&&Au(i);!o&&a||this.reportErrors(e,t);r(e)}reportErrors(e,t={}){const n=this.props.boundaryName||"";window.newrelic&&"function"==typeof window.newrelic.noticeError&&window.newrelic.noticeError(e,{errorBoundaryName:n});Nu.a.captureException(e,{extra:Object.assign({},t,{version:r.version}),tags:{errorBoundaryName:n}})}render(){if(!this.state.hasError)return this.props.children;const{ErrorComponent:e}=this.props;return this.state.hasError&&e?Object(B.jsx)(e,Object.assign({},this.props.errorProps,{attemptToRemount:this.attemptToRemount})):null}}ku.propTypes={boundaryName:ni.a.string,ErrorComponent:ni.a.func,errorProps:ni.a.object,children:ni.a.node,onComponentDidCatch:ni.a.func,shouldAutoReset:ni.a.func,showRefreshAlert:ni.a.bool,shouldReportAllErrors:ni.a.bool};ku.defaultProps={showRefreshAlert:!0,shouldAutoReset:e=>!1,onComponentDidCatch:e=>{},shouldReportAllErrors:!1};var Pu=ku,Ru=n(1478),Fu=n.n(Ru);const Lu=Object(Me.a)({events:Fu.a}),Mu=()=>{Lu.track("Interaction",{screen:"customer-data-properties",subscreen:"conditional-properties-panel",action:"submit"})},Bu=e=>{Lu.track("Pageview",Object.assign({},e,{screen:"customer-data-properties"}))};var Uu=n(1121),Vu=n(1439);const Hu=Qr()(Uu.a).withConfig({displayName:"ConditionalPropertiesPanelDependentSection__TileWithLeftBorder",componentId:"srrh8r-0"})(["border-left:solid 5px ",";"],gl.CALYPSO),qu=Qr.a.div.withConfig({displayName:"ConditionalPropertiesPanelDependentSection__StyledDivWithBottomMargin",componentId:"srrh8r-1"})(["&:not(:last-of-type){margin-bottom:12px !important;}"]),Gu=(e,t,n,i)=>Object(B.jsx)(B.Fragment,{children:e.map(e=>Object(B.jsxs)(r.Fragment,{children:[Object(B.jsx)(qu,{"data-test-id":`${t}-${e.property.name}`,children:i?i(e):e.render(n)}),Gu(e.dependents,`${t}-${e.property.name}`,n,i)]},`${t}-${e.property.name}`))});function Wu({input:e,passthroughProps:t,renderInput:n}){return Object(B.jsx)(Hu,{compact:!0,className:"m-top-4 m-bottom-2","data-test-id":e.property.name+"-dependents",children:Object(B.jsx)(Vu.a,{className:"p-top-2",children:Gu(e.dependents,e.property.name,t,n)})})}var zu=Wu;const $u="CustomerDataProperties_ConditionalPropertiesPanelError",Ku=3,Yu=()=>(Le.a.isQa()?99535353:53)===Ze.a.get(),Xu=Object(Il.a)(Yu),Ju=({onClose:e})=>Object(B.jsxs)(fl.a,{title:Object(B.jsx)(q.a,{message:"conditionalPropertiesPanel.errorTitle"}),children:[Object(B.jsx)("p",{children:Object(B.jsx)(q.a,{message:"conditionalPropertiesPanel.errorDescriptionErrorBoundary"})}),Object(B.jsx)(m.a,{use:"tertiary-light",onClick:e,children:Object(B.jsx)(q.a,{message:"conditionalPropertiesPanel.closeButton"})})]});var Qu=({objectId:e,objectTypeId:t,triggerPropertyDefinition:n,properties:i,onApply:o,onCancel:a,defaultValues:s,getAdditionalPropertyValue:c,showAutoSaveText:l=!1,renderInput:u})=>{const[d,p]=Object(r.useState)(s||{}),[h,f]=Object(r.useState)(ll()),[g,b]=Object(r.useState)(0);Object(r.useEffect)(()=>{Bu({subscreen:"conditional-properties-panel"})},[]);const v=Object(r.useCallback)(e=>{f(e)},[f]),T=Object(r.useCallback)(e=>{p(e)},[p]),S=Object(r.useCallback)(()=>{if(!(g>=Ku)){f(ll());b(e=>e+1)}},[g]),I=Object(r.useCallback)((e,t)=>Object(B.jsx)(zu,{input:e,passthroughProps:t,renderInput:u}),[u]),w=h.saveable,_=Object(r.useCallback)(()=>{Mu();o(d)},[d,o]);return Object(B.jsx)(j.a,{width:"520px","data-test-id":"conditional-properties-panel",children:Object(B.jsx)(Pu,{ErrorComponent:Ju,errorProps:{onClose:a},boundaryName:$u,showRefreshAlert:!1,children:Object(B.jsxs)(K.a,{onSubmit:e=>{e.preventDefault();e.stopPropagation();w&&_()},children:[Object(B.jsxs)(x.a,{children:[Object(B.jsx)(E.a,{children:Object(B.jsx)(q.a,{message:"conditionalPropertiesPanel.title"})}),Object(B.jsx)(C.a,{onClick:()=>{a()}})]}),h.initializing&&Object(B.jsx)(bu,{}),Object(B.jsxs)(O.a,{children:[Object(B.jsx)(ml.a,{children:Object(B.jsx)(q.a,{message:"conditionalPropertiesPanel.description",options:{triggerPropertyLabel:n.label}})}),Object(B.jsxs)(ml.a,{children:[h.initializing&&Object(B.jsx)(wu,{}),h.initializationFailed&&Object(B.jsxs)(fl.a,{"data-test-id":"conditional-properties-panel-error",title:Object(B.jsx)(q.a,{message:"conditionalPropertiesPanel.errorTitle"}),children:[Object(B.jsx)("p",{children:g<Ku?Object(B.jsx)(q.a,{message:"conditionalPropertiesPanel.errorDescriptionWithRefresh"}):Object(B.jsx)(q.a,{message:"conditionalPropertiesPanel.errorDescriptionNoRefresh"})}),g<Ku&&Object(B.jsx)("p",{children:Object(B.jsx)(m.a,{use:"transparent",onClick:S,children:Object(B.jsx)(q.a,{message:"conditionalPropertiesPanel.errorRefreshButton"})})})]}),!h.initializationFailed&&Object(B.jsx)(mu,{objectId:e,objectTypeId:t,getSavedValue:c,values:d,onChange:T,onStatusChange:v,properties:i,alwaysShowConditionalProperties:!0,alwaysShowConditionalPropertyOptionsWithErrors:!0,renderDependentSection:I,showPropertyDescription:Xu(),renderInput:u},g)]})]}),Object(B.jsxs)(y.a,{children:[Object(B.jsx)(m.a,{use:"primary",type:"submit",disabled:!w,children:l?Object(B.jsx)(q.a,{message:"conditionalPropertiesPanel.saveButton"}):Object(B.jsx)(q.a,{message:"conditionalPropertiesPanel.applyButton"})}),Object(B.jsx)(m.a,{use:"tertiary-light",onClick:()=>{a()},children:Object(B.jsx)(q.a,{message:"conditionalPropertiesPanel.cancelButton"})})]})]})})})},Zu=n(1459);const ed=Object(Sl.a)(),td=({objectId:e,objectTypeId:t,skip:n})=>{const i=Object(Ga.a)(),o=n||!e,a=Object(r.useCallback)(()=>void 0===e?Promise.resolve({}):ed.get({objectTypeId:t,objectId:e},i),[i,e,t]);return Object(Zu.a)(a,{skip:o})},nd=(e,t={skip:!1})=>{const n=Object(Ga.a)(),i=Object(r.useCallback)(()=>Tl.get(e,n),[n,e]);return Object(Zu.a)(i,t)},rd=(e,t={skip:!1})=>{const n=Object(Ga.a)(),i=Object(r.useCallback)(()=>xl.get(e,n),[n,e]);return Object(Zu.a)(i,t)},id=Object(Il.a)(e=>Ka(e,({property:{name:e}})=>e,({property:e})=>e)),od=(e,t={skip:!1})=>{const n=Object(Ga.a)(),i=Object(r.useCallback)(()=>za({objectTypeId:e,httpClient:n}).then(id),[n,e]);return Object(Zu.a)(i,t)},ad=e=>({propertyName:e}),sd={isOpen:!1,values:{},properties:[]};var cd=({enableConditionalPropertiesPanel:e=!0,conditionalPropertyRules:t,onChange:n,onCancel:i,property:o,objectTypeId:a,objectId:s,getAdditionalPropertyValue:c,showAutoSaveText:l,value:u})=>{const d=Object(Ie.l)(o)&&e,p=d,{data:h,loading:m,error:f}=rd(a,{skip:void 0!==t||!d}),{data:g,loading:b,error:O}=nd(a,{skip:!p}),{data:y,loading:j,error:v}=od(a,{skip:!p}),C=Object(r.useMemo)(()=>t||h||[],[h,t]),x=Object(r.useMemo)(()=>g?g.filter(e=>e.controllingField.fieldName===o.name):[],[g,o.name]),E=Object(r.useMemo)(()=>y||{},[y]),[{isOpen:T,values:S,properties:I},w]=Object(r.useState)(sd),{data:_,loading:N,error:A}=td({objectId:s,objectTypeId:a,skip:!p}),D=Object(r.useMemo)(()=>({[o.name]:o}),[o]),k=Object(r.useCallback)(()=>{w({isOpen:!1,values:{},properties:[]})},[]),P=Object(r.useCallback)((e,t)=>{w({isOpen:!0,values:e,properties:t})},[]),R=Object(r.useCallback)(e=>{const t=t=>{if(Object.prototype.hasOwnProperty.call(e,t))return e[t];const n=c(t,s,a);return void 0!==n?n:_?Xa(_,t):void 0},r=Jc(a,t=>{const n=Xa(e,t);if(t!==o.name||!Object(Ie.u)(o)||!n||!u)return n;const r=new Set(Object(lc.b)(u));return nl(new Set(Object(lc.b)(n)),r)[0]},D,C),i=Ml(Bl(o,e[o.name]),x),l=i.reduce((e,n)=>{e[n.dependentFieldName]=t(n.dependentFieldName);return e},{}),d=Wl(i,E,l),p=Object.keys(r);if(p.length>0||d.length>0){const t=p.length>0?p.map(ad):[{propertyName:o.name}];P(e,t)}else n(e)},[E,_,x,C,c,P,s,a,n,o,D,u]);if(!d)return{maybeOpenConditionalPropertiesPanel:n,conditionalPropertiesPanel:null,loading:!1,error:void 0};return{conditionalPropertiesPanel:T?Object(B.jsx)(Qu,{properties:I,onApply:e=>{n(e);k()},onCancel:()=>{i&&i();k()},objectTypeId:a,objectId:s,getAdditionalPropertyValue:c,triggerPropertyDefinition:o,defaultValues:S,showAutoSaveText:l}):null,maybeOpenConditionalPropertiesPanel:R,loading:m||b||j||N,error:f||O||v||A}};const ld=({conditionalPropertyOptionsRulesForProperty:e,controllingFieldCurrentValue:t,controllingFieldPropertyDefinition:n,originalPropertyDefinition:r,value:i})=>{const o={propertyDefinition:r,error:!1,validationMessage:null};if(!n)return o;if(null==t)return o;const a=Bl(n,t);if(Ll(a,e))return o;const s=Ml(a,e),c=Rl(r,s),{error:l,validationMessage:u}=Hl({originalPropertyDefinition:r,propertyDefinitionForActiveRules:c,value:i,controllingFieldLabel:n.label});return{propertyDefinition:c,error:l,validationMessage:u}},ud=({propertyDefinition:e,enableConditionalPropertyOptions:t=!1,objectTypeId:n,objectId:i,getAdditionalPropertyValue:o,value:a})=>{const s=ql({enableConditionalPropertyOptions:t,propertyDefinition:e,objectTypeId:n}),{data:c,loading:l,error:u}=nd(n,{skip:!s}),{data:d,loading:p,error:h}=od(n,{skip:!s}),{data:m,loading:f,error:g}=td({objectId:i,objectTypeId:n,skip:!s}),b=Object(r.useMemo)(()=>(c||[]).filter(t=>t.dependentFieldName===e.name),[c,e.name]);return Object(r.useMemo)(()=>{if(l||p||f)return{loading:!0,error:void 0,data:void 0};const t=u||h||g;if(t)return{loading:!1,error:t,data:void 0};if(!s||0===b.length||void 0===d)return{loading:!1,error:void 0,data:void 0};const r=b[0].controllingField.fieldName,c=Xa(d,r),O=o(r,i,n),y=void 0!==O?O:m?Xa(m,r):void 0;return{loading:!1,error:void 0,data:ld({conditionalPropertyOptionsRulesForProperty:b,controllingFieldCurrentValue:y,controllingFieldPropertyDefinition:c,originalPropertyDefinition:e,value:a})}},[m,g,f,u,b,l,o,i,n,e,d,h,p,s,a])},dd=()=>{const e=Object(ps.a)(),t=Object(Nc.a)();return Object(Ie.m)(e)&&t(Tc.c)};function pd({getDraftValue:e,getSavedValue:t,getAdditionalPropertyValue:n,objectTypeId:i,propertyName:o,componentName:a}){const s=Object(r.useCallback)((...r)=>{if(e&&t){const n=e(...r);return void 0===n?t(...r):n}if(n)return n(...r);throw new Error("Caller must provide one of getAdditionalPropertyValue or getSavedValue/getDraftValue")},[n,e,t]);Object(r.useEffect)(()=>{if(void 0===e&&void 0===t&&void 0===n){Kc.a.warn({message:a+"-get-additional-value-functions-canary: did not receive any of getDraftValue, getSavedValue, or getAdditionalPropertyValue",key:a+"-get-additional-value-functions-canary"});$c.counter(a+"-get-additional-value-functions-canary").increment();Nu.a.captureException(new Error(a+"-get-additional-value-functions-canary"),{extra:{objectTypeId:i,propertyName:o}})}},[a,n,e,t,i,o]);return s}var hd=pd,md=n(1416);const fd=()=>{const e=Object(ps.a)(),t=Object(cs.a)(),n=Object(La.a)(),i=Object(md.a)(),o=Object(Nc.a)(),a=Object(r.useContext)(Ma.a);if(!o("CRM:PropertiesFrontend:HighlySensitiveData"))return!1;if(e.dataSensitivity!==Ba.a.HIGH)return!1;if(!a)return!1;if(!n)return!1;const s=a.getHighlySensitivePropertyValue({objectTypeId:t,objectId:n,propertyName:e.name,timestamp:i});return!s||"SUCCEEDED"!==s.status},gd=(e,t)=>{const n=e!==he.s||!t.hubspotDefined||["hs_name","hubspot_owner_id"].includes(t.name),{data:r,loading:i}=Object(ic.a)({hs_invoice_creation:"hs_invoice_creation"},{skip:n});if(n)return!1;const o=null==r?void 0:r.hs_invoice_creation;return!(!i&&o)||"on"===o},bd=(e,t)=>t.get("leads/v2/settings"),Od=(()=>new vl.a(bd,dt.a))(),yd=(e,t)=>{const n=Object(Ga.a)(),i=e===he.l&&t.hubspotDefined&&"hubspot_owner_id"===t.name,[o,a]=Object(r.useState)(!0);Object(r.useEffect)(()=>{i&&Od.get("leadSettings",n).then(e=>{a(!0===e.mirrorBackingObjectOwner)}).catch(e=>{a(!1);Nu.a.captureException(new Error("Fetching lead settings failed open"),{extra:{originalError:e}})})},[n,i]);return!!i&&o},jd=(e,t,n,i)=>{const o=gd(e,t),a=yd(e,t);return Object(r.useMemo)(()=>!!(n===Ia||Boolean(i)||o||a)||Object(Ie.J)(t),[n,i,o,a,t])},vd=({property:e,objectTypeId:t})=>{var n;const i=Object(Ga.a)(),o=Object(r.useCallback)(async()=>{let n=e;if(!e.dataSensitivity){const r=await Object(Wa.a)({httpClient:i}).then(n=>n.properties.getProperty({frameworkTypeIdentifier:t,propertyName:e.name,query:{showHighlySensitiveProperties:!0}}));n=Object.assign({},n,{dataSensitivity:r.property.dataSensitivity})}return n},[i,t,e]);return null!==(n=Object(Zu.a)(o).data)&&void 0!==n?n:e},Cd=e=>e instanceof yt.a,xd=e=>"__typename"in e,Ed=e=>{if(Cd(e))return e.toJS();if(xd(e)){var t,n;return Object.assign({},e,{isCustomizedDefault:e.customizedDefault,isMultiValued:e.multiValued,deleted:null!==(t=e.deleted)&&void 0!==t&&t,hubspotDefined:null!==(n=e.hubspotDefined)&&void 0!==n?n:void 0,options:e.options.map(e=>{var t,n;return Object.assign({},e,{hidden:null!==(t=e.hidden)&&void 0!==t&&t,readOnly:null!==(n=e.readOnly)&&void 0!==n?n:void 0})}),dateDisplayHint:e.dateDisplayHint,displayMode:e.displayMode,fieldType:e.fieldType,numberDisplayHint:e.numberDisplayHint,sensitiveDataCategories:e.sensitiveDataCategories,type:e.type})}return e},Td=["accessLevel","actions","objectId","objectTypeId","property","value","enableConditionalPropertyOptions","formControlProps","getAdditionalPropertyValue","getSavedValue","getDraftValue"],Sd=({objectTypeId:e,property:t,value:n})=>{Object(r.useEffect)(()=>{if(null!=n&&"string"!=typeof n){Kc.a.warn({message:`propertyinputv2-value-canary: received an invalid value type (must be string, null, or undefined): objectTypeId=${e}, propertyName=${t.name}, valueType=${typeof n}`,key:"propertyinputv2-value-canary"});$c.counter("propertyinputv2-value-canary").increment();Nu.a.captureException(new Error("propertyinputv2 value canary"),{extra:{objectTypeId:e,propertyName:t.name,valueType:typeof n}})}},[e,t.name,n])},Id=({objectTypeId:e,objectId:t,inputMode:n=fs.c,property:i})=>{Object(r.useEffect)(()=>{if(n!==fs.c||t){if(n!==fs.c&&t){Kc.a.warn({message:`propertyinputv2-objectid-nonedit-canary: received an invalid objectId/inputMode (objectId is not expected when inputMode != "edit"): objectTypeId=${e}, objectId=${t}, inputMode=${n}, propertyName=${i.name}`,key:"propertyinputv2-objectid-nonedit-canary"});$c.counter("propertyinputv2-objectid-nonedit-canary").increment();Nu.a.captureException(new Error("propertyinputv2 objectid nonedit canary"),{extra:{objectTypeId:e,objectId:t,inputMode:n,propertyName:i.name}})}}else{Kc.a.warn({message:`propertyinputv2-objectid-canary: received an invalid objectId/inputMode (objectId is required when inputMode = "edit"): objectTypeId=${e}, objectId=${t}, inputMode=${n}, propertyName=${i.name}`,key:"propertyinputv2-objectid-canary"});$c.counter("propertyinputv2-objectid-canary").increment();Nu.a.captureException(new Error("propertyinputv2 objectid canary"),{extra:{objectTypeId:e,objectId:t,inputMode:n,propertyName:i.name}})}},[e,t,n,i.name])},wd=({objectTypeId:e,property:t})=>{Object(r.useEffect)(()=>{if(void 0===t.dataSensitivity){Kc.a.warn({message:`propertyinputv2-data-sensitivity-canary: received a property without dataSensitivity: objectTypeId=${e}, propertyName=${t.name}`,key:"propertyinputv2-data-sensitivity-canary"});$c.counter("propertyinputv2-data-sensitivity-canary").increment()}},[e,t.dataSensitivity,t.name])},_d=({objectTypeId:e,property:t})=>{let n=void 0;try{n=Ta()}catch(e){}Object(r.useEffect)(()=>{if(!n){Kc.a.warn({message:`propertyinputv2-apollo-client-canary: rendered without an <ApolloProvider>: objectTypeId=${e}, propertyName=${t.name}`,key:"propertyinputv2-apollo-client-canary"});$c.counter("propertyinputv2-apollo-client-canary").increment();Nu.a.captureException(new Error("propertyinputv2 apollo client canary"),{extra:{objectTypeId:e,propertyName:t.name}})}},[n,e,t.name])},Nd=({autoFocus:e,className:t,disabled:n,disableValidation:i=!1,enableMultipleEmailInput:o=!1,enablePopovers:a=!0,enableCheckboxInput:s=!1,enablePhoneNumberInput:c=!0,enableConditionalPropertiesPanel:l=!1,conditionalPropertyRules:u,FormControl:d,formControlProps:p={},inputMode:h=fs.c,inputProps:m={},inputRef:f,onBlur:g,onChange:b,onFocus:O,onKeyUp:y,onTracking:j,onValidationChange:v=ho.a,popoverProps:C,readOnly:x,use:E="default",validationSettings:T,showAutoSaveText:S})=>{const I=ms(),w=Object(ps.a)(),_=Object(gs.a)(),N=dc(),A=bs(),D=Object(La.a)(),k=ls(),P=Object(cs.a)(),{getAdditionalPropertyValue:R}=Object(r.useContext)(Ha.a),{conditionalPropertiesPanel:F,maybeOpenConditionalPropertiesPanel:L}=cd({enableConditionalPropertiesPanel:l,conditionalPropertyRules:u,property:w,onChange:b,objectId:D,objectTypeId:P,getAdditionalPropertyValue:R,showAutoSaveText:S,value:_}),M=jd(P,w,I,x),U=Vc({isPropertyReadOnly:M,enableMultipleEmailInput:o,enablePopovers:a,enableCheckboxInput:s,enablePhoneNumberInput:c}),V=dd(),H={accessLevel:I||void 0,actions:A,internalValue:N,property:w,subjectId:D,objectType:k,objectTypeId:P,value:_},q=Object(Ie.m)(w),G=!(n||M||i||q),{onChangeSingle:W,onChangeMultiple:z,validationState:$}=Object(Gc.d)({disableValidation:!G,objectId:D,objectTypeId:P,onChange:L,onValidationChange:v,propertyDefinition:w,propertyValue:_,validationSettings:T}),{invalid:K,message:Y}=$,X=fd();if(I!==wa&&X)return Object(B.jsx)(js,{className:t,use:E,formControlProps:p,inputProps:m});if(!U)return null;const J=I===wa||q,Q=G&&K,Z=!(!p.error&&!Q)||p.error,ee=p.validationMessage||(G?Y:void 0);return Object(B.jsxs)(B.Fragment,{children:[Object(B.jsx)(Wc.a,Object.assign({Component:d},p,{error:Z,validationMessage:ee,readOnly:!!p.readOnly||M||n,hideEditIcon:M||n||I===wa||V,isStatic:J,formControlUse:E,children:Object(B.jsx)(qc,Object.assign({InputComponent:U},H,m,{autoFocus:e,className:t,disabled:n,inputMode:h,inputRef:f,onBlur:g,onChange:W,onChangeMultiple:z,onFocus:O,onKeyUp:y,onTracking:j,onValidationChange:v,readOnly:M,formControlUse:E,showAutoSaveText:S,enablePopovers:a,popoverProps:C,error:Z,validationMessage:ee,disableValidation:i}))})),F]})},Ad={};var Dd=e=>{const{accessLevel:t,actions:n=Ad,objectId:i,objectTypeId:o,property:a,value:s,enableConditionalPropertyOptions:c,formControlProps:l,getAdditionalPropertyValue:u,getSavedValue:d,getDraftValue:p}=e,h=Object(Ye.a)(e,Td),m=vd({property:a,objectTypeId:o}),f=Object(r.useMemo)(()=>Ed(m),[m]),g=hd({getAdditionalPropertyValue:u,getDraftValue:p,getSavedValue:d,objectTypeId:o,propertyName:a.name,componentName:"propertyinputv2"});Sd(e);Id(e);wd(e);_d(e);const{data:b}=ud({propertyDefinition:f,enableConditionalPropertyOptions:c,objectTypeId:o,objectId:i,getAdditionalPropertyValue:g,value:s}),O=Object(r.useMemo)(()=>{if(!b)return l;const{error:e,validationMessage:t}=b;return l&&l.error||!e?l:Object.assign({},l,{error:e,validationMessage:t})},[b,l]),y=Object(r.useMemo)(()=>({actions:n}),[n]),j=Object(r.useMemo)(()=>({getAdditionalPropertyValue:g,objectId:i}),[g,i]);return Object(B.jsx)(Ha.a.Provider,{value:j,children:Object(B.jsx)(Ua,{accessLevelOverride:t,objectTypeId:o,value:s,property:b?b.propertyDefinition:f,autoManageHighlySensitiveValue:!1,children:Object(B.jsx)(Va.Provider,{value:y,children:Object(B.jsx)(Nd,Object.assign({},h,{formControlProps:O}))})})})},kd=Dd;function Pd(e){return e[J.y]?Object.assign({},e,{[J.f]:"",[J.g]:""}):e[J.f]?Object.assign({},e,{[J.y]:"",[J.g]:""}):e[J.g]?Object.assign({},e,{[J.y]:"",[J.f]:""}):e}const Rd="https://knowledge.hubspot.com/payments/schedule-recurring-payments-to-start-in-the-future",Fd=Object(B.jsx)(ja.a,{message:"lineItems.futureStartDate.delayBillingStartDate.labelTooltip_jsx",elements:{Link:va.a},options:{use:"link",useZorse:!0,url:Rd}}),Ld=J.y,Md=e=>[J.f,J.g].includes(e)?Object(B.jsx)(v.a,{message:"lineItems.futureStartDate.relative.formControlHelpText"}):e===J.y?Object(B.jsx)(v.a,{message:"lineItems.futureStartDate.startBillingDate.help"}):null;function Bd({subject:e,savedSubject:t,onPropertiesChange:n,allProperties:i,autoFocusInputOnMount:o,readOnly:a}){const s=Lt(e,J.h),[c,l]=Object(r.useState)([J.y,J.f,J.g].includes(s)),[u,d]=Object(r.useState)(o||!1),p=Object(r.useCallback)(()=>{n([J.y,J.f,J.g].reduce((e,t)=>{e[t]="";return e},{}))},[n]),h=Object(r.useCallback)(({target:{checked:e}})=>{l(e);if(e){n({[J.h]:Ld});d(!1)}else p()},[p,n]),m=Object(r.useCallback)(e=>{p();n(e);d(!0)},[n,p]),f=Object(r.useCallback)(e=>{d(!1);const t=Pd(e);n(t)},[n]),g=Object(r.useCallback)(t=>Lt(e,t),[e]),O=Object(r.useCallback)((e,n,r)=>t&&fe(r,t)?Lt(t,e):void 0,[t]);function y(){const t=Wt(e),n=Lt(e,s),r=i[s],o=Md(s),c={objectTypeId:t,objectId:String(fe(t,e)),value:n||"",onChange:f,getDraftValue:g,getSavedValue:O,property:r,formControlProps:{label:r.label,help:o},autoFocus:u,disableValidation:!0,readOnly:a,enableConditionalPropertiesPanel:!0};return s===J.y?Object(B.jsx)(kd,Object.assign({},c,{inputProps:{"data-test-id":"property-input-billing-start-delay-date"}})):s===J.f||s===J.g?Object(B.jsx)(kd,Object.assign({},c,{inputProps:{"data-test-id":"property-input-billing-start-delay-relative",placeholder:r.label,min:1}})):null}const j=tr(e),C=Object(r.useMemo)(()=>j&&Object(B.jsx)(ya.a,{title:Fd,className:"m-left-2","data-test-id":"delay-billing-start-control-tooltip-icon"}),[j]);return Object(B.jsxs)(B.Fragment,{children:[Object(B.jsx)(b.a,{checked:c,onChange:h,description:C,descriptionLayout:"horizontal","data-test-id":"delayed-billing-start-date-toggle",disabled:a,children:Object(B.jsx)(v.a,{message:"lineItems.futureStartDate.delayBillingStartDate.label"})}),c&&Object(B.jsxs)(Y.a,{className:"m-bottom-3",align:"end",children:[Object(B.jsx)(fa.a,{basis:"50%",className:"m-right-3",children:Object(B.jsx)(Oa,{subject:e,onPropertiesChange:m,billingStartDelayTypeProperty:i[J.h],readOnly:a})}),Object(B.jsx)(fa.a,{basis:"50%",children:y()})]})]})}var Ud=Object(r.memo)(Bd),Vd=n(288),Hd=n.n(Vd),qd=n(2600),Gd=n(2644);const Wd="FIXED",zd="AUTOMATICALLY_RENEW";function $d({subject:e,onPropertiesChange:t,property:n,readOnly:i,disabled:o,className:a}){const s=Lt(e,"hs_recurring_billing_period"),c=Lt(e,J.w),l=Object(r.useCallback)(({target:{value:e}})=>{if(e===Wd){if(!c)return t({[J.C]:"P1M"});const e=Object(Jn.b)(c);return t({[J.C]:Zn(e)})}return t({[J.C]:""})},[c,t]),u=Object(Gd.c)(n),d=s?Wd:zd;return Object(B.jsx)(gi.a,{"data-test-id":"billing-terms-input",className:a,options:u,value:d,onChange:l,disabled:o||!c,readOnly:i})}var Kd=Object(r.memo)($d),Yd=n(513);const Xd=1,Jd="--";function Qd({subject:e}){const t=Lt(e,J.C),n=Qn(t);if(!Lt(e,J.w))return Object(B.jsx)(Yd.a,{"data-test-id":"one-time-num-payments-input",value:Xd,readOnly:!0});if(!n)return Object(B.jsx)("span",{"data-test-id":"empty-num-payments-input",children:Jd});const r=er(e);return Object(B.jsx)(Yd.a,{"data-test-id":"recurring-num-payments-input",value:r,readOnly:!0})}var Zd=Object(r.memo)(Qd),ep=n(2705),tp=n(1347);ni.a.shape({[J.m]:ni.a.number,[J.w]:ni.a.string,[J.y]:ni.a.number,[J.C]:ni.a.string}).isRequired;const np={};var rp=Object(r.createContext)(np);const ip=e=>{const t=Object(r.useContext)(rp)||{},n=t[e];return{isGlobalTermSet:void 0!==n,valueFromGlobalTerms:n,globalTerms:t}},op="custom",ap=Object(Pr.a)(()=>[{text:R.a.text("lineItems.startDate.atPayment"),value:""},{text:R.a.text("lineItems.startDate.custom"),value:op}]);function sp({subject:e,onPropertiesChange:t,readOnly:n,propertyName:i=J.y,className:o,trackClick:a=ho.a}){const{isGlobalTermSet:s}=ip(i),c=Lt(e,i),[l,u]=Object(r.useState)(!1),d=Object(r.useCallback)(({target:{value:e}})=>{if(e===op){u(!0);const e=R.a.moment.utc().endOf("month").startOf("day").valueOf().toString();t({[i]:e,[J.f]:"",[J.g]:""})}},[t,i]),p=Object(r.useCallback)(({target:{value:e}})=>{u(!1);return t({[i]:Sr(e),[J.f]:"",[J.g]:""})},[t,i]);return Object(B.jsx)(F.a,{disabled:!s,title:Object(B.jsx)(v.a,{message:"globalTerms.inputTooltip"}),children:c?Object(B.jsx)(ep.a,{autoFocus:l,value:c,onChange:p,type:tp.b,clearLabel:R.a.text("lineItems.startDate.atPayment"),readOnly:n||s,className:o,"data-test-id":"property-input-start-date-picker"}):Object(B.jsx)(gi.a,{"data-selenium-test":"property-input-start-date","data-test-id":"property-input-start-date",searchable:!1,placeholder:R.a.text("lineItems.startDate.atPayment"),onChange:d,value:c||void 0,options:ap(),readOnly:n||s,className:o,onOpenChange:a})})}var cp=Object(r.memo)(sp),lp=n(508);function up(e,t,n){return null==t?void 0:t.conditions.find(t=>!t.condition(e)&&(!n||n(t)))}function dp(e,t){const n=up(e,t,e=>!e.displayAsError);return null==n?void 0:n.errorMessage}function pp(e,t){const n=up(e,t,e=>!!e.displayAsError);return null==n?void 0:n.errorMessage}const hp=Object(r.createContext)({});function mp(e){return Object(r.useContext)(hp)[e]||null}const fp=Object(jt.a)(e=>!e||e<0?"create":void 0),gp=Object(jt.a)(e=>!e||e<1?void 0:""+e),bp=e=>e.hubspotDefined?Object(Vr.b)(e.label):e.label;var Op=n(2679),yp=n(496);function jp({isError:e,errorTooltipTitle:t,children:n,iconClassName:r}){return Object(B.jsx)(yp.a,{align:"center",itemRight:e&&Object(B.jsx)(F.a,{title:t,children:Object(B.jsx)(Op.a,{className:r,"data-test-id":"validation-error-icon",name:"warning",size:"xs",color:gl.CANDY_APPLE})}),children:n})}var vp=jp;const Cp=e=>{};function xp({subject:e,savedSubject:t,onPropertiesChange:n=(()=>{}),readOnly:i,propertyInputValidation:o,formControlProps:a,use:s="default"}){const c=mp("hs_tax_rate_group_id"),[l,u]=Object(r.useState)(!1),d=Object(r.useCallback)(e=>{u(!1);const t=e.target.value||{},{text:r="",value:i}=t;try{const e=r.split(" "),t=(e[e.length-1]||"").replace("%","");if(isNaN(Number(t)))throw Error("Improperly formatted tax rate reference");const o=e.slice(0,-1).join(" ");n({hs_tax_rate:t,hs_tax_label:o,hs_tax_rate_group_id:i})}catch(e){e instanceof Error&&Nu.a.captureException(e,{extra:{referenceText:r}});n({hs_tax_rate_group_id:i})}},[n]),p=Object(r.useMemo)(()=>({onSelectedOptionChange:d,dropdownFooter:Object(B.jsx)(D.a,{href:Mr(),external:!0,children:Object(B.jsx)(v.a,{message:"lineItemTaxes.taxRateInputDropdownFooter"})}),"data-test-id":"property-input-hs_tax_rate_group_id",referenceToOption:e=>{e.archived&&u(!0);return Object.assign({disabled:e.disabled,help:e.description,text:e.label,value:e.id},e.icon&&{imageUrl:e.icon.src})}}),[d]),h=Object(r.useCallback)(e=>t?Lt(t,e):void 0,[t]),m=Object(r.useCallback)(t=>Lt(e,t),[e]),f=dp(e,o),g=Object(r.useMemo)(()=>a?Object.assign({},a,{validationMessage:a.label&&l?Object(B.jsx)(v.a,{message:"lineItemTaxes.validation.archivedError"}):void 0,error:l}):a,[a,l]);if(!c)return null;const b=Lt(e,"hs_tax_rate_group_id"),O=Wt(e),y=Xt(e),j=fp(y),C=gp(y),x=!a&&l;return Object(B.jsx)(vp,{isError:x,errorTooltipTitle:Object(B.jsx)(v.a,{message:"lineItemTaxes.validation.archivedError"}),children:Object(B.jsx)(F.a,{title:f,children:Object(B.jsx)("div",{children:Object(B.jsx)(kd,{readOnly:i,disabled:null!=f,formControlProps:g,inputProps:p,value:b,onChange:Cp,property:c,getSavedValue:h,getDraftValue:m,objectTypeId:O,objectId:C,inputMode:j,use:s,enableConditionalPropertiesPanel:!1})})})})}var Ep=Object(r.memo)(xp);const Tp={},Sp=Object(r.createContext)(Tp),Ip=["subject","savedSubject","property","value","validateUrl","onChange","onError","onSuccess","onValidationChange","formControlProps"],wp="https://knowledge.hubspot.com/payments/schedule-recurring-payments-to-start-in-the-future",_p=Object(B.jsx)(ja.a,{message:"products.edit.startDate.labelTooltip_jsx",elements:{Link:va.a},options:{use:"link",useZorse:!0,url:wp}});function Np(e){const{subject:t,savedSubject:n,property:i,value:o,validateUrl:a=!1,onChange:s=ho.a,onError:c=ho.a,onSuccess:l=ho.a,onValidationChange:u=ho.a,formControlProps:d={}}=e,p=Object(Ye.a)(e,Ip),h=Object(r.useContext)(Sp),m=Object(r.useMemo)(()=>qt(t),[t]),f=Object(r.useMemo)(()=>n&&qt(n),[n]),g=i.name,b=Object(r.useCallback)(e=>u(g,e),[u,g]),O=Object(r.useCallback)(e=>f?Lt(f,e):void 0,[f]),y=Object(r.useCallback)(e=>Lt(m,e),[m]),j=Gt(m)===et.C,C=Object(Ie.e)(i),x="multi_currency_prices"===i.groupName,E=Object(r.useMemo)(()=>x&&g?g.replace("hs_price_","").toUpperCase():null,[x,g]),T=g===Nt,S=Object(r.useMemo)(()=>T?null:null!==E?Object(B.jsx)(v.a,{message:"products.edit.multiCurrencyPrice.label",options:{currencyLabel:E}}):bp(i),[T,E,i]),I=pp(m,h[g]),w=Object(r.useMemo)(()=>Object.assign({key:g,label:S,error:!!I},d),[g,S,d,I]),_=Object(r.useMemo)(()=>Object.assign({},C&&{maxFractionDigits:Jt,min:0},{"data-test-id":"property-input-"+g,"data-selenium-test":"property-input-"+g},p),[p,g,C]),A=void 0!==o?o:Lt(m,g);if(g===J.i)return Object(B.jsx)(N.a,Object.assign({className:"m-bottom-3"},w,{children:Object(B.jsx)(Kd,Object.assign({},p,{subject:m,property:i,onPropertiesChange:s}))}));if(g===J.r)return Object(B.jsx)(N.a,Object.assign({className:"m-bottom-3"},w,{children:Object(B.jsx)(Zd,{subject:m})}));if(g===J.y)return Object(B.jsx)(N.a,Object.assign({className:"m-bottom-3",tooltip:_p},w,{children:Object(B.jsx)(cp,Object.assign({className:"m-bottom-3",subject:m,onPropertiesChange:s},p))}));if("hs_tax_rate_group_id"===g)return Object(B.jsx)(Ep,Object.assign({subject:m,savedSubject:f,onPropertiesChange:s,formControlProps:w},p,{use:"default"}));if(a)return Object(B.jsx)(qd.a,Object.assign({"data-test-id":"validated-url-form-control",label:S,type:"basic",requireProtocol:!0,onError:c,onSuccess:l,validationMessage:{success:"",error:R.a.text("products.edit.validatedFormControl.error")},value:A},d,{children:Object(B.jsx)(lp.a,Object.assign({value:A||"",onChange:e=>s({[g]:e.target.value}),"data-test-id":"property-input-"+g,"data-selenium-test":"property-input-"+g},p))}),g);const{readOnly:D}=p,k=Object(he.x)(Gt(m)),P=Xt(m),F=fp(P),L=gp(P),M=Object(B.jsx)(vp,{isError:!!I,errorTooltipTitle:I,iconClassName:"m-top-8",children:Object(B.jsx)(kd,{formControlProps:w,inputProps:_,inputMode:F,objectTypeId:k,objectId:L,property:i,value:A,onChange:s,onValidationChange:b,disableValidation:j,getSavedValue:O,getDraftValue:y,enableCheckboxInput:!0,enableConditionalPropertiesPanel:!0,readOnly:D})});return i.name===Nt?Object(B.jsxs)(Y.a,{className:"m-top-3",align:"center",children:[M,Object(B.jsx)(ya.a,{style:{fontSize:"16px",marginLeft:"1ch"},title:Object(B.jsx)(v.a,{message:"products.edit.optional.tooltip"})})]}):M}var Ap=Object(r.memo)(Np);function Dp(e){const t=Object(r.useContext)(Dt);return Object(r.useMemo)(()=>Ft(t||{gates:[]},e),[t,e])}const kp=new Set([Xn.e,Xn.d]);function Pp({formControlProps:e={},subject:t,savedSubject:n,onPropertiesChange:i=(()=>{}),readOnly:o,property:a,propertyName:s=J.w,use:c="default"}){const{isGlobalTermSet:l}=ip(s),u=Object(r.useMemo)(()=>Object.assign({},!o&&{clearable:!0},{"data-test-id":"property-input-recurringbillingfrequency",isRequired:!0,placeholder:R.a.text("products.edit.price.rates.oneTime")}),[o]),d=Dp(_t),p=Lt(t,s),h=Object(r.useCallback)(e=>n?Lt(n,e):void 0,[n]),m=Object(r.useCallback)(e=>Lt(t,e),[t]),f=Xt(t),g=Wt(t),b=fp(f),O=gp(f),y=o||l,j=l?Object(B.jsx)(v.a,{message:"globalTerms.inputTooltip"}):void 0,C=Object(r.useMemo)(()=>a.set("options",a.options.filter(e=>!kp.has(e.value)).toList()),[a]);return Object(B.jsx)(F.a,{title:j,children:Object(B.jsx)("span",{children:Object(B.jsx)(kd,{disableValidation:!0,getDraftValue:m,getSavedValue:h,formControlProps:e,inputProps:u,objectId:O,inputMode:b,objectTypeId:g,onChange:i,property:d?a:C,readOnly:y,use:c,value:p||"",enableConditionalPropertiesPanel:!0})})})}var Rp=Object(r.memo)(Pp);function Fp({subject:e,savedSubject:t,properties:n,onPropertiesChange:i=ho.a,readOnly:o}){const a=n.get(J.w),s=Object(r.useMemo)(()=>({key:a.name,label:bp(a),tooltip:Object(B.jsx)(v.a,{message:"products.edit.billingFrequency.labelTooltip"}),tooltipPlacement:"bottom right"}),[a]);return Object(B.jsx)(Rp,{formControlProps:s,subject:e,savedSubject:t,onPropertiesChange:i,readOnly:o,property:a})}var Lp=Object(r.memo)(Fp),Mp=n(515);function Bp({subject:e,savedSubject:t,properties:n,onPropertiesChange:r,readOnly:i,currencyCode:o,discountValue:a=0,discountType:s=null,onValidationChange:c}){const l=Gr(n),{unitCost:u,lineItemCurrencyCode:d}=br(e),p=kr(e,o,l),h=xr(p,a,s),m=tn(R.a.currencySymbols,d),f=Er({price:h,unitCost:u,decimalDigits:m,maxFractionDigits:Jt}),g=n.get(J.D);return Object(B.jsxs)(Y.a,{className:"m-bottom-3",children:[g&&Object(B.jsx)(fa.a,{basis:"50%",grow:1,className:"m-right-3",children:Object(B.jsx)(Ap,{formControlProps:{tooltip:Object(B.jsx)(v.a,{message:"products.edit.unitCost.labelTooltip"}),tooltipPlacement:"bottom right"},subject:e,savedSubject:t,property:g,readOnly:i,onChange:r,multiCurrencyCurrencyCode:o,min:0,"data-selenium-test":"product-unit-cost-input","data-test-id":"product-unit-cost-input",onValidationChange:c})}),Object(B.jsx)(fa.a,{basis:"50%",grow:1,children:Object(B.jsx)(N.a,{label:Object(B.jsx)(v.a,{message:"products.edit.margin.label"}),children:Object(B.jsx)(Mp.a,{disabled:!0,currency:o,value:f,isNativeCurrency:!1,"data-selenium-test":"product-price-margin-input","data-test-id":"product-price-margin-input",maxFractionDigits:Jt})})})]})}var Up=Object(r.memo)(Bp);const Vp={required:!0};class Hp extends r.Component{constructor(...e){super(...e);this.clearPriceIfCurrencyMismatched=()=>{const{subject:e,currencyCode:t,onPropertiesChange:n}=this.props;Ar(t,e)&&n({[J.t]:null})};this.handlePriceChange=e=>{const{subject:t,onPropertiesChange:n,currencyCode:r}=this.props;n(e);Ar(r,t)&&n({[J.n]:r})}}componentDidMount(){this.clearPriceIfCurrencyMismatched()}renderUnitCostAndMargin(){const{currencyCode:e,subject:t,savedSubject:n,onPropertiesChange:r,properties:i,readOnly:o}=this.props,a=Lt(t,J.l),s=Lt(t,J.m),c=vr(a,s),l=Cr(a,s,c);return Object(B.jsx)(Up,{subject:t,savedSubject:n,properties:i,currencyCode:e,discountValue:Ht(l),discountType:c,onPropertiesChange:r,readOnly:o})}renderPriceAndBillingFrequency(){const{subject:e,savedSubject:t,currencyCode:n,properties:r,readOnly:i,onPropertiesChange:o}=this.props,a=r.get(J.w)?"m-right-3":void 0,s=r.get(J.t);return Object(B.jsxs)(Y.a,{className:"m-bottom-3",children:[s&&Object(B.jsx)(fa.a,{basis:"50%",grow:1,className:a,children:Object(B.jsx)(Ap,{className:"m-right-3",subject:e,savedSubject:t,property:s,onChange:this.handlePriceChange,min:0,multiCurrencyCurrencyCode:n,formControlProps:Vp,readOnly:i,"data-test-id":"line-item-cost-price-input"})}),r.get(J.w)&&Object(B.jsx)(fa.a,{basis:"50%",children:Object(B.jsx)(Lp,{subject:e,properties:r,onPropertiesChange:o,readOnly:i})})]})}renderLineItemTaxes(){const{isUngatedForLineItemTaxes:e,properties:t,subject:n,savedSubject:r,onPropertiesChange:i}=this.props;if(!e)return null;const o=t.get("hs_tax_rate_group_id");return Object(B.jsx)(Sp.Consumer,{children:e=>Object(B.jsx)(Ap,{subject:n,savedSubject:r,property:o,onChange:i,propertyInputValidation:e.hs_tax_rate_group_id})})}render(){const{className:e,isPopover:t}=this.props,n=Hd()(e,t&&"popover");return Object(B.jsxs)("div",{className:n,"data-test-id":"line-item-cost",children:[this.renderPriceAndBillingFrequency(),this.renderUnitCostAndMargin(),this.renderLineItemTaxes()]})}}Hp.contextType=Dt;var qp=Hp,Gp=n(2656),Wp=n(1484),zp=n(747),$p=n(2765);const Kp=Object(Gp.a)({uploadedFileAccess:$p.d.VISIBLE_IN_APP_PUBLIC_TO_ALL_INDEXABLE,withCanva:!0,withShutterstock:!0,specificCanvaTemplates:["BlogBanner","BookCover"]});function Yp({subject:e,savedSubject:t,property:n,onChange:i,onValidationChange:o,onSuccess:a,onError:s,readOnly:c}){const l=Object(r.useContext)(Dt),u=Gt(e),[d,p]=Object(r.useState)(!1),h=Object(r.useCallback)(()=>{$e.log("toggleFilePickerForImageURL",{action:"Open file picker for image URL",objectType:u});p(!0)},[u]),f=Object(r.useCallback)(()=>{$e.log("toggleFilePickerForImageURL",{action:"Close file picker for image URL",objectType:u});p(!1)},[u]),g=n.label,b=Object(r.useMemo)(()=>({label:Object(B.jsxs)(Y.a,{align:"center",justify:"between",children:[Object(Vr.b)(g),Object(B.jsx)(m.a,{onClick:h,use:"link","data-test-id":"file-picker-image-button",disabled:c,children:Object(B.jsx)(v.a,{message:"products.image.selectImage"})})]})}),[g,h,c]),O=Object(r.useCallback)(e=>{$e.log("selectFileForImageURL",{action:"Select file for image URL",objectType:u});i({[n.name]:e.url});p(!1)},[u,n.name,i]);function y(){return Object(B.jsx)(Kp,{auth:l,children:Object(B.jsx)(Wp.a,{type:zp.b.IMAGE,pickerType:zp.k.SIDE_MODAL,onClose:f,onSelect:O,withBulkImageImport:!1})})}return Object(B.jsxs)(B.Fragment,{children:[d&&y(),Object(B.jsx)(Ap,{subject:e,savedSubject:t,validateUrl:!0,property:n,onChange:i,onValidationChange:o,readOnly:c,onError:s,onSuccess:a,formControlProps:b})]})}var Xp=Object(r.memo)(Yp);const Jp={required:!0};function Qp({subject:e,savedSubject:t,properties:n,readOnly:i,currencyCode:o,onPropertiesChange:a,onValidationChange:s}){const c=Gr(n),l=Dr(e,o,c),u=Object(r.useCallback)(e=>{const t=Object.assign({price:e[l]},c?{[Object(J.G)(o)]:e[l]}:{});a(t)},[o,c,a,l]),d=n.get(J.w)?"m-right-3":void 0,p=n.get(l);return Object(B.jsxs)("div",{"data-test-id":"product-cost",children:[Object(B.jsxs)(Y.a,{className:"m-bottom-3",children:[p&&Object(B.jsx)(fa.a,{basis:"50%",grow:1,className:d,children:Object(B.jsx)(Ap,{subject:e,savedSubject:t,property:p,value:Lt(e,l)||"",onChange:u,min:0,multiCurrencyCurrencyCode:o,formControlProps:Jp,readOnly:i,"data-selenium-test":"product-price-input",onValidationChange:s})}),n.get(J.w)&&Object(B.jsx)(fa.a,{basis:"50%",children:Object(B.jsx)(Lp,{subject:e,properties:n,onPropertiesChange:a,readOnly:i})})]}),Object(B.jsx)(Up,{subject:e,savedSubject:t,properties:n,onPropertiesChange:a,currencyCode:o,readOnly:i,onValidationChange:s})]})}var Zp=Object(r.memo)(Qp);function eh({subject:e,onPropertiesChange:t,readOnly:n,propertyName:i=J.C}){const{isGlobalTermSet:o}=ip(i),a=Lt(e,i),s=Object(r.useCallback)(({target:{value:e}})=>{const n=Zn(e);(n||a)&&t({[i]:n})},[a,t,i]),c=Qn(a)||0,l=!Kr(e,Dp(It));return Object(B.jsxs)(Y.a,{align:"center",children:[Object(B.jsx)(F.a,{disabled:!o,title:Object(B.jsx)(v.a,{message:"globalTerms.inputTooltip"}),children:Object(B.jsx)(Yd.a,{"data-selenium-test":"property-input-term","data-test-id":"property-input-term",value:c,onChange:s,min:0,precision:0,parser:Math.round,readOnly:n||o,placeholder:R.a.text("products.term.none"),error:l,className:"m-right-2"})}),l&&Object(B.jsx)(F.a,{title:Object(B.jsx)(v.a,{message:"lineItems.validation.termBillingFrequency"}),children:Object(B.jsx)(Op.a,{"data-test-id":"term-error-icon",name:"warning",size:"xs",color:gl.CANDY_APPLE})})]})}var th=Object(r.memo)(eh);const nh="term_in_months",rh=Object(Pr.a)((e=!1)=>({[et.C]:Object.assign({[J.q]:{order:-1/0}},!e&&{[J.C]:{label:Object(Vr.b)(nh)}},{[J.v]:{canDelete:!1},[J.t]:{canDelete:!1},[J.c]:{canDelete:!1},[J.a]:{label:R.a.text("lineItems.totals."+J.a)},[J.d]:{label:R.a.text("lineItems.totals."+J.d)},[J.o]:{label:R.a.text("lineItems.totals."+J.o)},[J.A]:{label:R.a.text("lineItems.totals."+J.A)}}),[et.q]:{[J.a]:{label:R.a.text("lineItems.totals."+J.a)},[J.d]:{label:R.a.text("lineItems.totals."+J.d)},[J.o]:{label:R.a.text("lineItems.totals."+J.o)},[J.A]:{label:R.a.text("lineItems.totals."+J.A)}}}));function ih(e,t,n){const r=rh(n)[e];return r&&r[t]||{}}const oh={"associations.contact":"customerDataPropertyUtils.PropertyDisplay.associatedcontactid","_inbounddbio.importid_":"customerDataPropertyUtils.PropertyDisplay.inbounddbImport","associations.company":"customerDataPropertyUtils.PropertyDisplay.associatedcompanyid","engagement.createdBy":"customerDataPropertyUtils.PropertyDisplay.taskCreatedBy","engagement.ownerId":"customerDataPropertyUtils.PropertyDisplay.taskOwner","engagement.timestamp":"customerDataPropertyUtils.PropertyDisplay.taskDueDate","engagement.type":"customerDataPropertyUtils.PropertyDisplay.engagementType","formSubmissions.formId":"customerDataPropertyUtils.PropertyDisplay.formSubmissions","listMemberships.listId":"customerDataPropertyUtils.PropertyDisplay.listMemberships","metadata.body":"customerDataPropertyUtils.PropertyDisplay.taskBody","metadata.reminders":"customerDataPropertyUtils.PropertyDisplay.taskReminder","metadata.status":"customerDataPropertyUtils.PropertyDisplay.taskStatus","metadata.subject":"customerDataPropertyUtils.PropertyDisplay.taskSubject","metadata.taskType":"customerDataPropertyUtils.PropertyDisplay.taskType",associatedcompanyid:"customerDataPropertyUtils.PropertyDisplay.associatedcompanyid",relatesTo:"customerDataPropertyUtils.PropertyDisplay.taskRelatesTo",pipeline:"customerDataPropertyUtils.PropertyDisplay.deals.pipeline",days_to_close:"customerDataPropertyUtils.PropertyDisplay.deals.days_to_close",amount_in_home_currency:"customerDataPropertyUtils.PropertyDisplay.deals.amount_in_home_currency",hs_projected_amount:"customerDataPropertyUtils.PropertyDisplay.deals.hs_projected_amount",hs_closed_amount:"customerDataPropertyUtils.PropertyDisplay.deals.hs_closed_amount",hs_projected_amount_in_home_currency:"customerDataPropertyUtils.PropertyDisplay.deals.hs_projected_amount_in_home_currency",hs_closed_amount_in_home_currency:"customerDataPropertyUtils.PropertyDisplay.deals.hs_closed_amount_in_home_currency",hs_deal_stage_probability:"customerDataPropertyUtils.PropertyDisplay.deals.hs_deal_stage_probability"},ah=e=>e instanceof yt.a;function sh(e,t=oh){if(!e)return;const{hubspotDefined:n,label:r,name:i}=e;if(n&&Object.prototype.hasOwnProperty.call(t,i))return Object(ec.a)(t[i]);const o=ah(e)?e.isBidenProperty:void 0,a=o?i:r||i,s=o?"bidenProperties":void 0;return n||o?Object(Vr.b)(a,s)||i:a}function ch({readOnly:e,subject:t,savedSubject:n,onPropertiesChange:i,numPaymentsProperty:o,termProperty:a}){const s=Dp(_t),c=Object(r.useMemo)(()=>Object(B.jsx)(N.a,{label:s?sh(a):ih(et.C,J.C).label,tooltip:!s&&Object(B.jsx)(v.a,{message:"products.edit.term.labelTooltip"}),children:Object(B.jsx)(th,{subject:t,onPropertiesChange:i,readOnly:e})}),[t,i,e,s,a]);return Object(B.jsxs)(Y.a,{className:"m-bottom-3",children:[a&&Object(B.jsx)(fa.a,{basis:"50%",className:"m-right-3",children:c}),o&&Object(B.jsx)(fa.a,{basis:"50%",children:Object(B.jsx)(Ap,{subject:t,savedSubject:n,property:o})})]})}var lh=Object(r.memo)(ch),uh=n(282);function dh(){return Object(B.jsx)(L.a,{type:"warning",className:"m-bottom-3","data-test-id":"synced-properties-banner",children:Object(B.jsx)(uh.a,{message:"products.edit.syncedPropertiesBanner",options:{KnowledgeBaseButton:Object(B.jsx)(va.a,{use:"link",url:"https://community.hubspot.com/t5/Sales-Integrations/In-Public-Beta-Products-created-by-Shopify-and-EcommBridge-Apps/m-p/559123#M3927"})}})})}var ph=Object(r.memo)(dh);class hh extends r.Component{constructor(e,t){super(e,t);this.fetchProductBySKU=Object(Ke.a)(200,({skuValue:e,successCallback:t,errorCallback:n})=>St(e).then(t,n));this.isNew=()=>void 0===this.props.subject||!Xt(this.props.subject);this.isMultiCurrencyActive=()=>{const{properties:e=new Map}=this.props;return Gr(e)};this.validateUniqueSKU=e=>{if(!e)return this.setState({hasSKUConflict:!1});const t=this.isNew(),n=String(Xt(this.props.subject));return this.fetchProductBySKU({skuValue:e.trim(),successCallback:e=>this.setState({hasSKUConflict:t||e.id!==n}),errorCallback:()=>this.setState({hasSKUConflict:!1})})};this.setProperties=e=>{Object.entries(e).forEach(([e,t])=>this.setProperty(e,t))};this.setProperty=(e,t)=>{this.setState(({subject:n,modifiedProperties:r})=>({subject:be(n,e,t),modifiedProperties:r.add(e)}))};this.handleValueChange=e=>{const{subject:t,currencyCode:n}=this.props;this.setProperties(e);const r=Dr(t,n,this.isMultiCurrencyActive());!Object.hasOwnProperty.call(e,"price")&&Object.hasOwnProperty.call(e,r)&&this.setProperty("price",e[r]);Object.hasOwnProperty.call(e,"hs_sku")&&!Kt(this.props.subject)&&this.validateUniqueSKU(e.hs_sku);""===e.hs_images&&this.setState({hasImageUrlError:!1});""===e.hs_url&&this.setState({hasUrlError:!1})};this.handleValidationChange=(e,{loading:t,invalid:n,saveable:r,message:i})=>{this.setState(({draftValidation:o})=>({draftValidation:Object.assign({},o,{[e]:{loading:t,invalid:n,saveable:r,message:i}})}))};this.handleSave=({addAnother:e=!1}={})=>{const{subject:t,modifiedProperties:n}=this.state;if(!n.size){this.props.onReject();return}e?this.setState({saveAndAddIsLoading:!0}):this.setState({saveIsLoading:!0});const r=this.props.onConfirm&&this.props.onConfirm({subject:t,modifiedProperties:n,addAnother:e});r&&"function"==typeof r.then?r.then(()=>{this.setState({saveIsLoading:!1,saveAndAddIsLoading:!1,savedSubject:t})}).catch(z):this.setState({saveIsLoading:!1,saveAndAddIsLoading:!1,savedSubject:t})};this.getValidationMessages=()=>{const{currencyCode:e}=this.props,{subject:t,hasSKUConflict:n,hasImageUrlError:r,hasUrlError:i,draftValidation:o,lineItemValidation:a}=this.state,s=this.isMultiCurrencyActive(),c=Lt(t,J.q),l=kr(t,e,s);return[!c&&Object(B.jsx)(v.a,{message:"products.edit.validation.name"}),null===l&&(s?Object(B.jsx)(v.a,{message:"products.edit.validation.companyCurrencyPrice",options:{currencyCode:e}}):Object(B.jsx)(v.a,{message:"products.edit.validation.price"})),n&&Object(B.jsx)(v.a,{message:"products.edit.validation.productSKU"}),(r||i)&&Object(B.jsx)(v.a,{message:"products.edit.validation.url"}),...a.map(({errorMessage:e})=>e),...Object.values(o).map(({message:e})=>e)].filter(Boolean)};this.renderHeaderText=()=>Kt(this.props.subject)?this.isNew()?R.a.text("products.edit.header.createLineItem"):R.a.text("products.edit.header.editLineItem"):this.isNew()?R.a.text("products.edit.header.createProduct"):R.a.text("products.edit.header.editProduct");this.renderFolder=()=>{if(Kt(this.props.subject))return null;const{subject:e}=this.state,t=Lt(e,ye);return Object(B.jsx)(N.a,{label:Object(B.jsx)(v.a,{message:"folders.folderSelect.label"}),children:Object(B.jsx)(ma,{disabled:this.props.readOnly,value:t,onChange:this.handleValueChange})})};this.renderCost=()=>{const{subject:e,savedSubject:t}=this.state,{currencyCode:n,properties:r=new Map,readOnly:i,editPanelConfig:o,scrollToDelayBillingControls:a,isUngatedForLineItemTaxes:s}=this.props,c={properties:r,onPropertiesChange:this.setProperties,currencyCode:n,readOnly:i,scrollToDelayBillingControls:a};if(Kt(e)&&o&&o.PriceSection){const t=Object.assign({},c,{subject:e});return Object(B.jsx)(o.PriceSection,Object.assign({},t))}return!Kt(e)||t&&!Kt(t)?Object(B.jsx)(Zp,Object.assign({},c,{onValidationChange:this.handleValidationChange,subject:e,savedSubject:t})):Object(B.jsx)(qp,Object.assign({className:"product-cost"},c,{subject:e,savedSubject:t,isUngatedForLineItemTaxes:s}))};this.renderPropertyGroup=e=>{const{properties:t=new Map,currencyCode:n,readOnly:r,supplementalLineItemProperties:i={},scrollToDelayBillingControls:o,sourceAppName:a,defaultCurrencyCode:s}=this.props,{hasSKUConflict:c,savedSubject:l}=this.state,u=Ft(this.context,wt),d=Kt(this.props.subject)&&!!Lt(this.state.subject,J.u),p=Hr(e,t),h=this.state.subject,m=p.map(e=>Object(B.jsx)(Ap,Object.assign({subject:h,savedSubject:l,property:e,onChange:this.handleValueChange,onValidationChange:this.handleValidationChange,readOnly:r},Object(Ie.e)(e)&&{min:0,multiCurrencyCurrencyCode:s}),e.name)),f=t.get(J.i),g=t.get(J.k),b=t.get("hs_images"),O=t.get(J.r),y=t.get("hs_product_type"),j=t.get(J.x),C=t.get(J.C),x=t.get("hs_url"),E=t.get(u?"hs_folder":"hs_folder_name"),T=t.get(J.q);switch(e.name){case Ce:case X:return Object(B.jsxs)("div",{className:"m-bottom-12",children:[Object(B.jsx)("h4",{children:qr(e)}),T&&Object(B.jsx)(Ap,{"data-test-id":"line-item-name-input",subject:h,savedSubject:l,property:T,onChange:this.handleValueChange,onValidationChange:this.handleValidationChange,formControlProps:{required:!0},readOnly:r}),j&&Object(B.jsx)(Ap,{subject:h,savedSubject:l,property:j,readOnly:r||d,onChange:this.handleValueChange,onValidationChange:this.handleValidationChange,formControlProps:{error:c,validationMessage:c&&Object(B.jsx)(v.a,{message:"products.edit.validation.productSKU"}),labelTooltip:d&&Object(B.jsx)(v.a,{message:"products.edit.validation.lineItemSKU"})}}),g&&Object(B.jsx)(Ap,{subject:h,savedSubject:l,property:g,onChange:this.handleValueChange,onValidationChange:this.handleValidationChange,rows:6,readOnly:r}),i[Nt]&&Object(B.jsx)(Ap,{subject:h,savedSubject:l,property:i[Nt],onChange:this.handleValueChange,readOnly:r}),y&&Object(B.jsx)(Ap,{subject:h,savedSubject:l,property:y,onChange:this.handleValueChange,onValidationChange:this.handleValidationChange,readOnly:r}),b&&Object(B.jsx)(Xp,{subject:h,savedSubject:l,property:b,onChange:this.handleValueChange,onValidationChange:this.handleValidationChange,readOnly:r,onError:()=>this.setState({hasImageUrlError:!0}),onSuccess:()=>this.setState({hasImageUrlError:!1})}),x&&Object(B.jsx)(Ap,{subject:h,savedSubject:l,validateUrl:!0,property:x,onChange:this.handleValueChange,onValidationChange:this.handleValidationChange,readOnly:r,onError:()=>this.setState({hasUrlError:!0}),onSuccess:()=>this.setState({hasUrlError:!1})}),"CRM_INDEX_UI"===a?E&&Object(B.jsx)(Ap,{subject:h,savedSubject:l,property:E,onChange:this.handleValueChange,onValidationChange:this.handleValidationChange,readOnly:r}):this.renderFolder(),m]},e.name);case xe:{const t=G(n);return Object(B.jsxs)("div",{className:"m-bottom-12",children:[Object(B.jsxs)(Y.a,{justify:"between",align:"start",children:[Object(B.jsx)("h4",{children:qr(e)}),Object(B.jsx)("span",{"data-test-id":"price-group-currency-label",children:Object(B.jsx)(q.a,{message:"products.edit.price.currency",options:{currencyLabel:t}})})]}),this.renderCost(),m]},e.name)}case Ee:{const n=e.properties.filter(e=>{const n=t.get(e);return null!=n&&null!=Object(Ie.t)(n)});return n.length>0&&Object(B.jsxs)("div",{className:"m-bottom-12","data-test-id":"multicurrency-group",children:[Object(B.jsxs)(Y.a,{className:"m-top-12",justify:"between",align:"start",children:[Object(B.jsx)("h4",{children:qr(e)}),Object(B.jsx)(D.a,{external:!0,href:Fr(),children:Object(B.jsx)(v.a,{message:"products.edit.manageCurrencies"})})]}),n.map(e=>{const n=t.get(e);return n&&Object(B.jsx)(Ap,{subject:h,savedSubject:l,property:n,onChange:this.handleValueChange,onValidationChange:this.handleValidationChange,readOnly:r},e)}),m]},e.name)}case Te:case Se:return C||0!==p.length?Object(B.jsxs)("div",{className:"m-bottom-12",children:[Object(B.jsx)("h4",{children:qr(e)}),f&&Object(B.jsx)(Ap,{subject:h,savedSubject:l,property:f,onChange:this.setProperties,readOnly:r}),Object(B.jsx)(lh,{subject:h,savedSubject:l,onPropertiesChange:this.setProperties,readOnly:r,numPaymentsProperty:O,termProperty:C}),Kt(h)&&Object(B.jsx)(Ud,{subject:h,savedSubject:l,allProperties:Object.fromEntries(t.entries()),onPropertiesChange:this.setProperties,autoFocusInputOnMount:o,readOnly:r}),m]},e.name):null;default:return e.hubspotDefined||0===p.length?null:Object(B.jsxs)("div",{className:"m-bottom-12",children:[Object(B.jsx)("h4",{"data-test-id":"custom-property-group-header",children:qr(e)}),m]},e.name)}};const{subject:n}=e,r=this.isNew()?new Set(Object.keys(n.properties)):new Set;this.state={subject:n,savedSubject:n,modifiedProperties:r,hasSKUConflict:!1,hasImageUrlError:!1,hasUrlError:!1,draftValidation:{},lineItemValidation:[]}}componentDidMount(){const{subject:e,sourceAppName:t,ungatedForTermFrequencyValidation:n}=this.props;$e.log("openProductOrLineItemPanel",{action:this.isNew()?"create":"edit",objectType:Gt(e),sourceIsShopify:ur(e),sourceIsEcommBridge:dr(e),screen:t||""});Xr(Kt(e)?[e]:[],n).then(e=>{this.setState({lineItemValidation:e})}).catch(z)}getValidationLoading(){const{draftValidation:e}=this.state;return Object.values(e).some(({loading:e})=>e)}render(){const{onReject:e,addAnother:t,propertyGroups:n,readOnly:r}=this.props,{subject:i,saveIsLoading:o,saveAndAddIsLoading:a}=this.state,s=this.getValidationMessages(),c=this.getValidationLoading(),l=0===s.length,u=o||a;return Object(B.jsxs)(j.a,{"data-test-id":"product-edit-modal-panel",className:"fs-mask",children:[Object(B.jsxs)(x.a,{children:[Object(B.jsx)(C.a,{onClick:e}),Object(B.jsx)($.a,{children:this.renderHeaderText()})]}),Object(B.jsxs)(O.a,{children:[!lr(i)&&Object(B.jsx)(ph,{}),n&&Object(B.jsx)(K.a,{"data-test-id":"property-groups-form",children:[...n.values()].map(this.renderPropertyGroup)})]}),Object(B.jsxs)(y.a,{children:[!r&&Object(B.jsx)(F.a,{disabled:l,title:s[0],children:Object(B.jsx)(W.a,{use:"primary","data-selenium-test":"save-product-btn","data-test-id":"save-product-btn",onClick:()=>this.handleSave(),loading:o,failed:!0,disabled:c||!l||u,children:R.a.text("products.edit.footer.save")})}),!r&&this.isNew()&&t&&Object(B.jsx)(F.a,{disabled:l,title:s[0],children:Object(B.jsx)(W.a,{use:"secondary",onClick:()=>this.handleSave({addAnother:!0}),loading:a,failed:!0,disabled:c||!l||u,"data-test-id":"save-and-add-product-btn",children:R.a.text("products.edit.footer.saveAndAdd")})}),Object(B.jsx)(m.a,{use:"secondary",onClick:e,"data-test-id":"cancel-product-btn",children:R.a.text("products.edit.footer.cancel")})]})]})}}hh.contextType=Dt;var mh=hh;const fh={properties:{},objectId:null};function gh(e){return{editCrmObjectRequestStatus:d.s(e,{objectType:h.a.PRODUCT}),objectSchemaForForm:d.j(e,{objectType:h.a.PRODUCT})}}const bh={createProduct:o.b,editProduct:o.c,fetchCrmObjectSchemaGroups:o.f},Oh=Object(i.connect)(gh,bh);class yh extends r.PureComponent{constructor(e){super(e);this.handleSave=e=>{const{createProduct:t,editProduct:n,selectedProduct:r}=this.props,{subject:i}=e,o=i.objectId,a=i.properties.name.value,s=Object.values(e.subject.properties).reduce((e,t)=>t.name&&t.value?Object.assign({},e,{[t.name]:t.value}):e,{}),c=Object.assign({objectType:h.a.PRODUCT,objectName:a},o?{objectId:o}:{},{properties:s});r?n(c).catch(e=>{setTimeout(()=>{throw e})}):t(c).catch(e=>{setTimeout(()=>{throw e})});this.setState({newProductName:a})};this.handleReject=()=>{const{onCloseModal:e}=this.props;e()};this.subject=e.selectedProduct||fh;this.state={}}componentDidMount(){this.props.fetchCrmObjectSchemaGroups(h.a.PRODUCT).catch(e=>{setTimeout(()=>{throw e})})}componentDidUpdate(e){const{newProductName:t,propertiesMap:n,propertyGroups:r}=this.state,{editCrmObjectRequestStatus:i,onCloseModal:o,onSelect:a,objectSchemaForForm:s}=this.props,{editCrmObjectRequestStatus:c}=e;if(!n&&!r&&s){const e=Et(s,e=>e.name),t=new Map(Object.entries(xt(s)));this.setState({propertyGroups:e,propertiesMap:t})}if(t&&c[t]&&c[t].status===w.PENDING&&i[t].status===w.SUCCEEDED){a(i[t].id);o()}}render(){const{homeCurrencyCode:e,defaultCurrencyCode:t}=this.props,{propertiesMap:n,propertyGroups:r}=this.state;return Object(B.jsx)(mh,{properties:n,propertyGroups:r,currencyCode:e,defaultCurrencyCode:t,subject:this.subject,onConfirm:this.handleSave,onReject:this.handleReject,sourceAppName:"CRM_INDEX_UI"})}}var jh=Oh(yh);class vh extends r.PureComponent{render(){const{defaultCurrencyCode:e,failedFetchMessage:t,fetchedProps:n,homeCurrencyCode:r,objects:i,objectsFetchRequestStatus:o,objectType:a,onCloseModal:s,onSelect:c,onUpdateObjects:l,selectedObject:u,selectModalPage:d,totalObjects:p,value:m}=this.props;return Object(B.jsxs)(B.Fragment,{children:[d===f.b.SELECT&&i&&Object(B.jsx)(H,{failedFetchMessage:t,fetchedProps:n,homeCurrencyCode:r||e||"",objects:i,objectsFetchRequestStatus:o,objectType:a,onCloseModal:s,onSelect:c,onUpdateObjects:l,totalObjects:p,value:m}),d===f.b.CREATE&&a===h.a.PRODUCT&&e&&Object(B.jsx)(jh,{defaultCurrencyCode:e,homeCurrencyCode:r||e,onCloseModal:s,onSelect:c,selectedProduct:u})]})}}var Ch=n(73);const xh=e=>"ContentComponents.cmv2.fields.product."+e,Eh=500,Th=h.a.PRODUCT,Sh="USD",Ih=[{property:"createdate",order:"DESC"}],wh="https://knowledge.hubspot.com/products/how-do-i-use-products",_h=Qr.a.p.withConfig({displayName:"Product__SelectedProductTitle",componentId:"sc-18ai5yz-0"})(["font-weight:500;margin:0 auto 5px;"]),Nh=Qr.a.p.withConfig({displayName:"Product__SelectedProductPrice",componentId:"sc-18ai5yz-1"})(["margin:0 auto 5px;"]);function Ah(e){return{homeCurrencyCode:p(e),productObjectSchema:d.g(e,{objectType:Th}),products:d.l(e,{objectType:Th}),productsWithPropertiesObject:d.q(e,{objectType:Th}),productsCache:d.m(e,{objectType:Th}),productsCacheRequestStatus:d.n(e),totalCacheObjects:d.o(e,{objectType:Th})}}const Dh={fetchCurrency:u,fetchProductsCache:o.h,clearProductsCache:o.a,fetchProduct:o.d,fetchCrmObjectSchema:o.e},kh=Object(i.connect)(Ah,Dh);class Ph extends r.PureComponent{constructor(e){super(e);this.objectProps={name:{tableLabel:R.a.text(xh("tableLabel.name"))},price:{tableLabel:R.a.text(xh("tableLabel.price"))},description:{}};this.propsToFetch=Object.keys(this.objectProps);this.handleModalOpen=e=>{e===f.b.SELECT&&this.updateProductsCache();this.setState({selectModalPage:e})};this.selectProduct=e=>{const{onFieldChange:t,fetchProduct:n}=this.props;n(Th,f.c,e);this.setState({selectedProductId:e});t({id:e})};this.deselectProduct=()=>{const{onFieldChange:e}=this.props;this.setState({selectedProductId:void 0});e({id:void 0})};this.updateProductsCache=e=>{const{clearProductsCache:t}=this.props,{query:n,offset:r}=e||{};t(Th);this.debouncedFetchProductsCache(Th,this.propsToFetch,Object.assign({count:I.f,sorts:Ih},n?{query:n}:{},r?{offset:r}:{}))};this.renderSelected=e=>{const{homeCurrencyCode:t,products:n}=this.props,r=n[e].properties;return Object(B.jsx)(Uu.a,{compact:!0,className:"m-y-4","data-test-id":"selected-product-box",children:Object(B.jsxs)(Y.a,{justify:"between",children:[Object(B.jsx)(Vu.a,{className:"p-all-5",children:Object(B.jsxs)(k.a,{children:[Object(B.jsx)(_h,{"data-test-id":"selected-product-name",children:r.name}),Object(B.jsx)(k.a,{use:"help",children:Object(B.jsx)(Nh,{children:Object(B.jsx)(T.a,{style:"currency",value:parseFloat(r.price),currencyCode:t,stripInsignificantZeros:!1},"key")})}),Object(B.jsx)("p",{"data-test-id":"selected-product-desc",children:r.description})]})}),Object(B.jsx)(Vu.a,{className:"p-all-5",children:Object(B.jsxs)(Y.a,{children:[Object(B.jsx)(m.a,{use:"transparent",className:"p-all-0",onClick:()=>this.setState({selectModalPage:f.b.CREATE}),"aria-label":R.a.text(xh("editProduct")),"data-test-id":"product-edit-button",children:Object(B.jsx)(Op.a,{name:"edit",color:gl.CALYPSO})}),Object(B.jsx)(m.a,{use:"transparent",className:"p-all-0 m-left-1",onClick:()=>this.deselectProduct(),"aria-label":R.a.text(xh("deleteProduct")),"data-test-id":"product-delete-button",children:Object(B.jsx)(Op.a,{name:"delete",color:gl.CALYPSO})})]})})]})})};this.renderNotSelected=()=>Object(B.jsxs)(B.Fragment,{children:[Object(B.jsx)(m.a,{use:"tertiary",size:"small",onClick:()=>this.handleModalOpen(f.b.SELECT),"data-test-id":"select-product-button",children:Object(B.jsx)(v.a,{message:xh("selectButton")})}),Object(B.jsxs)("p",{className:"m-top-3",children:[Object(B.jsx)(k.a,{children:Object(B.jsx)(v.a,{message:xh("or")})}),Object(B.jsx)(m.a,{use:"transparent",size:"small",className:"p-all-0",onClick:()=>this.handleModalOpen(f.b.CREATE),children:Object(B.jsx)(v.a,{message:xh("createButton")})})]})]});this.renderNoProducts=()=>Object(B.jsxs)(M.a,{illustration:"product-properties",illustrationProps:{width:150},className:"m-left-6 m-right-7",children:[Object(B.jsxs)(k.a,{use:"help",children:[Object(B.jsx)("p",{children:Object(B.jsx)(v.a,{message:xh("renderNoProducts.body")})}),Object(B.jsx)(D.a,{external:!0,href:wh,children:Object(B.jsx)(v.a,{message:xh("renderNoProducts.linkLearnMore")})})]}),Object(B.jsx)("div",{children:Object(B.jsx)(m.a,{use:"tertiary",size:"small",className:"m-top-6",onClick:()=>this.handleModalOpen(f.b.CREATE),"data-test-id":"no-product-create-button",children:Object(B.jsx)(v.a,{message:xh("createButton")})})})]});this.renderProductLoadingOrError=()=>{const{productsCacheRequestStatus:e}=this.props;return e===w.FAILED?Object(B.jsx)(L.a,{type:"danger",children:Object(B.jsx)(v.a,{message:xh("errorFetchingProducts")})}):Object(B.jsx)(_.a,{layout:"centered"})};this.renderProductField=()=>{const{products:e,productsCache:t}=this.props,{selectedProductId:n}=this.state;return Object.values(t).length||Object.values(e).length?n&&e[n]?this.renderSelected(n):this.renderNotSelected():this.renderNoProducts()};this.debouncedFetchProductsCache=Object(Ch.debounce)(e.fetchProductsCache,Eh);this.state={selectedProductId:e.value&&e.value.id}}componentDidMount(){const{fetchCurrency:e,fetchCrmObjectSchema:t}=this.props;e().catch(e=>{setTimeout(()=>{throw e})});t(Th).catch(e=>{setTimeout(()=>{throw e})})}componentDidUpdate(e){const{fetchProduct:t,productObjectSchema:n,value:r}=this.props,{productObjectSchema:i}=e;if(n&&!i){r&&r.id&&t(Th,f.c,r.id);this.debouncedFetchProductsCache(Th,this.propsToFetch,{count:3})}}render(){const{products:e,productsCache:t,totalCacheObjects:n,productsWithPropertiesObject:r,value:i,productsCacheRequestStatus:o,homeCurrencyCode:a}=this.props,{selectModalPage:s,selectedProductId:c}=this.state;return Object(B.jsxs)(B.Fragment,{children:[o===w.SUCCEEDED&&(c&&e[c]||!c)?this.renderProductField():this.renderProductLoadingOrError(),s&&Object(B.jsx)(vh,{defaultCurrencyCode:Sh,failedFetchMessage:xh("errorFetchingProducts"),fetchedProps:this.objectProps,homeCurrencyCode:a,objects:t,objectsFetchRequestStatus:o,objectType:Th,onCloseModal:this.handleModalOpen,onSelect:this.selectProduct,onUpdateObjects:this.updateProductsCache,selectedObject:r[c],selectModalPage:s,totalObjects:n,value:i})]})}}t.a=kh(Ph)},,,,,function(e,t,n){"use strict";var r=n(40),i=n(41),o=n.n(i),a=n(59),s=n(99),c=n(73),l=n(696),u=n(485),d=n(729),p=n(279),h=n(282),m=n(2741),f=n(4),g=n(2655),b=n(2712),O=n(490),y=n(2654),j=n(2634),v=n(1049);function C(e,...t){return Object(v.a)(t).get("gotowebinar/v1/settings")}function x(...e){return Object(v.a)(e).get("forms/v2/forms/gotowebinar-eligible")}function E(e,...t){return Object(v.a)(t).get("gotowebinar/v1/webinars/future?includeOnDemand=true")}var T=n(64),S=n(68);const I=Object(T.b)(S.GOTOWEBINAR_FETCH_SETTINGS,C),w=Object(T.b)(S.GOTOWEBINAR_FETCH_ELIGIBLE_FORMS,x),_=Object(T.b)(S.GOTOWEBINAR_FETCH_FUTURE_WEBINARS,E);var N=n(65);const A=e=>e.resources.goToWebinar.webinars,D=e=>e.resources.goToWebinar.settings,k=Object(N.a)([D],e=>e.accessTokenValid&&e.enabled&&(!e.accessTokenExpiration||(new Date).getTime()<e.accessTokenExpiration)),P=e=>e.resources.goToWebinar.eligibleForms,R=(e,t)=>t.formGuid,F=()=>Object(N.a)([P,R],(e,t)=>e.has(t));var L=n(45);function M(){return function(e,t){return{isFormEligible:F()(e,t),webinars:A(e)}}}const B={fetchEligibleForms:w,fetchFutureWebinars:_};function U(e){class t extends r.Component{componentDidMount(){this.props.fetchEligibleForms();this.props.fetchFutureWebinars()}render(){return Object(L.jsx)(e,Object.assign({},this.props))}}return Object(a.connect)(M,B)(t)}const V=e=>"ContentComponents.cmv2.fields.form.goToWebinar."+e;function H(e){return e&&e[e.length-1]?f.a.moment(e[e.length-1].startTime).format("LLL"):""}class q extends r.Component{constructor(e){super(e);this.onChange=this.onChange.bind(this)}get options(){return Object.keys(this.props.webinars).map(e=>{const t=this.props.webinars[e];return{value:e,text:`${t.subject} ${H(t.times)}`}})}onChange(e){this.props.onWebinarChange&&this.props.onWebinarChange(e.target.value)}renderHeader(){return Object(L.jsxs)("div",{className:"p-bottom-2",children:[Object(L.jsx)(O.a,{children:Object(L.jsx)(p.a,{message:V("header.label")})}),Object(L.jsx)("div",{children:Object(L.jsx)(h.a,{message:V("helpMessage.label"),options:{link:Object(L.jsx)(b.a,{external:!0,href:j.b.goToWebinar(),children:Object(L.jsx)(p.a,{message:V("helpMessage.link")})})}})})]})}renderPlaceholder(){return Object(L.jsx)(p.a,{message:V("placeholder.label")})}render(){const{isFormEligible:e,readOnly:t}=this.props;return Object(L.jsxs)("div",{children:[this.renderHeader(),Object(L.jsx)(y.a,{disabled:e,headingText:Object(L.jsx)(p.a,{message:V("tooltip.head")}),title:Object(L.jsx)(p.a,{message:V("tooltip.body")}),children:Object(L.jsx)(g.a,{placeholder:this.renderPlaceholder(),options:this.options,value:this.props.webinarKey,onChange:this.onChange,clearable:!0,disabled:!e,buttonUse:this.props.useOnDark?"form-on-dark":"form",readOnly:t})})]})}}var G=U(q),W=n(1206),z=n(2766),$=n(717),K=n(723),Y=n(724),X=n(751),J=n(508),Q=n(443),Z=n(1148),ee=n.n(Z),te=n(607);const ne=e=>"ContentComponents.cmv2.fields.form.addRedirectUrlModal."+e,re=new RegExp(/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-/]))?/);function ie(e){class t extends r.Component{constructor(e){super(e);this.onModalOpen=this.onModalOpen.bind(this);this.onModalClose=this.onModalClose.bind(this);this.onModalConfirm=this.onModalConfirm.bind(this);this.onUrlChange=this.onUrlChange.bind(this);this.onUrlBlur=this.onUrlBlur.bind(this);this.checkValidation=this.checkValidation.bind(this);const{value:t}=e,{redirect_url:n=""}=t&&"string"!=typeof t?t:{};this.state={open:!1,url:n,isValidUrl:!0}}shouldComponentUpdate(e,t){return ee()(this,e,t)}onModalOpen(){this.setState({open:!0})}onModalClose(){this.setState({open:!1})}onModalConfirm(){this.onModalClose();this.props.onFieldChange(Object.assign({},this.props.value,{redirect_id:null,redirect_url:this.state.url}))}onUrlChange(e){const t=e.target.value;this.setState({url:t});this.checkValidation(t)}onUrlBlur(){this.checkValidation(this.state.url)}checkValidation(e){this.setState({isValidUrl:!e||re.test(e)})}renderModal(){const{open:e,url:t,isValidUrl:n}=this.state;if(!e)return null;const r=!n&&Object(L.jsx)(p.a,{message:ne("invalidUrlMessage")});return Object(L.jsxs)(z.a,{width:600,children:[Object(L.jsxs)(K.a,{children:[Object(L.jsx)($.a,{onClick:this.onModalClose}),Object(L.jsx)(te.a,{children:Object(L.jsx)(p.a,{message:ne("header")})})]}),Object(L.jsxs)(Y.a,{children:[Object(L.jsx)("span",{children:Object(L.jsx)(p.a,{message:ne("message")})}),Object(L.jsx)(m.a,{label:Object(L.jsx)(p.a,{message:ne("input.label")}),error:Boolean(t&&!n),validationMessage:r,children:Object(L.jsx)(J.a,{placeholder:Object(s.a)(ne("input.placeholder")),onChange:this.onUrlChange,onBlur:this.onUrlBlur,value:t})})]}),Object(L.jsxs)(X.a,{children:[Object(L.jsx)(Q.a,{use:"primary",onClick:this.onModalConfirm,disabled:!(!t||n),children:Object(L.jsx)(p.a,{message:ne("buttons.add")})}),Object(L.jsx)(Q.a,{onClick:this.onModalClose,children:Object(L.jsx)(p.a,{message:ne("buttons.cancel")})})]})]})}render(){return Object(L.jsx)(e,Object.assign({},this.props,{AddRedirectUrlModal:this.renderModal(),openAddRedirectUrlModal:this.onModalOpen}))}}t.wrappedComponent=e;return t}var oe=n(1149),ae=n(2679),se=n(357),ce=n(1057);function le(e,...t){return Object(v.a)(t).get("targeted/v1/definitions/by-content/"+e)}const ue=Object(T.b)(S.TARGETED_FETCH_CRITERION,le),de=e=>ue(e);var pe=n(160),he=n(58),me=n(2758),fe=n(1267);const ge=e=>"ContentComponents.cmv2.fields.form."+e,be=Object.keys(fe.mb).filter(e=>![fe.lb.cta,fe.lb.icon,fe.lb.glyphs,fe.lb.source_code,fe.lb.snippet,fe.lb.visual_blocks,fe.lb.content_generation].includes(e));function Oe(e){return{pages:ce.f(e)}}const ye={fetchSmartContent:de};class je extends r.PureComponent{constructor(e){super(e);this.checkSmartContactPage=this.checkSmartContactPage.bind(this);this.onResponseTypeChange=this.onResponseTypeChange.bind(this);this.onMessageChange=this.onMessageChange.bind(this);this.onRedirectIdChange=this.onRedirectIdChange.bind(this);this.state={hasSmartContactLookup:{}}}componentDidMount(){const{value:{redirect_id:e}}=this.props;e&&this.checkSmartContactPage(e)}get fieldKey(){const{fieldKey:e}=this.props;return e&&e.join(".")}checkSmartContactPage(e){void 0===this.state.hasSmartContactLookup[e]&&this.props.fetchSmartContent(e).then(t=>{const n={hasSmartContactRule:!1};t&&Array.isArray(t)&&t.forEach(e=>{e.criteria.forEach(e=>{n.contactList=n.contactList||"CONTACT_LIST"===e.type;n.contactLifecycle=n.contactLifecycle||"CONTACT_LIFECYCLE"===e.type})});n.hasSmartContactRule=n.contactList||n.contactLifecycle;this.setState({hasSmartContactLookup:Object.assign({},this.state.hasSmartContactLookup,{[e]:n})})}).catch(e=>{setTimeout(()=>{throw e})})}onResponseTypeChange(e){this.props.onFieldChange(Object.assign({},this.props.value,{response_type:e.target.value}))}onMessageChange(e){this.props.onFieldChange(Object.assign({},this.props.value,{message:e}))}onRedirectIdChange(e){this.checkSmartContactPage(e.target.value);this.props.onFieldChange(Object.assign({},this.props.value,{redirect_id:e.target.value,redirect_url:null}))}renderResponseTypes(){const{value:{response_type:e},readOnly:t,hasFormsWriteAccess:n}=this.props,r=t||!n,i=Object.keys(me.j).map(t=>{const n=me.j[t];return Object(L.jsx)(oe.a,{checked:e===n,"data-selenium":`${this.fieldKey}:responseTypeInput:${n}`,name:`${this.fieldKey}.${t}`,onChange:this.onResponseTypeChange,readOnly:r,size:"small",value:n,children:Object(L.jsx)(p.a,{message:ge("responseType.options."+n)})},t)});return Object(L.jsx)(m.a,{className:"m-top-4",label:Object(s.a)(ge("responseType.label")),children:Object(L.jsx)("div",{children:i})})}renderRedirectOption({children:e}){return Object(L.jsx)(se.a,{children:e})}renderResponse(){const{AddRedirectUrlModal:e,componentsByType:t,fieldKey:n,hasFormsWriteAccess:r,modulePath:i,openAddRedirectUrlModal:o,pages:a,readOnly:c,useOnDark:u,value:{message:d,redirect_id:f,redirect_url:g,response_type:O}}=this.props,y=this.state.hasSmartContactLookup[f],j=t[pe.RICH_TEXT],v=t[pe.PAGE],C=c||!r;if(O===me.j.INLINE)return Object(L.jsx)(m.a,{"data-selenium":this.fieldKey+":response:inlineRichTextEditor",label:Object(s.a)(ge("message.label")),children:Object(L.jsx)(j,{enabled_features:be,fieldKey:n,modulePath:i,onFieldChange:this.onMessageChange,readOnly:C,value:d})});let x=null;a[f]&&(x=a[f].absoluteUrl);const E=g?[{text:g,value:g}]:[],T=Object(L.jsxs)(Q.a,{size:"small",use:"link",disabled:C,onClick:o,children:[Object(L.jsx)(ae.a,{className:"m-right-1",name:"add"}),Object(L.jsx)(p.a,{message:ge("redirect.addRedirectUrl")})]}),S=f?x:g,I=S&&Object(L.jsx)("div",{className:"m-top-2",children:Object(L.jsx)(b.a,{external:!0,href:S,children:Object(L.jsx)(p.a,{message:ge("redirect.viewLink")})})});return Object(L.jsx)(m.a,{"data-selenium":this.fieldKey+":response:redirectPageSelect",label:Object(s.a)(ge("redirect.label")),children:Object(L.jsxs)("div",{children:[Object(L.jsx)(v,{readOnly:C,onChange:this.onRedirectIdChange,extraOptions:E,dropdownFooter:T,value:g||f||"",placeholder:Object(s.a)(ge("redirect.selectPlaceholder")),required:!1,useOnDark:u}),I,e,y&&y.hasSmartContactRule&&Object(L.jsx)(l.a,{className:"m-y-3",type:"warning",children:Object(L.jsx)(h.a,{message:ge("redirect.smartContentWarning.message"),options:{smartContentWarningPartA:Object(L.jsx)(p.a,{message:y.contactList&&y.contactLifecycle?ge("redirect.smartContentWarning.listMembershipAndLifecycleStage"):y.contactList&&ge("redirect.smartContentWarning.listMembership")||y.contactLifecycle&&ge("redirect.smartContentWarning.lifecycleStage")}),smartContentWarningLink:Object(L.jsx)(b.a,{external:!0,use:"on-bright",href:"https://knowledge.hubspot.com/website-pages/smart-content-frequently-asked-questions#thank-you",children:Object(L.jsx)(p.a,{message:ge("redirect.smartContentWarning.link")})})}})})]})})}render(){return Object(L.jsxs)("div",{children:[this.renderResponseTypes(),this.renderResponse()]})}}je.propTypes={AddRedirectUrlModal:o.a.node,componentsByType:o.a.object.isRequired,fetchSmartContent:o.a.func.isRequired,fieldKey:o.a.array,hasFormsWriteAccess:o.a.bool,modulePath:o.a.string,onFieldChange:o.a.func.isRequired,openAddRedirectUrlModal:o.a.func.isRequired,pages:o.a.object,readOnly:o.a.bool,useOnDark:o.a.bool,value:o.a.oneOfType([o.a.object,o.a.string])};je.defaultProps={fieldKey:[],options:[],pages:{},readOnly:!1,scopes:[],value:{response_type:"inline",message:""}};var ve=Object(he.compose)(Object(a.connect)(Oe,ye),ie)(je),Ce=n(283),xe=n(2734),Ee=n(606),Te=n(434),Se=n(1304),Ie=n(49),we=n(725),_e=n(690),Ne=n(2627),Ae=n(2795),De=n(710),ke=n(1305),Pe=n(695),Re=n(66),Fe=n(1045),Le=n(1050),Me=n(2642),Be=n(2),Ue=n(1055);const Ve=["formGuid","formWorkflowDependency","hasWorkflowsAppAccess","truncate"];var He=e=>{let{formGuid:t,formWorkflowDependency:n,hasWorkflowsAppAccess:r,truncate:i}=e,o=Object(Be.a)(e,Ve);const{flowId:a,name:s}=n;let c,l;if(Object(Ue.e)(n,t)){c=j.b.formAutomation(t);l=!0}else{c=j.b.workflows(a,"AUTOMATION_PLATFORM");l=r}return l?Object(L.jsx)(b.a,Object.assign({external:!0,href:c,truncate:i},o,{children:s})):i?Object(L.jsx)(se.a,{children:s}):Object(L.jsx)("div",{children:s})};const qe=e=>"ContentComponents.cmv2.fields.form.formWorkflowDependencies."+e;function Ge(e,t){const{formWorkflowDependency:n,formGuid:r}=t,{flowId:i}=n||{};return{dependencyDeleteRequestStatus:Fe.i(e,{flowId:i,formGuid:r})}}const We={deleteFormWorkflowDependency:Me.f,deleteFormWorkflowDependencyAndWorkflow:Me.g},ze=Object(a.connect)(Ge,We),$e=({isRemoving:e,modalI18nKey:t,onClose:n,onRemoveWorkflow:r,workflowLink:i})=>Object(L.jsxs)(z.a,{use:"danger",children:[Object(L.jsxs)(K.a,{children:[Object(L.jsx)(te.a,{children:Object(L.jsx)(p.a,{message:qe(t+".header")})}),Object(L.jsx)($.a,{onClick:n})]}),Object(L.jsx)(Y.a,{children:Object(L.jsx)("div",{children:Object(L.jsx)(h.a,{message:qe(t+".message"),options:{workflowLink:i}})})}),Object(L.jsxs)(X.a,{children:[Object(L.jsx)(ke.a,{loading:e,onClick:r,use:"danger",children:Object(L.jsx)(p.a,{message:qe(t+".confirm")})}),Object(L.jsx)(Q.a,{onClick:n,use:"tertiary-light",children:Object(L.jsx)(p.a,{message:qe(t+".cancel")})})]})]}),Ke=({onClose:e,workflowLink:t,workflowName:n})=>Object(L.jsxs)(z.a,{children:[Object(L.jsxs)(K.a,{children:[Object(L.jsx)(te.a,{children:Object(L.jsx)(p.a,{message:qe("hasReferencesModal.header")})}),Object(L.jsx)($.a,{onClick:e})]}),Object(L.jsx)(Y.a,{children:Object(L.jsx)("div",{children:Object(L.jsx)(h.a,{message:qe("hasReferencesModal.message"),options:{workflowName:n,workflowLink:t}})})}),Object(L.jsx)(X.a,{children:Object(L.jsx)(Q.a,{onClick:e,use:"primary",children:Object(L.jsx)(p.a,{message:qe("hasReferencesModal.close")})})})]});var Ye=ze(({contentId:e,deleteFormWorkflowDependency:t,deleteFormWorkflowDependencyAndWorkflow:n,formGuid:i,formWorkflowDependency:o,hasWorkflowsAppAccess:a,hasWorkflowsDeleteAccess:s,onRemoveWorkflowEvent:c,dependencyDeleteRequestStatus:l})=>{const[u,d]=Object(r.useState)(!1),[h,m]=Object(r.useState)(!1),[f,g]=Object(r.useState)(!1),{canDelete:b,canRemoveEnrollmentCriteria:O,flowId:y,name:j}=o,v=Object(Ie.a)(l);Object(r.useEffect)(()=>{if(f&&l!==v){if(l===Re.FAILED){let e="removeFormFromWorkflowModal.removeError";b&&(e="deleteWorkflowModal.deleteError");Pe.a.addAlert({message:Object(L.jsx)(p.a,{message:qe(e),options:{workflowName:j}}),type:"danger"})}if(l===Re.FAILED||l===Re.SUCCEEDED){g(!1);d(!1)}}},[l,v,f,j,b]);const C=()=>{d(!1)},x=()=>{m(!1)},E=()=>{b?Object(Le.g)(y).then(e=>{const{flowReferences:t}=e||{};t&&t.length?m(!0):d(!0)}).catch(()=>{Pe.a.addAlert({message:Object(L.jsx)(p.a,{message:qe("deleteWorkflowModal.deleteError"),options:{workflowName:j}}),type:"danger"})}):d(!0)};let T=()=>{g(!0);c&&c();t(y,i,e).catch(e=>{setTimeout(()=>{throw e})})},S="removeFormFromWorkflowModal",I="dependencyRow.removeTooltip",w="remove",_=!1;if(b){T=()=>{g(!0);c&&c();n(y,i).catch(e=>{setTimeout(()=>{throw e})})};S="deleteWorkflowModal";I="dependencyRow.deleteTooltip";w="delete";if(!s){I="dependencyRow.disabledDeleteTooltip";_=!0}}else if(Object(Ue.e)(o,i)){I="dependencyRow.simpleWorkflowRemoveTooltip";_=!0}else if(!O){I="dependencyRow.disabledRemoveTooltip";_=!0}const N=Object(L.jsx)(He,{formGuid:i,formWorkflowDependency:o,hasWorkflowsAppAccess:a});return Object(L.jsxs)(r.Fragment,{children:[u&&Object(L.jsx)($e,{isRemoving:f,modalI18nKey:S,onClose:C,onRemoveWorkflow:T,workflowLink:N}),h&&Object(L.jsx)(Ke,{onClose:x,workflowLink:N,workflowName:j}),Object(L.jsx)(De.a,{disabled:_,onClick:E,size:"xs",tooltip:Object(L.jsx)(p.a,{message:qe(I)}),children:Object(L.jsx)(ae.a,{name:w})})]})});const Xe=e=>"ContentComponents.cmv2.fields.form.formWorkflowDependencies."+e;var Je=({contentId:e,formGuid:t,formWorkflowDependency:n,hasWorkflowsAppAccess:r,hasWorkflowsDeleteAccess:i,onEditWorkflowEvent:o,onRemoveWorkflowEvent:a,readOnly:s})=>{const c=()=>{o&&o()};let l;e&&!s&&(l=Object(L.jsx)(Ye,{contentId:e,formGuid:t,formWorkflowDependency:n,hasWorkflowsAppAccess:r,hasWorkflowsDeleteAccess:i,onRemoveWorkflowEvent:a}));return Object(L.jsx)("tr",{children:Object(L.jsx)(Ae.a,{className:"p-all-4",hoverContent:l,tooltip:n.name,children:Object(L.jsxs)(Te.a,{direction:"column",children:[Object(L.jsx)(He,{"data-selenium":"form-field-workflow-dependencies-workflow-link",formGuid:t,formWorkflowDependency:n,hasWorkflowsAppAccess:r,onClick:c,truncate:!0}),Object(L.jsx)(u.a,{children:Object(L.jsx)(h.a,{message:Xe("dependencyRow.lastUpdated"),options:{timestamp:Object(L.jsx)(Ne.a,{value:n.updateMetadata.updatedAt,format:"lll"})}})})]})})})};const Qe=5;var Ze=({contentId:e,formGuid:t,formWorkflowDependencies:n,hasWorkflowsAppAccess:i,hasWorkflowsDeleteAccess:o,onEditWorkflowEvent:a,onRemoveWorkflowEvent:s,readOnly:c,seleniumKey:l})=>{const[u,d]=Object(r.useState)(0),p=Object(Ie.a)(n.length)||0,h=n.length;Object(r.useEffect)(()=>{p>h&&u>0&&u*Qe>=h&&d(Math.ceil(h/Qe)-1)},[p,h,u]);const m=u*Qe,f=Math.ceil(n.length/Qe),g=f>1,b=n.slice(m,m+Qe);let O=[];g&&b.length<Qe&&(O=[...Array(Qe-b.length).keys()].map(e=>Object(L.jsx)("tr",{style:{backgroundColor:"inherit"},children:Object(L.jsx)("td",{style:e>0?{border:"none"}:{}})},e)));return Object(L.jsx)(we.a,{"data-selenium":l,responsiveWrapperClassName:"m-y-2",children:Object(L.jsxs)("tbody",{children:[b.map(n=>Object(L.jsx)(Je,{contentId:e,formGuid:t,formWorkflowDependency:n,hasWorkflowsAppAccess:i,hasWorkflowsDeleteAccess:o,onEditWorkflowEvent:a,onRemoveWorkflowEvent:s,readOnly:c},n.flowId)),O,g&&Object(L.jsx)("tr",{style:{backgroundColor:"inherit"},children:Object(L.jsx)("td",{className:"p-x-0",children:Object(L.jsx)(_e.a,{maxVisiblePageButtons:3,onPageChange:({target:{value:e}})=>d(e-1),page:u+1,pageCount:f})})})]})})},et=n(1054),tt=n(1074),nt=n(1052);const rt=["children","option"];function it(e,t){const{formGuid:n,contentId:r}=t;return{workflowSummariesOptions:et.f(e,{formGuid:n,contentId:r})}}const ot={addFormAsWorkflowEnrollmentCriteria:Me.a,fetchWorkflowSummaries:tt.c,clearWorkflowSummaries:tt.a,createWorkflowAndFormAsEnrollmentCriteria:Me.e},at=Object(a.connect)(it,ot),st=e=>"ContentComponents.cmv2.fields.form.formWorkflowDependencies.workflowSelect."+e,ct=50,lt=({isCreating:e,onClose:t,onWorkflowCreate:n})=>{const[i,o]=Object(r.useState)("");return Object(L.jsxs)(z.a,{children:[Object(L.jsxs)(K.a,{children:[Object(L.jsx)($.a,{onClick:t}),Object(L.jsx)(te.a,{children:Object(L.jsx)(p.a,{message:st("createNewWorkflowModal.header")})})]}),Object(L.jsx)(Y.a,{children:Object(L.jsx)(m.a,{label:Object(L.jsx)(p.a,{message:st("createNewWorkflowModal.nameLabel")}),children:Object(L.jsx)(J.a,{value:i,onChange:e=>o(e.target.value)})})}),Object(L.jsxs)(X.a,{children:[Object(L.jsxs)(ke.a,{disabled:!i,loading:e,onClick:()=>n(i),use:"primary",children:[Object(L.jsx)(p.a,{message:st("createNewWorkflowModal.create")}),Object(L.jsx)(ae.a,{name:"externalLink"})]}),Object(L.jsx)(Q.a,{onClick:t,children:Object(L.jsx)(p.a,{message:st("createNewWorkflowModal.cancel")})})]})]})};class ut extends r.Component{constructor(e){super(e);this.closeCreateModal=this.closeCreateModal.bind(this);this.setIsAdding=this.setIsAdding.bind(this);this.onWorkflowCreate=this.onWorkflowCreate.bind(this);this.onWorkflowSelect=this.onWorkflowSelect.bind(this);this.loadOptions=this.loadOptions.bind(this);this.debouncedLoadOptions=Object(c.debounce)(this.loadOptions,300);this.renderOption=this.renderOption.bind(this);this.state={input:"",isAdding:!1,isCreateModalOpen:!1,isCreating:!1}}closeCreateModal(){this.setState({isCreateModalOpen:!1})}setIsAdding(e){const{hasNoWorkflows:t,onAddFirstWorkflow:n}=this.props;t?n(e):this.setState({isAdding:e})}onWorkflowCreate(e){const{onAddWorkflowEvent:t,contentId:n,createWorkflowAndFormAsEnrollmentCriteria:r,formGuid:i}=this.props;this.setState({isCreating:!0});t&&t({created_new_workflow:!0});r(e,i,n).then(e=>{this.setState({isCreating:!1});e&&e.flowId?window.open(j.b.workflows(e.flowId,"AUTOMATION_PLATFORM")):Pe.a.addAlert({message:Object(L.jsx)(p.a,{message:st("createNewWorkflowModal.createError")}),type:"danger"});this.closeCreateModal()}).catch(e=>{setTimeout(()=>{throw e})})}onWorkflowSelect(e){const{addFormAsWorkflowEnrollmentCriteria:t,contentId:n,formGuid:r,onAddWorkflowEvent:i}=this.props,o=e.value;this.setIsAdding(!0);i&&i();t(o,r,n).then(t=>{this.setIsAdding(!1);t&&t.flowId||Pe.a.addAlert({message:Object(L.jsx)(p.a,{message:st("addError"),options:{workflowName:e.text}}),type:"danger"})}).catch(e=>{setTimeout(()=>{throw e})})}loadOptions(e,t,n){const{clearWorkflowSummaries:r,fetchWorkflowSummaries:i}=this.props;let{offset:o=0}=n||{};if(e!==this.state.input){this.setState({input:e});r();o=0}i({offset:o,name:e,limit:ct,sortBy:"createdAt",platformSourceApps:[nt.a.WORKFLOWS_CLASSIC,nt.a.WORKFLOWS_APP,nt.a.FORM_FIELD_FOLLOWUP,nt.a.CMS_FORM_MODULE_FIELD]}).then(e=>{const{workflowSummariesOptions:n}=this.props,{total:r}=e;t(null,{options:n,pagination:{hasMore:r>n.length,offset:o+ct,length:r}})}).catch(e=>{setTimeout(()=>{throw e})})}renderOption(e){let{children:t,option:n}=e,r=Object(Be.a)(e,rt);return Object(L.jsx)("span",Object.assign({},r,{children:Object(L.jsx)(y.a,{placement:"right",title:n.shouldEditManually?Object(L.jsx)(p.a,{message:st("disabledTooltip.shouldEditManually")}):Object(L.jsx)(p.a,{message:st("disabledTooltip.default")}),disabled:!n.disabled,children:t})}))}render(){const{isAdding:e,isCreateModalOpen:t,isCreating:n}=this.state,{clearWorkflowSummaries:i,hasNoWorkflows:o,hasWorkflowsAppAccess:a}=this.props;return e?Object(L.jsx)(xe.a,{className:"m-y-3",grow:!0}):Object(L.jsxs)(r.Fragment,{children:[t&&Object(L.jsx)(lt,{isCreating:n,onClose:this.closeCreateModal,onWorkflowCreate:this.onWorkflowCreate}),Object(L.jsx)(W.a,{buttonUse:o?"tertiary-light":"transparent",buttonSize:"sm",className:o?"":"p-left-0",clearCache:i,dropdownFooter:a&&Object(L.jsx)(Q.a,{onClick:()=>this.setState({isCreateModalOpen:!0}),use:"link",children:Object(L.jsx)(u.a,{children:Object(L.jsx)(p.a,{message:st("createNewWorkflow")})})}),itemComponent:this.renderOption,loadOptions:this.debouncedLoadOptions,menuWidth:250,options:this.props.workflowSummariesOptions,onChange:()=>{},onSelectedOptionChange:e=>this.onWorkflowSelect(e.target.value),saveCache:()=>{},value:null,valueRenderer:()=>o?Object(L.jsx)(p.a,{message:st("addFormToWorkflow")}):Object(L.jsx)(p.a,{message:st("addFormToAnotherWorkflow")})})]})}}var dt=at(ut),pt=n(2639);const ht=e=>"ContentComponents.cmv2.fields.form.formWorkflowDependencies."+e,mt=()=>{const{openUpgradeModal:e}=Object(pt.a)("forms-simple-automation");return Object(L.jsx)(m.a,{label:Object(L.jsx)(p.a,{message:ht("freePortalUgp.label")}),children:Object(L.jsxs)(Te.a,{direction:"column",children:[Object(L.jsx)(p.a,{message:ht("freePortalUgp.description")}),Object(L.jsxs)(Q.a,{className:"m-top-1",onClick:e,size:"xs",use:"link",children:[Object(L.jsx)(p.a,{message:ht("freePortalUgp.upgradeButton")}),Object(L.jsx)(Se.a,{})]})]})})};function ft(e,t){const{formGuid:n,contentId:r}=t;return{filteredWorkflows:et.b(e,{formGuid:n,contentId:r}),formWorkflowDependencies:Fe.h(e,{formGuid:n}),form:Fe.e(e,{formGuid:n}),allWorkflowHybridsHaveLoaded:et.a(e,{formGuid:n})}}const gt={fetchFormWorkflowDependencies:Me.m},bt=Object(a.connect)(ft,gt);class Ot extends r.Component{constructor(e){super(e);this.state={isAddingFirstWorkflow:!1}}componentDidMount(){const{fetchFormWorkflowDependencies:e,form:t,formGuid:n,formWorkflowDependencies:r}=this.props;n&&t&&!r&&e(n,t.formType)}componentDidUpdate(e){const{fetchFormWorkflowDependencies:t,form:n,formGuid:r,formWorkflowDependencies:i}=this.props,{form:o,formGuid:a}=e;r&&n&&!i&&(!o&&n||a!==r)&&t(r,n.formType)}get readOnly(){const{hasWorkflowsWriteAccess:e,readOnly:t}=this.props;return!e||t}get hasNoWorkflows(){const{filteredWorkflows:e}=this.props;return!e.length}renderWorkflowSelect(){const{contentId:e,formGuid:t,hasWorkflowsAppAccess:n,onAddWorkflowEvent:r}=this.props;return!this.readOnly&&e&&Object(L.jsx)(dt,{contentId:e,formGuid:t,hasNoWorkflows:this.hasNoWorkflows,hasWorkflowsAppAccess:n,onAddFirstWorkflow:e=>this.setState({isAddingFirstWorkflow:e}),onAddWorkflowEvent:r})}renderEmptyState(){const{contentId:e,formWorkflowDependencies:t}=this.props;return Object(L.jsxs)(Ee.a,{"data-selenium":"form-field-workflow-dependencies-empty-state",illustration:"empty-state-charts",illustrationProps:{className:"m-bottom-2",width:100},children:[Object(L.jsx)("div",{className:"m-bottom-2",children:Object(L.jsx)(u.a,{children:e&&t&&t.length?Object(L.jsx)(p.a,{message:ht("emptyState.onPage")}):Object(L.jsx)(p.a,{message:ht("emptyState.notOnPage")})})}),this.renderWorkflowSelect()]})}renderTable(){const{contentId:e,filteredWorkflows:t,formGuid:n,hasWorkflowsAppAccess:i,hasWorkflowsDeleteAccess:o,isFreePortal:a,onEditWorkflowEvent:s,onRemoveWorkflowEvent:c}=this.props;return Object(L.jsxs)(r.Fragment,{children:[Object(L.jsx)(Ze,{contentId:e,formWorkflowDependencies:t,formGuid:n,hasWorkflowsAppAccess:i,hasWorkflowsDeleteAccess:o,onEditWorkflowEvent:s,onRemoveWorkflowEvent:c,readOnly:this.readOnly,seleniumKey:"form-workflow-dependencies-table"}),!a&&this.renderWorkflowSelect()]})}renderFormControl(){const{allWorkflowHybridsHaveLoaded:e}=this.props;let t=null;t=!e||this.state.isAddingFirstWorkflow?Object(L.jsx)(xe.a,{layout:"centered",className:"p-y-3"}):this.hasNoWorkflows?this.renderEmptyState():this.renderTable();return Object(L.jsx)(m.a,{label:Object(L.jsx)(p.a,{message:ht("combinedWorkflows.label")}),tooltip:Object(L.jsx)(Ce.a,{message:ht("combinedWorkflows.tooltip_jsx"),options:{href:"https://knowledge.hubspot.com/workflows/add-contacts-to-a-workflow-with-a-form-on-a-hubspot-page"},elements:{Link:b.a}}),children:Object(L.jsx)("div",{children:t})})}render(){const{allWorkflowHybridsHaveLoaded:e,isFreePortal:t}=this.props;return t?e?Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)(mt,{}),!this.hasNoWorkflows&&this.renderFormControl()]}):Object(L.jsx)(xe.a,{layout:"centered",className:"p-y-3"}):this.renderFormControl()}}Ot.defaultProps={filteredWorkflows:[],readOnly:!1};Ot.defaultProps={filteredWorkflows:[],readOnly:!1};var yt=bt(Ot),jt=n(281),vt=n(752),Ct=n(1058),xt=n(1059),Et=n(1060);function Tt(e,t){const{emailId:n}=t;return{email:n?Ct.d(e,{id:n}):null,hasFetchedIsLegacyEmailConvertible:Ct.k(e,{id:n}),isLegacyEmailConvertible:!!n&&Ct.m(e,{id:n})}}const St={fetchIsLegacyEmailConvertible:xt.g},It=Object(a.connect)(Tt,St),wt=e=>"ContentComponents.cmv2.fields.form.formWorkflowDependencies.followupEmailWorkflows.legacyEmailIsSelectedAlert."+e,_t=({emailName:e="",isUpgrading:t,onClose:n,onUpgradeEmail:r})=>Object(L.jsxs)(z.a,{use:"danger",children:[Object(L.jsxs)(K.a,{children:[Object(L.jsx)($.a,{onClick:n}),Object(L.jsx)(te.a,{children:Object(L.jsx)(p.a,{message:wt("upgradeModal.header")})})]}),Object(L.jsx)(Y.a,{children:Object(L.jsx)("p",{children:Object(L.jsx)(jt.a,{message:wt("upgradeModal.message"),options:{emailName:e}})})}),Object(L.jsxs)(X.a,{children:[Object(L.jsx)(ke.a,{loading:t,onClick:r,use:"danger",children:Object(L.jsx)(p.a,{message:wt("upgradeModal.upgrade")})}),Object(L.jsx)(Q.a,{onClick:n,use:"tertiary-light",children:Object(L.jsx)(p.a,{message:wt("upgradeModal.cancel")})})]})]}),Nt=({onClose:e,onRemoveEmail:t})=>Object(L.jsxs)(z.a,{use:"danger",children:[Object(L.jsxs)(K.a,{children:[Object(L.jsx)($.a,{onClick:e}),Object(L.jsx)(te.a,{children:Object(L.jsx)(p.a,{message:wt("removeModal.header")})})]}),Object(L.jsx)(Y.a,{children:Object(L.jsx)("p",{children:Object(L.jsx)(jt.a,{message:wt("removeModal.message")})})}),Object(L.jsxs)(X.a,{children:[Object(L.jsx)(Q.a,{"data-selenium":"clear-legacy-followup-email-confirm-button",onClick:t,use:"danger",children:Object(L.jsx)(p.a,{message:wt("removeModal.upgrade")})}),Object(L.jsx)(Q.a,{onClick:e,use:"tertiary-light",children:Object(L.jsx)(p.a,{message:wt("removeModal.cancel")})})]})]}),At=()=>{Pe.a.addAlert({message:Object(L.jsx)(p.a,{message:wt("upgradeErrorAlert.message")}),titleText:Object(L.jsx)(p.a,{message:wt("upgradeErrorAlert.title")}),type:"danger"})};var Dt=It(({clearLegacyFollowupEmail:e,fetchIsLegacyEmailConvertible:t,hasFetchedIsLegacyEmailConvertible:n,isLegacyEmailConvertible:i,email:o,emailId:a,onChangeFollowupEmailEvent:s,onFollowupEmailIdChange:c})=>{const[u,d]=Object(r.useState)(!1),[h,m]=Object(r.useState)(!1),[f,g]=Object(r.useState)(!1),O=()=>{e(()=>{c(a);m(!1);d(!1)})},y=()=>{m(!0);if(o)"FOLLOWUP_EMAIL"===o.emailType?Object(Et.a)(o).then(e=>{const{errors:t=[],incomplete:n}=e;if(t.length||n){m(!1);At()}else{s&&s("form-followup-email-upgrade-legacy");O()}}).catch(()=>{m(!1);At()}):O();else{m(!1);At()}},j=()=>{s&&s("form-followup-email-remove-legacy");e();g(!1)};Object(r.useEffect)(()=>{o&&!n&&t(o.id).catch(e=>{throw e})},[o,n,t]);return Object(L.jsx)(l.a,{className:"m-bottom-3",titleText:Object(L.jsx)(p.a,{message:wt("title")}),type:"warning",children:Object(L.jsxs)(vt.a,{children:[Object(L.jsx)(Ce.a,{message:wt(i?"message_jsx":"notUpgradableMessage_jsx"),options:{href:"https://knowledge.hubspot.com/forms/set-up-and-style-forms-on-hubspot-pages#configure-your-form-automation"},elements:{Link:b.a}}),u&&Object(L.jsx)(_t,{emailName:o&&o.name,isUpgrading:h,onClose:()=>d(!1),onUpgradeEmail:y}),i&&Object(L.jsx)(Q.a,{"data-selenium":"upgrade-legacy-followup-email-button",onClick:()=>d(!0),size:"extra-small",use:"tertiary",children:Object(L.jsx)(p.a,{message:wt("upgradeButton")})}),f&&Object(L.jsx)(Nt,{onClose:()=>g(!1),onRemoveEmail:j}),Object(L.jsx)(Q.a,{"data-selenium":"clear-legacy-followup-email-button",onClick:()=>g(!0),size:"extra-small",use:"tertiary-light",children:Object(L.jsx)(p.a,{message:wt("removeButton")})})]})})});function kt(e,t){const{showLegacyEmails:n}=t;return{defaultOptions:Object(Ct.b)(e,{showLegacyEmails:n}),options:Object(Ct.a)(e)}}const Pt={clearCache:xt.a,fetchAutomatedEmails:xt.c,saveCache:xt.h},Rt=Object(a.connect)(kt,Pt),Ft=e=>"ContentComponents.cmv2.fields.form.formWorkflowDependencies.followupEmailWorkflows."+e;class Lt extends r.Component{constructor(e){super(e);this.loadOptions=this.loadOptions.bind(this);this.debouncedLoadOptions=Object(c.debounce)(this.loadOptions,me.c);this.state={input:""}}loadOptions(e,t,n={offset:0}){const{clearCache:r,fetchAutomatedEmails:i}=this.props;let{offset:o}=n;if(e!==this.state.input){this.setState({input:e});r();o=0}i({q:e,limit:me.f,offset:o}).then(e=>{const{total:n}=e,{options:r}=this.props;t(null,{options:r,pagination:{hasMore:n>r.length,offset:o+me.f,length:n}})}).catch(e=>{setTimeout(()=>{throw e})})}renderCreateNewEmailLink(){const{onCreateEmail:e,hasAutomatedEmailEditorAccess:t,hasInlineEmailEditorAccess:n}=this.props;return n?Object(L.jsx)(Q.a,{onClick:e,use:"link",children:Object(L.jsx)(p.a,{message:Ft("createNewEmail")})}):t?Object(L.jsx)(b.a,{external:!0,href:j.b.emailContentCreator({emailType:"AUTOMATED"}),children:Object(L.jsx)(p.a,{message:Ft("createNewEmail")})}):null}render(){const{clearCache:e,defaultOptions:t,error:n,onChange:r,options:i,placeholder:o,readOnly:a,saveCache:s,value:c}=this.props;return Object(L.jsx)(W.a,{clearCache:e,defaultOptions:t,dropdownFooter:this.renderCreateNewEmailLink(),error:n,loadOptions:this.debouncedLoadOptions,onChange:e=>r(e.target.value),options:i,placeholder:o,readOnly:a,saveCache:s,value:c})}}var Mt=Rt(Lt),Bt=n(456),Ut=n(27),Vt=n(2760),Ht=n(758),qt=n(1132);var Gt=Object(r.createContext)({});const Wt=Object.freeze({GMAIL:"GMAIL",OUTLOOK:"OUTLOOK",HUBSPOT_HOSTED:"HUBSPOT_HOSTED",CUSTOM_ADDRESS:"CUSTOM_ADDRESS",USER:"USER",MERGE_TAG:"MERGE_TAG",CONNECTED_ACCOUNTS:"CONNECTED_ACCOUNTS"}),zt=e=>"ContentComponents.cmv2.fields.form.formWorkflowDependencies.followupEmailWorkflows.emailEditorPanel.fromAddress."+e;function $t(e=[],t=[]){const n=[],r=[],i=[];t.concat(e).forEach(e=>{switch(e.type){case Wt.MERGE_TAG:i.push(e);break;case Wt.HUBSPOT_HOSTED:r.push(e);break;default:n.push(e)}});return[{text:f.a.text(zt("emailAddressOptionGroupLabels.emailAddresses")),options:n},{text:f.a.text(zt("emailAddressOptionGroupLabels.hubspotInboxes")),options:r},{text:f.a.text(zt("emailAddressOptionGroupLabels.personalizationTokens")),options:i}]}var Kt=({showUnverifiedEmailError:e,onChange:t,value:n})=>{const[i,o]=Object(r.useState)([]),[a,s]=Object(r.useState)([]),[c,l]=Object(r.useState)(),[u,d]=Object(r.useState)();Object(r.useEffect)(()=>{Promise.all([Object(Et.k)().catch(()=>l(Object(L.jsx)(p.a,{message:zt("verifiedEmailAddressesFetchError")},"verifiedEmailAddressesFetchError"))),Object(Et.f)().catch(()=>d(Object(L.jsx)(p.a,{message:zt("connectedEmailAddressesFetchError")},"connectedEmailAddressesFetchError")))]).then(([e,t])=>{const n=Array.isArray(e)?e.filter(({isVerified:e})=>e).map(({content:e,type:t})=>({text:e,value:e,type:t})):[],r=Array.isArray(t)?t.filter(({connected:e})=>e).map(({email:e,sendFromEmail:t,emailAccountType:n})=>({type:n,text:t||e,value:e})):[];s(r);o($t(n,r))}).catch()},[]);const h=a.some(({text:e})=>e===n),f=[];e&&f.push(Object(L.jsx)(p.a,{message:zt("unverifiedEmailError")},"unverifiedEmailError"));(c||u)&&f.push(c||u);return Object(L.jsx)(m.a,{description:h&&Object(L.jsx)(p.a,{message:zt("connectedInboxInfo")}),error:f.length>0,label:Object(L.jsx)(p.a,{message:zt("label")}),required:!0,validationMessage:Object(L.jsx)(Te.a,{direction:"column",children:f}),children:Object(L.jsx)(g.a,{dropdownFooter:Object(L.jsx)(b.a,{href:j.b.settings("users"),external:!0,children:Object(L.jsx)(p.a,{message:zt("dropdownFooterLink")})}),options:i,onChange:e=>t(e.target.value),value:n})})},Yt=n(2735);const Xt=e=>"ContentComponents.cmv2.fields.form.formWorkflowDependencies.followupEmailWorkflows.emailEditorPanel.canSpamSettingsId."+e,Jt=({children:e,className:t,option:n})=>Object(L.jsx)("span",{className:t,children:Object(L.jsx)(y.a,{title:Object(L.jsx)(p.a,{message:Xt("optionDisabled")}),disabled:!n.disabled,children:e})}),Qt=({footer:e})=>{const{company_name:t,company_street_address_1:n,company_street_address_2:r,company_city:i,company_state:o,company_country:a,company_zip:s,company_phone:c,display_name:l,name:u}=e,d=[t,n,r,i,o,a,s,c].filter(e=>e).join(" ");return Object(L.jsxs)("div",{className:"m-top-4",children:[l?Object(L.jsx)("h5",{children:u}):null,Object(L.jsx)("div",{children:d})]})};var Zt=({onChange:e,value:t})=>{const[n,i]=Object(r.useState)([]),[o,a]=Object(r.useState)(!1);Object(r.useEffect)(()=>{Object(Et.e)().then(e=>{const{objects:t}=e||{};t&&i(t.map(e=>({text:e.name||f.a.text(Xt("defaultFooterName")),value:e.id,disabled:!1===e.is_valid,footer:e})))}).catch(()=>a(!0))},[]);const s=j.b.settings("email","footer");if(!n.length&&!o)return Object(L.jsx)("div",{className:"m-top-6",children:Object(L.jsx)(Ce.a,{message:Xt("emptyState_jsx"),options:{external:!0,href:s},elements:{Link:b.a}})});const{footer:c}=n.find(({value:e})=>e===t)||{};return Object(L.jsxs)(r.Fragment,{children:[Object(L.jsx)(m.a,{error:o,label:Object(L.jsx)(p.a,{message:Xt("label")}),required:!0,validationMessage:o&&Object(L.jsx)(p.a,{message:Xt("emailFooterFetchError")}),children:Object(L.jsxs)(Te.a,{children:[Object(L.jsx)(g.a,{options:n,placeholder:Object(L.jsx)(p.a,{message:Xt("placeholder")}),onChange:t=>e(t.target.value),value:t,itemComponent:Jt}),Object(L.jsx)(Yt.a,{children:Object(L.jsx)(Q.a,{external:!0,href:s,use:"tertiary-light",className:"m-left-2",children:Object(L.jsx)(p.a,{message:Xt("manageFooters")})})})]})}),c&&Object(L.jsx)(Qt,{footer:c})]})},en=n(287),tn=n.n(en),nn=n(324),rn=n(496),on=n(451),an=n(1300),sn=n(2614),cn=n(2606),ln=n(1277);const un="HS_EMAIL_EDITOR_SUBJECT_FIELD",dn=e=>"ContentComponents.cmv2.fields.form.formWorkflowDependencies.followupEmailWorkflows.emailEditorPanel.subject."+e,pn=tn.a.div.withConfig({displayName:"SubjectField__RichTextEditorWrapper",componentId:"qy4jo0-0"})([".mce-content-body:focus{border-color:rgba(0,208,228,0.5);box-shadow:0 0 4px 1px rgba(0,208,228,0.3),0 0 0 1px ",";outline:0;}"],nn.FOCUS_RING_BASE);var hn,mn=({onChange:e,pickerComponents:t,value:n})=>{const[i,o]=Object(r.useState)(),[a,s]=Object(r.useState)(),{user:c}=Object(Ut.userInfoSync)(),l=()=>{if(i)return i;const e=Object(sn.a)({appName:"page-editor",gates:j.b.gates,scopes:c.scopes,includeSiteSettings:!1,includeSubscriptionType:!1,pickerComponents:t,supportedCrmObjectFQNs:[ln.c],isMultiline:!0});o(e);return e};return Object(L.jsx)(m.a,{label:Object(L.jsx)(rn.a,{itemRight:Object(L.jsxs)(Q.a,{use:"transparent",className:"p-all-0",onClick:()=>{a&&Object(an.c)(a)},children:[Object(L.jsx)(ae.a,{name:"contacts"}),Object(L.jsx)(p.a,{message:dn("contactToken")}),Object(L.jsx)(on.a,{className:"m-left-1"})]}),children:Object(L.jsx)(O.a,{className:"p-all-0",required:!0,children:Object(L.jsx)(p.a,{message:dn("label")})})}),labelClassName:"p-right-0",children:Object(L.jsx)(pn,{children:Object(L.jsx)(cn.a,{config:l(),uniqueKey:un,tinyMceRef:({editor:e})=>s(e),content:Object(an.b)(n||""),onChange:(t,n)=>{e(Object(an.a)(n))}})})})};!function(e){e.CONTENT_SCOPE_RESTRICTED="CONTENT_SCOPE_RESTRICTED";e.REPLY_TO_UNVERIFIED_EMAIL="REPLY_TO_UNVERIFIED_EMAIL";e.VALIDATION_FAILED="VALIDATION_FAILED"}(hn||(hn={}));const fn=["name","fromName","replyTo","subject","primaryRichTextModuleHtml","subscription","canSpamSettingsId"];function gn(e,t){return{businessUnitId:Object(qt.g)(e,t)}}const bn={saveEmail:xt.i},On=Object(a.connect)(gn,bn),yn=e=>"ContentComponents.cmv2.fields.form.formWorkflowDependencies.followupEmailWorkflows.emailEditorPanel."+e;class jn extends r.Component{constructor(e){super(e);this.updateEmail=this.updateEmail.bind(this);this.onEmailSave=this.onEmailSave.bind(this);this.state={email:null,emailSavingStatus:Re.UNINITIALIZED,showEmailFetchError:!1,showUnverifiedEmailError:!1}}componentDidMount(){const{emailId:e}=this.props;e&&Object(Et.g)(e).then(e=>{this.setState({email:e})}).catch(()=>{this.setState({showEmailFetchError:!0})})}updateEmail(e,t){const{email:n}=this.state;this.setState({email:Object.assign({},n,{[e]:t})})}onEmailSave(){const{emailId:e,onClose:t,saveEmail:n}=this.props,{email:r}=this.state;if(!r)return;this.setState({emailSavingStatus:Re.PENDING});const i=fn.reduce((e,t)=>{e[t]=r[t];return e},{});!e&&this.hasBusinessUnitsAccess&&(i.businessUnitId=this.businessUnitId);n(i,e).then(n=>{this.setState({emailSavingStatus:Re.SUCCEEDED});t(e||n.id)}).catch(e=>{const{errorType:t,errors:n}=e.responseJSON||{};if(t===hn.CONTENT_SCOPE_RESTRICTED){this.setState({emailSavingStatus:Re.FAILED});Pe.a.addAlert({titleText:Object(L.jsx)(p.a,{message:yn("noPublishAccessError.title")}),message:Object(L.jsx)(p.a,{message:yn("noPublishAccessError.message")}),type:"danger"})}else t===hn.VALIDATION_FAILED&&n.some(e=>e.errorType===hn.REPLY_TO_UNVERIFIED_EMAIL)?this.setState({emailSavingStatus:Re.FAILED,showUnverifiedEmailError:!0}):this.setState({emailSavingStatus:Re.FAILED})})}isSaveDisabled(){const{email:e}=this.state;return!e||fn.some(t=>!e[t])}get scopes(){if(!this._scopes){const{user:e}=Object(Ut.userInfoSync)();this._scopes=e.scopes}return this._scopes}get hasBusinessUnitsAccess(){return j.b.isUngated("campaign-business-unit")&&this.scopes.includes("business-units-access")}get businessUnitId(){const{businessUnitId:e}=this.props,{email:t}=this.state;return t&&Number.isInteger(t.businessUnitId)?t.businessUnitId:e||0}renderSubscriptionTypeSelect(){const{emailId:e,pickerComponents:t}=this.props,{SubscriptionTypeSelect:n}=t,{email:r}=this.state,{subscription:i}=r||{};if(e&&-1===i||!n)return null;const o=e=>!this.hasBusinessUnitsAccess||e.businessUnitId===this.businessUnitId;return j.b.isUngated("subscriptions:groupSettings")?Object(L.jsx)(n,{defaultTypesText:Object(L.jsx)(p.a,{message:yn("subscription.defaultTypesText")}),includeInternal:!1,isUngatedForSubscriptionGroups:!0,onChange:e=>this.updateEmail("subscription",e?e.id:null),onGroupChange:e=>this.updateEmail("preferencesGroupId",e.target.value),renderGroupSelect:e=>Object(L.jsx)(m.a,{label:Object(L.jsx)(p.a,{message:yn("preferencesGroupId.label")}),required:!0,children:Object(L.jsx)(g.a,Object.assign({placeholder:Object(L.jsx)(p.a,{message:yn("preferencesGroupId.placeholder")})},e))}),renderTypeSelect:e=>Object(L.jsx)(m.a,{label:Object(L.jsx)(p.a,{message:yn("subscription.label")}),required:!0,children:Object(L.jsx)(g.a,Object.assign({placeholder:Object(L.jsx)(p.a,{message:yn("subscription.placeholder")})},e))}),value:i}):Object(L.jsx)(n,{customFilter:o,customFooter:Object(L.jsx)(b.a,{href:j.b.settings("email","types"),external:!0,children:Object(L.jsx)(p.a,{message:yn("subscription.dropdownFooterLink")})}),formControlProps:{label:Object(L.jsx)(p.a,{message:yn("subscription.label")}),required:!0},hideInternal:!0,isUngatedForSubscriptionGroups:!1,placeholder:Object(L.jsx)(p.a,{message:yn("subscription.placeholder")}),onChange:e=>this.updateEmail("subscription",e?e.id:null),value:i})}renderEmailEditorLink(){const{emailId:e,hasAutomatedEmailEditorAccess:t}=this.props;if(!t)return null;let n;n=e?j.b.editEmail(e):j.b.emailContentCreator({emailType:"AUTOMATED",businessUnitId:this.hasBusinessUnitsAccess?this.businessUnitId:null});return Object(L.jsx)("p",{children:Object(L.jsx)(Ce.a,{message:yn("helpText_jsx"),options:{external:!0,href:n,style:{whiteSpace:"nowrap"}},elements:{Link:b.a}})})}renderEmailEditForm(){const{emailId:e,pickerComponents:t}=this.props,{email:n,showUnverifiedEmailError:r}=this.state,{canSpamSettingsId:i,name:o,fromName:a,primaryRichTextModuleHtml:s,replyTo:c,subject:l}=n||{};return Object(L.jsxs)(Ht.a,{children:[this.renderEmailEditorLink(),Object(L.jsx)(m.a,{label:Object(L.jsx)(p.a,{message:yn("emailName.label")}),required:!0,children:Object(L.jsx)(J.a,{onChange:e=>this.updateEmail("name",e.target.value),value:o||""})}),Object(L.jsx)(m.a,{label:Object(L.jsx)(p.a,{message:yn("fromName.label")}),required:!0,children:Object(L.jsx)(J.a,{onChange:e=>this.updateEmail("fromName",e.target.value),value:a||""})}),Object(L.jsx)(Kt,{showUnverifiedEmailError:r,onChange:e=>this.updateEmail("replyTo",e),value:c}),this.renderSubscriptionTypeSelect(),Object(L.jsx)(mn,{pickerComponents:t,value:l||"",onChange:e=>this.updateEmail("subject",e)}),Object(L.jsx)(m.a,{label:Object(L.jsx)(p.a,{message:yn("primaryRichTextModuleHtml.label")}),required:!0,children:Object(L.jsx)(Gt.Consumer,{children:({RichTextComponent:t})=>t&&Object(L.jsx)(t,{id:e?n&&n.id:null,isFormFollowupEmail:!0,onFieldChange:e=>this.updateEmail("primaryRichTextModuleHtml",e),value:s})})}),Object(L.jsx)(Zt,{onChange:e=>this.updateEmail("canSpamSettingsId",e),value:i})]})}render(){const{emailId:e,onClose:t}=this.props,{email:n,emailSavingStatus:r,showEmailFetchError:i}=this.state,o=this.isSaveDisabled();let a;a=i?Object(L.jsx)(l.a,{titleText:Object(L.jsx)(p.a,{message:yn("emailFetchError.title")}),type:"danger",className:"m-bottom-6",children:Object(L.jsx)(p.a,{message:yn("emailFetchError.message")})}):e&&!n?Object(L.jsx)(xe.a,{layout:"centered",grow:!0}):this.renderEmailEditForm();return Object(L.jsxs)(Vt.a,{width:460,children:[Object(L.jsxs)(K.a,{children:[Object(L.jsx)(te.a,{children:Object(L.jsx)(p.a,{message:yn("header")})}),Object(L.jsx)($.a,{onClick:()=>t()})]}),Object(L.jsx)(Y.a,{children:a}),Object(L.jsx)(X.a,{children:Object(L.jsx)(y.a,{placement:"top",title:Object(L.jsx)(p.a,{message:yn("saveButton.disabledTooltip")}),disabled:!o,children:Object(L.jsx)(ke.a,{disabled:o,size:"small",use:"tertiary",keepResultAfterFinish:!0,responsive:!1,onClick:this.onEmailSave,loading:r===Re.PENDING,failed:r===Re.FAILED,children:Object(L.jsx)(p.a,{message:yn("saveButton.label")})})})})]})}}var vn=On(jn),Cn=n(698);const xn=(e,t)=>{const{formGuid:n,contentId:r}=t;return{workflowsThatSendEmails:et.h(e,{formGuid:n,contentId:r})}},En=Object(a.connect)(xn),Tn=e=>"ContentComponents.cmv2.fields.form.formWorkflowDependencies.followupEmailWorkflows."+e,Sn=({emailId:e,formGuid:t,hasAutomatedEmailEditorAccess:n,hasInlineEmailEditorAccess:i,hasWorkflowsAppAccess:o,onClose:s,onConfirm:c,workflowsThatSendEmails:u})=>{const d=Object(a.useDispatch)(),[h,f]=Object(r.useState)(e),[g,O]=Object(r.useState)(!1),[y,j]=Object(r.useState)(!1),v=Object(a.useSelector)(e=>Ct.e(e));Object(r.useEffect)(()=>{},[v]);const C=h&&v[h],x=C&&C.canBeEditedInEmbeddedEditor,E=Object(a.useSelector)(e=>Boolean(h&&Ct.l(e,{id:h}))),T=e=>{e&&e!==h&&f(e);O(!1);j(!1)},S=e=>{f(e);e&&!v[e]&&d(Object(xt.e)(e)).catch(e=>{throw e})},I=Object(r.useContext)(Cn.a);return Object(L.jsxs)(r.Fragment,{children:[g&&Object(L.jsx)(vn,{emailId:y?void 0:h,hasAutomatedEmailEditorAccess:n,onClose:T,pickerComponents:I}),Object(L.jsxs)(z.a,{children:[Object(L.jsxs)(K.a,{children:[Object(L.jsx)($.a,{onClick:s}),Object(L.jsx)(te.a,{children:Object(L.jsx)(p.a,{message:Tn("modal.header")})})]}),Object(L.jsxs)(Y.a,{children:[u.length>0&&Object(L.jsxs)(l.a,{"data-selenium":"form-followup-email-workflows-sending-emails-alert",titleText:Object(L.jsx)(p.a,{message:Tn("modal.workflowsThatSendEmailsAlert.title")}),type:"warning",children:[Object(L.jsx)("p",{className:"m-bottom-2",children:Object(L.jsx)(p.a,{message:Tn("modal.workflowsThatSendEmailsAlert.body1")})}),Object(L.jsx)(Bt.a,{className:"m-bottom-2",styled:!0,children:u.map(e=>Object(L.jsx)(He,{formGuid:t,formWorkflowDependency:e,hasWorkflowsAppAccess:o},e.flowId))}),Object(L.jsx)("p",{className:"m-all-0",children:Object(L.jsx)(p.a,{message:Tn("modal.workflowsThatSendEmailsAlert.body2")})})]}),Object(L.jsx)(m.a,{error:E,help:Object(L.jsx)(Ce.a,{message:Tn("modal.helpText_jsx"),options:{href:"https://knowledge.hubspot.com/email/create-automated-emails-to-use-in-workflows"},elements:{Link:b.a}}),label:Object(L.jsx)(p.a,{message:Tn("modal.emailSelect.label")}),required:!0,validationMessage:E&&Object(L.jsx)(p.a,{message:Tn("modal.unpublishedEmailError")}),children:Object(L.jsx)(Mt,{error:E,hasAutomatedEmailEditorAccess:n,hasInlineEmailEditorAccess:i,onChange:S,onCreateEmail:()=>{O(!0);j(!0)},placeholder:Object(L.jsx)(p.a,{message:Tn("modal.emailSelect.placeholder")}),value:h})}),i&&x&&Object(L.jsx)("div",{className:"m-top-2",children:Object(L.jsx)(Q.a,{"data-selenium":"form-followup-email-inline-edit-button",onClick:()=>O(!0),size:"small",use:"tertiary-light",children:Object(L.jsx)(p.a,{message:Tn("modal.editEmail")})})})]}),Object(L.jsxs)(X.a,{children:[Object(L.jsx)(ke.a,{disabled:!h||E,onClick:()=>c(h),use:"primary",children:Object(L.jsx)(p.a,{message:Tn("modal.save")})}),Object(L.jsx)(Q.a,{onClick:s,children:Object(L.jsx)(p.a,{message:Tn("modal.cancel")})})]})]})]})};var In=En(({followupEmailId:e,formGuid:t,hasAutomatedEmailEditorAccess:n,hasInlineEmailEditorAccess:i,hasWorkflowsAppAccess:o,onChangeFollowupEmailEvent:a,onFollowupEmailIdChange:s,workflowsThatSendEmails:c,readOnly:l=!1})=>{const[u,d]=Object(r.useState)(!1),h=!!e,m=()=>{d(!1)},f=()=>{d(!0)},g=t=>{if(h&&t===e)m();else{a&&a(h?"form-followup-email-edit":"form-followup-email-add");s(t);m()}};return Object(L.jsxs)(r.Fragment,{children:[u&&Object(L.jsx)(Sn,{emailId:e,formGuid:t,hasAutomatedEmailEditorAccess:n,hasInlineEmailEditorAccess:i,hasWorkflowsAppAccess:o,onClose:m,onConfirm:g,workflowsThatSendEmails:c}),h?Object(L.jsx)(De.a,{disabled:l,onClick:f,size:"xs",tooltip:Object(L.jsx)(p.a,{message:Tn("editEmailTooltip")}),children:Object(L.jsx)(ae.a,{name:"edit"})}):Object(L.jsxs)(De.a,{disabled:l,onClick:f,size:"xs",use:"link",children:[Object(L.jsx)(p.a,{message:Tn("buttonLabel")}),Object(L.jsx)(ae.a,{className:"p-left-1",name:"add"})]})]})});const wn=e=>"ContentComponents.cmv2.fields.form.formWorkflowDependencies.followupEmailWorkflows.emailIsSelectedForForm."+e;var _n=({editModule:e,editSmartRule:t,formFieldPath:n,inSameModule:r,scrollToFollowupEmail:i})=>{let o;const a=(e=!1)=>{i(n,e)};if(r&&t){const e=Object(L.jsx)(b.a,{onClick:()=>{a(!0);t()},children:Object(L.jsx)(p.a,{message:wn("inSameModule.smartRuleLink")})});o=Object(L.jsx)(h.a,{message:wn("inSameModule.smartRuleMessage"),options:{smartRuleLink:e}})}else o=r?Object(L.jsx)(h.a,{message:wn("inSameModule.message"),options:{fieldLink:Object(L.jsx)(b.a,{onClick:()=>a(),children:Object(L.jsx)(p.a,{message:wn("inSameModule.fieldLink")})})}}):Object(L.jsx)(h.a,{message:wn("inOtherModule.message"),options:{formAutomation:Object(L.jsx)("b",{children:Object(L.jsx)(p.a,{message:wn("inOtherModule.formAutomation")})}),otherModuleLink:e?Object(L.jsx)(b.a,{onClick:()=>{a(!0);e()},children:Object(L.jsx)(p.a,{message:wn("inOtherModule.otherModuleLink")})}):Object(L.jsx)(p.a,{message:wn("inOtherModule.otherModuleLink")})}});return Object(L.jsx)(l.a,{type:"warning",children:o})};const Nn=e=>"ContentComponents.cmv2.fields.form.formWorkflowDependencies.followupEmailWorkflows."+e;function An(e,t){const{followupEmailId:n,followupEmailSelectedForForm:r}=t;let i,o;if(n){i=Object(Ct.d)(e,{id:n});o=Object(Ct.g)(e,{id:n})}else if(r){const{emailId:t}=r;i=t&&Object(Ct.d)(e,{id:t})}return{followupEmail:i,emailFetchStatus:o}}const Dn={fetchFollowupEmail:xt.d},kn=Object(a.connect)(An,Dn),Pn=({contentId:e,emailId:t,emailName:n,formGuid:r,hasAutomatedEmailEditorAccess:i,hasInlineEmailEditorAccess:o,hasWorkflowsAppAccess:a,isReadOnly:s,onChangeFollowupEmailEvent:c,onFollowupEmailIdChange:l,seleniumKey:u})=>{const d=n||t,h=i?Object(L.jsx)(b.a,{external:!0,href:j.b.editEmail(t),truncate:!0,children:d}):Object(L.jsx)(se.a,{children:d}),m=()=>{c&&c("form-followup-email-remove");l()},f=Object(L.jsxs)(Te.a,{children:[Object(L.jsx)(In,{contentId:e,followupEmailId:t,formGuid:r,hasAutomatedEmailEditorAccess:i,hasInlineEmailEditorAccess:o,hasWorkflowsAppAccess:a,onChangeFollowupEmailEvent:c,onFollowupEmailIdChange:l,readOnly:s}),Object(L.jsx)(De.a,{"data-selenium":"form-followup-email-remove-button",disabled:s,onClick:m,size:"xs",tooltip:Object(L.jsx)(p.a,{message:Nn("removeEmailTooltip")}),children:Object(L.jsx)(ae.a,{name:"remove"})})]});return Object(L.jsx)(we.a,{"data-selenium":u,responsiveWrapperClassName:"m-y-2",children:Object(L.jsx)("tbody",{children:Object(L.jsx)("tr",{children:Object(L.jsx)(Ae.a,{className:"p-all-4",hoverContent:f,children:h})})})})};var Rn=kn(({contentId:e,clearLegacyFollowupEmail:t,emailFetchStatus:n,fetchFollowupEmail:i,followupEmail:o,followupEmailId:a,followupEmailSelectedForForm:s,formGuid:c,hasAutomatedEmailEditorAccess:u,hasInlineEmailEditorAccess:d,hasWorkflowsAppAccess:h,legacyFollowupEmailId:f,onChangeFollowupEmailEvent:g,onFollowupEmailIdChange:O,readOnly:y,scrollToFollowupEmail:v})=>{Object(r.useEffect)(()=>{a&&i(a);f&&i(f);const{emailId:e}=s||{};e&&i(e)},[i,a,f,s]);let C;const{emailId:x}=s||{};if(f)C=Object(L.jsxs)("div",{children:[Object(L.jsx)(Dt,{clearLegacyFollowupEmail:t,emailId:f,onChangeFollowupEmailEvent:g,onFollowupEmailIdChange:O}),Object(L.jsx)(Mt,{onChange:()=>{},onCreateEmail:()=>{},readOnly:!0,showLegacyEmails:!0,value:f})]});else if(!a&&!x||o||n===Re.FAILED)if(x){const{editModule:t,editSmartRule:n,inSameModule:r,formFieldPath:i}=s||{};C=Object(L.jsxs)("div",{children:[Object(L.jsx)(_n,{formFieldPath:i,editModule:t,editSmartRule:n,inSameModule:r,scrollToFollowupEmail:v}),Object(L.jsx)(Pn,{contentId:e,emailId:x,emailName:o?o.name:void 0,formGuid:c,hasAutomatedEmailEditorAccess:u,hasInlineEmailEditorAccess:d,hasWorkflowsAppAccess:h,isReadOnly:!0,onChangeFollowupEmailEvent:g,onFollowupEmailIdChange:O,seleniumKey:"form-followup-email"})]})}else if(a){const t=Object(L.jsx)(Pn,{contentId:e,emailId:a,emailName:o?o.name:void 0,formGuid:c,hasAutomatedEmailEditorAccess:u,hasInlineEmailEditorAccess:d,hasWorkflowsAppAccess:h,isReadOnly:y,onChangeFollowupEmailEvent:g,onFollowupEmailIdChange:O,seleniumKey:"form-followup-email"});C=o&&!o.isPublished?Object(L.jsxs)("div",{children:[Object(L.jsx)(l.a,{titleText:Object(L.jsx)(p.a,{message:Nn("unpublishedEmailAlert.title")}),type:"danger",children:Object(L.jsx)(Ce.a,{message:Nn("unpublishedEmailAlert.message_jsx"),options:{href:j.b.editEmail(a)},elements:{Link:b.a}})}),t]}):o||n!==Re.FAILED?t:Object(L.jsxs)("div",{children:[Object(L.jsx)(l.a,{titleText:Object(L.jsx)(p.a,{message:Nn("notFoundEmailAlert.title")}),type:"danger",children:Object(L.jsx)(p.a,{message:Nn("notFoundEmailAlert.message")})}),t]})}else C=Object(L.jsxs)(Te.a,{direction:"column",children:[Object(L.jsx)(p.a,{message:Nn("emptyState")}),Object(L.jsx)(In,{contentId:e,followupEmailId:a,formGuid:c,hasAutomatedEmailEditorAccess:u,hasInlineEmailEditorAccess:d,hasWorkflowsAppAccess:h,onChangeFollowupEmailEvent:g,onFollowupEmailIdChange:O,readOnly:y})]});else C=Object(L.jsx)(xe.a,{layout:"centered",className:"p-y-3"});return Object(L.jsx)(m.a,{"data-field-section":"form-followup-email",label:Object(L.jsx)(p.a,{message:Nn("label")}),help:!f&&a&&Object(L.jsx)(p.a,{message:Nn("helpText")}),tooltip:Object(L.jsx)(Ce.a,{message:Nn("tooltip_jsx"),options:{href:"https://knowledge.hubspot.com/forms/set-up-and-style-forms-on-hubspot-pages#configure-your-form-automation"},elements:{Link:b.a}}),children:C})}),Fn=n(72),Ln=n(1056),Mn=n(1312),Bn=(n(19),n(22),n(24)),Un=n.n(Bn),Vn=n(503),Hn=n(1048),qn=n(1134);function Gn(e,t){const n=Object(r.useRef)();Object(r.useEffect)(()=>{n.current=e},[e]);Object(r.useEffect)(()=>{function e(){n.current&&n.current()}const r=setInterval(e,t);return()=>clearInterval(r)},[t])}var Wn=n(1071),zn={SHORT:"short",MEDIUM:"medium"},$n=(e,t)=>{const n=t&&t.format||zn.MEDIUM,r=t&&t.combined,i=Math.round(e.asSeconds());if(i<60){const e={seconds:i>0?i:1};return n===zn.SHORT?f.a.text("i18n.duration.shortForm.seconds",e):f.a.text("i18n.duration.seconds",e)}const o=Math.round(e.asMinutes());if(o<60)return n===zn.SHORT?f.a.text("i18n.duration.shortForm.minutes",{minutes:o}):f.a.text("i18n.duration.minutes",{minutes:o});const a=Math.round(e.asHours());if(a<24){if(r){const t=Math.floor(e.asHours()),r=Math.floor(e.asMinutes());if(r%60>0)return n===zn.SHORT?f.a.text("i18n.duration.shortForm.hoursAndMinutes",{hours:t,minutes:r%60}):f.a.text("i18n.duration.hoursAndMinutes",{hours:t,minutes:r%60})}return n===zn.SHORT?f.a.text("i18n.duration.shortForm.hours",{hours:a}):f.a.text("i18n.duration.hours",{hours:a})}const s=Math.round(e.asDays());return n===zn.SHORT?f.a.text("i18n.duration.shortForm.days",{days:s}):f.a.text("i18n.duration.days",{days:s})};const Kn=(e,t,n)=>$n(f.a.moment.duration(Math.abs(t.diff(e))),n);class Yn extends r.Component{render(){const{includeAffix:e,type:t,from:n,to:r,format:i,combined:o}=this.props,a=f.a.moment[t]();let s;if(r||n)if(r)if(n){const a=f.a.moment[t](n),c=f.a.moment[t](r);s=i?Kn(a,c,{format:i,combined:o}):c.from(a,!e)}else{const n=f.a.moment[t](r);s=i?Kn(a,n,{format:i,combined:o}):n.fromNow(!e)}else{const r=f.a.moment[t](n);s=i?Kn(r,a,{format:i,combined:o}):r.toNow(!e)}else s="";return Object(L.jsx)("span",{children:s})}}Yn.displayName="FormattedDuration";Yn.propTypes={includeAffix:o.a.bool,type:o.a.oneOf([Wn.a.PORTAL,Wn.a.USER,Wn.a.UTC]),format:o.a.oneOf(Object.keys(zn).map(e=>zn[e])),from:o.a.oneOfType([o.a.object,o.a.number,o.a.array]),to:o.a.oneOfType([o.a.object,o.a.number,o.a.array]),toFromValidator:(e,t,n)=>{e.from||e.to||console.warn(n+' should have either a "to" or a "from" prop',n)},combined:o.a.bool};Yn.defaultProps={type:Wn.a.PORTAL,includeAffix:!1,combined:!1};const Xn=6e4,Jn=e=>"ContentComponents.cmv2.fields.form.withInlineEditing.saveIndicator."+e,Qn=({updatedAt:e})=>Object(L.jsx)(y.a,{title:Object(L.jsx)(rr,{updatedAt:e}),tooltipPlacement:"bottom",children:Object(L.jsx)(p.a,{"data-selenium":"form-save-indicator-saved",message:Jn("saved")})}),Zn=()=>Object(L.jsx)(p.a,{message:Jn("saving")}),er=({onClick:e})=>Object(L.jsx)(b.a,{use:"transparent",onClick:e,children:Object(L.jsx)(p.a,{message:Jn("failed.retry")})}),tr=({onClick:e})=>Object(L.jsx)(b.a,{use:"transparent",onClick:e,children:Object(L.jsx)(p.a,{message:Jn("preconditionFailed.retry")})}),nr=({tooltipLabel:e,action:t})=>Object(L.jsx)(y.a,{title:e,tooltipPlacement:"bottom",children:Object(L.jsx)(h.a,{message:Jn("failed.message"),options:{link:t}})}),rr=({updatedAt:e})=>Object(L.jsx)(h.a,{message:Jn("sinceSave"),options:{duration:Object(L.jsx)(Yn,{to:e,includeAffix:!0})}}),ir=({label:e,isSaving:t,isFailed:n})=>Object(L.jsx)(xe.a,{className:"m-all-0",use:"tertiary",size:"extra-small",layout:"inline",showLabel:!0,showResult:!t,failed:n,label:e,labelCompletedText:e});var or=({isSaving:e,isPreConditionFailed:t,isFailed:n,onRetry:i,onReload:o,updatedAt:a})=>{const[s,c]=Object(r.useState)(0);Gn(()=>{c(e=>e+1)},Xn);let l=Object(L.jsx)(Qn,{updatedAt:a});e?l=Object(L.jsx)(Zn,{}):t?l=Object(L.jsx)(nr,{tooltipLabel:Object(L.jsx)(p.a,{message:Jn("preconditionFailed.message")}),action:Object(L.jsx)(tr,{onClick:o})}):n&&(l=Object(L.jsx)(nr,{tooltipLabel:"",action:Object(L.jsx)(er,{onClick:i})}));return Object(L.jsx)(ir,{isSaving:e,isFailed:t||n,updatedAt:a,label:l})};const ar=(e={})=>{const{form:{guid:t}={},saveForm:n,reloadFormDraft:r}=e;return Object(L.jsx)(or,Object.assign({},e,{onRetry:()=>n(t),onReload:()=>r(t)}))},sr=(e,{form:{updatedAt:t}={}})=>({isSaving:Fe.n(e),isFailed:Fe.o(e),isPreConditionFailed:Fe.p(e),updatedAt:t}),cr={saveForm:Me.t,reloadFormDraft:Me.r};var lr=Object(a.connect)(sr,cr)(ar),ur=n(288),dr=n.n(ur);const pr=["children","className","flush"];function hr(e){const{children:t,className:n,flush:r=!1}=e,i=Object(Be.a)(e,pr);return Object(L.jsx)("div",Object.assign({},i,{className:dr()("private-multicolumn",n,r&&"private-multicolumn--flush"),children:t}))}hr.displayName="UIMultiColumn";hr.propTypes={children:o.a.node,className:o.a.string,flush:o.a.bool.isRequired};hr.defaultProps={flush:!1};const mr=["children","className"];function fr(e){const{children:t,className:n}=e,r=Object(Be.a)(e,mr);return Object(L.jsx)("div",Object.assign({},r,{className:dr()("private-multicolumn__group",n),children:t}))}fr.displayName="UIMultiColumnGroup";fr.propTypes={children:o.a.node};var gr=n(474);const br=["children","className","horizontalAlign","titleText","verticalAlign","width"],Or={left:"text-left",center:"text-center",right:"text-right"},yr={top:"private-multicolumn--align-top",middle:"private-multicolumn--align-middle",bottom:"private-multicolumn--align-bottom"},jr=e=>Object(L.jsx)(gr.a,{className:"private-multicolumn__item__title",children:e});function vr(e){const{children:t,className:n,horizontalAlign:r,titleText:i,verticalAlign:o="middle",width:a}=e,s=Object(Be.a)(e,br),c=i?jr(i):null;return Object(L.jsxs)("div",Object.assign({},s,{className:dr()("private-multicolumn__item has--vertical-spacing",yr[o],n,r&&Or[r]),style:{width:a},children:[c,t]}))}vr.displayName="UIMultiColumnItem";vr.propTypes={children:o.a.node,horizontalAlign:o.a.oneOf(Object.keys(Or)),titleText:o.a.node,verticalAlign:o.a.oneOf(Object.keys(yr)),width:o.a.oneOfType([o.a.string,o.a.number])};vr.defaultProps={verticalAlign:"middle"};var Cr=n(458);var xr=({id:e="",label:t="",value:n=!1,disabled:r=!1,disabledTooltipTitle:i="",onChange:o=(()=>{}),readOnly:a=!1})=>Object(L.jsx)(hr,{flush:!0,style:{background:"none"},children:Object(L.jsxs)(fr,{children:[Object(L.jsx)(vr,{children:Object(L.jsx)(O.a,{htmlFor:e,children:t})}),Object(L.jsx)(vr,{width:"80px",children:Object(L.jsx)(y.a,{title:i,disabled:!r||!i,children:Object(L.jsx)(Cr.a,{"data-selenium":"form-"+e,"data-checked":Boolean(n),id:e,size:"small",checked:Boolean(n),onChange:o,disabled:r,readOnly:a})})})]})}),Er=n(479);const Tr=e=>"ContentComponents.cmv2.fields.form.withInlineEditing.automation.marketingContacts.disableModal."+e,Sr=({formName:e})=>Object(L.jsx)(K.a,{children:Object(L.jsx)(te.a,{className:"text-left",weight:"bold",children:Object(L.jsx)(p.a,{message:Tr("header"),options:{formName:e}})})}),Ir=()=>Object(L.jsx)(Y.a,{children:Object(L.jsx)("div",{className:"text-left m-top-4",children:Object(L.jsx)(p.a,{message:Tr("body")})})}),wr=({onConfirm:e,onCancel:t})=>Object(L.jsxs)(X.a,{children:[Object(L.jsx)(Q.a,{use:"danger",onClick:e,children:Object(L.jsx)(p.a,{message:Tr("confirm")})}),Object(L.jsx)(Q.a,{use:"tertiary-light",onClick:t,children:Object(L.jsx)(p.a,{message:"cancel"})})]});var _r=({formName:e,onConfirm:t,onCancel:n})=>Object(L.jsxs)(z.a,{use:"danger",width:550,children:[Object(L.jsx)(Sr,{formName:e}),Object(L.jsx)(Ir,{}),Object(L.jsx)(wr,{onConfirm:t,onCancel:n})]});const Nr=e=>"ContentComponents.cmv2.fields.form."+e,Ar="https://knowledge.hubspot.com/contacts/marketing-contacts",Dr=Object(L.jsx)(Ce.a,{message:Nr("withInlineEditing.automation.marketingContacts.help_jsx"),elements:{Link:b.a},options:{href:Ar}}),kr=Object(L.jsxs)("div",{children:[Object(L.jsx)(p.a,{message:Nr("withInlineEditing.automation.marketingContacts.label")})," "," ",Object(L.jsx)(Er.a,{title:Dr,tooltipPlacement:"right"})]});var Pr=({disabledTooltipTitle:e,formName:t="",value:n,hasPermissions:i,hasFormsWriteAccess:o,onChange:a,readOnly:s=!1})=>{const[c,l]=Object(r.useState)(!1),u=()=>{!1===!n?l(!0):a(!n)},d=()=>{a(!n);l(!1)};return Object(L.jsxs)("div",{children:[Object(L.jsx)(xr,{id:"marketing-contacts-toggle",label:kr,disabledTooltipTitle:e,value:n,disabled:!o||!i||s,onChange:u}),c&&Object(L.jsx)(_r,{formName:t,onConfirm:d,onCancel:()=>l(!1)})]})};const Rr=e=>"ContentComponents.cmv2.fields.form."+e,Fr=Object(L.jsx)(p.a,{message:Rr("withInlineEditing.automation.marketingContacts.noPermissions")}),Lr=({value:e,onChange:t,useOnDark:n,formGuid:r,isGoToWebinarEnabled:i,readOnly:o})=>Object(L.jsx)(m.a,{children:Object(L.jsx)(G,{formGuid:r,onWebinarChange:t,useOnDark:n,webinarKey:e,isGoToWebinarEnabled:i,readOnly:o})}),Mr=({value:e,onChange:t,hasFormsWriteAccess:n,readOnly:r})=>Object(L.jsx)(xr,{id:"always-create-contact-toggle",label:Object(L.jsx)(p.a,{message:Rr("withInlineEditing.automation.newContacts")}),value:e,onChange:()=>t(!e),disabledTooltipTitle:!n&&Fr,disabled:!n,readOnly:r}),Br=({useOnDark:e,formGuid:t,goToWebinarValue:n,formName:r="",alwaysCreateContactForNewEmail:i=!1,shouldShowMarketingContactsToggle:o=!1,hasMarketingContactsPermissions:a=!1,isCreatingMarketingContacts:s=!1,isGoToWebinarEnabled:c=!1,followupEmailId:l,legacyFollowupEmailId:u,clearLegacyFollowupEmail:d,hasFormsWriteAccess:p=!0,onAlwaysCreateContactForNewEmailChange:h=(()=>{}),onIsCreatingMarketingContactsChange:f=(()=>{}),onGoToWebinarSelectChange:g=(()=>{}),hasWorkflowsAccess:b,contentId:O,hasAutomatedEmailEditorAccess:y,hasEmailMarketingAccess:j,hasInlineEmailEditorAccess:v,hasWorkflowsAppAccess:C,hasWorkflowsDeleteAccess:x,hasWorkflowsWriteAccess:E,isFreePortal:T,onAddWorkflowEvent:S,onEditWorkflowEvent:I,onRemoveWorkflowEvent:w,onChangeFollowupEmailEvent:_,onFollowupEmailIdChange:N,readOnly:A,followupEmailSelectedForForm:D,scrollToFollowupEmail:k})=>Object(L.jsxs)(Ht.a,{children:[Object(L.jsx)(m.a,{children:Object(L.jsx)(Mr,{value:i,onChange:h,hasFormsWriteAccess:p,readOnly:A})}),o&&Object(L.jsx)(m.a,{children:Object(L.jsx)(Pr,{disabledTooltipTitle:Fr,formName:r,value:s,hasPermissions:a,hasFormsWriteAccess:p,onChange:f,readOnly:A})}),p&&c&&Object(L.jsx)(Lr,{useOnDark:e,formGuid:t,onChange:g,value:n,readOnly:A}),j&&O&&Object(L.jsx)(Rn,{clearLegacyFollowupEmail:d,contentId:O,followupEmailId:l,formGuid:t,hasAutomatedEmailEditorAccess:y,hasInlineEmailEditorAccess:v,hasWorkflowsAppAccess:C,followupEmailSelectedForForm:D,legacyFollowupEmailId:u,onChangeFollowupEmailEvent:_,onFollowupEmailIdChange:N,readOnly:A,scrollToFollowupEmail:k}),b&&Object(L.jsx)(yt,{contentId:O,formGuid:t,hasWorkflowsAppAccess:C,hasWorkflowsDeleteAccess:x,hasWorkflowsWriteAccess:E,isFreePortal:T,onAddWorkflowEvent:S,onEditWorkflowEvent:I,onRemoveWorkflowEvent:w,readOnly:A,useOnDark:e})]});Br.propTypes={contentId:o.a.number,followupEmailId:o.a.number,followupEmailSelectedForForm:o.a.object,formGuid:o.a.string.isRequired,formName:o.a.string.isRequired,useOnDark:o.a.bool,goToWebinarValue:o.a.string,alwaysCreateContactForNewEmail:o.a.bool,isCreatingMarketingContacts:o.a.bool,shouldShowMarketingContactsToggle:o.a.bool,hasMarketingContactsPermissions:o.a.bool,isGoToWebinarEnabled:o.a.bool,legacyFollowupEmailId:o.a.number,clearLegacyFollowupEmail:o.a.func,onAlwaysCreateContactForNewEmailChange:o.a.func,onIsCreatingMarketingContactsChange:o.a.func,onFollowupEmailIdChange:o.a.func,onGoToWebinarSelectChange:o.a.func,hasAutomatedEmailEditorAccess:o.a.bool,hasEmailMarketingAccess:o.a.bool,hasInlineEmailEditorAccess:o.a.bool,hasFormsWriteAccess:o.a.bool,hasWorkflowsAccess:o.a.bool,hasWorkflowsAppAccess:o.a.bool,hasWorkflowsDeleteAccess:o.a.bool,hasWorkflowsWriteAccess:o.a.bool,isFreePortal:o.a.bool,onAddWorkflowEvent:o.a.func,onEditWorkflowEvent:o.a.func,onRemoveWorkflowEvent:o.a.func,onChangeFollowupEmailEvent:o.a.func,readOnly:o.a.bool,scrollToFollowupEmail:o.a.func.isRequired};var Ur=Br;const Vr=["label","value","onChange","readOnly","useOnDark","helpTitle"],Hr=e=>"ContentComponents.cmv2.fields.form.withInlineEditing.formFieldEditor."+e,qr=e=>{const{label:t,value:n,onChange:i,readOnly:o,useOnDark:a,helpTitle:s}=e,c=Object(Be.a)(e,Vr),l=Object(r.useMemo)(()=>s?Object(L.jsx)(Er.a,{title:s,children:t}):t,[s,t]);return Object(L.jsx)(m.a,Object.assign({label:l},c,{children:Object(L.jsx)(J.a,{defaultValue:n,onChange:({target:{value:e}})=>i(e),readOnly:o,use:a?"on-dark":"default"})}))},Gr=({field:e,useOnDark:t=!1,openFormFn:n=(()=>{}),onChange:i=(()=>{})})=>{const o=e.getIsRequired(),a=e.getIsHidden(),s=e.getOptions(),c=e.getHasDefaultValue(),l=e.getHasPlaceholderValue();return Object(L.jsxs)(Ht.a,{"data-selenium":"form-field-editor",children:[Object(L.jsx)(xr,{"data-selenium":"form-field-required",id:"form-field-required-toggle",label:Object(L.jsx)(p.a,{message:Hr("fieldRequired")}),value:o,onChange:()=>i(e.setIsRequired(!o))}),Object(L.jsx)(xr,{"data-selenium":"form-field-hidden",id:"form-field-hidden-toggle",label:Object(L.jsxs)(r.Fragment,{children:[Object(L.jsx)(p.a,{message:Hr("fieldHidden")}),Object(L.jsx)(y.a,{title:Object(L.jsx)(p.a,{message:Hr("hiddenToggleTooltip")}),placement:"right",children:Object(L.jsx)(ae.a,{name:"info",size:"small",className:"m-left-1"})})]}),value:a,disabled:o,disabledTooltipTitle:Object(L.jsx)(p.a,{message:Hr("hiddenFieldDisabled")}),onChange:()=>i(e.setIsHidden(!a))}),Object(L.jsx)(qr,{"data-selenium":"form-field-name",label:Object(L.jsx)(p.a,{message:Hr("propertyName")}),value:e.getPropertyName(),readOnly:!0,useOnDark:t}),Object(L.jsx)(qr,{"data-selenium":"form-field-label",label:Object(L.jsx)(p.a,{message:Hr("fieldLabel")}),helpTitle:Object(L.jsx)(p.a,{message:Hr("fieldLabelHelp")}),value:e.getLabel(),onChange:t=>i(e.setLabel(t)),useOnDark:t}),l&&Object(L.jsx)(qr,{"data-selenium":"form-field-placeholder",label:Object(L.jsx)(p.a,{message:Hr("placeholder")}),helpTitle:Object(L.jsx)(p.a,{message:Hr("placeholderHelp")}),value:e.getPlaceholder(),onChange:t=>i(e.setPlaceholder(t)),useOnDark:t}),c&&Object(L.jsx)(qr,{"data-selenium":"form-field-defaultvalue",label:Object(L.jsx)(p.a,{message:Hr("defaultValue")}),helpTitle:Object(L.jsx)(p.a,{message:Hr("defaultValueHelp")}),value:e.getDefaultValue(),onChange:t=>i(e.setDefaultValue(t)),useOnDark:t}),s.length>0&&Object(L.jsx)("div",{className:"m-top-2","data-test-id":"go-to-full-editor",children:Object(L.jsx)(Ce.a,{message:Hr("fieldValuesHelp_jsx"),options:{external:!0,onClick:n},elements:{Link:b.a}})})]})};Gr.propTypes={field:o.a.object,useOnDark:o.a.bool,openFormFn:o.a.func,onChange:o.a.func};var Wr=Gr,zr=n(181),$r=n(1009);const Kr=e=>"ContentComponents.cmv2.fields.form.withInlineEditing."+e,Yr=({label:e="",isDeletable:t=!0,draggable:n=!1,hasFormsWriteAccess:r=!0,dragHandle:i=(()=>{}),onEditClick:o=(()=>{}),onRemoveClick:a=(()=>{}),readOnly:s=!1})=>Object(L.jsxs)(Te.a,{"data-selenium":"form-field",children:[Object(L.jsx)(Yt.a,{grow:1,children:Object(L.jsx)($r.a,{closeable:!1,draggable:n,dragHandle:i,children:e})}),Object(L.jsxs)(Yt.a,{shrink:0,className:"p-left-3",children:[r&&Object(L.jsx)(De.a,{"data-selenium":"form-field-edit-button",tooltip:Object(L.jsx)(p.a,{message:Kr("formField.edit")}),placement:"top",onClick:o,disabled:s,children:Object(L.jsx)(ae.a,{name:"edit"})}),t&&r&&Object(L.jsx)(De.a,{"data-selenium":"form-field-remove-button",tooltip:Object(L.jsx)(p.a,{message:Kr("formField.delete")}),placement:"top",onClick:a,disabled:s,children:Object(L.jsx)(ae.a,{name:"delete"})})]})]}),Xr=({fields:e=[],hasFormsWriteAccess:t=!1,onEditClick:n=(()=>{}),onRemoveClick:r=(()=>{}),readOnly:i=!1})=>Object(L.jsx)("div",{className:"form--form-field",children:e.map(({field:e},o)=>Object(L.jsx)("div",{className:"m-bottom-2",children:Object(L.jsx)(Yr,{label:e.label||e.placeholder,draggable:!1,isDeletable:"email"!==e.name,onEditClick:()=>n(o),onRemoveClick:()=>r(o),hasFormsWriteAccess:t,readOnly:i},o)},o)).valueSeq().toArray()}),Jr=e=>{const{fields:t=[],onOrderChange:n=(()=>{}),onEditClick:i=(()=>{}),onRemoveClick:o=(()=>{}),DraggableComponents:a}=e,{UISortableList:s,UIDragListItem:c,UIDragHandle:l}=a,[u,d]=Object(r.useState)([...t.keys()]),[p,h]=Object(r.useState)(t);Object(r.useEffect)(()=>{h(e.fields);u.length!==e.fields.size&&d([...e.fields.keys()])},[u.length,e.fields]);const m=e=>{d(e);n(e)};return Object(L.jsx)("div",{className:"form--form-fields",children:Object(L.jsx)(s,{dragGroup:"unique-key",order:u,onOrderChange:m,children:p.map(({field:e},t)=>Object(L.jsx)(c,{dragId:t,children:Object(L.jsx)("div",{className:"m-bottom-2",children:Object(L.jsx)(Yr,{label:e.label||e.placeholder,draggable:!0,dragHandle:l,isDeletable:"email"!==e.name,onEditClick:()=>i(t),onRemoveClick:()=>o(t)},t)})},t)).valueSeq().toArray()})})},Qr=({canChangeFieldsOrder:e,DraggableComponents:t,hasFormsWriteAccess:n,readOnly:r})=>!r&&e&&t&&t.UISortableList&&t.UIDragListItem&&t.UIDragHandle&&n?Jr:Xr,Zr={fields:o.a.instanceOf(zr.OrderedMap),onEditClick:o.a.func,onRemoveClick:o.a.func};Jr.propTypes=Object.assign({},Zr,{DraggableComponents:o.a.object.isRequired,onOrderChange:o.a.func});Xr.propTypes=Object.assign({},Zr,{hasFormsWriteAccess:o.a.bool});var ei=Qr;const ti=e=>"ContentComponents.cmv2.fields.form.withInlineEditing."+e,ni=({useOnDark:e,onChange:t,options:n})=>Object(L.jsx)(g.a,{"data-selenium":"form-field-add-property-select",className:"m-bottom-1",onChange:({target:{value:e}})=>t(e),options:n,placeholder:Object(L.jsx)(p.a,{message:ti("propertySelect.label")}),buttonUse:e?"form-on-dark":"form"}),ri=({onClick:e})=>Object(L.jsx)(Q.a,{"data-selenium":"form-field-add-cancel-button",className:"m-left-0",use:"tertiary",size:"extra-small",onClick:e,children:Object(L.jsx)(p.a,{message:ti("addFormField.cancel")})}),ii=({onClick:e,readOnly:t})=>Object(L.jsxs)(b.a,{"data-selenium":"form-field-add-button",disabled:t,onClick:e,children:[Object(L.jsx)(ae.a,{name:"add"}),Object(L.jsx)(p.a,{message:ti("addFormField.label")})]}),oi=({onSelectProperty:e=(()=>{}),propertyOptions:t=[],useOnDark:n=!1,readOnly:i=!1})=>{const[o,a]=Object(r.useState)(!1),s=t=>{a(!1);e(t)};return o?Object(L.jsxs)("div",{children:[Object(L.jsx)(ni,{useOnDark:n,onChange:s,options:t}),Object(L.jsx)(ri,{onClick:()=>a(!1)})]}):Object(L.jsx)(ii,{onClick:()=>a(!0),readOnly:i})};oi.propTypes={propertyOptions:o.a.array,useOnDark:o.a.bool,onSelectProperty:o.a.func,readOnly:o.a.bool};var ai=oi;const si=(e,t)=>({propertyOptions:Fe.t(t.formDefinition)(e,t)}),ci={};var li=Object(a.connect)(si,ci)(ai);const ui=["NONE","IMPLICIT_CONSENT","SEPERATE_CONSENT","LEGITIMATE_INTEREST"],di=e=>"ContentComponents.cmv2.fields.form.withInlineEditing.gdprSelect."+e,pi=()=>ui.map(e=>({text:Object(s.a)(di(`options.${e}.text`)),help:Object(L.jsx)(p.a,{message:di(`options.${e}.help`)}),value:e})),hi=({value:e,useOnDark:t,onChange:n,disabled:r,options:i,readOnly:o})=>Object(L.jsx)(g.a,{"data-selenium":"form-gdpr-select",defaultValue:ui[0],value:e,onChange:({target:{value:e}})=>n(e),options:i,disabled:r,buttonUse:t?"form-on-dark":"form",readOnly:o}),mi=({value:e="",onChange:t=(()=>{}),disabled:n=!1,useOnDark:i=!1,readOnly:o=!1})=>{const a=Object(r.useMemo)(()=>pi(),[]);return Object(L.jsx)(hi,{value:e,useOnDark:i,onChange:t,options:a,disabled:n,readOnly:o})};mi.propTypes={value:o.a.oneOf(ui),useOnDark:o.a.bool,disabled:o.a.bool,onChange:o.a.func,readOnly:o.a.bool};var fi=mi,gi=n(2809);const bi="https://knowledge.hubspot.com/forms/prevent-spam-form-submissions",Oi=e=>"ContentComponents.cmv2.fields.form.withInlineEditing."+e,yi=()=>Object(L.jsx)(Er.a,{title:Object(L.jsx)(p.a,{message:Oi("formContent.topMessage.reOrderingDisabledTooltip")}),tooltipPlacement:"right"}),ji=({formGuid:e,canReOrder:t,openFormFn:n})=>e?Object(L.jsx)("p",{children:Object(L.jsxs)(u.a,{children:[!t&&Object(L.jsx)(Ce.a,{message:Oi("formContent.topMessage.reOrderingDisabled_jsx"),elements:{Help:yi}}),Object(L.jsx)(Ce.a,{message:Oi("formContent.topMessage.moreAdvanced_jsx"),options:{external:!0,onClick:n},elements:{Link:b.a}})]})}):null,vi=({DraggableComponents:e,formGuid:t,formDefinition:n,formFields:r,canChangeFieldsOrder:i,onEditFieldClick:o,onRemoveFieldClick:a,onAddFieldClick:s,onChangeFieldsOrder:c,useOnDark:l,openFormFn:u,hasFormsWriteAccess:d,readOnly:h})=>{const f=ei({canChangeFieldsOrder:i,DraggableComponents:e,hasFormsWriteAccess:d,readOnly:h});return Object(L.jsx)("div",{children:Object(L.jsx)(m.a,{label:Object(L.jsx)(p.a,{message:Oi("formContent.formFields")}),children:Object(L.jsxs)("div",{children:[Object(L.jsx)(ji,{formGuid:t,canReOrder:i,openFormFn:u}),Object(L.jsx)(f,{fields:r,canChangeFieldsOrder:i,onOrderChange:c,onEditClick:o,onRemoveClick:a,DraggableComponents:e,hasFormsWriteAccess:d,readOnly:h}),d&&Object(L.jsx)(li,{formDefinition:n,onSelectProperty:s,useOnDark:l,readOnly:h})]})})})},Ci=({value:e,onChange:t,useOnDark:n,hasFormsWriteAccess:r,readOnly:i})=>Object(L.jsx)(m.a,{label:Object(L.jsx)(p.a,{message:Oi("formContent.buttonText")}),required:!0,children:Object(L.jsx)("div",{children:Object(L.jsx)(J.a,{"data-selenium":"form-submit-button-text",defaultValue:e,onChange:({target:{value:e}})=>t(e),use:n?"on-dark":"default",disabled:!r,readOnly:i})})}),xi=({value:e,onChange:t,useOnDark:n,disabled:r,readOnly:i})=>Object(L.jsx)(m.a,{label:Object(L.jsx)(p.a,{message:Oi("formContent.gdprSelect")}),children:Object(L.jsx)(fi,{value:e,useOnDark:n,onChange:t,disabled:r,readOnly:i})}),Ei=()=>Object(L.jsx)(m.a,{children:Object(L.jsx)(l.a,{type:"info",children:Object(L.jsx)(jt.a,{message:Oi("formContent.captchaExplaination")})})}),Ti=()=>Object(L.jsxs)(r.Fragment,{children:[Object(L.jsx)(p.a,{message:Oi("formContent.captcha")}),Object(L.jsx)("span",{className:"m-left-1",children:Object(L.jsx)(y.a,{title:Object(L.jsx)(Ce.a,{message:Oi("formContent.captchaTooltip_jsx"),options:{useZorse:!0,url:bi},elements:{Link:gi.a}}),children:Object(L.jsx)(ae.a,{size:14,name:"info"})})})]}),Si=({value:e,onChange:t,hasFormsWriteAccess:n,readOnly:i})=>Object(L.jsxs)(r.Fragment,{children:[Object(L.jsx)(m.a,{children:Object(L.jsx)(xr,{id:"captcha-toggle",label:Object(L.jsx)(Ti,{}),value:e,onChange:()=>t(!e),disabled:!n,readOnly:i})}),n&&e?Object(L.jsx)(Ei,{}):null]}),Ii=({DraggableComponents:e=null,formGuid:t=null,useOnDark:n=!1,buttonText:r="",isCaptchaEnabled:i=!1,formDefinition:o=null,formFields:a=[],canChangeFieldsOrder:s=!0,gdprValue:c="",isGdprSelectDisabled:l=!1,hasFormsWriteAccess:u=!0,openFormFn:d=(()=>{}),onIsCaptchaEnabledChange:p=(()=>{}),onButtonTextChange:h=(()=>{}),onEditFieldClick:m=(()=>{}),onRemoveFieldClick:f=(()=>{}),onAddFieldClick:g=(()=>{}),onChangeFieldsOrder:b=(()=>{}),onGdprValueChange:O=(()=>{}),readOnly:y=!1})=>Object(L.jsxs)(Ht.a,{children:[Object(L.jsx)(vi,{DraggableComponents:e,formGuid:t,formDefinition:o,formFields:a,canChangeFieldsOrder:s,openFormFn:d,onEditFieldClick:m,onRemoveFieldClick:f,onAddFieldClick:g,onChangeFieldsOrder:b,useOnDark:n,hasFormsWriteAccess:u,readOnly:y}),Object(L.jsx)(Ci,{value:r,onChange:h,useOnDark:n,hasFormsWriteAccess:u,readOnly:y}),Object(L.jsx)(xi,{value:c,onChange:O,useOnDark:n,disabled:l||!u,readOnly:y}),Object(L.jsx)(Si,{value:i,onChange:p,hasFormsWriteAccess:u,readOnly:y})]});Ii.propTypes={DraggableComponents:o.a.object,formGuid:o.a.string,useOnDark:o.a.bool,buttonText:o.a.string,isCaptchaEnabled:o.a.bool,formDefinition:o.a.object,formFields:o.a.object,canChangeFieldsOrder:o.a.bool,gdprValue:o.a.string,isGdprSelectDisabled:o.a.bool,onIsCaptchaEnabledChange:o.a.func,openFormFn:o.a.func,onButtonTextChange:o.a.func,onChangeFieldsOrder:o.a.func,onEditFieldClick:o.a.func,onRemoveFieldClick:o.a.func,onAddFieldClick:o.a.func,onGdprValueChange:o.a.func,hasFormsWriteAccess:o.a.bool,readOnly:o.a.bool};var wi=Ii,_i=n(2739),Ni=n(701);const Ai=e=>"ContentComponents.cmv2.fields.form."+e,Di=({hasFormsWriteAccess:e=!0,onCreateClick:t=(()=>{}),onCloneClick:n=(()=>{}),onPagesClick:r=(()=>{}),onEditorClick:i=(()=>{}),onViewSubmissionsClick:o=(()=>{}),guid:a=""})=>Object(L.jsxs)(Bt.a,{children:[Object(L.jsx)(b.a,{"data-selenium":"form-actions-dropdown-view-submissions",disabled:!e,onClick:()=>o(a),children:Object(L.jsx)(p.a,{message:Ai("viewSubmissions")})}),Object(L.jsx)(b.a,{"data-selenium":"form-actions-dropdown-form-clone",disabled:!e,onClick:()=>n(a),children:Object(L.jsx)(p.a,{message:Ai("clone")})}),Object(L.jsx)(b.a,{"data-selenium":"form-actions-dropdown-view-pages",disabled:!e,onClick:r,children:Object(L.jsx)(p.a,{message:Ai("pages")})}),Object(L.jsx)(b.a,{"data-selenium":"form-actions-dropdown-go-to-editor",disabled:!e,onClick:i,children:Object(L.jsx)(p.a,{message:Ai("editor")})}),Object(L.jsx)(Ni.a,{}),Object(L.jsx)(b.a,{"data-selenium":"form-actions-dropdown-form-create",disabled:!e,onClick:t,children:Object(L.jsx)(p.a,{message:Ai("create")})})]});var ki=e=>Object(L.jsxs)(Te.a,{className:"m-top-3 m-bottom-4",children:[Object(L.jsx)(Yt.a,{grow:1,children:Object(L.jsx)(_i.a,{"data-selenium":"form-actions-dropdown",buttonSize:"small",buttonClassName:"m-right-6",buttonText:Object(L.jsx)(p.a,{message:Ai("actions")}),children:Di(e)})}),Object(L.jsx)(Yt.a,{children:Object(L.jsx)(u.a,{use:"help",children:Object(L.jsx)(p.a,{message:Ai("rawHTMLWarning.description")})})})]});const Pi=["formDefinition","fieldKey","value","rawHtmlEnabled","onChange","debouncedLoadOptions","hasFormsWriteAccess","onCreateClick","onCloneClick","onPagesClick","onEditorClick","onViewSubmissionsClick","required"],Ri=e=>"ContentComponents.cmv2.fields.form.withInlineEditing."+e;var Fi=e=>{const{formDefinition:t,fieldKey:n,value:r,rawHtmlEnabled:i,onChange:o,debouncedLoadOptions:a,hasFormsWriteAccess:s,onCreateClick:c,onCloneClick:l,onPagesClick:u,onEditorClick:d,onViewSubmissionsClick:h,required:f}=e,g=Object(Be.a)(e,Pi);return Object(L.jsx)(m.a,{labelClassName:"p-right-0",label:Object(L.jsxs)(Te.a,{justify:"between",children:[Object(L.jsx)(p.a,{message:Ri("formSelect.label")}),Object(L.jsx)(lr,{form:t})]}),children:Object(L.jsxs)("div",{children:[Object(L.jsx)(W.a,Object.assign({},g,{value:r,onChange:o,loadOptions:a,"data-selenium":n+":formSelect",clearable:!f})),!i&&t&&Object(L.jsx)(ki,{guid:r,hasFormsWriteAccess:s,onCreateClick:c,onCloneClick:l,onPagesClick:u,onEditorClick:d,onViewSubmissionsClick:h})]})})};const Li=e=>"ContentComponents.cmv2.fields.form.withInlineEditing.createForm."+e,Mi=({className:e,disabled:t,use:n,onClick:r})=>Object(L.jsx)(Q.a,{className:e,size:"sm",use:n,block:!0,onClick:r,disabled:t,children:Object(L.jsx)(p.a,{message:Li("label")})});var Bi=({className:e="m-top-2",use:t="tertiary",hasPermission:n=!1,onClick:r=(()=>{})})=>Object(L.jsx)(y.a,{title:Object(L.jsx)(p.a,{message:Li("noWriteAccess")}),disabled:n,children:Object(L.jsx)("div",{"data-selenium":"create-resource-button",children:Object(L.jsx)(Mi,{className:e,use:t,onClick:r,disabled:!n})})}),Ui=n(1313),Vi=n(37);const Hi=({label:e,id:t,type:n})=>Object(L.jsx)(b.a,{href:n===Ui.a.EXTENSION_RESOURCE?j.b.designManager(t,Vi.a.TEMPLATE):j.b.inpageEdit(t),external:!0,children:e});var qi=({pages:e=[]})=>Object(L.jsx)(Bt.a,{styled:!0,children:e.map(e=>Object(r.createElement)(Hi,Object.assign({},e,{key:e.id})))});const Gi=e=>"ContentComponents.cmv2.fields.form.withInlineEditing.parentPages.modal."+e;var Wi=({pages:e,onCloneForm:t,onClose:n})=>Object(L.jsxs)(z.a,{"data-selenium":"form-used-on-pages-modal",children:[Object(L.jsxs)(K.a,{children:[Object(L.jsx)($.a,{onClick:n}),Object(L.jsx)(te.a,{children:Object(L.jsx)(p.a,{message:Gi("header")})})]}),Object(L.jsxs)(Y.a,{children:[Object(L.jsx)("p",{children:Object(L.jsx)(p.a,{message:Gi("body")})}),Object(L.jsx)(qi,{pages:e})]}),Object(L.jsxs)(X.a,{children:[Object(L.jsx)(Q.a,{use:"primary",onClick:n,children:Object(L.jsx)(p.a,{message:Gi("confirm")})}),Object(L.jsx)(Q.a,{onClick:t,children:Object(L.jsx)(p.a,{message:Gi("copy")})})]})]});const zi=["formGuid","onDismissOtherPagesWarning","onClose","onClone","onFormChange"],$i=e=>{const{formGuid:t,onDismissOtherPagesWarning:n,onClose:r=(()=>{}),onClone:i,onFormChange:o}=e,a=Object(Be.a)(e,zi),s=(...e)=>{n(...e);r(...e)},c=()=>{i(t).then(({guid:e})=>{o({target:{value:e}})}).catch(e=>console.error(e)).finally(()=>{s()})};return Object(L.jsx)(Wi,Object.assign({onClose:s,onCloneForm:c},a))},Ki=(e,t)=>({pages:Fe.q(e,t.formGuid)}),Yi={onDismissOtherPagesWarning:Me.q,onClone:Me.c};var Xi=Object(a.connect)(Ki,Yi)($i),Ji=n(2661),Qi=n(736),Zi=n(2771),eo=n(737);const to=e=>"ContentComponents.cmv2.fields.form.withInlineEditing.parentPages.panel."+e;var no=({pages:e,onClose:t})=>Object(L.jsxs)(Ji.a,{"data-selenium":"form-pages-panel",children:[Object(L.jsx)($.a,{onClick:t}),Object(L.jsx)(Zi.a,{children:Object(L.jsx)(te.a,{children:Object(L.jsx)(p.a,{message:to("header")})})}),Object(L.jsx)(Qi.a,{children:Object(L.jsx)(eo.a,{children:Object(L.jsx)(qi,{pages:e})})})]});const ro=(e,t)=>({pages:Fe.q(e,t.formGuid)}),io={};var oo=Object(a.connect)(ro,io)(no);const ao=e=>"ContentComponents.cmv2.fields.form.withInlineEditing.createForm.withNameModal."+e,so=e=>e?Object(s.a)(ao("defaultFormName"),{pageTitle:e,timestamp:f.a.moment().portalTz().format("LL LTS z")}):"",co=({onCloseClick:e,headerText:t})=>Object(L.jsxs)(K.a,{children:[Object(L.jsx)($.a,{onClick:e}),Object(L.jsx)(te.a,{children:t})]}),lo=({isConflictError:e,name:t,onNameChange:n})=>Object(L.jsx)(Y.a,{children:Object(L.jsx)(m.a,{error:e,validationMessage:e&&Object(L.jsx)(p.a,{message:ao("error.conflict")}),label:Object(L.jsx)(p.a,{message:ao("name")}),children:Object(L.jsx)(J.a,{value:t,onChange:({target:{value:e}})=>n(e)})})}),uo=({isCreating:e,onCreateClick:t,onCancelClick:n,createText:r,isCreateDisabled:i})=>Object(L.jsxs)(X.a,{children:[Object(L.jsx)(ke.a,{loading:e,onClick:t,disabled:i,use:"primary",children:r}),Object(L.jsx)(Q.a,{onClick:n,children:Object(L.jsx)(p.a,{message:ao("cancel")})})]});var po=({defaultFormNamePrefix:e="",isCreating:t=!1,isConflictError:n=!1,onCreateClick:i=(()=>{}),onCancelClick:o=(()=>{}),headerText:a="",createText:s=""})=>{const[c,l]=Object(r.useState)(so(e));return Object(L.jsxs)(z.a,{"data-selenium":"form-create-modal",children:[Object(L.jsx)(co,{onCloseClick:o,headerText:a}),Object(L.jsx)(lo,{name:c,isConflictError:n,onNameChange:l}),Object(L.jsx)(uo,{isCreating:t,onCreateClick:()=>i(c),onCancelClick:o,createText:s,isCreateDisabled:0===c.length})]})};const ho=e=>e?"enabled":"disabled",mo=e=>"ContentComponents.cmv2.fields.form.marketingContactsWarning."+e;var fo=({enabled:e=!1,useEditor:t=!1,openFormFn:n=(()=>{})})=>{const r=e?"success":"warning";return Object(L.jsx)(l.a,{type:r,className:"m-bottom-4","data-is-enabled":e,children:t?Object(L.jsx)(Ce.a,{message:mo(ho(e)+".goToEditor_jsx"),options:{external:!0,onClick:n},elements:{Link:b.a}}):Object(L.jsx)(jt.a,{message:mo(ho(e)+".editInline")})})},go=n(100),bo=n(30),Oo=n.n(bo);const yo="api/consent-options/v1/settings/with-defaults/language";var jo=({language:e="en",businessUnitId:t=0})=>Oo.a.get(`${yo}/${e}`,{query:{businessUnitId:t}});const vo="LEGITIMATE_INTEREST_PQL";var Co=Object.freeze({IS_LEGITIMATE_INTEREST:"isLegitimateInterest",COMMUNICATION_CONSENT_TEXT:"communicationConsentText",COMMUNICATION_CONSENT_CHECKBOXES:"communicationConsentCheckboxes",PROCESSING_CONSENT_TYPE:"processingConsentType",PROCESSING_CONSENT_TEXT:"processingConsentText",PROCESSING_CONSENT_CHECKBOX_LABEL:"processingConsentCheckboxLabel",PROCESSING_CONSENT_FOOTER_TEXT:"processingConsentFooterText",PRIVACY_POLICY_TEXT:"privacyPolicyText",SUBSCRIPTION_TYPES:"legitimateInterestSubscriptionTypes",LAWFUL_BASIS:"legitimateInterestLegalBasis"});var xo={IMPLICIT:"IMPLICIT",REQUIRED_CHECKBOX:"REQUIRED_CHECKBOX"};const Eo={NONE:"NONE",IMPLICIT_CONSENT:"IMPLICIT_CONSENT",SEPERATE_CONSENT:"SEPERATE_CONSENT",LEGITIMATE_INTEREST:"LEGITIMATE_INTEREST"};Object.freeze({[Eo.NONE]:"none",[Eo.IMPLICIT_CONSENT]:"implicitConsent",[Eo.SEPERATE_CONSENT]:"seperateConsent",[Eo.LEGITIMATE_INTEREST]:"legitimateInterest"});var To=Eo;var So=[{key:Co.IS_LEGITIMATE_INTEREST,getValue:({legalConsentOption:e})=>e===To.LEGITIMATE_INTEREST},{key:Co.COMMUNICATION_CONSENT_TEXT,getValue:({legalConsentCopy:e})=>e.consentToCommunicate},{key:Co.COMMUNICATION_CONSENT_CHECKBOXES,getValue:({communicationConsentCheckboxes:e})=>e},{key:Co.PROCESSING_CONSENT_TYPE,getValue:({legalConsentOption:e})=>e===To.SEPERATE_CONSENT?xo.REQUIRED_CHECKBOX:xo.IMPLICIT},{key:Co.PROCESSING_CONSENT_TEXT,getValue:({legalConsentCopy:e,isImplicityConsent:t})=>t?e.consentToProcessDataImplicit:e.consentToProcessDataExplicit},{key:Co.PROCESSING_CONSENT_CHECKBOX_LABEL,getValue:({legalConsentCopy:e})=>e.consentToProcessDataCheckbox},{key:Co.PRIVACY_POLICY_TEXT,getValue:({legalConsentCopy:e,isLegitimateInterest:t})=>t?e.legitimateInterest:e.privacyPolicy},{key:Co.SUBSCRIPTION_TYPES,getValue:({communicationConsentCheckboxes:e,isLegitimateInterest:t})=>t&&e[0]?[e[0].communicationTypeId]:[]},{key:Co.LAWFUL_BASIS,getValue:()=>vo}];var Io=e=>e===To.LEGITIMATE_INTEREST;var wo=e=>e===To.IMPLICIT_CONSENT;const _o="ONE_TO_ONE",No=({active:e})=>!0===e,Ao=({internalName:e})=>e===_o,Do=(e,t)=>e.order-t.order;var ko=e=>{const t=e.sort(Do).filter(No),n=t.find(Ao),{id:r}=n||t[0]||{};return r};var Po=({subscriptionDefinitions:e,legalConsentCopy:t})=>{const n=Object.keys(t.consentCheckboxes);return e.filter(e=>n.indexOf(String(e.id))>-1)};const Ro=({legalConsentCopy:e,communicationConsentCheckboxes:t=[]})=>t.map(t=>Object.assign({},t,{label:e.consentCheckboxes[t.communicationTypeId].content})),Fo=({legalConsentCopy:e,subscriptionDefinitions:t})=>{const n=Po({subscriptionDefinitions:t,legalConsentCopy:e}),r=ko(n);return[{communicationTypeId:Number(r),label:e.consentCheckboxes[r].content}]};var Lo=({legalConsentCopy:e,subscriptionDefinitions:t,communicationConsentCheckboxes:n=[]})=>n.length>0?Ro({legalConsentCopy:e,communicationConsentCheckboxes:n}):Fo({legalConsentCopy:e,subscriptionDefinitions:t});var Mo=({legalConsentOption:e,legalConsentCopy:t,subscriptionDefinitions:n,communicationConsentCheckboxes:r=[]})=>{const i=Io(e),o=wo(e),a=Lo({legalConsentCopy:t,subscriptionDefinitions:n,communicationConsentCheckboxes:r});return e===To.NONE?null:So.reduce((n,r)=>Object.assign({},n,{[r.key]:r.getValue({legalConsentOption:e,legalConsentCopy:t,isLegitimateInterest:i,isImplicityConsent:o,communicationConsentCheckboxes:a})}),{})};const Bo=e=>"ContentComponents.cmv2.fields.form."+e,Uo=e=>"ContentComponents.cmv2.fields.form.withInlineEditing."+e,Vo=e=>"ContentComponents.cmv2.fields.form.withInlineEditing.createForm.withNameModal."+e,Ho=e=>Object(L.jsx)(qn.a,Object.assign({withContentPadding:!0,defaultOpen:!0},e,{className:"cmv2-field-group without-nested-groups"})),qo=()=>Object(L.jsx)(l.a,{titleText:Object(L.jsx)(p.a,{message:Bo("noFormsWrite.title")}),type:"warning",children:Object(L.jsx)("p",{className:"p-bottom-4",children:Object(L.jsx)(p.a,{message:Bo("noFormsWrite.body")})})});let Go=!1;class Wo extends r.PureComponent{constructor(e){super(e);const{FormDefinition:t,loadOptions:n,selectedForm:r}=e;this.onWebinarChange=this.onWebinarChange.bind(this);this.onFormAutomationOpenChange=this.onFormAutomationOpenChange.bind(this);this.onFormContentOpenChange=this.onFormContentOpenChange.bind(this);this.onThankYouOpenChange=this.onThankYouOpenChange.bind(this);this.onShowPagesStateChange=this.onShowPagesStateChange.bind(this);this.showFormFollowupEmail=this.showFormFollowupEmail.bind(this);this.flushQueuedFormDefinition=this.flushQueuedFormDefinition.bind(this);this.showFormCreateModal=this.showFormCreateModal.bind(this);this.hideFormCreateModal=this.hideFormCreateModal.bind(this);this.setFormCreateConflictError=this.setFormCreateConflictError.bind(this);this.handleCreateForm=this.handleCreateForm.bind(this);this.onEditField=this.onEditField.bind(this);this.handleCloneForm=this.handleCloneForm.bind(this);this.toggleFormCloneModal=this.toggleFormCloneModal.bind(this);this.toggleClonePendingStatus=this.toggleClonePendingStatus.bind(this);this.handleGdprValueChange=this.handleGdprValueChange.bind(this);this.scrollToFollowupEmail=this.scrollToFollowupEmail.bind(this);this.debouncedLoadOptions=Object(c.debounce)(n,me.c);this.state={pagesSidePanelOpen:!1,isShowingFormCreateModal:!1,isCreateFormConflictError:!1,selectedFieldId:null,formAutomationOpen:!1,formContentOpen:!1,thankYouOpen:!1,hasIntendedToEdit:!1,isShowingFormCloneModal:!1,isClonePending:!1,currentGuid:null,formDefinition:t&&r?new t(r):void 0}}componentDidMount(){const{fetchDraftForm:e,fetchProperties:t,fetchSubscriptions:n,fetchDefaultConsentCopy:r,fetchConsentCopyFn:i,fetchParentPages:o}=this.props;if(this.formGuid){e(this.formGuid);o(this.formGuid);t();n();i&&r(i)}document.addEventListener("FIELD_REVEAL",this.showFormFollowupEmail);if(Go){document.dispatchEvent(new CustomEvent("FIELD_REVEAL_LISTENER_READY"));Go=!1}}componentDidUpdate(e){const{FormDefinition:t}=this.props;Object(c.isEqual)(e.currentFieldKey,this.props.fieldKey)&&!Object(c.isEqual)(this.props.currentFieldKey,this.props.fieldKey)&&this.setState({selectedFieldId:null,formContentOpen:!0});if(!Object(c.isEqual)(e.selectedForm,this.props.selectedForm)){const{guid:n}=e.selectedForm||{},{guid:r}=this.props.selectedForm||{};this.setState(Object.assign({formDefinition:new t(this.props.selectedForm)},n!==r?{formContentOpen:!0}:{}))}}componentWillUnmount(){document.removeEventListener("FIELD_REVEAL",this.showFormFollowupEmail)}get fieldKey(){const{fieldKey:e}=this.props;return e&&e.join(".")}get formGuid(){const{value:e}=this.props;return e?"object"==typeof e?e.form_id||null:e:null}scrollToFollowupEmail(e,t=!1){const{scrollToField:n}=this.props;t&&(Go=!0);n&&e&&n({fieldKey:e.split("."),section:"form-followup-email",dispatchEvent:!0,afterRemount:t})}showFormFollowupEmail({detail:{fieldKey:e,section:t}}){if(Object(c.isEqual)(e,this.props.fieldKey)&&"form-followup-email"===t){const t=()=>{const t=document.querySelector(`.cmv2-edit-form [data-field-key="${e.join(".")}"] [data-field-section="form-followup-email"]`);t&&Object(go.r)(t,!0)};this.setState({formContentOpen:!1,thankYouOpen:!1});if(this.state.formAutomationOpen)t();else{this.setState({formAutomationOpen:!0});window.setTimeout(t,250)}}}showFormCreateModal(){this.setState({isShowingFormCreateModal:!0,isCreateFormConflictError:!1})}hideFormCreateModal(){this.setState({isShowingFormCreateModal:!1,isCreateFormConflictError:!1})}setFormCreateConflictError(){this.setState({isCreateFormConflictError:!0})}toggleFormCloneModal(e=null){this.setState({isShowingFormCloneModal:!this.state.isShowingFormCloneModal,currentGuid:e})}getShouldPromptPagesModal(){const{shouldShowPagesModal:e}=this.props,{hasIntendedToEdit:t}=this.state;return t&&e}onWebinarChange(e){this.props.onFieldChange(Object.assign({},this.props.value,{gotowebinar_webinar_key:e}))}onFormAutomationOpenChange(e){this.setState({formAutomationOpen:e.target.value})}onFormContentOpenChange(e){this.setState({formContentOpen:e.target.value})}onThankYouOpenChange(e){this.setState({thankYouOpen:e.target.value})}onShowPagesStateChange(){this.setState({pagesSidePanelOpen:!this.state.pagesSidePanelOpen})}onEditField(e){this.props.setFieldKey(this.props.fieldKey);this.props.onOpenEditFieldPanelEvent();this.setState({hasIntendedToEdit:!0,selectedFieldId:e})}toggleClonePendingStatus(){this.setState({isClonePending:!this.state.isClonePending})}handleCreateForm(e){const{createFormFn:t}=this.props;t(e,{shouldRedirect:!1,onSuccess:this.hideFormCreateModal,onConflictError:this.setFormCreateConflictError})}handleCloneForm(e){const{cloneFormFn:t}=this.props;this.toggleClonePendingStatus();t(this.state.currentGuid,e).then(({guid:e})=>this.props.onFormChange({target:{value:e}})).catch(e=>console.error(e)).finally(()=>{this.toggleFormCloneModal();this.toggleClonePendingStatus()})}handleGdprValueChange(e){const{subscriptions:t,onGdprChangeEvent:n}=this.props,{formDefinition:r}=this.state,{metaData:i,businessUnitId:o}=r,a=i.find(e=>"lang"===e.name).value,s=Hn.a[a]||a;n();jo({language:s,businessUnitId:o}).then(n=>{const i=Mo({legalConsentOption:e,legalConsentCopy:n,subscriptionDefinitions:t});this.updateForm(r.updateMetaDataValue("legalConsentOptions",i))}).catch(e=>{Un.a.captureMessage("Failed to update Form GDPR value",e)})}flushQueuedFormDefinition(){const{queuedFormDefinition:e}=this.state;if(e){this.setState({queuedFormDefinition:null});this.updateForm(e)}}updateForm(e){const{shouldShowPagesModal:t,updatePreview:n,hasFormsWriteAccess:r}=this.props,{hasIntendedToEdit:i}=this.state;if(!r)return;if(t&&!i){this.setState({hasIntendedToEdit:!0,queuedFormDefinition:e});return}const o=e.toJS();this.props.updateFormDraft(o,n)}maybeRenderPagesModal(){const{onFormChange:e}=this.props;return this.getShouldPromptPagesModal()?Object(L.jsx)(Xi,{onFormChange:e,formGuid:this.formGuid,onClose:this.flushQueuedFormDefinition}):null}renderResponse(){const{componentsByType:e,fieldKey:t,onFieldChange:n,readOnly:r,useOnDark:i,value:o}=this.props;return Object(L.jsxs)("div",{className:"m-top-5",children:[Object(L.jsx)(l.a,{type:"info",children:Object(L.jsx)(jt.a,{message:Uo("thankYou.pageOnlyNote")})}),Object(L.jsx)(ve,{componentsByType:e,fieldKey:t,onFieldChange:n,readOnly:r,useOnDark:i,value:o,hasFormsWriteAccess:!0})]})}renderSelectedField(){const{useOnDark:e,openFormFn:t,hasFormsWriteAccess:n,maybeRenderInlineEditingOptIn:r}=this.props,{selectedFieldId:i,formDefinition:o}=this.state,a=this.state.formDefinition.getFormFieldById(i);return Object(L.jsxs)(L.Fragment,{children:[n?r(a.objectTypeId,a.name):Object(L.jsx)(qo,{}),Object(L.jsxs)("div",{className:"form-inline-field-editing",children:[this.maybeRenderPagesModal(),Object(L.jsx)(lr,{form:o}),Object(L.jsx)(Wr,{field:a,useOnDark:e,openFormFn:t,onChange:e=>{this.updateForm(this.state.formDefinition.updateFormField(e))}})]})]})}renderAccordions(){const{value:e,useOnDark:t,hasAutomatedEmailEditorAccess:n,hasEmailMarketingAccess:r,hasInlineEmailEditorAccess:i,hasWorkflowsAccess:o,hasWorkflowsAppAccess:a,hasWorkflowsDeleteAccess:s,hasWorkflowsWriteAccess:c,isFreePortal:l,isGoToWebinarEnabled:u,legacyFollowupEmailId:d,clearLegacyFollowupEmail:h,DraggableComponents:m,consentCopy:f,hasMarketingContactsAccess:g,hasMarketingContactsPermissions:b,allowFormEditingDnd:O,openFormFn:y,onAutomationChange:j,hasFormsWriteAccess:v,onIsCreatingMarketingContactsChange:C,readOnly:x,contentId:E,onAddWorkflowEvent:T,onEditWorkflowEvent:S,onRemoveWorkflowEvent:I,onChangeFollowupEmailEvent:w,onFollowupEmailIdChange:_,followupEmailSelectedForForm:N}=this.props,{formDefinition:A}=this.state;return Object(L.jsxs)("div",{className:"forms-inline-editing","data-selenium":A.name+":accordions",children:[Object(L.jsx)(Ho,{"data-selenium":"form-expandable-section-content",onOpenChange:this.onFormContentOpenChange,open:this.state.formContentOpen,titleText:Object(L.jsx)(p.a,{message:Uo("formContent.label")}),children:Object(L.jsx)(wi,{DraggableComponents:m,formGuid:this.formGuid,useOnDark:t,formDefinition:A,formFields:A.getFields(),buttonText:A.getSubmitText(),isCaptchaEnabled:A.getIsCaptchaEnabled(),canChangeFieldsOrder:O&&A.canUpdateFormFieldsOrder(),gdprValue:A.getGdprConsentType(),isGdprSelectDisabled:!f,onButtonTextChange:e=>this.updateForm(A.setSubmitText(e)),onIsCaptchaEnabledChange:e=>this.updateForm(A.setIsCaptchaEnabled(e)),onRemoveFieldClick:e=>{this.props.onRemoveFormFieldEvent();this.updateForm(A.removeFormFieldById(e))},onAddFieldClick:e=>{this.props.onAddFormFieldEvent();this.updateForm(A.addFormField({property:e}))},onChangeFieldsOrder:e=>{this.props.onReorderFieldsEvent();this.updateForm(A.updateFormFieldsOrder(e))},onEditFieldClick:this.onEditField,onGdprValueChange:this.handleGdprValueChange,openFormFn:y,hasFormsWriteAccess:v,readOnly:x})}),Object(L.jsx)(Ho,{"data-selenium":"form-expandable-section-thankyou",onOpenChange:this.onThankYouOpenChange,open:this.state.thankYouOpen,titleText:Object(L.jsx)(p.a,{message:Uo("thankYou.label")}),children:this.renderResponse()}),Object(L.jsx)(Ho,{"data-selenium":"form-expandable-section-automation",onOpenChange:this.onFormAutomationOpenChange,open:this.state.formAutomationOpen,titleText:Object(L.jsxs)(Te.a,{align:"center",children:[Object(L.jsx)(p.a,{message:Uo("automation.label")}),Object(L.jsx)(Vn.a,{className:"m-left-1",use:"new",children:Object(L.jsx)(p.a,{message:Uo("automation.newBadge")})})]}),children:Object(L.jsx)(Ur,{contentId:E,followupEmailId:e.followup_email_id,formGuid:e.form_id,formName:A.name,useOnDark:t,goToWebinarValue:e.gotowebinar_webinar_key,isGoToWebinarEnabled:u,legacyFollowupEmailId:d,clearLegacyFollowupEmail:h,onGoToWebinarSelectChange:this.onWebinarChange,alwaysCreateContactForNewEmail:A.getAlwaysCreateContactForNewEmail(),onAlwaysCreateContactForNewEmailChange:e=>{j();this.updateForm(A.setAlwaysCreateContactForNewEmail(e))},shouldShowMarketingContactsToggle:g,hasMarketingContactsPermissions:b,isCreatingMarketingContacts:A.getIsCreatingMarketingContacts(),onIsCreatingMarketingContactsChange:e=>{j();C(e);this.updateForm(A.setIsCreatingMarketingContacts(e))},readOnly:x,hasAutomatedEmailEditorAccess:n,hasEmailMarketingAccess:r,hasFormsWriteAccess:v,hasInlineEmailEditorAccess:i,hasWorkflowsAccess:o,hasWorkflowsAppAccess:a,hasWorkflowsDeleteAccess:s,hasWorkflowsWriteAccess:c,isFreePortal:l,onAddWorkflowEvent:T,onEditWorkflowEvent:S,onRemoveWorkflowEvent:I,onChangeFollowupEmailEvent:w,onFollowupEmailIdChange:_,scrollToFollowupEmail:this.scrollToFollowupEmail,followupEmailSelectedForForm:N})})]})}render(){const{defaultFormNamePrefix:e,extraDropdownFooterContent:t,onFormChange:n,value:r,rawHtmlEnabled:i,hasFormsWriteAccess:o,hasMarketingContactsAccess:a}=this.props,{formDefinition:s,pagesSidePanelOpen:c,isShowingFormCreateModal:l,isCreateFormConflictError:u,isShowingFormCloneModal:d}=this.state;if(this.state.selectedFieldId)return this.renderSelectedField();const h=Object.assign({fieldKey:this.fieldKey,rawHtmlEnabled:i,debouncedLoadOptions:this.debouncedLoadOptions},this.props);return Object(L.jsxs)("div",{"data-selenium":"form-with-inline-editing",children:[this.maybeRenderPagesModal(),Object(L.jsx)(Fi,Object.assign({},h,{formDefinition:s,value:r.form_id,onChange:n,onCloneClick:this.toggleFormCloneModal,onEditorClick:this.props.openFormFn,onCreateClick:this.showFormCreateModal,onPagesClick:this.onShowPagesStateChange,onViewSubmissionsClick:this.props.openSubmissionsFn,hasFormsWriteAccess:o,dropdownFooter:Object(L.jsxs)(Te.a,{direction:"column",children:[t,Object(L.jsx)(Bi,{className:"m-top-0",use:"link",onClick:this.showFormCreateModal,hasPermission:o})]})})),!this.formGuid&&Object(L.jsx)(Bi,{onClick:this.showFormCreateModal,hasPermission:o}),a&&s&&Object(L.jsx)(fo,{enabled:s.getIsCreatingMarketingContacts()}),s&&this.renderAccordions(),c&&Object(L.jsx)(oo,{formGuid:this.formGuid,onClose:this.onShowPagesStateChange}),l&&Object(L.jsx)(po,{defaultFormNamePrefix:e,isConflictError:u,onCancelClick:this.hideFormCreateModal,onCreateClick:this.handleCreateForm,headerText:Object(L.jsx)(p.a,{message:Vo("heading")}),createText:Object(L.jsx)(p.a,{message:Vo("create")})}),d&&Object(L.jsx)(po,{defaultFormNamePrefix:e,onCancelClick:this.toggleFormCloneModal,onCreateClick:this.handleCloneForm,isCreating:this.state.isClonePending,headerText:Object(L.jsx)(p.a,{message:Vo("cloneForm.heading")}),createText:Object(L.jsx)(p.a,{message:Vo("cloneForm.clone")})})]})}}Wo.propTypes={componentsByType:o.a.object.isRequired,contentId:o.a.number,currentFieldKey:o.a.array,fieldKey:o.a.array,isGoToWebinarEnabled:o.a.bool,legacyFollowupEmailId:o.a.number,clearLegacyFollowupEmail:o.a.func,hasAutomatedEmailEditorAccess:o.a.bool,hasEmailMarketingAccess:o.a.bool,hasInlineEmailEditorAccess:o.a.bool,hasWorkflowsAccess:o.a.bool,hasWorkflowsAppAccess:o.a.bool,hasWorkflowsDeleteAccess:o.a.bool,hasWorkflowsWriteAccess:o.a.bool,isFreePortal:o.a.bool,followupEmailSelectedForForm:o.a.object,loadOptions:o.a.func.isRequired,onFieldChange:o.a.func.isRequired,onFollowupEmailIdChange:o.a.func.isRequired,onFormChange:o.a.func.isRequired,rawHtmlEnabled:o.a.bool,readOnly:o.a.bool,setFieldKey:o.a.func.isRequired,useOnDark:o.a.bool,value:o.a.object,fetchDraftForm:o.a.func.isRequired,fetchProperties:o.a.func.isRequired,fetchSubscriptions:o.a.func.isRequired,fetchDefaultConsentCopy:o.a.func.isRequired,updateFormDraft:o.a.func.isRequired,updatePreview:o.a.func.isRequired,selectedForm:o.a.object,FormDefinition:o.a.func.isRequired,DraggableComponents:o.a.object,subscriptions:o.a.array.isRequired,consentCopy:o.a.object,fetchConsentCopyFn:o.a.func,openFormFn:o.a.func,createFormFn:o.a.func,fetchParentPages:o.a.func,shouldShowPagesModal:o.a.bool.isRequired,hasFormsWriteAccess:o.a.bool,hasMarketingContactsAccess:o.a.bool,hasMarketingContactsPermissions:o.a.bool,onAddFormFieldEvent:o.a.func,onRemoveFormFieldEvent:o.a.func,onOpenEditFieldPanelEvent:o.a.func,onReorderFieldsEvent:o.a.func,onGdprChangeEvent:o.a.func,onAutomationChange:o.a.func,onIsCreatingMarketingContactsChange:o.a.func,onAddWorkflowEvent:o.a.func,onEditWorkflowEvent:o.a.func,onRemoveWorkflowEvent:o.a.func,onChangeFollowupEmailEvent:o.a.func,cloneFormFn:o.a.func,allowFormEditingDnd:o.a.bool,defaultFormNamePrefix:o.a.string,openSubmissionsFn:o.a.func,maybeRenderInlineEditingOptIn:o.a.func.isRequired,scrollToField:o.a.func,extraDropdownFooterContent:o.a.node};Wo.defaultProps={defaultOptions:[],fieldKey:[],forms:{},options:[],pages:{},readOnly:!1,value:{response_type:"inline",message:""},updatePreview:()=>{}};var zo=Wo;const $o=(e,t)=>{const n=Fe.d(e,t);return Object.assign({},t,{selectedForm:n,subscriptions:Fe.s(e),consentCopy:Fe.b(e,n),shouldShowPagesModal:Fe.r(e,t)})},Ko={fetchDraftForm:Me.j,fetchProperties:Me.h,fetchSubscriptions:Me.p,fetchDefaultConsentCopy:Me.i,saveForm:Me.t,updateFormDraft:Me.u,fetchParentPages:Me.o};var Yo=Object(a.connect)($o,Ko)(zo);const Xo=e=>"ContentComponents.cmv2.fields.form.withInlineEditing.needMoreAdvancedFeatures."+e,Jo=({onClick:e,linkMessage:t="",external:n=!1})=>Object(L.jsx)(b.a,{onClick:e,external:n,children:Object(L.jsx)(p.a,{message:Xo(t)})});var Qo=({hasPermissions:e=!1,openFormFn:t=(()=>{})})=>e?Object(L.jsx)(h.a,{message:Xo("message"),"data-test-id":"opt-out-message",options:{visitFullEditor:Object(L.jsx)(Jo,{onClick:t,linkMessage:"visitFullEditor",external:!0})}}):null;const Zo="Form",ea="FormErrorBoundary",ta=e=>{Un.a.captureException(e,{extra:{fieldName:Zo,errorBoundary:ea}})};class na extends r.Component{static getDerivedStateFromError(e){ta(e);return{hasError:!0}}constructor(e){super(e);this.state={hasError:!1}}render(){return this.props.children}}var ra=na;const ia={V2:"v2",V3:"v3",V4:"v4"},oa=e=>(e||[]).map(e=>e===ia.V2?{filters:[{operator:"NOT_HAS_PROPERTY",property:"hs_embed_version"}]}:{filters:[{operator:"EQ",property:"hs_embed_version",value:e}]}).flat(),aa=e=>Oo.a.post("crm-search/search",{data:{count:1,requestOptions:{properties:["hs_form_id","hs_name","hs_embed_version"]},objectTypeId:"0-28",filterGroups:[{filters:[{operator:"EQ",property:"hs_form_id",value:e}]}]}}),sa=(e,{count:t,embedVersions:n})=>Oo.a.post("crm-search/search",{data:Object.assign({count:t,requestOptions:{properties:["hs_form_id","hs_name","hs_embed_version"]},objectTypeId:"0-28",filterGroups:oa(n)},e?{query:e}:{},{sorts:[{property:"hs_updated_at",order:"DESC"}]})});var ca=n(713);const la=5,ua=300,da=e=>"ContentComponents.cmv2.fields.baseResource."+e,pa=e=>e.map(({properties:{hs_form_id:{value:e},hs_name:{value:t},hs_embed_version:{value:n}}})=>Object.assign({value:e,text:t},n===ia.V4&&{badge:Object(L.jsx)(Vn.a,{use:"beta",children:"Beta"})})),ha=(e="",t,{offset:n=0,embedVersions:r})=>{const i=n+la;sa(e,{count:i,embedVersions:r}).then(({hasMore:e,total:n,results:r})=>{t(null,{options:pa(r),pagination:{hasMore:e,offset:i,length:n}})}).catch(()=>t(null,{}))},ma=Object(c.debounce)(ha,ua),fa=()=>Object(L.jsx)(h.a,{message:da("placeholder"),options:{type:Object(L.jsx)(p.a,{message:da("typeLabels.form"),options:{count:1}})}});var ga=({value:e,embedVersions:t,readOnly:n,useOnDark:i,onChange:o})=>{const[a,s]=Object(r.useState)([]),c=e&&0===a.length;Object(r.useEffect)(()=>{e&&aa(e).then(({results:e})=>s(pa(e))).catch(()=>{})},[]);return Object(L.jsx)(g.a,{"data-test-id":"form:simplifiedFormSelect",value:c?void 0:e,readOnly:n,buttonUse:i?"form-on-dark":"form",options:a,placeholder:c?Object(L.jsx)(ca.a,{style:{fontSize:"0.5em",marginTop:"3px"}}):Object(L.jsx)(fa,{}),loadOptions:(e="",n,{offset:r=0}={})=>ma(e,n,{offset:r,embedVersions:t}),onChange:({target:{value:e}})=>o?o(e):null})};const ba=["formId"],Oa="https://knowledge.hubspot.com/forms/create-forms-using-the-new-forms-editor",ya=e=>"ContentComponents.cmv2.fields.form.simplifiedFormSelect.betaMessage."+e;var ja=e=>{let{formId:t}=e,n=Object(Be.a)(e,ba);return Object(L.jsx)("div",Object.assign({},n,{children:Object(L.jsx)(Ce.a,{message:ya("message_jsx"),elements:{UIHelpIcon:Er.a,UILink:b.a},options:{formEditorHref:j.b.formsEditor2({formId:t}),learnMoreLink:Object(L.jsx)(Ce.a,{message:ya("learnMoreLink_jsx"),elements:{UILink:b.a},options:{href:Oa}})}})}))};const va={FORM_CREATE_NEW:"form-create-new",FORM_EDIT:"form-edit",FORM_SELECT:"select-form"},Ca={FORM_CREATE_NEW:"form-inline-create-new",FORM_CLONE:"form-inline-clone",FORM_SELECT:"forms-inline-select-form",FORM_FIELD_ADD:"form-inline-field-add",FORM_FIELD_EDIT:"form-inline-field-edit",FORM_FIELD_REMOVE:"form-inline-field-remove",FORM_FIELD_REORDER:"form-inline-field-reorder",GO_TO_FULL_EDITOR:"form-inline-gotofulleditor",FORM_GDPR_CHANGE:"form-inline-gdprchange",FORM_AUTOMATION_CHANGE:"form-inline-automation-change",FORM_CREATE_MARKETING_CONTACT_CHANGE:"form-inline-create-marketing-contact-change",VIEW_FORM_SUBMISSIONS:"form-inline-viewformsubmissions",FORM_WORKFLOW_ADD:"form-inline-workflow-add",FORM_WORKFLOW_EDIT:"form-inline-workflow-edit",FORM_WORKFLOW_REMOVE:"form-inline-workflow-remove"},xa={CONTACT:"0-1",COMPANY:"0-2",TICKET:"0-5"},Ea=Object(Mn.a)(pe.FORM)(W.a),Ta=e=>"ContentComponents.cmv2.fields.form."+e,Sa=e=>{let t=!1;if(e){const n=e.metaData,r=Object(c.findWhere)(n,{name:"renderRawHtml"});t=!!r&&!!r.value}else t=!1;return t};function Ia(e,t){const n="object"==typeof t.value?t.value.form_id:t.value,r=Fe.e(e,{formGuid:n});return{pages:ce.f(e),goToWebinarEnabled:k(e),forms:Fe.j(e),options:Fe.k(e),defaultOptions:Fe.c(e),selectedForm:r,isOptedInToInlineEditing:!(!t.isOptedInToInlineEditing&&!Fe.m(e)),canActionInlineEditOptIn:Fe.a(e),optedInInlineEditingRequestSucceeded:Fe.l(e)}}const wa={fetchWebinarSettings:I,fetchForm:Me.l,fetchFilteredForms:Me.k,createResource:Me.d,clearCache:Me.b,saveCache:Me.s,fetchInlineEdtingOptIn:Me.n,cloneForm:Me.c};class _a extends r.PureComponent{constructor(e){super(e);this.onClickAddButton=this.onClickAddButton.bind(this);this.onFormChange=this.onFormChange.bind(this);this.updatePostSubmissionOptions=this.updatePostSubmissionOptions.bind(this);this.onFollowupEmailIdChange=this.onFollowupEmailIdChange.bind(this);this.onWebinarChange=this.onWebinarChange.bind(this);this.loadOptions=this.loadOptions.bind(this);this.onEditForm=this.onEditForm.bind(this);this.onCreateForm=this.onCreateForm.bind(this);this.openForm=this.openForm.bind(this);this.openFormFn=this.openFormFn.bind(this);this.openSubmissions=this.openSubmissions.bind(this);this.openSubmissionsFn=this.openSubmissionsFn.bind(this);this.maybeRenderMarketingContactsWarning=this.maybeRenderMarketingContactsWarning.bind(this);this.maybeRenderInlineEditingOptIn=this.maybeRenderInlineEditingOptIn.bind(this);this.debouncedLoadOptions=Object(c.debounce)(this.loadOptions,me.c);this._isMounted=!1;this.state={input:"",rawHtmlEnabled:!1}}componentDidMount(){this._isMounted=!0;this.formGuid&&this.loadForm(this.formGuid);null==this.props.goToWebinarEnabled&&this.props.fetchWebinarSettings();this.props.fetchInlineEdtingOptIn()}componentDidUpdate(e){const{forms:t,value:n}=this.props,{value:r}=e,i=this.getFormGuid(r),o=this.getFormGuid(n);Object(c.isEqual)(o,i)||t[o]||this.loadForm(o)}componentWillUnmount(){this._isMounted=!1}get value(){const{value:e}=this.props;if(!e)return{};const t=this.getFormGuid(e),{response_type:n=me.j.INLINE,message:r,redirect_id:i,redirect_url:o,gotowebinar_webinar_key:a,form_type:s,followup_email_id:c}="object"==typeof e?e:{};return{form_id:t,response_type:n,message:r,redirect_id:i,redirect_url:o,gotowebinar_webinar_key:a,form_type:s,followup_email_id:c}}get formGuid(){const{value:e}=this.props;return e?this.getFormGuid(e):null}get fieldKey(){const{fieldKey:e}=this.props;return e&&e.join(".")}get scopes(){if(!this._scopes){const{user:{scopes:e=[]}}=Object(Ut.userInfoSync)();this._scopes=e}return this._scopes}get hasWorkflowsAccess(){return this.scopes.includes("workflows-access")}get hasWorkflowsAppAccess(){return this.scopes.includes("workflows-app-access")}get hasWorkflowsWriteAccess(){return this.scopes.includes("workflows-edit-team-owned")}get hasWorkflowsDeleteAccess(){return this.scopes.includes("workflows-delete-team-owned")}get hasAutomatedEmailEditorAccess(){return this.scopes.includes("email-type-workflows-access")}get hasEmailMarketingAccess(){return this.scopes.includes("email-marketing-product-access")}get hasInlineEmailEditorAccess(){const{isMarketingEmailApprovalsEnabled:e}=this.props;return!e&&this.scopes.includes("workflows-contextual-create-inline-email-access")}get hasFormsWriteAccess(){return this.scopes.includes("forms-write")}get hasMarketingContactsPermissions(){return this.scopes.includes("marketable-contacts-write")}get hasMarketingContactsAccess(){return this.scopes.includes("marketable-contacts-access")}get isFreePortal(){return!this.scopes.includes("workflows-contextual-marketing-starter")&&!this.hasWorkflowsAppAccess}get isSuperAdmin(){return this.scopes.includes("super-admin")}getFormGuid(e){return"object"==typeof e?e.form_id:e}getTrackEventFunction(e){return t=>this.trackEvent(e,t)}trackEvent(e,t){const{trackFormAction:n}=this.props;n&&n(e,t)}hasNewFormExperienceDependencies(){const{FormDefinition:e}=this.props;return e}canShowNewFormExperienceOptInOut(){const{optedInInlineEditingRequestSucceeded:e,canActionInlineEditOptIn:t,allowFormEditing:n}=this.props;return n&&this.hasNewFormExperienceDependencies()&&e&&t}canShowNewFormExperience(){const{allowFormEditing:e,disable_inline_form_editing:t=!1,isOptedInToInlineEditing:n}=this.props;return n&&this.hasNewFormExperienceDependencies()&&e&&!t}loadForm(e){this.props.fetchForm(e).then(e=>{const{value:t}=this.props;this._isMounted&&this.setState({rawHtmlEnabled:Sa(e)});"object"==typeof t&&t&&!t.form_type&&this.props.onFieldChange(Object.assign({},t,{form_type:e.formType}))}).catch(e=>{setTimeout(()=>{throw e})})}loadOptions(e="",t,n={offset:0}){const{required_property_types:r=[]}=this.props;let i=n.offset;if(e!==this.state.input){this._isMounted&&this.setState({input:e});this.props.clearCache();i=0}const o=this.props.forVideo?[Ln.a,Ln.c,Ln.d]:[Ln.a,Ln.c],a={name:e,limit:me.f,offset:i,formTypes:o};r.length&&(a.objectTypeId=r.map(e=>xa[e]));this.props.fetchFilteredForms(a).then(e=>{const{total:n}=e;t(null,{options:this.props.options,pagination:{hasMore:n>this.props.options.length,offset:i+me.f,length:n}})}).catch(e=>{setTimeout(()=>{throw e})})}updatePostSubmissionOptions(e,t){const{onFieldChange:n,pages:r,value:i}=this.props;let o;if(e){this._isMounted&&this.setState({rawHtmlEnabled:Sa(e)});if(e.inlineMessage)o={form_id:e.guid,response_type:me.j.INLINE,message:e.inlineMessage,gotowebinar_webinar_key:null,form_type:e.formType};else if(e.redirect){const t=r[Object(c.findKey)(r,t=>t.absoluteUrl===e.redirect)];o={form_id:e.guid,response_type:me.j.REDIRECT,redirect_url:t?null:e.redirect,redirect_id:t?t.id:null,gotowebinar_webinar_key:null,form_type:e.formType}}else o={form_id:e.guid,response_type:me.j.INLINE,message:Object(s.a)(Ta("default.message")),gotowebinar_webinar_key:null,form_type:e.formType}}else o="object"==typeof i?Object.assign({},this.value,{form_id:t,gotowebinar_webinar_key:null}):t;n(o)}onFormChange(e){this.props.fetchForm(e).then(t=>{this.updatePostSubmissionOptions(t,e)}).catch(e=>{setTimeout(()=>{throw e})})}onWebinarChange(e){this.props.onFieldChange(Object.assign({},this.value,{gotowebinar_webinar_key:e}))}onFollowupEmailIdChange(e){this.props.onFieldChange(Object.assign({},this.value,{followup_email_id:e}))}openForm(e,t={},n,r){const i=this.props.redirectUrl||window.location.href;this.props.forVideo&&(t.isExternalEditor="video");const o=j.b.forms(e,i,t,n,r);window.location.assign(o)}openSubmissions(e){const t=this.props.redirectUrl||window.location.href,n=j.b.formSubmissions(e,t);window.location.assign(n)}onEditForm(){this.trackEvent(va.FORM_EDIT);this.openForm(this.formGuid)}onClickAddButton(){this.trackEvent(va.FORM_CREATE_NEW)}openFormFn(e,t){this.trackEvent(Ca.GO_TO_FULL_EDITOR);this.openForm(this.formGuid,{isDraftUpdate:!0},e,t)}openSubmissionsFn(){this.trackEvent(Ca.VIEW_FORM_SUBMISSIONS);this.openSubmissions(this.formGuid)}onCreateForm(e,{onConflictError:t=(()=>{}),onSuccess:n=(()=>{}),shouldRedirect:r=!0}={}){this.props.createResource(e).then(e=>{if(e&&e.status===Fn.a){t();return}const i=e&&e.guid;if(i){this.props.saveCache(i);this.onFormChange(i);n();if(r){const e=(...e)=>this.openForm(i,...e);this.props.onRedirect?this.props.onRedirect(e):e()}}}).catch(e=>{setTimeout(()=>{throw e})})}maybeRenderInlineEditingOptIn(e,t){return this.canShowNewFormExperienceOptInOut()?Object(L.jsx)("div",{className:"p-bottom-2",children:Object(L.jsx)(Qo,{hasPermissions:this.hasFormsWriteAccess,openFormFn:()=>this.openFormFn(e,t)})}):null}maybeRenderMarketingContactsWarning(){const{selectedForm:e}=this.props,t=!e;if(!this.hasMarketingContactsAccess||t)return null;const{createMarketableContact:n}=e;return Object(L.jsx)("div",{className:"m-bottom-2 m-top-2",children:Object(L.jsx)(fo,{enabled:n,useEditor:!0,openFormFn:()=>{this.trackEvent(Ca.GO_TO_FULL_EDITOR);this.openForm(this.formGuid)}})})}renderResponse(){const{componentsByType:e,fieldKey:t,forVideo:n,modulePath:r,onFieldChange:i,readOnly:o,useOnDark:a}=this.props;return n?null:Object(L.jsx)(ve,{componentsByType:e,fieldKey:t,hasFormsWriteAccess:!0,modulePath:r,onFieldChange:i,readOnly:o,useOnDark:a,value:this.value})}renderGoToWebinarSelect(){return!this.props.goToWebinarEnabled||this.props.forVideo?null:Object(L.jsx)("div",{className:"p-top-4",children:Object(L.jsx)(G,{formGuid:this.value.form_id,onWebinarChange:this.onWebinarChange,useOnDark:this.props.useOnDark,webinarKey:this.value.gotowebinar_webinar_key})})}renderWorkflowSelect(){if(!(this.formGuid&&this.hasWorkflowsAccess&&this.hasFormsWriteAccess)||this.props.forVideo)return null;const{contentId:e,readOnly:t,useOnDark:n}=this.props;return Object(L.jsx)(yt,{contentId:e,formGuid:this.formGuid,hasFormsWriteAccess:this.hasFormsWriteAccess,hasWorkflowsAccess:this.hasWorkflowsAccess,hasWorkflowsAppAccess:this.hasWorkflowsAppAccess,hasWorkflowsDeleteAccess:this.hasWorkflowsDeleteAccess,hasWorkflowsWriteAccess:this.hasWorkflowsWriteAccess,isFreePortal:this.isFreePortal,onAddWorkflowEvent:this.getTrackEventFunction(Ca.FORM_WORKFLOW_ADD),onEditWorkflowEvent:this.getTrackEventFunction(Ca.FORM_WORKFLOW_EDIT),onRemoveWorkflowEvent:this.getTrackEventFunction(Ca.FORM_WORKFLOW_REMOVE),readOnly:t,useOnDark:n})}renderFollowupEmail(){const{clearLegacyFollowupEmail:e,contentId:t,followupEmailSelectedForForm:n,forVideo:r,legacyFollowupEmailId:i,readOnly:o}=this.props;if(!(this.hasEmailMarketingAccess&&this.formGuid&&t)||r)return null;const{followup_email_id:a}=this.value;return Object(L.jsx)(Rn,{clearLegacyFollowupEmail:e,contentId:t,followupEmailId:a,followupEmailSelectedForForm:n,formGuid:this.formGuid,hasAutomatedEmailEditorAccess:this.hasAutomatedEmailEditorAccess,hasInlineEmailEditorAccess:this.hasInlineEmailEditorAccess,hasWorkflowsAppAccess:this.hasWorkflowsAppAccess,legacyFollowupEmailId:i,onChangeFollowupEmailEvent:e=>this.trackEvent(e),onFollowupEmailIdChange:this.onFollowupEmailIdChange,readOnly:o})}renderWithInlineFormEditing(){return Object(L.jsx)(r.Fragment,{children:Object(r.createElement)(Yo,Object.assign({},this.props,{key:this.formGuid,DraggableComponents:this.props.DraggableComponents,FormDefinition:this.props.FormDefinition,loadOptions:this.loadOptions,rawHtmlEnabled:this.rawHtmlEnabled,value:this.value,hasAutomatedEmailEditorAccess:this.hasAutomatedEmailEditorAccess,hasEmailMarketingAccess:this.hasEmailMarketingAccess,hasFormsWriteAccess:this.hasFormsWriteAccess,hasInlineEmailEditorAccess:this.hasInlineEmailEditorAccess,hasMarketingContactsAccess:this.hasMarketingContactsAccess,hasMarketingContactsPermissions:this.hasMarketingContactsPermissions,hasWorkflowsAccess:this.hasWorkflowsAccess,hasWorkflowsAppAccess:this.hasWorkflowsAppAccess,hasWorkflowsDeleteAccess:this.hasWorkflowsDeleteAccess,hasWorkflowsWriteAccess:this.hasWorkflowsWriteAccess,isFreePortal:this.isFreePortal,isGoToWebinarEnabled:this.props.goToWebinarEnabled,allowFormEditingDnd:this.props.allowFormEditingDnd,maybeRenderInlineEditingOptIn:this.maybeRenderInlineEditingOptIn,fetchConsentCopyFn:this.props.fetchConsentCopyFn,cloneFormFn:(...e)=>{this.trackEvent(Ca.FORM_CLONE);return this.props.cloneForm(...e)},createFormFn:(...e)=>{this.trackEvent(Ca.FORM_CREATE_NEW);return this.onCreateForm(...e)},openFormFn:this.openFormFn,openSubmissionsFn:this.openSubmissionsFn,onFormChange:({target:{value:e}})=>{this.trackEvent(Ca.FORM_SELECT,{formId:e});this.onFormChange(e)},onOpenEditFieldPanelEvent:this.getTrackEventFunction(Ca.FORM_FIELD_EDIT),onAddFormFieldEvent:this.getTrackEventFunction(Ca.FORM_FIELD_ADD),onRemoveFormFieldEvent:this.getTrackEventFunction(Ca.FORM_FIELD_REMOVE),onReorderFieldsEvent:this.getTrackEventFunction(Ca.FORM_FIELD_REORDER),onGdprChangeEvent:this.getTrackEventFunction(Ca.FORM_GDPR_CHANGE),onAutomationChange:this.getTrackEventFunction(Ca.FORM_AUTOMATION_CHANGE),onIsCreatingMarketingContactsChange:this.getTrackEventFunction(Ca.FORM_CREATE_MARKETING_CONTACT_CHANGE),onAddWorkflowEvent:this.getTrackEventFunction(Ca.FORM_WORKFLOW_ADD),onEditWorkflowEvent:this.getTrackEventFunction(Ca.FORM_WORKFLOW_EDIT),onRemoveWorkflowEvent:this.getTrackEventFunction(Ca.FORM_WORKFLOW_REMOVE),onChangeFollowupEmailEvent:e=>this.trackEvent(e),onFollowupEmailIdChange:this.onFollowupEmailIdChange,followupEmailSelectedForForm:this.props.followupEmailSelectedForForm,extraDropdownFooterContent:this.renderFormFilteringAlert()}))})}renderFormFilteringAlert(){const{required_property_types:e=[]}=this.props;if(e.length){const t=Object(L.jsx)(d.a,{children:e.map(e=>Object(L.jsx)(p.a,{message:Ta("requiredPropertyTypes."+e)},e))});return Object(L.jsx)(u.a,{children:Object(L.jsx)(h.a,{message:Ta("requiredPropertyTypes.infoText"),options:{requiredProperties:t}})})}return null}renderNewFormModuleAlert(){return Object(L.jsx)(l.a,{titleText:Object(L.jsx)(p.a,{message:Ta("newFormModuleAlert.title")}),type:"tip",children:Object(L.jsx)(p.a,{message:Ta("newFormModuleAlert.message")})})}render(){const{componentsByType:e,value:t,readOnly:n,useOnDark:r,required:i,embed_versions:o}=this.props,a=j.b.isUngated("Forms:NewEditorAccess");if(o&&1===o.length&&o[0]===ia.V4)return Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)(ga,{value:this.value.form_id,embedVersions:o,readOnly:n,useOnDark:r,onChange:e=>{this.trackEvent(Ca.FORM_SELECT,{formId:e});this.props.onFieldChange(Object.assign({},this.value,{form_id:e}))}}),this.value.form_id&&o.includes(ia.V4)&&Object(L.jsx)(ja,{className:"m-top-2",formId:this.value.form_id})]});if(this.canShowNewFormExperience())return Object(L.jsx)(Gt.Provider,{value:{RichTextComponent:e[pe.RICH_TEXT]},children:Object(L.jsxs)(ra,{children:[a&&this.renderNewFormModuleAlert(),this.renderWithInlineFormEditing()]})});const s=Object(L.jsx)(m.a,{description:!this.state.rawHtmlEnabled&&!this.props.forVideo&&Object(L.jsx)(p.a,{message:Ta("rawHTMLWarning.description")}),children:Object(L.jsx)(L.Fragment,{children:Object(L.jsx)(Ea,Object.assign({"data-selenium":this.fieldKey+":formSelect",disabled:n},this.props,{onChange:({target:{value:e}})=>{this.trackEvent(va.FORM_SELECT);this.onFormChange(e)},clearable:!i,extraDropdownFooterContent:this.renderFormFilteringAlert(),onClickAddButton:this.onClickAddButton,value:this.value.form_id,loadOptions:this.debouncedLoadOptions,onEditResource:this.onEditForm,onCreateResource:this.onCreateForm}))})});return t&&"string"!=typeof t?Object(L.jsxs)("div",{children:[this.maybeRenderInlineEditingOptIn(),s,this.maybeRenderMarketingContactsWarning(),this.renderResponse(),this.renderGoToWebinarSelect(),this.renderFollowupEmail(),this.renderWorkflowSelect()]}):s}}_a.propTypes={allowFormEditing:o.a.bool,allowFormEditingDnd:o.a.bool,clearCache:o.a.func.isRequired,clearLegacyFollowupEmail:o.a.func,componentsByType:o.a.object.isRequired,contentId:o.a.number,createResource:o.a.func.isRequired,currentFieldKey:o.a.array,defaultOptions:o.a.array,disable_inline_form_editing:o.a.bool,fetchForm:o.a.func.isRequired,fetchWebinarSettings:o.a.func.isRequired,fieldKey:o.a.array,followupEmailSelectedForForm:o.a.object,forms:o.a.object,formsOptions:o.a.arrayOf(o.a.object),goToWebinarEnabled:o.a.bool,isMarketingEmailApprovalsEnabled:o.a.bool,legacyFollowupEmailId:o.a.number,modulePath:o.a.string,onFieldChange:o.a.func.isRequired,onRedirect:o.a.func,options:o.a.array.isRequired,pages:o.a.object,readOnly:o.a.bool,redirectUrl:o.a.string,required:o.a.bool.isRequired,saveCache:o.a.func.isRequired,setFieldKey:o.a.func.isRequired,trackFormAction:o.a.func,useOnDark:o.a.bool,selectedForm:o.a.object,FormDefinition:o.a.func,DraggableComponents:o.a.object,fetchConsentCopyFn:o.a.func,value:o.a.oneOfType([o.a.object,o.a.string]),isOptedInToInlineEditing:o.a.bool.isRequired,fetchInlineEdtingOptIn:o.a.func.isRequired,openFormFn:o.a.func,optedInInlineEditingRequestSucceeded:o.a.bool.isRequired,canActionInlineEditOptIn:o.a.bool.isRequired,cloneForm:o.a.func,defaultFormNamePrefix:o.a.string,forVideo:o.a.bool,fetchFilteredForms:o.a.func.isRequired,required_property_types:o.a.arrayOf(o.a.string),embed_versions:o.a.arrayOf(o.a.oneOf(["v2","v3","v4"]))};_a.defaultProps={defaultOptions:[],fieldKey:[],forms:{},options:[],pages:{},readOnly:!1,allowFormEditing:!1,value:{response_type:"inline",message:""}};t.a=Object(he.compose)(Object(a.connect)(Ia,wa))(_a)},function(e,t,n){"use strict";var r=n(40),i=n.n(r),o=n(73),a=n(59),s=n(41),c=n.n(s),l=n(9),u=n.n(l);const d="SET_AUTH",p="MENU_TREE_LOAD",h="MENU_TREE_MOVE_NODE",m="MENU_TREE_ADD_NODE",f="MENU_TREE_ADD_CHILD",g="MENU_TREE_ADD_NODE_TO_BOTTOM",b="MENU_TREE_CLONE_NODE",O="MENU_TREE_DELETE_NODE",y="MENU_TREE_DELETE_TREE",j="MENU_NODE_UPDATE",v="MENU_NODE_UPDATE_PAGE_LINK_ID",C="MENU_NODE_REPLACE",x="PAGES_FETCH",E="PAGES_SAVE_CACHED_PAGE",T="PAGES_CACHE_CLEAR",S="PAGES_FETCH_BY_ID",I="SET_IS_DRAGGING";function w(e){return{type:d,payload:e}}var _=n(58),N=n(60);function A(e={},t){return t.get("content/api/v4/contents/linkable-content",{query:e})}var D=n(65);const k=(e,t)=>e.pages.pages[t.pageLinkId],P=e=>e.pages.cache.pages,R=e=>e.pages.cache.order,F=e=>e.pages.pages,L=e=>e.pages.pagesRequestStatus,M=(e,t)=>e.pages.cache.pages[t.pageLinkId],B=Object(D.a)([P,R],(e,t)=>t.map(t=>{const n=e[t];return{text:n.name,value:n.id,help:n.absoluteUrl}}));var U=n(30),V=n.n(U);function H(e){const{request:t,receive:n,error:r}=H;return(i,o,{httpClient:a=V.a}={})=>{i(t());return A(e,a).then(e=>{i(n(e));return e}).catch(e=>{i(r(e));return e})}}H.request=()=>({type:x});H.receive=e=>({type:x,result:e});H.error=e=>({type:x,error:e});function q(e){const t={id:e},{request:n,receive:r,error:i}=q;return(e,o,{httpClient:a=V.a}={})=>{e(n());return A(t,a).then(t=>{e(r(t));return t}).catch(t=>{e(i(t));return t})}}q.request=()=>({type:S});q.receive=e=>({type:S,result:e});q.error=e=>({type:S,error:e});function G(){return{type:T}}function W(e){return(t,n)=>{const r=M(n(),{pageLinkId:e});t({type:E,page:r})}}var z=e=>({dispatch:t,getState:n})=>r=>i=>{const o=r(i);switch(o.type){case p:{const{nodesById:r}=o,i=Object.values(r||{}).filter(e=>e.pageLinkId||e.contentGroupId).map(e=>e.pageLinkId||e.contentGroupId).join(",");i&&q(i)(t,n,{httpClient:e});break}}return o},$=n(26),K=n.n($);function Y(e=K()({}),t){const{type:n,payload:r}=t;switch(n){case d:return r;default:return e}}var X=n(61),J=Object.freeze(Object(X.a)({TOP:null,BOTTOM:null,MIDDLE:null})),Q=n(2773);function Z(e,t){for(const n of t){if(n.id===e)return n;if(n.children&&n.children.length){const t=Z(e,n.children);if(t)return t}}return null}function ee(e,t){for(const n of t){if(n.id===e){t.splice(t.indexOf(n),1);return}n.children&&n.children.length&&ee(e,n.children)}}function te(e){const t=e.children?e.children.map(te):[];return Object(o.flatten)(t.concat(e.id))}function ne(e,t){for(const n of t){if(n.id===e)return n;if(n.children&&n.children.length){const t=ne(e,n.children);if(t&&t.id)return n}}return{}}const re=(e,t={},n={})=>{const r=e.reduce((e,n)=>{const r=t[n.pageLinkId];r&&!Q.a.PUBLISHED.includes(r.state)&&(e[r.id]=r);if(n.children&&n.children.length>0){re(n.children,t,e).forEach(t=>{e[t.id]=t})}return e},n);return Object.values(r)};function ie(e=K()({}),t){switch(t.type){case p:{const{tree:n,menuId:r}=t;return e.set(r,K()(n))}case h:{const{nodeId:n,targetId:r,targetParentId:i,position:a,menuId:s}=t;if(!n||n===r||!s)return e;const c=e[s].asMutable({deep:!0}),l=Z(n,c);let u=i?Z(i,c).children:c;ee(n,c);let d=Object(o.findIndex)(u,e=>e.id===r);if(-1===d){u=ne(r,c).children;u&&(d=Object(o.findIndex)(u,e=>e.id===r))}a===J.TOP?u.splice(d,0,l):a===J.BOTTOM?u.splice(d+1,0,l):a===J.MIDDLE&&u[d].children.unshift(l);return e.set(s,K()(c))}case f:{const{parentId:n,nodeId:r,treeNode:i,menuId:o}=t;if(!(n&&r&&i&&o))return e;const a=e[o].asMutable({deep:!0});Z(n,a).children.unshift(i);return e.set(o,K()(a))}case m:case b:{const{parentId:n,siblingId:r,treeNode:i,position:a,menuId:s}=t;if(!s)return e;const c=e[s].asMutable({deep:!0});if(!(n&&r||c.length))return e.set(s,K()([i]));const l=n?Z(n,c).children:c,u=Object(o.findIndex)(l,e=>e.id===r);a===J.TOP?l.splice(u,0,i):l.splice(u+1,0,i);return e.set(s,K()(c))}case g:{const{treeNode:n,menuId:r}=t;if(!r)return e;const i=e[r].asMutable({deep:!0});return e.set(r,K()([...i,n]))}case O:{const{id:n,menuId:r}=t;if(!n||!r)return e;const i=e[r].asMutable({deep:!0});ee(n,i);return e.set(r,K()(i))}case y:{const{menuId:n}=t;return n?e.without(n):e}default:return e}}var oe=Object.freeze(Object(X.a)({NO_LINK:null,PAGE_LINK:null,PAGE_LINK_WITH_PARAMS:null,URL_LINK:null})),ae=n(219);class se{constructor(e){this.isPublished=se.getIsPublished(e);this.pageLinkId=e.pageLinkId||null;this.contentGroupId=e.contentGroupId||null;this.pageLinkName=e.pageLinkName||null;this.isDeleted=se.getIsDeleted(e)||null;this.categoryId=e.categoryId||null;this.subCategory=e.subCategory||null;this.contentType=e.contentType||null;this.state=e.state||null;this.linkLabel=e.linkLabel||"";this.linkUrl=e.linkUrl||null;this.linkParams=e.linkParams||null;this.linkTarget=e.linkTarget||null;this.type=se.getType(e);return K()(this,{prototype:Object.getPrototypeOf(this)})}static getIsPublished(e){return Object(o.isBoolean)(e.isPublished)?e.isPublished:Object(o.isBoolean)(e.is_published)?e.is_published:Object(o.isBoolean)(e.published)?e.published:e.categoryId===ae.b.blog.categoryId&&!e.state||!!~Q.a.PUBLISHED.indexOf(e.state)}static getIsDeleted(e){return!!e.deletedAt||!(!e.isDeleted&&!e.is_deleted)}static getType(e){return e.type?e.type:e.pageLinkId||e.contentGroupId?e.linkParams?oe.PAGE_LINK_WITH_PARAMS:oe.PAGE_LINK:e.linkUrl?oe.URL_LINK:oe.NO_LINK}}function ce(e=K()({}),t){switch(t.type){case p:{const{nodesById:n}=t;return n?e.merge(K()(n)):e}case f:case g:case m:{const{nodeId:n,menuNode:r}=t;return n&&r?e.set(n,r):e}case b:{const{nodesById:n}=t;return n?e.merge(n):e}case j:{const{updates:n,id:r}=t;if(!n||!r)return e;const i=e[r];return i?e.set(r,i.merge(n)):e}case v:{const{page:n,id:r}=t;if(!n||!r)return e;const i=e[r];if(!i)return e;let o={pageLinkId:n.id,contentGroupId:null,pageLinkName:n.name,state:n.state||null,categoryId:n.categoryId,isPublished:se.getIsPublished(n),contentType:n.contentType,isDeleted:se.getIsDeleted(n),subCategory:n.subCategory};n.categoryId!==ae.b.blog.categoryId||n.subCategory||(o=Object.assign({},o,{contentGroupId:n.id,pageLinkId:null,subCategory:null}));return e.set(r,i.merge(o))}case C:{const{id:n,nodeType:r}=t,i=e[n];if(!i)return e;const o=new se({linkLabel:i.linkLabel,type:r});switch(r){case oe.NO_LINK:case oe.URL_LINK:return e.set(n,o);case oe.PAGE_LINK:return i.type===oe.PAGE_LINK_WITH_PARAMS?e.set(n,i.merge({type:r,linkParams:null})):e.set(n,o);case oe.PAGE_LINK_WITH_PARAMS:return i.type===oe.PAGE_LINK?e.set(n,i.merge({type:r})):e.set(n,o);default:return e}}case O:{const{id:n,childIds:r}=t;if(!n)return e;const i=[n,...r];return e.without(i)}case y:{const{nodeIds:n}=t;return n?e.without(n):e}default:return e}}const le=250,ue=24,de=1.25,pe=Object.freeze({UNINITIALIZED:"UNINITIALIZED",PENDING:"PENDING",SUCCEEDED:"SUCCEEDED",FAILED:"FAILED"}),he=K()({}),me=K()({pages:{},order:[]});function fe(e=me,t){switch(t.type){case x:{const{result:n}=t;return n?n.results.reduce((e,t)=>e.setIn(["pages",t.id],t).set("order",e.order.concat(t.id)),e):e}case T:return me;default:return e}}function ge(e=he,t){switch(t.type){case S:{const{result:n}=t;return n?n.results.reduce((e,t)=>e.set(t.id,t),e):e}case E:{const{page:n}=t;return n?e.set(n.id,n):e}default:return e}}function be(e=pe.UNINITIALIZED,t){switch(t.type){case x:case S:{const{result:e,error:n}=t;return e?n?pe.FAILED:pe.SUCCEEDED:pe.PENDING}default:return e}}var Oe=Object(_.combineReducers)({pages:ge,pagesRequestStatus:be,cache:fe});function ye(e=!1,t){switch(t.type){case I:return t.isDragging;default:return e}}var je=Object(_.combineReducers)({isDragging:ye}),ve=Object(_.combineReducers)({application:je,auth:Y,tree:ie,nodesById:ce,pages:Oe});const Ce=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||_.compose;function xe(e,t){const n=[N.a,z(t)];return Ce(Object(_.applyMiddleware)(N.a.withExtraArgument({httpClient:t})),Object(_.applyMiddleware)(...n))(_.createStore)(ve,e)}var Ee=n(615),Te=n(661),Se=Object(Ee.DragDropContext)(Te.a),Ie=n(45);function we({withDragDropContext:e=!1,httpClient:t}){const n=xe({},t);u.a.isQa()&&(window.SimpleMenusStore=n);class i extends r.Component{componentDidMount(){const{auth:e}=this.props;n.dispatch(w(e))}render(){const{children:e}=this.props;return Object(Ie.jsx)(a.Provider,{store:n,children:e})}}i.propTypes={auth:c.a.object.isRequired,children:c.a.node.isRequired};return e?Se(i):i}var _e=n(55),Ne=n(288),Ae=n.n(Ne),De=n(464),ke=n(2719),Pe=n(466),Re=n(99),Fe=n(508),Le=n(710),Me=n(2679);const Be=e=>e.nodesById,Ue=(e,t)=>e.nodesById[t.id];function Ve(e,t){return{type:j,updates:t,id:e}}function He(e,t){return(n,r)=>{const i=r(),o=M(i,{pageLinkId:t});n({type:v,id:e,page:o})}}function qe(e,t){return{type:C,id:e,nodeType:t}}function Ge(){return function(e,t){return{menuNode:Ue(e,t)}}}const We={updateNode:Ve},ze=e=>{class t extends r.PureComponent{constructor(e){super(e);this.updateLabel=Object(o.debounce)(this.updateLabel.bind(this),le);this.onLabelChange=this.onLabelChange.bind(this)}updateLabel(e){this.props.updateNode(this.props.id,{linkLabel:e})}onLabelChange({target:{value:e}}){this.updateLabel(e)}render(){const{id:t,menuNode:n,hasChildren:r,toggleCollapse:i,isCollapsed:o,readOnly:a}=this.props;return Object(Ie.jsx)(e,{id:t,label:n.linkLabel,onLabelChange:this.onLabelChange,hasChildren:r,toggleCollapse:i,isCollapsed:o,readOnly:a})}}t.propTypes={id:c.a.oneOfType([c.a.string,c.a.number]).isRequired,menuNode:c.a.instanceOf(se).isRequired,hasChildren:c.a.bool.isRequired,toggleCollapse:c.a.func.isRequired,isCollapsed:c.a.bool.isRequired,updateNode:c.a.func.isRequired,readOnly:c.a.bool};t.defaultProps={menuNode:new se({})};return Object(a.connect)(Ge,We)(t)};function $e(){return ze}class Ke extends r.PureComponent{renderCollapseButton(){return this.props.hasChildren?Object(Ie.jsx)(Le.a,{use:"transparent",onClick:this.props.toggleCollapse,size:"small",children:Object(Ie.jsx)(Me.a,{name:this.props.isCollapsed?"right":"down"})}):null}render(){return Object(Ie.jsxs)("div",{className:"simple-menus-menu-item-label",draggable:!0,onDragStart:e=>{e.preventDefault();e.stopPropagation()},children:[this.renderCollapseButton(),Object(Ie.jsx)(Fe.a,{className:"label-input","data-test-id":"menu-label",defaultValue:this.props.label,onChange:this.props.onLabelChange,placeholder:Object(Re.a)("simpleMenusLib.components.menuItemLabel.placeholder"),disabled:this.props.readOnly})]})}}Ke.propTypes={toggleCollapse:c.a.func.isRequired,hasChildren:c.a.bool.isRequired,isCollapsed:c.a.bool.isRequired,readOnly:c.a.bool,label:c.a.string.isRequired,onLabelChange:c.a.func.isRequired};Ke.defaultProps={label:""};var Ye=$e()(Ke),Xe=n(279),Je=n(1148),Qe=n.n(Je);const Ze=(e,t)=>e.tree[t.menuId]||[],et=(e,t)=>Z(t.id,e.tree[t.menuId]),tt=()=>Object(D.a)([Ze,Be],(e,t)=>{const n=e=>{const r=t[e.id],i=e.children.map(n);return Object.assign({},r,{children:i})};return e.map(n)}),nt=(e,t=1)=>e.children.length?Math.max(...e.children.map(e=>nt(e,t+1))):t,rt=()=>Object(D.a)([Ze],e=>e.length?Math.max(...e.map(e=>nt(e))):0),it=()=>{const e=tt();return Object(D.a)([e,F],(e,t)=>e?re(e,t):[])};class ot{constructor(e){if(!e.id)throw new TypeError("Tree nodes require an id props");this.id=e.id;this.children=e.children||[]}}function at(){return Object(o.uniqueId)("menu_node_")}function st(e=[],t){const n={},r=e=>{const t=at(),i=e.children?e.children.map(r):[];n[t]=new se(e);return new ot({id:t,children:i})},i=e.map(r);return{type:p,tree:i,menuId:t,nodesById:n}}function ct(e,t,n,r,i){return{type:h,nodeId:e,targetId:t,targetParentId:n,position:r,menuId:i}}function lt(e,t,n={type:oe.PAGE_LINK}){const r=at(),i=new se(n),o=new ot({id:r});return{type:f,nodeId:r,parentId:e,menuNode:i,treeNode:o,menuId:t}}function ut(e,t,n,r={type:oe.PAGE_LINK},i=J.BOTTOM){const o=at(),a=new se(r),s=new ot({id:o});return{type:m,nodeId:o,parentId:t,siblingId:n,menuNode:a,treeNode:s,position:i,menuId:e}}function dt(e,t={type:oe.PAGE_LINK}){const n=at(),r=new se(t),i=new ot({id:n});return{type:g,nodeId:n,menuNode:r,treeNode:i,menuId:e}}function pt(e,t,n){return(r,i)=>{const o=i(),a=Ue(o,{id:t}),s=et(o,{id:t,menuId:n}),c=at(),l={[c]:a},u=e=>{const t=at(),n=e.children?e.children.map(u):[];l[t]=Ue(o,{id:e.id});return new ot({id:t,children:n})},d=s.children.map(u),p=new ot({id:c,children:d});r({type:b,parentId:e,siblingId:t,nodesById:l,treeNode:p,menuId:n})}}function ht(e,t){return(n,r)=>{const i=et(r(),{id:e,menuId:t}).children.map(te);n({type:O,id:e,childIds:i,menuId:t})}}function mt(e){return(t,n)=>{const r=Ze(n(),{menuId:e}),i=Object(o.flatten)(r.map(te));t({type:y,menuId:e,nodeIds:i})}}var ft=n(2634);function gt(){return function(e,t){const n=Ue(e,t),r=n?n.pageLinkId||n.contentGroupId:null;return{menuNode:n,page:n?k(e,{pageLinkId:r}):{},pageLinkId:r,menuTreeNode:et(e,t)}}}const bt={updateNode:Ve,updatePageLinkId:He,replaceNode:qe,addChildNode:lt,addNode:ut,cloneNode:pt,deleteNode:ht},Ot=e=>{class t extends r.Component{constructor(e){super(e);Object(o.bindAll)(this,["onPageLinkIdChange","addChild","addNodeBelow","cloneNode","replaceNode","deleteNode","setLinkExternal","onLinkUrlChange","onLinkParamsChange"]);this.updateLinkUrl=Object(o.debounce)(this.updateLinkUrl.bind(this),le);this.updateLinkParams=Object(o.debounce)(this.updateLinkParams.bind(this),le)}shouldComponentUpdate(e,t){return!(!e.menuNode||!e.menuTreeNode)&&Qe()(this,e,t)}updateLinkUrl(e){this.props.updateNode(this.props.id,{linkUrl:e})}onLinkUrlChange({target:{value:e}}){this.updateLinkUrl(e)}updateLinkParams(e){this.props.updateNode(this.props.id,{linkParams:e})}onLinkParamsChange({target:{value:e}}){this.updateLinkParams(e)}updatePageLinkId(e){this.props.updatePageLinkId(this.props.id,e)}onPageLinkIdChange(e){this.updatePageLinkId(e)}addChild(){this.props.addChildNode(this.props.id,this.props.menuId)}addNodeBelow(){this.props.addNode(this.props.menuId,this.props.parentId,this.props.id)}cloneNode(){this.props.cloneNode(this.props.parentId,this.props.id,this.props.menuId)}replaceNode(e){this.props.replaceNode(this.props.id,e)}deleteNode(){this.props.deleteNode(this.props.id,this.props.menuId)}setLinkExternal(e=!0){const t=e?"_blank":null;this.props.updateNode(this.props.id,{linkTarget:t})}get editorUrl(){const{page:e}=this.props;return e?e.categoryId===ae.b.blog.categoryId?ft.b.blogDashboard(e.id):ft.b.edit(e.id,e.categoryId):null}get isPublished(){const{page:e,menuNode:t}=this.props;return e?!!~Q.a.PUBLISHED.indexOf(e.state):t.isPublished}render(){const{id:t,isVisible:n,menuNode:r,menuTreeNode:i,page:o,pageLinkId:a,readOnly:s}=this.props;return Object(Ie.jsx)(e,{addChild:this.addChild,addNodeBelow:this.addNodeBelow,cloneNode:this.cloneNode,deleteNode:this.deleteNode,editorUrl:this.editorUrl,hasChildren:!!i.children.length,id:t,isExternal:"_blank"===r.linkTarget,isPublished:this.isPublished,isVisible:n,linkLabel:r.linkLabel,linkUrl:r.linkUrl,linkParams:r.linkParams,onLinkParamsChange:this.onLinkParamsChange,onLinkUrlChange:this.onLinkUrlChange,onPageLinkIdChange:this.onPageLinkIdChange,pageLinkId:a,pageLinkName:o&&o.name||r.pageLinkName,readOnly:s,replaceNode:this.replaceNode,setLinkExternal:this.setLinkExternal,type:r.type})}}t.propTypes={addChildNode:c.a.func.isRequired,addNode:c.a.func.isRequired,cloneNode:c.a.func.isRequired,deleteNode:c.a.func.isRequired,id:c.a.oneOfType([c.a.string,c.a.number]).isRequired,isVisible:c.a.bool.isRequired,menuId:c.a.oneOfType([c.a.string,c.a.number]).isRequired,menuNode:c.a.instanceOf(se).isRequired,menuTreeNode:c.a.object,page:c.a.object,pageLinkId:c.a.number,parentId:c.a.oneOfType([c.a.string,c.a.number]),readOnly:c.a.bool,replaceNode:c.a.func.isRequired,updateNode:c.a.func.isRequired,updatePageLinkId:c.a.func.isRequired};t.defaultProps={menuNode:new se({})};return Object(a.connect)(gt,bt)(t)};function yt(){return Ot}var jt=n(2766),vt=n(717),Ct=n(751),xt=n(724),Et=n(443),Tt=n(607),St=n(723);const It=e=>"simpleMenusLib.components.modals.deleteNodeModal."+e,wt=e=>{class t extends r.PureComponent{constructor(e){super(e);Object(o.bindAll)(this,["deleteMenu","onCancel","onDeleteClick"]);this.state={open:!1}}onDeleteClick(){this.props.hasChildren?this.setState({open:!0}):this.props.deleteNode()}deleteMenu(){this.props.deleteNode();this.setState({open:!1})}onCancel(){this.setState({open:!1})}renderModal(){if(!this.state.open)return null;const e=this.props.linkLabel||Object(Re.a)(It("placeholder"));return Object(Ie.jsxs)(jt.a,{size:"auto",use:"danger",width:600,children:[Object(Ie.jsxs)(St.a,{children:[Object(Ie.jsx)(vt.a,{onClick:this.onCancel}),Object(Ie.jsx)(Tt.a,{children:Object(Ie.jsx)(Xe.a,{message:It("header"),options:{linkLabel:e}})})]}),Object(Ie.jsx)(xt.a,{children:Object(Ie.jsx)("p",{children:Object(Ie.jsx)(Xe.a,{message:It("body"),options:{linkLabel:e}})})}),Object(Ie.jsx)(Ct.a,{children:Object(Ie.jsx)(Et.a,{use:"danger",onClick:this.deleteMenu,children:Object(Ie.jsx)(Xe.a,{message:It("button")})})})]})}render(){return Object(Ie.jsx)(e,Object.assign({},this.props,{deleteMenuNodeModal:this.renderModal(),deleteNode:this.onDeleteClick}))}}t.propTypes={linkLabel:c.a.string.isRequired,hasChildren:c.a.bool.isRequired,deleteNode:c.a.func.isRequired};t.defaultProps={linkLabel:"",hasChildren:!1,deleteNode:_e.a};return t};function _t(){return wt}var Nt=n(2739),At=n(456),Dt=n(2655),kt=n(2687),Pt=n(2654);const Rt=15,Ft=e=>"simpleMenusLib.components.pagesLinkSelect.draft."+e;function Lt(e,t){const{pageLinkId:n}=t;return{page:k(e,{pageLinkId:n}),pagesOptions:B(e),pagesFetchRequestStatus:L(e)}}const Mt={fetchPages:H,fetchPagesById:q,saveCachedPage:W,clearCache:G};class Bt extends r.PureComponent{constructor(e){super(e);this.state={input:"",isOpen:!1,offset:0,pagesRequestFulfilled:!!e.page};this.loadOptions=Object(o.debounce)(this.loadOptions.bind(this),le);this.onOpenChange=this.onOpenChange.bind(this);this.openLinkSelect=this.openLinkSelect.bind(this);this.onChange=this.onChange.bind(this);this.pageRequestRetried=!1}componentDidUpdate(){const{fetchPagesById:e,isVisible:t,page:n,pageLinkId:r,pagesFetchRequestStatus:i}=this.props;if(!this.state.pagesRequestFulfilled&&t&&(i===pe.SUCCEEDED||i===pe.FAILED))if(n||this.pageRequestRetried)this.setState({pagesRequestFulfilled:!0});else{e(r);this.pageRequestRetried=!0;this.setState({pagesRequestFulfilled:!1})}}onOpenChange({target:{value:e}}){setTimeout(()=>{this.setState({isOpen:e,offset:0});e||this.props.clearCache()},0)}onChange(e){this.props.onChange&&this.props.onChange(e);const t=e.target.value;this.props.saveCachedPage(t)}openLinkSelect(){this.setState({isOpen:!0})}loadOptions(e,t){let{offset:n}=this.state;const{isOpen:r}=this.state;if(!r)return;if(e!==this.state.input){n=0;this.setState({input:e});this.props.clearCache()}const i={offset:n,limit:Rt,name:e};this.props.fetchPages(i).then(e=>{const{hasMore:r,total:i}=e,{pagesOptions:o}=this.props;n+=Rt;this.setState({offset:n});t(null,{options:o,pagination:{hasMore:r,length:i,offset:n}})}).catch(e=>{setTimeout(()=>{throw e})})}get className(){return"pages-select"+(this.state.isOpen?"":" preview-label")}get error(){const{pagesRequestFulfilled:e}=this.state,{page:t,pageLinkId:n}=this.props;return e&&n&&!t}renderDraftTag(){return this.props.isPublished||!this.props.editorUrl?null:Object(Ie.jsx)(Pt.a,{title:Object(Re.a)(Ft("tooltip")),disabled:this.props.readOnly,children:Object(Ie.jsx)(kt.a,{use:"warning",children:Object(Ie.jsx)(Xe.a,{message:Ft("label")})})})}renderPlaceholder(){return Object(Ie.jsxs)("div",{className:"placeholder",children:[this.renderDraftTag(),this.props.placeholder]})}render(){const{readOnly:e}=this.props,{isOpen:t}=this.state,n=this.renderPlaceholder();return!t||e?Object(Ie.jsx)(Dt.a,{error:this.error,onOpenChange:this.openLinkSelect,className:this.className,disabled:e,placeholder:n,value:null}):Object(Ie.jsx)(Dt.a,{error:this.error,onChange:this.onChange,placeholder:n,loadOptions:this.loadOptions,onOpenChange:this.onOpenChange,defaultOpen:!0,className:this.className,filterOptions:!1,cache:null})}}Bt.propTypes={clearCache:c.a.func.isRequired,editorUrl:c.a.string,fetchPages:c.a.func.isRequired,fetchPagesById:c.a.func.isRequired,isPublished:c.a.bool,isVisible:c.a.bool.isRequired,onChange:c.a.func.isRequired,page:c.a.object,pageLinkId:c.a.number,pagesOptions:c.a.arrayOf(c.a.object),pagesFetchRequestStatus:c.a.string.isRequired,placeholder:c.a.oneOfType([c.a.string,c.a.node]),readOnly:c.a.bool,saveCachedPage:c.a.func.isRequired};Bt.defaultProps={onChange:_e.a};var Ut=Object(a.connect)(Lt,Mt)(Bt),Vt=n(2742),Ht=n(486);const qt=e=>"simpleMenusLib.components.menuItemOptions."+e,Gt=e=>`${qt("actions")}.${e}`,Wt=(e,t)=>`${qt("options")}.${e}.${t}`,zt=[f,m,b],$t=[oe.NO_LINK,oe.PAGE_LINK,oe.PAGE_LINK_WITH_PARAMS,oe.URL_LINK];class Kt extends r.Component{constructor(e){super(e);Object(o.bindAll)(this,["onExternalChange","onMouseEnter","onMouseLeave","onOpenChange","onPageLinkIdChange"]);this.state={isHovering:!1,isOpen:!1}}shouldComponentUpdate(e,t){return!(!e.id||!e.type)&&Qe()(this,e,t)}onExternalChange({target:{checked:e}}){this.props.setLinkExternal(e)}onMouseEnter(){this.props.readOnly||this.setState({isHovering:!0})}onMouseLeave(){this.setState({isHovering:!1})}onOpenChange({target:{value:e}}){setTimeout(()=>this.setState({isOpen:e}),0)}onPageLinkIdChange(e){this.props.onPageLinkIdChange(e.target.value)}renderEditorButton(){const{editorUrl:e}=this.props;return e?Object(Ie.jsx)(Et.a,{href:e,external:!0,children:Object(Ie.jsx)(Xe.a,{message:Gt("openInEditor.label")})}):null}renderActionsOptions(){const{type:e,addChild:t,addNodeBelow:n,cloneNode:r,replaceNode:i,isExternal:o}=this.props,a={[f]:t,[m]:n,[b]:r},s={[oe.NO_LINK]:()=>i(oe.NO_LINK),[oe.PAGE_LINK]:()=>i(oe.PAGE_LINK),[oe.PAGE_LINK_WITH_PARAMS]:()=>i(oe.PAGE_LINK_WITH_PARAMS),[oe.URL_LINK]:()=>i(oe.URL_LINK)},c=zt.map(e=>Object(Ie.jsx)(Et.a,{onClick:a[e],children:Object(Ie.jsx)(Xe.a,{message:Gt("primaryOptions."+e)})},e)),l=$t.filter(t=>t!==e).map(e=>Object(Ie.jsx)(Et.a,{"data-test-id":e,className:"p-left-10",onClick:s[e],children:Object(Ie.jsx)(Xe.a,{message:Gt("swapOptions."+e)})},e));return Object(Ie.jsxs)(At.a,{children:[c,this.renderEditorButton(),Object(Ie.jsx)(Ht.a,{distance:"extra-small"}),Object(Ie.jsx)("p",{className:"simple-menus-item-actions-swap-label",children:Object(Ie.jsx)(Xe.a,{message:Gt("primaryOptions."+C)})}),Object(Ie.jsx)(At.a,{children:l}),Object(Ie.jsx)(Ht.a,{distance:"extra-small"}),Object(Ie.jsx)(Vt.a,{checked:o,onChange:this.onExternalChange,children:Object(Ie.jsx)(Xe.a,{message:Gt("external")})})]})}renderActions(){const{isHovering:e,isOpen:t}=this.state;return e||t?Object(Ie.jsxs)("div",{children:[Object(Ie.jsx)(Nt.a,{"data-test-id":"menu-item-action-button",buttonUse:"link",buttonText:Object(Re.a)(Gt("label")),onOpenChange:this.onOpenChange,children:this.renderActionsOptions()}),Object(Ie.jsx)(Le.a,{use:"link",onClick:this.props.deleteNode,children:Object(Ie.jsx)(Me.a,{name:"delete"})})]}):null}renderNoLink(){return Object(Ie.jsx)(Fe.a,{"data-test-id":oe.NO_LINK,styled:!1,disabled:!0,placeholder:Object(Re.a)(Wt(oe.NO_LINK,"placeholder"))},"noLink")}renderUrlLink(){const{linkUrl:e}=this.props;return Object(Ie.jsx)("div",{draggable:!0,onDragStart:e=>{e.preventDefault();e.stopPropagation()},children:Object(Ie.jsx)(Fe.a,{"data-test-id":"url-link-input",placeholder:Object(Re.a)(Wt(oe.URL_LINK,"placeholder")),defaultValue:e,onChange:this.props.onLinkUrlChange,disabled:this.props.readOnly})},"urlLink")}renderPageSelect(){const{editorUrl:e,isPublished:t,isVisible:n,pageLinkId:r,pageLinkName:i,readOnly:o}=this.props,a=i||Object(Re.a)(Wt(oe.PAGE_LINK,"placeholder"));return Object(Ie.jsx)(Ut,{editorUrl:e,isPublished:t,isVisible:n,onChange:this.onPageLinkIdChange,pageLinkId:r,placeholder:a,readOnly:o},"pageSelect")}renderPageSelectWithUrlParams(){const{linkParams:e}=this.props;return Object(Ie.jsxs)("div",{className:"page-select-with-url-params",draggable:!0,onDragStart:e=>{e.preventDefault();e.stopPropagation()},children:[this.renderPageSelect(),Object(Ie.jsx)(Fe.a,{"data-test-id":"page-link-with-params-input",placeholder:Object(Re.a)(Wt(oe.PAGE_LINK_WITH_PARAMS,"placeholder")),defaultValue:e,onChange:this.props.onLinkParamsChange,readOnly:this.props.readOnly})]},"urlParams")}renderOptions(){const{type:e}=this.props,t=[e===oe.NO_LINK&&this.renderNoLink(),e===oe.URL_LINK&&this.renderUrlLink(),e===oe.PAGE_LINK&&this.renderPageSelect(),e===oe.PAGE_LINK_WITH_PARAMS&&this.renderPageSelectWithUrlParams()].filter(Boolean);return Object(Ie.jsx)("div",{className:"menu-options",children:t})}render(){return Object(Ie.jsxs)("div",{className:"simple-menus-menu-item-options","data-test-id":"simple-menu-action-options",onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,children:[this.renderOptions(),this.renderActions(),this.props.deleteMenuNodeModal]})}}Kt.propTypes={addChild:c.a.func.isRequired,addNodeBelow:c.a.func.isRequired,cloneNode:c.a.func.isRequired,deleteMenuNodeModal:c.a.node,deleteNode:c.a.func.isRequired,editorUrl:c.a.string,id:c.a.oneOfType([c.a.string,c.a.number]).isRequired,isPublished:c.a.bool,isVisible:c.a.bool.isRequired,linkUrl:c.a.string,linkParams:c.a.string,isExternal:c.a.bool,onLinkParamsChange:c.a.func.isRequired,onLinkUrlChange:c.a.func.isRequired,onPageLinkIdChange:c.a.func.isRequired,pageLinkId:c.a.number,pageLinkName:c.a.string,readOnly:c.a.bool,replaceNode:c.a.func.isRequired,setLinkExternal:c.a.func.isRequired,type:c.a.oneOf(Object.keys(oe))};var Yt=Object(_.compose)(yt(),_t())(Kt),Xt=Object.freeze(Object(X.a)({ADVANCED_MENUS_MENU_NODE:null}));const Jt={canDrop:e=>!(e.depth>8)&&!e.isParentDragging,drop(e,t){const n=t.getItem().id,{menuId:r,id:i,moveNode:o,parentId:a}=e;n!==i&&o(n,i,a,J.MIDDLE,r)}};function Qt(){return e=>Object(Ee.DropTarget)(Xt.ADVANCED_MENUS_MENU_NODE,Jt,(e,t)=>({connectDropTarget:e.dropTarget(),isOver:t.isOver(),canDrop:t.canDrop()}))(e)}const Zt=200,en=100;function tn(){return e=>t=>{const[n,i]=Object(r.useState)(!1),a=Object(r.useRef)(null),s=Object(r.useCallback)(()=>{if(!a.current)return;const{top:e}=a.current.getBoundingClientRect(),t=e<window.innerHeight+en&&e>-en;n!==t&&i(t)},[n]),c=Object(r.useMemo)(()=>Object(o.throttle)(()=>{s()},Zt),[s]);Object(r.useEffect)(()=>{const e=setTimeout(()=>{s()},0);document.addEventListener("scroll",c);document.addEventListener("wheel",c);return()=>{e&&clearTimeout(e);document.removeEventListener("scroll",c);document.removeEventListener("wheel",c)}},[c,s]);return Object(Ie.jsx)(e,Object.assign({},t,{isVisible:n,ref:a}))}}const nn=Object(r.memo)(Object(r.forwardRef)((e,t)=>{const{id:n,menuId:r,parentId:i,canDrop:o,isOver:a,isCollapsed:s,isVisible:c,hasChildren:l,readOnly:u,toggleCollapse:d,connectDropTarget:p}=e,h=Ae()("simple-menus-menu-item",a&&"is--over"+(o?"":" no--drop"));return p(Object(Ie.jsx)("div",{children:Object(Ie.jsx)("div",{ref:t,children:Object(Ie.jsx)("div",{className:h,children:Object(Ie.jsx)(De.a,{compact:!0,className:"simple-menus-item-card-wrapper",children:Object(Ie.jsx)(ke.a,{children:Object(Ie.jsx)(Pe.a,{position:"start",children:Object(Ie.jsxs)("div",{className:"simple-menus-menu-item-content","data-test-id":"menu-item",children:[Object(Ie.jsx)("div",{className:"menu-content-left",style:{display:!c&&"none"},children:Object(Ie.jsx)(Ye,{id:n,hasChildren:l,toggleCollapse:d,isCollapsed:s,readOnly:u})}),Object(Ie.jsx)("div",{className:"menu-content-right",style:{display:!c&&"none"},children:Object(Ie.jsx)(Yt,{id:n,isVisible:c,parentId:i,menuId:r,readOnly:u})})]})})})})})})}))}),(e,t)=>!t.isVisible||e.id===t.id&&e.menuId===t.menuId&&e.parentId===t.parentId&&e.canDrop===t.canDrop&&e.isOver===t.isOver&&e.isCollapsed===t.isCollapsed&&e.isVisible===t.isVisible&&e.hasChildren===t.hasChildren&&e.readOnly===t.readOnly);nn.propTypes={id:c.a.oneOfType([c.a.string,c.a.number]).isRequired,menuId:c.a.oneOfType([c.a.string,c.a.number]).isRequired,parentId:c.a.oneOfType([c.a.string,c.a.number]),canDrop:c.a.bool,isOver:c.a.bool,isCollapsed:c.a.bool.isRequired,isVisible:c.a.bool.isRequired,hasChildren:c.a.bool.isRequired,readOnly:c.a.bool,toggleCollapse:c.a.func.isRequired,connectDropTarget:c.a.func.isRequired};var rn=Object(_.compose)(Qt(),tn())(nn),on=n(453);const an={canDrop:(e,t)=>e.id===t.getItem().id||!e.isParentDragging,drop(e,t){const{moveNode:n,targetId:r,targetParentId:i,menuId:o}=e;n(t.getItem().id,r,i,J.BOTTOM,o)}};function sn(){return e=>Object(Ee.DropTarget)(Xt.ADVANCED_MENUS_MENU_NODE,an,(e,t)=>({connectDropTarget:e.dropTarget(),isOver:t.isOver(),canDrop:t.canDrop()}))(e)}class cn extends r.PureComponent{get classNames(){return Ae()("simple-menus-promoting-drop-target",this.props.isOver&&"is--over",!this.props.canDrop&&"no--drop")}render(){const{depth:e,connectDropTarget:t}=this.props;return t(Object(Ie.jsx)("div",{className:this.classNames},e))}}cn.propTypes={depth:c.a.number.isRequired,connectDropTarget:c.a.func.isRequired,isOver:c.a.bool,canDrop:c.a.bool};cn.defaultProps={depth:0,targetParentId:null};var ln=sn()(cn);const un=e=>e.application.isDragging;function dn(){return function(e){return{isDragging:un(e)}}}const pn=e=>{class t extends r.PureComponent{renderDropTargets(){const{hasChildren:e,isLastChild:t,moveNodeAction:n,isParentDragging:r,id:i,hierarchy:a,depthToNextSibling:s,depth:c,isDragging:l,menuId:u,readOnly:d}=this.props;return!e&&t&&c&&l?Object(o.range)(this.props.depthToNextSibling).map(e=>{const t=a.length-(s-e);return Object(Ie.jsx)(ln,{depth:e,moveNode:n,isParentDragging:r,id:i,targetId:a[t],targetParentId:a[t-1],menuId:u,readOnly:d},e)}):null}render(){return Object(Ie.jsx)(e,Object.assign({},this.props,{dropTargets:this.renderDropTargets()}))}}t.propTypes={isOver:c.a.bool,depth:c.a.number.isRequired,isLastChild:c.a.bool,hasChildren:c.a.bool,depthToNextSibling:c.a.number,hasSibling:c.a.bool,moveNode:c.a.func.isRequired,isParentDragging:c.a.bool,id:c.a.oneOfType([c.a.string,c.a.number]).isRequired,hierarchy:c.a.arrayOf(c.a.oneOfType([c.a.string,c.a.number])).isRequired,isDragging:c.a.bool,menuId:c.a.oneOfType([c.a.string,c.a.number]).isRequired,moveNodeAction:c.a.func.isRequired,readOnly:c.a.bool};t.defaultProps={depth:0,depthToNextSibling:0};return Object(a.connect)(dn,null)(t)};function hn(){return pn}function mn(){return function(e,t){return{treeNode:et(e,t)}}}const fn={addNode:ut,moveNode:ct,addChildNode:lt},gn=e=>{class t extends r.PureComponent{constructor(e){super(e);Object(o.bindAll)(this,["addNode","moveNode"])}addNode(e){const{addNode:t,parentId:n,id:r,position:i,treeNode:o,addChildNode:a,menuId:s,isCollapsed:c}=this.props;o.children.length&&i===J.BOTTOM&&!c?a(r,s,{type:e}):t(s,n,r,{type:e},i)}moveNode(e){const{moveNode:t,parentId:n,id:r,position:i,menuId:o,treeNode:a,isCollapsed:s}=this.props,{id:c}=e;t(c,r,n,a.children.length&&i===J.BOTTOM&&!s?J.MIDDLE:i,o)}render(){const{id:t,depth:n,treeNode:r,isParentDragging:i,hasChildren:o,isLastChild:a,hasSibling:s,depthToNextSibling:c,hierarchy:l,menuId:u,moveNode:d,readOnly:p}=this.props;return r?Object(Ie.jsx)(e,{id:t,depth:n,addNode:this.addNode,moveNode:this.moveNode,isParentDragging:i,hasChildren:o,isLastChild:a,hasSibling:s,depthToNextSibling:c,hierarchy:l,menuId:u,moveNodeAction:d,readOnly:p}):null}}t.propTypes={id:c.a.oneOfType([c.a.string,c.a.number]).isRequired,parentId:c.a.oneOfType([c.a.string,c.a.number]),menuId:c.a.oneOfType([c.a.string,c.a.number]).isRequired,depth:c.a.number.isRequired,position:c.a.oneOf([J.TOP,J.BOTTOM]).isRequired,addNode:c.a.func.isRequired,moveNode:c.a.func.isRequired,treeNode:c.a.object,addChildNode:c.a.func.isRequired,isParentDragging:c.a.bool,isLastChild:c.a.bool,hasChildren:c.a.bool,depthToNextSibling:c.a.number,hasSibling:c.a.bool,hierarchy:c.a.arrayOf(c.a.oneOfType([c.a.string,c.a.number])).isRequired,isCollapsed:c.a.bool,readOnly:c.a.bool};t.defaultProps={position:J.BOTTOM,hierarchy:[]};return Object(a.connect)(mn,fn)(t)};function bn(){return gn}const On={canDrop:e=>!e.isParentDragging,drop(e,t){t.didDrop()||e.moveNode(t.getItem())}};function yn(){return e=>Object(Ee.DropTarget)(Xt.ADVANCED_MENUS_MENU_NODE,On,(e,t)=>({connectDropTarget:e.dropTarget(),isOver:t.isOver(),canDrop:t.canDrop()}))(e)}var jn=n(2592),vn=n(1302),Cn=n.n(vn);var xn=Object(jn.a)({events:Cn.a,properties:{namespace:"advanced-menus"},lastKnownEventProperties:["screen","subscreen"]});const En=[oe.NO_LINK,oe.PAGE_LINK,oe.PAGE_LINK_WITH_PARAMS,oe.URL_LINK],Tn=({addNode:e,setIsOpen:t})=>{const n=n=>{e(n);xn.track("addMenuItem",{type:n,method:"divider"});t(!1)},r={[oe.NO_LINK]:()=>n(oe.NO_LINK),[oe.PAGE_LINK]:()=>n(oe.PAGE_LINK),[oe.PAGE_LINK_WITH_PARAMS]:()=>{n(oe.PAGE_LINK_WITH_PARAMS)},[oe.URL_LINK]:()=>n(oe.URL_LINK)},i=En.map(e=>Object(Ie.jsx)(Et.a,{onClick:r[e],use:"unstyled",className:"simple-menus-menu-node-divider-option-button",children:Object(Ie.jsx)(Xe.a,{message:"simpleMenusLib.components.menuItemDivider.addItems."+e})},e));return Object(Ie.jsx)(At.a,{className:"p-y-2",children:i})},Sn=Object(r.memo)(Object(r.forwardRef)((e,t)=>{const[n,i]=Object(r.useState)(!1),[o,a]=Object(r.useState)(!1),{depth:s,depthToNextSibling:c,dropTargets:l,canDrop:u,hasChildren:d,isDragging:p,isLastChild:h,isOver:m,isParentDragging:f,readOnly:g,addNode:b,connectDropTarget:O}=e,y=Ae()("simple-menus-menu-node-divider",o&&"is--open",m&&"is--over",g&&"is--readOnly"),j="divider"+(m&&!u?" no--drop":""),v=!(d||!h||!s||!p),C=o||n&&!m&&!p&&!f;let x={width:`calc(100% + ${(s+de)*ue}px)`,marginLeft:`-${(s+de)*ue}px`};p&&!v&&(x={width:"100%",marginLeft:"0"});p&&v&&(x={width:`calc(100% + ${c*ue}px)`,marginLeft:`-${c*ue}px`});Object(r.useEffect)(()=>{const e=({target:e})=>{if(o){const n=t.current;n&&n.contains(e)||a(!1)}},n=()=>{o&&a(!1)};document.addEventListener("click",e);document.addEventListener("wheel",n);return()=>{document.removeEventListener("click",e);document.removeEventListener("wheel",n)}},[o,t]);const E=()=>{a(e=>!e)},T=({target:{value:e}})=>{a(e)},S=()=>{g||i(!0)},I=()=>{i(!1)};return O(Object(Ie.jsx)("div",{children:Object(Ie.jsxs)("div",{ref:t,className:y,style:x,onClick:E,onMouseEnter:S,onMouseLeave:I,children:[l,C&&Object(Ie.jsx)(on.a,{open:o,onOpenChange:T,placement:"bottom right",content:Object(Ie.jsx)(Tn,{addNode:b,setIsOpen:a}),closeOnOutsideClick:!1,children:Object(Ie.jsx)(Le.a,{size:"extra-small",className:"add-button",children:Object(Ie.jsx)(Me.a,{name:"add"})})}),Object(Ie.jsx)("div",{className:j})]})}))}),(e,t)=>!t.isVisible||e.depth===t.depth&&e.depthToNextSibling===t.depthToNextSibling&&e.dropTargets===t.dropTargets&&e.canDrop===t.canDrop&&e.hasChildren===t.hasChildren&&e.isDragging===t.isDragging&&e.isLastChild===t.isLastChild&&e.isOver===t.isOver&&e.isParentDragging===t.isParentDragging&&e.isVisible===t.isVisible&&e.readOnly===t.readOnly&&e.addNode===t.addNode&&e.connectDropTarget===t.connectDropTarget);Sn.propTypes={depth:c.a.number.isRequired,depthToNextSibling:c.a.number,dropTargets:c.a.node,canDrop:c.a.bool,hasChildren:c.a.bool,isDragging:c.a.bool,isLastChild:c.a.bool,isOver:c.a.bool,isParentDragging:c.a.bool,isVisible:c.a.bool,readOnly:c.a.bool,addNode:c.a.func.isRequired,connectDropTarget:c.a.func.isRequired};var In=Object(_.compose)(bn(),hn(),yn(),tn())(Sn);const wn=500,_n=100,Nn={canDrag:e=>!e.readOnly,beginDrag(e,t,n){const r=n.getBoundingClientRect();window.requestIdleCallback?window.requestIdleCallback(()=>e.setIsDragging(!0),{timeout:wn}):e.setIsDragging(!0);return{id:e.id,parentId:e.parentId,menuId:e.menuId,label:e.label,width:r.width}},endDrag(e){window.requestIdleCallback?window.requestIdleCallback(()=>e.setIsDragging(!1),{timeout:_n}):e.setIsDragging(!1)},isDragging:(e,t)=>e.id===t.getItem().id};function An(){return e=>Object(Ee.DragSource)(Xt.ADVANCED_MENUS_MENU_NODE,Nn,(e,t)=>({connectDragSource:e.dragSource(),connectDragPreview:e.dragPreview(),isDragging:t.isDragging()}))(e)}function Dn(e){return{type:I,isDragging:e}}const kn=({id:e,depth:t,index:n,parentId:r,menuId:i,isDragging:o,isParentDragging:a,readOnly:s})=>0===n&&0===t?Object(Ie.jsx)(In,{id:e,depth:t,position:J.TOP,parentId:r,menuId:i,isParentDragging:o||a,readOnly:s}):null,Pn=Object(r.forwardRef)((e,t)=>{const[n,i]=Object(r.useState)(!1),{children:o,className:a,depth:s,depthToNextSibling:c,hierarchy:l,index:u,id:d,menuId:p,parentId:h,hasSibling:m,isDragging:f,isLastChild:g,isParentDragging:b,readOnly:O,connectDragSource:y,connectDragPreview:j,getMenuComponent:v,moveNode:C}=e,x=Ae()(a,"simple-menus-menu-node",f&&"is--dragged");Object(r.useEffect)(()=>{j(Object(Te.b)(),{captureDraggingState:!0})},[j]);const E=()=>{i(e=>!e)},T=v(!0);return y(Object(Ie.jsx)("div",{children:Object(Ie.jsxs)("div",{className:x,ref:t,children:[Object(Ie.jsx)(kn,{id:d,depth:s,index:u,parentId:h,menuId:p,isDragging:f,isParentDragging:b,readOnly:O}),Object(Ie.jsx)(rn,{id:d,parentId:h,moveNode:C,isParentDragging:f||b,depth:s,hasChildren:Boolean(o.length),toggleCollapse:E,isCollapsed:n,menuId:p,readOnly:O}),Object(Ie.jsx)(In,{id:d,depth:s,parentId:n?null:h,menuId:p,isCollapsed:n,isParentDragging:f||b,isLastChild:g,hasChildren:!!o.length,hasSibling:m,depthToNextSibling:c,hierarchy:l,readOnly:O}),Object(Ie.jsx)(T,{parentId:d,nodes:o,getMenuComponent:v,moveNode:C,isParentDragging:f||b,depth:s+1,isCollapsed:n,menuId:p,depthToNextSibling:c,hierarchy:[...l,d],readOnly:O})]})}))});Pn.propTypes={children:c.a.arrayOf(c.a.any).isRequired,className:c.a.string,depth:c.a.number.isRequired,depthToNextSibling:c.a.number,hierarchy:c.a.arrayOf(c.a.oneOfType([c.a.string,c.a.number])).isRequired,index:c.a.number.isRequired,id:c.a.oneOfType([c.a.string,c.a.number]).isRequired,menuId:c.a.oneOfType([c.a.string,c.a.number]).isRequired,parentId:c.a.oneOfType([c.a.string,c.a.number]),hasSibling:c.a.bool,isDragging:c.a.bool,isLastChild:c.a.bool,isParentDragging:c.a.bool,readOnly:c.a.bool,connectDragSource:c.a.func.isRequired,connectDragPreview:c.a.func.isRequired,getMenuComponent:c.a.func.isRequired,moveNode:c.a.func.isRequired};Pn.defaultProps={children:[]};const Rn={setIsDragging:Dn};var Fn=Object(_.compose)(Object(a.connect)(null,Rn),An())(Pn),Ln=n(0),Mn=n.n(Ln);function Bn(e){var t=!1;return function(){if(!t){console.warn(e);t=!0}}}Bn("\n>> Error, via react-flip-move <<\n\nYou provided a stateless functional component as a child to <FlipMove>. Unfortunately, SFCs aren't supported, because Flip Move needs access to the backing instances via refs, and SFCs don't have a public instance that holds that info.\n\nPlease wrap your components in a native element (eg. <div>), or a non-functional component.\n"),Bn("\n>> Error, via react-flip-move <<\n\nYou provided a primitive (text or number) node as a child to <FlipMove>. Flip Move needs containers with unique keys to move children around.\n\nPlease wrap your value in a native element (eg. <span>), or a component.\n");var Un=Bn("\n>> Warning, via react-flip-move <<\n\nWhen using \"wrapperless\" mode (by supplying 'typeName' of 'null'), strange things happen when the direct parent has the default \"static\" position.\n\nFlipMove has added 'position: relative' to this node, to ensure Flip Move animates correctly.\n\nTo avoid seeing this warning, simply apply a non-static position to that parent node.\n"),Vn=Bn("\n>> Warning, via react-flip-move <<\n\nOne or more of Flip Move's child elements have the html attribute 'disabled' set to true.\n\nPlease note that this will cause animations to break in Internet Explorer 11 and below. Either remove the disabled attribute or set 'animation' to false.\n"),Hn={elevator:{from:{transform:"scale(0)",opacity:"0"},to:{transform:"",opacity:""}},fade:{from:{opacity:"0"},to:{opacity:""}},accordionVertical:{from:{transform:"scaleY(0)",transformOrigin:"center top"},to:{transform:"",transformOrigin:"center top"}},accordionHorizontal:{from:{transform:"scaleX(0)",transformOrigin:"left center"},to:{transform:"",transformOrigin:"left center"}},none:null},qn={elevator:{from:{transform:"scale(1)",opacity:"1"},to:{transform:"scale(0)",opacity:"0"}},fade:{from:{opacity:"1"},to:{opacity:"0"}},accordionVertical:{from:{transform:"scaleY(1)",transformOrigin:"center top"},to:{transform:"scaleY(0)",transformOrigin:"center top"}},accordionHorizontal:{from:{transform:"scaleX(1)",transformOrigin:"left center"},to:{transform:"scaleX(0)",transformOrigin:"left center"}},none:null},Gn=Hn,Wn="elevator",zn="none",$n=function(e,t){for(var n=0;n<t.length;n++)if(e(t[n],n,t))return t[n]},Kn=function(e,t){for(var n=0;n<t.length;n++)if(!e(t[n],n,t))return!1;return!0},Yn=function(e){return(Yn=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)})(e)};function Xn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n={};Object.keys(e).forEach((function(r){-1===t.indexOf(r)&&(n[r]=e[r])}));return n}function Jn(e,t){if(e===t)return!0;var n=!Yn(e)||!Yn(t),r=e.length!==t.length;return!n&&!r&&Kn((function(e,n){return e===t[n]}),e)}function Qn(e){var t={};return function(n){t[n]||(t[n]=e(n));return t[n]}}var Zn=Qn((function(e){return e.replace(/([A-Z])/g,"-$1").toLowerCase()})),er="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tr=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},nr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},rr=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},ir=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t};function or(e){var t,n;return n=t=function(t){rr(n,t);function n(){tr(this,n);return ir(this,t.apply(this,arguments))}n.prototype.checkChildren=function(e){};n.prototype.convertProps=function(e){var t={children:e.children,easing:e.easing,onStart:e.onStart,onFinish:e.onFinish,onStartAll:e.onStartAll,onFinishAll:e.onFinishAll,typeName:e.typeName,disableAllAnimations:e.disableAllAnimations,getPosition:e.getPosition,maintainContainerHeight:e.maintainContainerHeight,verticalAlignment:e.verticalAlignment,duration:this.convertTimingProp("duration"),delay:this.convertTimingProp("delay"),staggerDurationBy:this.convertTimingProp("staggerDurationBy"),staggerDelayBy:this.convertTimingProp("staggerDelayBy"),appearAnimation:this.convertAnimationProp(e.appearAnimation,Gn),enterAnimation:this.convertAnimationProp(e.enterAnimation,Hn),leaveAnimation:this.convertAnimationProp(e.leaveAnimation,qn),delegated:{}};this.checkChildren(t.children);var n=Object.keys(t),r=Xn(this.props,n);r.style=nr({position:"relative"},r.style);t.delegated=r;return t};n.prototype.convertTimingProp=function(e){var t=this.props[e],r="number"==typeof t?t:parseInt(t,10);if(isNaN(r)){0;return n.defaultProps[e]}return r};n.prototype.convertAnimationProp=function(e,t){switch(void 0===e?"undefined":er(e)){case"boolean":return t[e?Wn:zn];case"string":if(-1===Object.keys(t).indexOf(e)){0;return t[Wn]}return t[e];default:return e}};n.prototype.render=function(){return i.a.createElement(e,this.convertProps(this.props))};return n}(r.Component),t.defaultProps={easing:"ease-in-out",duration:350,delay:0,staggerDurationBy:0,staggerDelayBy:0,typeName:"div",enterAnimation:Wn,leaveAnimation:Wn,disableAllAnimations:!1,getPosition:function(e){return e.getBoundingClientRect()},maintainContainerHeight:!1,verticalAlignment:"top"},n}function ar(e){var t=e.domNode,n=e.styles;Object.keys(n).forEach((function(e){t.style.setProperty(Zn(e),n[e])}))}function sr(){var e={transition:"transitionend","-o-transition":"oTransitionEnd","-moz-transition":"transitionend","-webkit-transition":"webkitTransitionEnd"};if("undefined"==typeof document)return"";var t=document.createElement("fakeelement"),n=$n((function(e){return void 0!==t.style.getPropertyValue(e)}),Object.keys(e));return n?e[n]:""}var cr=function(e){var t=e.childDomNode,n=e.parentDomNode,r=e.getPosition,i=r(n),o=r(t),a=o.top,s=o.left,c=o.right,l=o.bottom,u=o.width,d=o.height;return{top:a-i.top,left:s-i.left,right:i.right-c,bottom:i.bottom-l,width:u,height:d}},lr=function(e){var t=e.childDomNode,n={top:0,left:0,right:0,bottom:0,height:0,width:0},r=e.childBoundingBox||n,i=e.parentBoundingBox||n,o=(0,e.getPosition)(t),a={top:o.top-i.top,left:o.left-i.left};return[r.left-a.left,r.top-a.top]},ur=function(e,t){var n=e.domNode,r=e.boundingBox;if(n&&r){var i=window.getComputedStyle(n),o=["margin-top","margin-left","margin-right"].reduce((function(e,t){var n,r=i.getPropertyValue(t);return nr({},e,((n={})[t]=Number(r.replace("px","")),n))}),{});ar({domNode:n,styles:{position:"absolute",top:("bottom"===t?r.top-r.height:r.top)-o["margin-top"]+"px",left:r.left-o["margin-left"]+"px",right:r.right-o["margin-right"]+"px"}})}},dr=function(e){var t=e.domNode,n=e.parentData,r=e.getPosition,i=n.domNode,o=n.boundingBox;if(i&&o){ar({domNode:t,styles:{height:"0"}});var a=o.height-r(i).height;ar({domNode:t,styles:{height:a>0?a+"px":"0"}})}},pr=function(e){if("undefined"==typeof HTMLElement)return null;if(e instanceof HTMLElement)return e;var t=Object(Ln.findDOMNode)(e);return t&&t.nodeType===Node.TEXT_NODE?null:t},hr=function(e,t){var n=t.delay,r=t.duration,i=t.staggerDurationBy,o=t.staggerDelayBy,a=t.easing;n+=e*o;r+=e*i;return["transform","opacity"].map((function(e){return e+" "+r+"ms "+a+" "+n+"ms"})).join(", ")},mr=sr(),fr=!mr;function gr(e){return e.key||""}function br(e){return r.Children.toArray(e)}function Or(e){return fr||e.disableAllAnimations||0===e.duration&&0===e.delay&&0===e.staggerDurationBy&&0===e.staggerDelayBy}function yr(e,t){return $n((function(t){return gr(t)===e}),t.children)}function jr(e,t,n){var r=e.map((function(e){var t=yr(e.key,n),r=!t||t.leaving;return nr({},e,{element:e,entering:r})})),i=0;n.children.forEach((function(n,o){if(!$n((function(e){return e.key===gr(n)}),e)&&t.leaveAnimation){var a=nr({},n,{leaving:!0}),s=o+i;r.splice(s,0,a);i+=1}}));return r}var vr=or(function(e){rr(t,e);function t(){var n,r,i;tr(this,t);for(var o=arguments.length,a=Array(o),s=0;s<o;s++)a[s]=arguments[s];return i=(n=r=ir(this,e.call.apply(e,[this].concat(a))),r.state={children:br(r.props?r.props.children:[]).map((function(e){return nr({},e,{element:e,appearing:!0})}))},r.childrenData={},r.parentData={domNode:null,boundingBox:null},r.heightPlaceholderData={domNode:null},r.remainingAnimations=0,r.childrenToAnimate=[],r.findDOMContainer=function(){var e=Mn.a.findDOMNode(r),t=e&&e.parentNode;if(t&&t instanceof HTMLElement){if("static"===window.getComputedStyle(t).position){t.style.position="relative";Un()}r.parentData.domNode=t}},r.runAnimation=function(){var e=r.state.children.filter(r.doesChildNeedToBeAnimated),t=e.map((function(e){return r.computeInitialStyles(e)}));e.forEach((function(e,n){r.remainingAnimations+=1;r.childrenToAnimate.push(gr(e));r.animateChild(e,n,t[n])}));"function"==typeof r.props.onStartAll&&r.callChildrenHook(r.props.onStartAll)},r.doesChildNeedToBeAnimated=function(e){if(!gr(e))return!1;var t=r.getChildData(gr(e)),n=t.domNode,i=t.boundingBox,o=r.parentData.boundingBox;if(!n)return!1;var a=r.props,s=a.appearAnimation,c=a.enterAnimation,l=a.leaveAnimation,u=a.getPosition,d=e.appearing&&s,p=e.entering&&c,h=e.leaving&&l;if(d||p||h)return!0;var m=lr({childDomNode:n,childBoundingBox:i,parentBoundingBox:o,getPosition:u}),f=m[0],g=m[1];return 0!==f||0!==g},n),ir(r,i)}t.getDerivedStateFromProps=function(e,t){var n=br(e.children);return{children:Or(e)?n.map((function(e){return nr({},e,{element:e})})):jr(n,e,t)}};t.prototype.componentDidMount=function(){null===this.props.typeName&&this.findDOMContainer();if(this.props.appearAnimation&&!Or(this.props)){this.prepForAnimation();this.runAnimation()}};t.prototype.componentDidUpdate=function(e){null===this.props.typeName&&this.findDOMContainer();if(!Jn(br(e.children).map((function(e){return e.key})),br(this.props.children).map((function(e){return e.key})))&&!Or(this.props)){this.prepForAnimation();this.runAnimation()}};t.prototype.getSnapshotBeforeUpdate=function(){this.updateBoundingBoxCaches();return null};t.prototype.prepForAnimation=function(){var e=this,t=this.props,n=t.leaveAnimation,r=t.maintainContainerHeight,i=t.getPosition;if(n){this.state.children.filter((function(e){return e.leaving})).forEach((function(t){var n=e.getChildData(gr(t));!Or(e.props)&&n.domNode&&n.domNode.disabled&&Vn();n.boundingBox&&ur(n,e.props.verticalAlignment)}));r&&this.heightPlaceholderData.domNode&&dr({domNode:this.heightPlaceholderData.domNode,parentData:this.parentData,getPosition:i})}this.state.children.forEach((function(t){var n=e.getChildData(gr(t)).domNode;n&&(t.entering||t.leaving||ar({domNode:n,styles:{transition:""}}))}))};t.prototype.animateChild=function(e,t,n){var r=this,i=this.getChildData(gr(e)).domNode;if(i){ar({domNode:i,styles:n});this.props.onStart&&this.props.onStart(e,i);requestAnimationFrame((function(){requestAnimationFrame((function(){var n={transition:hr(t,r.props),transform:"",opacity:""};e.appearing&&r.props.appearAnimation?n=nr({},n,r.props.appearAnimation.to):e.entering&&r.props.enterAnimation?n=nr({},n,r.props.enterAnimation.to):e.leaving&&r.props.leaveAnimation&&(n=nr({},n,r.props.leaveAnimation.to));ar({domNode:i,styles:n})}))}));this.bindTransitionEndHandler(e)}};t.prototype.bindTransitionEndHandler=function(e){var t=this,n=this.getChildData(gr(e)).domNode;if(n){var r=function r(i){if(i.target===n){n.style.transition="";t.triggerFinishHooks(e,n);n.removeEventListener(mr,r);e.leaving&&t.removeChildData(gr(e))}};n.addEventListener(mr,r)}};t.prototype.triggerFinishHooks=function(e,t){var n=this;this.props.onFinish&&this.props.onFinish(e,t);this.remainingAnimations-=1;if(0===this.remainingAnimations){var r=this.state.children.filter((function(e){return!e.leaving})).map((function(e){return nr({},e,{element:e.element,appearing:!1,entering:!1})}));this.setState({children:r},(function(){"function"==typeof n.props.onFinishAll&&n.callChildrenHook(n.props.onFinishAll);n.childrenToAnimate=[]}));this.heightPlaceholderData.domNode&&(this.heightPlaceholderData.domNode.style.height="0")}};t.prototype.callChildrenHook=function(e){var t=this,n=[],r=[];this.childrenToAnimate.forEach((function(e){var i=yr(e,t.state);if(i){n.push(i);t.hasChildData(e)&&r.push(t.getChildData(e).domNode)}}));e(n,r)};t.prototype.updateBoundingBoxCaches=function(){var e=this,t=this.parentData.domNode;if(t){this.parentData.boundingBox=this.props.getPosition(t);var n=[];this.state.children.forEach((function(r){var i=gr(r);if(i)if(e.hasChildData(i)){var o=e.getChildData(i);o.domNode&&r?n.push(cr({childDomNode:o.domNode,parentDomNode:t,getPosition:e.props.getPosition})):n.push(null)}else n.push(null);else n.push(null)}));this.state.children.forEach((function(t,r){var i=gr(t),o=n[r];i&&e.setChildData(i,{boundingBox:o})}))}};t.prototype.computeInitialStyles=function(e){if(e.appearing)return this.props.appearAnimation?this.props.appearAnimation.from:{};if(e.entering)return this.props.enterAnimation?nr({position:"",top:"",left:"",right:"",bottom:""},this.props.enterAnimation.from):{};if(e.leaving)return this.props.leaveAnimation?this.props.leaveAnimation.from:{};var t=this.getChildData(gr(e)),n=t.domNode,r=t.boundingBox,i=this.parentData.boundingBox;if(!n)return{};var o=lr({childDomNode:n,childBoundingBox:r,parentBoundingBox:i,getPosition:this.props.getPosition});return{transform:"translate("+o[0]+"px, "+o[1]+"px)"}};t.prototype.hasChildData=function(e){return Object.prototype.hasOwnProperty.call(this.childrenData,e)};t.prototype.getChildData=function(e){return this.hasChildData(e)?this.childrenData[e]:{}};t.prototype.setChildData=function(e,t){this.childrenData[e]=nr({},this.getChildData(e),t)};t.prototype.removeChildData=function(e){delete this.childrenData[e];this.setState((function(t){return nr({},t,{children:t.children.filter((function(t){return t.element.key!==e}))})}))};t.prototype.createHeightPlaceholder=function(){var e=this,t=this.props.typeName,n="ul"===t||"ol"===t?"li":"div";return Object(r.createElement)(n,{key:"height-placeholder",ref:function(t){e.heightPlaceholderData.domNode=t},style:{visibility:"hidden",height:0}})};t.prototype.childrenWithRefs=function(){var e=this;return this.state.children.map((function(t){return Object(r.cloneElement)(t.element,{ref:function(n){if(n){var r=pr(n);e.setChildData(gr(t),{domNode:r})}}})}))};t.prototype.render=function(){var e=this,t=this.props,n=t.typeName,i=t.delegated,o=t.leaveAnimation,a=t.maintainContainerHeight,s=this.childrenWithRefs();o&&a&&s.push(this.createHeightPlaceholder());if(!n)return s;var c=nr({},i,{children:s,ref:function(t){e.parentData.domNode=t}});return Object(r.createElement)(n,c)};return t}(r.Component));class Cr extends r.PureComponent{get classNames(){return Ae()("simple-menus-menu-tree",this.props.parentId&&"is--subtree",this.props.isCollapsed&&"is--collapsed")}renderNodes(){const{nodes:e,depthToNextSibling:t,isParentDragging:n,getMenuComponent:r,parentId:i,moveNode:o,depth:a,menuId:s,hierarchy:c,isCollapsed:l,readOnly:u}=this.props;if(l)return null;const d=r(!1);return e.map((l,p)=>{const h=p<e.length-1,m=p===e.length-1;return Object(Ie.jsx)("div",{children:Object(Ie.jsx)(d,Object.assign({parentId:i,getMenuComponent:r,moveNode:o,isParentDragging:n},l,{depth:a,index:p,menuId:s,isLastChild:m,hasSibling:h,depthToNextSibling:h||0===a?0:t+1,hierarchy:c,readOnly:u}))},l.id)})}render(){return Object(Ie.jsx)(vr,{className:this.classNames,duration:250,easing:"cubic-bezier(.42, .0, .58, 1)",children:this.renderNodes()})}}Cr.propTypes={parentId:c.a.oneOfType([c.a.string,c.a.number]),nodes:c.a.oneOfType([c.a.any,c.a.arrayOf(c.a.any)]),getMenuComponent:c.a.func.isRequired,moveNode:c.a.func.isRequired,isParentDragging:c.a.bool,depth:c.a.number.isRequired,isCollapsed:c.a.bool.isRequired,menuId:c.a.oneOfType([c.a.string,c.a.number]).isRequired,depthToNextSibling:c.a.number.isRequired,hierarchy:c.a.arrayOf(c.a.oneOfType([c.a.string,c.a.number])).isRequired,readOnly:c.a.bool};Cr.defaultProps={isCollapsed:!1,depthToNextSibling:0,hierarchy:[]};var xr=Cr;class Er extends r.PureComponent{constructor(e){super(e);this.getMenuComponent=this.getMenuComponent.bind(this)}getMenuComponent(e){return e?xr:Fn}get menuStyle(){return{minWidth:24*this.props.maxDepth+650+"px"}}render(){return Object(Ie.jsx)("div",{style:this.menuStyle,children:Object(Ie.jsx)(xr,{parentId:this.props.parentId,nodes:this.props.nodes,getMenuComponent:this.getMenuComponent,moveNode:this.props.moveNode,depth:0,menuId:this.props.menuId,readOnly:this.props.readOnly})})}}Er.propTypes={parentId:c.a.oneOfType([c.a.string,c.a.number]),nodes:c.a.arrayOf(c.a.object),moveNode:c.a.func.isRequired,menuId:c.a.oneOfType([c.a.string,c.a.number]).isRequired,maxDepth:c.a.number.isRequired,readOnly:c.a.bool};var Tr=Er;const Sr=e=>"simpleMenusLib.components.menuItemOptions."+e,Ir=(e,t)=>`${Sr("options")}.${e}.${t}`;function wr(){return function(e,t){return{menuNode:Ue(e,t)}}}const _r={};class Nr extends r.PureComponent{constructor(e){super(e);Object(o.bindAll)(this,["getPlaceholderText","getOptionsLabel"])}getPlaceholderText(){switch(this.props.menuNode.type){case oe.URL_LINK:return Object(Re.a)(Ir(oe.URL_LINK,"placeholder"));case oe.PAGE_LINK:case oe.PAGE_LINK_WITH_PARAMS:return Object(Re.a)(Ir(oe.PAGE_LINK,"placeholder"));case oe.NO_LINK:return Object(Re.a)(Ir(oe.NO_LINK,"placeholder"));default:return null}}getOptionsLabel(){const{menuNode:e}=this.props;switch(e.type){case oe.URL_LINK:return e.linkUrl;case oe.PAGE_LINK:case oe.PAGE_LINK_WITH_PARAMS:return e.pageLinkName;case oe.NO_LINK:return Object(Re.a)(Ir(oe.NO_LINK,"placeholder"));default:return null}}renderLabel(){return Object(Ie.jsx)(Fe.a,{className:"preview-label",defaultValue:this.getOptionsLabel(),placeholder:this.getPlaceholderText()})}renderOptions(){const{menuNode:e}=this.props,t=this.renderLabel();return e.type===oe.PAGE_LINK_WITH_PARAMS?Object(Ie.jsxs)("div",{className:"page-select-with-url-params",children:[t,Object(Ie.jsx)(Fe.a,{placeholder:Object(Re.a)(Ir(oe.PAGE_LINK_WITH_PARAMS,"placeholder")),defaultValue:e.linkParams})]}):t}render(){const{menuNode:e}=this.props;return Object(Ie.jsx)("div",{className:"simple-menus-menu-item is--dragging",children:Object(Ie.jsx)(De.a,{compact:!0,className:"m-bottom-0",children:Object(Ie.jsx)(Pe.a,{position:"start",children:Object(Ie.jsxs)("div",{className:"simple-menus-menu-item-content",children:[Object(Ie.jsx)("div",{className:"menu-content-left",children:Object(Ie.jsx)("div",{className:"simple-menus-menu-item-label",children:Object(Ie.jsx)(Fe.a,{use:"on-dark",className:"label-input",defaultValue:e.linkLabel,placeholder:Object(Re.a)("simpleMenusLib.components.menuItemLabel.placeholder")})})}),Object(Ie.jsx)("div",{className:"menu-content-right",children:Object(Ie.jsx)("div",{className:"simple-menus-menu-item-options",children:Object(Ie.jsx)("div",{className:"menu-options",children:this.renderOptions()})})})]})})})})}}Nr.propTypes={menuNode:c.a.instanceOf(se).isRequired};var Ar=Object(a.connect)(wr,_r)(Nr);const Dr=e=>{const{id:t,parentId:n,children:r,getMenuComponent:i,depth:o,menuId:a}=e,s=i(!0);return Object(Ie.jsxs)("div",{className:"simple-menus-menu-node",children:[Object(Ie.jsx)(Ar,{id:t,parentId:n,depth:o,menuId:a}),Object(Ie.jsx)(s,{className:"m-top-4",parentId:t,nodes:r,getMenuComponent:i,depth:o+1,menuId:a})]})};Dr.propTypes={id:c.a.oneOfType([c.a.string,c.a.number]).isRequired,parentId:c.a.oneOfType([c.a.string,c.a.number]),menuId:c.a.oneOfType([c.a.string,c.a.number]).isRequired,children:c.a.arrayOf(c.a.any).isRequired,getMenuComponent:c.a.func.isRequired,depth:c.a.number.isRequired};Dr.defaultProps={children:[]};var kr=Dr;class Pr extends r.PureComponent{get classNames(){return Ae()("simple-menus-menu-tree",this.props.className,this.props.parentId&&"is--subtree")}renderNodes(){const e=this.props.getMenuComponent(!1);return this.props.nodes.map((t,n)=>Object(Ie.jsx)(e,Object.assign({parentId:this.props.parentId,getMenuComponent:this.props.getMenuComponent},t,{depth:this.props.depth,index:n,menuId:this.props.menuId}),t.id))}render(){return Object(Ie.jsx)("div",{className:this.classNames,children:this.renderNodes()})}}Pr.propTypes={parentId:c.a.oneOfType([c.a.string,c.a.number]),menuId:c.a.oneOfType([c.a.string,c.a.number]).isRequired,nodes:c.a.arrayOf(c.a.object),getMenuComponent:c.a.func.isRequired,depth:c.a.number.isRequired,className:c.a.string};var Rr=Pr;function Fr(){return function(e,t){return{nodes:[et(e,t)]}}}const Lr={};class Mr extends r.PureComponent{constructor(e){super(e);this.getMenuComponent=this.getMenuComponent.bind(this)}getMenuComponent(e){return e?Rr:kr}render(){return Object(Ie.jsx)(Rr,{nodes:this.props.nodes,getMenuComponent:this.getMenuComponent,depth:0,parentId:this.props.parentId,menuId:this.props.menuId})}}Mr.propTypes={parentId:c.a.oneOfType([c.a.string,c.a.number]),menuId:c.a.oneOfType([c.a.string,c.a.number]).isRequired,nodes:c.a.arrayOf(c.a.object)};var Br=Object(a.connect)(Fr,Lr)(Mr);const Ur={position:"fixed",pointerEvents:"none",zIndex:100,left:0,top:0,width:"100%",height:"100%"};class Vr extends r.PureComponent{constructor(e){super(e);this.getItemStyles=this.getItemStyles.bind(this)}getItemStyles(){const{currentOffset:e,item:t}=this.props;if(!e)return{display:"none"};const{x:n,y:r}=e,i=`translate(${n}px, ${r}px) translateZ(0)`;return{transform:i,WebkitTransform:i,maxWidth:t.width,willChange:"transform"}}render(){const{item:e,isDragging:t}=this.props;return t?Object(Ie.jsx)("div",{style:Ur,children:Object(Ie.jsx)("div",{style:this.getItemStyles(this.props),children:Object(Ie.jsx)(Br,{id:e.id,parentId:e.parentId,menuId:e.menuId})})}):null}}Vr.propTypes={item:c.a.object,currentOffset:c.a.shape({x:c.a.number.isRequired,y:c.a.number.isRequired}),isDragging:c.a.bool.isRequired};var Hr=Object(Ee.DragLayer)(e=>({item:e.getItem(),itemType:e.getItemType(),currentOffset:e.getSourceClientOffset(),isDragging:e.isDragging()}))(Vr),qr=n(2684);const Gr=e=>"simpleMenusLib.emptyState."+e,Wr=({addNode:e,readOnly:t})=>Object(Ie.jsxs)("div",{"data-test-id":"menus-empty-state",className:"simple-menus-menu-empty-state",children:[Object(Ie.jsx)("div",{className:"illustration",children:Object(Ie.jsx)(qr.a,{name:"empty-state-charts"})}),Object(Ie.jsxs)("div",{className:"content",children:[Object(Ie.jsx)("h4",{children:Object(Ie.jsx)(Xe.a,{message:Gr("header")})}),Object(Ie.jsx)("p",{children:Object(Ie.jsx)(Xe.a,{message:Gr("body")})}),Object(Ie.jsx)(Et.a,{"data-test-id":"add-menu-item-simple",disabled:t,onClick:e,use:"primary",children:Object(Ie.jsx)(Xe.a,{message:Gr("button")})})]})]});Wr.propTypes={addNode:c.a.func.isRequired,readOnly:c.a.bool};var zr=Wr;const $r=e=>"simpleMenusLib.components.addMenuButton."+e,Kr={addNodeToBottom:dt},Yr=[oe.NO_LINK,oe.PAGE_LINK,oe.PAGE_LINK_WITH_PARAMS,oe.URL_LINK];class Xr extends r.PureComponent{constructor(e){super(e);this.onPopoverChange=e=>{const{value:t}=e.target;this.setState({isOpen:t||!this.state.isOpen})};this.closePopover=()=>{this.setState({isOpen:!1})};this.handleNodeCreate=e=>{const{addNodeToBottom:t,menuId:n}=this.props;t(n,{type:e});xn.track("addMenuItem",{type:e,method:"button"});this.closePopover()};this.state={isOpen:!1}}renderBodyContent(){const e=Yr.map(e=>Object(Ie.jsx)(Et.a,{onClick:()=>this.handleNodeCreate(e),use:"unstyled",className:"simple-menus-menu-node-divider-option-button",children:Object(Ie.jsx)(Xe.a,{message:$r("actions."+e)})},e));return Object(Ie.jsx)(At.a,{className:"p-y-2",children:e})}render(){return Object(Ie.jsx)(on.a,{open:this.state.isOpen,onOpenChange:this.onPopoverChange,placement:"bottom",content:this.renderBodyContent(),closeOnOutsideClick:!0,children:Object(Ie.jsx)(Et.a,{onClick:this.onPopoverChange,use:"link",size:"small",children:Object(Ie.jsx)(Xe.a,{message:$r("label")})})})}}var Jr=Object(a.connect)(null,Kr)(Xr),Qr=n(468);class Zr extends r.Component{constructor(...e){super(...e);this.state={showErrorComponent:!1}}static getDerivedStateFromError(){return{showErrorComponent:!0}}componentDidCatch(e,t){if(window.newrelic&&window.newrelic.noticeError){const{componentStack:n}=t||{};window.newrelic.noticeError(e,{componentStack:n})}}render(){const{children:e,errorComponent:t}=this.props,{showErrorComponent:n}=this.state;return n?t:e}}Zr.propTypes={children:c.a.node,errorComponent:c.a.node};var ei=Zr,ti=n(604);const ni=e=>"simpleMenusLib.errorState."+e;var ri=()=>Object(Ie.jsx)("div",{"data-test-id":"menus-error-state",children:Object(Ie.jsx)(ti.a,{title:Object(Ie.jsx)(Xe.a,{message:ni("header")}),children:Object(Ie.jsx)("p",{children:Object(Ie.jsx)(Xe.a,{message:ni("body")})})})});function ii(){return e=>t=>Object(Ie.jsx)(ei,{errorComponent:Object(Ie.jsx)(ri,{}),children:Object(Ie.jsx)(e,Object.assign({},t))})}const oi=e=>{class t extends r.PureComponent{constructor(e){super(e);this.menuId=Object(o.uniqueId)("MenuId");this.getMenuId=this.getMenuId.bind(this)}getMenuId(){return this.props.menuId?this.props.menuId:this.menuId}render(){return Object(Ie.jsx)(e,Object.assign({},this.props,{menuId:this.getMenuId()}))}}t.propTypes={menuId:c.a.oneOfType([c.a.string,c.a.number])};return t};function ai(){return oi}function si(){const e=it(),t=tt(),n=rt();return function(r,i){return{completeTree:t(r,i),isDragging:un(r),maxDepth:n(r,i),menuDraftpages:e(r,i),tree:Ze(r,i)}}}const ci={loadMenuTree:st,moveNode:ct,addNode:ut,deleteTree:mt};class li extends r.PureComponent{constructor(e){super(e);this.addNode=this.addNode.bind(this);this.hasLoadedMenuTree=!1}componentDidMount(){const{loadMenuTree:e,menuDraftpages:t,onMenuHasDraftPages:n}=this.props;n&&n(t);e(this.props.menuData,this.props.menuId)}componentDidUpdate(e){const{menuDraftpages:t,onMenuHasDraftPages:n,completeTree:r,onTreeChange:i}=this.props;n&&e.menuDraftpages!==t&&n(t);this.hasLoadedMenuTree&&!Object(o.isEqual)(e.completeTree,r)?i(r):this.hasLoadedMenuTree=!0}get classNames(){return"simple-menus-menu"+(this.props.isDragging?" is--dragging":"")}addNode(){this.props.addNode(this.props.menuId)}render(){const{tree:e,moveNode:t,menuId:n,maxDepth:r,readOnly:i}=this.props;return e.length?Object(Ie.jsxs)(Qr.a,{className:this.classNames,children:[Object(Ie.jsx)(Hr,{}),Object(Ie.jsx)(Tr,{parentId:null,nodes:e,moveNode:t,menuId:n,maxDepth:r,readOnly:i}),!i&&Object(Ie.jsx)(Jr,{menuId:n})]}):Object(Ie.jsx)(zr,{addNode:this.addNode,readOnly:i})}}li.propTypes={tree:c.a.array.isRequired,loadMenuTree:c.a.func.isRequired,menuData:c.a.array.isRequired,menuDraftpages:c.a.array.isRequired,moveNode:c.a.func.isRequired,onMenuHasDraftPages:c.a.func,addNode:c.a.func.isRequired,completeTree:c.a.array.isRequired,onTreeChange:c.a.func.isRequired,menuId:c.a.oneOfType([c.a.string,c.a.number]).isRequired,maxDepth:c.a.number.isRequired,isDragging:c.a.bool,readOnly:c.a.bool};li.defaultProps={tree:[],menuData:[],completeTree:[],onTreeChange:_e.a};var ui=Object(_.compose)(ii(),ai(),Object(a.connect)(si,ci))(li),di=n(27);const pi=250;class hi extends r.Component{constructor(e){super(e);this.onChange=this.onChange.bind(this);this.debouncedOnChange=Object(o.debounce)(this.onChange,pi);this.SimpleMenusProvider=we({httpClient:e.httpClient})}onChange(e){const{readOnly:t,onFieldChange:n}=this.props;!t&&n&&n(e)}render(){const{readOnly:e,value:t=[]}=this.props,{SimpleMenusProvider:n}=this;return Object(Ie.jsx)(n,{auth:Object(di.userInfoSync)(),children:Object(Ie.jsx)(ui,{menuData:t,onTreeChange:this.debouncedOnChange,readOnly:e})})}}t.a=hi},function(e,t,n){"use strict";var r=n(40),i=n(59),o=n(27),a=n.n(o),s=n(2634),c=n(279),l=n(696),u=n(752),d=n(443),p=n(2734),h=n(2),m=n(485),f=n(2655),g=n(434),b=n(357),O=n(2712),y=n(24),j=n.n(y),v=n(517),C=n(282),x=n(4),E=e=>{const t=x.a.currencySymbols[e];return t?t.symbol_native:null},T=n(45);var S=({currencyCode:e,price:t,frequency:n})=>{const r=0===t?Object(T.jsxs)("span",{children:[E(e)," --"]}):Object(T.jsx)(v.a,{value:t,currencyCode:e,simplifyCurrency:!0});return n&&"ONE_TIME"!==n?Object(T.jsx)(C.a,{message:"paymentLinkSelect.recurringBillingTerms."+n,options:{price:r}}):r},I=n(283),w=n(2627);const _=e=>{if(!e)return null;const{intervalUnit:t,intervalLength:n}=e;if("DAYS"===t&&1===n)return"DAYS";if("MONTHS"===t&&1===n)return"MONTHS";if("MONTHS"===t&&3===n)return"QUARTERS";if("MONTHS"===t&&6===n)return"SIX_MONTHS";if("YEARS"===t&&1===n)return"YEARS";j.a.captureMessage("Unsupported recurring billing configuration",{level:"info",extra:{recurringBillingTerms:e}});return null};var N=({currencyCode:e,recurringSubtotals:t})=>{if(t.length>1)return Object(T.jsx)(c.a,{message:"paymentLinkSelect.recurringMessageSubtext.generalMultipleRecurringPaymentsMessage"});const n=t&&t[0],{subtotal:r,recurringBillingTerms:i}=n||{},{numPayments:o,initialPayment:a}=i||{};if("number"!=typeof r||!a||!a.type)return null;const s="FUTURE_START_DATE"===a.type,l="RELATIVE_START_DATE"===a.type&&a.relativeDelay,u=!o||s||l?o:o-1;if(0===u)return Object(T.jsx)(c.a,{message:"paymentLinkSelect.recurringMessageSubtext.noFuturePayments"});const d=s?"paymentLinkSelect.recurringMessageSubtext.recurringSubtotalWithFixedStartDate_jsx":l?`paymentLinkSelect.recurringMessageSubtext.recurringSubtotalWithRelativeStartDate.${a.relativeDelay.delayUnit}_jsx`:null==o?"paymentLinkSelect.recurringMessageSubtext.indefinitelyRecurringSubtotalMessage_jsx":"paymentLinkSelect.recurringMessageSubtext.recurringSubtotalMessage_jsx",p=Object(T.jsx)(w.a,{value:Number(a.futureStartDate),format:"L",type:"utc"});return Object(T.jsx)(I.a,{message:d,options:{priceProps:{currencyCode:e,price:r,frequency:_(i)},delayLength:l&&a.relativeDelay.delayLength,count:l?a.relativeDelay.delayLength:u,formattedDate:p},elements:{FormattedPrice:S}})},A=n(1),D=n.n(A),k=n(28);const P=()=>Object(k.getFullUrl)("app");function R(){return`${P()}/payment-links/${D.a.get()}`}const F=["dealCurrencyCode","paymentLinks","hiddenIds","placeholder","noResultsText"];function L({paymentLink:{id:e,name:t,subtotals:n}}){const{firstPaymentTotal:r,currencyCode:i,recurringSubtotals:o}=n||{},a=o&&o[0];return Object(T.jsx)(b.a,{title:t,"data-selenium":"payment-value-"+e,"data-test-id":"payment-link-header",useFlex:!0,fixedChildren:Object(T.jsxs)(g.a,{align:"center",style:{width:"auto"},children:[Object(T.jsx)("span",{className:"m-x-1",children:"|"}),Object(T.jsx)(S,{currencyCode:i,price:r}),a&&Object(T.jsx)(m.a,{className:"m-left-1",use:"help",children:Object(T.jsx)(b.a,{maxWidth:125,children:Object(T.jsx)(N,{currencyCode:i,recurringSubtotals:o})})})]}),children:t})}function M({option:e,children:t}){const{paymentLink:n}=e;return n?Object(T.jsx)(B,{paymentLink:n}):t}function B({paymentLink:e}){const{lineItems:t=[]}=e,n=t.map(e=>e.name).join(", ");return Object(T.jsxs)("div",{className:"m-x-5 p-y-2","data-selenium":"payment-option-"+e.id,children:[Object(T.jsx)(L,{paymentLink:e}),Object(T.jsx)("div",{children:Object(T.jsx)(b.a,{tooltip:n,children:Object(T.jsx)(m.a,{use:"help",children:n})})})]})}function U({option:e,children:t}){const{paymentLink:n}=e;return n?Object(T.jsx)(L,{paymentLink:n}):t}function V(e){let{dealCurrencyCode:t,paymentLinks:n,hiddenIds:r,placeholder:i,noResultsText:o}=e,a=Object(h.a)(e,F),s=[];const l="ON";try{s=n.filter(e=>t?e.state===l&&e.currency===t:e.state===l).map(e=>({value:e.id,text:e.name,paymentLink:e}));r&&r.length&&(s=s.filter(e=>!r.includes(e.value)))}catch(e){j.a.captureMessage("Bad paymentLinks prop, not in right format",{extra:{paymentLinks:n}})}return Object(T.jsx)(f.a,Object.assign({"data-selenium":"payment-link-select",options:s,filterOptions:H,optionComponent:M,valueComponent:U,noResultsText:o||Object(T.jsx)(c.a,{message:"paymentLinkSelect.noResults"}),placeholder:i||Object(T.jsx)(c.a,{message:"paymentLinkSelect.placeholder"}),minimumSearchCount:0,dropdownFooter:Object(T.jsx)(O.a,{href:R(),external:!0,children:Object(T.jsx)(c.a,{message:"paymentLinkSelect.goToPaymentLinks"})})},a))}function H(e,t){const n=t.toLowerCase();return e.filter(e=>{const{text:t,paymentLink:r}=e;return!(!t||!t.toLowerCase().includes(n))||!(!r||!Array.isArray(r.lineItems))&&r.lineItems.some(e=>e.name&&e.name.toLowerCase().includes(n))})}var q=V,G=n(2639),W=n(2808),z=n(1085),$=n(66),K=n(76),Y=n(456);const X="/payment-links/"+D.a.get();var J=n(2592),Q=n(1322),Z=n.n(Q);var ee=Object(J.a)({events:Z.a});let te;!function(e){e.embedPointsPageView="embedPointsPageView";e.embedPointsInteraction="embedPointsInteraction";e.paymentsInterstitialModalInteraction="paymentsInterstitialModalInteraction";e.paymentsInterstitialModalView="paymentsInterstitialModalView"}(te||(te={}));function ne(e,t){ee.track(e,t)}var re=n(2766),ie=n(717),oe=n(2735),ae=n(723),se=n(724),ce=n(751),le=n(2703),ue=n(2684);var de=({onClose:e,modalName:t,Body:n,Footer:r,illustrationName:i})=>{const o=i?900:800;return Object(T.jsxs)(re.a,{use:"conversational",width:o,children:[Object(T.jsx)(ie.a,{"data-test-id":"modal-close-button",onClick:e}),Object(T.jsxs)(g.a,{className:"p-all-10",children:[Object(T.jsxs)(oe.a,{children:[Object(T.jsx)(ae.a,{className:"text-left",children:Object(T.jsx)(le.a,{children:Object(T.jsx)(c.a,{message:`embedPoints.${t}.title`})})}),Object(T.jsx)(se.a,{className:"text-left",children:n}),Object(T.jsx)(ce.a,{children:r})]}),i&&Object(T.jsx)(oe.a,{alignSelf:"center",children:Object(T.jsx)(ue.a,{name:i,width:"350px"})})]})]})};let pe,he;!function(e){e.native="native";e.stripe="stripe"}(pe||(pe={}));!function(e){e.active="active"}(he||(he={}));var me=n(9),fe=n.n(me);D.a.get();const ge=()=>"/commerce/"+D.a.get();let be;!function(e){e.growthPaymentsPageView="growthPaymentsPageView";e.hubSpotApplicationFormInteraction="hubSpotApplicationFormInteraction";e.paymentSettingsInteraction="paymentSettingsInteraction";e.commerceSpecialistsInteraction="commerceSpecialistsInteraction";e.commerceSurveyInteraction="commerceSurveyInteraction"}(be||(be={}));var Oe=n(1323),ye=n.n(Oe),je=n(30),ve=n.n(je);const Ce=e=>{const t=new URLSearchParams(e.map(e=>["hubField",e+"ProductLevel"]));return ve.a.get(`iris-read/v1/app?${t.toString()}&portalId=${D.a.get()}`).then(e=>e.hub)};function xe(e){return"function"==typeof e}const Ee=[];class Te{constructor(e){this.setters=new Set;this.initialValue=e;this.value=e;this.get=this.get.bind(this);this.set=this.set.bind(this);Ee.push(this)}get(){return this.value}set(e){xe(e)?this.value=e(this.value):this.value=e;this.setters.forEach(e=>e(this.value))}subscribe(e){return this.setters.add(e)}cleanupForTesting(){this.value=this.initialValue}unsubscribe(e){return this.setters.delete(e)}}class Se extends Te{constructor(e){super(null);this.fetching=!1;this.error=null;this.fetcher=e;this.fetch=this.fetch.bind(this)}fetch(){if(this.fetching)return Promise.resolve(this.get());this.fetching=!0;this.error=null;return this.fetcher().then(e=>{super.set(e);return e}).catch(e=>{this.error=e;return null}).finally(()=>{this.fetching=!1})}set(){throw new Error("Can't set on a network binding")}}let Ie,we;!function(e){e.PRO="pro";e.NONE="none";e.ENTERPRISE="ent";e.STARTER="starter"}(Ie||(Ie={}));!function(e){e.marketing="marketing";e.sales="sales";e.service="service";e.cms="cms";e.ops="ops"}(we||(we={}));function _e(e){return[Object(r.useSyncExternalStore)(t=>{e.subscribe(t);return()=>e.unsubscribe(t)},e.get),e.set]}function Ne(e,t){const[n]=_e(e);Object(r.useEffect)(()=>{null!=n||e.fetching||e.fetch()},[e,e.fetching,n]);return[null!=n?n:t||null,e.fetch,e.fetching,e.error]}const Ae=e=>t=>Ne(e,t),De=Object.values(we),ke=[Ie.NONE,Ie.STARTER,Ie.PRO,Ie.ENTERPRISE];function Pe(e){const t=Object.values(e).reduce((e,t)=>{const n=ke.indexOf(t);return Math.max(n,e)},-1);return-1===t?void 0:ke[t]}function Re(e=De){return Ce(e).then(e=>Pe(e))}const Fe=new Se(Re),Le=(Ae(Fe),"GROWTH_PAYMENTS"+"_DEBUG");function Me(){if(fe.a.isProd())return!1;try{return"true"===localStorage.getItem(Le)}catch(e){}return!1}Me();const Be=()=>{};Me()&&console;const Ue=Object(J.a)({events:ye.a});Ue.clone({isBeforeUnload:!0});var Ve=Ue;function He(e,t){Ve.track(e,t)}const qe=()=>ve.a.get("monetization/v3/payments/eligible"),Ge=()=>ve.a.get("monetization/v3/payments/status"),We=Ae(new Se(()=>ve.a.get("payments/v1/payment-accounts/eligibility"))),ze=(Ae(new Se(qe)),Ae(new Se(Ge)));let $e,Ke,Ye,Xe,Je,Qe;!function(e){e.ELIGIBLE="ELIGIBLE";e.INELIGIBLE="INELIGIBLE";e.ACCOUNT_EXISTS="ACCOUNT_EXISTS"}($e||($e={}));!function(e){e.IN_KYC="IN_KYC";e.IN_UNDERWRITING="IN_UNDERWRITING";e.APPROVED="APPROVED";e.REJECTED="REJECTED"}(Ke||(Ke={}));!function(e){e.SETUP_REQUIRED="SETUP_REQUIRED";e.ENABLED="ENABLED";e.DISABLED="DISABLED";e.BLOCKED="BLOCKED"}(Ye||(Ye={}));!function(e){e.HS_PAYMENTS="HS_PAYMENTS";e.BYO_STRIPE="BYO_STRIPE";e.NONE="NONE"}(Xe||(Xe={}));!function(e){e.OAUTH="OAUTH";e.STRIPE_CUSTOM_CONNECT="STRIPE_CUSTOM_CONNECT";e.NONE="NONE"}(Je||(Je={}));!function(e){e[e.NOT_STARTED=0]="NOT_STARTED";e[e.COMPLETED_HUBSPOT=1]="COMPLETED_HUBSPOT";e[e.COMPLETED_STRIPE=2]="COMPLETED_STRIPE";e[e.DONE=3]="DONE"}(Qe||(Qe={}));function Ze(e){switch(e){case Ke.IN_KYC:return Qe.COMPLETED_HUBSPOT;case Ke.IN_UNDERWRITING:return Qe.COMPLETED_STRIPE;case Ke.APPROVED:case Ke.REJECTED:return Qe.DONE;default:return Qe.NOT_STARTED}}Qe.NOT_STARTED,Qe.COMPLETED_HUBSPOT,Qe.COMPLETED_STRIPE,Qe.DONE;function et(e){return void 0!==e&&e===Qe.DONE}function tt(){const[e]=We(),t=Boolean(e),n=e&&e.underwritingStatus;return Object(r.useMemo)(()=>{if(t)return Ze(n)},[t,n])}var nt;!function(e){e.applicationPending="applicationPending";e.applicationReviewed="applicationReviewed";e.paymentsActivated="paymentsActivated"}(nt||(nt={}));const rt=()=>{const e=tt(),[t,n]=ze(),[i,o]=Object(r.useState)(null);Object(r.useEffect)(()=>{t||n()},[t,n]);Object(r.useEffect)(()=>{if(void 0!==e&&t){const{isActivated:n}=t;n?o(nt.paymentsActivated):et(e)?o(nt.applicationReviewed):o(nt.applicationPending)}},[e,t]);return i},it=["page","location","children","use","onClick"];var ot=e=>{let{page:t,location:n="",children:i,use:o,onClick:a}=e,s=Object(h.a)(e,it);const l=rt(),u=Object(r.useCallback)(()=>({location:t,value:n,referrerUrl:document.referrer}),[t,n]),p=e=>{He(be.paymentSettingsInteraction,Object.assign({action:"goToZeroStateButtonClicked"},u()));a&&a(e)};return l?Object(T.jsx)(d.a,Object.assign({rel:"noopener","data-test-id":"go-to-payments-button-"+n,onClick:p,use:o||"tertiary",href:ge()},s,{children:i||Object(T.jsx)(c.a,{message:"growthPaymentsCore.goToPaymentsButton."+l})})):null};const at=["page","location"],st={SETUP_PAYMENTS_MESSAGE:"embedPoints.setupCta.setUpPayments",CONTINUE_SETUP_MESSAGE:"embedPoints.setupCta.continueSetup",GO_TO_COMMERCE_MESSAGE:"embedPoints.setupCta.gotoCommerceHome"},ct={[Ke.IN_KYC]:st.CONTINUE_SETUP_MESSAGE,[Ke.IN_UNDERWRITING]:st.GO_TO_COMMERCE_MESSAGE,[Ke.APPROVED]:st.GO_TO_COMMERCE_MESSAGE,[Ke.REJECTED]:st.GO_TO_COMMERCE_MESSAGE};var lt=e=>{let{page:t,location:n}=e,r=Object(h.a)(e,at);const[i]=We(),o=i&&i.underwritingStatus&&ct[i.underwritingStatus]||st.SETUP_PAYMENTS_MESSAGE;return Object(T.jsx)(ot,Object.assign({page:t,location:n},r,{children:Object(T.jsx)(c.a,{message:o})}))};var ut=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);function dt(e,t){if(e&&ut(e,t))return e[t]}const pt=new Se(()=>{D.a.get();return a()()}),ht=(pt.get,Ae(pt)),mt=()=>{const[e]=ht();return dt(e,"user")};function ft(e){const[t,n]=Object(r.useState)(()=>new Set(e));Object(r.useEffect)(()=>{n(new Set(e))},[e]);return t}let gt;!function(e){e.paymentsEligible="payments-eligible";e.paymentLinksRead="payment-links-read";e.paymentLinksWrite="payment-links-write";e.paymentLinksDelete="payment-links-delete";e.superAdmin="super-admin"}(gt||(gt={}));const bt=()=>ft(dt(mt(),"scopes"));var Ot=n(2654);const yt="payment-links-write";var jt=({onClose:e,page:t,location:n,ButtonPrimary:r=lt})=>{const i=bt().has(yt),o=Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)("p",{children:Object(T.jsx)(c.a,{message:"embedPoints.getPaidWithPaymentLinksModal.p1"})}),Object(T.jsxs)(Y.a,{styled:!0,children:[Object(T.jsx)(c.a,{message:"embedPoints.getPaidWithPaymentLinksModal.bullet1"}),Object(T.jsx)(c.a,{message:"embedPoints.getPaidWithPaymentLinksModal.bullet2"}),Object(T.jsx)(c.a,{message:"embedPoints.getPaidWithPaymentLinksModal.bullet3"})]}),Object(T.jsx)(c.a,{message:"embedPoints.getPaidWithPaymentLinksModal.p2"})]}),a=Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(r,{page:t,location:n,use:"primary"}),Object(T.jsx)(Ot.a,{placement:"right",disabled:i,title:Object(T.jsx)(c.a,{message:"embedPoints.tooltips.missingPermissions"}),children:Object(T.jsx)(d.a,{"data-test-id":"createTestPaymentLinkButton",use:"secondary",rel:"noopener",disabled:!i,external:!0,href:X,onClick:()=>ne(te.paymentsInterstitialModalInteraction,{action:"click",screen:t,value:"createTestPaymentLink"}),children:Object(T.jsx)(c.a,{message:"embedPoints.ctas.createPaymentLink"})})})]});return Object(T.jsx)(de,{onClose:e,modalName:"getPaidWithPaymentLinksModal",Body:o,Footer:a})};const vt=e=>"ContentComponents.cmv2.fields.payment."+e;function Ct(e){return{hasFetchedPaymentEligibility:z.a(e),isLoading:z.b(e),paymentEligibility:z.e(e),payments:z.g(e),paymentsFetchStatus:z.i(e)}}const xt={fetchPayments:W.c,fetchPaymentEligibility:W.b},Et=({trackFieldAction:e})=>{const t=()=>{e&&e("clicked-go-to-payments-button",{})};return Object(T.jsx)(d.a,{href:s.b.payments(),external:!0,use:"tertiary",onClick:t,children:Object(T.jsx)(c.a,{message:vt("goToPayments")})})},Tt=({trackFieldAction:e})=>{const[t,n]=Object(r.useState)(!1),i=()=>{e&&e("clicked-set-up-payments-button",{});n(!0)};return Object(T.jsxs)(T.Fragment,{children:[t&&Object(T.jsx)(jt,{onClose:()=>n(!1),page:"CMS"}),Object(T.jsx)(d.a,{onClick:i,size:"extra-small",use:"tertiary",children:Object(T.jsx)(c.a,{message:vt("preEnrollmentAlert.setUpPaymentsButton")})})]})},St=({trackFieldAction:e})=>{const t=()=>{e&&e("clicked-create-payment-link-button",{})};return Object(T.jsx)(d.a,{external:!0,href:s.b.paymentLinks(),onClick:t,size:"extra-small",use:"tertiary-light",children:Object(T.jsx)(c.a,{message:vt("preEnrollmentAlert.createPaymentLinkButton")})})},It=e=>{const{titleTextMsg:t,children:n}=e;return Object(T.jsx)(l.a,{titleText:Object(T.jsx)(c.a,{message:t}),className:"p-y-4 style-sidebar-alert-title","data-selenium":e["data-selenium"],children:Object(T.jsx)(u.a,{children:n})})},wt=({fetchPaymentEligibility:e,fetchPayments:t,hasFetchedPaymentEligibility:n,isLoading:i,error:a,onFieldChange:l,paymentEligibility:h,payments:m,paymentsFetchStatus:f,placeholder:g,required:b,readOnly:O,trackFieldAction:y,useOnDark:j,value:v})=>{Object(r.useEffect)(()=>{n||e()},[n,e]);Object(r.useEffect)(()=>{n&&h.status===K.a.ACCOUNT_EXISTS&&h.chargesEnabled&&f===$.UNINITIALIZED&&t()},[t,n,h.chargesEnabled,h.status,f]);const{openUpgradeModal:C}=Object(G.a)("payments-cms-module"),x=v&&v.id,E=f===$.SUCCEEDED&&!m.length;function S(e){const t=e.target.value,n=m.find(({id:e})=>e===Number(t));n&&y&&y("payment-field-payment-selected",{total:n.subtotals.firstPaymentTotal});l({id:t})}const I=Object(o.userInfoSync)().user.scopes.includes("payment-links-write"),{status:w,underwritingStatus:_}=h;if(i)return Object(T.jsx)(p.a,{layout:"centered",className:"p-y-3"});if(w===K.a.INELIGIBLE)return Object(T.jsxs)(It,{"data-selenium":"payment-field-ineligible-alert",titleTextMsg:vt("emptyNoPaymentsAccessAlert.title"),children:[Object(T.jsx)(c.a,{message:vt("emptyNoPaymentsAccessAlert.message")}),Object(T.jsx)(d.a,{onClick:C,size:"extra-small",use:"tertiary",children:Object(T.jsx)(c.a,{message:vt("upgrade")})})]});if(w===K.a.ELIGIBLE||_===K.b.IN_KYC)return Object(T.jsx)(It,{"data-selenium":"payment-field-pre-enrollment",titleTextMsg:vt("preEnrollmentAlert.title"),children:Object(T.jsxs)(u.a,{children:[Object(T.jsx)(Tt,{trackFieldAction:y}),Object(T.jsx)(St,{trackFieldAction:y})]})});if(_===K.b.IN_UNDERWRITING){const e=()=>{y&&y("clicked-go-to-payments-guide-button",{})};return Object(T.jsx)(It,{"data-selenium":"payment-field-pre-enrollment",titleTextMsg:vt("awaitingApprovalAlert.title"),children:Object(T.jsxs)(u.a,{children:[Object(T.jsx)(d.a,{external:!0,href:s.b.paymentsGuide(),onClick:e,size:"extra-small",use:"tertiary",children:Object(T.jsx)(c.a,{message:vt("awaitingApprovalAlert.goToPaymentGuide")})}),Object(T.jsx)(St,{trackFieldAction:y})]})})}return _===K.b.REJECTED?Object(T.jsx)(It,{"data-selenium":"payment-field-not-collecting-alert",titleTextMsg:vt("notCollectingPayments.title"),children:Object(T.jsx)(u.a,{children:Object(T.jsx)(Et,{trackFieldAction:y})})}):E&&!I?Object(T.jsx)(It,{"data-selenium":"payment-field-empty-no-read-alert",titleTextMsg:vt("emptyNoWriteAccessAlert.title"),children:Object(T.jsx)(c.a,{message:vt("emptyNoWriteAccessAlert.message")})}):E?Object(T.jsx)(It,{"data-selenium":"payment-field-empty-alert",titleTextMsg:vt("emptyAlert.title"),children:Object(T.jsxs)(u.a,{children:[Object(T.jsx)(c.a,{message:vt("emptyAlert.message")}),Object(T.jsx)(d.a,{external:!0,href:s.b.paymentLinks(),size:"extra-small",use:"tertiary",children:Object(T.jsx)(c.a,{message:vt("createPaymentLink")})})]})}):Object(T.jsx)(q,{buttonUse:j?"form-on-dark":"form",clearable:!b,error:a,placeholder:g,onChange:S,paymentLinks:m,readOnly:O,value:x})};t.a=Object(i.connect)(Ct,xt)(wt)},function(e,t,n){"use strict";var r=n(160),i=n(1147),o=n(2664),a=n(1179),s=n(2787),c=n(2697),l=n(40),u=n(59),d=n(2634),p=n(4),h=n(283),m=n(2655),f=n(2712),g=n(64),b=n(1049);const O=(...e)=>Object(b.a)(e).get("users/v2/app/hub-users"),y=(...e)=>Object(b.a)(e).get("notification-station/general/v1/notification-recipients");var j=n(68);const v=Object(g.b)(j.USERS_FETCH_USERS,y),C=()=>v(),x=Object(g.b)(j.USERS_FETCH_USERS_FOR_TEAMS,O);var E=n(2804),T=n(45);const S=e=>"ContentComponents.cmv2.fields.email."+e,I=e=>({options:E.b(e),users:E.c(e),isLoading:E.a(e)}),w={fetchUsers:C},_=Object(u.connect)(I,w);class N extends l.Component{constructor(e){super(e);this.onChange=this.onChange.bind(this);this.onOpenChange=this.onOpenChange.bind(this);this.checkForInvalidUsers=this.checkForInvalidUsers.bind(this);this.state={input:""}}componentDidMount(){const{options:e}=this.props;e.length?this.checkForInvalidUsers():this.props.fetchUsers()}componentDidUpdate(e){const{value:t=[],options:n}=this.props,{value:r,options:i}=e,o=t&&t.length&&r&&r.length&&r.length!==t.length,a=!i.length&&n.length;(o||a)&&this.checkForInvalidUsers()}checkForInvalidUsers(){const{value:e=[],setError:t,users:n}=this.props,r=e&&Array.isArray(e)&&e.find(e=>n[e]&&!n[e].canNotify);if(t){const e=Object(T.jsx)(h.a,{message:S("canNotNotify_jsx"),options:{href:d.b.settings("users")},elements:{Link:f.a}});t(r?e:null)}}onChange(e){const{onFieldChange:t}=this.props;t(e.target.value)}onOpenChange({target:{value:e}}){e&&this.props.fetchUsers()}renderOption({option:e,children:t}){return e.canNotify?Object(T.jsx)(l.Fragment,{children:t}):null}render(){const{allow_custom_email_addresses:e=!0,error:t=!1,value:n=[],readOnly:r=!1,required:i,options:o,isLoading:a,placeholder:s,useOnDark:c}=this.props,l=n&&n.asMutable?n.asMutable():n;return Object(T.jsx)(m.a,{allowCreate:e,anchorType:"button",buttonUse:c?"form-on-dark":"form",clearable:!i,error:t,isLoading:a,multi:!0,onChange:this.onChange,onOpenChange:this.onOpenChange,optionComponent:this.renderOption,options:o,placeholder:s||p.a.text(S("placeholder")),readOnly:r,value:l||[]})}}var A=_(N),D=n(1189),k=n(1205),P=n(1208),R=n(2788),F=n(1209),L=n(2665),M=n(2587),B=n(2666),U=n(2586),V=n(1314),H=n(282),q=n(279),G=n(2),W=n(73),z=n(55),$=n(298),K=n(67);const Y=["type","placeholder","loadOptions","required","useOnDark"],X=e=>"ContentComponents.cmv2.fields.baseResource."+e;class J extends l.PureComponent{constructor(e){super(e);this.state={isOpen:!1};this.loadOptions=this.loadOptions.bind(this);this.onOpenChange=this.onOpenChange.bind(this)}get callbackArgs(){return[null,{options:this.props.options,pagination:{hasMore:!1}}]}loadOptions(e="",t){const{loadOptions:n,onLoadingChange:r}=this.props;if(e.length)t(...this.callbackArgs);else{r(Object($.a)(!0));n(e,()=>{t(t(...this.callbackArgs));r(Object($.a)(!1))})}}onOpenChange(e){this.props.onOpenChange(e);const{target:{value:t}}=e;setTimeout(()=>{this.setState({isOpen:t})},0)}render(){const e=this.props,{type:t,placeholder:n,required:r,useOnDark:i}=e,o=Object(G.a)(e,Y),a=Object(W.pick)(o,Object.keys(m.a.propTypes)),s=n||Object(T.jsx)(H.a,{message:X("placeholder"),options:{type:Object(T.jsx)(q.a,{message:X("typeLabels."+t),options:{count:1}})}});let{value:c}=this.props;Object(K.d)(c)&&(c=void 0);return this.state.isOpen?Object(T.jsx)(m.a,Object.assign({},a,{"data-selenium":this.props["data-selenium"],buttonUse:i?"form-on-dark":"form",clearable:!r,placeholder:s,loadOptions:this.loadOptions,onOpenChange:this.onOpenChange,value:c})):Object(T.jsx)(m.a,Object.assign({},a,{"data-selenium":this.props["data-selenium"],buttonUse:i?"form-on-dark":"form",placeholder:s,onOpenChange:this.onOpenChange,value:c}))}}J.defaultProps={options:[],onLoadingChange:z.a,onOpenChange:z.a,required:!1};var Q=J,Z=n(1140),ee=n(2806),te=n(1077),ne=n(175);const re=e=>{switch(e){case ne.a.INTEGRATED_AND_DISABLED:case ne.a.USER_DISABLED:return"disabledMessage";case ne.a.REAUTHORIZE:case ne.a.AUTH_ERROR:case ne.a.DEPRECATED_AUTH_TOKEN:return"unauthorizedMessage";case ne.a.NOT_INTEGRATED:case ne.a.WARNING:case ne.a.ERROR:case ne.a.UNKNOWN_ERROR:case ne.a.THIRD_PARTY_AVAILABILITY_ERROR:return"notIntegratedMessage";case ne.a.DELAY:return"delayMessage";default:return null}},ie=e=>"ContentComponents.cmv2.fields.salesforcecampaign."+e,oe=(e,t)=>({options:te.c(e)||[],integrationStatus:te.d(e,t),isIntegrated:te.e(e,t)}),ae={fetchCampaign:ee.a,fetchCampaigns:ee.b,fetchIntegrationStatus:ee.c},se=Object(u.connect)(oe,ae);class ce extends l.Component{constructor(e){super(e);this.onFieldChange=this.onFieldChange.bind(this);this.onLoadingChange=this.onLoadingChange.bind(this);this.handleLoadOptions=this.handleLoadOptions.bind(this);this.state={isLoading:null}}componentDidMount(){const{fetchCampaign:e,fetchIntegrationStatus:t,value:n}=this.props;t().catch(e=>{throw e});n&&e(n).catch(e=>{throw e})}onFieldChange(e){this.props.onFieldChange(e.target.value)}onLoadingChange({target:{value:e}}){this.setState({isLoading:e})}handleLoadOptions(e,t){this.props.fetchCampaigns().then(t).catch(e=>{setTimeout(()=>{throw e})})}renderMessage(e){return Object(T.jsx)("div",{className:"salesforce-campaign-message",children:Object(T.jsx)(H.a,{message:ie(e+".label"),options:{link:Object(T.jsx)(f.a,{external:!0,href:d.b.salesforceCampaigns(),children:Object(T.jsx)(q.a,{message:ie(e+".link")})})}})})}renderEmptyMessage(){const{isLoading:e}=this.state,{isIntegrated:t,options:n}=this.props;if(!1===e&&t&&!n.length)return this.renderMessage("emptyMessage")}renderStatusMessage(){const{integrationStatus:e,isIntegrated:t}=this.props;return e?t?null:this.renderMessage(re(e)):Object(T.jsx)("div",{className:"m-bottom-4",children:Object(T.jsx)(q.a,{message:ie("loading.label")})})}renderCampaignSelect(){const{isIntegrated:e,options:t,readOnly:n,required:i,useOnDark:o,value:a}=this.props;return e?Object(T.jsx)(Q,{clearable:!i,disabled:n,loadOptions:this.handleLoadOptions,noResultsText:this.renderEmptyMessage(),onChange:this.onFieldChange,onLoadingChange:this.onLoadingChange,options:t,placeholder:p.a.text(ie("placeholder.label")),searchPromptText:this.renderEmptyMessage(),type:r.SFDC_CAMPAIGN,useOnDark:o,value:a}):null}render(){const{help_text:e,inline_help_text:t,label:n,required:r}=this.props;return Object(T.jsx)(Z.a,{helpText:e,inlineHelpText:t,label:n,required:r,children:Object(T.jsxs)("div",{children:[this.renderCampaignSelect(),this.renderStatusMessage()]})})}}var le=se(ce),ue=n(41),de=n.n(ue),pe=n(1),he=n.n(pe),me=n(1206),fe=n(281),ge=n(1059),be=n(1058),Oe=n(2758),ye=n(1312),je=n(696),ve=n(752),Ce=n(443),xe=n(724),Ee=n(717),Te=n(723),Se=n(751),Ie=n(2766),we=n(1316),_e=n(496),Ne=n(2684),Ae=n(456),De=n(27),ke=n.n(De);const Pe=["disableAdd","disableEdit","editTooltip","addTooltip","isClassicEmailSelected","moduleContainsFormField","readOnly","value"],Re=Object(ye.a)(r.FOLLOW_UP_EMAIL)(me.a),Fe=e=>"ContentComponents.cmv2.fields.followupEmail."+e;function Le(){const e=be.o(),t=be.n();return function(n,r){return{emails:be.i(n),options:be.h(n),optionsRequestStatus:be.j(n),defaultOptions:be.c(n),isValid:e(n,{id:r.value}),isClassicEmailSelected:t(n,{id:r.value})}}}const Me={fetchEmail:ge.d,fetchEmails:ge.f,clearCache:ge.a,saveCache:ge.h,createResource:ge.b};class Be extends l.Component{constructor(e){super(e);this.onChange=this.onChange.bind(this);this.onClear=this.onClear.bind(this);this.loadOptions=this.loadOptions.bind(this);this.setAccessRules=this.setAccessRules.bind(this);this.debouncedLoadOptions=Object(W.debounce)(this.loadOptions,Oe.c);this.state={accessRules:{},input:"",isLearnMoreModalOpen:!1}}componentDidMount(){this.props.value&&this.props.fetchEmail(this.props.value);this.setAccessRules()}componentDidUpdate(e){const{emails:t,error:n,fetchEmail:r,isValid:i,setError:o,value:a}=this.props,{isValid:s,value:c}=e;i!==s&&(i||!a||this.isDeprecated?n&&o(null):o(p.a.text(Fe("unpublishedErrorMessage"))));Object(W.isEqual)(c,a)||!a||t[a]||r(a)}get isDeprecated(){return!d.b.isUngated("ContextualAutomation:AllowSelectingLegacyEmails")}get emailIsSelected(){const{followupEmailEnabled:e,modulePath:t,value:n}=this.props;return"@hubspot/form"===t?n&&e:n}setAccessRules(){const e=Object(De.userInfoSync)().user.scopes,t={hasClassicEmail:e.includes("email-access"),hasEditorAccess:e.includes("email-editor-access"),hasWriteAccess:e.includes("email-write"),hasEmailDnd:e.includes("email-marketing-product-access")};this.setState({accessRules:t})}loadOptions(e,t,n={offset:0}){let r=n.offset;if(e!==this.state.input){this.setState({input:e});this.props.clearCache();r=0}const i={name__icontains:e,limit:Oe.f,offset:r};this.props.fetchEmails(i).then(e=>{const{total:n}=e;t(null,{options:this.props.options,pagination:{hasMore:n>this.props.options.length,offset:r+Oe.f,length:n}})}).catch(e=>{setTimeout(()=>{throw e})})}onChange({target:{value:e}}){this.props.onFieldChange(e)}onClear(){this.props.onFieldChange(null)}renderLearnMoreModal(){if(!this.state.isLearnMoreModalOpen)return null;const e=()=>this.setState({isLearnMoreModalOpen:!1});return Object(T.jsxs)(Ie.a,{use:"conversational",width:900,children:[Object(T.jsx)(Te.a,{children:Object(T.jsx)(Ee.a,{onClick:e})}),Object(T.jsx)(xe.a,{children:Object(T.jsx)(_e.a,{itemRight:Object(T.jsx)(Ne.a,{className:"p-x-7 p-top-7",name:"automated-testing"}),children:Object(T.jsxs)("div",{className:"text-left",children:[Object(T.jsx)(we.a,{children:Object(T.jsx)(q.a,{message:Fe("deprecatedAlert.learnMoreModal.header")})}),Object(T.jsx)("p",{children:Object(T.jsx)(q.a,{message:Fe("deprecatedAlert.learnMoreModal.body.opening")})}),Object(T.jsxs)(Ae.a,{styled:!0,children:[Object(T.jsx)(fe.a,{message:Fe("deprecatedAlert.learnMoreModal.body.listItem1")}),Object(T.jsx)(fe.a,{message:Fe("deprecatedAlert.learnMoreModal.body.listItem2")})]}),Object(T.jsx)("p",{children:Object(T.jsx)(h.a,{message:Fe("deprecatedAlert.learnMoreModal.body.lessonLink_jsx"),options:{href:d.b.academy("112/773/3929")},elements:{Link:f.a}})})]})})}),Object(T.jsx)(Se.a,{children:Object(T.jsx)(Ce.a,{use:"primary",onClick:e,children:Object(T.jsx)(q.a,{message:Fe("deprecatedAlert.learnMoreModal.confirmButton")})})})]})}renderDeprecatedAlert(){const{moduleContainsFormField:e,revealFormField:t}=this.props;return e?Object(T.jsx)(je.a,{className:"m-bottom-2",titleText:Object(T.jsx)(q.a,{message:Fe("deprecatedAlert.followupEmailInFormFieldEnabled.moduleContainsFormField.titleText")}),type:"warning",children:Object(T.jsx)("div",{children:t?Object(T.jsx)(h.a,{message:Fe("deprecatedAlert.followupEmailInFormFieldEnabled.moduleContainsFormField.message_jsx"),options:{onClick:()=>t()},elements:{Link:f.a}}):Object(T.jsx)(fe.a,{message:Fe("deprecatedAlert.followupEmailInFormFieldEnabled.moduleContainsFormField.message")})})}):Object(T.jsx)(je.a,{className:"m-bottom-2",titleText:Object(T.jsx)(q.a,{message:Fe("deprecatedAlert.followupEmailInFormFieldEnabled.moduleDoesNotContainFormField.titleText")}),type:"warning",children:Object(T.jsxs)(ve.a,{children:[Object(T.jsx)(H.a,{message:Fe("deprecatedAlert.followupEmailInFormFieldEnabled.moduleDoesNotContainFormField.message"),options:{formAutomation:Object(T.jsx)("b",{children:Object(T.jsx)(q.a,{message:Fe("deprecatedAlert.followupEmailInFormFieldEnabled.moduleDoesNotContainFormField.formAutomation")})}),learnMoreLink:Object(T.jsx)(f.a,{external:!0,href:"https://knowledge.hubspot.com/forms/set-up-and-style-forms-on-hubspot-pages#configure-your-form-automation",children:Object(T.jsx)(q.a,{message:Fe("deprecatedAlert.followupEmailInFormFieldEnabled.moduleDoesNotContainFormField.learnMore")})})}}),Object(T.jsx)(Ce.a,{onClick:this.onClear,size:"extra-small",use:"tertiary",children:Object(T.jsx)(q.a,{message:Fe("deprecatedAlert.followupEmailSelected.clearFollowupEmailButton")})})]})})}render(){const e=this.props,{disableAdd:t,disableEdit:n,editTooltip:r,addTooltip:i,isClassicEmailSelected:o,moduleContainsFormField:a,readOnly:s,value:c}=e,u=Object(G.a)(e,Pe),{accessRules:d}=this.state,p=this.isDeprecated&&a;if(!d.hasClassicEmail&&!d.hasEmailDnd||p)return null;if(this.isDeprecated)return Object(T.jsxs)(l.Fragment,{children:[this.renderDeprecatedAlert(),this.emailIsSelected&&Object(T.jsx)(me.a,Object.assign({},u,{loadOptions:this.debouncedLoadOptions,readOnly:!0,value:c}))]});let h=r,m=i,f=n,g=t;if(d.hasEditorAccess){if(!d.hasClassicEmail&&o){h=Object(T.jsx)(q.a,{message:Fe("noEmailClassicAccess")});f=!0}}else{h=Object(T.jsx)(q.a,{message:Fe("noReadAccess")});f=!0}if(!d.hasWriteAccess){m=Object(T.jsx)(q.a,{message:Fe("noWriteAccess")});g=!0}return Object(T.jsx)(Re,Object.assign({},u,{addTooltip:m,createResourceUrl:`/content/${he.a.get()}/create/email/all?emailType=FORM_FOLLOWUP_EMAIL`,disableAdd:g,disableEdit:f,editTooltip:h,loadOptions:this.debouncedLoadOptions,onChange:this.onChange,readOnly:s,value:c}))}}Be.propTypes={addTooltip:de.a.node,disableAdd:de.a.bool,disableEdit:de.a.bool,editTooltip:de.a.node,error:de.a.bool,followupEmailEnabled:de.a.bool,formId:de.a.string,moduleContainsFormField:de.a.bool,modulePath:de.a.string,onFieldChange:de.a.func.isRequired,readOnly:de.a.bool,required:de.a.bool.isRequired,revealFormField:de.a.func,setError:de.a.func,showFollowupEmail:de.a.bool,useOnDark:de.a.bool,value:de.a.oneOfType([de.a.number,de.a.string]),clearCache:de.a.func.isRequired,createResource:de.a.func.isRequired,defaultOptions:de.a.arrayOf(de.a.object).isRequired,emails:de.a.object.isRequired,fetchEmail:de.a.func.isRequired,fetchEmails:de.a.func.isRequired,isClassicEmailSelected:de.a.bool,isValid:de.a.bool,options:de.a.arrayOf(de.a.object).isRequired,saveCache:de.a.func.isRequired};Be.defaultProps={defaultOptions:[],disableAdd:!1,disableEdit:!1,error:!1,options:[],readOnly:!1,setError:z.a};var Ue=Object(u.connect)(Le,Me)(Be),Ve=n(287),He=n.n(Ve),qe=n(2679),Ge=n(1304),We=n(2688),ze=n(695),$e=n(1062),Ke=n(1063);const Ye=e=>e.find(({primaryBlogPost:e,primaryBlog:t})=>!(!e&&!t)),Xe=e=>e.includes("multi-domain-hosting");function Je(e){return e?e.toLowerCase().trim().replace(/(\s+)|(-+)/g,"-"):e}var Qe=n(2741),Ze=n(508),et=n(1305),tt=n(607),nt=n(2734),rt=n(2814),it=n(30),ot=n.n(it);function at(){ze.a.addAlert({titleText:Object(T.jsx)(q.a,{message:"ContentComponents.language.fetchContentSupportedLanguages.failed.title"}),message:Object(T.jsx)(q.a,{message:"ContentComponents.language.fetchContentSupportedLanguages.failed.message"}),type:"danger"});return[]}const st=Object(W.memoize)(()=>ot.a.get("cos-domains/v1/domain-setup-tasks/supported-languages").then(({objects:e})=>e.map(({tag:e})=>e)).catch(at));function ct(){const[e,t]=Object(l.useState)(!0),[n,r]=Object(l.useState)([]);Object(l.useEffect)(()=>{st().then(r).finally(()=>t(!1)).catch(e=>{setTimeout(()=>{throw e})})},[]);return{contentSupportedLanguages:n,isLoading:e}}var lt=ct;function ut(e){const{contentSupportedLanguages:t,isLoading:n}=lt();return Object(T.jsx)(rt.a,Object.assign({error:!n&&void 0,isLoading:n},e,{validLanguages:t}))}ut.propTypes=Object.assign({},Object(W.omit)(rt.a.PropTypes,"validLanguages"));var dt=n(1317),pt=n(1318),ht=n.n(pt),mt=n(10);const ft=(()=>{let e=null;const t=t=>{e=t},n=()=>{try{const e=Object(dt.a)("ContentUILib");t(e.clone({preserveTrackerProperties:!1,trackerName:"ContentUILib",events:ht.a}))}catch(e){mt.a.warn({message:"tracker is undefined in usage-tracker-container. Pass a value tracker via setPrimaryTracker(usageTracker, 'ContentUILib')",key:"CONTENT_UI_LIB_TRACKER_NOT_SET"})}};return{setLibraryTracker:t,resetLibraryTracker:()=>{e=null},getLibraryTracker:()=>{e||n();return e}}})(),gt=()=>{const e=ft.getLibraryTracker();return e?e.track:()=>{}};function bt(e,...t){return Object(b.a)(t).get("cos-domains/v1/permitted-domains/for-blog-settings",{query:e})}function Ot(e,...t){return Object(b.a)(t).get("/designmanager/v1/templates/paginated-usable-templates",{query:e})}var yt=n(36);const jt="ALL",vt="CUSTOM",Ct="HUBSPOT",xt="PURCHASED",Et="STARTER",Tt=Object.freeze({ALL:jt,CUSTOM:vt,HUBSPOT:Ct,PURCHASED:xt,STARTER:Et}),St="HUBSPOT",It="USED",wt="MARKETPLACE",_t="ALL",Nt="FAVORITED",At="RECENTLY_USED",Dt="HIDDEN",kt=(Object.freeze({USED:It,HUBSPOT:St,MARKETPLACE:wt}),Object.freeze({ALL_TEMPLATES:_t,FAVORITED:Nt,RECENTLY_USED:At,HIDDEN:Dt})),Pt="MOST_USED",Rt="ALPHABETICAL",Ft=Object.freeze({MOST_USED:Pt,ALPHABETICAL:Rt});var Lt=n(326);const Mt=["children","className","columns","columnSize","gutterSize"],Bt=(e,t)=>"string"==typeof e&&/%$/.test(e)?`calc(${e} - ${Object(Lt.m)(t)})`:"number"==typeof e?Object(Lt.m)(e):e,Ut=({columns:e,columnSize:t,gutterSize:n})=>{if(e)return`repeat(${e}, 1fr)`;return`repeat(auto-fit, minmax(${Bt(t,n)}, 1fr))`},Vt=({columns:e,columnSize:t,gutterSize:n})=>Object(Ve.css)(["flex-grow:",";flex-shrink:1;flex-basis:",";margin-bottom:0;margin-left:",";margin-right:0;margin-top:",";"],"string"==typeof t&&/%$/.test(t)?"0":"1",Bt(e?Math.floor(100/e)+"%":t,n),Object(Lt.m)(n),Object(Lt.m)(n)),Ht=He.a.div.withConfig({displayName:"UICardGrid__CardGrid",componentId:"g5e45o-0"})(["display:flex;flex-wrap:wrap;margin-bottom:0;margin-left:-",";margin-right:0;margin-top:-",";&& > *{",";}@supports (display:grid){display:flex;display:grid;grid-column-gap:",";grid-row-gap:",";grid-template-columns:",";margin:0;&& > *{margin:0;}}"],({gutterSize:e})=>Object(Lt.m)(e),({gutterSize:e})=>Object(Lt.m)(e),Vt,({gutterSize:e})=>Object(Lt.m)(e),({gutterSize:e})=>Object(Lt.m)(e),Ut),qt=He.a.div.withConfig({displayName:"UICardGrid__CardShim",componentId:"g5e45o-1"})(["",";&&{margin-top:0;}@supports (display:grid){display:none;}"],Vt);function Gt(e){let{children:t,className:n,columns:r,columnSize:i,gutterSize:o}=e,a=Object(G.a)(e,Mt);return Object(T.jsxs)(Ht,Object.assign({},a,{className:n,columnSize:i,gutterSize:o,columns:r,children:[t,Object(T.jsx)(qt,{columnSize:i,gutterSize:o,columns:r}),Object(T.jsx)(qt,{columnSize:i,gutterSize:o,columns:r}),Object(T.jsx)(qt,{columnSize:i,gutterSize:o,columns:r}),Object(T.jsx)(qt,{columnSize:i,gutterSize:o,columns:r}),Object(T.jsx)(qt,{columnSize:i,gutterSize:o,columns:r})]}))}Gt.propTypes={children:de.a.node,columns:de.a.number,columnSize:de.a.oneOfType([de.a.number,de.a.string]),gutterSize:de.a.number,expandToFill:de.a.bool};Gt.defaultProps={columnSize:295,gutterSize:32};Gt.displayName="UICardGrid";var Wt=n(690);const zt="theme",$t="template",Kt=Object.freeze({THEME:zt,TEMPLATE:$t});var Yt=n(1150);const Xt=He.a.div.withConfig({displayName:"UICardHero",componentId:"ygf9o3-0"})(["border-top-left-radius:inherit;border-top-right-radius:inherit;overflow:hidden;"]);Xt.displayName="UICardHero";var Jt=Xt,Qt=n(473),Zt=n(464),en=n(352),tn=n(506);const nn=e=>"ContentComponents.themes.assetCard."+e,rn=He()(Jt).withConfig({displayName:"AssetCard__SizedCardHero",componentId:"znlliw-0"})(["max-height:270px;height:270px;"]),on=He()(Yt.a).withConfig({displayName:"AssetCard__SelectableBox",componentId:"znlliw-1"})(["border:none !important;text-align:left;"]),an=({assetType:e,name:t,numberInstall:n,onClick:r,thumbnailUrl:i,selected:o})=>Object(T.jsx)(on,{selected:o,innerClassName:"text-left","data-test-id":`asset-card__${e}:${t}`,children:Object(T.jsxs)(Zt.a,{compact:!0,onClick:r,children:[Object(T.jsx)(rn,{children:i?Object(T.jsx)(tn.a,{src:i}):Object(T.jsxs)("div",{className:"text-center p-y-5",children:[Object(T.jsx)(Ne.a,{name:"empty-state-charts",width:200}),Object(T.jsx)("p",{className:"m-top-4",children:Object(T.jsx)(q.a,{message:nn("noPreview")})})]})}),Object(T.jsxs)(Qt.a,{className:"p-all-3",children:[Object(T.jsx)(en.a,{className:"m-bottom-2",children:t}),e===Kt.TEMPLATE&&(n||0===n)&&Object(T.jsx)(q.a,{message:nn("templateUsage"),options:{count:n}})]})]})});var sn=n(604),cn=n(605);const ln=e=>"ContentComponents.themes.emptyState."+e,un=({assetType:e,isError:t=!1})=>t?Object(T.jsx)(sn.a,{type:"badRequest",children:Object(T.jsx)(q.a,{message:ln("error")})}):Object(T.jsx)(sn.a,{illustration:"empty-state-charts",title:Object(T.jsx)(cn.a,{children:Object(T.jsx)(q.a,{message:ln("empty.title."+e)})}),children:Object(T.jsx)(q.a,{message:ln("empty.message")})});var dn=n(1210),pn=n(2745),hn=n(440),mn=n(441);const fn=e=>"ContentComponents.themes.filterBar."+e,gn=Object(dn.a)(pn.a),bn=({sortType:e,onSortingChange:t})=>Object(T.jsxs)(l.Fragment,{children:[Object(T.jsx)(q.a,{message:fn("sortLabel")}),Object(T.jsx)(m.a,{buttonUse:"link",className:"m-left-2",value:e,options:[{text:p.a.text(fn("sortTypes.mostUsed")),value:Ft.MOST_USED},{text:p.a.text(fn("sortTypes.alphabetical")),value:Ft.ALPHABETICAL}],onChange:t})]}),On=({placeholder:e,onChange:t,searchValue:n})=>Object(T.jsx)(gn,{placeholder:e,onChange:t,value:n}),yn=({searchInput:e,sortFilter:t,sourceFilter:n=null,templateFolderFilter:r=null})=>Object(T.jsxs)(hn.a,{className:"m-top-0",use:"filter-bar",children:[Object(T.jsxs)(mn.a,{children:[t,n,r]}),Object(T.jsx)(mn.a,{children:e})]}),jn=e=>"ContentComponents.themes.filterBar."+e,vn=({sourceFilter:e,onSourceFilterChange:t})=>Object(T.jsxs)(l.Fragment,{children:[Object(T.jsx)(q.a,{message:jn("sourceFilterLabel")}),Object(T.jsx)(m.a,{buttonUse:"link",className:"m-left-2",value:e,options:[{text:p.a.text(jn("sourceFilters.all")),value:Tt.ALL},{text:p.a.text(jn("sourceFilters.custom")),value:Tt.CUSTOM},{text:p.a.text(jn("sourceFilters.hubspot")),value:Tt.HUBSPOT},{text:p.a.text(jn("sourceFilters.purchased")),value:Tt.PURCHASED},{text:p.a.text(jn("sourceFilters.starter")),value:Tt.STARTER}],onChange:t,menuWidth:200})]}),Cn=({folderName:e,onFolderNameChange:t,templateFolders:n})=>{const r=n.filter(e=>e&&!e.includes("@hubspot/"));return Boolean(r.length)&&Object(T.jsxs)(l.Fragment,{children:[Object(T.jsx)(q.a,{message:jn("folderLabel")}),Object(T.jsx)(m.a,{buttonUse:"link",className:"m-left-2",value:e,options:[{text:p.a.text(jn("allFolders")),value:En},...r.map(e=>({text:e,value:e}))],onChange:t,menuWidth:200})]})},xn=({searchValue:e,sortType:t,sourceFilter:n,folderName:r,templateFolders:i,type:o,onSearchChange:a,onSortingChange:s,onSourceFilterChange:c,onFolderNameChange:l})=>{const u=Object.values(kt).includes(o);return Object(T.jsx)(yn,{searchInput:Object(T.jsx)(On,{placeholder:p.a.text(jn("searchPlaceholder.template")),onChange:a,searchValue:e}),sortFilter:Object(T.jsx)(bn,{sortType:t,onSortingChange:s}),sourceFilter:u?Object(T.jsx)(vn,{sourceFilter:n,onSourceFilterChange:c}):null,templateFolderFilter:u?Object(T.jsx)(Cn,{folderName:r,onFolderNameChange:l,templateFolders:i}):null})},En="root",Tn=(e,t)=>{const{search:n,templateTypeIds:r,themePath:i,page:o=1,folderName:a=En,sorting:s=Ft.MOST_USED,sourceFilter:c=Tt.ALL,type:l=kt.ALL_TEMPLATES,hasDndArea:u=null}=e;return{sorting:s,templateTypeIds:r,themePath:i,type:l===kt.ALL_TEMPLATES?null:l,folderName:a===En?null:a,sourceFilter:c===Tt.ALL?null:c,name:n,limit:t,offset:(o-1)*t,excludeUnusedInMemory:!i,hasDndArea:u}},Sn=({filters:e,limitPerPage:t})=>{const[n,r]=Object(l.useState)([]),[i,o]=Object(l.useState)([]),[a,s]=Object(l.useState)(0),[c,u]=Object(l.useState)(!1),[d,p]=Object(l.useState)(!1);Object(l.useEffect)(()=>{let n=!0;p(!1);u(!0);Ot(Tn(e,t)).then(({results:{objects:e,total:t},folders:i})=>{if(n){r(e);o(i);s(t);u(!1)}},()=>{if(n){p(!0);u(!1)}});return()=>{n=!1}},[e,t]);return{templates:n,templateCount:a,templateFolders:i,isLoading:c,isError:d}};(({selectedPath:e,filters:t,limitPerPage:n=20,onSelect:r,onPageChange:i,onSearchChange:o,onSortingChange:a,onSourceFilterChange:s,onFolderNameChange:c})=>{const{templates:u,templateCount:d,templateFolders:p,isLoading:h,isError:m}=Sn({filters:t,limitPerPage:n}),f=Kt.TEMPLATE,g=d>0?Math.ceil(d/n):0;return m?Object(T.jsx)(un,{assetType:f,isError:!0}):Object(T.jsxs)(l.Fragment,{children:[Object(T.jsx)(xn,{sortType:t.sorting,searchValue:t.search,sourceFilter:t.sourceFilter,folderName:t.folderName,templateFolders:p,type:t.type,onSearchChange:o,onSortingChange:a,onSourceFilterChange:s,onFolderNameChange:c}),h?Object(T.jsx)(nt.a,{grow:!0,layout:"centered",minHeight:300}):Object(T.jsxs)(l.Fragment,{children:[u.length?Object(T.jsx)(Gt,{columns:2,gutterSize:5,children:u.map((t,n)=>Object(T.jsx)(an,{assetType:f,name:t.displayName||t.label,numberInstall:t.categoryId===yt.c.blog_post.id?null:t.numberInstall,onClick:()=>r(t),selected:e===t.path,thumbnailUrl:t.screenshotPath},n))}):Object(T.jsx)(un,{assetType:f}),g>1&&Object(T.jsx)(Wt.a,{className:"m-top-6",pageCount:g,page:t.page,onPageChange:i})]})]})}).propTypes={selectedPath:de.a.string,filters:de.a.shape({folderName:de.a.string,page:de.a.number,search:de.a.string,sorting:de.a.oneOf(Object.keys(Ft)),sourceFilter:de.a.oneOf(Object.values(Tt)),type:de.a.oneOf(Object.values(kt)),templateTypeIds:de.a.arrayOf(de.a.number),themePath:de.a.string,hasDndArea:de.a.bool}),limitPerPage:de.a.number,onSelect:de.a.func.isRequired,onSearchChange:de.a.func,onSortingChange:de.a.func,onPageChange:de.a.func,onSourceFilterChange:de.a.func,onFolderNameChange:de.a.func};var In=n(1144);const wn={BLOG_POST:41,BLOG_LISTING:42,LEGACY_BLOG:6},_n="@hubspot/growth",Nn=(e,t)=>t.find(t=>t.templateType===e),An=e=>Ot(Tn({themePath:e,templateTypeIds:Object.values(wn)},10)).then(({results:{objects:e}})=>{const t=Nn(wn.LEGACY_BLOG,e),n=Nn(wn.BLOG_POST,e)||t,r=Nn(wn.BLOG_LISTING,e)||t;return r&&n?{blogTemplate:n,blogListingTemplate:r}:Promise.reject(new Error("Required templates not found"))}),Dn=()=>Object(In.f)().then(e=>e.activeThemePath).then(e=>e?An(e).catch(()=>An(_n)):An(_n)).catch(()=>An(_n)),kn=()=>bt({}).then(e=>{const t=e.objects,n=Ye(t);return n?n.domain:void 0}),Pn=()=>Promise.all([kn(),ke()(),Dn()]).then(([e,t,n])=>{const r=t&&t.user.lang_enabled?t.user.locale:"en",i=t&&t.user.scopes||[];return{domain:e,blogTemplate:n.blogTemplate.path,blogListingTemplate:n.blogListingTemplate.path,defaultLanguage:r,scopes:i}}),Rn=()=>{const[e,t]=Object(l.useState)({domain:void 0,blogTemplate:void 0,blogListingTemplate:void 0,defaultLanguage:void 0,scopes:[]}),[n,r]=Object(l.useState)(!0);Object(l.useEffect)(()=>{r(!0);Pn().then(e=>{t(e);r(!1)}).catch(()=>{r(!1)})},[]);return{requiredData:e,isLoading:n}};var Fn=n(1064);const Ln=["onBlogCreateSuccess","onBlogCreateFail","onCancel"],Mn=()=>{},Bn=({name:e,language:t,hasMultiLangBlogAccess:n,metaDescription:r})=>!e||!(!n||n&&t)||!r,Un=({name:e,onNameChange:t})=>{const n=Object(l.useCallback)(({target:{value:e}})=>t(e),[t]);return Object(T.jsx)(Qe.a,{label:Object(T.jsx)(q.a,{message:"ContentComponents.blogCreationModal.blogName"}),required:!0,children:Object(T.jsx)(Ze.a,{value:e,onChange:n})})},Vn=({language:e,hasMultiLangBlogAccess:t,onLanguageChange:n})=>{const r=Object(l.useCallback)(({target:{value:e}})=>n(e),[n]);return t?Object(T.jsx)(Qe.a,{label:Object(T.jsx)(q.a,{message:"ContentComponents.blogCreationModal.blogLanguage"}),required:!0,children:Object(T.jsx)(ut,{value:e,placeholder:Object(T.jsx)(q.a,{message:"ContentComponents.blogCreationModal.selectBlogLanguage"}),onChange:r})}):null},Hn=({metaDescription:e,onMetaDescriptionChange:t})=>{const n=Object(l.useCallback)(({target:{value:e}})=>t(e),[t]);return Object(T.jsx)(Qe.a,{label:Object(T.jsx)(q.a,{message:"ContentComponents.blogCreationModal.blogMetaDescription"}),required:!0,children:Object(T.jsx)(Ze.a,{value:e,onChange:n})})},qn=({hasRequiredData:e,isRequiredDataLoading:t,children:n})=>t?Object(T.jsx)(xe.a,{className:"m-y-3",children:Object(T.jsx)(nt.a,{grow:!0})}):e?n:Object(T.jsx)(xe.a,{children:Object(T.jsx)(q.a,{message:"ContentComponents.blogCreationModal.requiredDataError"})}),Gn=({onCancel:e,isBlogCreateLoading:t,onCreate:n,metaDescription:r,onMetaDescriptionChange:i,hasMultiLangBlogAccess:o,onLanguageChange:a,language:s,name:c,onNameChange:l,hasRequiredData:u,isRequiredDataLoading:p,modalProps:h})=>Object(T.jsxs)(Ie.a,Object.assign({width:700},h,{children:[Object(T.jsxs)(Te.a,{children:[Object(T.jsx)(Ee.a,{onClick:e}),Object(T.jsx)(tt.a,{children:Object(T.jsx)(q.a,{message:"ContentComponents.blogCreationModal.createBlog"})})]}),Object(T.jsxs)(qn,{hasRequiredData:u,isRequiredDataLoading:p,children:[Object(T.jsxs)(xe.a,{children:[Object(T.jsx)(Un,{name:c,onNameChange:l}),Object(T.jsx)(Vn,{hasMultiLangBlogAccess:o,onLanguageChange:a,language:s}),Object(T.jsx)(Hn,{metaDescription:r,onMetaDescriptionChange:i})]}),Object(T.jsxs)(Se.a,{children:[Object(T.jsx)(et.a,{use:"primary",onClick:n,loading:t,disabled:Bn({name:c,language:s,hasMultiLangBlogAccess:o,metaDescription:r}),children:Object(T.jsx)(q.a,{message:"ContentComponents.blogCreationModal.create"})}),Object(T.jsx)(Ce.a,{onClick:e,disabled:t,children:Object(T.jsx)(q.a,{message:"ContentComponents.blogCreationModal.cancel"})}),Object(T.jsx)(f.a,{href:d.b.siteImporter(),children:Object(T.jsx)(q.a,{message:"ContentComponents.blogCreationModal.import"})})]})]})]})),Wn=(e,t)=>{const[n,r]=Object(l.useState)(!1);return{isLoading:n,create:Object(l.useCallback)((n,i)=>{r(!0);Fn.a(n).then(e=>Fn.b(e.id,i).then(t=>({blog:e,blogPost:t}))).then(({blog:t,blogPost:n})=>{r(!1);e(t,n)}).catch(e=>{r(!1);t(e)})},[t,e])}},zn=e=>({message:p.a.text("ContentComponents.blogCreationModal.errors.default.message"),titleText:p.a.text("ContentComponents.blogCreationModal.errors.default.title"),type:"danger"}),$n=e=>{let{onBlogCreateSuccess:t=Mn,onBlogCreateFail:n=Mn,onCancel:r}=e,i=Object(G.a)(e,Ln);const{isLoading:o,requiredData:{domain:a,blogTemplate:s,blogListingTemplate:c,defaultLanguage:u,scopes:d}}=Rn(),h=Boolean(a)&&Boolean(c)&&Boolean(s)&&Boolean(u),m=gt(),f=Object(l.useCallback)(e=>{n(e);ze.a.addAlert(zn(e))},[n]),{isLoading:g,create:b}=Wn(t,f),[O,y]=Object(l.useState)(""),[j,v]=Object(l.useState)(""),[C,x]=Object(l.useState)(""),E=C||u,S=Object(l.useMemo)(()=>Xe(d),[d]),I=Object(l.useMemo)(()=>{const e=O.trim();return{name:e,domain:a,language:E,slug:Je(e),itemTemplatePath:s,listingTemplatePath:c,htmlTitle:e,description:j}},[O,s,c,j,a,E]),w=Object(l.useMemo)(()=>({language:E,name:p.a.text("ContentComponents.blogCreationModal.defaultPostTitle")}),[E]),_=Object(l.useCallback)(()=>{b(I,w);m("blogQuickCreateModalClickedCreate")},[I,b,w,m]);Object(l.useEffect)(()=>{m("blogQuickCreateModalOpened")},[m]);return Object(T.jsx)(Gn,{hasMultiLangBlogAccess:!0,isEnterprise:S,isRequiredDataLoading:o,hasRequiredData:h,isBlogCreateLoading:g,language:E,onLanguageChange:x,name:O,metaDescription:j,onNameChange:y,onMetaDescriptionChange:v,onCancel:r,onCreate:_,shouldRenderImportLink:!0,modalProps:i})};$n.propTypes={onBlogCreateSuccess:de.a.func,onBlogCreateFail:de.a.func,onCancel:de.a.func};var Kn=n(66),Yn=n(69),Xn=e=>{let t=0;for(let n=0;n<e.length;n++){t=(t<<5)-t+e.charCodeAt(n);t|=0}return t};const Jn=["defaultBlogId","defaultOptions","readOnly","required","scopes","showCreationOption","type","value","isCreationOptionLocked","options"],Qn=e=>"ContentComponents.cmv2.fields.blog."+e,Zn=e=>"SharedI18nStrings.languageNames."+e,er=He.a.div.withConfig({displayName:"Blog__HelpTextWrapper",componentId:"sc-157n46x-0"})(["line-height:12px;"]),tr=e=>""+Xn(e.reduce((e,t)=>`${e}${e&&"."}${t&&t.value||null}`,"")),nr=(e,t)=>({blog:$e.a(e,{id:t.value}),blogsCache:$e.e(e),options:$e.d(e),optionsRequestStatus:$e.f(e),defaultOptions:$e.i(e),defaultBlogId:$e.h(e),defaultBlogFetchStatus:$e.g(e)}),rr={fetchBlog:Ke.c,fetchBlogs:Ke.d,fetchDefaultBlog:Ke.e,saveCache:Ke.f,clearCache:Ke.a,succeedCreateBlog:Ke.g,failCreateBlog:Ke.b},ir=Object(u.connect)(nr,rr);class or extends l.Component{constructor(e){super(e);this.blogOptionsWithLanguage=Object(W.memoize)(e=>e.map(e=>{const{value:t}=e;return Object.assign({},e,{help:this.renderBlogLanguage(t)})}).sort((e,t)=>{const n=this.getBlogLanguage(e.value),r=this.getBlogLanguage(t.value);return e.text.localeCompare(t.text)||n.localeCompare(r)}),e=>tr(e));this.onChange=this.onChange.bind(this);this.loadOptions=this.loadOptions.bind(this);this.handleCancelCreate=this.handleCancelCreate.bind(this);this.handleCreateBlogClick=this.handleCreateBlogClick.bind(this);this.handleCreateBlogSuccess=this.handleCreateBlogSuccess.bind(this);this.debouncedLoadOptions=Object(W.debounce)(this.loadOptions,Oe.c);this.state={alertStore:ze.a.newFloatingAlertStore(),input:"",blogCreationModalOpen:!1}}componentDidMount(){const{fetchBlog:e,fetchDefaultBlog:t,value:n}=this.props;n&&(n===Yn.a?t():e(n))}componentDidUpdate(e){const{blog:t,fetchBlog:n,fetchDefaultBlog:r,value:i,defaultBlogId:o,defaultBlogFetchStatus:a}=this.props,{value:s}=e,{defaultBlogFetchStatus:c}=e;Object(W.isEqual)(s,i)||t||(i!==Yn.a||o?n(i):r());c===Kn.PENDING&&a===Kn.SUCCEEDED&&n(o)}loadOptions(e,t,n={offset:0}){const{clearCache:r,fetchBlogs:i}=this.props;let o=n.offset;if(e!==this.state.input){this.setState({input:e});r();o=0}i({name__icontains:e,limit:Oe.f,offset:o}).then(e=>{const{total:n}=e;t(null,{options:this.blogOptionsWithLanguage(this.props.options),pagination:{hasMore:n>this.props.options.length,offset:o+Oe.f,length:n}})}).catch(e=>{setTimeout(()=>{throw e})})}onChange(e){const{onChange:t,onFieldChange:n=z.a}=this.props;t?t(e):n(e.target.value)}handleCancelCreate(){this.setState({blogCreationModalOpen:!1})}handleCreateBlogClick(){const{onClickCreateBlog:e=z.a,onClickCreateBlogWithLimitReached:t=z.a,isBlogLimitReached:n}=this.props;if(n)t();else{e();this.setState({blogCreationModalOpen:!0})}}handleCreateBlogSuccess(e){this.props.succeedCreateBlog(e);this.onChange({target:{value:e.id}});this.setState({blogCreationModalOpen:!1})}getBlogLanguage(e){const{blogsCache:t={}}=this.props,n=t[e];return n&&n.language?n.language:""}renderBlogLanguage(e){const{blogsCache:t={}}=this.props,n=t[e];if(!n||!n.language)return null;const r=!n.translatedFromId&&Object.keys(n.translations).length;return Object(T.jsxs)(er,{children:[Object(T.jsx)(qe.a,{className:"m-right-1",name:"language",size:12}),r?Object(T.jsx)(H.a,{message:Qn("primaryLanguageVariant"),options:{language:Object(T.jsx)(q.a,{message:Zn(n.language)})}}):Object(T.jsx)(q.a,{message:Zn(n.language)})]})}render(){const e=this.props,{defaultBlogId:t,defaultOptions:n,readOnly:i,required:o=!1,scopes:a,showCreationOption:s=!1,type:c=r.BLOG,value:u,isCreationOptionLocked:d=!1,options:p}=e,h=Object(G.a)(e,Jn);let m=u;u===Yn.a&&(m=t);return Object(T.jsxs)(l.Fragment,{children:[Object(T.jsx)(We.a,{alertStore:this.state.alertStore}),Object(T.jsx)(me.a,Object.assign({"data-selenium":"blog-select",dropdownFooter:s?Object(T.jsxs)(Ce.a,{onClick:this.handleCreateBlogClick,use:"link",children:[Object(T.jsx)(q.a,{message:Qn("createBlogButtonText")}),d&&Object(T.jsx)(Ge.a,{})]}):null,clearable:!o,loadOptions:this.debouncedLoadOptions,onChange:this.onChange,readOnly:i,type:c},h,{defaultOptions:n,options:this.blogOptionsWithLanguage(p),value:m})),s&&this.state.blogCreationModalOpen?Object(T.jsx)($n,{onBlogCreateSuccess:this.handleCreateBlogSuccess,onCancel:this.handleCancelCreate,scopes:a}):null]})}}or.defaultProps={required:!1,showCreationOption:!1,isCreationOptionLocked:!1,isBlogLimitReached:!1};var ar=ir(or),sr=n(357),cr=n(485),lr=n(2654),ur=n(2800),dr=n(1057);const pr=["readOnly","required","extraOptions","defaultOptions","type"];function hr(e){return{options:dr.e(e),pages:dr.f(e),defaultOptions:dr.a(e),optionsRequestStatus:dr.h(e)}}const mr={fetchPage:ur.b,fetchPages:ur.c,saveCache:ur.d,clearCache:ur.a},fr=Object(u.connect)(hr,mr);class gr extends l.Component{constructor(e){super(e);this.onChange=this.onChange.bind(this);this.loadOptions=this.loadOptions.bind(this);this.renderOption=this.renderOption.bind(this);this.debouncedLoadOptions=Object(W.debounce)(this.loadOptions,Oe.c);this.state={input:""}}componentDidMount(){const{fetchPage:e,value:t}=this.props;t&&e(t).catch(e=>{throw e})}componentDidUpdate(e){const{fetchPage:t,pages:n,value:r}=this.props,{value:i}=e;Object(W.isEqual)(i,r)||n[r]||t(r).catch(e=>{throw e})}loadOptions(e,t,n={offset:0}){let r=n.offset;if(e!==this.state.input){this.setState({input:e});this.props.clearCache();r=0}const i={name:e,limit:Oe.f,offset:r};this.props.fetchPages(i).then(e=>{const{total:n}=e;t(null,{options:this.props.options,pagination:{hasMore:n>this.props.options.length,offset:r+Oe.f,length:n}})}).catch(e=>{setTimeout(()=>{throw e})})}onChange(e){const{onChange:t,onFieldChange:n=z.a}=this.props;t?t(e):n(e.target.value)}renderOption(e){const{disabled:t,dropdownText:n,text:r,help:i}=e,o=Object(T.jsxs)("div",{title:r,className:"m-x-4 p-y-2",children:[Object(T.jsx)("div",{children:Object(T.jsx)(sr.a,{tooltip:!t,children:r||n})}),Object(T.jsx)(sr.a,{tooltip:!t,children:Object(T.jsx)(cr.a,{children:i})})]});return e.disabled?Object(T.jsx)(lr.a,{title:Object(T.jsx)(q.a,{message:"ContentComponents.cmv2.fields.page.disabledTooltip"}),children:o}):o}render(){const e=this.props,{readOnly:t,required:n=!1,extraOptions:i=[],defaultOptions:o=[],type:a=r.PAGE}=e,s=Object(G.a)(e,pr),c=o.concat(i);return Object(T.jsx)(me.a,Object.assign({"data-selenium":"page-select",clearable:!n,defaultOptions:c,loadOptions:this.debouncedLoadOptions,onChange:this.onChange,optionRenderer:this.renderOption,optionRendererIgnoresSpecialOptions:!0,readOnly:t,type:a},s))}}var br=fr(gr),Or=n(2605),yr=n(490),jr=n(458),vr=n(2632),Cr=n(77),xr=n(2807),Er=n(1078);const Tr=e=>"ContentComponents.cmv2.fields.survey."+e,Sr=(e,t)=>Object.keys(e[t]||{}).map(n=>{const r=e[t][n];return{value:r.id,text:r.name||p.a.text(Tr("options."+t))}}),Ir=e=>{const t=Er.d(e)||{},n=Er.e(e);return{defaultOptions:{[Cr.a.CES]:Sr(t,Cr.a.CES)},surveys:t,surveysCache:n,options:{[Cr.a.CES]:Sr(n,Cr.a.CES)},optionsRequestStatus:Er.f(e)}},wr={fetchSurvey:xr.b,fetchSurveys:xr.c,clearCache:xr.a,saveCache:xr.d,updateSurveyState:xr.e},_r=Object(u.connect)(Ir,wr);class Nr extends l.Component{constructor(e){super(e);this.loadOptions=this.loadOptions.bind(this);this.loadSurvey=this.loadSurvey.bind(this);this.onSurveyChange=this.onSurveyChange.bind(this);this.onChangeSurveyState=this.onChangeSurveyState.bind(this);this.onConfirmChangeSurveyState=this.onConfirmChangeSurveyState.bind(this);this.debouncedLoadOptions=Object(W.debounce)(this.loadOptions,Oe.c);this.state={surveyType:Cr.a.CES,showConfirmStateUpdateModal:!1,nextSurveyState:!1}}componentDidMount(){const{surveyType:e}=this.state;this.value.id&&this.loadSurvey(e,this.value.id).catch(e=>{throw e});this.loadSurveys(e).catch(e=>{throw e})}get value(){const{value:{id:e,survey_type:t}={}}=this.props;return{id:e,survey_type:t}}loadSurvey(e,t){return this.props.fetchSurvey(e,t)}loadSurveys(e,t=1){const n={pageSize:Oe.f,surveyType:e,pageNumber:t};return this.props.fetchSurveys(n)}loadOptions(e,t,n={offset:0}){const{surveyType:r}=this.state,i=Math.floor((n.offset||0)/Oe.f)+1;this.loadSurveys(r,i).then(e=>{const{total:n}=e,{options:o}=this.props;t(null,{options:o[r],pagination:{hasMore:n>o[r].length,pageNumber:i+1,length:n}})}).catch(e=>{throw e})}onSurveyChange({target:{value:e}}){const{surveysCache:t}=this.props,{surveyType:n}=this.state,r=t[n][e],i={id:r.id,survey_type:r.surveyType};this.props.onFieldChange(i)}onChangeSurveyState({target:{checked:e}}){this.setState({nextSurveyState:e,showConfirmStateUpdateModal:!0})}onConfirmChangeSurveyState(){const{onFieldChange:e,updateSurveyState:t}=this.props,{nextSurveyState:n,surveyType:r}=this.state;t(n,r,this.value.id).then(()=>{e(this.value)}).catch(e=>{throw e});this.setState({nextSurveyState:!1,showConfirmStateUpdateModal:!1})}maybeRenderConfirmationModal(){const{nextSurveyState:e,showConfirmStateUpdateModal:t}=this.state,n="confirmModal."+(e?"enable":"disable");return t&&Object(T.jsx)(vr.a,{confirmLabel:Object(T.jsx)(q.a,{message:Tr(n+".confirmLabel")}),confirmUse:e?"primary":"danger",description:Object(T.jsx)(q.a,{message:Tr(n+".description")}),message:Object(T.jsx)(q.a,{message:Tr(n+".message")}),size:"auto",use:e?"success":"danger",onConfirm:this.onConfirmChangeSurveyState,onReject:()=>{this.setState({nextSurveyState:!1,showConfirmStateUpdateModal:!1})},rejectLabel:Object(T.jsx)(q.a,{message:Tr("confirmModal.rejectLabel")}),rejectUse:e?"secondary":"tertiary-light"})}maybeRenderSurveyToggle(){const{surveysCache:e}=this.props,{surveyType:t}=this.state,n=e[t],r=this.value.id&&n&&n[this.value.id];return this.value.id&&r?Object(T.jsxs)("div",{className:"m-top-2 align-center",children:[Object(T.jsxs)("div",{children:[Object(T.jsx)(yr.a,{htmlFor:"surveyToggle",children:Object(T.jsx)(q.a,{message:Tr("enabledToggle")})}),Object(T.jsx)(jr.a,{checked:r.enabled,id:"surveyToggle",onChange:this.onChangeSurveyState,size:"xs"})]}),Object(T.jsx)(f.a,{className:"m-left-4 m-top-1",external:!0,href:d.b.surveyEditor(t,this.value.id),children:Object(T.jsx)(q.a,{message:Tr("manage")})})]}):null}render(){const{defaultOptions:e,options:t,readOnly:n=!1,saveCache:r}=this.props,{surveyType:i}=this.state;return Object(T.jsxs)("div",{children:[Object(T.jsx)(me.a,Object.assign({},this.props,{"data-selenium":"survey-select",defaultOptions:e[i],loadOptions:this.debouncedLoadOptions,options:t[i],onChange:this.onSurveyChange,readOnly:n,saveCache:Object(W.partial)(r,i),type:"survey",value:this.value.id})),this.maybeRenderSurveyToggle(),this.maybeRenderConfirmationModal()]})}}var Ar=_r(Nr),Dr=n(2802),kr=n(2801),Pr=n(72),Rr=n(2687),Fr=n(434);const Lr=["host","menu","readOnly","defaultOptions","draftStatePages","options","pagesRequestCompleted","required","type","value"],Mr=Object(ye.a)(r.MENU)(me.a),Br=e=>"ContentComponents.cmv2.fields.menuSelect."+e,Ur=(e,t)=>({menu:kr.d(e,{id:t.value}),options:kr.g(e),optionsRequestStatus:kr.h(e),defaultOptions:kr.b(e),draftStatePages:kr.c(e,{id:t.value}),allMenuPages:kr.a(e,{id:t.value}),pagesRequestCompleted:kr.i(e)}),Vr={fetchMenu:Dr.c,fetchMenus:Dr.d,saveCache:Dr.e,clearCache:Dr.a,createResource:Dr.b,fetchPages:ur.c},Hr=Object(u.connect)(Ur,Vr);class qr extends l.Component{constructor(e){super(e);this.onChange=this.onChange.bind(this);this.loadOptions=this.loadOptions.bind(this);this.onCreateMenu=this.onCreateMenu.bind(this);this.onOpenMenu=this.onOpenMenu.bind(this);this.renderSelectValue=this.renderSelectValue.bind(this);this.debouncedLoadOptions=Object(W.debounce)(this.loadOptions,Oe.c);this.state={input:""}}componentDidMount(){this.props.value&&this.props.fetchMenu(this.props.value).catch(e=>{throw e})}componentDidUpdate(e){const{fetchMenu:t,menu:n,value:r,fetchPages:i,allMenuPages:o}=this.props,{value:a,menu:s}=e;Object(W.isEqual)(a,r)||n||t(r).catch(e=>{throw e});if(!Object(W.isEqual)(n,s)&&n&&o){const e=o.filter(e=>e.page_id).map(e=>e.page_id);i({limit:e.length,id:e.join(",")}).catch(e=>{throw e})}}trackEvent(e){const{trackFieldAction:t}=this.props;t&&t(e)}onChange(e){const{onFieldChange:t=z.a}=this.props;t(e.target.value);this.trackEvent("menu-select-changed")}onOpenMenu(){const{value:e,host:t=""}=this.props,n=d.b.advancedMenuSettings(e);window.open(`${t}${n}?source=${d.b.getCurrentApp()}`);this.trackEvent("menu-edit-clicked")}onCreateMenu(e,{onConflictError:t,onCreateModalClose:n}){this.props.createResource(e).then(e=>{if(e&&e.status===Pr.a){t();return}const r=e&&e.id;if(r){this.props.saveCache(r);this.onChange({target:{value:r}});this.props.fetchMenu(r).catch(e=>{throw e});this.onOpenMenu();n();this.trackEvent("menu-create-clicked")}}).catch(e=>{setTimeout(()=>{throw e})})}loadOptions(e,t,n={offset:0}){let r=n.offset;if(e!==this.state.input){this.setState({input:e});this.props.clearCache();r=0}const i={order:"name",name__icontains:e,limit:Oe.f,offset:r};this.props.fetchMenus(i).then(e=>{const{options:n=[]}=this.props,{total:i}=e;t(null,{options:n,pagination:{hasMore:i>n.length,offset:r+Oe.f,length:i}})}).catch(e=>{setTimeout(()=>{throw e})})}renderSelectValue(e){const{draftStatePages:t}=this.props,n=e.text||e.value||e.buttonText;return Object(T.jsxs)(Fr.a,{align:"center",children:[n,!!t.length&&Object(T.jsx)("span",{children:Object(T.jsx)(Rr.a,{className:"m-left-2",use:"warning",children:Object(T.jsx)(q.a,{message:Br("containsDraft")})})})]})}render(){const e=this.props,{host:t="",menu:n,readOnly:i,defaultOptions:o=[],draftStatePages:a,options:s=[],pagesRequestCompleted:c,required:u,type:p=r.MENU,value:h}=e,m=Object(G.a)(e,Lr);let g=h;n?g=n.id:"string"==typeof h&&(g="");return Object(T.jsxs)(l.Fragment,{children:[!!a.length&&c&&Object(T.jsxs)(je.a,{titleText:Object(T.jsx)(q.a,{message:Br("alertHeader")}),className:"m-bottom-2 p-bottom-4",type:"warning",children:[Object(T.jsx)(q.a,{message:Br("alertBody")}),Object(T.jsx)(Ae.a,{styled:!0,className:"p-2",children:a.map(e=>{const{content_type:t,label:n,page_id:r,page_title:i}=e;return Object(T.jsx)(f.a,{href:d.b.menuDraftPageLink(t,r),children:n||i},`${r}-${n}`)})})]}),Object(T.jsx)(Mr,Object.assign({},m,{clearable:!u,defaultOptions:o,external:!0,loadOptions:this.debouncedLoadOptions,onChange:this.onChange,onCreateResource:this.onCreateMenu,onEditResource:this.onOpenMenu,options:s,readOnly:i,type:p,value:g,valueRenderer:this.renderSelectValue}))]})}}var Gr=Hr(qr),Wr=n(2803),zr=n(1061),$r=n(174);const Kr=["readOnly","required","defaultOptions","cache","value","tag_value","type"],Yr=e=>"SharedI18nStrings.languageNames."+e,Xr=He.a.div.withConfig({displayName:"TagSelect__HelpTextWrapper",componentId:"sc-16uj06d-0"})(["line-height:12px;"]),Jr=e=>""+Xn(e.reduce((e,t)=>`${e}${e&&"."}${t&&t.value||null}`,"")),Qr=()=>{const e=zr.h();return(t,n)=>{const r=n.tag_value;return{options:zr.d(t,{tagValue:r}),optionsRequestStatus:zr.g(t),defaultOptions:e(t,{tagValue:r}),cache:zr.f(t),tags:zr.e(t)}}},Zr={fetchTag:Wr.b,fetchTags:Wr.c,saveCache:Wr.d,clearCache:Wr.a},ei=Object(u.connect)(Qr,Zr);class ti extends l.Component{constructor(e){super(e);this.tagOptionsWithLanguage=Object(W.memoize)(e=>{const{tag_value:t}=this.props;return e.map(e=>{const{language:n}=e;return Object.assign({},e,{help:t===$r.ALL||t===$r.ID?this.renderTagLanguage(n):null})})},e=>Jr(e));this.onChange=this.onChange.bind(this);this.saveCache=this.saveCache.bind(this);this.loadOptions=this.loadOptions.bind(this);this.debouncedLoadOptions=Object(W.debounce)(this.loadOptions,Oe.c);this.state={input:""}}componentDidMount(){const{fetchTag:e,value:t,tag_value:n}=this.props;e(t,n).catch(e=>{throw e})}componentDidUpdate(e){const{onFieldChange:t=z.a,tag_value:n,tags:r,value:i}=this.props,{tag_value:o}=e;if(n!==o&&i&&i===e.value){let e=null;o===$r.ID&&(e=r.byId[i]);o===$r.NAME&&(e=r.byName[i]);o===$r.ALL&&(e=r.byId[i.id]);o===$r.SLUG&&(e=r.bySlug[i]);const n=e&&this.getTagFieldValue(e);n&&t(n)}}getTag(e){const{cache:t,tag_value:n}=this.props;let r=null;n!==$r.ID&&n!==$r.ALL||(r=t.byId[e]);n===$r.NAME&&(r=t.byName[e]);n===$r.SLUG&&(r=t.bySlug[e]);return r}getTagFieldValue(e){const{tag_value:t}=this.props;let n=null;if(!e)return null;if(t!==$r.ALL)n=e&&e[t.toLowerCase()];else{const{id:t,name:r,slug:i}=e;n={id:t,name:r,slug:i}}return n}renderTagLanguage(e){return e?Object(T.jsxs)(Xr,{children:[Object(T.jsx)(qe.a,{className:"m-right-1",name:"language",size:12}),Object(T.jsx)(q.a,{message:Yr(e)})]}):null}loadOptions(e,t,n={offset:0}){let r=n.offset;if(e!==this.state.input){this.setState({input:e});this.props.clearCache();r=0}const i={q:e,limit:Oe.f,offset:r};this.props.fetchTags(i).then(e=>{const{total:n}=e,{cache:i}=this.props;t(null,{options:this.tagOptionsWithLanguage(this.props.options),pagination:{hasMore:n>Object.keys(i.byId).length,offset:r+Oe.f,length:n}})}).catch(e=>{setTimeout(()=>{throw e})})}onChange({target:{value:e}}){const{onFieldChange:t=z.a}=this.props,n=this.getTag(e);t(this.getTagFieldValue(n))}saveCache(e){const{saveCache:t,tag_value:n}=this.props;t(e,n)}render(){const e=this.props,{readOnly:t,required:n,defaultOptions:i=[],value:o,tag_value:a,type:s=r.TAG}=e,c=Object(G.a)(e,Kr);return Object(T.jsx)(me.a,Object.assign({},c,{"data-selenium":"tag-select",defaultOptions:i,clearable:!n,loadOptions:this.debouncedLoadOptions,onChange:this.onChange,readOnly:t,saveCache:this.saveCache,type:s,value:a===$r.ALL&&o?o.id:o}))}}var ni=ei(ti),ri=n(1074),ii=n(1054);const oi=e=>"ContentComponents.cmv2.fields.workflow."+e,ai=e=>({options:Object(ii.g)(e)||[]}),si={fetchWorkflow:ri.b},ci=Object(u.connect)(ai,si);class li extends l.Component{constructor(e){super(e);this.onClearWorkflow=this.onClearWorkflow.bind(this)}componentDidMount(){this.props.value&&this.props.fetchWorkflow(this.props.value)}onClearWorkflow(){this.props.onFieldChange(null)}renderIsDeprecatedAlert(){const{value:e}=this.props;return Object(T.jsx)(je.a,{className:"m-bottom-2","data-selenium":"workflow-field-deprecated-alert",titleText:Object(T.jsx)(q.a,{message:oi("deprecatedAlert.titleText")}),type:"warning",children:Object(T.jsxs)(ve.a,{children:[Object(T.jsx)(h.a,{message:oi("deprecatedAlert.message_jsx"),elements:{Link:f.a},options:{href:"https://community.hubspot.com/t5/Blog-Website-Page-Publishing/New-workflow-attach-functionality/m-p/466547#M5146"}}),e&&Object(T.jsx)(Ce.a,{onClick:this.onClearWorkflow,size:"extra-small",use:"tertiary",children:Object(T.jsx)(q.a,{message:oi("deprecatedAlert.clearWorkflowButton")})})]})})}render(){const{value:e}=this.props;return Object(T.jsxs)(l.Fragment,{children:[this.renderIsDeprecatedAlert(),e&&Object(T.jsx)(Q,Object.assign({},this.props,{disabled:!0,loadOptions:()=>{}}))]})}}var ui=ci(li),di=n(1129),pi=n(2805),hi=n(1075);const mi=["meeting","readOnly","required","value"],fi=(e,t)=>({defaultOptions:Object(hi.a)(e),meeting:Object(hi.b)(e,{link:t.value}),options:Object(hi.f)(e),optionsRequestStatus:Object(hi.e)(e),users:Object(E.c)(e)}),gi={clearCache:pi.a,fetchMeeting:pi.b,fetchMeetings:pi.c,fetchUsers:x,saveCache:pi.d},bi=Object(u.connect)(fi,gi),Oi=e=>"ContentComponents."+e;class yi extends l.Component{constructor(e){super(e);const{user:t}=Object(De.userInfoSync)();this.hasPersonalCreateAccess=t.scopes.includes("meetings-personal-link-create");this.hasTeamCreateAccess=t.scopes.includes("meetings-team-link-create");this.userId=t.user_id;this.hasUniversalEditAccess=t.scopes.includes("meetings-edit-all-links");this.onChange=this.onChange.bind(this);this.handleLoadOptions=this.handleLoadOptions.bind(this);this.handleCreateMeeting=this.handleCreateMeeting.bind(this);this.handleEditMeeting=this.handleEditMeeting.bind(this);this.state={hasMore:!0,input:""}}componentDidMount(){const{fetchMeeting:e,fetchUsers:t,value:n}=this.props;n&&"string"==typeof n&&e(n).catch(e=>{throw e});t().catch(e=>{throw e})}componentDidUpdate(e){const{fetchMeeting:t,meeting:n,value:r}=this.props,{value:i}=e;!r||Object(W.isEqual)(i,r)||n||t(r).catch(e=>{throw e})}onChange({target:{value:e}}){const{fetchMeeting:t,onFieldChange:n}=this.props;t(e).catch(e=>{throw e});n(e)}handleLoadOptions(e,t,n={after:""}){let r=n.after;if(e!==this.state.input){this.props.clearCache();this.setState({hasMore:!0,input:e});r=""}const i={after:r,limit:Oe.f,search:e};this.props.fetchMeetings(i).then(e=>{const{paging:n}=e;n&&n.next||this.setState({hasMore:!1});t(null,{options:this.props.options||[],pagination:{after:this.state.hasMore&&n.next.after,hasMore:this.state.hasMore}})}).catch(e=>{setTimeout(()=>{throw e})})}handleCreateMeeting(){window.open(d.b.createMeeting())}handleEditMeeting(){const{meeting:e}=this.props,{id:t,portalId:n}=e;window.open(d.b.editMeeting(n,t))}renderCreateMeetingButton(){const{hasTeamCreateAccess:e,hasPersonalCreateAccess:t}=this,{readOnly:n}=this.props;return t||e?Object(T.jsx)(Ce.a,{className:"m-left-2",size:"xs",disabled:n,"data-test-id":"create-meeting-button",onClick:this.handleCreateMeeting,children:Object(T.jsx)(q.a,{message:Oi("buttons.create")})}):null}render(){const e=this.props,{meeting:t,readOnly:n,required:r,value:i}=e,o=Object(G.a)(e,mi),a=i&&t&&(this.hasUniversalEditAccess||t.userId===this.userId);return Object(T.jsxs)("div",{children:[Object(T.jsx)(me.a,Object.assign({clearable:!r,loadOptions:this.handleLoadOptions,onChange:this.onChange,readOnly:n,value:i},o)),Object(T.jsxs)(Fr.a,{className:"m-top-2",children:[Object(T.jsx)(Ce.a,{use:"tertiary-light","data-test-id":"edit-meeting-button",className:"m-left-0",size:"xs",disabled:!a,onClick:this.handleEditMeeting,children:Object(T.jsx)(q.a,{message:Oi("buttons.edit")})}),this.renderCreateMeetingButton()]})]})}}var ji=bi(yi),vi=n(2597),Ci=n(2789),xi=n(2667),Ei=n(1328),Ti=n(1329),Si=n(2698),Ii=n(2699),wi=n(1331),_i=n(2641),Ni=n(1335),Ai=n(1336),Di=n(1337),ki=n(1338),Pi=n(1339),Ri=n(2588);const Fi=["aac","m4a","mp3"];var Li=e=>{const t=Object(l.useRef)(null),n=t=>{t?e.onFieldChange({file_id:t.id,file_url:t.url,file_extension:t.extension,file_duration:null,title:t.title}):e.onFieldChange({file_id:null,file_url:null,file_extension:null,file_duration:null,title:null})},r=()=>{t.current&&t.current.duration&&e.onFieldChange(Object.assign({},e.value,{file_duration:Math.floor(1e3*t.current.duration)}))},i=t=>{t.target.value!==e.value.title&&e.onFieldChange(Object.assign({},e.value,{title:t.target.value}))},o=()=>e.value.file_url?Object(T.jsx)("audio",{ref:t,className:"m-top-4 width-100",controls:!0,src:e.value.file_url,onLoadedMetadata:r}):null,a=()=>e.value.file_url?Object(T.jsx)(Qe.a,{label:Object(T.jsx)(q.a,{message:"ContentComponents.cmv2.fields.audio.title.label"}),children:Object(T.jsx)(Ze.a,{defaultValue:e.value.title||"",onBlur:i,use:"on-dark"})}):null;return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(D.a,{label:Object(T.jsx)(q.a,{message:"ContentComponents.cmv2.fields.audio.file.label"}),picker:"audio",returnType:"file",filterType:"SUPPORTED",filteredExtensions:Fi,value:e.value.file_url||"",onFieldChange:n}),o(),a()]})},Mi=n(2581),Bi=n(324),Ui=n(1195);const Vi=()=>{const e={hs_published_at__not_null:!0,limit:500,sort:"hs_name"};return ot.a.get("podcasts/v1/episodes",{query:e})},Hi=()=>{const e={limit:500,sort:"hs_name"};return ot.a.get("podcasts/v1/shows",{query:e})},qi=Object(g.b)(j.PODCAST_EPISODES_FETCH,Vi),Gi=Object(g.b)(j.PODCAST_SHOWS_FETCH,Hi);var Wi=n(65),zi=n(28);const $i=e=>e.resources.podcasts.podcasts.episodes,Ki=e=>e.resources.podcasts.podcasts.shows,Yi=Object(Wi.a)([Ki],e=>e&&e.length),Xi=Object(Wi.a)([$i],e=>e&&e.length),Ji=e=>e.resources.podcasts.episodesFetchStatus,Qi=e=>e.resources.podcasts.showsFetchStatus,Zi=Object(Wi.a)([$i,Ki],(e,t)=>e&&t?t.map(t=>{const n=e.filter(e=>e.hs_group_id===t.hs_id);return{text:t.hs_name,value:t.hs_id,options:n.map(e=>({text:e.hs_name,value:e.hs_id,imageUrl:e.hs_image.url}))}}):null),eo=()=>Object(zi.getFullUrl)("app")+"/podcasts-static/img/image-placeholder.png",to=Object(Wi.a)([Ki],e=>e?e.map(e=>{var t;return{text:e.hs_name,value:e.hs_id,imageUrl:null!==(t=e.hs_image.url)&&void 0!==t?t:eo()}}):null),no=["children","option"],ro=["option"],io=["entity_type"],oo=He.a.div.withConfig({displayName:"Podcast__EpisodeImageWrapper",componentId:"kk9sx4-0"})(["margin-right:12px;width:32px;height:32px;background:",";"],Bi.GYPSUM),ao=e=>{let{children:t,option:n}=e,r=Object(G.a)(e,no);return n.group?Object(T.jsx)("span",Object.assign({},r,{children:Object(T.jsxs)("div",{className:"flex-row align-center p-y-2 p-left-3",children:[Object(T.jsx)(oo,{children:n.imageUrl&&Object(T.jsx)(tn.a,{src:n.imageUrl})}),n.text]})})):Object(T.jsx)("span",Object.assign({},r,{children:t}))},so=e=>{let{option:t}=e,n=Object(G.a)(e,ro);return Object(T.jsx)("span",Object.assign({},n,{children:Object(T.jsxs)("div",{className:"flex-row align-center p-y-2 p-left-3",children:[Object(T.jsx)(oo,{children:Object(T.jsx)(tn.a,{src:t.imageUrl})}),t.text]})}))},co=(...e)=>{},lo=({value:e,onFieldChange:t,trackFieldAction:n=co})=>{const r=Object(u.useDispatch)(),i=Object(u.useSelector)(Zi),o=Object(u.useSelector)($i),a=Object(u.useSelector)(Yi),s=Object(u.useSelector)(Xi),c=Object(u.useSelector)(Ji),h=Object(u.useSelector)(Qi),g=Object(Ui.a)("podcasts-read"),b=Object(Ui.a)("podcasts-write");Object(l.useEffect)(()=>{r(qi()).catch(console.error);r(Gi()).catch(console.error)},[r]);const O=({target:{value:e}})=>{const r=o.find(t=>t.hs_id===Number(e));t({episode_id:Number(e),show_id:r?r.hs_group_id:void 0});n("select-episode")},y=c===Kn.PENDING||h===Kn.PENDING,j=c===Kn.FAILED||h===Kn.FAILED,v=Object(d.h)(null)+"?source=episode-module";return g?j?Object(T.jsx)(je.a,{type:"warning",children:Object(T.jsx)(q.a,{message:"ContentComponents.cmv2.fields.podcast.fetchFailed"})}):0===a?Object(T.jsxs)(je.a,{type:"info",children:[Object(T.jsx)(q.a,{message:"ContentComponents.cmv2.fields.podcast.zeroShows"})," ",Object(T.jsx)(f.a,{href:v,external:!0,"data-test-id":"create-podcast-show",onClick:()=>n("click-create-show"),children:Object(T.jsx)(q.a,{message:"ContentComponents.cmv2.fields.podcast.createShow"})})]}):0===s?Object(T.jsxs)(je.a,{type:"info",children:[Object(T.jsx)(q.a,{message:"ContentComponents.cmv2.fields.podcast.zeroEpisodes"})," ",Object(T.jsx)(f.a,{href:v,external:!0,"data-test-id":"create-podcast-episode",onClick:()=>n("click-create-first-episode"),children:Object(T.jsx)(q.a,{message:"ContentComponents.cmv2.fields.podcast.episodeSelect.createNewEpisode"})})]}):Object(T.jsxs)(T.Fragment,{children:[i&&Object(T.jsx)(m.a,{buttonUse:"form-on-dark",dropdownFooter:b?Object(T.jsx)(f.a,{href:v,external:!0,onClick:()=>n("click-create-episode"),children:Object(T.jsx)(q.a,{message:"ContentComponents.cmv2.fields.podcast.episodeSelect.createNewEpisode"})}):null,optionComponent:ao,options:i,onChange:O,placeholder:p.a.text("ContentComponents.cmv2.fields.podcast.episodeSelect.placeholder"),searchPlaceholder:p.a.text("ContentComponents.cmv2.fields.podcast.episodeSelect.searchPlaceholder"),value:e?e.episode_id:null,"data-test-id":"podcast-episode-select"}),y&&Object(T.jsx)(nt.a,{layout:"centered"})]}):Object(T.jsx)(je.a,{type:"warning",children:Object(T.jsx)(q.a,{message:"ContentComponents.cmv2.fields.podcast.missingScope"})})},uo=({value:e,onFieldChange:t,trackFieldAction:n=co})=>{const r=Object(u.useDispatch)(),i=Object(u.useSelector)(Yi),o=Object(u.useSelector)(Qi),a=Object(Ui.a)("podcasts-read"),s=Object(Ui.a)("podcasts-write"),c=Object(u.useSelector)(to);Object(l.useEffect)(()=>{r(Gi()).catch(console.error)},[r]);const h=({target:{value:e}})=>{t({show_id:Number(e)});n("select-show")},g=o===Kn.PENDING,b=o===Kn.FAILED,O=Object(d.h)(null)+"?source=show-module";return a?b?Object(T.jsx)(je.a,{type:"warning",children:Object(T.jsx)(q.a,{message:"ContentComponents.cmv2.fields.podcast.fetchFailed"})}):0===i?Object(T.jsxs)(je.a,{type:"info",children:[Object(T.jsx)(q.a,{message:"ContentComponents.cmv2.fields.podcast.zeroShows"})," ",Object(T.jsx)(f.a,{href:O,external:!0,"data-test-id":"create-podcast-show",onClick:()=>n("click-create-show"),children:Object(T.jsx)(q.a,{message:"ContentComponents.cmv2.fields.podcast.createShow"})})]}):Object(T.jsxs)(T.Fragment,{children:[c&&Object(T.jsx)(m.a,{buttonUse:"form-on-dark",dropdownFooter:s?Object(T.jsx)(f.a,{href:O,external:!0,onClick:()=>n("click-create-episode"),children:Object(T.jsx)(q.a,{message:"ContentComponents.cmv2.fields.podcast.showSelect.createNewShow"})}):null,optionComponent:so,options:c,onChange:h,placeholder:p.a.text("ContentComponents.cmv2.fields.podcast.showSelect.placeholder"),searchPlaceholder:p.a.text("ContentComponents.cmv2.fields.podcast.showSelect.searchPlaceholder"),value:e?e.show_id:null,"data-test-id":"podcast-show-select"}),g&&Object(T.jsx)(nt.a,{layout:"centered"})]}):Object(T.jsx)(je.a,{type:"warning",children:Object(T.jsx)(q.a,{message:"ContentComponents.cmv2.fields.podcast.missingScope"})})};var po=e=>{let{entity_type:t="episode"}=e,n=Object(G.a)(e,io);return"show"===t?Object(T.jsx)(uo,Object.assign({},n)):Object(T.jsx)(lo,Object.assign({},n))};t.a={[r.RICH_TEXT]:Ni.a,[r.IMAGE]:P.a,[r.FILE]:D.a,[r.HUBDB_TABLE]:k.a,[r.TEXT]:F.a,[r.CHOICE]:o.a,[r.NUMBER]:R.a,[r.BOOLEAN]:i.a,[r.COLOR]:a.a,[r.CTA]:s.a,[r.PAGE]:br,[r.FORM]:U.a,[r.WORKFLOW]:ui,[r.FOLLOW_UP_EMAIL]:Ue,[r.BLOG]:ar,[r.MENU]:Gr,[r.TAG]:ni,[r.MEETING]:ji,[r.DATE]:c.a,[r.DATE_TIME]:c.a,[r.EMAIL]:A,[r.HUBL]:L.a,[r.HTML]:L.a,[r.SIMPLE_MENU]:M.a,[r.SURVEY]:Ar,[r.LOGO]:B.a,[r.ICON]:V.a,[r.SFDC_CAMPAIGN]:le,[r.FONT]:Or.a,[r.GROUP]:di.a,[r.URL]:vi.a,[r.LINK]:Ci.a,[r.VIDEO]:xi.a,[r.CRM_OBJECT]:Ei.a,[r.CRM_OBJECT_PROPERTY]:Ti.a,[r.GRADIENT]:Si.a,[r.BACKGROUND_IMAGE]:Ii.a,[r.SPACING]:wi.a,[r.EMBED]:_i.a,[r.HUBDB_ROW]:Ai.a,[r.BORDER]:Di.a,[r.ALIGNMENT]:ki.a,[r.TEXT_ALIGNMENT]:Pi.a,[r.PAYMENT]:Ri.a,[r.AUDIO]:Li,[r.PRODUCT]:Mi.a,[r.PODCAST]:po}},function(e,t,n){"use strict";var r=n(40);n(45);var i=n(30),o=n.n(i),a=n(31);const s=e=>{try{const t=window.sessionStorage.getItem(e);window.sessionStorage.removeItem(e);return t&&JSON.parse(t)}catch(e){console.log({e:e})}try{const t=window[e];delete window[e];return t}catch(e){}return null},c=({portalId:e=a.a.getPortalId(),frameworkTypeIdentifier:t,query:n})=>`frameworkDataSchemaResolvers-${e}-properties-${t}-${null==n?void 0:n.showHighlySensitiveProperties}`,l=({frameworkTypeIdentifier:e,query:t})=>`/properties/v4/groups/${encodeURIComponent(e)}/properties?includeFieldLevelPermission=true${null!=t&&t.showHighlySensitiveProperties?"&showHighlySensitiveProperties=true":""}`,u=({portalId:e=a.a.getPortalId(),family:t})=>`frameworkDataSchemaResolvers-${e}-frameworkTypes-${t}`,d=({family:e})=>`/inbounddb-meta/v1/object-types/${"events"===e?"events/":""}for-portal`,p=({portalId:e=a.a.getPortalId(),appSettingNames:t})=>`frameworkDataSchemaResolvers-${e}-typeMetadataEntries-${t.slice().sort().join(",")}`,h=()=>"/framework-builder/v1/read/metadata/type/all/batch",m="FDG:FDSR:TypeMetadataSmuggledKeys",f=({frameworkTypeIdentifier:e,appSettingName:t,portalId:n=a.a.getPortalId()})=>`frameworkDataSchemaResolvers-${n}-propertyMetadataEntries-${e}-${t}`,g=({frameworkTypeIdentifier:e,appSettingName:t})=>`/framework-builder/v1/read/metadata/property/${encodeURIComponent(e)}/${encodeURIComponent(t)}`,b=({frameworkTypeIdentifier:e,portalId:t=a.a.getPortalId()})=>`frameworkDataSchemaResolvers-${t}-pipelines-${e}`,O=({frameworkTypeIdentifier:e})=>`/pipelines/v2/pipelines/${encodeURIComponent(e)}?includeApprovalStageStatus=true&includePermissions=true`;function y({requestName:e,baseFetch:t}){const n=a.a.getRequestStateByName(e);return n?new Promise((r,i)=>{n.whenFinished(t=>{a.a.removeEarlyRequest(e);r(t)});n.onError(()=>{a.a.removeEarlyRequest(e);t().then(r,i).catch(e=>{throw e})})}):t()}const j=({appSettingNames:e,httpClient:t})=>t.post(h(),{data:e}),v=({frameworkTypeIdentifier:e,appSettingName:t,httpClient:n})=>y({requestName:f({frameworkTypeIdentifier:e,appSettingName:t}),baseFetch:()=>n.get(g({frameworkTypeIdentifier:e,appSettingName:t}))});function C(e,{freezer:t=Object.freeze,isFrozen:n=Object.isFrozen}={}){if(e){Object.values(e).forEach(e=>{e&&"object"==typeof e&&!n(e)&&C(e,{freezer:t,isFrozen:n})});t(e)}return e}var x=n(9),E=n.n(x);E.a.deployed();let T=!1;let S=null;const I="requestCache",w="metrics",_=()=>new Promise((e,t)=>{try{const n=window.indexedDB.open("framework-data-schema-resolvers/persistentCache",2);if(n){n.onerror=t;n.onupgradeneeded=({target:{result:e}})=>{e.objectStoreNames.contains(I)||e.createObjectStore(I);e.objectStoreNames.contains(w)||e.createObjectStore(w)};n.onsuccess=({target:{result:t}})=>{t.onerror=console.error;e(t)}}}catch(e){t(e)}}),N=()=>{S||(S=_());return S},A=(e,t=I)=>T?Promise.reject(Error("IndexedDB is disabled")):N().then(n=>new Promise((r,i)=>{try{const o=n.transaction(t,"readonly").objectStore(t).get(e);o.onsuccess=({target:{result:e}})=>null!=e?r(C(e)):i(Error("Result was empty"));o.onerror=i}catch(e){i(e)}})),D=(e,t,n=I)=>T?Promise.reject(Error("IndexedDB is disabled")):N().then(r=>new Promise((i,o)=>{try{const a=r.transaction(n,"readwrite").objectStore(n).put(t,e);a.onsuccess=i;a.onerror=o}catch(e){o(e)}})),k=(e=I)=>N().then(t=>new Promise((n,r)=>{const i=t.transaction(e,"readwrite").objectStore(e).clear();i.onsuccess=n;i.onerror=r}));var P=n(8);const R="framework-data-schema-resolvers",F=Object(P.createMetricsFactory)(R,{library:R}),L=({cacheKey:e,cacheName:t,segment:n,isEqual:r})=>n?A(e,"metrics").catch(()=>0).then(i=>{if(r)return D(e,i+1,"metrics");F.histogram(t+"-duplicate-data-request-count",{segment:n}).update(i);return D(e,0,"metrics")}):Promise.resolve(),M=function(e,t){t||(t={});"function"==typeof t&&(t={cmp:t});const n="boolean"==typeof t.cycles&&t.cycles,r=t.cmp&&(i=t.cmp,function(e){return function(t,n){const r={key:t,value:e[t]},o={key:n,value:e[n]};return i(r,o)}});var i;const o=[];return function e(t){t&&t.toJSON&&"function"==typeof t.toJSON&&(t=t.toJSON());if(void 0===t)return"";if("number"==typeof t)return isFinite(t)?""+t:"null";if("object"!=typeof t)return JSON.stringify(t);let i,a;if(Array.isArray(t)){a="[";for(i=0;i<t.length;i++){i&&(a+=",");a+=e(t[i])||"null"}return a+"]"}if(null===t)return"null";if(-1!==o.indexOf(t)){if(n)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}const s=o.push(t)-1,c=Object.keys(t).sort(r&&r(t));a="";for(i=0;i<c.length;i++){const n=c[i],r=e(t[n]);if(r){a&&(a+=",");a+=`${JSON.stringify(n)}:${r}`}}o.splice(s,1);return`{${a}}`}(e)},B=e=>new Worker(URL.createObjectURL(new Blob([e],{type:"text/javascript"}))),U=()=>{},V=({current:e,previous:t,extraProcessing:n})=>new Promise((r,i)=>{const o=B(`\n(() => {\n  var stableHash = ${M};\n  var extraProcessing = ${n||U};\n\n  self.onmessage = (e) => {\n    try {\n      var current = e.data.current;\n      var previous = e.data.previous;\n\n      var isEqual = stableHash(current) === stableHash(previous);\n      var extraProcessingResult = extraProcessing(current);\n\n      self.postMessage({\n        type: "DATA",\n        isEqual,\n        extraProcessingResult\n      });\n    } catch (e) {\n      self.postMessage({ type: "ERROR", error: e });\n    }\n  }\n})();`);let a=!1;o.onmessage=function(e){a=!0;o.terminate();"ERROR"===e.data.type?i(e.data.error):"DATA"===e.data.type&&r(e.data)};setTimeout(()=>{if(!a){a=!0;o.terminate();i(Error("Worker timeout"))}},6e4);o.postMessage({current:e,previous:t})});function H({cacheName:e="unknown"}={}){const t=new Map,n={printDebug:()=>{E.a.deployed()||console.log(e,t)},has:e=>t.has(e),get:n=>{const r=t.get(n);if(!r)return null;F.counter("cache-hit",{cacheName:e}).increment();return r.value},set:(e,n)=>{t.set(e,{value:n});return!0},delete:e=>t.delete(e),clear:()=>t.clear(),readThrough:({cacheKey:e,refresh:t,loadValue:r})=>{if(!t&&n.has(e))return n.get(e);const i=r();n.set(e,i);return i}};return n}const q=E.a.deployed(),G=864e5,W=({cacheName:e,stalenessCutoff:t=G,allowEarlyCachedDataReturn:n=!1,segmentKey:r,metrics:i})=>{const o=H({cacheName:e});return Object.assign({},o,{readThrough:({cacheKey:a,loadValue:s,refresh:c})=>o.readThrough({cacheKey:a,refresh:c,loadValue:()=>{const o=s().then(e=>{D(a,{data:e,storedAt:Date.now()}).catch(()=>{});return e}),c=A(a).then(({storedAt:n,data:s})=>{if(n+t>Date.now()){o.then(e=>V({current:e,previous:s,extraProcessing:i&&i.extraMetricsProcessing})).then(({isEqual:t,extraProcessingResult:n})=>{const o=r(a);if(i)try{i.handleExtraProcessingResult({segment:o,extraProcessingResult:n})}catch(e){}return L({cacheKey:a,cacheName:e,segment:o,isEqual:t})}).catch(e=>{q||console.error(e)});return s}throw Error("Result was stale")}),l=o.catch(t=>c.then(t=>{F.counter("fault-tolerant-data-used",{cacheName:e}).increment();return t}).catch(()=>{throw t})),u=c.then(e=>n?e:o).catch(()=>o);return Promise.race([l,u])}})})},z=()=>Promise.reject(Error("Cache load failed"));var $=n(1),K=n.n($);const Y=K.a.get(),X=e=>e.startsWith("2-")||e.startsWith("p"+Y)?"customObject":e.startsWith("6-")||e.startsWith("pe"+Y)?"customEvent":e,J=W({cacheName:"propertyMetadata",segmentKey:e=>{const t=e.match(f({portalId:".*",frameworkTypeIdentifier:"(.*)",appSettingName:"(.*)"}));if(!t||!t[1]||!t[2])return null;const[n,r,i]=t;return`${X(r)}-${i}`}}),Q=({httpClient:e,requestCache:t=J,toRequestCacheKey:n=f})=>{const r={debug:()=>{t.printDebug()},clearCache:async()=>{await Promise.resolve(t.clear())},get:({frameworkTypeIdentifier:r,appSettingName:i,__isComposed:o=!1})=>{o||F.counter("propertyMetadata.get").increment();const a=t.readThrough({cacheKey:n({frameworkTypeIdentifier:r,appSettingName:i}),loadValue:()=>v({frameworkTypeIdentifier:r,appSettingName:i,httpClient:e}).then(C)});return null===a?z():a}};return Promise.resolve(r)},Z=e=>Object.entries(e).reduce((e,[t,n])=>{Object.entries(n).forEach(([n,r])=>{e[n]||(e[n]={});e[n][t]||(e[n][t]=r)});return e},{}),ee=e=>Object.entries(e).reduce((e,[t,n])=>{Object.entries(n).forEach(([n,r])=>{e[n]||(e[n]={});e[n][t]||(e[n][t]=r)});return e},{}),te=({appSettingName:e})=>p({appSettingNames:[e]}),ne=({appSettingNames:e})=>p({appSettingNames:e}),re="EMPTY",ie=W({cacheName:"typeMetadata",segmentKey:e=>{const t=e.match(te({appSettingName:"(.*)"}));return t&&t[1]||null}}),oe=H({cacheName:"typeMetadata-ops"}),ae=({httpClient:e,requestCache:t=ie,operationCache:n=oe,toRequestCacheKey:r=te,toOperationCacheKey:i=ne})=>{const o=s(m)||{};Object.entries(o).forEach(([n,i])=>{try{if(a.a.getRequestStateByName(n)&&i){const o=y({requestName:n,baseFetch:()=>j({appSettingNames:i,httpClient:e})}).then(e=>Z(e));i.forEach(e=>{const n=t.readThrough({cacheKey:r({appSettingName:e}),loadValue:()=>o.then(t=>t[e]||re)});return null===n?z():n})}}catch(e){}});const c=async({appSettingNames:n})=>{const i=n.map(e=>({appSettingName:e,key:r({appSettingName:e})})),o=i.filter(({key:e})=>!t.has(e)).map(({appSettingName:e})=>e),a=o.length?j({appSettingNames:o,httpClient:e}).then(Z):Promise.resolve(null),s=i.map(({appSettingName:e,key:n})=>{const r=t.readThrough({cacheKey:n,loadValue:()=>a.then(t=>t&&t[e]||re)});return null===r?z():r}),c=(await Promise.all(s)).reduce((e,t,r)=>{t&&t!==re&&(e[n[r]]=t);return e},{});return ee(c)},l={debug:()=>{t.printDebug();n.printDebug()},clearCache:async()=>{await Promise.all([t.clear(),n.clear()])},get:({appSettingNames:e,__isComposed:t=!1})=>{t||F.counter("typeMetadata.get").increment();const r=n.readThrough({cacheKey:i({appSettingNames:e}),loadValue:()=>c({appSettingNames:e})});return null===r?z():r}};return Promise.resolve(l)},se=({family:e,httpClient:t})=>y({requestName:u({family:e}),baseFetch:()=>t.get(d({family:e}))}),ce=W({cacheName:"frameworkTypes",segmentKey:e=>{const t=e.match(u({portalId:".*",family:"(.*)"}));return t&&t[1]||null}}),le=({httpClient:e,requestCache:t=ce,toCacheKey:n=u})=>{const r=({family:r})=>{const i=t.readThrough({cacheKey:n({family:r}),loadValue:()=>se({family:r,httpClient:e}).then(C)});return null===i?z():i};return Promise.resolve({debug:()=>{t.printDebug()},clearCache:async()=>{await Promise.resolve(t.clear())},getEvents:({__isComposed:e=!1}={})=>{e||F.counter("frameworkTypes.getEvents").increment();return r({family:"events"})},getObjects:({__isComposed:e=!1}={})=>{e||F.counter("frameworkTypes.getObjects").increment();return r({family:"objects"})}})};var ue=n(2);const de=({frameworkTypes:e,metadata:t})=>e.map(e=>Object.assign({},e,{typeMetadata:t[e.fullyQualifiedName]||null})),pe=({propertyDefinitions:e,appSettingNames:t,appSettingsResponses:n})=>e.map(e=>Object.assign({},e,{propertyMetadata:n.reduce((n,r,i)=>{const o=r&&r[e.property.name];o&&((n={})[t[i]]=o);return n},null)})),he=["propertyDefinitions"],me=H({cacheName:"graph-ops"}),fe=({operationName:e})=>`${K.a.get()}-graph-${e}`,ge=({propertiesClientPromise:e,frameworkTypesClientPromise:t,typeMetadataClientPromise:n,propertyMetadataClientPromise:r,operationCache:i=me,toOperationCacheKey:o=fe})=>{const a=async()=>{const i=await Promise.all([e,t,n,r]);return{propertiesClient:i[0],typesClient:i[1],typeMetadataClient:i[2],propertyMetadataClient:i[3]}},s=e=>({appSettingNames:t=[],__isComposed:n=!1}={})=>{n||F.counter("graph.frameworkTypes."+("objects"===e?"getObjects":"getEvents")).increment();const r=i.readThrough({cacheKey:o({operationName:`getFrameworkTypesWithMetadata-${e}-${t.slice().sort()}`}),loadValue:async()=>{const{typesClient:n,typeMetadataClient:r}=await a(),[i,o]=await Promise.all(["events"===e?n.getEvents({__isComposed:!0}):n.getObjects({__isComposed:!0}),t.length?r.get({appSettingNames:t,__isComposed:!0}):Promise.resolve({})]);return C(de({frameworkTypes:i,metadata:o}))}});return null===r?z():r},c={debug:()=>{i.printDebug()},clearCache:async()=>{await Promise.resolve(i.clear())},frameworkTypes:{getObjects:s("objects"),getEvents:s("events")},properties:{getGroups:async({frameworkTypeIdentifier:e,appSettingNames:t,__isComposed:n=!1})=>{n||F.counter("graph.properties.getGroups").increment();const r=await i.readThrough({cacheKey:o({operationName:`getPropertyGroupsWithPropertyMetadata-${e}-${t.slice().sort()}`}),loadValue:async()=>{const{propertiesClient:n,propertyMetadataClient:r}=await a(),[i,...o]=await Promise.all([n.getGroups({frameworkTypeIdentifier:e,__isComposed:!0}),...t.map(t=>r.get({frameworkTypeIdentifier:e,appSettingName:t,__isComposed:!0}))]);return C(i.map(e=>{let{propertyDefinitions:n}=e,r=Object(ue.a)(e,he);return Object.assign({},r,{propertyDefinitions:n?pe({propertyDefinitions:n,appSettingNames:t,appSettingsResponses:o}):null})}))}});return null===r?z():r},get:async({frameworkTypeIdentifier:e,appSettingNames:t,__isComposed:n=!1})=>{n||F.counter("graph.properties.get").increment();const r=await i.readThrough({cacheKey:o({operationName:`getPropertiesWithMetadata-${e}-${t.slice().sort()}`}),loadValue:async()=>{const{propertiesClient:n,propertyMetadataClient:r}=await a(),[i,...o]=await Promise.all([n.get({frameworkTypeIdentifier:e,__isComposed:!0}),...t.map(t=>r.get({frameworkTypeIdentifier:e,appSettingName:t,__isComposed:!0}))]);return C(pe({propertyDefinitions:i,appSettingNames:t,appSettingsResponses:o}))}});return null===r?z():r},getProperty:async({frameworkTypeIdentifier:e,propertyName:t,appSettingNames:n,__isComposed:r=!1})=>{r||F.counter("graph.properties.getProperty").increment();const s=await i.readThrough({cacheKey:o({operationName:`getPropertyWithMetadata-${e}-${n.slice().sort()}-${t}`}),loadValue:async()=>{const{propertiesClient:r,propertyMetadataClient:i}=await a(),[o,...s]=await Promise.all([r.getProperty({frameworkTypeIdentifier:e,propertyName:t,__isComposed:!0}),...n.map(t=>i.get({frameworkTypeIdentifier:e,appSettingName:t,__isComposed:!0}))]),[c]=pe({propertyDefinitions:[o],appSettingNames:n,appSettingsResponses:s});return C(c)}});return null===s?z():s}}};return Promise.resolve(c)},be=({httpClient:e,frameworkTypeIdentifier:t,query:n})=>y({requestName:c({frameworkTypeIdentifier:t,query:n}),baseFetch:()=>e.get(l({frameworkTypeIdentifier:t,query:n}))}).then(({results:e})=>e),Oe=Intl.Collator(void 0,{sensitivity:"base"});function ye(e){return e}function je(e,t,n=ye){return e.reduce((e,r,i)=>{const o=t(r,i);e[o]=n(r,i,e[o]);return e},{})}const ve=W({cacheName:"properties",segmentKey:e=>{const t=e.match(c({portalId:".*",frameworkTypeIdentifier:"(.*)"}));return t&&t[1]?X(t[1]):null},metrics:{extraMetricsProcessing:e=>e.map(e=>e.propertyDefinitions||[]).flat(1).reduce((e,t)=>{const n=t.property,r=t.objectTypeId;"file_upload_"===n.name&&(e["property-name-match-file-upload"]=!0);"string"===n.type&&"description"===n.name&&"textarea"!==n.fieldType&&(e["property-description-textarea-without-fieldType"]=!0);"number"!==n.type||"hs_forecast_probability"!==n.name&&"hs_deal_stage_probability"!==n.name&&"hs_deal_forecast_probability"!==n.name||"probability"===n.numberDisplayHint||(e["property-probability-without-numberDisplayHint"]=!0);n.hubspotDefined&&(n.name.startsWith("hs_time_in_")||"time_to_first_agent_reply"===n.name||"time_to_close"===n.name)&&"number"===n.type&&"duration"!==n.numberDisplayHint&&(e["property-duration-without-numberDisplayHint"]=!0);!n.hubspotDefined||"hs_created_by"!==n.name&&"hs_created_by_user_id"!==n.name&&"hs_updated_by_user_id"!==n.name||"USER"===n.externalOptionsReferenceType||(e["property-user-without-reference-type"]=!0);n.hubspotDefined&&("0-3"===r&&"pipeline"===n.name||"hs_pipeline"===n.name)&&"PIPELINE"!==n.externalOptionsReferenceType&&(e["property-pipeline-without-reference-type"]=!0);n.hubspotDefined&&(("0-1"===r||"0-2"===r)&&"lifecyclestage"===n.name||"0-3"===r&&"dealstage"===n.name||"hs_pipeline_stage"===n.name)&&"PIPELINE_STAGE"!==n.externalOptionsReferenceType&&(e["property-pipeline-stage-without-reference-type"]=!0);n.label||(e["property-missing-label"]=!0);e["property-user-without-reference-type"]||e["property-pipeline-without-reference-type"]||e["property-pipeline-stage-without-reference-type"]||(!n.externalOptions&&n.externalOptionsReferenceType?e["property-missing-externalOptions-boolean"]=!0:n.externalOptions&&!n.externalOptionsReferenceType&&(e["property-missing-reference-type"]=!0));return e},{}),handleExtraProcessingResult:({segment:e,extraProcessingResult:t})=>{e&&t&&Object.entries(t).forEach(([t,n])=>{n&&F.counter(t,{segment:e}).increment()})}}}),Ce=H({cacheName:"properties-ops"}),xe=({operationName:e,frameworkTypeIdentifier:t,query:n,portalId:r})=>`${c({portalId:r,frameworkTypeIdentifier:t,query:n})}-${e}`,Ee=({httpClient:e,requestCache:t=ve,operationCache:n=Ce,toOperationCacheKey:r=xe,toRequestCacheKey:i=c})=>{const o={debug:()=>{t.printDebug();n.printDebug()},clearCache:async()=>{await Promise.all([t.clear(),n.clear()])},getGroups:({frameworkTypeIdentifier:n,query:r,refetch:o=!1,__isComposed:a=!1})=>{a||F.counter("properties.getGroups").increment();const s=i({frameworkTypeIdentifier:n,query:r}),c=t.readThrough({cacheKey:s,refresh:o,loadValue:()=>be({httpClient:e,frameworkTypeIdentifier:n,query:r}).then(C)});return null===c?z():c},get:({frameworkTypeIdentifier:e,query:t,refetch:i=!1,__isComposed:a=!1})=>{a||F.counter("properties.get").increment();const s=r({operationName:"getForType",frameworkTypeIdentifier:e,query:t}),c=n.readThrough({cacheKey:s,refresh:i,loadValue:()=>o.getGroups({frameworkTypeIdentifier:e,query:t,refetch:i,__isComposed:!0}).then(e=>C(e.map(({propertyDefinitions:e})=>e||[]).flat(1).sort((e,t)=>Oe.compare(e.property.label||e.property.name,t.property.label||t.property.name))))});return null===c?z():c},getProperty:({frameworkTypeIdentifier:e,propertyName:t,query:i,refetch:a=!1,__isComposed:s=!1})=>{s||F.counter("properties.getProperty").increment();const c=r({operationName:"getForTypeAndName-propertyMap",frameworkTypeIdentifier:e,query:i}),l=r({operationName:"getForTypeAndName-"+t,frameworkTypeIdentifier:e,query:i}),u=n.readThrough({cacheKey:c,refresh:a,loadValue:()=>o.get({frameworkTypeIdentifier:e,query:i,refetch:a,__isComposed:!0}).then(e=>je(e,({property:{name:e}})=>e))});if(null===u)return z();const d=n.readThrough({cacheKey:l,refresh:a,loadValue:()=>u.then(n=>{const r=n[t];if(!r)throw new Error(`Property "${t}" on type "${e}" does not exist`);return C(r)})});return null===d?z():d}};return Promise.resolve(o)},Te=({httpClient:e,frameworkTypeIdentifier:t})=>y({requestName:b({frameworkTypeIdentifier:t}),baseFetch:()=>e.get(O({frameworkTypeIdentifier:t}))}),Se=W({cacheName:"pipelines",segmentKey:e=>{const t=e.match(b({portalId:".*",frameworkTypeIdentifier:"(.*)"}));return t&&t[1]||null}}),Ie=H({cacheName:"pipelines-ops"}),we=({frameworkTypeIdentifier:e,portalId:t})=>b({portalId:t,frameworkTypeIdentifier:e})+"-operation",_e=({httpClient:e,requestCache:t=Se,toRequestCacheKey:n=b,operationCache:r=Ie,toOperationCacheKey:i=we})=>{const o={debug:()=>{t.printDebug()},clearCache:async()=>{await Promise.all([t.clear(),r.clear()])},get:({frameworkTypeIdentifier:r,refetch:i,__isComposed:o=!1})=>{o||F.counter("pipelines.get").increment();const a=t.readThrough({cacheKey:n({frameworkTypeIdentifier:r}),refresh:i,loadValue:()=>Te({frameworkTypeIdentifier:r,httpClient:e}).then(C)});return null===a?z():a},getPipeline:({frameworkTypeIdentifier:e,pipelineId:t,refetch:n,__isComposed:a=!1})=>{a||F.counter("pipelines.getPipeline").increment();const s=i({frameworkTypeIdentifier:e}),c=r.readThrough({cacheKey:s,refresh:n,loadValue:()=>o.get({frameworkTypeIdentifier:e,refetch:n}).then(e=>je(e,({pipelineId:e})=>e))});return null===c?z():c.then(e=>e[t]?C(e[t]):null)}};return Promise.resolve(o)},Ne=async({httpClient:e})=>{const t=Ee({httpClient:e}),n=le({httpClient:e}),r=ae({httpClient:e}),i=Q({httpClient:e}),o=_e({httpClient:e}),a=ge({propertiesClientPromise:t,frameworkTypesClientPromise:n,typeMetadataClientPromise:r,propertyMetadataClientPromise:i}),[s,c,l,u,d,p]=await Promise.all([t,o,n,r,i,a]);return{properties:s,pipelines:c,frameworkTypes:l,typeMetadata:u,propertyMetadata:d,graph:p,meta:{debug:()=>{s.debug();l.debug();d.debug();u.debug();p.debug()},clearCaches:async()=>{F.counter("clearCaches").increment();await Promise.all([s.clearCache(),c.clearCache(),l.clearCache(),d.clearCache(),u.clearCache(),p.clearCache(),k()])}}}},Ae=new WeakMap,De=async({httpClient:e=o.a}={})=>{Ae.has(e)||Ae.set(e,Ne({httpClient:e}));return await Ae.get(e)},ke=(e,t,n)=>i=>{const o=!(!i||!i.skip),a=i&&i.variables,[s,c]=Object(r.useState)({loading:!o}),l=Object(r.useMemo)(()=>M({skip:o,variables:a}),[o,a]),u=Object(r.useRef)("");u.current=l;Object(r.useEffect)(()=>{if(!o){c({loading:!0});(n||De)({httpClient:t}).then(t=>e(t)(a)).then(e=>{u.current===l&&c({data:e,loading:!1})}).catch(e=>{u.current===l&&c({loading:!1,error:e})})}},[l]);return s};ke(e=>e.frameworkTypes.getEvents),ke(e=>e.frameworkTypes.getObjects),ke(e=>e.properties.getProperty);n.d(t,"a",(function(){return De}))},function(e,t,n){"use strict";var r=n(1212),i=n.n(r),o=n(1232);function a(e){const{preProcess:t}=Object(o.d)(e);return e=>{e.hsOrigin&&"appUndoRedo"===e.hsOrigin||(e.content=Object(o.c)(e.content,t))}}function s(e){const{postProcess:t}=Object(o.d)(e);return e=>{e.content=Object(o.c)(e.content,t)}}function c(e){e.on("beforesetcontent",a(e));e.on("postprocess",s(e));e.on("remove",Object(o.e)(e))}var l=n(1233);const u=["data-popover-id"],d="hs_cos_wrapper",p=["data-hs-row-id","data-hs-cell-id","data-hs-tree-id"],h="data-mce-sanitize-allow",m="hscore_settings",f="&nbsp;";function g(e){const t=e=>{const t=e.querySelectorAll("div");Array.from(t).forEach(e=>{const t=Object(l.f)(e);t&&1===t.nodeType&&"IFRAME"!==t.nodeName&&!t.closest(`[${h}]`)&&(t.innerHTML=f)})};Object(o.b)(e,t);Object(o.a)(e,t)}var b=g;const O=/^[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,y=e=>O.test(e),j="rtl",v="ltr",C=e=>function(){const t=e.dom,n=e.selection.getSelectedBlocks()[0];if(!n)return;const{textContent:r}=n;if(""===r.trim())return;const i=t.getAttrib(n,"dir"),o=y(r);o&&"ltr"!==i&&e.settings.directionality===j||o&&i===j||!o&&i===v||""===r||t.getParent(n.parentElement,`*[dir="${i}"]`,t.getRoot())||t.setAttrib(n,"dir",o?j:null)},x=e=>{const t=C(e);e.on("keyUp",t)};function E(e){x(e)}var T=n(539),S=n(2617),I=n(1237),w=n(1239),_=n(2816),N=n(1251),A=n(1252),D=n(1253),k=n(1241);const P=S.a.CONVERT_GOOGLE_IMPORT_TO_HTML,R=1e3;function F(e){const t=Object(A.a)(e,N.b.EMBED_URL_PASTING),n=Object(k.f)(e,m,{});let r={type:void 0,pasteSource:void 0,hasImages:void 0,pasteContent:void 0};e.on("BeforeExecCommand",t=>{const n=t.command.toLowerCase();if(I.i[n]){const r=I.i[n];let i={};r===I.i.mcetoggleformat&&(i={value:t.value||n});if(0===n.indexOf("justify")){const t=e.selection.getNode();if(Object(D.i)(e,t))return}Object(w.b)(e,"tinymceCommand",r,i)}});Object.keys(I.D).forEach(n=>{e.on(n,i=>{const o=I.D[n],a={version:"v1"};if("paste"===n){const{type:e,pasteSource:n,hasImages:o}=Object(_.b)(i,{allowEmbedUrlPasting:t});if(n===P)return;r={type:e,pasteSource:n,hasImages:o}}else if("pastePreProcess"===n){const{type:t,pasteSource:n,hasImages:i}=r;if(!t)return;const s=e.getContent({format:"text"}),c=e.selection.getContent({format:"text"});if(n===P)return;const l=s===c;Object(w.b)(e,"tinymcePaste",o,Object.assign({},a,{type:t,pasteSource:n,hasImages:i,overwriteExisting:l}));r={}}else Object(w.b)(e,"tinymceEvent",o,a)})});if(n.shouldTrackInsertText){const t=Object(T.a)(n=>{if(n.inputType&&"insertText"===n.inputType){Object(w.b)(e,"tinymceEvent","insert-text");e.off("input",t)}},R);e.on("LoadContent",()=>{Boolean(e.getContent().length)||e.on("input",t)})}e.settings.trackInteraction=w.b}var L=n(1236);const M=e=>{u.forEach(t=>{[...e.body.querySelectorAll(`[${t}]`)].forEach(e=>{e.removeAttribute(t)})})},B=e=>{Object(L.c)(e=>{if(!e.closest(`[${h}]`)){for(;e.firstChild;)e.parentNode.insertBefore(e.firstChild,e);e.parentNode.removeChild(e)}},e.querySelectorAll(`[id*='${d}'] `))},U=e=>{const t=`[${p.join("],[")}]`;Object(L.c)(e=>{p.forEach(t=>{e.hasAttribute(t)&&e.removeAttribute(t)})},e.querySelectorAll(t))};function V(e){Object(o.a)(e,M);e.settings.useModuleInsertion||Object(o.b)(e,B);Object(o.b)(e,U)}var H=n(1256);function q(){return{getUserAttributes:Object(H.c)(),setUserAttribute:Object(H.d)()}}var G=q,W=n(1242),z=n(1259),$=n(2),K=n(1247),Y=n(1260),X=n(41),J=n.n(X),Q=n(40),Z=n(1264),ee=n(45);const te=["alignmentOptions","alignment","onChange","menuItems"],ne={alignmentOptions:J.a.array.isRequired,alignment:J.a.string,onChange:J.a.func.isRequired,menuItems:J.a.array},re={menuItems:[]};function ie(e){const{alignmentOptions:t,alignment:n,onChange:r,menuItems:i}=e,o=Object($.a)(e,te),[a,s]=Object(Q.useState)(!1);Object(Q.useEffect)(()=>{s(!0)},[]);if(a&&!i.length)return null;const c=({currentTarget:{value:e}})=>{r(e)};return Object(ee.jsx)(Z.a,Object.assign({},o,{options:t,value:n,onChange:c}))}ie.propTypes=ne;ie.defaultProps=re;ie.displayName="AlignmentDropdown";var oe=ie,ae=n(1267),se=n(1245);const ce=Object(se.a)("TinymcePlugins.contextualToolbar"),le=["disabled","contextualNodeAttributes"],ue=["disabled","contextualNodeAttributes"],de=["contextualNodeAttributes"],pe=["contextualNodeAttributes"],he=e=>ce("alignment.tooltip."+e),me=e=>ce("verticalAlignment.tooltip."+e),fe=[{controlName:ae.e,alignment:K.b.NONE,iconName:"inline",tooltip:"inline"},{controlName:ae.f,alignment:K.b.LEFT,iconName:"imageAlignmentLeft",tooltip:"left"},{controlName:ae.b,alignment:K.b.CENTER,iconName:"imageAlignmentMiddle",tooltip:"center"},{controlName:ae.g,alignment:K.b.RIGHT,iconName:"imageAlignmentRight",tooltip:"right"},{controlName:ae.d,alignment:K.b.JUSTIFY,iconName:"fullWidth",tooltip:"fullWidth",flag:"useFullWidth"}],ge=[{controlName:ae.fb,alignment:K.d.BOTTOM,iconName:K.a.baseline,tooltip:"bottom"},{controlName:ae.hb,alignment:K.d.MIDDLE,iconName:K.a.middle,tooltip:"middle"},{controlName:ae.ib,alignment:K.d.TOP,iconName:K.a.top,tooltip:"top"}];function be(e){const t=(t,n,r)=>()=>{e.fire("hsAlignmentChange",{target:t,alignment:n,prevAlignment:r})};fe.forEach(({controlName:n,alignment:r,iconName:o,tooltip:a})=>{i.a.canvas.addButton(e,n,{renderControl:e=>{const{disabled:i,contextualNodeAttributes:s}=e,c=Object($.a)(e,le),{alignment:l,[r+"Disabled"]:u,[r+"DisabledTooltip"]:d,activeElement:p}=s,h=i||u;return Object(ee.jsx)(Y.a,Object.assign({},c,{"data-test-id":n,iconName:o,selected:r===l,disabled:h,onClick:t(p,r,l),tooltip:he(a),disabledTooltip:d}))}})});const n=(t,n,r)=>{e.fire("hsAlignmentChange",{target:t,alignment:r,prevAlignment:n})},r=(e,t)=>fe.filter(({flag:e})=>!e||!!t[e]).map(({alignment:n,iconName:r,tooltip:i})=>{const o=e||!!t[n+"Disabled"];return{icon:r,value:n,disabled:o,tooltip:o?t[n+"DisabledTooltip"]:he(i)}});i.a.canvas.addButton(e,ae.c,{renderControl:e=>{const{disabled:t,contextualNodeAttributes:i}=e,o=Object($.a)(e,ue),{alignment:a,activeElement:s}=i,c=r(t,i);return Object(ee.jsx)(oe,Object.assign({},o,{"data-test-id":ae.c,dropdownClassName:"mce-alignment-dropdown",alignmentOptions:c,alignment:a,onChange:n.bind(null,s,a),tooltip:he("dropdown"),disabled:t}))}})}function Oe(e){const t=(t,n)=>()=>{e.fire("hsVerticalAlignmentChange",{target:t,alignment:n})};ge.forEach(({controlName:n,alignment:r,iconName:o,tooltip:a})=>{i.a.canvas.addButton(e,n,{renderControl:e=>{const{contextualNodeAttributes:i}=e,s=Object($.a)(e,de),{verticalAlignment:c,useCellVerticalAlignment:l,activeElement:u}=i;l&&r===K.d.BOTTOM&&(r="bottom");return Object(ee.jsx)(Y.a,Object.assign({},s,{"data-test-id":n,iconName:o,tooltip:me(a),selected:r===c,onClick:t(u,r)}))}})});const n=(t,n)=>{e.fire("hsVerticalAlignmentChange",{target:t,alignment:n})},r=({useCellVerticalAlignment:e})=>ge.map(({alignment:t,iconName:n,tooltip:r})=>{e&&t===K.d.BOTTOM&&(t="bottom");return{icon:n,value:t,tooltip:me(r)}});i.a.canvas.addButton(e,ae.gb,{renderControl:e=>{const{contextualNodeAttributes:t}=e,i=Object($.a)(e,pe),{verticalAlignment:o,useCellVerticalAlignment:a,activeElement:s}=t,c=r({useCellVerticalAlignment:a});return Object(ee.jsx)(oe,Object.assign({},i,{"data-test-id":ae.gb,dropdownClassName:"mce-vertical-alignment-dropdown",alignmentOptions:c,alignment:o,onChange:n.bind(null,s),tooltip:me("dropdown")}))}})}var ye=n(4),je=n(287),ve=n.n(je),Ce=n(434),xe=n(477),Ee=n(506),Te=n(1219),Se=n(512),Ie=n(508),we=n(1218);let _e=null;const Ne=e=>[(...t)=>{_e&&clearTimeout(_e);_e=setTimeout(()=>{e(...t)},we.a)},(...t)=>{_e&&clearTimeout(_e);e(...t)}],Ae=ve()(Ie.a).withConfig({displayName:"MarginInput__StyledUITextInput",componentId:"sc-1uc8b70-0"})(["min-width:0;"]),De={value:J.a.oneOfType([J.a.string,J.a.number]).isRequired,onChange:J.a.func.isRequired};function ke(e){const{value:t,onChange:n}=e,[r,i]=Ne(n);return"number"!=typeof t?Object(ee.jsx)(Ae,{disabled:!0,value:t,onChange:r,size:7}):Object(ee.jsx)(Se.a,{min:0,max:999,stepSize:1,size:3,value:t,onChange:r,onStep:i})}ke.propTypes=De;ke.displayName="MarginInput";var Pe=ke,Re=n(1268);const Fe=["className","dropdownClassName","disabled"],Le=ve()(Ee.a).withConfig({displayName:"MarginControlButton__StyledProtectedImage",componentId:"sc-1fee1dw-0"})(["width:40px !important;height:40px !important;"]),Me=(e,t,n)=>{const r=t=>{const{value:r}=t.target;n({[e]:r})};return Object(ee.jsx)(Pe,{value:t,onChange:r})},Be=e=>{const{margin:t,marginIconType:n,onMarginChange:r,staticPrefix:i}=e,o=e=>{r(Object.assign({},t,e))};return Object(ee.jsxs)(xe.a,{"data-test-id":"margin-control-content",className:"m-top-1 p-all-3",_size:"small",children:[Object(ee.jsx)(Ce.a,{direction:"row",justify:"center",children:Me("top",t.top,o)}),Object(ee.jsxs)(Ce.a,{direction:"row",align:"center",justify:"center",children:[Me("left",t.left,o),Object(ee.jsx)(Le,{className:"m-all-2",responsive:!1,width:40,height:40,src:`${i}/images/${n}-icon.svg`}),Me("right",t.right,o)]}),Object(ee.jsx)(Ce.a,{className:"m-bottom-2",direction:"row",justify:"center",children:Me("bottom",t.bottom,o)})]})},Ue={className:J.a.string,dropdownClassName:J.a.string,disabled:J.a.bool,margin:J.a.shape({top:J.a.oneOfType([J.a.string,J.a.number]),left:J.a.oneOfType([J.a.string,J.a.number]),right:J.a.oneOfType([J.a.string,J.a.number]),bottom:J.a.oneOfType([J.a.string,J.a.number])}).isRequired,marginIconType:J.a.oneOf(Object.values(Re.a)),staticPrefix:J.a.string.isRequired,onMarginChange:J.a.func.isRequired};function Ve(e){const{className:t,dropdownClassName:n,disabled:r}=e,i=Object($.a)(e,Fe);return Object(ee.jsx)(Te.a,{"data-test-id":"margin-control-button",use:"unstyled",buttonText:ye.a.text(Object(we.h)("margin")),buttonUse:"transparent",buttonClassName:t,autoPlacement:"horiz",placement:"bottom right",closeOnMenuClick:!1,dropdownClassName:n,animateOnToggle:!1,disabled:r,arrowSize:"medium",children:Be(i)})}Ve.propTypes=Ue;Ve.displayName="MarginControlButton";var He=ve()(Ve).withConfig({displayName:"MarginControlButton__StyledMarginControlButton",componentId:"sc-1fee1dw-1"})(["",""],we.g);const qe=["contextualNodeAttributes"];function Ge(e){const t=(t,n)=>{e.fire("hsMarginChange",{target:t,margin:n})};i.a.canvas.addButton(e,ae.K,{renderControl:n=>{const{contextualNodeAttributes:r}=n,i=Object($.a)(n,qe),{margin:o={},marginIconType:a,activeElement:s}=r;return Object(ee.jsx)(He,Object.assign({},i,{margin:o,marginIconType:a,dropdownClassName:"mce-dropdown",onMarginChange:t.bind(null,s),staticPrefix:Object(k.f)(e,"richTextLibStaticPrefix")}))}})}var We=n(2654),ze=n(710),$e=n(2679),Ke=n(324),Ye=n(1197),Xe=n(2741),Je=n(485);const Qe=/(\d+)px/;function Ze(e){if("string"!=typeof e)return e;const t=e.match(Qe);let n;n=t?parseInt(t[1],10):parseInt(e,10);return isNaN(n)?void 0:n}const et=/^(\d*(\.?\d+))%$/;function tt(e){if("string"!=typeof e)return e;const t=e.match(et);let n;n=t?parseInt(t[1],10):parseInt(e,10);return isNaN(n)?void 0:n}function nt(e){return"string"==typeof e&&e.length>1&&"%"===e[e.length-1]}var rt=n(475);class it extends Q.Component{render(){return Object(ee.jsx)(Se.a,Object.assign({},this.props,{formatStyle:"percentage"}))}}it.displayName="UIPercentageStepper";it.propTypes=Object.assign({},Object(rt.a)(Se.a.propTypes,["formatStyle","currency"]));it.defaultProps=Object.assign({},Se.a.defaultProps);var ot=it;var at=ve()(ot).withConfig({displayName:"TablePopoverPercentageStepperInput__PercentageStepperInput",componentId:"pbeqap-0"})(["max-width:"," !important;& input{min-height:32px;}"],({width:e})=>e||"100%");const st=e=>null!=e?ye.a.formatNumber(e,{precision:1})+"px":e;var ct=ve()(Se.a).attrs(()=>({formatter:st})).withConfig({displayName:"TablePopoverPixelStepperInput__PixelStepperInput",componentId:"fsoa53-0"})(["min-width:"," !important;max-width:"," !important;& input{min-height:32px;}"],({width:e})=>e||"100%",({width:e})=>e||"100%");const lt=["value","pixelValue"],ut=["className","tooltip","label","disabled","onChange","onStep","allowUnitDimensions","pixelValue"],dt=e=>ve()(e).withConfig({displayName:"SplitLabelStepperInput__asStyledStepperInput",componentId:"sc-1q9ejnz-0"})(["font-size:12px !important;input{font-size:14px !important;height:32px !important;padding-bottom:4px !important;padding-top:4px !important;}"]),pt=dt(Se.a),ht=dt(at),mt=dt(ct),ft=e=>{const{value:t,pixelValue:n}=e,r=Object($.a)(e,lt);return nt(t)?Object(ee.jsx)(ht,Object.assign({},r,{size:7,value:tt(t)})):Object(ee.jsx)(mt,Object.assign({},r,{size:7,value:Ze(n)}))},gt=`\n  background-color: ${Ke.KOALA};\n  border-color: ${Ke.KOALA};\n  box-shadow: none !important;\n  color: ${Ke.BATTLESHIP};\n  cursor: not-allowed;\n`,bt=ve()(Xe.a).withConfig({displayName:"SplitLabelStepperInput__SplitLabelControl",componentId:"sc-1q9ejnz-1"})(["font-weight:600;line-height:30px;border:1px solid ",";border-top-left-radius:3px;border-bottom-left-radius:3px;",""],Ke.BATTLESHIP,({disabled:e})=>e?gt:""),Ot={className:J.a.string,tooltip:J.a.string.isRequired,label:J.a.string.isRequired,disabled:J.a.bool,onChange:J.a.func.isRequired,onStep:J.a.func.isRequired,allowUnitDimensions:J.a.bool,pixelValue:J.a.number},yt={size:5,stepSize:1,min:0};function jt(e){const{className:t,tooltip:n,label:r,disabled:i,onChange:o,onStep:a,allowUnitDimensions:s,pixelValue:c}=e,l=Object($.a)(e,ut),u=e=>{const{value:t}=e.target;o(t)},d=e=>{const{value:t}=e.target;a(t)},p=s?ft:pt;return Object(ee.jsx)(We.a,{title:n,placement:"bottom",disabled:i,children:Object(ee.jsxs)(Ye.a,{className:t,use:"none",children:[Object(ee.jsx)(bt,{"aria-label":"split-stepper-label",disabled:i,children:Object(ee.jsx)(Je.a,{className:"p-x-1",children:r})}),Object(ee.jsx)(Xe.a,{"aria-label":"split-stepper-input",children:Object(ee.jsx)(p,Object.assign({},l,{pixelValue:s?c:void 0,disabled:i,onChange:u,onStep:d}))})]})})}jt.propTypes=Ot;jt.defaultProps=yt;jt.displayName="SplitLabelStepperInput";var vt=jt;const Ct=e=>Object(we.h)("tooltip.dimensions."+e),xt={dimensions:J.a.shape({width:J.a.number,height:J.a.number}).isRequired,maxDimensions:J.a.shape({width:J.a.number,height:J.a.number}).isRequired,pixelWidth:J.a.number,naturalWidth:J.a.number,naturalHeight:J.a.number,onDimensionChange:J.a.func.isRequired,showDimensionsControls:J.a.bool,dimensionsDisabledTooltip:J.a.string,disabled:J.a.bool,allowUnitDimensions:J.a.bool,lockedAspectRatio:J.a.bool,activeElement:J.a.exact(Element)},Et={dimensions:{},maxDimensions:{},showDimensionsControls:!0,lockedAspectRatio:!0};function Tt(e){const{dimensions:t,maxDimensions:n,pixelWidth:r,naturalWidth:i,naturalHeight:o,onDimensionChange:a,showDimensionsControls:s,dimensionsDisabledTooltip:c,disabled:l,allowUnitDimensions:u,lockedAspectRatio:d,activeElement:p}=e,{width:h,height:m}=t,f=!s||l,g=!c||s||l,[b,O]=Object(Q.useState)(()=>d?i&&o?i/o:h/m:1),y=Object(Q.useRef)(p);Object(Q.useEffect)(()=>{if(y.current!==p&&d){let e;e=i&&o?i/o:h/m;O(e)}y.current=p},[i,o,h,m,d,p]);const j=(e,t)=>{const r=Math.min(t,n[e]||t),i={};if("width"===e){i.width=r;i.height=d?r/b:m}else{i.width=d?r*b:h;i.height=r}a(i,e)},[v,C]=Ne(j);let x={};u&&(x=nt(h)?{max:100,disabledMaxButtonTooltip:ye.a.text(Ct("maxPercentageTooltip"))}:{min:r,disabledMinButtonTooltip:ye.a.text(Ct("minPixelTooltip")),disabledMinButtonTooltipProps:{placement:"bottom"}});return Object(ee.jsx)(We.a,{title:c,placement:"bottom",disabled:g,children:Object(ee.jsxs)(Ce.a,{align:"center","data-test-id":"dimension-control-group",children:[Object(ee.jsx)(vt,Object.assign({tooltip:ye.a.text(Ct("width")),label:"W",value:h,pixelValue:r,max:n.width,disabled:f,onChange:v.bind(null,"width"),onStep:C.bind(null,"width"),allowUnitDimensions:u},x)),Object(ee.jsx)(ze.a,{use:"transparent",size:"xs",disabled:!0,children:Object(ee.jsx)($e.a,{name:"locked"})}),Object(ee.jsx)(vt,{tooltip:ye.a.text(Ct("height")),label:"H",value:m,pixelValue:m,max:n.height,disabled:f,onChange:v.bind(null,"height"),onStep:C.bind(null,"height"),allowUnitDimensions:u})]})})}Tt.propTypes=xt;Tt.defaultProps=Et;Tt.displayName="DimensionControlGroup";var St=Tt,It=n(1215);const wt=["contextualNodeAttributes"],_t=["tablePixelWidth"];function Nt(e){const t=(t,n,r)=>{const i=e.selection.getNode();e.fire("hsDimensionChange",{target:i,dimensions:n,dimensionType:r,contextualNodeAttributes:t})},n=["dimensions","maxDimensions","tablePixelWidth","naturalWidth","naturalHeight","showDimensionsControls","dimensionsDisabledTooltip","allowUnitDimensions","lockedAspectRatio","activeElement"];i.a.canvas.addButton(e,ae.v,{renderControl:e=>{const{contextualNodeAttributes:r}=e,i=Object($.a)(e,wt),o=Object(It.i)(n,r),{tablePixelWidth:a}=o,s=Object($.a)(o,_t);return Object(ee.jsx)(St,Object.assign({},i,s,{pixelWidth:a,onDimensionChange:t.bind(null,r)}))}})}var At=n(2821),Dt=n(2822);const kt=["contextualNodeAttributes"];function Pt(e){const t=(t,n)=>{e.fire("hsFillColorChange",{target:t,color:n})},n=Object(Dt.a)(e,{includeAlpha:!1}),r=e=>{const t=0!==e.alpha;return Object(ee.jsx)(n,Object.assign({},e,{showResetToDefault:t}))};i.a.canvas.addButton(e,ae.y,{renderControl:e=>{const{contextualNodeAttributes:n}=e,i=Object($.a)(e,kt),{fillColor:o,fillColorTooltip:a,activeElement:s}=n;return Object(ee.jsx)(At.a,Object.assign({"data-test-id":"color-picker-fillcolor",tooltip:a,icon:"backgroundColor",color:o,defaultColor:Ke.OLAF,defaultAlpha:0,onColorChange:t.bind(null,s),dropdownClassName:"mce-hubspot-popover",renderColorPicker:r},i))}})}const Rt=["rotationAngle","onChange"],Ft={rotationAngle:J.a.number.isRequired,onChange:J.a.func.isRequired};function Lt(e){const{rotationAngle:t,onChange:n}=e,r=Object($.a)(e,Rt),[i,o]=Ne(n);return Object(ee.jsx)(vt,Object.assign({},r,{className:"m-right-2",tooltip:ye.a.text(Object(we.h)("tooltip.rotation")),label:"°",value:t,max:360,size:3,onChange:i,onStep:o}))}Lt.propTypes=Ft;Lt.displayName="RotationAngleToolbarControl";var Mt=Lt;const Bt=["contextualNodeAttributes"];function Ut(e){const t=(t,n)=>{e.fire("hsRotationAngleChange",{target:t,rotationAngle:n})};i.a.canvas.addButton(e,ae.S,{renderControl:e=>{const{contextualNodeAttributes:n}=e,r=Object($.a)(e,Bt),{rotationAngle:i,activeElement:o}=n;return Object(ee.jsx)(Mt,Object.assign({},r,{"data-test-id":ae.S,rotationAngle:i,onChange:t.bind(null,o)}))}})}var Vt=n(279),Ht=n(1272),qt=n(1149),Gt=n(1273);const Wt=["iconType","availableIconTypes","disabled","onChange"],zt=e=>Object(we.h)("iconType."+e),$t={iconType:J.a.oneOf(Object.values(Gt.d)),availableIconTypes:J.a.array.isRequired,disabled:J.a.bool,onChange:J.a.func.isRequired},Kt={availableIconTypes:[]};function Yt(e){const{iconType:t,availableIconTypes:n,disabled:r,onChange:i}=e,o=Object($.a)(e,Wt),a=e=>{const{name:n}=e.target;t!==n&&i(n)};return Object(ee.jsx)(xe.a,{_size:"small",children:Object(ee.jsx)(Ht.a,Object.assign({},o,{name:"styleType",inline:!0,children:Object.values(Gt.d).map(e=>{const i=!n.includes(e),o=Object(ee.jsx)(qt.a,{name:e,inline:!0,checked:e===t,onChange:a,disabled:r||i,children:Object(ee.jsx)(Vt.a,{message:zt(e)})},e);return i?Object(ee.jsx)(We.a,{title:ye.a.text(zt("unavailable")),placement:"bottom",children:o},e+"--tooltip"):o})}))})}Yt.propTypes=$t;Yt.defaultProps=Kt;Yt.displayName="IconTypeToolbarControl";var Xt=Yt;const Jt=["contextualNodeAttributes","menuItems"];function Qt(e){const t=(t,n)=>{e.fire("hsIconTypeChange",{target:t,iconType:n})};i.a.canvas.addButton(e,ae.D,{renderControl:e=>{const{contextualNodeAttributes:n}=e,r=Object($.a)(e,Jt),{iconType:i,availableIconTypes:o,activeElement:a}=n;return Object(ee.jsx)(Xt,Object.assign({},r,{"data-test-id":ae.D,iconType:i,availableIconTypes:o,onChange:t.bind(null,a)}))}})}const Zt=["contextualNodeAttributes"];function en(e){const t=(t,n)=>{e.fire("hsBorderColorChange",{target:t,color:n})},n=Object(Dt.a)(e,{includeAlpha:!1}),r=e=>{const t=0!==e.alpha;return Object(ee.jsx)(n,Object.assign({},e,{showResetToDefault:t}))};i.a.canvas.addButton(e,ae.l,{renderControl:e=>{const{contextualNodeAttributes:n}=e,i=Object($.a)(e,Zt),{borderColor:o,borderColorTooltip:a,activeElement:s}=n;return Object(ee.jsx)(At.a,Object.assign({"data-test-id":"color-picker-bordercolor",tooltip:a,icon:"edit",color:o,defaultColor:Ke.OLAF,defaultAlpha:0,onColorChange:t.bind(null,s),dropdownClassName:"mce-hubspot-popover",renderColorPicker:r},i))}})}var tn=n(352),nn=n(2655),rn=n(490),on=n(458),an=n(1037),sn=n(479),cn=n(1274);const ln=e=>"RichTextLib.table.toolbar."+e,un=(e,t="value")=>n=>{const{[t]:r}=n.target;e(r)},dn=ve()(xe.a).withConfig({displayName:"TableStyleControlButton__StyleControlsContainer",componentId:"n4kasm-0"})(["min-width:280px;max-width:340px;"]),pn=ve()(rn.a).withConfig({displayName:"TableStyleControlButton__StyleFormLabel",componentId:"n4kasm-1"})(["padding-top:4px;padding-bottom:4px;font-size:14px !important;font-weight:400 !important;"]),hn=ve()(sn.a).withConfig({displayName:"TableStyleControlButton__StyleFormLabelWithInfo",componentId:"n4kasm-2"})(["font-size:14px !important;font-weight:400 !important;& span{font-size:14px !important;}"]),mn=ve()(nn.a).withConfig({displayName:"TableStyleControlButton__StyleSelect",componentId:"n4kasm-3"})(["max-width:144px !important;"]),fn=ve()(on.a).withConfig({displayName:"TableStyleControlButton__StyleToggle",componentId:"n4kasm-4"})(["max-width:144px !important;"]),gn=ve()(Vt.a).withConfig({displayName:"TableStyleControlButton__StyleFieldLabel",componentId:"n4kasm-5"})(["font-size:14px !important;font-weight:400 !important;"]),bn=ve()(an.a).withConfig({displayName:"TableStyleControlButton__StyleFieldTextArea",componentId:"n4kasm-6"})(["height:76px !important;"]),On={className:J.a.string.isRequired,dropdownClassName:J.a.string.isRequired,disabled:J.a.bool.isRequired,tableWidth:J.a.string.isRequired,borderWidth:J.a.number.isRequired,borderStyle:J.a.oneOf(cn.b).isRequired,cellPadding:J.a.number.isRequired,tableCaption:J.a.bool.isRequired,tableIsResponsive:J.a.bool.isRequired,tableStyle:J.a.string.isRequired,onBorderWidthChange:J.a.func.isRequired,onBorderStyleChange:J.a.func.isRequired,onTableDimensionTypeChange:J.a.func.isRequired,onCellPaddingChange:J.a.func.isRequired,onTableCaptionChange:J.a.func.isRequired,onTableResponsiveChange:J.a.func.isRequired,onTableCustomStyleChange:J.a.func.isRequired};function yn(e){const{className:t,dropdownClassName:n,disabled:r,tableWidth:i,borderWidth:o,onBorderWidthChange:a,borderStyle:s,onBorderStyleChange:c,onTableDimensionTypeChange:l,cellPadding:u,onCellPaddingChange:d,tableCaption:p,onTableCaptionChange:h,tableIsResponsive:m,onTableResponsiveChange:f,tableStyle:g,onTableCustomStyleChange:b}=e,[O,y]=Ne(un(a)),[j,v]=Ne(un(d)),[C,x]=Object(Q.useState)(g),[E]=Ne(b),T=e=>{const{value:t}=e.target;x(t);E(t)};Object(Q.useEffect)(()=>{x(g)},[g]);return Object(ee.jsx)(Te.a,{"data-test-id":"table-style-control-button",use:"unstyled",buttonText:ye.a.text(Object(we.h)("tableStyle")),buttonUse:"transparent",buttonClassName:t,autoPlacement:"horiz",placement:"bottom right",closeOnMenuClick:!1,dropdownClassName:n,animateOnToggle:!1,disabled:r,arrowSize:"medium",children:Object(ee.jsxs)(dn,{"data-test-id":"table-style-control-content",className:"m-all-4",_size:"small",children:[Object(ee.jsx)(tn.a,{className:"m-bottom-4",children:Object(ee.jsx)(Vt.a,{message:ln("table.title")})}),Object(ee.jsxs)(Ce.a,{alignment:"center",justify:"between",className:"m-top-4",children:[Object(ee.jsx)(pn,{children:Object(ee.jsx)(Vt.a,{message:ln("borderWidth")})}),Object(ee.jsx)(ct,{"data-test-id":"table-border-width-input",min:0,max:30,width:"144px",value:Ze(o),onChange:O,onStep:y})]}),Object(ee.jsxs)(Ce.a,{alignment:"center",justify:"between",className:"m-top-4",children:[Object(ee.jsx)(pn,{children:Object(ee.jsx)(Vt.a,{message:ln("borderStyle")})}),Object(ee.jsx)(mn,{"data-test-id":"table-border-style-select",dropdownClassName:n,options:cn.b.map(e=>({value:e,text:ye.a.text(ln("borderStyleOptions."+e))})),value:s,onChange:un(c)})]}),Object(ee.jsxs)(Ce.a,{alignment:"center",justify:"between",className:"m-top-4",children:[Object(ee.jsx)(pn,{children:Object(ee.jsx)(Vt.a,{message:ln("table.widthType")})}),Object(ee.jsx)(mn,{"data-test-id":"table-dimension-type-select",dropdownClassName:n,options:Object.values(cn.c).map(e=>({value:e,text:ye.a.text(ln("table."+e))})),value:nt(i)?cn.c.PERCENTAGE:cn.c.PIXELS,onChange:un(l)})]}),Object(ee.jsxs)(Ce.a,{alignment:"center",justify:"between",className:"m-top-4",children:[Object(ee.jsx)(pn,{children:Object(ee.jsx)(Vt.a,{message:ln("table.cellPadding")})}),Object(ee.jsx)(ct,{"data-test-id":"table-cell-padding-input",min:0,max:40,width:"144px",value:Ze(u),onChange:j,onStep:v})]}),Object(ee.jsxs)(Ce.a,{alignment:"center",justify:"between",className:"m-top-4",children:[Object(ee.jsx)(hn,{title:ye.a.text(ln("table.captionTooltip")),children:Object(ee.jsx)(Vt.a,{message:ln("table.caption")})}),Object(ee.jsx)(fn,{"data-test-id":"table-caption-toggle",size:"xs",checked:p,onChange:un(h,"checked")})]}),Object(ee.jsxs)(Ce.a,{alignment:"center",justify:"between",className:"m-top-4",children:[Object(ee.jsx)(hn,{title:ye.a.text(ln("table.responsiveTooltip")),children:Object(ee.jsx)(Vt.a,{message:ln("table.responsive")})}),Object(ee.jsx)(fn,{"data-test-id":"table-responsive-toggle",size:"xs",checked:m,onChange:un(f,"checked")})]}),Object(ee.jsx)(Xe.a,{className:"m-top-2",label:Object(ee.jsx)(gn,{message:ln("table.styleField")}),tooltip:ye.a.text(ln("table.styleFieldTooltip")),children:Object(ee.jsx)(bn,{"data-test-id":"table-custom-css-input",rows:3,resize:!1,value:C,onChange:T})})]})})}yn.propTypes=On;yn.displayName="TableStyleControlButton";var jn=ve()(yn).withConfig({displayName:"TableStyleControlButton__StyledTableStyleControlButton",componentId:"n4kasm-7"})(["",""],we.g);const vn=["tableWidth","width","onChange","onStep"],Cn=["className","dropdownClassName","disabled","tableWidth","dimensions","onDimensionChange","onBorderWidthChange"],xn=e=>"RichTextLib.table.toolbar."+e,En=e=>t=>{const{value:n}=t.target;e(n)},Tn=ve()(xe.a).withConfig({displayName:"TableCellStyleControlButton__StyleControlsContainer",componentId:"sc-149qqgf-0"})(["min-width:250px;max-width:300px;"]),Sn=ve()(rn.a).withConfig({displayName:"TableCellStyleControlButton__StyleFormLabel",componentId:"sc-149qqgf-1"})(["padding-top:4px;padding-bottom:4px;font-size:14px !important;font-weight:400;"]),In=ve()(nn.a).withConfig({displayName:"TableCellStyleControlButton__StyleSelect",componentId:"sc-149qqgf-2"})(["width:144px !important;"]),wn=e=>{let{tableWidth:t,width:n,onChange:r,onStep:i}=e,o=Object($.a)(e,vn);return nt(t)?Object(ee.jsx)(at,Object.assign({},o,{min:2,max:100,width:"144px",value:tt(n),onChange:r,onStep:i})):Object(ee.jsx)(ct,Object.assign({},o,{min:2,width:"144px",value:Ze(n),onChange:r,onStep:i}))},_n=({dropdownClassName:e,borderWidth:t,borderStyle:n,onBorderWidthChange:r,onBorderWidthStep:i,onBorderStyleChange:o})=>Object(ee.jsxs)(ee.Fragment,{children:[Object(ee.jsxs)(Ce.a,{alignment:"center",justify:"between",className:"m-top-4",children:[Object(ee.jsx)(Sn,{children:Object(ee.jsx)(Vt.a,{message:xn("borderWidth")})}),Object(ee.jsx)(ct,{"data-test-id":"cell-border-width-input",min:0,max:15,width:"144px",value:Ze(t),onChange:En(r),onStep:En(i)})]}),Object(ee.jsxs)(Ce.a,{alignment:"center",justify:"between",className:"m-top-4",children:[Object(ee.jsx)(Sn,{children:Object(ee.jsx)(Vt.a,{message:xn("borderStyle")})}),Object(ee.jsx)(In,{"data-test-id":"cell-border-style-select",dropdownClassName:e,options:cn.b.map(e=>({value:e,text:ye.a.text(xn("borderStyleOptions."+e))})),value:n,onChange:En(o)})]})]}),Nn=({dimensions:e,tableWidth:t,onWidthChange:n,onHeightChange:r,onWidthStep:i,onHeightStep:o})=>{const{width:a,height:s}=e;return Object(ee.jsxs)(ee.Fragment,{children:[Object(ee.jsxs)(Ce.a,{alignment:"center",justify:"between",className:"m-top-4",children:[Object(ee.jsx)(Sn,{children:Object(ee.jsx)(Vt.a,{message:xn("cell.width")})}),Object(ee.jsx)(wn,{"data-test-id":"cell-width-input",width:a,tableWidth:t,onChange:n,onStep:i})]}),Object(ee.jsxs)(Ce.a,{alignment:"center",justify:"between",className:"m-top-4",children:[Object(ee.jsx)(Sn,{children:Object(ee.jsx)(Vt.a,{message:xn("cell.height")})}),Object(ee.jsx)(ct,{"data-test-id":"cell-height-input",min:2,width:"144px",value:Ze(s),onChange:r,onStep:o})]})]})},An={className:J.a.string.isRequired,dropdownClassName:J.a.string.isRequired,disabled:J.a.bool.isRequired,tableWidth:J.a.string.isRequired,dimensions:J.a.shape({height:J.a.number,width:J.a.number}),onDimensionChange:J.a.func.isRequired,onBorderWidthChange:J.a.func.isRequired};function Dn(e){const{className:t,dropdownClassName:n,disabled:r,tableWidth:i,dimensions:o,onDimensionChange:a,onBorderWidthChange:s}=e,c=Object($.a)(e,Cn),l=(e,t)=>{const{value:n}=t.target;a({dimensions:Object.assign({},o,{[e]:n}),dimensionType:e})},[u,d]=Ne(s),[p,h]=Ne(l);return Object(ee.jsx)(Te.a,{"data-test-id":"table-cell-style-control-button",use:"unstyled",buttonText:ye.a.text(Object(we.h)("tableCellStyle")),buttonUse:"transparent",buttonClassName:t,autoPlacement:"horiz",placement:"bottom right",closeOnMenuClick:!1,dropdownClassName:n,animateOnToggle:!1,disabled:r,arrowSize:"medium",children:Object(ee.jsxs)(Tn,{"data-test-id":"table-cell-style-control-content",className:"m-all-4",_size:"small",children:[Object(ee.jsx)(tn.a,{className:"m-bottom-4",children:Object(ee.jsx)(Vt.a,{message:xn("cell.title")})}),_n(Object.assign({},c,{dropdownClassName:n,onBorderWidthChange:u,onBorderWidthStep:d})),Nn({dimensions:o,tableWidth:i,onWidthChange:p.bind(null,"width"),onHeightChange:p.bind(null,"height"),onWidthStep:h.bind(null,"width"),onHeightStep:h.bind(null,"height")})]})})}Dn.propTypes=An;Dn.displayName="TableCellStyleControlButton";var kn=ve()(Dn).withConfig({displayName:"TableCellStyleControlButton__StyledTableCellStyleControlButton",componentId:"sc-149qqgf-3"})(["",""],we.g);const Pn=["contextualNodeAttributes"],Rn=["contextualNodeAttributes"];function Fn(e){const t=(t,n,{dimensions:r,dimensionType:i})=>{e.fire("hsDimensionChange",{target:t,dimensions:r,dimensionType:i,contextualNodeAttributes:n})},n=(t,n,r)=>{e.fire("hsBorderWidthChange",{target:t,width:r,borderStyle:n})},r=(t,n)=>{e.fire("hsBorderStyleChange",{target:t,borderStyle:n})},o=(t,n,r)=>{e.fire("hsTableDimensionTypeChange",{target:t,dimensionType:r,tablePixelWidth:n})},a=(t,n)=>{e.fire("hsCellPaddingChange",{target:t,cellPadding:n})},s=(t,n)=>{e.fire("hsTableCaptionChange",{target:t,hasCaption:n})},c=(t,n)=>{e.fire("hsTableResponsiveChange",{target:t,isResponsive:n})},l=(t,n)=>{e.fire("hsTableCustomStyleChange",{target:t,tableStyle:n})};i.a.canvas.addButton(e,ae.cb,{renderControl:e=>{const{contextualNodeAttributes:t}=e,i=Object($.a)(e,Pn),{tableWidth:u,tablePixelWidth:d,tableCellPadding:p,tableBorderWidth:h,tableBorderStyle:m,tableCaption:f,tableIsResponsive:g,tableStyle:b,activeElement:O}=t;return Object(ee.jsx)(jn,Object.assign({},i,{dropdownClassName:"mce-hubspot-dropdown",tableWidth:u,cellPadding:p,borderWidth:h,borderStyle:m,tableCaption:f,tableIsResponsive:g,tableStyle:b,onBorderWidthChange:n.bind(null,O,m),onBorderStyleChange:r.bind(null,O),onTableDimensionTypeChange:o.bind(null,O,d),onCellPaddingChange:a.bind(null,O),onTableCaptionChange:s.bind(null,O),onTableResponsiveChange:c.bind(null,O),onTableCustomStyleChange:l.bind(null,O)}))}});i.a.canvas.addButton(e,ae.bb,{renderControl:e=>{const{contextualNodeAttributes:i}=e,o=Object($.a)(e,Rn),{cellBorderWidth:a,cellBorderStyle:s,cellWidth:c,cellHeight:l,tableWidth:u,activeElement:d}=i,p={width:c,height:l};return Object(ee.jsx)(kn,Object.assign({},o,{dropdownClassName:"mce-hubspot-dropdown",tableWidth:u,borderWidth:a,borderStyle:s,dimensions:p,onBorderWidthChange:n.bind(null,d,s),onBorderStyleChange:r.bind(null,d),onDimensionChange:t.bind(null,d,i)}))}})}const Ln=()=>{},Mn=()=>null;function Bn(e){const t=Object(k.g)(e,W.n)||Object(k.g)(e,W.o),n=Object(k.g)(e,W.y)||Object(k.g)(e,W.z),r=Object(k.g)(e,W.P)||Object(k.g)(e,W.Q),i=Object(k.g)(e,W.D)||Object(k.g)(e,W.E),o=Object(k.g)(e,W.x),a=Object(k.g)(e,W.O);(t||n||r||i||a)&&be(e);(n||r||i||a)&&Ge(e);(n||r||i||o||a)&&Nt(e);(r||o||a)&&Pt(e);(o||a)&&Oe(e);if(o){Ut(e);Qt(e)}if(a){en(e);Fn(e)}}const Un={};function Vn(e){e.on("focusin",()=>{Un[e.id]=!0});e.on("remove",()=>{delete Un[e.id]});e.on("NodeChange",t=>{const{element:n}=t;let r,i,o={},a={};if(e.nodeChangeHandlers){e.nodeChangeHandlers.forEach(s=>{const{eventKey:c,includeInlineTargets:l=!1,isActiveNodeHandler:u=Mn,getActiveNodeAttributes:d=Ln,getFormattingAttributes:p,contextualToolbar:h}=s;"function"==typeof p&&(a=Object.assign({},a,p(t)));if(!Un[e.id])return;const m=u({element:n}),f=n&&n.hasAttribute(z.a),g={element:null};if(m){g.element=m;if(h){r=h;i=c;o=Object.assign({},d(m),{activeElement:m})}}else l&&f&&(g.element=n);c&&e.fire("hsNodeChange:"+c,g)});e.fire("ContextualToolbarChange",{contextualToolbar:r,contextualToolbarType:i,contextualNodeAttributes:Object.assign({},a,o)})}});Bn(e)}function Hn(e){"5"===i.a.majorVersion&&e.getParam("legacy_force_p_newlines")&&e.on("init",()=>{e.settings.force_p_newlines=!0})}var qn=Hn;n.d(t,"a",(function(){return Wn}));i.a.IconManager&&i.a.IconManager.add("default",{icons:{}});function Gn(e){c(e);b(e);E(e);F(e);V(e);Vn(e);qn(e);return{api:G(e)}}const Wn=W.m;i.a.PluginManager.add(Wn,Gn)},,,,,function(e,t,n){"use strict";var r=n(1212),i=n.n(r),o=n(1242),a=n(1280),s=n(1275);let c=null;const l=(e,t)=>{const{apiClient:n}=e.settings;if(!Object(s.f)(t)){return Object(a.a)(n,t)().then(e=>{Object(s.a)(t,e);return e})}c=Promise.resolve();return c};var u=n(2),d=n(4),p=n(2654),h=n(1279),m=n(2634),f=n(1267),g=n(46),b=n(1278),O=n(1237),y=n(1239),j=n(330),v=n(324),C=n(1277),x=n(1232),E=n(1283),T=n(2817),S=n(1294),I=n(1240),w=n(1295);const _=({path:e="",defaultValue:t,filter:n})=>null==t?`{{ ${e}${n?"|"+n:""} }}`:`{{ personalization_token('${e}', '${t}')${n?"|"+n:""} }}`,N=e=>!!e[S.d.PROPERTY_FILTERS_CALLBACK],A=e=>{if(!e)return S.b;const t=N(e);return t?new RegExp(`{{-?\\s*([a-zA-Z0-9_()\\-[\\]]+(?:[.][a-zA-Z0-9_()\\-[\\]]+)*)\\s*${t?S.a:""}\\s*-?}}`,"g"):S.b},D=e=>{if(!e)return S.c;const t=N(e);return t?new RegExp(`{{-?\\s*personalization_token\\(\\s*["']([a-zA-Z0-9_()\\-[\\]]+(?:[.][a-zA-Z0-9_()\\-[\\]]+)*)["']\\s*,\\s*["'](.*?)["']{1}\\s*\\)${t?S.a:""}\\s*-?}}`,"g"):S.c},k=e=>""===e?"empty":null===e?"global":"local";function P(e){const t=e.settings?e.settings[I.b]:null;return t&&t[o.p]?t[o.p]:null}const R=(e="")=>{switch(e.toLowerCase()){case C.m.CONTACT:return"contacts";case C.m.COMPANY:return"companies";case C.m.DEAL:return"deals";case C.m.QUOTE:case C.m.LINE_ITEM:return"salesQuote";case C.m.TICKET:return"ticket";case C.m.INVOICE:return"invoice";case C.m.CART:return"cart";default:return"hubDB"}},F=e=>{const t=e.split(".");return t.length?1===t.length?{property:t[0]}:{category:t[0],property:t[1]}:null},L=e=>{const t=Object(E.a)(e);return t?F(t):null},M=(e,t)=>{const n=(Object(s.f)(t)||{})[e];return n?n.label:""};const B=(e,t,n)=>{const r=n+"...",i=e.measureText(r).width;return i<=t?{truncatedLabel:r,labelWidth:i}:B(e,t,n.slice(0,n.length-1).trim())},U={truncateTokenLabelWithEllipsis:B},V=4,H=e=>Math.floor(e/V)*V,q=(e,t,n,r,i)=>{const o=26*V,a=7*V,s=16*V,c=8*V,l=16*V,u=`${l}px ${Object(T.g)()}`,d=`${l}px ${j.g}`,p=document.createElement("canvas"),h=p.getContext("2d");if(!h)return null;const m={color:v.PANTERA,backgroundColor:v.OLAF},f=R(t);try{h.font=d}catch(e){console.error("Could not set font on context",e)}const g=h.measureText(f).width+c+s;try{h.font=u}catch(e){console.error("Could not set font on context",e)}let b=h.measureText(e).width,O=e;if("number"==typeof r){const t=r*V-g;b>t&&({truncatedLabel:O,labelWidth:b}=U.truncateTokenLabelWithEllipsis(h,t,e))}const y=g+b;p.setAttribute("width",H(y)+"px");p.setAttribute("height",H(o)+"px");h.fillStyle=m.color;h.textAlign="left";try{h.font=d}catch(e){console.error("Could not set font on context",e)}let C=s/2,x=o-a;h.fillText(f,H(C),H(x));try{h.font=u}catch(e){console.error("Could not set font on context",e)}C=y-b-s/2;x=o-a;h.fillText(O,H(C),H(x));const E=document.createElement("img");E.setAttribute("data-mce-placeholder","true");E.setAttribute("data-mce-resize","false");E.setAttribute("data-mce-truncated-label",String(O!==e));E.classList.add("mce-token");E.setAttribute("style",`width: ${Math.floor(parseInt(p.getAttribute("width")||"",10)/V+2)}px !important; height: ${Math.floor(parseInt(p.getAttribute("height")||"",10)/V+2)}px !important; background: ${i?v.CANDY_APPLE_LIGHT:m.backgroundColor}; border: 1px solid ${i?v.CANDY_APPLE_DARK:v.FLINT}; border-radius: 2px; vertical-align: middle; box-sizing: border-box;`);E.setAttribute("src",p.toDataURL());n(E);return E},G=(e,t,n)=>{const r=t.find(e=>n===e.toLowerCase()&&n!==e);r&&Object(y.b)(e,"tinymcePersonalize",O.fb,{category:n,fqn:r});return!!r},W=(e,t,n,r,i)=>{let o=n;r.forEach(({TOKEN_PATTERN:n,USES_DEFAULT:r})=>{o=r?o.replace(n,(n,r,o,a)=>{if(r.startsWith(w.a))return n;const s=r.split(".")[0];return G(e,t,s)?n:i(Object.assign({path:r,category:s,defaultValue:o},"string"==typeof a&&{filter:a}))||n}):o.replace(n,(n,r,o)=>{if(r.startsWith(w.a))return n;const a=r.split(".")[0];return G(e,t,a)?n:i(Object.assign({path:r,category:a},"string"==typeof o&&{filter:o}))||n})});return o},z=i.a.html.Entities.getEncodeFunc("named"),$=(e,t,n,r,i)=>{const o=i=>{const o=W(e,t,z(i.textContent),n,r),a=Object(x.f)(`<div>${o}</div>`).body.firstChild;return a&&a.childNodes};Object(x.b)(e,e=>{const t=e.createNodeIterator(e.body,NodeFilter.SHOW_TEXT,e=>{n.forEach(({TOKEN_PATTERN:e})=>{e.lastIndex=0});const t=e.textContent||"";return n.some(({TOKEN_PATTERN:e})=>e.test(t))?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}),r=[];let i=t.nextNode();for(;i;){r.push(i);i=t.nextNode()}Object(x.g)(r,o)});Object(x.a)(e,e=>{const t=e.querySelectorAll("[data-mce-token-path]:not([data-mce-rss-link]),[data-mce-property-name]:not([data-mce-rss-link])");Object(x.g)(t,i)})},K=()=>{},Y=(e,t={})=>{const n=P(e),r=(n&&n[S.d.PROPERTY_FILTERS_CALLBACK]||K)(t);Object(g.a)(["undefined","string"].includes(typeof r),"PROPERTY_FILTERS_CALLBACK must return a STRING");return r},X=e=>function(t,n,r=""){const{fieldType:i="",category:o,name:a,originalProperty:s,isHubSpotDefined:c}=t;let l;l=Object(b.e)(o,a)?a:[o,a,n].filter(e=>e).join(".");const u=Y(e,s),d=document.createTextNode(_({path:l,defaultValue:r,filter:u}));if(d.textContent){e.insertContent(d.textContent);Object(y.b)(e,"tinymceEditPersonalizationToken",O.z,{version:"datatoken",tokenCategory:o,tokenName:a,isHubspotDefined:c,defaultValueType:k(r),fieldType:i})}},J=e=>function(t,n,r=""){const{fieldType:i="",category:o,name:a,originalProperty:s,isHubSpotDefined:c}=t;let l;l=Object(b.e)(o,a)?a:[o,a,n].filter(e=>e).join(".");const u=Y(e,s);e.insertContent(_({path:l,defaultValue:r,filter:u}));Object(y.b)(e,"tinymceInsertPersonalizationToken",O.P,{version:"datatoken",tokenCategory:o,tokenName:a,isHubspotDefined:c,defaultValueType:k(r),fieldType:i})},Q=e=>function({tokenPath:t,defaultValue:n,trackInteractionObj:r}){e.insertContent(_({path:t,defaultValue:n}));Object(y.b)(e,"tinymceInsertPersonalizationToken",O.P,{version:"datatoken",tokenCategory:r.tokenCategory,tokenName:r.tokenName,isHubspotDefined:r.isHubspotDefined,defaultValueType:k(n),fieldType:r.fieldType})},Z=e=>function(t){e.undoManager.transact(()=>{e.dom.remove(t)})};var ee=n(40),te=n(2734),ne=n(477),re=n(41),ie=n.n(re),oe=n(501),ae=n(279),se=n(605);const ce="edit",le="insert";var ue=n(45);const de={mode:ie.a.oneOf([le,ce])},pe=({mode:e})=>{const t=e===le?"data-token-picker.title.insert":"data-token-picker.title.edit";return Object(ue.jsx)(se.a,{children:Object(ue.jsx)(ae.a,{message:t})})};pe.propTypes=de;pe.displayName="BrowserTitle";var he=pe,me=n(281),fe=n(2741),ge=n(2655);const be="mce-prevent-blur",Oe={value:ie.a.string,options:ie.a.arrayOf(oe.c.isRequired).isRequired,onChange:ie.a.func.isRequired},ye=({value:e,options:t,onChange:n})=>Object(ue.jsx)(ge.a,{"data-test-id":"token-type-select",searchClassName:be,onChange:n,options:t,placeholder:"Select a type",value:e});ye.propTypes=Oe;ye.displayName="CategorySelect";var je=ye,ve=n(2682),Ce=n(0),xe=n.n(Ce),Ee=n(288),Te=n.n(Ee),Se=n(2744),Ie=n(10),we=n(297),_e=n(298),Ne=n(301),Ae=n(2745),De=n(460),ke=n(461),Pe=n(339),Re=n(448),Fe=n(443),Le=n(313),Me=n(478),Be=n(772),Ue=n(334),Ve=n(434),He=n(2735),qe=n(2679);const Ge=["forwardedRef","highlighted","id","itemComponent","onMouseEnter","option","_useButton","style"],We=" ";class ze extends ee.PureComponent{getButtonClassName(){return"drilldown-typeahead-result-label uiTypeaheadResults__item truncate-text"}getClassName({highlighted:e,option:{disabled:t,dropdownClassName:n}}){return Te()(n,t?"drilldown-typeahead-result--disabled":e&&"drilldown-typeahead-result--highlighted")}getLabel({option:{buttonText:e,text:t,value:n}}){const r=t||(null==n?"":n.toString());return null==e?r:e}getTitle({option:{text:e,title:t,value:n}}){return""===t?null:t||e||(null==n?"":n.toString())}renderLabel({computedLabel:e}){return e||We}renderContent({renderedLabel:e}){return Object(ue.jsx)("span",{className:"drilldown__item__label","data-option-text":!0,children:e})}renderButton({rest:e},{computedButtonClassName:t,computedTitle:n,renderedContent:r}){const{option:i}=this.props;return i.children?Object(ue.jsx)(p.a,{placement:"left",title:i.disabledTooltip,disabled:!i.disabled,children:Object(ue.jsx)(Fe.a,Object.assign({},e,{className:t,tabIndex:-1,title:n,use:"unstyled",children:Object(ue.jsxs)(Ve.a,{align:"center",children:[Object(ue.jsx)(He.a,{grow:1,children:r}),Object(ue.jsx)(He.a,{children:Object(ue.jsx)(qe.a,{name:"right"})})]})}))}):Object(ue.jsx)(p.a,{placement:"left",title:i.disabledTooltip,disabled:!i.disabled,children:Object(ue.jsx)(Fe.a,Object.assign({},e,{className:t,tabIndex:-1,title:n,use:"unstyled",children:r}))})}render(){const e=this.props,{forwardedRef:t,highlighted:n,id:r,itemComponent:i,onMouseEnter:o,option:a,_useButton:s,style:c}=e,l=Object(u.a)(e,Ge),d=n||null,p=this.getClassName({highlighted:n,option:a}),h=this.getButtonClassName(),m=this.getTitle({option:a}),f=this.getLabel({option:a}),g=this.renderLabel({computedLabel:f});let b=this.renderContent({renderedLabel:g});b=s?this.renderButton({rest:l},{computedButtonClassName:h,computedTitle:m,renderedContent:b}):b;return"function"==typeof i?Object(ue.jsx)(i,Object.assign({},l,{"aria-selected":d,id:r,onMouseEnter:o,option:a,className:p,"data-option-value":a.value,role:"option",children:b})):Object(ue.jsx)(i,{"aria-selected":d,className:p,"data-test-id":"test-drilldown-option-"+a.value,"data-option-value":a.value,id:r,onMouseEnter:o,role:"option",ref:t,style:c,children:b})}}const $e=Object(ee.forwardRef)((e,t)=>Object(ue.jsx)(ze,Object.assign({},e,{forwardedRef:t})));ze.displayName="DrilldownResultsItem";$e.propTypes={highlighted:ie.a.bool.isRequired,itemComponent:Object(Ue.a)({propTypes:{"aria-selected":ie.a.bool,"data-option-value":ie.a.string,id:ie.a.string,className:ie.a.string,option:oe.b,onMouseEnter:ie.a.func,children:ie.a.node}}),option:oe.b.isRequired,_useButton:ie.a.bool};$e.defaultProps={highlighted:!1,itemComponent:"li",_useButton:!0};var Ke=$e,Ye=n(507),Xe=n(452),Je=n(510),Qe=n(2687),Ze=n(511),et=n(500);const tt=["autoComplete","autoFocus","ButtonContent","buttonSize","buttonStyle","buttonUse","cache","caretRenderer","className","closeOnOutsideClick","closeOnTargetLeave","disabled","dropdownClassName","dropdownContentRef","dropdownFooter","dropdownHeader","error","id","initiallyOpen","inputRef","isOpen","loadOptions","menuWidth","minimumSearchCount","multi","onChange","onPaste","options","placeholder","placement","readOnly","resetValue","searchClassName","searchPlaceholder","resetOption","resultsClassName","searchable","SearchInput","selectComponent","selectRef","value","valueRenderer","_forcePlaceholder"],nt={display:"none"},rt={buttonText:ie.a.node.isRequired},it=()=>{},ot=e=>{const t=/^on[A-Z]/;return Object.keys(e).filter(e=>"onClose"!==e&&"onInputChange"!==e&&"onInputKeyDown"!==e&&"onOpen"!==e&&"onInputValueChange"!==e).reduce((n,r)=>{if(!r)return n;r.match(t)&&(n[r]=e[r]);return n},{})};class at extends ee.Component{constructor(...e){super(...e);this.state={inputCache:{},inputValue:"",searchCount:0};this.focus=()=>{const{onOpenChange:e,isOpen:t}=this.props;t||e(Object(_e.a)(!0))};this.selectRefCallback=e=>{const{selectRef:t}=this.props;this._selectRef=e;const n=this.getInternalSelect();n&&this.setState({searchCount:n._flatOptions.length});t&&t(e)};this.getInternalSelect=()=>this._selectRef?this._selectRef.select?this._selectRef.select:this._selectRef:null;this.handleInputKeyDown=e=>{const t=this.getInternalSelect();if(t){t.handleKeyDown(e);setTimeout(()=>{this.forceUpdate()})}};this.handleInputChange=e=>{const{onInputValueChange:t}=this.props;Object(we.a)(t,e);const n=this.getInternalSelect();n&&n.handleInputChange(e);this.setState({inputValue:e.target.value})};this.handleInputFocus=()=>{const e=this.getInternalSelect();e&&e.setState({isOpen:!0})};this.handleFocusLeave=()=>{};this.handleRemoveValueClick=(e,t)=>{const{onChange:n,value:r}=this.props,i=this.getInternalSelect();if(i){const t=i.getValueArray(i.props.value);i.setValue(t.filter(t=>t.value!==e))}else{n((r||[]).map(e=>"object"==typeof e?e:this.getOptionForSingleValue(e)).filter(t=>t.value!==e))}t.stopPropagation()};this.hasSearchbox=({loadOptions:e,minimumSearchCount:t,searchable:n})=>!!n&&(!!e||this.state.searchCount>=t||Boolean(this.state.inputValue));this.getOptionForSingleValue=e=>{const{options:t}=this.props;if("object"==typeof e&&e.value)return e;const n=Object(Ze.b)(t,e);return n||{text:e,value:e}};this.getButtonContent=({loadOptions:e,options:t,placeholder:n,resetOption:r,resetValue:i,value:o,valueRenderer:a,_forcePlaceholder:s})=>s?{valueIsValid:!0,buttonText:n}:Object(Ze.a)({async:!!e,options:t,placeholder:n,resetOption:r,resetValue:i,value:o,valueRenderer:a});this.renderMultiValues=({disabled:e,readOnly:t,placeholder:n,value:r,valueRenderer:i})=>Array.isArray(r)&&0!==r.length?r.map(n=>{const r=this.getOptionForSingleValue(n),o=this.handleRemoveValueClick.bind(this,r.value);return Object(ue.jsx)(Qe.a,{_bordered:!0,closeable:!e&&!t&&!1!==r.clearableValue,onCloseClick:o,use:r.tagUse||"default",children:i(r)},r.value)}):n;this.renderSearch=({autoComplete:e,initiallyOpen:t,inputRef:n,onPaste:r,searchClassName:i,SearchInput:o,searchPlaceholder:a},{hasSearchbox:s})=>{let c,l;const u=this.getInternalSelect();if(u){const e=u.getValueArray(u.props.value);c=`${u._instancePrefix}-option-${u.getFocusableOptionIndex(e[0])}`;l=u._instancePrefix+"--list"}return Object(ue.jsx)(Je.a,{"aria-activedescendant":c,"data-test-id":"datatoken-picker-search","aria-owns":l,autoComplete:e,autoFocus:!t,className:Te()(i,!s&&"sr-only"),Input:o,inputRef:n,onKeyDown:this.handleInputKeyDown,onChange:this.handleInputChange,onFocus:this.handleInputFocus,onPaste:r,placeholder:a,role:"combobox"})}}componentDidMount(){const{autoload:e,cache:t,isOpen:n,loadOptions:r,selectComponent:i}=this.props;if(e&&r&&!n){this._autoloadSelectEl=document.createElement("div");const n=i;xe.a.render(Object(ue.jsx)(n,{autoload:e,cache:void 0===t?this.state.inputCache:t,loadOptions:r}),this._autoloadSelectEl)}}componentWillUnmount(){if(this._autoloadSelectEl){xe.a.unmountComponentAtNode(this._autoloadSelectEl);this._autoloadSelectEl=null}}render(){const e=this.props,{autoComplete:t,autoFocus:n,ButtonContent:r,buttonSize:i,buttonStyle:o,buttonUse:a,cache:s,caretRenderer:c,className:l,closeOnOutsideClick:d,closeOnTargetLeave:p,disabled:h,dropdownClassName:m,dropdownContentRef:f,dropdownFooter:g,dropdownHeader:b,error:O,id:y,initiallyOpen:j,inputRef:v,isOpen:C,loadOptions:x,menuWidth:E,minimumSearchCount:T,multi:S,onChange:I,onPaste:w,options:_,placeholder:N,placement:A,readOnly:D,resetValue:k,searchClassName:P,searchPlaceholder:R,resetOption:F,resultsClassName:L,searchable:M,SearchInput:B,selectComponent:U,value:V,valueRenderer:H,_forcePlaceholder:q}=e,G=Object(u.a)(e,tt),{buttonText:W,valueIsValid:z}=this.getButtonContent({disabled:h,readOnly:D,loadOptions:x,multi:S,options:_,placeholder:N,resetOption:F,resetValue:k,value:V,valueRenderer:H,_forcePlaceholder:q}),$=this.hasSearchbox({loadOptions:x,minimumSearchCount:T,searchable:M}),K=U;return Object(ue.jsxs)(Xe.a,Object.assign({},Object(et.a)(G),ot(G),{_useNativeButton:!1,"aria-invalid":null!=O?O:!z,autoFocus:n,buttonText:null==r?W:Object(ue.jsx)(r,{buttonText:W}),buttonSize:i,buttonUse:a,caretRenderer:c,className:l,closeOnOutsideClick:d,closeOnTargetLeave:p,disabled:h,dropdownClassName:m,dropdownContentRef:f,hasSearchbox:$,id:y,menuWidth:E,multiline:S,onFocusLeave:this.handleFocusLeave,onOpenComplete:this.handleOpenComplete,open:C,placement:A,readOnly:D,style:o,children:[this.renderSearch({autoComplete:t,initiallyOpen:j,inputRef:v,onPaste:w,searchClassName:P,SearchInput:B,searchPlaceholder:R},{hasSearchbox:$}),b,Object(ue.jsx)("span",{className:Te()("drilldown-typeahead-results",L),"data-dropdown-results":!0,"data-test-id":"drilldown-typeahead-results-container","data-async-options":!!x,children:Object(ue.jsx)(K,Object.assign({},G,{autosize:!1,cache:void 0===s?this.state.inputCache:s,disabled:h,isOpen:!0,loadOptions:x,multi:S,onChange:I,options:_,readOnly:D,ref:this.selectRefCallback,resetValue:k,scrollMenuIntoView:!1,style:nt,tabIndex:"-1",value:V,valueRenderer:it}))}),g]}))}}at.displayName="DrilldownSelectWithButtonAnchor";at.propTypes={autoComplete:ie.a.string,autoFocus:ie.a.bool,autoload:ie.a.bool,ButtonContent:Object(Ue.a)({propTypes:rt}),buttonSize:Xe.a.propTypes.buttonSize,buttonStyle:ie.a.object,buttonUse:Xe.a.propTypes.buttonUse,cache:ie.a.oneOfType([ie.a.object,ie.a.bool]),caretRenderer:Xe.a.propTypes.caretRenderer,className:ie.a.string,closeOnOutsideClick:Xe.a.propTypes.closeOnOutsideClick,closeOnTargetLeave:Xe.a.propTypes.closeOnTargetLeave,disabled:ie.a.bool,dropdownClassName:ie.a.string,dropdownContentRef:ie.a.func,dropdownFooter:ie.a.node,dropdownHeader:ie.a.node,error:ie.a.bool,id:ie.a.string,initiallyOpen:ie.a.bool.isRequired,inputRef:Le.a.isRequired,menuWidth:ie.a.oneOfType([ie.a.number,ie.a.oneOf(["auto"])]),minimumSearchCount:ie.a.number,multi:ie.a.bool,isOpen:ie.a.bool.isRequired,loadOptions:ie.a.func,onChange:ie.a.func,onInputValueChange:ie.a.func,onOpenChange:ie.a.func,onPaste:ie.a.func,options:ie.a.arrayOf(oe.b),placeholder:ie.a.node,placement:ie.a.oneOf(Ne.c),readOnly:ie.a.bool,resetOption:oe.c.isRequired,resetValue:oe.e,resultsClassName:ie.a.string,searchable:ie.a.bool,searchClassName:ie.a.string,SearchInput:ie.a.elementType,searchPlaceholder:ie.a.string,selectComponent:ie.a.func.isRequired,selectRef:ie.a.func,value:ie.a.any,valueRenderer:ie.a.func,_forcePlaceholder:ie.a.bool};at.defaultProps=Object.assign({},Xe.a.defaultProps,{searchable:!0});var st=Object(Ye.a)(at);const ct=(e,t)=>{if(!t)return;const n=[];for(let r=0;r<t.length;++r){const i=t[r];if(-1===i.text.toLowerCase().indexOf(e)||i.options){if(i.options&&i.options.length>0){const t=ct(e,i.options);t&&t.length>0&&n.push(...t)}}else n.push(i)}return n},lt=["children","value"],ut=["autoFocus","ButtonContent","buttonSize","buttonUse","className","closeOnTargetLeave","disabled","error","id","ignoreAccents","ignoreCase","inputRef","menuRenderer","menuWidth","noResultsText","onChange","onInputValueChange","onOpenChange","onSelectedOptionChange","open","placeholder","readOnly","resetValue","searchable","searchClassName","searchPlaceholder","searchPromptText","tabIndex","valueComponent","valueRenderer"],{stripDiacritics:dt}=Se.a,pt={default:"",small:"drilldown-form__control--small"},ht=e=>e.map(e=>{const{children:t,value:n}=e,r=Object(u.a)(e,lt);return Object.assign({value:t&&t.length>0?void 0:n,options:t},r)}),mt=(e,t=[])=>{for(let n=0;n<t.length;++n){if(t[n].value===e)return[t];if(t[n].children){const r=mt(e,t[n].children);if(r)return[t,...r]}}},ft=(e,t=[])=>{for(let n=0;n<t.length;++n){if(t[n].value===e)return t[n];if(t[n].children){const r=ft(e,t[n].children);if(r)return r}}},gt=({placeholder:e,resetValue:t},{resetOption:n})=>{const r={buttonText:Object(De.a)(e),dropdownText:Object(De.a)(e),value:t};return n&&n.buttonText===r.buttonText&&n.value===r.value?null:{resetOption:r}},bt=(e,t,n={})=>{const{options:r}=e,{searchableOptions:i,value:o}=t,a="string"==typeof n.inputValue?n.inputValue:t.inputValue;if(r){let e,t;a&&(e=ct(a.toLowerCase(),i));t=o?mt(o,r):[r];return{filteredOptions:e,optionsStack:t}}return null},Ot=(e,t)=>e.options?Object.assign({searchableOptions:ht(e.options)},bt(e,t)):null;class yt extends ee.Component{static getDerivedStateFromProps(e,t){const n=gt(e,t);let r,i,o;const a=e.value;!t.prevOpen&&e.open?r=Ot(e,t):t.prevOpen&&!e.open&&(i={inputValue:"",initiallyOpen:!1});t.prevOpen!==e.open&&(o={prevOpen:e.open});return Object.assign({value:""!==a?a:null},n,r,i,o)}constructor(e){super(e);this.state={controlWidth:0,initiallyOpen:!1,inputValue:"",optionsStack:[],prevOpen:!1,resetOption:null,searchableOptions:null,value:""};this.popoverRef=Object(ee.createRef)();this.optionRendererProxy=e=>{const{optionRenderer:t}=this.props;return null==t?this.defaultOptionRenderer(e):t(e)};this.defaultValueRenderer=e=>{const{itemComponent:t,valueComponent:n}=this.props;return Object(ue.jsx)(Ke,{"aria-invalid":e.invalid,itemComponent:n||t,option:Object.assign({},e,{help:void 0}),_useButton:!1,_useDropdownText:!1},e.value)};this.filterOptionsProxy=e=>e;this.handleChange=e=>{const{onOpenChange:t,onChange:n,onSelectedOptionChange:r}=this.props,{value:i}=this.state;Object(we.a)(r,Object(_e.a)(e));let o=null;Array.isArray(e)?o=e.reduce((e,t)=>{if(t){const{value:n}=t,r=e.indexOf(n);r>-1?e.splice(r,1):e.push(n)}return e},[]):e&&(o=e.value);if(e.children){t(Object(_e.a)(!0));const{optionsStack:n}=this.state;this.setState({optionsStack:[...n,e.children]})}else{t(Object(_e.a)(!1));if(o!==i){this.setState({value:o});n(Object(_e.a)(e))}}};this.handleInputKeyDown=e=>{const{onInputKeyDown:t}=this.props;Object(we.a)(t,e);e.defaultPrevented};this.triggerOpen=()=>{const{onOpenChange:e}=this.props;e(Object(_e.a)(!0))};this.handleOpenChange=e=>{const{onOpenChange:t}=this.props;Object(we.a)(t,e)};this.handleInputChange=e=>{const{onInputChange:t}=this.props;Object(we.a)(t,e);this.setState({inputValue:e});return e};this.handleInputValueChange=e=>{const{onInputValueChange:t}=this.props;Object(we.a)(t,e);this.setState(Object.assign({inputValue:e.target.value},bt(this.props,this.state,{inputValue:e.target.value})))};this.focus=()=>{try{this._anchorRef.focus()}catch(e){}};this.handleAutosize=()=>{this.popoverRef.current&&this.popoverRef.current.reposition()};this.anchorRefCallback=e=>{const{controlWidth:t,target:n}=this.state;this._anchorRef=e;const r=Object(Ce.findDOMNode)(this._anchorRef),i=this.computeControlWidth(r);n===r&&t===i||this.setState({controlWidth:i,target:r})};this.selectRefCallback=()=>{const e=this.getInternalSelect();e&&(e.selectValue=this.selectValueProxy.bind(this,e.selectValue))};this.getInternalSelect=()=>this._anchorRef?this._anchorRef.getInternalSelect():null;const t=gt(e,this.state);this.state=Object.assign({},this.state,t,{initiallyOpen:e.open,prevOpen:e.open})}componentDidUpdate(e){const t=Object(Ce.findDOMNode)(this._anchorRef);if(!t)return;const n=this.computeControlWidth(t);n!==this.state.controlWidth&&this.setState({controlWidth:n});!e.open&&this.props.open&&this.focus()}getOptions(){const{options:e}=this.props,{optionsStack:t,inputValue:n,filteredOptions:r,value:i}=this.state;let o,a=e;n&&r?a=r:t.length&&(a=t[t.length-1]);if(a&&!a.some(e=>e.value===i)){const t=ft(i,e);t&&(o={disabled:!0,hide:!0,text:t.text,value:t.value})}return o?[...a,o]:a}defaultOptionRenderer(e){if(e.hide)return null;const{itemComponent:t,optionComponent:n}=this.props;return Object(ue.jsx)(Ke,{itemComponent:n||t,option:e,style:e.dropdownStyle})}getDefaultFilterOptionsFunc(){return Se.a.defaultProps.filterOptions}selectValueProxy(e,t){e(t)}getMenuWidth(){const{menuWidth:e}=this.props;return"auto"===e?"":"number"==typeof e?e:Math.max(this.state.controlWidth,Re.a)}computeControlWidth(e){const{open:t}=this.props;if(!e||!t)return 0;const n=e.getBoundingClientRect().width;return(window.chrome?Math.floor(n):n)-2}getNoResultsText({noResultsText:e}){if(null!=e)return Object(De.a)(e);const{inputValue:t}=this.state;return t?d.a.text("data-token-picker.drilldownSelect.noResults"):d.a.text("data-token-picker.drilldownSelect.typeToSearch")}renderBackButton(){const{rootBreadcrumb:e}=this.props,{inputValue:t,optionsStack:n}=this.state;if(t||n.length<=1)return null;let r;r=e?Object(ue.jsx)(Be.a,{className:Te()("display-inline",be),children:Object(ue.jsx)(Fe.a,{onClick:()=>{n.pop();this.setState({optionsStack:n})},use:"link",children:Object(ue.jsx)(ae.a,{message:"data-token-picker.drilldownSelect.backBreadcrumbOption",options:{breadcrumbPath:e}})})}):Object(ue.jsx)(Fe.a,{className:be,onClick:()=>{n.pop();this.setState({optionsStack:n})},use:"link",children:Object(ue.jsx)(ae.a,{message:"data-token-picker.drilldownSelect.backOption"})});return Object(ue.jsx)("div",{className:"drilldown__header-container",children:r})}render(){const e=this.props,{autoFocus:t,ButtonContent:n,buttonSize:r,buttonUse:i,className:o,closeOnTargetLeave:a,disabled:s,error:c,id:l,ignoreAccents:d,ignoreCase:p,inputRef:h,menuRenderer:m,menuWidth:f,noResultsText:g,onOpenChange:b,open:O,placeholder:y,readOnly:j,resetValue:v,searchable:C,searchClassName:x,searchPlaceholder:E,searchPromptText:T,tabIndex:S,valueRenderer:I}=e,w=Object(u.a)(e,ut),{initiallyOpen:_,resetOption:N,value:A}=this.state,D=null==A?v:A;w.autofocus&&Ie.a.warn({message:"UISelect: The autofocus prop is deprecated in favor of autoFocus to match React's autoFocus prop",key:"UISelect: autofocus"});this._refSequence=this._refSequence||Object(we.c)(this.anchorRefCallback,this.selectRefCallback);const k=this.getOptions();return Object(ue.jsx)(Me.a,{children:({disabled:e,size:u})=>{const A=s||e,P=Object.assign({},w,{backspaceRemoves:!1,clearable:!1,disabled:A,filterOptions:this.filterOptionsProxy,id:l,ignoreAccents:d,ignoreCase:p,inputProps:{},isOpen:O&&!j&&!!this.state.target,labelKey:"text",menuRenderer:m,noResultsText:this.getNoResultsText({noResultsText:g}),onChange:this.handleChange,onInputChange:this.handleInputChange,onInputKeyDown:this.handleInputKeyDown,openAfterFocus:!0,optionRenderer:this.optionRendererProxy,options:k,placeholder:Object(De.a)(y),readOnly:j,ref:this.anchorRefCallback,renderInvalidValues:!0,required:!1,resetValue:v,searchable:C,searchPromptText:Object(De.a)(T),tabIndex:S,tabSelectsValue:!1,value:D,valueComponent:Se.a.defaultProps.valueComponent,valueRenderer:I||this.defaultValueRenderer}),R=Te()(o,pt[u],c&&"drilldown-form__control--error");return Object(ue.jsx)(st,Object.assign({},P,{autoComplete:"off",autoFocus:t,buttonSize:r,ButtonContent:n,buttonUse:i,className:R,closeOnTargetLeave:a,error:c,initiallyOpen:_,inputRef:h,menuWidth:f,onInputValueChange:this.handleInputValueChange,onOpenChange:b,resetOption:N,searchClassName:x,searchPlaceholder:Object(De.a)(E),selectComponent:Se.a,selectRef:this.selectRefCallback,minimumSearchCount:0,dropdownHeader:this.renderBackButton()}))}})}}yt.propTypes={autoFocus:ie.a.bool,ButtonContent:st.propTypes.ButtonContent,buttonSize:Fe.a.propTypes.size,buttonUse:Fe.a.propTypes.use,className:ie.a.string,clearable:ie.a.bool.isRequired,closeOnTargetLeave:ie.a.bool,defaultOpen:ie.a.bool,defaultValue:oe.e,disabled:ie.a.bool,dropdownClassName:ie.a.string,dropdownFooter:ie.a.node,error:ie.a.bool,filterOptions:ie.a.oneOfType([ie.a.func,ie.a.bool]),id:ie.a.string,ignoreAccents:Object(Pe.a)(ie.a.bool),ignoreCase:Object(Pe.a)(ie.a.bool),inputComponent:ie.a.elementType,inputRef:Le.a,inputValue:ie.a.string,itemComponent:Ke.propTypes.itemComponent,menuRenderer:ie.a.func,menuStyle:ie.a.object,menuWidth:ie.a.oneOfType([ie.a.number,ie.a.oneOf(["auto"])]),noResultsText:Object(ke.a)(ie.a.node),onChange:ie.a.func,onInputKeyDown:ie.a.func,onInputChange:ie.a.func,onInputValueChange:ie.a.func,onOpenChange:ie.a.func,onPaste:ie.a.func,onSelectedOptionChange:ie.a.func,open:ie.a.bool,optionComponent:Ke.propTypes.itemComponent,options:ie.a.arrayOf(oe.b),optionRenderer:ie.a.func,placeholder:Object(ke.a)(ie.a.node).isRequired,placement:ie.a.oneOf(Ne.c),readOnly:ie.a.bool,resetValue:oe.e,resultsClassName:ie.a.string,rootBreadcrumb:ie.a.string,searchable:ie.a.bool.isRequired,searchClassName:ie.a.string,searchPlaceholder:Object(ke.a)(ie.a.string).isRequired,searchPromptText:Object(ke.a)(ie.a.string).isRequired,tabIndex:ie.a.number,value:ie.a.string,valueComponent:Ke.propTypes.itemComponent,valueRenderer:ie.a.func};yt.defaultProps={buttonSize:"default",buttonUse:"form",clearable:!1,open:!1,ignoreAccents:!0,ignoreCase:!0,inputComponent:Ae.a,itemComponent:"span",placeholder:()=>d.a.text("data-token-picker.drilldownSelect.placeholder"),resetValue:"",searchable:!0,searchPlaceholder:()=>d.a.text("data-token-picker.drilldownSelect.placeholder"),searchPromptText:()=>d.a.text("data-token-picker.drilldownSelect.typeToSearch"),value:""};yt.displayName="UISelect";const jt=Object(ve.a)(yt,["open"]);jt.stripDiacritics=dt;var vt=jt;const Ct="property-only",xt={CONTACT:"contact",COMPANY:"company",PRIMARY_COMPANY:"primary_company",DEAL:"deal",LINE_ITEM:"line_item",SITE_SETTINGS:"site_settings",SUBSCRIPTION_TYPE:"subscription_type",TICKET:"ticket",QUOTE:"quote",FEEDBACK_SUBMISSION:"feedback_submission",CONVERSATION:"conversation",SUBSCRIPTION:"subscription"},Et="hubspot_owner_id",Tt=Et+".firstname",St=Et+".lastname",It=Et+".fullname",wt={className:ie.a.string,field:ie.a.string,fields:ie.a.arrayOf(oe.c.isRequired).isRequired,onEdit:ie.a.func.isRequired,category:ie.a.string,categories:ie.a.arrayOf(oe.c.isRequired).isRequired,settingsLink:ie.a.string},_t=({onEdit:e,category:t,categories:n,field:r,fields:i,settingsLink:o})=>{const[a,s]=Object(ee.useState)();Object(ee.useEffect)(()=>{const e=n=>{if(n.value===t){s(n.text);return!0}n.options&&n.options.some(e);return!1};n&&n.some(e)},[t,n]);const c=t=>{e({category:t.target.value})},l=n=>{e({category:t,fieldOption:n.target.value})};let u;t===xt.SITE_SETTINGS&&o&&(u=Object(ue.jsx)(me.a,{message:"data-token-picker.typeHelp.editOfficeSettingsLink",options:{href:o}}));return Object(ue.jsxs)(ee.Fragment,{children:[Object(ue.jsx)(fe.a,{label:Object(ue.jsx)(ae.a,{message:"data-token-picker.typeLabel"}),help:u,children:Object(ue.jsx)(je,{onChange:c,options:n,value:t})}),Object(ue.jsx)(fe.a,{label:Object(ue.jsx)(ae.a,{message:"data-token-picker.fieldLabel"}),children:Object(ue.jsx)(vt,{"data-test-id":"token-field-select",searchClassName:be+" token-field-search",onChange:l,options:i,value:r,placeholder:Object(ue.jsx)(ae.a,{message:"data-token-picker.fieldPlaceholder"}),rootBreadcrumb:a},t)})]})};_t.propTypes=wt;_t.displayName="BrowserBody";var Nt=_t;const At={className:ie.a.string,onCancel:ie.a.func.isRequired,onConfirm:ie.a.func.isRequired,disabled:ie.a.bool},Dt=({className:e,disabled:t,onCancel:n,onConfirm:r})=>Object(ue.jsx)(Me.a,{children:({size:i})=>Object(ue.jsxs)("div",{className:e,children:[Object(ue.jsx)(Fe.a,{"data-test-id":"insert-token-confirm-button",use:"tertiary",onClick:r,disabled:!!t,size:i,children:Object(ue.jsx)(ae.a,{message:"data-token-picker.confirm"})}),Object(ue.jsx)(Fe.a,{"data-test-id":"insert-token-cancel-button",use:"tertiary-light",onClick:n,size:i,children:Object(ue.jsx)(ae.a,{message:"data-token-picker.cancel"})})]})});Dt.propTypes=At;Dt.displayName="BrowserFooter";var kt=Dt,Pt=n(2685);const Rt=[xt.SITE_SETTINGS,xt.SUBSCRIPTION_TYPE,Ct],Ft=e=>!!e&&!!e.isOwnerField,Lt=e=>Rt.includes(e),Mt=(e,t)=>{const n=e.name,r=e.category,i=Ft(e)&&!t;return!!n&&!i&&!Lt(r)},Bt=({parentFieldReference:e})=>{if(!e)return;const t=e.children.find(({value:e})=>e.includes(Tt)),n=e.children.find(({value:e})=>e.includes(St));return Object(Pt.a)({firstName:null==t?void 0:t.parentFieldDefaultValue,lastName:null==n?void 0:n.parentFieldDefaultValue})},Ut=({fieldReference:e,parentFieldReference:t})=>{if(!e)return;return e.value.includes(It)?Bt({parentFieldReference:t}):e.parentFieldDefaultValue},Vt=({isOwnerField:e,fieldReference:t,parentFieldReference:n})=>{const r=Boolean(null==n?void 0:n.fieldDefaultValue);return e&&r?Ut({fieldReference:t,parentFieldReference:n}):null==t?void 0:t.fieldDefaultValue};var Ht=n(508),qt=n(2742);const Gt={className:ie.a.string,fallbackValue:ie.a.string,isGlobalFallback:ie.a.bool,onFallbackChange:ie.a.func.isRequired,onIsGlobalFallbackChange:ie.a.func.isRequired,settingsLink:ie.a.string,defaultValue:ie.a.string},Wt=({fallbackValue:e,onFallbackChange:t,isGlobalFallback:n,onIsGlobalFallbackChange:r,settingsLink:i,showGlobalFallbackCheckbox:o})=>{const a=Object(ue.jsx)(qt.a,{size:"small",className:"p-top-2",checked:!!n,onChange:({target:{checked:e}})=>r(e),"data-test-id":"default-value-global-checkbox",children:Object(ue.jsx)(me.a,{options:{href:i},message:"data-token-picker.fallbackLabelHelp"})});return Object(ue.jsxs)(ue.Fragment,{children:[Object(ue.jsx)(fe.a,{label:Object(ue.jsx)(ae.a,{message:"data-token-picker.fallbackLabel"}),children:Object(ue.jsx)(Ht.a,{"data-test-id":"local-fallback-input",value:e||"",disabled:o&&n,onChange:({target:{value:e}})=>t(e)})}),o&&a]})};Wt.propTypes=Gt;Wt.displayName="FallbackField";var zt=Wt;const $t={value:ie.a.string,settingsLink:ie.a.string},Kt=({value:e,settingsLink:t})=>Object(ue.jsx)(fe.a,{tooltip:d.a.text("data-token-picker.fallbackUserTooltip"),tooltipPlacement:"bottom right",label:d.a.text("data-token-picker.fallbackUserLabel"),help:Object(ue.jsx)(me.a,{message:"data-token-picker.fallbackUserLabelHelp",options:{href:t}}),children:Object(ue.jsx)(Ht.a,{"data-test-id":"global-user-fallback-input",disabled:!0,value:e||""})});Kt.propTypes=$t;Kt.displayName="FallbackUserField";var Yt=Kt;const Xt=(e,t,n)=>e||t||n,Jt=e=>{if(!e||!e.length)return;let t;for(let n=0;!t&&n<e.length;++n)t=e[n].value||Jt(e[n].options);return t},Qt=e=>{const{fallback:t,field:n,fieldsByCategory:r,hideFallbacks:i,allowEmptyFallbacks:o,onConfirm:a,settingsLink:s,category:c,categories:l}=e,u=Jt(l),[d,p]=Object(ee.useState)(c||u),[h,m]=Object(ee.useState)(),[f,g]=Object(ee.useState)(),[b,O]=Object(ee.useState)(t),[y,j]=Object(ee.useState)(void 0===t),[v,C]=Object(ee.useState)(!1),x=((null==h?void 0:h.value)||"").replace(d+".","").split(".");let E;null!=h&&h.isOwnerField&&(E=x.pop());const T=x.pop(),S=Boolean(null==h?void 0:h.isOwnerField),I=Vt({isOwnerField:S,fieldReference:h,parentFieldReference:f}),w=!i&&Mt({category:d,name:T,isOwnerField:S},E),_=Object(ee.useCallback)((e,t)=>{var n;if(e.value===t){m(e);return!0}null!==(n=e.children)&&void 0!==n&&n.some(e=>_(e,t))&&g(e);return!1},[]);Object(ee.useEffect)(()=>{var e;const t=c===Ct||null!=n&&n.startsWith(c+".")?n:`${c}.${n}`;null==r||null===(e=r[c])||void 0===e||e.some(e=>_(e,t))},[c,n,r,_]);Object(ee.useEffect)(()=>{C(!!h&&(i||Xt(!!o,y,!!b)))},[h,o,i,y,b,I]);Object(ee.useEffect)(()=>{j(!!I&&!b||!w)},[I,b,w]);const N=({category:e,fieldOption:t})=>{p(e);if(t&&e){var n;null==r||null===(n=r[e])||void 0===n||n.some(e=>_(e,t.value))}else m(t);O("")},A=e=>{O(e);C(!!h&&Xt(!!o,y,!!e))},D=e=>{j(e);C(!!h&&Xt(!!o,e,!!b))},k=()=>{if(!h||!d||!T)return;const e=y||i?null:b||"";a({category:d,name:T,originalProperty:{fieldType:h.fieldType},isHubSpotDefined:!!h.hubspotDefined,text:h.text,path:h.value},E,e,!!h.hubspotDefined)};let P,R;if(S){const e=Bt({parentFieldReference:f});P=Object(ue.jsx)(Yt,{value:e||(null==f?void 0:f.fieldDefaultValue),settingsLink:s})}if(w){const e=y?I:b,t=!!I;R=Object(ue.jsx)(zt,{fallbackValue:e,onFallbackChange:A,isGlobalFallback:y,onIsGlobalFallbackChange:D,showGlobalFallbackCheckbox:t,settingsLink:s})}return{canSave:v,category:d,fallback:b,fieldReference:h,fieldsByCategory:r,handleConfirm:k,handleEdit:N,MaybeUserFallbackComponent:P,MaybeFallbackComponent:R,parentFieldReference:f}},Zt={className:ie.a.string,fallback:ie.a.string,field:ie.a.string,fieldsByCategory:ie.a.objectOf(ie.a.arrayOf(ie.a.shape({text:ie.a.string,value:ie.a.string,fieldType:ie.a.string}))),allowEmptyFallbacks:ie.a.bool,hideFallbacks:ie.a.bool,onClose:ie.a.func.isRequired,onConfirm:ie.a.func.isRequired,settingsLink:ie.a.string,category:ie.a.string,categories:ie.a.arrayOf(oe.c.isRequired).isRequired,mode:ie.a.oneOf([le,ce])},en=e=>{const{categories:t,className:n,mode:r=le,onClose:i,onEditCategory:o,onEditField:a,settingsLink:s}=e,{canSave:c,category:l,fieldReference:u,fieldsByCategory:d,handleConfirm:p,handleEdit:h,MaybeUserFallbackComponent:m,MaybeFallbackComponent:f}=Qt(e);Object(ee.useEffect)(()=>{o&&o(l)},[l,o]);Object(ee.useEffect)(()=>{a&&a(null==u?void 0:u.value)},[null==u?void 0:u.value,a]);return l&&d?Object(ue.jsxs)("div",{className:n,children:[Object(ue.jsx)(he,{mode:r}),Object(ue.jsx)(Nt,{category:l,categories:t,field:u&&u.value,fields:d?d[l]:[],onEdit:h,settingsLink:s}),m,f,Object(ue.jsx)(kt,{className:"m-top-5",disabled:!c,onConfirm:p,onCancel:i})]}):Object(ue.jsx)(te.a,{className:"data-token-picker__body",layout:"centered",minHeight:300})};en.propTypes=Zt;en.displayName="PopoverContent";var tn=en,nn=n(1286),rn=n(1285);const on=()=>({requestStatus:rn.a.UNINITIALIZED,categories:[],fieldsByCategory:{}}),an=(e,{requestStatus:t,categories:n,fieldsByCategory:r})=>{switch(t){case rn.a.PENDING:return Object.assign({},e,{requestStatus:t});case rn.a.SUCCEEDED:return{requestStatus:t,categories:n,fieldsByCategory:r};case rn.a.FAILED:return Object.assign({},e,{requestStatus:t});default:return e}},sn=(e,t)=>{const n=on(),[{requestStatus:r,categories:i,fieldsByCategory:o},a]=Object(ee.useReducer)(an,n);Object(ee.useEffect)(()=>{if(!e)return;const n=Object(nn.a)();a({requestStatus:rn.a.PENDING});e(t).then(n.resolve);n.promise.then(()=>{a({requestStatus:rn.a.SUCCEEDED,categories:Object(s.c)(t),fieldsByCategory:Object(s.d)(t)})}).catch(e=>{a({requestStatus:rn.a.FAILED});console.warn(e)});return()=>{n.reject("[rich-text-lib][personalization][fetchPaths] component unmounting abort state update")}},[e,t]);return[{categories:i,fieldsByCategory:o},r]},cn=["property","onInsert","fetchPaths","dataTokenConfig"];function ln(e){let{property:t,onInsert:n,fetchPaths:r,dataTokenConfig:i}=e,o=Object(u.a)(e,cn);const a=i.isEmail?o.emailSettingsLink:o.publishingSettingsLink,{category:s,field:c,subCategory:l}=t||{},[{categories:d,fieldsByCategory:p},h]=sn(r,i),m=void 0===i.allowEmptyFallbacks||i.allowEmptyFallbacks;return h===rn.a.PENDING||h===rn.a.UNINITIALIZED?Object(ue.jsx)(te.a,{className:"medium-popover-body",layout:"centered",minHeight:300}):Object(ue.jsx)(ne.a,{_size:"small",children:Object(ue.jsx)(tn,Object.assign({className:"medium-popover-body m-y-5 p-x-6",category:s,categories:d,field:l?`${c}.${l}`:c,fieldsByCategory:p,allowEmptyFallbacks:m,hideFallbacks:i&&i.hideFallbacks,onConfirm:n,settingsLink:a},o))})}ln.displayName="DataTokenPopoverBodyInsert";var un=ln,dn=n(1287),pn=n(1269);const hn=["property","onInsert","fetchPaths","dataTokenConfig"];function mn(e){let{property:t,onInsert:n,fetchPaths:r,dataTokenConfig:i}=e,o=Object(u.a)(e,hn);const a=i.isEmail?o.emailSettingsLink:o.publishingSettingsLink,[{categories:s,fieldsByCategory:c},l]=sn(r,i),d=void 0===i.allowEmptyFallbacks||i.allowEmptyFallbacks,{category:p,field:h,subCategory:m,fallback:f,hasDataSensitivity:g}=t||{},b=m?`${h}.${m}`:h;return l===rn.a.PENDING||l===rn.a.UNINITIALIZED?Object(ue.jsx)(te.a,{className:"medium-popover-body",layout:"centered",minHeight:300}):Object(ue.jsx)(ne.a,{_size:"small",children:Object(ue.jsx)(tn,Object.assign({className:"medium-popover-body m-y-5 p-x-6",mode:ce,category:p,categories:s,field:g?void 0:b,fieldsByCategory:c,fallback:f,allowEmptyFallbacks:d,hideFallbacks:i&&i.hideFallbacks,onConfirm:n,settingsLink:a},o))})}mn.displayName="DataTokenPopoverBodyEdit";var fn=mn,gn=n(1288);const bn=e=>"RichTextLib.personalize.lite."+e,On={onEdit:ie.a.func.isRequired,onRemove:ie.a.func.isRequired};function yn(e){const{onEdit:t,onRemove:n}=e,r=[{iconName:pn.c.EDIT,onClick:t},{iconName:pn.c.REMOVE,onClick:n}];return Object(ue.jsx)("div",{className:"animated-popover-preview",children:Object(ue.jsx)(gn.a,{"data-test-id":"personalize-popover-body-lite",iconButtons:r,i18nKey:bn})})}yn.propTypes=On;yn.displayName="DataTokenPopoverBodyLite";var jn=yn;const vn=["mode","onModeChange","onEdit","onTokenRemove"],Cn={mode:ie.a.oneOf(Object.values(pn.d)),onModeChange:ie.a.func.isRequired,onEdit:ie.a.func.isRequired,onTokenRemove:ie.a.func.isRequired};function xn(e){const{mode:t,onModeChange:n,onEdit:r,onTokenRemove:i}=e,o=Object(u.a)(e,vn),a=()=>{n(pn.d.PREVIEW)},s=()=>{n(pn.d.EDIT)},c=(...e)=>{a();r(...e)},l=e=>{e.key===pn.b.ESCAPE&&a()};return Object(ue.jsx)("div",{className:"animated-popover-body",onKeyDown:l,tabIndex:"-1",children:Object(ue.jsx)(dn.CSSTransitionGroup,{className:"animated-transition",transitionName:"animated-popover",transitionEnterTimeout:100,transitionLeaveTimeout:100,children:t===pn.d.PREVIEW?Object(ue.jsx)("div",{children:Object(ue.jsx)(jn,{onEdit:s,onRemove:i})},"data-token-popover-lite-container"):Object(ue.jsx)("div",{children:Object(ue.jsx)(fn,Object.assign({},o,{onInsert:c,onClose:a}))},"data-token-popover-edit-container")})})}xn.propTypes=Cn;xn.displayName="DataTokenPopoverBodyBranch";var En=xn,Tn=n(2824),Sn=n(1289),In=n(1291),wn=n(1259);const _n=["editor","eventKey","onInsert","onEdit","mode","onModeChange","onTokenRemove","dataTokenConfig"];function Nn(e){const{editor:t,eventKey:n,onInsert:r,onEdit:i,mode:o,onModeChange:a,onTokenRemove:s,dataTokenConfig:c}=e,l=Object(u.a)(e,_n),{renderDataTokenPopover:d=null}=c,[p,h]=Object(ee.useState)(pn.e.INSERT),{inlineTarget:m,setInlineTarget:f,initInlineTarget:g}=Object(Tn.a)(t,null),[b,O]=Object(ee.useState)(),y=Object(ee.useRef)(m),j=Object(ee.useRef)(p);Object(ee.useEffect)(()=>{y.current=m;j.current=p});const v=Object(ee.useCallback)(({restoreSelection:e}={})=>{if(y.current){f(null,{restoreSelection:e});O()}},[f]),C=(...e)=>{v();r(...e)},x=(...e)=>{v();i(...e)},E=()=>{v();s(m)};Object(ee.useEffect)(()=>{const e=()=>{if(y.current)v({restoreSelection:!0});else{h(pn.e.INSERT);g()}};t.on("OpenPersonalizePopover",e);return()=>t.off("OpenPersonalizePopover",e)},[t,g,v]);Object(ee.useEffect)(()=>{const e=({element:e})=>{if(e){if(!e.hasAttribute(wn.a)){a(pn.d.PREVIEW);if(e!==y.current){f(null);h(pn.e.EDIT);O(Object(T.c)(c,e));f(e)}}}else v()};t.on("hsNodeChange:"+n,e);return()=>t.off("hsNodeChange:"+n,e)},[t,n,f,v,a,c]);const S=p===pn.e.INSERT;let I,w={};if(S){I=un;w={onInsert:C,onClose:v}}else if(d){I=d();w={onTokenRemove:E}}else{I=En;w={mode:o,onModeChange:a,onEdit:x,onTokenRemove:E}}const _=Object(ee.useCallback)(e=>{O(t=>Object.assign({},t||{},{category:e}))},[O]),N=Object(ee.useCallback)(e=>{O(t=>Object.assign({},t||{},{field:e}))},[O]);return Object(ue.jsx)(Sn.a,{editor:t,"data-test-id":"data-token-browser-popover",open:!!m,target:m,placement:"bottom",onRemove:v,animateOnToggle:!1,renderContent:()=>Object(ue.jsx)(I,Object.assign({},l,w,{dataTokenConfig:c,apiClient:t.settings.apiClient,cacheKey:t.id,property:b,onEditCategory:_,onEditField:N,tooltipClassName:"mce-token-tooltip"}))})}var An=Object(In.a)(Nn),Dn=n(1292),kn=n(1293);const Pn=["contextualNodeAttributes","menuItems"],Rn=(e,t,n,r)=>{if(r){const t=Object(kn.a)(e,"PersonalizationUpgradeButton","`PersonalizationUpgradeButton` codesplit component is required for the personalization upgrade point");i.a.canvas.addButton(e,f.P,{renderControl:()=>Object(ue.jsx)(t,{children:d.a.text("TinymcePlugins.hsdatatoken.button")})});return}const{apiClient:o}=e.settings,s={dataTokenConfig:n,dropdownClassName:"mce-hubspot-menu",fetchPaths:Object(a.a)(o,n),emailSettingsLink:`${e.settings.appUrl}${m.b.settings("email","personalization")}`,publishingSettingsLink:`${e.settings.appUrl}${m.b.settings("publishing")}/all-domains/personalization`},c=J(e),l=X(e),g=({isActive:t})=>{t||e.fire("OpenPersonalizePopover")},b=({element:t})=>!!t&&Object(T.i)(e,t);i.a.canvas.addButton(e,f.P,{renderControl:t=>{const n=Object(u.a)(t,Pn);return Object(ue.jsx)(p.a,{title:d.a.text("TinymcePlugins.hsdatatoken.tooltip.insert"),placement:"bottom",children:Object(ue.jsx)(h.a,Object.assign({"data-test-id":"insert-data-token-button",use:"transparent",onClick:()=>{g({isActive:b({element:e.selection.getNode()})})}},n,{children:d.a.text("TinymcePlugins.hsdatatoken.button")}))})}});const O=({element:t})=>!!t&&(Object(T.i)(e,t)&&t);i.a.canvas.addNodeChangeHandler(e,{eventKey:t,includeInlineTargets:!0,isActiveNodeHandler:O});i.a.canvas.addPopover(e,t,{renderPopover:n=>Object(ue.jsx)(An,Object.assign({editor:e,eventKey:t,onInsert:c,onEdit:l,onTokenRemove:Z(e)},s,n))});i.a.canvas.addPopover(e,t+"-tooltip",{renderPopover:t=>Object(ue.jsx)(Dn.a,Object.assign({editor:e},t))})};var Fn=n(1215);const Ln=e=>e.split("").reverse().join(""),Mn=Object(Fn.b)((e,t,n)=>n.replace(e,t)),Bn=Object(Fn.a)(Ln,Mn(/'(?!\\)/,"'\\"),Ln),Un=({href:e,text:t,style:n})=>{const r=document.createElement("a");r.setAttribute("href",e);r.setAttribute("target","_blank");r.setAttribute("style",n);r.textContent=t;return r},Vn={renderToken:e=>({path:t,category:n="",defaultValue:r,filter:i})=>{const o=Object(b.f)(n),[a,c]=t.split("."),l=Object(b.e)(n,c),u=M(t,e),d=u||t,p=Object(s.f)(e);if(p&&!p[t])return document.createTextNode(_({path:t,defaultValue:r?Bn(r):r,filter:i}));const h=p&&p[t].hasDataSensitivity;return q(d,n,e=>{e.setAttribute("data-mce-hubspot-object","true");e.setAttribute("data-mce-token-path",t);e.setAttribute("data-mce-property-category",l?"property-only":n);u&&e.setAttribute("data-mce-property-label",u);null!=r&&e.setAttribute("data-mce-property-default-value",r);i&&e.setAttribute("data-mce-filter",i);h&&e.setAttribute("data-mce-data-sensitivity","true");e.classList.add(o)},e.maxTokenWidth,h)}},Hn=e=>t=>{const n=["unsubscribe","viewaswebpage","emailoptin"],r=e=>n.find(t=>e.hasAttribute("data-"+t)),i=Array.from(t.querySelectorAll("input.hubspot-mergetag"));Object(x.g)(i,t=>{if(t.hasAttribute("data-canspam")){const n=L(t.getAttribute("data-canspam")||"");if(n){const t=n.category?`${n.category}.${n.property}`:n.property;return Vn.renderToken(e)(Object.assign({path:t},n))}}else if(r(t)){const e=r(t);if(e)return Un({text:t.getAttribute("value")||"",href:t.getAttribute("data-"+e)||"",style:t.getAttribute("data-style")||""})}else if(t.hasAttribute("value")){const n=F("contact."+t.getAttribute("value"));if(n){const t=n.category?`${n.category}.${n.property}`:n.property;return Vn.renderToken(e)(Object.assign({path:t},n))}}return t})},qn=()=>e=>{const t=e.getAttribute("data-mce-token-path")||"",n=e.getAttribute("data-mce-property-category")||"",r=e.getAttribute("data-mce-property-name")||"",o=e.getAttribute("data-mce-subproperty"),a=e.getAttribute("data-mce-property-default-value"),s=e.getAttribute("data-mce-filter")||"",c=a&&i.a.html.Entities.decode(a),l=Object(b.e)(n,r),u=t||(l?r:`${n}.${r}${o?"."+o:""}`);return document.createTextNode(_({path:u,defaultValue:c?Bn(c):c,filter:s}))},Gn=e=>t=>{const n=Vn.renderToken(e)(t);return n?n.nodeType===Node.ELEMENT_NODE?n.outerHTML:n.textContent:null},Wn=e=>{const t=P(e);if(!t)return;let n=[];t&&t.supportedCrmObjectFQNs&&(n=t.supportedCrmObjectFQNs);Object(x.b)(e,Hn(t));$(e,n,[{TOKEN_PATTERN:A(t),USES_DEFAULT:!1},{TOKEN_PATTERN:D(t),USES_DEFAULT:!0}],Gn(t),qn())},zn=e=>t=>{const n=t.getAttribute("data-mce-token-path")||"",r=t.getAttribute("data-mce-property-category")||"",i=t.getAttribute("data-mce-filter")||"",o=t.getAttribute("data-mce-property-default-value"),a=Vn.renderToken(e)({path:n,category:r,defaultValue:o,filter:i}),s=t.parentNode;s&&a&&s.replaceChild(a,t)},$n=e=>{const t=P(e);if(!t)return;const n=e.getBody();if(n){const e=Array.from(n.querySelectorAll("[data-mce-token-path]:not([data-mce-property-label]):not([data-mce-rss-link]):not([data-mce-property-category=post])")),r=zn(t);e.forEach(r)}};n.d(t,"a",(function(){return Kn}));const Kn=o.p;function Yn(e){const t=P(e);if(!t)return{};const{useAsUpgradePoint:n}=t;Rn(e,Kn,t,n);if(n)return{};Wn(e);i.a.canvas.addIdleCallback(e,"[data-mce-token-path]",()=>l(e,t).then(()=>{$n(e)}));return{insertDataToken:Q(e)}}i.a.PluginManager.add(Kn,Yn)},function(e,t,n){"use strict";var r=n(40),i=n(73),o=n(4),a=n(6),s=n(279),c=n(27),l=n(490),u=n(2655),d=n(508),p=n(2741),h=n(1210),m=n(2),f=n(41),g=n.n(f),b=n(59),O=n(357),y=n(485),j=n(2654),v=n(2712),C=n(1206),x=n(281),E=n(1320),T=n(2719),S=n(9),I=n.n(S);const w=()=>`https://preview.hubspoteditor${I.a.isProd()?"":"qa"}.com`,_=w()+"/content-embed-ui",N="ContentEmbedUI",A={READY:N+":Ready",SIZE_CHANGE:N+":SizeChange",SET_CONTENT:N+":SetContent",SET_CONTENT_DONE:N+":SetContentDone",DISCONNECT:N+":Disconnect"},D=w(),k=e=>{const[t,n]=Object(r.useState)(!1),[i,o]=Object(r.useState)(void 0),a=Object(r.useCallback)(t=>{if(!t||t.origin!==D)return;const r=t.data&&t.data.body;if(!r||r.id!==e)return;const{action:i}=r;switch(i){case A.READY:n(!0);break;case A.SIZE_CHANGE:{const{height:e}=r.payload;o(e);break}}},[e]);Object(r.useEffect)(()=>{window.addEventListener("message",a);return()=>{window.removeEventListener("message",a)}},[a]);return{contentHeight:i,isContentEmbedReady:t}},P=({html:e,isContentEmbedReady:t,targetWindow:n,frameId:i})=>{const o=Object(r.useCallback)(e=>{n&&n.postMessage({body:Object.assign({},e,{id:i})},D)},[i,n]);Object(r.useEffect)(()=>{t&&o({action:A.SET_CONTENT,payload:{html:e}})},[e,t,o])},R=()=>{const e=Object(r.useRef)(null),[t,n]=Object(r.useState)(null);Object(r.useEffect)(()=>{e.current&&n(e.current.contentWindow)},[e]);return{targetFrameRef:e,targetWindow:t}};var F=n(45);const L="content-embed-ui__full-height-preview--"+Date.now(),M=({children:e,isFullscreen:t})=>t?e:Object(F.jsx)(T.a,{"data-test-id":"content-embed-scroll-container",style:{height:"100%"},children:e}),B=({className:e="",html:t,includeHeadElements:n=!1,shouldReplaceAllHTML:r=!1,isFullscreen:i=!1,uniqueFrameId:o=L,iframePropsOverrides:a={},inpage:s=!1})=>{const c=`${_}?id=${o}&includeHeadElements=${n}&shouldReplaceAllHTML=${r}&inpage=${s}`,{targetFrameRef:l,targetWindow:u}=R(),{contentHeight:d,isContentEmbedReady:p}=k(o);P({html:t,isContentEmbedReady:p,targetWindow:u,frameId:o});return Object(F.jsx)(M,{isFullscreen:i,children:Object(F.jsx)("iframe",Object.assign({className:e,"data-test-id":"content-embed-ui__full-height-preview",height:d,id:o,ref:l,referrerPolicy:"origin",sandbox:"allow-scripts allow-same-origin",src:c},a))})};class U extends r.Component{constructor(e){super(e);this.renderEmailDetails=this.renderEmailDetails.bind(this)}renderEmailDetails(){const{to:e,from:t,subject:n}=this.props,r=e&&e.name&&e.name.length>0?"ContentComponents.previewDevices.details.to":"ContentComponents.previewDevices.details.notSelectedTo";return Object(F.jsx)("div",{className:"previewEmailDetails",children:Object(F.jsxs)(E.a,{maxHeight:150,children:[Object(F.jsx)("div",{children:Object(F.jsx)(x.a,{message:r,options:e})}),Object(F.jsx)("div",{children:Object(F.jsx)(x.a,{message:"ContentComponents.previewDevices.details.from",options:t})}),Object(F.jsx)("div",{children:Object(F.jsx)(x.a,{message:"ContentComponents.previewDevices.details.subject",options:{prop:n}})})]})})}render(){const{previewUrl:e,previewHTMLOutput:t,shouldUseHTMLPreview:n=!1,onLoad:r,uniqueFrameId:i,contentType:o,customPreview:a,type:s,inpage:c}=this.props,l=Object.assign({id:"content-preview-iframe"},n?{}:{src:e},{onLoad:r,sandbox:"allow-scripts allow-same-origin allow-forms allow-popups allow-modals allow-popups-to-escape-sandbox"});return Object(F.jsxs)("div",{className:"previewFrame",children:["email"===o&&this.renderEmailDetails(),a||n&&Object(F.jsx)(B,{isFullscreen:!0,html:t,shouldReplaceAllHTML:!0,includeHeadElements:!0,uniqueFrameId:`${i}-${s}`,iframePropsOverrides:l,inpage:c})||Object(F.jsx)("iframe",Object.assign({},l))]})}}U.propTypes={previewUrl:g.a.string.isRequired,previewHTMLOutput:g.a.string,onLoad:g.a.func.isRequired,from:g.a.shape({email:g.a.string,name:g.a.string}),to:g.a.shape({email:g.a.string,name:g.a.string}),type:g.a.bool,subject:g.a.string,uniqueFrameId:g.a.string,shouldUseHTMLPreview:g.a.bool,contentType:g.a.string,customPreview:g.a.object,inpage:g.a.bool};U.defaultProps={from:{email:"",name:""},to:{email:"",name:""}};var V=U,H=n(712),q=n(434),G=(n(10),n(287)),W=n.n(G);const z=(e,t)=>e[t]/e.width*100+"%",$=["dimensions","Template"],K=["dimensions","Template"],Y=W()(e=>{const{dimensions:t,Template:n}=e,r=Object(m.a)(e,$);return Object(F.jsx)(n,Object.assign({xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"xMidYMin slice",viewBox:`0 0 ${t.width} ${t.height}`},r))}).withConfig({displayName:"AbstractDeviceTemplate__StyledTemplate",componentId:"sc-1o2v8w7-0"})(["height:1px;overflow:visible !important;padding-bottom:",";pointer-events:none;position:relative;vertical-align:bottom;width:100%;z-index:1;@supports (display:grid){height:auto;padding-bottom:0;}"],e=>z(e.dimensions,"height")),X=e=>{const{dimensions:t,Template:n}=e,r=Object(m.a)(e,K);return Object(F.jsx)(Y,Object.assign({},r,{Template:n,dimensions:t}))};X.propTypes={children:g.a.node,dimensions:g.a.shape({Template:g.a.elementType.isRequired,top:g.a.number.isRequired,right:g.a.number.isRequired,bottom:g.a.number.isRequired,left:g.a.number.isRequired,height:g.a.number.isRequired,width:g.a.number.isRequired}),Template:g.a.elementType};X.defaultProps={Template:Y};var J=X;const Q=["children","className","ContentWrapper","contentClassName","InnerWrapper","OuterWrapper","spec","Template"],Z=W.a.div.withConfig({displayName:"AbstractDeviceFrame__Outer",componentId:"sc-15ktcky-0"})([""]),ee=W.a.div.withConfig({displayName:"AbstractDeviceFrame__DisplayWrapper",componentId:"sc-15ktcky-1"})(["border-radius:inherit;display:grid;height:100%;position:relative;width:100%;> *{grid-area:1/1/2/2;}"]),te=W.a.div.withConfig({displayName:"AbstractDeviceFrame__Inner",componentId:"sc-15ktcky-2"})(["margin-bottom:",";margin-left:",";margin-right:",";margin-top:",";position:absolute;top:0;left:0;right:0;bottom:0;@supports (display:grid){position:relative;}"],e=>z(e.dimensions,"bottom"),e=>z(e.dimensions,"left"),e=>z(e.dimensions,"right"),e=>z(e.dimensions,"top")),ne=W.a.div.withConfig({displayName:"AbstractDeviceFrame__ScrollRegion",componentId:"sc-15ktcky-3"})(["-ms-overflow-style:-ms-autohiding-scrollbar;overflow-y:auto;position:absolute;top:0;right:0;bottom:0;left:0;"]),re=e=>{const{children:t,className:n,ContentWrapper:r=re.defaultProps.ContentWrapper,contentClassName:i,InnerWrapper:o=re.defaultProps.InnerWrapper,OuterWrapper:a=re.defaultProps.OuterWrapper,spec:s,Template:c=re.defaultProps.Template}=e,l=Object(m.a)(e,Q),u=s&&s.Template;return Object(F.jsx)(a,Object.assign({},l,{className:n,children:Object(F.jsxs)(ee,{children:[Object(F.jsx)(c,{dimensions:s,Template:u}),Object(F.jsx)(o,{dimensions:s,children:Object(F.jsx)(r,{className:i,dimensions:s,children:t})})]})}))};re.propTypes={children:g.a.node.isRequired,ContentWrapper:g.a.elementType,InnerWrapper:g.a.elementType,OuterWrapper:g.a.elementType,spec:g.a.object,Template:g.a.elementType,contentClassName:g.a.string};re.defaultProps={ContentWrapper:ne,InnerWrapper:te,OuterWrapper:Z,Template:J};re.displayName="AbstractDeviceFrame";var ie=re,oe=n(324),ae=n(326),se=n(288),ce=n.n(se);const le=["height"],ue=["children","className","contentClassName"],de=oe.BATTLESHIP,pe={desktop:{Template:e=>Object(F.jsxs)("svg",Object.assign({},e,{children:[Object(F.jsx)("defs",{children:Object(F.jsx)("path",{d:"M0 5.999A6 6 0 0 1 6.003 0h794.994A6 6 0 0 1 807 5.999V547a6 6 0 0 1-6.003 5.999H6.003A6 6 0 0 1 0 547.001V6z",id:"a"})}),Object(F.jsxs)("g",{transform:"translate(1 1)",fill:"none",fillRule:"evenodd",children:[Object(F.jsx)("ellipse",{fill:de,cx:"21",cy:"15.996",rx:"4",ry:"3.996"}),Object(F.jsx)("ellipse",{fill:de,cx:"34",cy:"15.996",rx:"4",ry:"3.996"}),Object(F.jsx)("ellipse",{fill:de,cx:"47",cy:"15.996",rx:"4",ry:"3.996"})]})]})),top:32,right:0,bottom:0,left:0,height:555,width:809}},he=pe.desktop.top,me=he/pe.desktop.height*100+"%",fe=e=>e?Object(ae.m)(he):me,ge=W()(ie.defaultProps.Template).withConfig({displayName:"UIDeviceFrameDesktop__DesktopTemplate",componentId:"sc-14nzcch-0"})([""]),be=W()(ie.defaultProps.InnerWrapper).withConfig({displayName:"UIDeviceFrameDesktop__DesktopInner",componentId:"sc-14nzcch-1"})([""]),Oe=W()(e=>{const t=Object(m.a)(e,le);return Object(F.jsx)(ie.defaultProps.OuterWrapper,Object.assign({},t))}).withConfig({displayName:"UIDeviceFrameDesktop__DesktopWrapper",componentId:"sc-14nzcch-2"})(["border:1px solid ",";border-radius:6px;",";position:relative;","{border-bottom-left-radius:inherit;border-bottom-right-radius:inherit;margin-top:",";}"," &::before{background-color:",";border-bottom:1px solid ",";border-top-left-radius:inherit;border-top-right-radius:inherit;content:'';height:",";left:0;position:absolute;top:0;width:100%;z-index:1;}"],de,e=>e.height&&Object(G.css)(["height:",";overflow:hidden;"],"number"==typeof e.height?Object(ae.m)(e.height):e.height),be,e=>e.height&&Object(ae.m)(he),e=>e.height&&Object(G.css)(["","{position:absolute;width:",";}"],ge,Object(ae.m)(pe.desktop.width)),oe.GYPSUM,de,e=>fe(e.height)),ye=W()(e=>Object(F.jsx)(ie.defaultProps.ContentWrapper,Object.assign({},e))).withConfig({displayName:"UIDeviceFrameDesktop__DesktopContent",componentId:"sc-14nzcch-3"})(["border-bottom-left-radius:inherit;border-bottom-right-radius:inherit;"]),je=e=>{const{children:t,className:n,contentClassName:r}=e,i=Object(m.a)(e,ue);return Object(F.jsx)(ie,Object.assign({},i,{className:ce()(n,"UIDeviceFrameDesktop"),contentClassName:r,ContentWrapper:ye,InnerWrapper:be,OuterWrapper:Oe,spec:pe.desktop,Template:ge,children:t}))};je.propTypes={children:g.a.node.isRequired,contentClassName:g.a.string,height:g.a.oneOfType([g.a.number,g.a.string])};je.displayName="UIDeviceFrameDesktop";var ve=je;const Ce=["children","className","contentClassName","orientation"],xe={tabletPortrait:{Template:e=>Object(F.jsx)("svg",Object.assign({},e,{children:Object(F.jsxs)("g",{transform:"rotate(90 194 195)",fill:"none",fillRule:"evenodd",children:[Object(F.jsx)("path",{fill:oe.GYPSUM,stroke:oe.BATTLESHIP,d:"M-.5 15.994C-.5 6.884 6.886-.5 16.004-.5h484.992c9.112 0 16.504 7.391 16.504 16.494v356.012c0 9.11-7.386 16.494-16.504 16.494H16.004C6.892 388.5-.5 381.109-.5 372.006V15.994zm25 2.001v352.01a5.502 5.502 0 0 0 5.495 5.495h469.01a5.5 5.5 0 0 0 5.495-5.495V17.995a5.502 5.502 0 0 0-5.495-5.495H29.995a5.5 5.5 0 0 0-5.495 5.495z"}),Object(F.jsx)("circle",{fill:oe.BATTLESHIP,cx:"12",cy:"194",r:"4"})]})})),top:25.5,right:13.5,bottom:13.5,left:13.5,height:519,width:390},tabletLandscape:{Template:e=>Object(F.jsx)("svg",Object.assign({},e,{children:Object(F.jsxs)("g",{transform:"translate(1 1)",fill:"none",fillRule:"evenodd",children:[Object(F.jsx)("path",{fill:oe.GYPSUM,stroke:oe.BATTLESHIP,d:"M-.5 15.994C-.5 6.884 6.886-.5 16.004-.5h484.992c9.112 0 16.504 7.391 16.504 16.494v356.012c0 9.11-7.386 16.494-16.504 16.494H16.004C6.892 388.5-.5 381.109-.5 372.006V15.994zm25 2.001v352.01a5.502 5.502 0 0 0 5.495 5.495h469.01a5.5 5.5 0 0 0 5.495-5.495V17.995a5.502 5.502 0 0 0-5.495-5.495H29.995a5.5 5.5 0 0 0-5.495 5.495z"}),Object(F.jsx)("circle",{fill:oe.BATTLESHIP,cx:"12",cy:"194",r:"4"})]})})),top:13.5,right:13.5,bottom:13.5,left:25.5,height:390,width:519}},Ee=e=>{const{children:t,className:n,contentClassName:r,orientation:i}=e,o=Object(m.a)(e,Ce),a="landscape"===i?xe.tabletLandscape:xe.tabletPortrait;return Object(F.jsx)(ie,Object.assign({},o,{className:ce()(n,"UIDeviceFrameTablet"),contentClassName:r,spec:a,orientation:i,children:t}))};Ee.propTypes={children:g.a.node.isRequired,contentClassName:g.a.string,orientation:g.a.oneOf(["portrait","landscape"])};Ee.defaultProps={orientation:"portrait"};Ee.displayName="UIDeviceFrameTablet";var Te=Ee;const Se=["children","className","contentClassName","orientation"],Ie={mobilePortrait:{Template:e=>Object(F.jsx)("svg",Object.assign({},e,{children:Object(F.jsxs)("g",{fill:"none",fillRule:"evenodd",children:[Object(F.jsx)("path",{d:"M1 30.503v469.994C1 516.79 14.211 530 30.507 530h237.986C284.791 530 298 516.792 298 500.497V30.503C298 14.21 284.789 1 268.493 1H30.507C14.209 1 1 14.208 1 30.503zM286.5 37.5v455.503c0 14.082-11.414 25.497-25.496 25.497H37.996c-14.081 0-25.496-11.415-25.496-25.497V37.5h274z",stroke:oe.BATTLESHIP,fill:oe.GYPSUM}),Object(F.jsxs)("g",{transform:"translate(120.5 20.5)",children:[Object(F.jsx)("path",{d:"M14.716 2.464h42.638",stroke:oe.BATTLESHIP,strokeWidth:"2",strokeLinecap:"round"}),Object(F.jsx)("ellipse",{fill:oe.BATTLESHIP,cx:"3.403",cy:"2.61",rx:"2.597",ry:"2.61"})]})]})})),top:37.5,right:12.5,bottom:12.5,left:12.5,height:531,width:299},mobileLandscape:{Template:e=>Object(F.jsx)("svg",Object.assign({},e,{children:Object(F.jsxs)("g",{fill:"none",fillRule:"evenodd",children:[Object(F.jsx)("path",{d:"M30.503 298h469.994C516.79 298 530 284.789 530 268.493V30.507C530 14.209 516.792 1 500.497 1H30.503C14.21 1 1 14.211 1 30.507v237.986C1 284.791 14.208 298 30.503 298zM37.5 12.5h455.503c14.082 0 25.497 11.414 25.497 25.496v223.008c0 14.081-11.415 25.496-25.497 25.496H37.5v-274z",stroke:oe.BATTLESHIP,fill:oe.GYPSUM}),Object(F.jsxs)("g",{transform:"rotate(-90 99.5 79)",children:[Object(F.jsx)("path",{d:"M14.716 2.464h42.638",stroke:oe.BATTLESHIP,strokeWidth:"2",strokeLinecap:"round"}),Object(F.jsx)("ellipse",{fill:oe.BATTLESHIP,cx:"3.403",cy:"2.61",rx:"2.597",ry:"2.61"})]})]})})),top:12.5,right:12.5,bottom:12.5,left:37.5,height:299,width:531}},we=e=>{const{children:t,className:n,contentClassName:r,orientation:i}=e,o=Object(m.a)(e,Se),a="landscape"===i?Ie.mobileLandscape:Ie.mobilePortrait;return Object(F.jsx)(ie,Object.assign({},o,{className:ce()(n,"UIDeviceFrameMobile"),contentClassName:r,spec:a,orientation:i,children:t}))};we.propTypes={children:g.a.node.isRequired,contentClassName:g.a.string,orientation:g.a.oneOf(["portrait","landscape"])};we.defaultProps={orientation:"portrait"};we.displayName="UIDeviceFrameMobile";const _e=["height","orientation","type"],Ne={desktop:ve,tablet:Te,mobile:we};function Ae(e){const{height:t,orientation:n,type:r}=e,i=Object(m.a)(e,_e),o=Ne[r];0;return Object(F.jsx)(o,Object.assign({},i,{height:t,orientation:n}))}Ae.propTypes={children:g.a.node.isRequired,contentClassName:g.a.string,height:g.a.oneOfType([g.a.number,g.a.string]),orientation:g.a.oneOf(["portrait","landscape"]),type:g.a.oneOf(Object.keys(Ne))};Ae.defaultProps={orientation:"portrait",type:"desktop"};Ae.displayName="UIDeviceFrame";var De=n(2679),ke=n(710);class Pe extends r.Component{constructor(e){super(e);this.state={mobileLoaded:!1,desktopLoaded:!1};this.onLoad=this.onLoad.bind(this);this.renderLoading=this.renderLoading.bind(this);this.renderPreviewComponent=this.renderPreviewComponent.bind(this)}componentDidUpdate(e){const{customPreview:t,previewUrl:n,previewHTMLOutput:r,shouldUseHTMLPreview:i}=this.props,o=e.previewUrl!==n,a=!t&&e.customPreview;(!t&&o&&(!r&&i)||a)&&this.setState({mobileLoaded:!1,desktopLoaded:!1})}onLoad(e){return()=>{this.setState({[e+"Loaded"]:!0})}}renderLoading(){return!this.props.isLoading&&(this.props.customPreview||this.state.mobileLoaded&&this.state.desktopLoaded)?null:Object(F.jsx)(H.a,{className:"preview-container-loading",contextual:!0})}renderPreviewComponent(e){const{from:t,previewSubject:n,subject:r,previewUrl:i,previewHTMLOutput:o,shouldUseHTMLPreview:a,selectedContact:s,contentType:c,customPreview:l,uniqueFrameId:u,inpage:d}=this.props,p=n||r;return Object(F.jsx)(V,{to:s,from:t,subject:p,previewUrl:i,previewHTMLOutput:o,shouldUseHTMLPreview:a,contentType:c,type:e,onLoad:this.onLoad(e),uniqueFrameId:u,customPreview:l,inpage:d})}render(){const e=this.props.rightArrowEnabled||this.props.leftArrowEnabled;return Object(F.jsx)("div",{id:"preview-devices","data-selenium":"preview-devices",children:Object(F.jsx)("div",{className:"preview-devices",children:Object(F.jsxs)(q.a,{justify:"center",wrap:"nowrap",align:"start",children:[e&&Object(F.jsx)(q.a,{justify:"center",wrap:"nowrap",align:"center",className:"preview-device-arrow-container",children:Object(F.jsx)(ke.a,{onClick:this.props.onPrevious,className:"preview-arrow",disabled:!this.props.leftArrowEnabled,children:Object(F.jsx)(De.a,{name:"left"})})}),Object(F.jsxs)(q.a,{justify:"center",wrap:"wrap",align:"center",children:[Object(F.jsxs)(Ae,{"data-test-id":"desktop-device-frame",contentClassName:"device-content",className:"device-preview desktop-preview m-y-2",children:[this.renderLoading(),this.renderPreviewComponent("desktop")]}),Object(F.jsxs)(Ae,{"data-test-id":"mobile-device-frame",contentClassName:"device-content",type:"mobile",className:"device-preview mobile-preview m-y-2",children:[this.renderLoading(),this.renderPreviewComponent("mobile")]})]}),e&&Object(F.jsx)(q.a,{justify:"center",wrap:"nowrap",align:"center",className:"preview-device-arrow-container",children:Object(F.jsx)(ke.a,{onClick:this.props.onNext,style:{marginLeft:"34px"},className:"preview-arrow",disabled:!this.props.rightArrowEnabled,children:Object(F.jsx)(De.a,{name:"right"})})})]})})})}}Pe.propTypes={previewUrl:g.a.string.isRequired,previewHTMLOutput:g.a.string,selectedContact:g.a.shape({email:g.a.string.isRequired,name:g.a.string.isRequired}),from:g.a.shape({email:g.a.string.isRequired,name:g.a.string.isRequired}),subject:g.a.string,uniqueFrameId:g.a.string,shouldUseHTMLPreview:g.a.bool,previewSubject:g.a.string,isLoading:g.a.bool,contentType:g.a.string.isRequired,leftArrowEnabled:g.a.bool,rightArrowEnabled:g.a.bool,inpage:g.a.bool,onNext:g.a.func,onPrevious:g.a.func,customPreview:g.a.object};Pe.defaultProps={from:null,subject:"",selectedContact:null,isLoading:!1,leftArrowEnabled:!1,rightArrowEnabled:!1,customPreview:null};var Re=Pe,Fe=n(772),Le=n(440),Me=n(441),Be=n(483),Ue=n(2766);class Ve extends r.Component{constructor(e){super(e);this.renderHeader=this.renderHeader.bind(this)}renderHeader(){return Object(F.jsxs)(Le.a,{use:"tabs",className:"fullscreen-header",children:[Object(F.jsx)(Me.a,{minWidth:"33%",children:Object(F.jsx)(Fe.a,{className:"close-button","data-test-id":"fullscreen-modal-back-button",children:Object(F.jsx)(v.a,{className:"m-left-0",onClick:this.props.onClose,children:Object(F.jsx)(Be.a,{children:Object(F.jsx)(s.a,{message:"ContentComponents.fullscreenModal.back"})})})})}),Object(F.jsx)(Me.a,{children:this.props.headerContent}),Object(F.jsx)(Me.a,{minWidth:"33%",children:this.props.headerButton})]})}render(){return Object(F.jsx)(Ue.a,Object.assign({use:"fullscreen",className:this.props.className},this.props.modalProps,{children:Object(F.jsxs)("div",{className:"fullscreen-modal-contents",children:[this.renderHeader(),Object(F.jsx)("div",{className:"modal-content",children:this.props.children})]})}))}}Ve.propTypes={headerButton:g.a.node,headerContent:g.a.node,onClose:g.a.func.isRequired,children:g.a.node,className:g.a.string,modalProps:g.a.object};Ve.defaultProps={modalProps:{}};var He=Ve,qe=n(2685);const Ge=e=>{const{user:t}=Object(c.userInfoSync)();return"email"!==e?{}:{from:{email:t.email,name:Object(qe.a)({firstName:t.first_name,lastName:t.last_name})},selectedContact:{email:o.a.text("ContentComponents.previewDevices.sampleRecipient.email"),name:o.a.text("ContentComponents.previewDevices.sampleRecipient.name")},subject:o.a.text("ContentComponents.previewDevices.sampleSubject")}};class We extends r.Component{render(){return Object(F.jsx)(He,{headerButton:this.props.headerButton,headerContent:this.props.headerContent,onClose:this.props.handleClose,modalProps:this.props.modalProps,children:Object(F.jsx)(Re,Object.assign({},Ge(this.props.contentType),this.props))})}}We.propTypes={contentType:g.a.string.isRequired,headerButton:g.a.node,headerContent:g.a.node,handleClose:g.a.func.isRequired,previewUrl:g.a.string,leftArrowEnabled:g.a.bool,rightArrowEnabled:g.a.bool,onNext:g.a.func,onPrevious:g.a.func,modalProps:g.a.object};var ze=We,$e=n(2634),Ke=n(1183),Ye=n(1185),Xe=n(2758);const Je=["readOnly","required","extraOptions","defaultOptions","onChange"];function Qe(e){return{options:Ye.d(e),webInteractives:Ye.e(e),defaultOptions:Ye.a(e)}}const Ze={fetchWebInteractive:Ke.b,fetchWebInteractives:Ke.c,saveCache:Ke.d,clearCache:Ke.a},et=({pageContext:e={},contentId:t})=>{const[n,i]=Object(r.useState)(!1);return Object(F.jsxs)("div",{children:[Object(F.jsx)(v.a,{onClick:()=>i(!0),children:Object(F.jsx)(s.a,{message:"ContentComponents.cmv2.fields.call_to_action.preview"})}),n&&Object(F.jsx)(ze,{contentType:"web-interactives",handleClose:()=>i(!1),previewUrl:$e.b.getWebInteractivePreviewUrl(t,e)})]})};class tt extends r.Component{constructor(e){super(e);this.loadOptions=this.loadOptions.bind(this);this.debouncedLoadOptions=Object(i.debounce)(this.loadOptions,Xe.c);this.renderOption=this.renderOption.bind(this);this.state={input:""}}componentDidMount(){this.props.value&&this.props.fetchWebInteractive(this.props.value)}componentDidUpdate(e){const{fetchWebInteractive:t,webInteractives:n,value:r}=this.props,{value:o}=e;!r||Object(i.isEqual)(o,r)||n[r]||t(r)}loadOptions(e,t,n={offset:0}){let r=n.offset;if(e!==this.state.input){this.setState({input:e});this.props.clearCache();r=0}const i={name:e,containerTypes:["BANNER","MODAL","SLIDE_IN"],count:Xe.f,offset:r};this.props.fetchWebInteractives(i).then(e=>{const{total:n,hasMore:i}=e;t(null,{options:this.props.options,pagination:{hasMore:i,offset:r+Xe.f,length:n}})}).catch(e=>{setTimeout(()=>{throw e})})}renderOption(e){const{disabled:t,dropdownText:n,text:r,help:i}=e,o=Object(F.jsxs)("div",{title:r,className:"m-x-4 p-y-2",children:[Object(F.jsx)("div",{children:Object(F.jsx)(O.a,{tooltip:!t,children:r||n})}),Object(F.jsx)(O.a,{tooltip:!t,children:Object(F.jsx)(y.a,{children:i})})]});return e.disabled?Object(F.jsx)(j.a,{title:Object(F.jsx)(s.a,{message:"ContentComponents.cmv2.fields.callToAction.disabledTooltip"}),children:o}):o}render(){const e=this.props,{readOnly:t,required:n,extraOptions:r,defaultOptions:i,onChange:o}=e,a=Object(m.a)(e,Je),s=i.concat(r||[]);return Object(F.jsxs)("div",{children:[Object(F.jsx)(C.a,Object.assign({"data-selenium":"callToAction-select",clearable:!n,onChange:o,loadOptions:this.debouncedLoadOptions,defaultOptions:s,optionRenderer:this.renderOption,optionRendererIgnoresSpecialOptions:!0,readOnly:t,type:"call_to_action"},a)),this.props.value&&Object(F.jsx)(et,{contentId:this.props.value,pageContext:this.props.pageContext})]})}}tt.propTypes={readOnly:g.a.bool,required:g.a.bool.isRequired,useOnDark:g.a.bool,value:g.a.oneOfType([g.a.string,g.a.number]),extraOptions:g.a.array,onChange:g.a.func,pageContext:g.a.object,fetchWebInteractive:g.a.func.isRequired,fetchWebInteractives:g.a.func.isRequired,saveCache:g.a.func.isRequired,clearCache:g.a.func.isRequired,options:g.a.array.isRequired,webInteractives:g.a.object.isRequired,defaultOptions:g.a.array.isRequired};tt.defaultProps={extraOptions:[],defaultOptions:[],required:!1,pageContext:{}};var nt=Object(b.connect)(Qe,Ze)(tt),rt=n(298),it=n(2671),ot=n(1149),at=n(1272),st=n(443),ct=n(696),lt=n(2734);const ut=e=>e.resources.phoneNumbers.whatsappNumbers,dt=e=>e.resources.phoneNumbers.whatsappNumbersRequestStatus;var pt=n(64),ht=n(1049);const mt=(...e)=>Object(ht.a)(e).get("short-messages/app/v1/whatsapp/phone-numbers",{query:{includeNonConfiguredForSending:!1}});var ft=n(68);const gt=Object(pt.b)(ft.WHATSAPP_PHONE_NUMBERS_FETCH,mt);var bt=n(177),Ot=n(66);const yt=new RegExp(/^\+(\d){8,16}$/),jt=e=>"ContentComponents.cmv2.fields.url."+e,vt=({onNumberTypeChange:e,readOnly:t,supportedTypes:n,urlType:r})=>{const i=n.includes(bt.a.PHONE_NUMBER),o=n.includes(bt.a.WHATSAPP_NUMBER);return i&&o?Object(F.jsxs)(at.a,{className:"m-top-3",name:"phone-number-source",children:[Object(F.jsx)(ot.a,{"data-selenium":"cmv2-phone-number-radio-input",checked:r===bt.a.PHONE_NUMBER,name:""+Math.random(),onChange:()=>e(bt.a.PHONE_NUMBER),readOnly:t,children:Object(F.jsx)(s.a,{message:jt("numberType."+bt.a.PHONE_NUMBER)})}),Object(F.jsx)(ot.a,{"data-selenium":"cmv2-whatsapp-number-radio-input",checked:r===bt.a.WHATSAPP_NUMBER,name:""+Math.random(),onChange:()=>e(bt.a.WHATSAPP_NUMBER),readOnly:t,children:Object(F.jsx)(s.a,{message:jt("numberType."+bt.a.WHATSAPP_NUMBER)})})]}):null},Ct=({onChange:e,readOnly:t,urlType:n,useOnDark:r,value:i,whatsAppNumbers:o,error:a})=>{const c=Object(b.useSelector)(dt);if(n===bt.a.WHATSAPP_NUMBER){const n=o.map(e=>{const{phoneNumber:t,phoneNumberDisplayName:n}=e;return{buttonText:`${n} (${t})`,help:t,text:n,value:t}}),l=t=>{e(t.target.value)};return c!==Ot.SUCCEEDED?Object(F.jsx)(lt.a,{layout:"centered"}):c!==Ot.SUCCEEDED||o.length?Object(F.jsx)(u.a,{"data-selenium":"cmv2-whatsapp-number-input",buttonUse:r?"form-on-dark":"form",error:a,onChange:l,options:n,readOnly:t,value:i}):Object(F.jsx)(ct.a,{className:"p-y-3","data-selenium":"cmv2-whatsapp-number-alert",type:"info",children:Object(F.jsxs)(q.a,{direction:"column",children:[Object(F.jsx)(s.a,{message:jt("whatsAppAlert.text")}),Object(F.jsx)(st.a,{className:"m-top-2",external:!0,href:Object($e.g)(),size:"extra-small",use:"tertiary",children:Object(F.jsx)(s.a,{message:jt("whatsAppAlert.button")})})]})})}{const n=({phoneNumber:t})=>{e(t)};return Object(F.jsx)(it.a,{"data-selenium":"cmv2-phone-number-input",countrySelectProps:{buttonUse:r?"form-on-dark":"form",readOnly:t},onChange:n,phoneInputProps:{error:a,readOnly:t,use:r?"on-dark":"default"},value:i})}},xt=(e,t,n)=>e===bt.a.PHONE_NUMBER&&n&&!yt.test(n)?Object(F.jsx)(s.a,{message:jt("input.validation.PHONE_NUMBER")}):e===bt.a.WHATSAPP_NUMBER&&n&&t.length&&!t.find(e=>e.phoneNumber===n)?Object(F.jsx)(s.a,{message:jt("input.validation.WHATSAPP_NUMBER")}):void 0;var Et=({onChange:e,onTypeChange:t,readOnly:n=!1,supportedTypes:i,urlType:o,useOnDark:a,value:c,error:l})=>{const u=Object(b.useDispatch)(),d=Object(b.useSelector)(dt),h=Object(b.useSelector)(ut);Object(r.useEffect)(()=>{o===bt.a.WHATSAPP_NUMBER&&d===Ot.UNINITIALIZED&&u(gt())},[u,o,d]);const m=e=>{t(Object(rt.a)(e))},f=Object(F.jsx)(s.a,{message:jt("input.labelsByType."+o)}),g=xt(o,h,c),O=l||!!g;return Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(vt,{onNumberTypeChange:m,readOnly:n,supportedTypes:i,urlType:o}),Object(F.jsx)(p.a,{error:O,validationMessage:!l&&g,label:f,children:Object(F.jsx)(Ct,{onChange:e,readOnly:n,urlType:o,useOnDark:a,value:c,whatsAppNumbers:h,error:O})})]})},Tt=n(1085),St=n(2588);var It=({onChange:e,required:t,value:n})=>{const r=Object(b.useSelector)(Tt.h)||{},i=Object(b.useSelector)(e=>Object(Tt.d)(e,{url:n})),o=t=>{const{id:n}=t||{},i=r[n];e(i?i.checkoutUrl:"")};return Object(F.jsx)(St.a,{onFieldChange:o,required:t,value:i?{id:i.id}:void 0})},wt=n(1184),_t=n(1003),Nt=n(2810);var At=new RegExp("^#([A-Fa-f0-9]{2})([A-Fa-f0-9]{2})([A-Fa-f0-9]{2})|^#([A-Fa-f0-9]{1})([A-Fa-f0-9]{1})([A-Fa-f0-9]{1})$");const Dt=Object(_t.a)({name:"HexCode",validator:e=>At.test(e)});Dt.toRGB=e=>{const t=At.exec(e);let n=null;if(t&&7===t.length){void 0!==t[1]&&(n={r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)});void 0!==t[4]&&(n={r:parseInt(t[4]+t[4],16),g:parseInt(t[5]+t[5],16),b:parseInt(t[6]+t[6],16)})}return n};var kt=Dt,Pt=n(2659),Rt=n(1004);function Ft(...e){Error.apply(this,e)}Ft.prototype=Object.create(Error.prototype,{constructor:{value:Error,enumerable:!1,writable:!0,configurable:!0}});Object.setPrototypeOf(Ft,Error);var Lt=Ft;class Mt extends Lt{constructor(e){super(e);this.message=e;this.stack=""}}const Bt="<<?>>",Ut=e=>null==e?Bt:e.constructor&&e.constructor.name||Bt,Vt=e=>null==e?new Mt(null===e?"value is marked as required but is `null`":"value is marked as required but is `undefined`"):null,Ht=e=>{const t=(t,n,...r)=>null==n?t?Vt(n):null:e(n,...r),n=t.bind(null,!1);n.isRequired=t.bind(null,!0);return n},qt=e=>Ht(t=>Object.prototype.toString.call(t)===`[object ${e}]`?null:new Mt(`expected value to be a '${e}', received '${Ut(t)}'`)),Gt=(qt("Array"),qt("Boolean"),qt("Function")),Wt=(qt("Number"),qt("Object")),zt=(qt("String"),e=>Ht(t=>e.includes(t)?null:new Mt(`value must be one of '${e.join(", ")}'`))),$t=(e,t,n=!1)=>{const r=Wt(e);if(r instanceof Mt)return r;const i=n?Object.assign({},e,t):t;for(const r in i)if(Object.prototype.hasOwnProperty.call(t,r)){const i=t[r],o=e[r];let a=i(o);n&&null===a&&(a=Vt(o));if(a instanceof Mt)return new Mt(`invalid key '${r}': ${a}`)}else if(n)return new Mt(`invalid key '${r}', expected '${Object.keys(t).join(", ")}'`);return null},Kt=(e,t)=>{const n=Ht(n=>$t(n,t,e));n.extend=n=>{let r;r=null===Gt(n)?n(t):null===Wt(n)?Object.assign({},t,n):Object.assign({},t);return Kt(e,r)};return n},Yt=(Kt.bind(null,!1),Kt.bind(null,!0),(e,t)=>Ht(n=>e.test(n)?null:new Mt(`invalid ${t} value, received '${n}'`))),Xt=new RegExp(`^(?:.+)@${Rt.a.domain}${Rt.a.search}?$`),Jt=Object(_t.a)({name:"Email address with query params",validator:e=>Xt.test(e)}),Qt=(Yt(Jt,"Email address with query params"),Yt(Nt.a,"email address"),Yt(kt,"hex code"),Yt(Pt.a,"URL"),new RegExp(/^#\S/)),Zt=new RegExp(/^tel:\S/),en=new RegExp(/^\/\S/),tn=new RegExp(/\s/),nn=new RegExp(`^${Rt.a.protocol}${Rt.a.domain}(?:${Rt.a.path}(?:${Rt.a.file})?)?${Rt.a.search}?$`,"i"),rn=Object(_t.a)({name:"External URL",validator:e=>Qt.test(e)||Zt.test(e)||en.test(e)||nn.test(e)}),on=(Yt(rn,"External URL"),Ht(e=>{try{new RegExp(e);return null}catch(t){return new Mt(`invalid regex value, received '${e}'\n${t}`)}}),zt(["%","ch","em","ex","in","lh","pc","pt","px","Q","rem","vh","vmax","vmin","vw"]),e=>!tn.test(e));var an=n(160);const sn={test:()=>!0},cn=e=>"ContentComponents.cmv2.fields.url."+e,ln=Object(h.a)(d.a),un=e=>e.reduce((e,t)=>{t!==bt.a.PHONE_NUMBER&&t!==bt.a.WHATSAPP_NUMBER?e.push(t):e.includes(bt.a.PHONE_NUMBER)||e.push(bt.a.PHONE_NUMBER);return e},[]),dn=Object(i.memoize)((e,t)=>t.length?un(t).map(e=>({text:o.a.text(cn("linkType.linkLabels."+e)),value:e})):[],(e,t)=>t&&t.length?`${e}:${t.toString()}`:e);class pn extends r.Component{constructor(e){super(e);this.onTypeChange=this.onTypeChange.bind(this);this.onHrefChange=this.onHrefChange.bind(this);this.onContentIdChange=this.onContentIdChange.bind(this);this.validate=this.validate.bind(this);const{user:t}=Object(c.userInfoSync)(),n=t.scopes.includes("payment-links-read"),r=t.scopes.includes("messaging-access");this.state={error:!1,hasCallsToActionAccess:this.selectedUrlType===bt.a.CALL_TO_ACTION,hasPaymentsAccess:n,hasWhatsappAccess:r}}componentDidMount(){const{user:e}=Object(c.userInfoSync)(),{value:t}=this.props;t&&t.href&&this.validate(t.href);!this.state.hasCallsToActionAccess&&e.scopes.includes("calls-to-action-read")&&Object(wt.c)().then(e=>{this.setState({hasCallsToActionAccess:e})}).catch(e=>{console.error(e)})}componentDidUpdate(e){const{supported_types:t,value:n={type:bt.a.EXTERNAL,href:""}}=this.props;t&&t.length&&n&&-1===t.indexOf(n.type)&&!Object(i.isEqual)(t,e.supported_types)&&this.props.onFieldChange({content_id:null,href:"",type:t[0]})}get selectedUrlType(){const{value:e={type:bt.a.EXTERNAL,href:""}}=this.props;return e&&e.type?e.type===bt.a.WHATSAPP_NUMBER?bt.a.PHONE_NUMBER:e.type:bt.a.EXTERNAL}get supportedUrlTypes(){const{supported_types:e}=this.props,{hasCallsToActionAccess:t,hasPaymentsAccess:n,hasWhatsappAccess:r}=this.state;let i=e?[...e]:Object.keys(bt.a);n||(i=i.filter(e=>e!==bt.a.PAYMENT));r||(i=i.filter(e=>e!==bt.a.WHATSAPP_NUMBER));t||(i=i.filter(e=>e!==bt.a.CALL_TO_ACTION));return i}get validator(){const{value:e={type:bt.a.EXTERNAL,href:""}}=this.props;switch(e&&e.type){case bt.a.EXTERNAL:return rn;case bt.a.EMAIL_ADDRESS:return Jt;default:return sn}}onTypeChange({target:{value:e}}){e===bt.a.PHONE_NUMBER&&!this.supportedUrlTypes.includes(bt.a.PHONE_NUMBER)&&(e=bt.a.WHATSAPP_NUMBER);this.props.onFieldChange({content_id:null,href:"",type:e});this.setState({error:!1})}validate(e){if(!e)return!0;let t=!1;on(e)&&(t=this.validator.test(e));this.setState({error:!t});return t}onHrefChange(e){let t=e;"object"==typeof e&&e&&(t=e.target.value);this.validate(t);const{type:n=bt.a.EXTERNAL}=this.props.value||{};this.props.onFieldChange({content_id:null,href:t,type:n})}onContentIdChange({target:{value:e}}){setTimeout(()=>{const{type:t=bt.a.CONTENT}=this.props.value||{};this.props.onFieldChange({content_id:e,href:null,type:t})},0)}renderTypeSelect(){const{error:e=!1,readOnly:t,useOnDark:n}=this.props,r=dn(Object(a.a)(),this.supportedUrlTypes);return r.length<2?null:Object(F.jsxs)("div",{children:[Object(F.jsx)(l.a,{children:Object(F.jsx)(s.a,{message:cn("linkType.label")})}),Object(F.jsx)(u.a,{buttonUse:n?"form-on-dark":"form",defaultValue:bt.a.EXTERNAL,error:e,onChange:this.onTypeChange,options:r,readOnly:t,value:this.selectedUrlType})]})}renderInput(){const{componentsByType:e,error:t=!1,fieldKey:n,pageContext:r={},placeholder:i,readOnly:a,required:s,useOnDark:c,value:l={type:bt.a.EXTERNAL,href:""}}=this.props,{type:u,href:d,content_id:p}=l||{};switch(u){case bt.a.CONTENT:{const n=e[an.PAGE];return Object(F.jsx)(n,{error:t,value:p,onChange:this.onContentIdChange,readOnly:a,useOnDark:c})}case bt.a.BLOG:{const n=e[an.BLOG];return Object(F.jsx)(n,{error:t,value:p,onChange:this.onContentIdChange,readOnly:a,useOnDark:c})}case bt.a.FILE:{const r=e[an.FILE];return Object(F.jsx)(r,{error:t,fieldKey:n,onFieldChange:this.onHrefChange,value:d,readOnly:a,label:o.a.text(cn("input.labelsByType."+bt.a.FILE))})}case bt.a.CALL_TO_ACTION:return Object(F.jsx)(nt,{error:t,value:p,onChange:this.onContentIdChange,readOnly:a,useOnDark:c,pageContext:r});case bt.a.PHONE_NUMBER:case bt.a.WHATSAPP_NUMBER:return Object(F.jsx)(Et,{onChange:this.onHrefChange,onTypeChange:this.onTypeChange,readOnly:a,supportedTypes:this.supportedUrlTypes,urlType:u,useOnDark:c,value:d,error:t});case bt.a.PAYMENT:return Object(F.jsx)(It,{onChange:this.onHrefChange,required:s,value:d});default:return Object(F.jsx)(ln,{error:t,onChange:this.onHrefChange,placeholder:i,readOnly:a,use:c?"on-dark":"default",value:d})}}renderInputForm(){const{required:e,value:t={type:bt.a.EXTERNAL,href:""}}=this.props,{error:n}=this.state,{content_id:r,href:i,type:o}=t||{},a=e&&!i&&!r,c=!(o===bt.a.FILE||o===bt.a.PHONE_NUMBER||o===bt.a.WHATSAPP_NUMBER)&&Object(F.jsx)(s.a,{message:cn("input.labelsByType."+this.selectedUrlType)});let l=null;n?l=Object(F.jsx)(s.a,{message:cn("input.validation."+this.selectedUrlType)}):a&&(l=Object(F.jsx)(s.a,{message:cn("input.validation.hrefRequired")}));return Object(F.jsx)(p.a,{error:n||a,label:c,validationMessage:l,children:this.renderInput()})}render(){return Object(F.jsxs)("div",{children:[this.renderTypeSelect(),this.renderInputForm()]})}}t.a=pn},function(e,t,n){"use strict";n.r(t);var r=n(2734),i=n(40),o=n(1445),a=n(2648),s=n(1404),c=n(1350),l=n(298),u=n(2609),d=n(279);const p="MOVE_UP",h="MOVE_DOWN",m="REMOVE";var f=n(1454),g=n(1415),b=n(1422),O=n(281),y=n(1),j=n.n(y),v=n(747);const C=["jpg","jpeg","png","gif","tif","tiff","ico","bmp","webp","svg"],x=["mov","avi","flv","wmv","rm","3gp","3g2","asf","asx","mpg","mp4","mpeg","swf","m4v","webm"],E=["csv","doc","docx","dot","dotx","key","pdf","pot","potx","pps","ppsx","ppt","pptx","txt","wpd","wps","wri","xls","xlsb","xlsx","xlt","xlx","xml"],T=["aac","aif","m4a","mp3","mpa","ra","wav","wma"];v.e.IMG,v.e.MOVIE,v.e.DOCUMENT,v.e.AUDIO;function S(e){const t=e.split(".");return 1===t.length?{extension:"",name:e}:{extension:t.pop()||"",name:t.join(".")}}var I=n(2765),w=n(45);const _=e=>e&&e.label?S(e.label).extension.toLowerCase():"",N=(e,t)=>{switch(e){case g.a:return Object(w.jsx)(d.a,{message:"customerDataProperties.PropertyInputFilesV2.fileUploadErrors.disallowedExtension"});case g.g:return Object(w.jsx)(O.a,{message:"customerDataProperties.PropertyInputFilesV2.fileUploadErrors.maxUploadSizeExceeded",options:{maxFileSize:t?g.f:g.e}});case g.h:return Object(w.jsx)(d.a,{message:"customerDataProperties.PropertyInputFilesV2.fileUploadErrors.timeout"});default:return Object(w.jsx)(d.a,{message:"customerDataProperties.PropertyInputFilesV2.fileUploadErrors.unknownError"})}},A=(e,t,n)=>0!==e.size?Object(u.a)(t,n,[{code:f.e,message:Object(w.jsx)(d.a,{message:"customerDataProperties.PropertyInputFilesV2.invalidFileValue"})}]):Object(u.c)(t,n),D=(e,t)=>{const n=t?g.f:g.e;return e.size>1024*n*1024},k=(e,t)=>e.filter(e=>!D(e,t)),P=(e,t)=>e.filter(e=>D(e,t)),R=(e,t)=>e?t.filter(t=>!e.some(e=>e.id===t)):t,F=(e,t)=>{if(!e||0===t.length)return[];const n=[];t.forEach(t=>{const r=e.find(e=>e.id===t);r&&n.push(r)});return n},L=e=>e.lengthComputable?Math.round(e.loaded/e.total*97):0,M=e=>e&&e.includes(";")?e.replace(/;+$/,""):e,B=(e,t)=>{if(0===t.size)return e;const n=Array(t.size).fill(";").join("");return e?e+n:n},U=(e,t,n)=>{e<0||t<0||e>=n.length||t>=n.length||([n[e],n[t]]=[n[t],n[e]])},V=(e,t)=>{e<0||e>=t.length||t.splice(e,1)},H=({currentValue:e,missingReferences:t,action:n,fileId:r})=>{if(!e)return"";if(!e.includes(r))return e;const i=Object(b.b)(e).filter(e=>e&&!t.includes(e));if(n===p){const e=i.indexOf(r);U(e,e-1,i);return Object(b.a)([...i,...t])}if(n===h){const e=i.indexOf(r);U(e,e+1,i);return Object(b.a)([...i,...t])}if(n===m){const t=Object(b.b)(e),n=t.indexOf(r);V(n,t);return Object(b.a)(t)}return e},q=(e,t)=>{var n;return e&&Object.prototype.hasOwnProperty.call(e,t)&&"public"===(null===(n=e[t])||void 0===n||null===(n=n.metadata)||void 0===n||null===(n=n.fileVisibility)||void 0===n?void 0:n.value)?"public":"private"},G=(e,t)=>{let n=I.c;if("none"===t){n=I.a;"public"===e&&(n=I.b)}return n},W="filemanager/api/v3/files",z="/crm-properties-file-values",$=e=>!e.some(e=>"fulfilled"===e.status),K=(e,t,n,r,i,o,a)=>{const s=new FormData;s.append("file",e);s.append("folderPath",z);s.append("options",JSON.stringify({access:G(o,a)}));return i.post(W+"/upload",{data:s,headers:{"content-type":!1},timeout:0,withXhr:n=>{n.upload.addEventListener("progress",n=>t(n,e),!1)}}).then(t=>{const r=t.objects[0],i={id:r.id,label:r.name,additionalProperties:{fileId:r.id,created:r.created,size:r.size,type:r.type,updated:r.updated}};n(e,i);return i}).catch(t=>{const n=JSON.parse(t.data);r(e,n.errorType)})},Y=(e,t,n,r,i,o,a)=>{const s=e.map(e=>K(e,n,r,i,t,o,a));return Promise.allSettled(s).then(e=>{if($(e))throw Error("No files were uploaded");return e.flatMap(e=>"fulfilled"===e.status&&e.value?e.value.id:[]).join(";")}).catch(e=>{throw e})};var X=n(699),J=n(2679),Q=n(2654),Z=n(696),ee=n(1441);const te=()=>Object(ee.a)()(g.b);var ne=({isEditDisabled:e,hasPropertyExtensionsMetadataError:t,onSelect:n,currentFilesCount:r})=>{const[o,a]=Object(i.useState)(!1),s=te(),c=r>=g.d,l=e||t||c,u=c?Object(w.jsx)(O.a,{message:"customerDataProperties.PropertyInputFilesV2.addFileMaxCountReached",options:{maxFilePerProperty:g.d}}):t?Object(w.jsx)(d.a,{message:"customerDataProperties.PropertyInputFilesV2.addFileDisabledDueToMetadataError"}):null,p=g.d-r,h=Object(i.useCallback)(e=>{const{files:t}=e.target;if(!t)return;const r=Array.from(t);r.length>p?a(!0):n(k(r,s),P(r,s))},[n,p,s]);return o?Object(w.jsx)(Z.a,{use:"inline",type:"danger",className:"m-top-1",closeable:!0,onClose:()=>a(!1),children:Object(w.jsx)(O.a,{message:"customerDataProperties.PropertyInputFilesV2.addFileMaxCountReachedOnSelection",options:{maxFilePerProperty:g.d}})}):Object(w.jsx)(Q.a,{title:u,placement:"bottom",disabled:!l,children:Object(w.jsxs)(X.a,{use:"tertiary-light",size:"extra-small",onChange:h,multiple:!0,disabled:l,children:[Object(w.jsx)(J.a,{name:"add"}),Object(w.jsx)(d.a,{message:"customerDataProperties.PropertyInputFilesV2.addFile"})]})})},re=n(456),ie=n(520),oe=n(710),ae=n(287),se=n.n(ae);const ce=se()(ie.a).withConfig({displayName:"FileActions__StyledButtonGroupWrapper",componentId:"n221rk-0"})(["flex-shrink:0;margin-right:6px;"]),le=(e,t,n)=>!t||n?null:"up"===e?Object(w.jsx)(d.a,{message:"customerDataProperties.PropertyInputFilesV2.upButtonDisableTooltip"}):"down"===e?Object(w.jsx)(d.a,{message:"customerDataProperties.PropertyInputFilesV2.downButtonDisableTooltip"}):null,ue=({fileId:e,disabled:t,index:n,totalFiles:r,uploadsInProgress:i,onFileAction:o})=>{const a=0===n||t,s=n===r-1||t,c=t;return Object(w.jsxs)(ce,{style:{flexShrink:0},children:[Object(w.jsx)(oe.a,{size:"small",use:"link",disabled:a,onClick:()=>o({action:p,fileId:e}),tooltip:le("up",a,i),children:Object(w.jsx)(J.a,{name:"up"})}),Object(w.jsx)(oe.a,{size:"small",use:"link",disabled:s,onClick:()=>o({action:h,fileId:e}),tooltip:le("down",s,i),children:Object(w.jsx)(J.a,{name:"down"})}),Object(w.jsx)(oe.a,{size:"small",use:"link",disabled:c,onClick:()=>o({action:m,fileId:e}),children:Object(w.jsx)(J.a,{name:"remove",size:12})})]})};var de=Object(i.memo)(ue),pe=n(2712),he=n(28),me=n(1190);var fe=se()(me.a).withConfig({displayName:"StyledUIFileAttachment",componentId:"mobivs-0"})(["margin-top:4px;background-color:transparent;border:none;padding:8px 12px;"]),ge=n(357),be=n(2),Oe=n(41),ye=n.n(Oe);const je=["csv","doc","docx","dot","dotx","key","pdf","pot","potx","pps","ppsx","ppt","pptx","txt","wpd","wps","wri","xls","xlsb","xlsx","xlt","xlx","xml"];function ve(e){const{extension:t}=S(e.name),n=e.type.split("/")[0].toLowerCase();if(t&&je.includes(t.toLowerCase()))return v.e.DOCUMENT;switch(n){case"image":return v.e.IMG;case"video":return v.e.MOVIE;case"audio":return v.e.AUDIO;default:return v.e.OTHER}}var Ce=n(351);const xe=["fileType","extension","size"],Ee=["file"],Te=3,Se=se.a.div.withConfig({displayName:"FileTypeIcon__IconContainerStyled",componentId:"odgc4i-0"})(["margin-top:","px;"],Te),Ie=["doc","docx"],we=["xls","xlsx","csv"],_e=["ppt","pptx"];function Ne(e){let{fileType:t,extension:n,size:r=35}=e,i=Object(be.a)(e,xe),o="file";const a=("string"==typeof r?Ce.c[r]:r)-Te;switch(t){case v.e.AUDIO:o="audioFile";break;case v.e.MOVIE:o="videoFile";break;case v.e.DOCUMENT:"pdf"===n?o="pdfFile":Ie.includes(n)?o="wordFile":we.includes(n)?o="excelFile":_e.includes(n)&&(o="powerPointFile");break;case v.e.IMG:o="insertImage"}return Object(w.jsx)(Se,{children:Object(w.jsx)(J.a,Object.assign({},i,{name:o,size:a}))})}Ne.propTypes={fileType:ye.a.oneOf(Object.values(v.e)).isRequired,extension:ye.a.string.isRequired,size:ye.a.number};(e=>{let{file:t}=e,n=Object(be.a)(e,Ee);const{extension:r}=S(t.name),i=ve(t);return Object(w.jsx)(Ne,Object.assign({},n,{fileType:i,extension:r}))}).propTypes={file:ye.a.instanceOf(File),size:ye.a.number};const Ae=(e,t)=>Object(w.jsx)(ge.a,{children:Object(w.jsx)(pe.a,{external:!0,href:`${Object(he.getFullUrl)("app")}/file-preview/${encodeURIComponent(t)}/file/${encodeURIComponent(e.additionalProperties.fileId)}/`,children:e.label})}),De=({fileReference:e})=>{const t=j.a.get();return t?Object(w.jsx)(fe,{fileName:Ae(e,t),size:"small",renderPreview:Object(w.jsx)(Ne,{fileType:e.additionalProperties.type,extension:_(e),size:20})}):null};var ke=Object(i.memo)(De),Pe=n(324),Re=n(302),Fe=n(434);var Le=se()(Fe.a).attrs({align:"center",justify:"between"}).withConfig({displayName:"StyledFileValueContainer",componentId:"k8t5o0-0"})(["height:34px;box-sizing:border-box;margin-top:4px;background-color:",";border:1px solid ",";border-radius:",";"],Pe.GYPSUM,({withError:e})=>e?Pe.CANDY_APPLE:Pe.KOALA,Re.m);var Me=({fileReferences:e,isEditDisabled:t,uploadsInProgress:n,onFileAction:r})=>Object(w.jsx)(re.a,{children:e.map((i,o)=>Object(w.jsxs)(Le,{"data-test-id":i.id,children:[Object(w.jsx)(ke,{fileReference:i}),Object(w.jsx)(de,{fileId:i.id,disabled:t,index:o,totalFiles:e.length,uploadsInProgress:n,onFileAction:r})]},i.id))}),Be=n(485),Ue=n(1420),Ve=n(1403),He=n(1446);const qe="reloading",Ge=e=>e===qe;function We(e){return"fulfilled"===e.status}var ze=(e,t)=>{const{api:{byId:n}}=e,r=Object(i.useRef)(),a=Array.isArray(t),s=t?o.c:o.b,[c,l]=Object(i.useState)({error:void 0,references:void 0,status:s});t&&!Ge(c.status)&&Object(o.f)(c.status)&&l({error:void 0,references:void 0,status:o.c});Object(i.useEffect)(()=>{if(!t){l({error:void 0,references:void 0,status:o.b});r.current=void 0;return}if(r.current&&t.every(e=>r.current.includes(e))){r.current=t;return}r.current=t;if(0===t.length){l({error:void 0,references:[],status:o.d});return}c.status===o.d&&l({error:void 0,references:c.references,status:qe});const e=e=>l({error:void 0,references:e,status:o.d}),i=e=>l({error:e,references:void 0,status:o.a});Object(Ve.a)(Object(Ue.a)(t.map(e=>n(e))).then(n=>{const r=n.filter(We).map(({value:e})=>e);0===r.length?i(Object(He.a)(t)):e(r)}))},[a,t,n,c.references,c.status]);return c};const $e=Object(ae.keyframes)(["0%{background-color:","}50%{background-color:","}100%{background-color:","}"],Pe.KOALA,Pe.GREAT_WHITE,Pe.KOALA),Ke=se.a.div.withConfig({displayName:"FileSkeleton__SkeletonBase",componentId:"sc-10cuyuz-0"})(["display:inline-block;height:34px;width:100%;border-radius:3px;margin-top:4px;margin-bottom:0px;animation:"," 2s ease-in-out infinite;"],$e);var Ye=()=>Object(w.jsx)(Ke,{"data-test-id":"file-skeleton"});const Xe=Object(w.jsx)(d.a,{message:"customerDataProperties.PropertyInputFilesV2.unresolvedFileValue"}),Je=e=>/^https?:\/\//i.test(e);var Qe=({isEditDisabled:e,missingFileReferences:t,onFileAction:n,showRemoveAction:r,status:i})=>Object(w.jsx)(re.a,{children:t.map(t=>{const o=Je(t);return Object(w.jsx)(Fe.a,{direction:"column","data-test-id":"file-unresolved-value-list",children:i&&Ge(i)?Object(w.jsx)(Ye,{}):Object(w.jsxs)(w.Fragment,{children:[Object(w.jsxs)(Le,{withError:!o,children:[Object(w.jsx)(ge.a,{children:Object(w.jsx)(fe,{fileName:o?Object(w.jsx)(pe.a,{external:!0,href:t,children:t}):t,size:"small",renderPreview:()=>Object(w.jsx)(J.a,{name:"question"})})}),r&&Object(w.jsx)(oe.a,{size:"small",use:"link",onClick:()=>n({action:m,fileId:t}),disabled:e,children:Object(w.jsx)(J.a,{name:"remove",size:12,"data-test-id":"file-unresolved-value-remove-icon"})})]}),!o&&Object(w.jsx)(Be.a,{use:"error",weight:"medium",children:Xe})]})},t)})});var Ze=({fileReferences:e,missingReferences:t,isEditDisabled:n,uploadsInProgress:r,onFileAction:i,status:o})=>Object(w.jsxs)(w.Fragment,{children:[e&&e.length>0&&Object(w.jsx)(Me,{fileReferences:e,isEditDisabled:n,uploadsInProgress:r,onFileAction:i}),t.length>0&&Object(w.jsx)(Qe,{missingFileReferences:t,isEditDisabled:n,showRemoveAction:!0,onFileAction:i,status:o})]});var et=({file:e,errorType:t,onRemove:n})=>{const r=te(),i=N(t,r);return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsxs)(Le,{withError:!0,children:[Object(w.jsx)(fe,{fileName:Object(w.jsx)(ge.a,{children:e.name}),size:"small",renderPreview:()=>Object(w.jsx)(J.a,{name:"question"}),"data-test-id":"file-attachment-with-error"}),Object(w.jsx)(oe.a,{size:"small",use:"link",onClick:()=>n(e),style:{flexShrink:"0"},children:Object(w.jsx)(J.a,{name:"remove",size:12,"data-test-id":"file-attachment-with-error-remove-icon"})})]}),Object(w.jsx)(ge.a,{tooltip:i,children:Object(w.jsx)(Be.a,{use:"error",weight:"medium",children:i})})]})};var tt=({fileDraftsErrorsMap:e,onRemove:t})=>Object(w.jsx)(re.a,{children:Array.from(e.entries()).map(([e,{errorType:n}])=>Object(w.jsx)(et,{file:e,errorType:n,onRemove:t},e.name))}),nt=n(771);const rt=({fileName:e,progress:t})=>Object(w.jsx)(fe,{fileName:Object(w.jsx)(ge.a,{children:e}),size:"small",style:{backgroundColor:Pe.GYPSUM},"data-test-id":"file-attachment-with-progress",children:Object(w.jsx)(nt.a,{value:t,boxShadow:!1})});var it=Object(i.memo)(rt);const ot=({file:e,progress:t,fileReference:n})=>n?Object(w.jsx)("div",{style:{background:Pe.GYPSUM},children:Object(w.jsx)(ke,{fileReference:n})}):Object(w.jsx)(it,{fileName:e.name,progress:t});var at=({fileDraftsMap:e})=>Object(w.jsx)(re.a,{children:Array.from(e.entries()).map(([e,{progress:t,fileReference:n}])=>Object(w.jsx)(ot,{file:e,progress:t,fileReference:n},e.name))});var st=({fileDraftsMap:e,fileDraftsErrorsMap:t,onRemove:n,allUploadsFailed:r})=>r?Object(w.jsx)(Z.a,{use:"inline",type:"danger",className:"m-top-1",children:Object(w.jsx)(d.a,{message:"customerDataProperties.PropertyInputFilesV2.allUploadsFailed"})}):Object(w.jsxs)(w.Fragment,{children:[e.size>0&&Object(w.jsx)(at,{fileDraftsMap:e}),t.size>0&&Object(w.jsx)(tt,{fileDraftsErrorsMap:t,onRemove:n})]}),ct=n(24),lt=n.n(ct),ut=n(453),dt=n(335),pt=n(337),ht=n(342),mt=n(443);const ft=["hovered"];var gt=({input:e,value:t,fileReferences:n,property:r,popoverProps:o})=>{const a=Object(ht.a)({}),{hovered:s}=a,c=Object(be.a)(a,ft),[l,u]=Object(i.useState)(!0),p=Object(b.b)(t),h=()=>Object(w.jsxs)(dt.a,{className:"p-bottom-5",children:[Object(w.jsxs)(Fe.a,{justify:"between",children:[Object(w.jsxs)("b",{children:[r.label," (",p.length,")"]}),Object(w.jsx)(pt.a,{onClick:()=>u(!1)})]}),e]}),m=n&&n.find(e=>e.id===p[0]),f=p.length>1?Object(w.jsx)("span",{style:{color:Pe.SLINKY},children:Object(w.jsx)(d.a,{message:"customerDataProperties.PropertyInputFilesV2.more",options:{count:p.length-1}})}):null,g=Object(i.useCallback)(e=>{u(e.target.value)},[]),O=Object(i.useCallback)(()=>{u(e=>!e)},[]),y=m?Object(w.jsx)(ke,{fileReference:m}):"--",j=Object(w.jsx)("div",{style:{flexShrink:"0"},children:s?Object(w.jsx)(mt.a,{use:"tertiary-light",size:"extra-small",onClick:O,children:Object(w.jsx)(d.a,{message:"customerDataProperties.PropertyInputFilesV2.manageButton"})}):f});return Object(w.jsx)(ut.a,Object.assign({width:350,placement:"right"},o,{open:l,renderContent:h,onOpenChange:g,"data-test-id":"property-input-files-popover",children:Object(w.jsxs)(Fe.a,Object.assign({align:"center"},c,{children:[y,j]}))}))},bt=n(2590);const Ot=(e,t)=>Object(bt.a)({httpClient:t}).then(t=>t.propertyMetadata.get({appSettingName:"crmPropertyExtensions",frameworkTypeIdentifier:e}).catch(t=>{lt.a.captureException(t,{extra:{apiError:"PROPERTY_EXTENSIONS_METADATA_FETCH_FAILED",objectTypeId:e}});throw t}));var yt=n(1459);const jt=(e,t={skip:!1})=>{const n=Object(s.a)(),r=Object(i.useCallback)(()=>Ot(e,n),[n,e]);return Object(yt.a)(r,t)};var vt=n(2828);const Ct=e=>{const[t,n]=Object(i.useState)(()=>new Map),[d,p]=Object(i.useState)(!1),h=Object(i.useRef)(new Map),m=Object(s.a)(),f=Object(vt.a)(),{value:O,onValidationChange:y,objectTypeId:j,onChange:v,property:C,readOnly:x,disabled:E,formControlUse:T}=e,S=f(g.c),{loading:I,data:_,error:N}=jt(j,{skip:!S}),D=q(_,C.name),k=M(O),P=Object(a.a)(c.m,j,{httpClient:m}),U=Object(b.b)(k),{references:V,status:G}=ze(P,U),W=Object(i.useMemo)(()=>R(V,U),[U,V]),z=Object(i.useMemo)(()=>F(V,U),[U,V]),$=Object(i.useCallback)(e=>{const t=B(e,h.current);v(Object(l.a)(String(t)));y(A(h.current,C,t))},[v,y,C]),K=Object(i.useCallback)((e,t)=>{n(n=>new Map(n).set(t,{progress:L(e)}))},[]),X=Object(i.useCallback)((e,t)=>{n(n=>new Map(n).set(e,{progress:100,fileReference:t}))},[]),J=Object(i.useCallback)((e,t)=>{h.current.set(e,{errorType:t});n(t=>new Map([...t].filter(([t])=>t!==e)))},[]),Q=Object(i.useCallback)(e=>{h.current.delete(e);$(k)},[$,k]),Z=Object(i.useCallback)(({action:e,fileId:t})=>{const n=H({currentValue:k,missingReferences:W,action:e,fileId:t});$(n)},[$,k,W]),ee=Object(i.useCallback)((e,t)=>{t.forEach(e=>h.current.set(e,{errorType:g.g}));if(0!==e.length){y(Object(u.b)(C,k));n(new Map(e.map(e=>[e,{progress:0}])));p(!1);Y(e,m,K,X,J,D,C.dataSensitivity).then(e=>{$(k?`${k};${e}`:e)}).catch(e=>{lt.a.captureException(e,{extra:{value:k}});p(!0);$(k)}).finally(()=>{n(new Map)})}else $(k)},[m,y,K,X,J,$,C,k,D]);if(!Ge(G)&&Object(o.g)(G)||I)return Object(w.jsx)(r.a,{size:"small"});const te=x||E||t.size>0,re=U.length+t.size+h.current.size,ie=Object(w.jsxs)(Fe.a,{gap:8,direction:"column",children:[Object(w.jsxs)("div",{style:{minWidth:"100%"},children:[Object(w.jsx)(Ze,{fileReferences:z,missingReferences:W,isEditDisabled:te,onFileAction:Z,uploadsInProgress:t.size>0,status:G}),Object(w.jsx)(st,{fileDraftsMap:t,fileDraftsErrorsMap:h.current,onRemove:Q,allUploadsFailed:d})]}),Object(w.jsx)(ne,{isEditDisabled:te,hasPropertyExtensionsMetadataError:!!N,onSelect:ee,currentFilesCount:re})]});return"table-cell"===T?Object(w.jsx)(gt,Object.assign({input:ie,fileReferences:z},e)):ie};t.default=Ct},function(e,t,n){"use strict";var r={};n.r(r);n.d(r,"PORTAL_SUSPENDED",(function(){return k}));n.d(r,"USER_WRITE_PERMISSION",(function(){return P}));var i=n(40),o=n(279),a=n(99),s=n(443),c=n(1140),l=n(1190),u=n(485),d=n(1148),p=n.n(d),h=n(1),m=n.n(h),f=n(283),g=n(699),b=n(2712),O=n(2654),y=n(41),j=n.n(y),v=n(181),C=n.n(v),x=n(4),E=n(281),T=n(2734),S=n(771),I=n(351),w=n(2721),_=n(324),N=n(1191),A=n(2815),D=n(1193);const k="PORTAL_SUSPENDED",P="USER_WRITE_PERMISSION",R=["P1Y","P12M","P6M","P1D","P8W","P52W"],F=j.a.exact({ttl:j.a.oneOf(R),folderId:j.a.number,folderPath:j.a.string,overwrite:j.a.bool}),L=["ttl","folderId","folderPath","overwrite"],M=["className","children","contentClassName","iconName","iconSize","size","use"];j.a.oneOf(Object.values(D.e)),j.a.oneOf(Object.values(r));var B=(e,t)=>Object.keys(e).filter(e=>t.includes(e)).reduce((t,n)=>Object.assign({},t,{[n]:e[n]}),{});const U=(e={})=>B(e,L);var V,H=n(1194);!function(e){e.HIGH_RISK_PORTAL="HIGH_RISK_PORTAL";e.MISSING_WRITE_SCOPE="MISSING_WRITE_SCOPE";e.FILE_TOO_LARGE="FILE_TOO_LARGE";e.UPLOAD_BATCH_LIMIT="UPLOAD_BATCH_LIMIT";e.DISALLOWED_EXTENSION="DISALLOWED_EXTENSION";e.VIRUS_FOUND="VIRUS_FOUND";e.CMS_FREE_MAX_UPLOAD_SIZE_EXCEEDED="CMS_FREE_MAX_UPLOAD_SIZE_EXCEEDED";e.MAX_UPLOAD_SIZE_EXCEEDED="MAX_UPLOAD_SIZE_EXCEEDED";e.PRE_UPLOAD_MAX_SIZE_EXCEEDED="PRE_UPLOAD_MAX_SIZE_EXCEEDED"}(V||(V={}));var q=V;const G={413:q.FILE_TOO_LARGE,403:q.MISSING_WRITE_SCOPE};function W(e){return e&&e in q}const z=e=>{if(e.responseJSON){const t=e.responseJSON;if(W(t.errorType))return t.errorType;if(W(t.message))return t.message}return G[e.status]||null};var $=n(753);const K=(e,t)=>Object.keys(t).includes(e),Y=e=>K(e,$.c);var X=n(180),J=n(2),Q=n(9),Z=n.n(Q),ee=n(307);const te=e=>{e.preventDefault();e.stopPropagation()},ne=()=>Z.a.debug("filedrop"),re=(...e)=>{ne()&&console.log.apply(console,["[FileDragAndDrop]",...e])},ie=(e,t)=>!(e instanceof SVGElement)&&Object(ee.l)(e,t),oe=(e,t)=>{if(ie(e,t))return!0;for(;e&&e.parentElement;){if(ie(e.parentElement,t))return!0;e=e.parentElement}return!1},ae=({children:e,disabled:t=!1,ignoreTargetSelector:n,onDropFiles:r})=>{const[o,a]=Object(i.useState)(!1),s=Object(i.useRef)(null),c=Object(i.useCallback)(e=>{if(n&&oe(e.target,n))re("ignoring onDragEnter on target to parent classname",e.target,n);else{re("onDragEnter",e.target);e.preventDefault();s.current=e.target;a(!0)}},[n]),l=Object(i.useCallback)(e=>{te(e)},[]),u=Object(i.useCallback)(e=>{if(s.current===e.target){s.current=null;a(!1)}},[]),d=Object(i.useCallback)(e=>{if(n&&e.target instanceof Element&&oe(e.target,n)){re("ignoring onDrop on target to parent classname",e.target,n);return}if(ne()){e.persist();re("onDrop",e)}const t=e.dataTransfer?e.dataTransfer.files:[];if(t&&t.length){e.preventDefault();r(Array.from(t));a(!1)}},[n,r]);return e(t?{isOver:!1,onDragOver:te,onDrop:te}:{isOver:o,onDrop:d,onDragEnter:c,onDragOver:l,onDragLeave:u})};ae.propTypes={children:j.a.func.isRequired,onDropFiles:j.a.func.isRequired,disabled:j.a.bool.isRequired,ignoreTargetSelector:j.a.string};ae.defaultProps={disabled:!1};var se=ae,ce=n(45);const le=["status","children"],ue=["isOver"];class de extends i.Component{constructor(...e){super(...e);this.handleDropFiles=e=>{this.props.onUpload(e,{target:"file-upload-drop-target"})}}render(){const e=this.props,{status:t,children:n}=e,r=Object(J.a)(e,le),i=B(r,M);return Object(ce.jsx)(se,{ignoreDropWhenDefaultPrevented:!1,onDropFiles:this.handleDropFiles,children:e=>{let{isOver:r}=e,o=Object(J.a)(e,ue);return Object(ce.jsx)("div",Object.assign({className:"drop-zone-target"+(r?" is-over":"")},o,{children:Object(ce.jsx)(N.a,Object.assign({use:r?"hover":t},i,{"data-test-id":"file-upload-drop-target",children:n}))}))}})}}de.propTypes={children:j.a.node,status:j.a.string.isRequired,onUpload:j.a.func.isRequired};var pe=de;var he={small:"small",large:"large"};var me=Object.freeze({small:"xs",large:"sm"});const fe=e=>e?e.has("errorCode")?X.c.FAILED:X.c.FINISHED:X.c.NOT_STARTED;var ge=n(61);let be;!function(e){e.SUPPORTED="SUPPORTED";e.UNSUPPORTED="UNSUPPORTED";e.NONE="NONE"}(be||(be={}));var Oe,ye=Object.freeze(Object(ge.a)({SUPPORTED:null,UNSUPPORTED:null,NONE:null}));!function(e){e.NOT_AN_IMAGE="NOT_AN_IMAGE";e.INVALID_FILE_EXTENSION="INVALID_FILE_EXTENSION";e.PORTAL_SUSPENDED="PORTAL_SUSPENDED";e.USER_WRITE_PERMISSION="USER_WRITE_PERMISSION"}(Oe||(Oe={}));var je=Oe;const ve=e=>"FileManagerLib.panels.tiles."+e,Ce=e=>({count:e.count(),extensions:x.a.formatList(e.map(e=>"."+e).toArray())});n(2820),n(2615);const xe=(e,t,n)=>{if(n===ye.NONE)return!1;const r=t.has(e);return n===ye.SUPPORTED?!r:r},Ee=e=>e.name.split(".").pop(),Te=(e,t)=>!xe(Ee(e),t.get("extensions"),t.get("filterType")),Se=(e,t,n)=>Object(v.Map)({extensions:Object(v.Set)(t),reasons:Object(v.Map)(n),filterType:e||ye.NONE});var Ie=({filename:e})=>Object(ce.jsx)("div",{className:"m-bottom-2",children:Object(ce.jsx)(o.a,{message:"FileManagerLib.notifications.upload.expectedImage.message",options:{filename:e}})});class we extends i.Component{renderContent(){const{fileExtension:e,filter:t}=this.props,n=t.get("reasons");return n.has(e)?Object(ce.jsx)("span",{children:n.get(e)}):Object(ce.jsx)(o.a,{message:ve(t.get("filterType")),options:Ce(t.get("extensions")),"data-test-id":"file-extension-not-supported"})}render(){return Object(ce.jsx)("div",{className:"m-bottom-2",children:this.renderContent()})}}we.propTypes={fileExtension:j.a.string.isRequired,filter:j.a.instanceOf(v.Map).isRequired};const _e=["type"];var Ne=e=>{const{type:t}=e,n=Object(J.a)(e,_e);switch(t){case je.NOT_AN_IMAGE:return Object(ce.jsx)(Ie,Object.assign({},n));case je.INVALID_FILE_EXTENSION:return Object(ce.jsx)(we,Object.assign({},n));case je.PORTAL_SUSPENDED:case q.HIGH_RISK_PORTAL:return Object(ce.jsx)("div",{className:"m-bottom-2",children:Object(ce.jsx)(o.a,{message:"FileManagerLib.suspension.disabledError"})});case je.USER_WRITE_PERMISSION:case q.MISSING_WRITE_SCOPE:return Object(ce.jsx)("div",{className:"m-bottom-2",children:Object(ce.jsx)(o.a,{message:"FileManagerLib.permissions.disabledError"})});default:return Object(ce.jsx)(o.a,{message:"FileManagerLib.fileUploadError"})}};class Ae extends i.Component{constructor(e){super(e);this.setXhr=e=>{this._xhr=e};this.abortCurrentRequest=()=>{const{onChange:e}=this.props;if(this._xhr&&4!==this._xhr.readyState){this._xhr.abort();this._xhr=null}this.setState({progress:null,status:null,fileInfo:null});e(null)};this.handleRemove=()=>{const{onClose:e}=this.props;this.abortCurrentRequest();e&&e()};this.handleProgress=e=>{const t=e.loaded/e.total*100;this.setState({progress:t})};this.handleUploadClick=e=>{this.handleUpload(e.target.files)};this.handleUpload=(e,{target:t="upload-button"}={})=>{this.setState({error:null});if(!e||0===e.length)return;const n=e[0],{_httpClient:r,onChange:i,fileUploadOptions:o,onFileAdd:a,filterType:s,filteredExtensions:c,filteredReasons:l,uploadedFileAccess:u}=this.props;this.abortCurrentRequest();const d=Se(s,c,l);if(d.get("filterType")===ye.NONE||Te(n,d)){this.setState({progress:0,status:X.c.PROCESSING,fileInfo:n});"function"==typeof a&&a(n);Object(A.a)(n,u,U(o),{updateProgress:this.handleProgress,xhrCallback:this.setXhr,httpClient:r}).then(e=>{const r=e.getIn(["objects",0]),o=r.get("url");this.setState({progress:null,status:X.c.FINISHED});i(o,r.set("file",n),{target:t});this.logPageAction("uploadSuccess",Object.assign({},Object(H.e)(n),{target:t}))}).catch(e=>{const r=z(e);this.logPageAction("uploadFailed",Object.assign({},Object(H.e)(n),{errorType:r,target:t}));if(this.state.fileInfo===n){this.setState({progress:null,status:X.c.FAILED,error:{type:r}});const t=C.a.fromJS({file:n,data:e.data,message:e.message,responseJSON:e.responseJSON,responseText:e.responseText,status:e.status,statusText:e.statusText});i(null,t)}})}else this.setState({error:{type:je.INVALID_FILE_EXTENSION,fileExtension:Ee(n),filter:d}})};this.state={progress:null,status:fe(e.fileData),fileInfo:e.fileData?e.fileData.toObject():null};this._xhr=null;if(!Y(e.uploadedFileAccess))throw new Error("[FileManagerLib/FileUploadComponent] Missing uploadedFileAccess prop. Visit https://product.hubteam.com/docs/file-manager-manual/Frontend/index.html for details.")}componentDidMount(){this.logPageAction("mount",{componentName:this.constructor.displayName,uploadedFileAccess:this.props.uploadedFileAccess,isFiltering:Boolean(this.props.filterType)})}componentDidUpdate(e){this.props.fileData!==e.fileData&&this.setState({status:fe(this.props.fileData),fileInfo:this.props.fileData?this.props.fileData.toObject():null})}logPageAction(e,t={}){Object(H.d)(e,Object.assign({},t,{componentName:this.constructor.displayName,uploadedFileAccess:this.props.uploadedFileAccess}))}shouldRenderNanoProgress(){const{showNanoProgress:e}=this.props,{status:t}=this.state;return e&&t===X.c.PROCESSING}shouldRenderSpinnerProgress(){const{showSpinnerProgress:e}=this.props,{status:t}=this.state;return e&&t===X.c.PROCESSING}shouldRenderFileData(){const{fileInfo:e}=this.state,{showFileData:t}=this.props;return t&&Boolean(e)&&"error"!==this.getStatus()}getIconSize(){const{iconSize:e,size:t}=this.props;return e||me[t]}getStatus(){const{status:e,error:t}=this.state;return e===X.c.PROCESSING?"processing":e===X.c.FAILED||t?"error":e===X.c.FINISHED?this.props.status||"success":this.props.status||"default"}showIcon(){return"processing"!==this.getStatus()}getIconName(){return this.state.error?"warning":this.props.iconName}renderUploadButton(){const{uploadButtonRenderer:e}=this.props;return e?e(this.handleUploadClick):Object(ce.jsx)(g.a,{size:"small",onChange:this.handleUploadClick,"data-test-id":"file-upload-button",children:Object(ce.jsx)(E.a,{message:"FileManagerCore.actions.upload"})})}renderActions(){const{children:e}=this.props,{status:t}=this.state;return e||(t===X.c.PROCESSING?null:this.renderUploadButton())}renderSpinnerProgress(e){return Object(ce.jsx)(T.a,{className:"align-self-center",size:e,use:"success"})}renderFileNanoProgress(){const{progress:e}=this.state;return Object(ce.jsx)(S.a,{value:e,boxShadow:!1,color:_.CALYPSO})}renderFileName(){const{fileInfo:e}=this.state,{fileData:t}=this.props,n=e&&e.size;if("error"===this.getStatus()&&"number"!=typeof n)return null;if(e){const n=e.file?e.file.name:e.name,r=t?`${t.get("name")}.${t.get("extension")}`:n;return r.toLowerCase()!==n.toLowerCase()?Object(ce.jsx)("div",{className:"is--heading-7 m-bottom-0","data-test-id":"uploaded-file-name",children:Object(ce.jsx)(o.a,{message:"FileManagerLib.fileUploadRenamed",options:{fileName:r}})}):Object(ce.jsx)("div",{className:"is--heading-7 m-bottom-0","data-test-id":"uploaded-file-name",children:n})}return null}renderFileData(){const{fileInfo:e,progress:t,status:n}=this.state,r=e&&e.size;if(!e||!r)return null;if(n===X.c.PROCESSING){const n=x.a.formatSize(r*(t/100)).toUpperCase(),i=x.a.formatSize(e.size).toUpperCase();return Object(ce.jsx)(u.a,{style:{minWidth:120},children:Object(ce.jsx)(E.a,{message:"FileManagerLib.percentDownloadOf",options:{part:n,total:i}})})}return Object(ce.jsx)(u.a,{children:x.a.formatSize(r).toUpperCase()})}renderCloseButton(){const{fileInfo:e}=this.state,{closeable:t}=this.props;return e&&t?Object(ce.jsx)(w.a,{onClick:this.handleRemove,color:_.EERIE,size:"small"}):null}renderSmallDropZone(){const{size:e,showFileName:t}=this.props,{error:n}=this.state;return Object(ce.jsxs)(pe,{className:"file-upload-zone status-"+this.getStatus(),iconName:this.showIcon()?this.getIconName():null,iconSize:this.getIconSize(),status:this.getStatus(),size:e,onRemove:this.handleRemove,onUpload:this.handleUpload,children:[this.shouldRenderNanoProgress()&&this.renderFileNanoProgress(),Object(ce.jsxs)("div",{className:"justify-between",children:[this.shouldRenderSpinnerProgress()&&this.renderSpinnerProgress("extra-small"),Object(ce.jsxs)("div",{className:"flex-column text-center",children:[t&&this.renderFileName(),this.shouldRenderFileData()&&this.renderFileData(),this.renderActions(),n&&Object(ce.jsx)(Ne,Object.assign({},n))]})]}),this.renderCloseButton()]})}renderBigDropZone(){const{size:e,showFileName:t}=this.props,{error:n}=this.state;return Object(ce.jsxs)(pe,{className:"file-upload-zone status-"+this.getStatus(),iconName:this.showIcon()?this.getIconName():null,status:this.getStatus(),size:e,onRemove:this.handleRemove,onUpload:this.handleUpload,children:[this.shouldRenderNanoProgress()&&this.renderFileNanoProgress(),this.shouldRenderSpinnerProgress()&&this.renderSpinnerProgress("small"),t&&this.renderFileName(),n&&Object(ce.jsx)(Ne,Object.assign({},n)),this.shouldRenderFileData()&&this.renderFileData(),this.renderActions(),this.renderCloseButton()]})}render(){const{size:e}=this.props;return e===he.small?this.renderSmallDropZone():this.renderBigDropZone()}}Ae.displayName="FileUploadComponent";Ae.propTypes={children:j.a.node,uploadButtonRenderer:j.a.func,iconName:j.a.string,iconSize:j.a.oneOf(Object.keys(I.c)),size:j.a.oneOf(Object.keys(he)).isRequired,_httpClient:j.a.func,fileData:j.a.instanceOf(C.a.Map),onChange:j.a.func.isRequired,status:N.a.propTypes.use,closeable:j.a.bool,showFileData:j.a.bool,showFileName:j.a.bool,onClose:j.a.func,fileUploadOptions:F,uploadedFileAccess:j.a.oneOf(Object.keys($.c)),showSpinnerProgress:j.a.bool,showNanoProgress:j.a.bool,onFileAdd:j.a.func,filteredExtensions:j.a.arrayOf(j.a.string),filteredReasons:j.a.object,filterType:j.a.oneOf(Object.keys(ye))};Ae.defaultProps={iconName:null,size:he.large,iconSize:me.large,showSpinnerProgress:!0,showNanoProgress:!0,showFileData:!0,showFileName:!0,status:N.a.defaultProps.use};var De=n(2765);class ke extends i.PureComponent{constructor(e){super(e);this.renderContents=this.renderContents.bind(this)}renderContents(e){const{browseText:t,contentAssistanceEnabled:n,fieldKey:r,filteredExtensions:a,onClick:c,onClickGenerate:l,readOnly:u,uploadText:d,showGenerate:p}=this.props,h=r||"file",y=a&&a.map(e=>"."+e),j=`/settings/${m.a.get()}/ai-assistants?source=image-field-generate`;return Object(ce.jsxs)(i.Fragment,{children:[Object(ce.jsxs)("div",{className:p?"m-bottom-3":"m-bottom-1",children:[Object(ce.jsx)(g.a,{accept:y,"data-selenium":h+":upload",className:p?"":"p-x-6",disabled:u,onChange:e,size:"small",use:"tertiary-light",children:d}),p&&l&&Object(ce.jsx)(O.a,{disabled:!1!==n,title:Object(ce.jsx)(f.a,{message:"ContentComponents.cmv2.fields.image.generateDisabledTooltip_jsx",elements:{UILink:b.a},options:{settingsLink:j}}),maxWidth:250,children:Object(ce.jsx)(s.a,{"data-selenium":h+":generate",className:"m-left-3",disabled:u||!n,onClick:l,size:"small",use:"tertiary",children:Object(ce.jsx)(o.a,{message:"ContentComponents.cmv2.fields.image.generateWithAI"})})})]}),Object(ce.jsx)(s.a,{"data-selenium":h+":browse",className:"m-left-0",disabled:u,onClick:c,use:"link",children:t})]})}render(){const{filteredExtensions:e,filterType:t,onChange:n,uploadedFileAccess:r}=this.props;return Object(ce.jsx)(Ae,{filteredExtensions:e,filterType:t,onChange:n,uploadButtonRenderer:this.renderContents,uploadedFileAccess:r,renderContext:"ContentComponents-FileDropZone"})}}ke.defaultProps={uploadedFileAccess:De.e};var Pe=ke,Re=n(2634),Fe=n(747),Le=n(1195);const Me=e=>"ContentComponents.cmv2.fields.file."+e,Be=e=>"ContentComponents.buttons."+e,Ue="CMS:GenerativeAIImages";class Ve extends i.Component{constructor(e){super(e);this.onClickGenerate=()=>{const{onFileManagerOpen:e,handleFileSelect:t}=this.props;e(t,{initialPanel:Fe.j.IMAGE_GENERATION});this.trackEvent("click-generate-image")};this.onFileManagerOpen=this.onFileManagerOpen.bind(this);this.onFileDrop=this.onFileDrop.bind(this)}shouldComponentUpdate(e,t){return p()(this,e,t)}get fieldKey(){const{fieldKey:e}=this.props;return e&&e.join(".")}shouldShowGenerateButton(){const e=Object(Le.a)("image-generation-access"),{fileType:t}=this.props;return t===Fe.e.IMG&&Re.b.isUngated(Ue)&&e&&D.d.includes(Re.b.getCurrentApp())}trackEvent(e){const{trackFieldAction:t}=this.props;t&&t(e)}onFileManagerOpen(){const{fileType:e,onFileManagerOpen:t,handleFileSelect:n}=this.props;t(n);this.trackEvent("click-browse-"+(e||"file").toLowerCase())}onFileDrop(e,t){const{fileType:n,handleFileSelect:r}=this.props;if(e){t&&r(t);this.trackEvent("upload-"+(n||"file").toLowerCase())}}renderContent(){const{browseText:e,contentAssistanceEnabled:t,children:n,fileName:r,fileType:i,filteredExtensions:o,hasValue:s,readOnly:c,removeOnly:u,uploadedFileAccess:d,uploadText:p,useOnDark:h,value:m}=this.props;if(n)return n;if(!s){const n=i,r=D.h.get(Fe.e[n]),s=r?r.toJS():[];return Object(ce.jsx)(Pe,{browseText:e||Object(a.a)(Me("browseFiles")),contentAssistanceEnabled:t,readOnly:c||u,fieldKey:this.fieldKey,filteredExtensions:o||s,filterType:i?Fe.d.SUPPORTED:Fe.d.NONE,onChange:this.onFileDrop,onClick:this.onFileManagerOpen,onClickGenerate:this.onClickGenerate,showGenerate:this.shouldShowGenerateButton(),uploadedFileAccess:d,uploadText:p||Object(a.a)(Me("uploadFile"))})}return Object(ce.jsx)(l.a,{"data-selenium":"file-attachment","data-value":m,fileName:m||r,size:"small",use:h?"on-dark":"default"})}renderReplaceAndRemoveButtons(){const{removeOnly:e,readOnly:t,onClearFile:n,required:r}=this.props;return Object(ce.jsxs)("div",{children:[Object(ce.jsx)(s.a,{"data-test-id":"cmv2-file-replace",disabled:t||e,onClick:this.onFileManagerOpen,use:"link",children:Object(ce.jsx)(u.a,{children:Object(ce.jsx)(o.a,{message:Be("replace")})})}),Object(ce.jsx)(s.a,{"data-test-id":"cmv2-file-remove",disabled:t||r&&!e,onClick:n,use:"link",children:Object(ce.jsx)(u.a,{children:Object(ce.jsx)(o.a,{message:Be("remove")})})})]})}render(){const{hasValue:e,helpText:t,inlineHelpText:n,label:r,required:i}=this.props;return Object(ce.jsx)(c.a,{label:r,required:i,helpText:t,inlineHelpText:n,labelItemRight:e&&this.renderReplaceAndRemoveButtons(),children:this.renderContent()})}}Ve.defaultProps={readOnly:!1,removeOnly:!1,required:!1,value:null};t.a=Ve},function(e,t,n){"use strict";var r={};n.r(r);n.d(r,"email",(function(){return G}));n.d(r,"password",(function(){return W}));n.d(r,"url",(function(){return z}));var i=n(2),o=n(40),a=n(41),s=n.n(a),c=n(30),l=n.n(c),u=n(2741);const d=Object.assign({},u.a.propTypes,{children:s.a.node.isRequired,validationMessage:s.a.object,validateDefaultValue:s.a.bool,trimInputValue:s.a.bool.isRequired,onError:s.a.func,onSuccess:s.a.func}),p=Object.assign({},u.a.defaultProps,{trimInputValue:!1});var h=n(288),m=n.n(h),f=n(2810),g=(e,t)=>({input:e,isValid:t});function b({input:e,httpClient:t},n){const r=encodeURIComponent(e),i=t.get("emailvalidation/v1/validate/fast?email="+r).then(({success:t})=>g(e,t),()=>g(e,!1)).catch(()=>g(e,!1));n(i);return i}function O({input:e,httpClient:t},n){const r=encodeURIComponent(e),i=t.put("emailvalidation/v1/validate",{data:{email:r}}).then(({success:t})=>g(e,t),()=>g(e,!1)).catch(()=>g(e,!1));n(i);return i}var y={LOW:300,MEDIUM:500,HIGH:700},j=n(539),v=e=>{window.hasOwnProperty("requestIdleCallback")?window.requestIdleCallback(e):e()},C=n(1286),x=(e,t)=>{const n=Object(j.a)(e,t);return(e,t={})=>{const r=Object(C.a)();v(()=>{n(Object.assign({input:e},t),e=>{e.then(e=>{r.resolve(e)})})});return r.promise}};const E=x(b,y.LOW),T=x(O,y.LOW),S={basic:e=>f.a.test(e),apiFast:(e,t)=>!!f.a.test(e)&&E(e,{httpClient:t}),apiFull:(e,t)=>!!f.a.test(e)&&T(e,{httpClient:t})};var I=(e,{type:t,httpClient:n})=>(S[t]||S.basic)(e,n),w=n(1003);var _={minLength:8,maxLength:200,lowercase:"[a-z]",uppercase:"[A-Z]",numberSymbolWhitespace:"([\\d\\s]|[^\\w])"};const{minLength:N,maxLength:A,lowercase:D,uppercase:k,numberSymbolWhitespace:P}=_;var R={length:new RegExp(`^.{${N},${A}}$`),lowercase:new RegExp(""+D),uppercase:new RegExp(""+k),numberSymbolWhitespace:new RegExp(""+P)},F=Object(w.a)({name:"Password",rules:R});const L={basic:e=>F.test(e)};var M=(e,{type:t})=>(L[t]||L.basic)(e),B=n(2659),U=n(61);const V=Object(U.a)({basic:null,parseLeniently:null,parseStrictly:null,resolveDomain:null}),H={[V.parseLeniently]:"PARSE_WITH_LENIENCE",[V.parseStrictly]:"PARSE_STRICTLY",[V.resolveDomain]:"RESOLVE_DOMAIN"};const q=x(((e,t)=>({input:n,httpClient:r,validationLevel:i},o)=>{const a={[t]:encodeURIComponent(n),validationLevel:i},s=()=>g(n,!1),c=r.post(e,{query:a}).then(({success:e})=>g(n,e),s).catch(s);o(c);return c})({URL:"url-validation/v1"+"/urls"}.URL,"url"),y.MEDIUM);const G=I,W=M,z=(e,{type:t,httpClient:n,requireProtocol:r,requireHttps:i})=>{const o=t===V.basic?()=>!0:q,a=H[t];return i?/^https:\/\//i.test(e)&&B.a.test(e,{requireProtocol:r})&&o(e,{httpClient:n,validationLevel:a}):B.a.test(e,{requireProtocol:r})&&o(e,{httpClient:n,validationLevel:a})};function $(e){return!(!e||"function"!=typeof e.then)}var K=$,Y=n(45);const X=["validator","validationOpts"],J=Object.keys(r);var Q=e=>{var t;return(t=class extends o.Component{constructor(...e){super(...e);this.state={error:this.props.error||!1,empty:!1,isValidating:!1,pristine:!this.props.error};this.getValidatorFunction=()=>{const{validator:e}=this.props;return"function"==typeof e?e:r[e]};this.setValid=e=>{const{onSuccess:t}=this.props;this.setState({error:!1,empty:!1,isValidating:!1,pristine:!1});t&&t(e)};this.setInvalid=e=>{const{onError:t}=this.props;this.setState({error:!0,empty:!1,isValidating:!1,pristine:!1});t&&t(e)};this.setValidating=()=>{this.setState({empty:!1,isValidating:!0,pristine:!1})};this.setEmpty=()=>{this.setState({empty:!0,isValidating:!1,pristine:!1})};this.validateInput=e=>{const{validationOpts:t}=this.props;return this.getValidatorFunction()(e,t)};this.handleValidation=e=>{const{target:{value:t}}=e;if(t){const e=this.validateInput(t),n=({input:e,isValid:t})=>{t?this.setValid(e):this.setInvalid(e)};if(K(e)){e.then(e=>{e.input===t&&n(e)});this.setValidating()}else n(g(t,e))}else this.setEmpty()}}render(){const{error:t,empty:n,isValidating:r,pristine:o}=this.state,a=this.props,s=Object(i.a)(a,X);return Object(Y.jsx)(e,Object.assign({},s,{error:t,empty:n,isValidating:r,pristine:o,validateInput:this.handleValidation}))}}).propTypes={onError:s.a.func,onSuccess:s.a.func,validator:s.a.oneOfType([s.a.oneOf(J),s.a.func]).isRequired,validationOpts:s.a.object,error:s.a.bool},t.defaultProps={validationOpts:{}},t},Z=n(279),ee={empty:"",validating:Object(Y.jsx)(Z.a,{message:"validatedFormControl.validationMessageDefaults.input.validating"}),success:Object(Y.jsx)(Z.a,{message:"validatedFormControl.validationMessageDefaults.input.success"}),error:Object(Y.jsx)(Z.a,{message:"validatedFormControl.validationMessageDefaults.input.error"})};const te=["children","onChange","trimInputValue","validateDefaultValue"],ne=e=>{"string"==typeof e.target.value&&(e.target.value=e.target.value.trim())};class re extends o.Component{constructor(...e){super(...e);this.handleChange=e=>{const{onChange:t,children:n,trimInputValue:r}=this.props,i=o.Children.only(n);r&&ne(e);t(e);i.props.onChange&&i.props.onChange(e)}}componentDidMount(){const{onChange:e,validateDefaultValue:t,trimInputValue:n,children:r}=this.props;if(t){const t=o.Children.only(r),i={target:{value:t.props.value||t.props.defaultValue||""}};n&&ne(i);e(i)}}render(){const e=this.props,{children:t}=e,n=Object(i.a)(e,te),r=o.Children.only(t);return Object(o.cloneElement)(r,Object.assign({},n,{onChange:this.handleChange}))}}re.propTypes={children:s.a.node.isRequired,onChange:s.a.func.isRequired,trimInputValue:s.a.bool.isRequired,validateDefaultValue:s.a.bool};re.defaultProps={trimInputValue:!1};const ie=["children","className","empty","error","isValidating","onSuccess","pristine","trimInputValue","validateDefaultValue","validateInput","validationMessage","validationOpts","validator"];class oe extends o.Component{constructor(...e){super(...e);this.getMessage=()=>{const{validationMessage:e,error:t,empty:n,isValidating:r,pristine:i}=this.props;return i?"":r?e.validating:n?e.empty:t?e.error:e.success}}componentDidMount(){const{value:e,validateInput:t}=this.props;if(e&&"string"==typeof e){t({target:{value:e}})}}componentDidUpdate(e){const{value:t,validateInput:n}=this.props,{value:r}=e;if(t&&"string"==typeof t&&t!==r){n({target:{value:t}})}}render(){const e=this.props,{children:t,className:n,error:r,trimInputValue:o,validateDefaultValue:a,validateInput:s}=e,c=Object(i.a)(e,ie);return Object(Y.jsx)(u.a,Object.assign({},c,{className:m()("private-validated-form-control",n),error:r,validationMessage:this.getMessage(),children:Object(Y.jsx)(re,{onChange:s,trimInputValue:o,validateDefaultValue:a,children:t})}))}}oe.propTypes=Object.assign({},d,{validateInput:s.a.func.isRequired,error:s.a.bool.isRequired,empty:s.a.bool.isRequired,isValidating:s.a.bool.isRequired,pristine:s.a.bool.isRequired,value:s.a.string});oe.defaultProps=Object.assign({},p,{validationMessage:ee,validateDefaultValue:!1});var ae=Q(oe),se={empty:"",validating:Object(Y.jsx)(Z.a,{message:"validatedFormControl.validationMessageDefaults.url.validating"}),success:Object(Y.jsx)(Z.a,{message:"validatedFormControl.validationMessageDefaults.url.success"}),error:Object(Y.jsx)(Z.a,{message:"validatedFormControl.validationMessageDefaults.url.error"})};n.d(t,"a",(function(){return le}));const ce=["children","className","httpClient","type","requireProtocol","requireHttps","validationMessage","validateDefaultValue","onSuccess","onError"];class le extends o.Component{render(){const e=this.props,{children:t,className:n,httpClient:r,type:o,requireProtocol:a,requireHttps:s,validationMessage:c,validateDefaultValue:l,onSuccess:u,onError:d}=e,p=Object(i.a)(e,ce);return Object(Y.jsx)(ae,Object.assign({},p,{className:n,validator:"url",validationMessage:c,validateDefaultValue:l,validationOpts:{type:o,httpClient:r,requireProtocol:a,requireHttps:s},onSuccess:u,onError:d,children:t}))}}le.propTypes=Object.assign({},d,{type:s.a.oneOf(Object.keys(V)),httpClient:s.a.oneOfType([s.a.object,s.a.func]),requireProtocol:s.a.bool,requireHttps:s.a.bool,value:s.a.string});le.defaultProps=Object.assign({},p,{httpClient:l.a,type:V.basic,requireProtocol:!1,requireHttps:!1,validationMessage:se,validateDefaultValue:!1})},function(e,t,n){"use strict";var r=n(40),i=n(41),o=n.n(i),a=n(1103),s=n(1096),c=n(434),l=n(2735),u=n(2),d=n(59),p=n(99),h=n(73),m=n(1106),f=n(245),g=n(1104),b=n(45);function O(e){const t=(e,t)=>({defintion:m.a(e,t),fetchStatus:m.c(e,t)}),n={fetchDefinition:g.c,resetDefinitionsFetchStatus:g.d},i=Object(d.connect)(t,n);class o extends r.PureComponent{componentDidMount(){const{definitionId:e,fetchStatus:t=f.o.UNINITIALIZED,fetchDefinition:n}=this.props;!e||t!==f.o.UNINITIALIZED&&t!==f.o.FAILED||n(e).catch(e=>{throw e})}componentDidUpdate(e){const{defintion:t,definitionId:n,fetchStatus:r=f.o.UNINITIALIZED,fetchDefinition:i}=this.props;n&&!t&&r!==f.o.PENDING&&e.definitionId!==n&&i(n).catch(e=>{throw e})}componentWillUnmount(){const{definitionId:e,resetDefinitionsOnUnmount:t=!1,resetDefinitionsFetchStatus:n}=this.props;t&&n(e)}render(){return Object(b.jsx)(e,Object.assign({},this.props))}}return i(o)}var y=n(474),j=n(279),v=n(2740);class C{constructor(e){const{id:t,logicalOperation:n,name:r,parameters:i,type:o}=e,a=f.f[o],s=new RegExp(o+"-","i");this.id=t;this.name=r?r.replace(s,""):"";this.smartType=o;this.isExclusive="OR"===n;this.previewParamKey=f.e[o];this.valueObject=i;this.value=i[a]}renderSmartRuleName(e){return this.name}getSmartRuleOptions(e){return[]}geValue(){return this.value}getSmartRuleId(){return this.id}getSmartType(){return this.smartType}}var x=n(729);const E=e=>"SharedI18nStrings.countryCodes."+e;class T extends C{renderSmartRuleName(){return Object(b.jsx)(x.a,{exclusive:this.isExclusive,children:this.value.map(e=>Object(b.jsx)(j.a,{message:E(e)},e))})}getSmartRuleOptions(){return this.value.map(e=>({text:Object(p.a)(E(e)),value:e,smartType:this.smartType}))}}const S=e=>"smartcontentcore.DeviceTypes."+e;class I extends C{renderSmartRuleName(){return Object(b.jsx)(j.a,{message:S(this.value+".label")})}getSmartRuleOptions(){return[{text:Object(p.a)(S(this.value+".label")),value:this.value,smartType:this.smartType}]}}var w=n(282);const _=e=>"smartcontentcore.TrafficSourceTypes."+e,N=e=>"smartcontentcore.SocialMediaTypes."+e;class A extends C{renderSmartRuleName(){const e=this.valueObject[f.u],t=e?this.generateTrafficSourceName(e):this.generateDefaultName();return Object(b.jsx)(w.a,{message:"smartcontentcore.CriterionTypes.TRAFFIC_SOURCE.value.label",options:{sourceType:Object(b.jsx)(j.a,{message:_(this.value+".label")}),rules:t}})}generateTrafficSourceName(e){let t;t=this.value===f.x.SOCIAL_MEDIA?e.map(e=>Object(b.jsx)(j.a,{message:N(e+".label")},e)):e.map((e,t)=>Object(b.jsx)("span",{children:e},t));return Object(b.jsx)(x.a,{exclusive:!1,children:t})}generateDefaultName(){return Object(b.jsx)(j.a,{message:_(this.value+".default")},"default")}getSmartRuleOptions(){const e=this.valueObject[f.u];return e&&e.length?[this.generateTrafficSourceOptions(e)]:[this.generateDefaultOption()]}generateTrafficSourceOptions(e){const t=e[0];return this.value===f.x.SOCIAL_MEDIA?{text:Object(p.a)(N(t+".label")),value:t,visitSource:this.value,drillDownRule:t,smartType:this.smartType}:{text:t,value:t,visitSource:this.value,drillDownRule:t,smartType:this.smartType}}generateDefaultOption(){return{text:Object(p.a)(_(this.value+".label")),value:this.value,smartType:this.smartType}}}const D=e=>"SharedI18nStrings.languageNames."+e;class k extends C{renderSmartRuleName(){return Object(b.jsx)(x.a,{exclusive:this.isExclusive,children:this.value.map(e=>Object(b.jsx)(j.a,{message:D(e)},e))})}getSmartRuleOptions(){return this.value.map(e=>({text:Object(p.a)(D(e)),value:e,smartType:this.smartType}))}}var P=n(1101);class R extends C{constructor(e){const{parameters:t}=e;super(e);this.isIlsRule=Object(P.b)(f.h.CONTACT_LIST,t);this.value=this.isIlsRule?t[f.j]:t[f.f.CONTACT_LIST];this.previewParamKey=this.isIlsRule?f.k:f.e[f.h.CONTACT_LIST]}renderSmartRuleName({clsLists:e,ilsLists:t}){const n=this.isIlsRule?t:e;return n?Object(b.jsx)(x.a,{exclusive:this.isExclusive,children:this.value.reduce((e,t)=>{const r=n[t];r&&e.push(r.name.trim());return e},[])}):Object(b.jsx)(v.a,{use:"error",children:Object(b.jsx)(j.a,{message:"smartcontentlib.components.elements.SmartRuleName.contactListsFailure"})})}getSmartRuleOptions({clsLists:e={},ilsLists:t={}}){const n=this.isIlsRule?t:e;return this.value.reduce((e,t)=>{const r=n[t];r&&e.push({text:r.name.trim(),value:t,smartType:this.smartType,previewParamKeyOverride:this.previewParamKey});return e},[])}}class F extends C{renderCustomLifecycleStage(e,t){const n=t[e];return n?Object(b.jsx)("span",{children:n.label},e):e}renderSmartRuleName({contactLifecyclesByStageId:e={}}){return Object(b.jsx)(x.a,{exclusive:this.isExclusive,children:this.value.map(t=>this.renderCustomLifecycleStage(t,e))})}getSmartRuleOptions({contactLifecyclesByStageId:e={}}){return this.value.map(t=>{let n=t;const r=e[t];r&&(n=r.label);return{text:n,value:t,smartType:this.smartType}})}}var L=n(281),M=n(357);const B=e=>"smartcontentcore.QueryParam."+e;class U extends C{renderSmartRuleName(){const{name:e,operation:t,value:n}=this.valueObject;return Object(b.jsx)(M.a,{matchContentWidth:!0,children:Object(b.jsx)(L.a,{message:B(t),options:{name:e,value:n}})})}getSmartRuleOptions(){const{name:e,operation:t,value:n}=this.valueObject;return[{text:Object(p.a)(B(t),{name:e,value:n}),smartType:this.smartType,value:`${e}${t}${n}`,query:{name:e,value:n},operation:t}]}}class V extends C{getMostGranularRule(){const{adSources:e=[],adGroups:t=[]}=this.valueObject;return e.length>0?f.a.AD_SOURCES:t.length>0?f.a.AD_GROUPS:f.a.AD_CAMPAIGNS}getNameFromAdSourceInfo(e,t){const{adSources:n=[],adGroups:r=[],adCampaigns:i}=this.valueObject,{adSingletonsById:o,adGroupsById:a,adCampaignsById:s}=t;let c={},l=[];if(e===f.a.AD_SOURCES){l=n;c=o}else if(e===f.a.AD_GROUPS){l=r;c=a}else{l=i;c=s}return l.reduce((e,t,n)=>{const r=c[t];return r?e+=this.getLabelFromAd(r,0===n):e},"")}renderSmartRuleName({adSourceInfo:e}){const t=this.getMostGranularRule(),n=this.getNameFromAdSourceInfo(t,e);return Object(b.jsx)(x.a,{exclusive:this.isExclusive,children:n})}getMostGranualarValue(){const e=this.getMostGranularRule(),{adSources:t=[],adGroups:n=[],adCampaigns:r}=this.valueObject;switch(e){case f.a.AD_SOURCES:return t;case f.a.AD_GROUPS:return n;default:return r}}getLabelFromAd(e,t){const{properties:n}=e||{},{hs_name:r,hs_ad_network:i}=n||{},{value:o}=r||{},{value:a}=i||{};return t?`${o} - ${a}`:", "+o}getAdSourceLookupMap(e){const{adSingletonsById:t,adCampaignsById:n,adGroupsById:r}=e;switch(this.getMostGranularRule()){case f.a.AD_SOURCES:return t;case f.a.AD_GROUPS:return r;default:return n}}getSmartRuleOptions({adSourceInfo:e}){const t=this.getMostGranualarValue(),n=this.getAdSourceLookupMap(e),r=this.getMostGranularRule();return t.reduce((e,i,o)=>{const a=n[i];a?e.push({text:this.getLabelFromAd(a,0===o),value:t[0],smartType:this.smartType,granularity:r}):e.push({text:i,value:t[0],smartType:this.smartType,granularity:r});return e},[])}}var H=n(2734);class q extends C{renderSmartRuleName({audiences:e}){const t=this.value;if(!e||!e[t])return Object(b.jsx)(H.a,{size:"extra-small"});const{properties:n}=e[t],{hs_audience_name:r}=n;return Object(b.jsx)("span",{children:r.value},t)}getSmartRuleOptions({audiences:e={}}){const t=this.value,{properties:n}=e[t],{hs_audience_name:r}=n;return[{text:r.value,value:t,smartType:this.smartType}]}}const G={[f.h.GEO_IP]:T,[f.h.DEVICE_TYPE]:I,[f.h.TRAFFIC_SOURCE]:A,[f.h.LANGUAGE]:k,[f.h.CONTACT_LIST]:R,[f.h.CONTACT_LIFECYCLE]:F,[f.h.QUERY_PARAM]:U,[f.h.AD_SOURCE]:V,[f.h.AUDIENCE]:q},W=e=>{const{type:t}=e,n=G[t];return n?new n(e):new C(e)};var z=n(2696),$=n(2785),K=n(1107),Y=n(1108),X=n(1116),J=n(1112),Q=n(2783),Z=n(1099),ee=n(1100),te=n(2784),ne=n(2663);const re=e=>"smartcontentlib.components.elements.SmartRuleName."+e;function ie(){const e=Object(K.b)();return function(t,n){return{audiencesFetchStatus:Object(X.c)(t,n),contactLifecycleFetchStatus:Object(J.a)(t),contactLifecyclesByStageId:Object(J.c)(t),clsLists:Object(Z.c)(t),ilsLists:Object(ee.d)(t),contactListsFetchStatus:e(t,n),definitionRequestStatus:Object(m.d)(t,n),smartRule:Object(K.a)(t,n),adCampaignsById:Object(Y.b)(t),adSingletonsById:Object(Y.e)(t),adGroupsById:Object(Y.d)(t),byAccountId:Object(Y.a)(t),audiences:Object(X.b)(t),adSourceFetchStatus:Object(Y.g)(t,n)}}}const oe={fetchCustomLifecycleStages:Q.a,fetchClsList:te.b,fetchIlsList:ne.b,fetchAdsForAdGroup:z.b,fetchCampaignAdGroups:z.c,fetchAccountAdCampaigns:z.a,fetchAudience:$.b},ae=Object(d.connect)(ie,oe);class se extends r.Component{constructor(e){super(e);this.fetchAdSourceList=e=>{const{smartRule:t,criterionId:n}=this.props,{parameters:r}=t,{adSources:i,adCampaigns:o,adGroups:a}=r;switch(e){case f.a.AD_SOURCES:{const e=a&&Array.isArray(a)?a[0]:null;return this.props.fetchAdsForAdGroup(e,i,{criterionIds:[n]})}case f.a.AD_GROUPS:{const e=o&&Array.isArray(o)?o[0]:null;return this.props.fetchCampaignAdGroups(e,a,{criterionIds:[n]})}default:return this.props.fetchAccountAdCampaigns(o,{criterionIds:[n]})}};this.state={smartRuleModel:null,requestStatus:f.o.UNINITIALIZED}}componentDidMount(){const{fetchAudience:e,contactLifecycleFetchStatus:t,contactListsFetchStatus:n,fetchCustomLifecycleStages:r,fetchClsList:i,fetchIlsList:o,smartRule:a,adSourceFetchStatus:s,audiencesFetchStatus:c}=this.props;if(a){const l=W(a),{type:u,parameters:d}=a,p=Object(P.b)(u,d),h=d[p?f.j:f.f[u]];u===f.h.CONTACT_LIST&&n&&n===f.o.UNINITIALIZED&&h.forEach(e=>{p?o(e):i(e)});u!==f.h.CONTACT_LIFECYCLE||t!==f.o.FAILED&&t!==f.o.UNINITIALIZED||r().catch(e=>{throw e});if(u===f.h.AD_SOURCE&&s&&s===f.o.UNINITIALIZED){const e=l.getMostGranularRule();this.fetchAdSourceList(e).catch(e=>{throw e})}if(u===f.h.AUDIENCE&&c&&c===f.o.UNINITIALIZED){e(h,l.id)}this.setState({smartRuleModel:l})}}componentDidUpdate(e){const{definitionRequestStatus:t,smartRule:n}=e,{definitionRequestStatus:r,smartRule:i}=this.props,{requestStatus:o,smartRuleModel:a}=this.state;t===f.o.PENDING&&r===f.o.SUCCEEDED&&!a&&i&&this.setState({smartRuleModel:W(i)});i&&n&&n.id!==i.id&&this.setState({smartRuleModel:W(i)});const s=this.ruleRequestStatus;o!==s&&this.setState({requestStatus:s})}get ruleRequestStatus(){const{smartRule:e,definitionRequestStatus:t,adSourceFetchStatus:n}=this.props;if(e){const{type:t}=e;if(t===f.h.AD_SOURCE)return n}return t}get ruleNameState(){const{adCampaignsById:e,adSingletonsById:t,adGroupsById:n,contactLifecyclesByStageId:r,clsLists:i,ilsLists:o,audiences:a}=this.props;return{contactLifecyclesByStageId:r,clsLists:i,ilsLists:o,adSourceInfo:{adCampaignsById:e,adSingletonsById:t,adGroupsById:n},audiences:a}}renderDefinitionRequestFailMessage(){return Object(b.jsx)(v.a,{use:"error",children:Object(b.jsx)(j.a,{message:re("definitionsFailure")})})}render(){const{className:e,tagName:t}=this.props,{smartRuleModel:n,requestStatus:r}=this.state;return n?r===f.o.FAILED?this.renderDefinitionRequestFailMessage():Object(b.jsx)(y.a,{className:e,tagName:t,children:n.renderSmartRuleName(this.ruleNameState)}):null}}var ce=ae(se),le=n(443),ue=n(181),de=n(1098),pe=n(1105);const he=e=>({type:de.b,status:f.o.PENDING,meta:Object.assign({},e)}),me=(e,t)=>({type:de.b,status:f.o.SUCCEEDED,meta:Object.assign({},e,{[f.s]:{action:"bulk-delete-criterion",usageTrackerJsName:"smartContentCriterionInteraction",meta:{name:"bulk-delete-criterion",type:f.w.INTERACTION,targetType:t.targetType,moduleName:t.moduleName,smartType:t.name}}})}),fe=(e,t)=>({type:de.b,payload:t,error:!0,status:f.o.FAILED,meta:Object.assign({},e)});function ge(e,t){const n={definitionId:e,criteriaIds:t};return(r,i,o)=>{const a=Object(m.a)(i(),{definitionId:e})||{};r(he(n));return pe.a(t,o).then(e=>{r(me(n,a));return e}).catch(e=>{r(fe(n,e));return e})}}const be=e=>({type:de.d,status:f.o.PENDING,meta:Object.assign({},e)}),Oe=(e,t,n,r)=>({type:de.d,payload:r,status:f.o.SUCCEEDED,meta:Object.assign({},e,{[f.s]:{action:"create-criterion",usageTrackerJsName:"smartContentCriterionInteraction",meta:{smartType:t,name:"create-criterion",type:f.w.INTERACTION,targetType:n.targetType,moduleName:n.moduleName}}})}),ye=(e,t)=>({type:de.d,payload:t,error:!0,status:f.o.FAILED,meta:Object.assign({},e)});function je(e,t,n,r=null){const i={definitionId:e};return(o,a,s)=>{const c=a(),l=Object(m.a)(c,{definitionId:e})||{},{criteria:u=[]}=l,d=Object(P.b)(t,n)?f.j:f.f[t],p=n[d],h=Array.isArray(p)?p.join(", "):p,g={definitionId:e,type:t,parameters:n,targetType:l.targetType,precedence:null===r?u.length:r,name:`${t} - ${h}`};o(be(i));return pe.b(g,s).then(e=>{o(Oe(i,t,l,e));return e}).catch(e=>{o(ye(i,e));return e})}}const ve=e=>({type:de.w,status:f.o.PENDING,meta:Object.assign({},e)}),Ce=(e,t,n,r)=>({type:de.w,payload:t,status:f.o.SUCCEEDED,meta:Object.assign({},e,{[f.s]:{action:n,usageTrackerJsName:"smartContentCriterionInteraction",meta:{smartType:r.name,targetType:r.targetType,moduleName:r.moduleName,name:n,type:f.w.INTERACTION}}})}),xe=(e,t)=>({type:de.w,payload:t,error:!0,status:f.o.FAILED,meta:Object.assign({},e)});function Ee(e,t,{precedence:n,parameters:r}){const i={definitionId:e,criterionId:t,precedence:n,parameters:r};return(o,a,s)=>{const c=a(),l=c.criteria.byId[t],u=Object(m.a)(c,{definitionId:e})||{};let d="update-criterion";d=Object(ue.is)(l.parameters,r)||l.precedence===n?l.precedence!==n?"reorder-criterion":"update-criterion-parameters":"reorder-criterion-and-update-parameters";o(ve(i));return pe.c(t,{precedence:n,parameters:r},s).then(e=>{o(Ce(i,e,d,u));return e}).catch(e=>{o(xe(i,e));return e})}}var Te=n(607),Se=n(2760),Ie=n(724),we=n(717),_e=n(751),Ne=n(723),Ae=n(490),De=n(2654),ke=n(2679),Pe=n(1110),Re=n(2608),Fe=n(615),Le=n(1121),Me=n(710),Be=n(466),Ue=n(0),Ve=n(345),He=n(297);const qe=["connectDragSource","connectDropTarget"];var Ge=function(e){class t extends r.Component{render(){const t=this.props,{connectDragSource:n,connectDropTarget:r}=t,i=Object(u.a)(t,qe);return Object(b.jsx)(e,Object.assign({},i,{ref:e=>{Object(He.a)(r,Object(Ue.findDOMNode)(e));Object(He.a)(n,Object(Ue.findDOMNode)(e))}}))}}t.propTypes=Object.assign({},e.propTypes,{connectDragSource:o.a.func,connectDropTarget:o.a.func});t.defaultProps=e.defaultProps;t.displayName=`Draggable(${Object(Ve.a)(e)})`;t.WrappedComponent=e;return t},We=n(2741);const ze=Object(Fe.DragSource)(a.d.CRITERION,{beginDrag:e=>Object(h.pick)(e,"criterionId","index"),endDrag(e,t){if(!t.didDrop()){e.onResetOrder();return}const{index:n}=t.getItem(),{index:r}=t.getDropResult();e.onUpdateOrder(n,r,!0)}},(e,t)=>({connectDragSource:e.dragSource(),connectDragPreview:e.dragPreview(),isDragging:t.isDragging()})),$e=Object(Fe.DropTarget)(a.d.CRITERION,{drop:e=>Object(h.pick)(e,"criterionId","index"),hover:Object(h.throttle)((e,t)=>{const{criterionId:n,index:r}=t.getItem()||{};if(n&&n!==e.criterionId){e.onUpdateOrder(r,e.index);t.getItem().index=e.index}},250)},e=>({connectDropTarget:e.dropTarget()}));class Ke extends r.PureComponent{render(){const{children:e,className:t,onRemove:n,connectDragPreview:r}=this.props;return Object(h.compose)(r)(Object(b.jsx)("div",{className:"m-bottom-3",children:Object(b.jsx)(Le.a,{className:t,children:Object(b.jsxs)(c.a,{align:"center",justify:"between",children:[Object(b.jsx)(Be.a,{}),Object(b.jsx)(We.a,{className:"m-left-2",style:{width:"100%"},"aria-label":"criterion",children:e}),Object(b.jsx)(Me.a,{onClick:n,placement:"bottom",tooltip:"Delete this item",use:"transparent",children:Object(b.jsx)(ke.a,{name:"delete"})})]})})}))}}var Ye=Object(h.compose)(ze,$e,Ge)(Ke),Xe=n(1109);class Je extends r.PureComponent{constructor(...e){super(...e);this.handleDeleteCriterion=()=>{this.props.onDeleteCriterion(this.props.index)}}render(){const{criterionType:e,criterionParameters:t,onCriterionParametersChange:n,onUpdateOrder:r,onResetOrder:i,criterionId:o,index:a}=this.props;return Object(b.jsx)(Ye,{className:"draggable-smart-rule p-all-2",criterionId:o,onUpdateOrder:r,index:a,onResetOrder:i,canRemove:!0,onRemove:this.handleDeleteCriterion,"data-test-id":"draggable-smart-rule_"+o,children:Object(b.jsx)(Re.a,{criterionParameters:t,criterionType:e,onParametersChange:n})},o)}}var Qe=Object(Xe.a)(Je),Ze=n(1102);class et extends r.PureComponent{constructor(e){super(e);this.createHandleParametersChange=e=>t=>this.props.onParametersChange(e,t);this.state=this.getStateFromProps(e);this.onOrderChange=this.onOrderChange.bind(this);this.handleResetOrder=this.handleResetOrder.bind(this);this.renderCriteria=this.renderCriteria.bind(this);this.createHandleParametersChange=this.createHandleParametersChange.bind(this)}componentDidUpdate(e){e.criteria!==this.props.criteria&&this.setState(this.getStateFromProps(this.props))}getStateFromProps(e){const t=e.criteria.map(e=>e.get("id")).toJS();return{initialOrder:t,order:t,criterionParameters:this.props.criteria.toJS().reduce((e,t)=>Object.assign({},e,{[t.id]:t.parameters}),{})}}onOrderChange(e,t,n=!1){let r=this.state.order;r=Object(Ze.a)(r,r[e],t);this.setState({order:r});if(n){this.props.onPrecedenceChange(this.state.order);this.setState({initialOrder:this.state.order})}}handleResetOrder(){this.setState({order:this.state.initialOrder})}renderCriteria(){return this.state.order.map((e,t)=>Object(b.jsx)(Qe,{criterionId:e,index:t,onResetOrder:this.handleResetOrder,onUpdateOrder:this.onOrderChange,onDeleteCriterion:this.props.onDeleteCriterion,onChangeParameters:this.createHandleParametersChange(e),definitionId:this.props.definitionId,criterionType:this.props.criterionType,criterionParameters:this.state.criterionParameters[e]},e))}render(){return Object(b.jsx)("div",{className:"draggable-smart-rule-container",children:this.renderCriteria()})}}var tt=n(1111);const nt=256,rt=e=>"smartcontentlib.components.modal.ManageDefinitionPanel."+e;function it(){return function(e,t){const n=Object(m.b)(e,t)||[],r=Object(m.a)(e,t),i=n[0];return{criteria:n,definition:r,criterionType:i?i.type:t.criterionType,isUngatedForIlsListIds:Object(tt.c)(e)}}}const ot={bulkDeleteCriteria:ge,createCriterion:je,createDefinition:g.a,deleteDefinitionCriteria:g.b,updateCriterion:Ee},at=Object(d.connect)(it,ot);class st extends r.Component{constructor(e){super(e);this.setUpInitialSmartRules=()=>{const{criteria:e}=this.props,t=[...e];return Object(ue.fromJS)(t).sortBy(e=>e.get("precedence"))};this.handleCreateNewDefinition=()=>{const{contentType:e,createDefinition:t,moduleName:n,onAddNewSmartRules:r,onClose:i,onSave:o,targetId:a,targetType:s,trackSmartContentAction:c}=this.props,{smartType:l,unsavedSmartRules:u}=this.state;t({contentType:e,targetType:s,targetId:a,criterionType:l,smartRules:u,moduleName:n}).then(e=>{this.setState({requestStatus:f.o.SUCCEEDED});const{criteria:t,id:a}=e;if(o){o(t,{definitionId:a,moduleName:n,smartType:l})}r&&t.length&&r(t);c&&c("smartContentDefinitionActivation",{action:"Definition creation activation",smartType:l});i()}).catch(()=>{this.setState({requestStatus:f.o.FAILED})})};this.handleDeleteDefinition=()=>{const{definitionId:e,deleteDefinitionCriteria:t,moduleName:n,onClose:r,onSave:i}=this.props;t(e).then(()=>{this.setState({requestStatus:f.o.SUCCEEDED});if(i){const e={definitionId:null,moduleName:n,smartType:f.h.NOT_SMART};i([],e)}r()}).catch(()=>{this.setState({requestStatus:f.o.FAILED})})};this.handleAddUpdateAndDeleteSmartRules=()=>{const{bulkDeleteCriteria:e,createCriterion:t,definitionId:n,moduleName:r,onAddNewSmartRules:i,onClose:o,onSave:a,updateCriterion:s}=this.props,{initialCriteria:c,smartType:l,unsavedSmartRules:u}=this.state,d=[];u.filter(e=>!!e.get("newRule")).forEach(e=>{const{parameters:r,precedence:i}=e.toJS();d.push(t(n,l,r,i))});const p=u.map(e=>e.get("id")),m=c.map(e=>e.get("id")),g=Object(h.difference)(m.toJS(),p.toJS());g.length&&d.push(e(n,g));u.forEach(e=>{if(!e.get("newRule")&&this.hasSmartRuleChanged(e)){const{parameters:t,precedence:r,id:i}=e.toJS();d.push(s(n,i,{parameters:t,precedence:r}))}});Promise.all(d).then(e=>{this.setState({requestStatus:f.o.SUCCEEDED});const t=[],s=[];u.forEach(n=>{if(n.get("newRule")){const r=e.find(e=>e.precedence===n.get("precedence"));if(r){t.push(r);s.push(r)}}else s.push(n.toJS())});a&&a(s,{definitionId:n,moduleName:r,smartType:l});i&&t.length&&i(t);o()}).catch(()=>{this.setState({requestStatus:f.o.FAILED})})};this.handleSaveDefinition=()=>{const{definitionId:e}=this.props,{initialSmartType:t,smartType:n,unsavedSmartRules:r}=this.state;e&&t===n?r.isEmpty()?this.handleDeleteDefinition():this.handleAddUpdateAndDeleteSmartRules():this.handleCreateNewDefinition()};this.hasSmartRuleChanged=e=>{const{initialCriteria:t}=this.state,n=t.find(t=>t.get("id")===e.get("id"));return!Object(ue.is)(e,n)};this.onSmartRuleValueChange=(e,t)=>{const{unsavedSmartRules:n}=this.state,r=n.findIndex(t=>t.get("id")===e);return this.setState({unsavedSmartRules:n.setIn([r,"parameters"],Object(ue.fromJS)(t))})};this.onPrecedenceChange=e=>{const{unsavedSmartRules:t}=this.state,n=t.map(t=>t.set("precedence",e.indexOf(t.get("id")))).sortBy(e=>e.get("precedence"));this.setState({unsavedSmartRules:n})};this.onDeleteSmartRule=e=>{const{unsavedSmartRules:t}=this.state,n=t.delete(e).map((e,t)=>e.set("precedence",t));this.setState({unsavedSmartRules:n})};this.onAddSmartRule=()=>{const{trackSmartContentAction:e,isUngatedForIlsListIds:t}=this.props,{createdCriteriaId:n,smartType:r,unsavedSmartRules:i}=this.state,o=t&&r===f.h.CONTACT_LIST?f.j:f.f[r],a=n-1,s=Object(ue.fromJS)({id:a,precedence:i.size,parameters:{[o]:this.defaultValueForSmartType},type:r,newRule:!0});e&&e("smartContentDefinitionInteraction",{action:"Manage Definition Panel Add Smart Rule Interaction",smartType:r});this.setState({unsavedSmartRules:i.push(s),createdCriteriaId:a})};this.onSmartTypeChange=e=>{this.setState({smartType:e})};const{criterionType:t,definition:n}=e;this.state={initialCriteria:this.setUpInitialSmartRules(),initialSmartType:t,requestStatus:f.o.UNINITIALIZED,unsavedDefinition:Object(ue.fromJS)(n),unsavedSmartRules:this.setUpInitialSmartRules(),smartType:t,createdCriteriaId:0}}componentDidUpdate(e){const{criterionType:t,definition:n}=this.props;if(n!==e.definition){const{criteria:e}=this.props,n=Object(ue.fromJS)(e).sortBy(e=>e.get("precedence"));this.setState({initialCriteria:n,unsavedSmartRules:n,criterionType:t})}!e.criterionType&&t&&this.setState({smartType:t})}get defaultValueForSmartType(){const{smartType:e}=this.state;switch(e){case f.h.AUDIENCE:case f.h.DEVICE_TYPE:case f.h.TRAFFIC_SOURCE:return null;case f.h.QUERY_PARAM:return f.n.IS;default:return[]}}get hasUnsavedChanges(){const{unsavedSmartRules:e,initialCriteria:t}=this.state;return!Object(ue.is)(e,t)}get hasInvalidSmartRules(){return!!this.state.unsavedSmartRules.find(e=>!Object(P.a)(e.toJS()))}renderAddButton(){const{smartType:e,unsavedSmartRules:t}=this.state,n=t.size>=nt,r=Object(b.jsxs)(le.a,{"data-test-id":"add-smart-rule-button",disabled:!e||n,onClick:this.onAddSmartRule,use:"link",children:[Object(b.jsx)(ke.a,{name:"add"}),Object(b.jsx)(j.a,{message:rt("addSmartRuleButton")})]});return n?Object(b.jsx)(De.a,{title:Object(b.jsx)(j.a,{message:rt("limitReached")}),children:r}):r}renderSmartRulesBody(){const{definitionId:e}=this.props,{smartType:t,unsavedSmartRules:n}=this.state;return Object(b.jsxs)("div",{className:"manage-definition-form",children:[Object(b.jsx)(Ae.a,{children:Object(b.jsx)(j.a,{message:rt("smartRulesHeader")})}),Object(b.jsx)(et,{criteria:n,onParametersChange:this.onSmartRuleValueChange,onPrecedenceChange:this.onPrecedenceChange,onDeleteCriterion:this.onDeleteSmartRule,definitionId:e,criterionType:t}),this.renderAddButton()]})}renderSmartTypeSelect(){const{anonymousTargeting:e,contentType:t}=this.props,{smartType:n,unsavedSmartRules:r}=this.state;return Object(b.jsx)(Pe.a,{contentType:t,anonymousTargeting:e,criterionType:n,onCriterionTypeChange:this.onSmartTypeChange,readOnly:!r.isEmpty(),tooltip:Object(p.a)(rt("smartTypeReadOnlyTooltip"))})}renderSaveButton(){const{requestStatus:e}=this.state,t=!this.hasUnsavedChanges||e===f.o.PENDING||this.hasInvalidSmartRules,n=Object(b.jsx)(le.a,{onClick:this.handleSaveDefinition,"data-test-id":"save-manage-definition-button",use:"primary",disabled:t,children:Object(b.jsx)(j.a,{message:rt("footer.saveButton")})});return this.hasInvalidSmartRules?Object(b.jsx)(De.a,{title:Object(p.a)(rt("footer.invalidCriteria")),children:n}):n}render(){const{onClose:e}=this.props;return Object(b.jsxs)(Se.a,{"data-test-id":"manage-definition-panel",children:[Object(b.jsxs)(Ne.a,{children:[Object(b.jsx)(we.a,{onClick:e}),Object(b.jsx)(Te.a,{children:Object(b.jsx)(j.a,{message:rt("header")})})]}),Object(b.jsx)(Ie.a,{children:Object(b.jsx)("div",{style:{height:"100%"},className:"display-flex",children:Object(b.jsxs)(c.a,{direction:"column",align:"stretch",children:[Object(b.jsx)("p",{children:Object(b.jsx)(j.a,{message:rt("description")})}),this.renderSmartTypeSelect(),this.renderSmartRulesBody()]})})}),Object(b.jsxs)(_e.a,{children:[this.renderSaveButton(),Object(b.jsx)(le.a,{onClick:e,use:"secondary","data-test-id":"cancel-manage-definition-button",children:Object(b.jsx)(j.a,{message:rt("footer.cancelButton")})})]})]})}}var ct=Object(h.compose)(at,O)(st);const lt=(e,t)=>({type:de.t,modalType:t,props:e,iframeOnly:!1}),ut=e=>"smartcontentlib.components.button.ManageDefinitionButton."+e,dt=Object(d.connect)(null,{openSmartModal:lt});class pt extends r.PureComponent{constructor(e){super(e);this.handleClick=this.handleClick.bind(this);this.handleClose=this.handleClose.bind(this);this.state={open:!1}}handleClick(e,t={}){const{anonymousTargeting:n,definitionId:r,inpage:i,moduleName:o,onModalOpen:a,onModalClose:s,smartType:c,targetType:l,targetId:u,trackSmartContentAction:d}=this.props;d&&d("smartContentDefinitionInteraction",{action:r?"Manage Smart Definition in Module Form":"Add Smart Definition in Module Form",smartType:c});if(i){s&&s();this.props.openSmartModal(Object.assign({anonymousTargeting:n,definitionId:r,moduleName:o,targetType:l,targetId:u},t),f.l.MANAGE_DEFINITION_PANEL)}else{a&&a(f.l.MANAGE_DEFINITION_PANEL);this.setState({open:!0})}}handleClose(){const{onModalClose:e}=this.props;this.setState({open:!1});e&&e()}renderLabel(){const{children:e}=this.props;return e||Object(b.jsx)(j.a,{message:ut("label")})}renderModal(){const{anonymousTargeting:e,bulkDeleteCriteria:t,contentType:n,createCriterion:r,definitionId:i,deleteDefinitionCriteria:o,moduleName:a,onAddNewSmartRules:s,onSave:c,smartRulesOrder:l,targetType:u,targetId:d,trackSmartContentAction:p,updateCriterion:h}=this.props,{open:m}=this.state;return m&&Object(b.jsx)(ct,{anonymousTargeting:e,bulkDeleteCriteria:t,contentType:n,createCriterion:r,definitionId:i,deleteDefinitionCriteria:o,onAddNewSmartRules:s,moduleName:a,onClose:this.handleClose,onSave:c,smartRulesOrder:l,targetId:d,targetType:u,trackSmartContentAction:p,updateCriterion:h})}renderManageButton(){const{disabled:e,size:t="md"}=this.props;return Object(b.jsxs)("span",{children:[Object(b.jsx)(le.a,{disabled:e,onClick:this.handleClick,size:t,use:"link","data-test-id":"manage-definition-button",children:this.renderLabel()}),this.renderModal()]})}render(){const{disabledReason:e}=this.props;return e?Object(b.jsx)(De.a,{title:e,children:this.renderManageButton()}):this.renderManageButton()}}var ht=dt(pt),mt=n(2655);const ft=["buttonUse","className","compact","criteria","disabled","disabledReason","definitionId","inpage","menuWidth","onSaveDefinition","readOnly","tagName","value"];function gt(){const e=Object(m.e)();return function(t,n){const r=Object(m.a)(t,n);if(!r)return{};const{criterionId:i,disabled:o,smartType:a,validCriteria:s}=n;let c,{criteria:l}=r,u=e(t,n),d=a;if(s){l=s.reduce((e,t)=>{if(u[t]){e.push(t);d||(d=u[t].type)}return e},[]);u=Object(h.pick)(u,l)}i&&u[i]&&(c=i);return{criteria:l,criteriaById:u,disabled:o,smartType:d,value:c}}}const bt=Object(d.connect)(gt),Ot=e=>"smartcontentlib.components.input.SmartRulesSelectWithManageOptions."+e;class yt extends r.Component{constructor(e){super(e);this.onClose=this.onClose.bind(this);this.handleChange=this.handleChange.bind(this);this.handleOpenChange=this.handleOpenChange.bind(this);this.handleModalOpen=this.handleModalOpen.bind(this);this.state={open:!1,modalOpen:!1}}get options(){const{criteria:e=[]}=this.props;return[{text:Object(p.a)(Ot("default")),value:a.c},...e.map(e=>({value:e}))]}onClose(){const{onModalClose:e}=this.props;e&&e();this.setState({open:!1,modalOpen:!1})}handleChange(e){const{criteriaById:t={},onChange:n,trackSmartContentAction:r}=this.props,i=t[e.target.value];if(i&&r){const{type:e}=i;r("smartRulesSelectInteraction",{smartType:e})}n(i);this.onClose()}handleOpenChange(e){const{modalOpen:t}=this.state;t||this.setState({open:e.target.value})}handleModalOpen(e=""){const{onModalOpen:t}=this.props;t&&t(e);this.setState({modalOpen:!0})}renderOption(e){const t=e.value?Object(b.jsx)(ce,{criterionId:e.value}):e.text;return Object(b.jsx)(le.a,{use:"unstyled",children:Object(b.jsx)(M.a,{children:t})})}renderValue(e){const t=e.text||e.buttonText;return e.value?Object(b.jsx)(ce,{criterionId:e.value}):t}renderSmartType(){const{compact:e=!1,smartType:t}=this.props;return!t||e?null:Object(b.jsxs)(c.a,{align:"center",children:[Object(b.jsx)(Ae.a,{className:"p-all-0 m-right-1",children:Object(b.jsx)(j.a,{message:Ot("smartTypeLabel")})}),Object(b.jsx)(j.a,{message:`smartcontentcore.CriterionTypes.${t}.label`})]})}render(){const e=this.props,{buttonUse:t="link",className:n,compact:r=!1,criteria:i=[],disabled:o,disabledReason:s,definitionId:l,inpage:d=!1,menuWidth:h=300,onSaveDefinition:m,readOnly:f=!1,tagName:g="span",value:O=a.c}=e,v=Object(u.a)(e,ft);if(!l||!i.length){let e=Object(b.jsx)(y.a,{className:n,tagName:g,children:Object(b.jsxs)(ht,Object.assign({definitionId:l,disabled:o||f,inpage:d,onSave:m},v,{children:[Object(b.jsx)(ke.a,{name:"add"}),Object(b.jsx)(j.a,{message:Ot("addSmartRule")})]}))});o&&s&&(e=Object(b.jsx)(De.a,{className:"m-left-2",placement:"right",title:s,children:e}));return e}return Object(b.jsxs)(y.a,{className:n,tagName:g,children:[this.renderSmartType(),Object(b.jsxs)(c.a,{align:"center",className:r?"":"m-bottom-1",children:[Object(b.jsx)(Ae.a,{className:"p-all-0 m-right-1 smart-rule-edit-label",children:Object(b.jsx)(j.a,{message:Ot("editingLabel")})}),Object(b.jsx)(mt.a,{anchorType:"button",className:"criteria-dropdown-select p-all-0",buttonUse:t,"data-test-id":"criteria-select",disabled:o,menuWidth:h,onChange:this.handleChange,onOpenChange:this.handleOpenChange,open:this.state.open,optionRenderer:this.renderOption,options:this.options,placeholder:Object(p.a)(Ot("default")),searchable:!1,value:O,valueRenderer:this.renderValue})]}),!r&&Object(b.jsx)(ht,Object.assign({definitionId:l,disabled:o||f,inpage:d,onSave:m},v))]})}}var jt=Object(h.compose)(bt,O)(yt),vt=n(2604);n.d(t,"a",(function(){return xt}));const Ct=e=>"DesignEditorsUI.smartDefinitionControls."+e;class xt extends r.PureComponent{constructor(...e){super(...e);this.trackSmartContentAction=(e,t)=>{s.a.track(e,Object.assign({},t))}}get headerKey(){const e=this.props.compact?"compact":"full";return Ct("headerText."+e)}get headerProps(){return this.props.compact?{className:"p-right-2"}:{className:"display-block",use:"help"}}render(){const{anonymousTargeting:e,definitionId:t,onAddRule:n,onSelectRule:r,onSaveSmartDefinition:i,readOnly:o,selectedRuleId:a,smartType:s,targetId:u,validRules:d,compact:p,placement:h}=this.props;return Object(b.jsx)(vt.a,{children:Object(b.jsx)(c.a,{direction:p?"row":"column",children:Object(b.jsx)(c.a,{children:Object(b.jsx)(l.a,{className:"smart-content-rule-select",grow:1,shrink:1,children:Object(b.jsx)(jt,{anonymousTargeting:e,buttonClassName:"smart-content-rule-select-button",buttonUse:"link",compact:p,criterionId:a,definitionId:t,onChange:r,onCreate:n,onSaveDefinition:i,readOnly:o,smartType:s,targetId:u,targetType:f.v.WIDGET,trackSmartContentAction:this.trackSmartContentAction,truncated:!0,resetDefinitionsOnUnmount:!0,validCriteria:d,placement:h},t)})})})})}}xt.propTypes={anonymousTargeting:o.a.bool,definitionId:o.a.number,onAddRule:o.a.func,onSaveSmartDefinition:o.a.func,onSelectRule:o.a.func,readOnly:o.a.bool,selectedRuleId:o.a.number,smartType:o.a.oneOf(Object.keys(a.b)).isRequired,targetId:o.a.number,validRules:o.a.arrayOf(o.a.number),compact:o.a.bool,placement:o.a.string};xt.defaultProps={compact:!1}},function(e,t,n){"use strict";var r=n(2),i=n(1212),o=n.n(i),a=n(1242),s=n(1),c=n.n(s),l=n(1257),u=n(1258);let d=!1;const p={};function h(e){const t=Object(u.b)(e.get,l.a.PROPERTIES.getUrl,p,u.a);return function(e){return t(e,{},{clearCache:d})}}const m={};function f(e){const t=Object(u.b)(e.get,l.a.OWNERS.getUrl,m,u.a);return function(){return t("",{},{clearCache:d})}}const g={};function b(e){const t=Object(u.b)(e.get,l.a.SITE_SETTINGS.getUrl,g,u.a),n=c.a.get();return function(){return t(n,{},{clearCache:d})}}const O={};function y(e){const t=Object(u.b)(e.get,l.a.CUSTOM_OBJECT_META.getUrl,O,u.a);return function(){return t("",{},{clearCache:d})}}const j=(e={})=>(e.supportedCrmObjectFQNs||[]).join(","),v={},C=(e,t)=>{const n=j(t);return v[n]&&!d?new Promise(e=>e(v[n])):new Promise(r=>{e().then(({results:e})=>{v[n]=e.reduce((e,{labels:t,fullyQualifiedName:n})=>{e[n]=t.singular;return e},{});r(v[n])}).catch(()=>{const{supportedCrmObjectFQNs:e=[]}=t;v[n]=e.reduce((e,t)=>{e[t]=t;return e},{});r(v[n])})})},x={};function E(e,t=!1){const n=y(e),r=h(e);d=t;return function(e){const{supportedCrmObjectFQNs:i=[]}=e,o=j(e);return Object.prototype.hasOwnProperty.call(x,o)&&!t?x[o]:C(n,e).then(e=>{x[o]=Promise.all(i.map(t=>r(encodeURIComponent(t)).then(n=>({fqn:t,propertiesForCategory:n,customObjectLabels:e}))));return x[o]})}}var T=n(1275);let S=null;const I=(e,t,n=!1)=>{const{apiClient:r}=e.settings,i=Object(T.h)(t);if(i)S=Promise.resolve(i);else{const e=E(r,n);S=Object(T.b)(e,t,n)}return S};var w=n(2654),_=n(1279),N=n(1280),A=n(2634),D=n(1267),k=n(46),P=n(1278),R=n(1237),F=n(1239),L=n(1281),M=n(2817),B=n(1241),U=n(1282);const V=()=>{},H=(e,t={})=>{const n=Object(B.c)(e),r=(n&&n[U.g.PROPERTY_FILTERS_CALLBACK]||V)(t);Object(k.a)(["undefined","string"].includes(typeof r),"hsPersonalizeConfig.PROPERTY_FILTERS_CALLBACK must return a STRING");return r},q=({category:e,name:t},n,r,i)=>Object(P.a)({category:e,property:t,subProperty:n,defaultValue:r,filter:i}),G=e=>function(t,n="",r=""){const{fieldType:i="",category:o,name:a,originalProperty:s,isHubspotDefined:c}=t,l=H(e,s),u=e.selection.getNode(),d=document.createTextNode(q(t,n,r,l)),p=Object(M.b)(u,d),h=3===p.nodeType?p.textContent:p.outerHTML;e.insertContent(h);Object(F.b)(e,"tinymceEditPersonalizationToken",R.z,{version:"v3",tokenCategory:o,tokenName:a,isHubspotDefined:c,defaultValueType:Object(L.a)(r),fieldType:i})},W=e=>function(t,n="",r=""){const{fieldType:i="",category:o,name:a,originalProperty:s,isHubSpotDefined:c}=t;if(!t)throw new Error("[hspersonalize] missing insert token");const l=H(e,s);e.insertContent(q(t,n,r,l));Object(F.b)(e,"tinymceInsertPersonalizationToken",R.P,{version:"v3",tokenCategory:o,tokenName:a,isHubspotDefined:c,defaultValueType:Object(L.a)(r),fieldType:i})},z=e=>function(t){e.undoManager.transact(()=>{e.dom.remove(t)})};var $=n(1245),K=n(40),Y=n(41),X=n.n(Y),J=n(1269),Q=n(279),Z=n(605),ee=n(1276),te=n(443),ne=n(477),re=n(2734),ie=n(1285),oe=n(1286);const ae=()=>({requestStatus:ie.a.UNINITIALIZED,properties:[]}),se=(e,{requestStatus:t,properties:n})=>{switch(t){case ie.a.PENDING:return Object.assign({},e,{requestStatus:t});case ie.a.SUCCEEDED:return{requestStatus:t,properties:n};case ie.a.FAILED:return Object.assign({},e,{requestStatus:t});default:return e}},ce=e=>{const t=ae(),[{requestStatus:n,properties:r},i]=Object(K.useReducer)(se,t);Object(K.useEffect)(()=>{const t=Object(oe.a)();i({requestStatus:ie.a.PENDING});e().then(e=>e.filter(e=>null!==e)).then(t.resolve);t.promise.then(e=>{i({requestStatus:ie.a.SUCCEEDED,properties:e})}).catch(e=>{i({requestStatus:ie.a.FAILED});console.warn(e)});return()=>{t.reject("[rich-text-lib][personalization][fetchProperties] component unmounting abort state update")}},[e]);return[r,n]},le=e=>{const[t,n]=Object(K.useState)([]);Object(K.useEffect)(()=>{const t=Object(oe.a)();e().then(t.resolve);t.promise.then(n).catch(console.warn);return()=>{t.reject("[rich-text-lib][personalization][fetchOwners] component unmounting abort state update")}},[e]);return t};var ue=n(288),de=n.n(ue),pe=n(4),he=n(287),me=n.n(he),fe=n(324),ge=n(298),be=n(2741),Oe=n(2655),ye=n(2700),je=n(281),ve=n(1277),Ce=n(45);function xe(e){const{settingsKey:t,href:n}=e;return[ve.m.SITE_SETTINGS].includes(t)?Object(Ce.jsx)(je.a,{message:Object(P.h)(`help.settings.${t}.helpLink`),options:{href:n}}):null}xe.propTypes={href:X.a.string.isRequired,settingsKey:X.a.string};const Ee=["children","option"],Te=["options"],Se=me()(ye.a).withConfig({displayName:"TokenBrowser__StyledTypeahead",componentId:"sc-9kyliv-0"})([".token-search-input{background-color:#fff;}.token-results-input{border-top:1px solid ",";}"],fe.BATTLESHIP),Ie=(e,t,n={})=>{if(0===e.length)return[];const r=t.value;if(!r)return[];const i=e.find(({value:e})=>e===r).options,o=n[r];return o?i.filter(e=>!o.includes(e.name)):i},we={currentOption:X.a.object.isRequired,dropdownClassName:X.a.string,emailSettingsLink:X.a.string.isRequired,onPropertySelect:X.a.func.isRequired,propertyOptions:X.a.array.isRequired},_e="TokenBrowser",Ne=e=>{const{children:t,option:n}=e,i=Object(r.a)(e,Ee);return Object(Ce.jsx)(w.a,{placement:"left",title:n.disabledTooltip,disabled:!n.disabled,children:Object(Ce.jsx)("span",Object.assign({},i,{onClick:e=>{e.stopPropagation()},children:t}))})},Ae=e=>{const{currentOption:t,dropdownClassName:n,emailSettingsLink:i,onPropertySelect:o,propertyOptions:a,personalizeConfig:s}=e,[c,l]=Object(K.useState)({}),[u,d]=Object(K.useState)(""),p=Object(K.useRef)(null);Object(K.useEffect)(()=>{p.current&&p.current.focus()},[c.value]);Object(K.useEffect)(()=>{const e=t.category,n=a.find(t=>t.value===e);n?l(n):a.length>0&&l(a[0])},[t,a]);const h=e=>{l(e.target.value)},m=e=>{d(e.target.value)},f=Ie(a,c,s.unsupportedTokens),g=e=>{const{target:{value:t}}=e,n=f.find(e=>e.value===t);o(Object(ge.a)(n))},b=a.map(e=>Object(r.a)(e,Te)),O=c.text||"";return Object(Ce.jsxs)(K.Fragment,{children:[Object(Ce.jsx)(be.a,{className:"m-bottom-3 m-x-5",help:Object(Ce.jsx)(xe,{href:i,settingsKey:t.category}),label:pe.a.text(Object(P.h)("tokenLabel")),children:Object(Ce.jsx)(Oe.a,{"data-test-id":"properties-ui-select",onSelectedOptionChange:h,options:b,placeholder:pe.a.text(Object(P.h)("tokenPlaceholder")),searchClassName:n,value:c.value})}),Object(Ce.jsx)(Se,{itemComponent:Ne,enableKeyboardScrollingNav:!0,onChange:g,options:f,onSearchChange:m,placeholder:pe.a.text(Object(P.h)("propertySearchPlaceholder"),{type:O}),resultsClassName:"token-results-input",searchClassName:de()("m-x-5 m-bottom-4 p-all-0 token-search-input",n),value:u,inputRef:p})]})};Ae.propCategorys=we;Ae.displayName=_e;var De=Ae,ke=n(1023),Pe=n(2712),Re=n(773),Fe=n(508),Le=n(2742);function Me({currentOption:e,isGlobalFallback:t,setIsGlobalFallback:n,fallback:r,setFallback:i,settingsLink:o,tooltipClassName:a}){const s=({target:{checked:e}})=>{n(e);e&&i("")};return Object(Ce.jsxs)(K.Fragment,{children:[Object(Ce.jsx)(be.a,{className:"m-top-0",label:pe.a.text(Object(P.h)("fallbackLabel")),tooltip:pe.a.text(Object(P.h)("fallbackHelp")),tooltipPlacement:"top right",tooltipProps:{innerClassName:a},children:Object(Ce.jsx)(Fe.a,{"data-test-id":"local-fallback-input",value:r,disabled:!0===t,onChange:({target:{value:e}})=>i(e)})}),Object(P.l)(e)&&Object(Ce.jsx)(Le.a,{className:"m-top-2",size:"small",checked:t,onChange:s,"data-test-id":"default-value-global-checkbox",children:Object(Ce.jsx)(je.a,{options:{href:o},message:Object(P.h)("globalFallbackLabelHelp")})})]})}Me.propTypes={setFallback:X.a.func.isRequired,setIsGlobalFallback:X.a.func.isRequired,settingsLink:X.a.string.isRequired,currentOption:X.a.object,isGlobalFallback:X.a.bool,fallback:X.a.string,tooltipClassName:X.a.string};var Be=n(2685),Ue=n(2823);function Ve({owners:e,defaultValue:t,localDefaultValue:n,settingsLink:r}){const i=e.find(({ownerId:e})=>t?e===parseFloat(t):e===parseFloat(n));return Object(Ce.jsx)(be.a,{className:"m-top-0",tooltip:pe.a.text(Object(P.h)("userFallbackHelp")),tooltipPlacement:"bottom right",label:pe.a.text(Object(P.h)("fallbackUserLabel")),help:Object(Ce.jsx)(je.a,{message:Object(P.h)("fallbackUserLabelHelp"),options:{href:r}}),children:Object(Ce.jsx)(Fe.a,{readOnly:!0,value:i&&Object(Be.a)(i)})})}function He({categoryCanHaveGlobalDefaultValue:e,owners:t,defaultValue:n,localDefaultValue:r,selectedUserProperty:i,settingsLink:o,dropdownClassName:a,onUserPropertySelect:s}){return Object(Ce.jsxs)(K.Fragment,{children:[e&&Object(Ce.jsx)(Ve,{owners:t,defaultValue:n,localDefaultValue:r,settingsLink:o}),Object(Ce.jsx)(be.a,{className:"m-top-2 p-bottom-2",label:pe.a.text(Object(P.h)("userPropertyLabel")),children:Object(Ce.jsx)(Oe.a,{dropdownClassName:a,menuStyle:{maxHeight:300},onChange:s,options:ve.u.map(({value:e,text:t})=>({value:e,text:Object(Ue.b)(t)})),"data-test-id":"user-property-select",placeholder:pe.a.text(Object(P.h)("propertyPlaceholder")),value:i,filterOptions:!0})})]})}He.propTypes={categoryCanHaveGlobalDefaultValue:X.a.bool.isRequired,owners:X.a.array,defaultValue:X.a.string,localDefaultValue:X.a.string,selectedUserProperty:X.a.string.isRequired,settingsLink:X.a.string.isRequired,dropdownClassName:X.a.string,onUserPropertySelect:X.a.func.isRequired};const qe=e=>{const{currentOption:t,defaultValue:n,dropdownClassName:r,fallback:i,isUserProperty:o,onUserPropertySelect:a,owners:s,settingsLink:c,userProperty:l}=e;if(!o)return null;const u=Object(P.b)(t.category);return Object(Ce.jsx)(He,{categoryCanHaveGlobalDefaultValue:u,defaultValue:n,dropdownClassName:r,localDefaultValue:i,onUserPropertySelect:a,owners:s,selectedUserProperty:l,settingsLink:c})},Ge={currentOption:X.a.object.isRequired,enableFallback:X.a.bool.isRequired,fallback:X.a.string,isGlobalFallback:X.a.bool,onBackClick:X.a.func.isRequired,onFallbackChange:X.a.func.isRequired,onIsGlobalFallbackChange:X.a.func.isRequired,propertyOptions:X.a.array.isRequired,settingsLink:X.a.string.isRequired,tooltipClassName:X.a.string},We="TokenEditor",ze=e=>{const{currentOption:t,enableFallback:n,fallback:r,isGlobalFallback:i,onBackClick:o,onFallbackChange:a,onIsGlobalFallbackChange:s,propertyOptions:c,settingsLink:l,tooltipClassName:u}=e,d=Object(P.c)(t,c),p=`${d.charAt(0).toUpperCase()}${d.slice(1)}`;return Object(Ce.jsxs)("div",{className:"m-x-5",children:[Object(Ce.jsx)(Re.a,{className:"m-top-0",flush:!0,children:Object(Ce.jsx)(Pe.a,{"data-test-id":"personalize-back-link",onClick:o,onMouseDown:e=>e.preventDefault(),children:Object(Ce.jsx)(Q.a,{message:Object(P.h)("back")})})}),Object(Ce.jsx)(ke.a,{className:"m-bottom-0",children:`${p}: ${t.text}`}),qe(e),n&&Object(Ce.jsx)(Me,{fallback:r,setFallback:a,isGlobalFallback:i,setIsGlobalFallback:s,currentOption:t,settingsLink:l,tooltipClassName:u})]})};ze.propTypes=Ge;ze.displayName=We;var $e=ze;const Ke="fallback",Ye="token",Xe=(e,t,n,r,i)=>{const o=e.category,a=e.name;return!(!o||!a||Object(P.j)(e)&&!t)&&!!(n||r||i)},Je=e=>{let t=!1,n="";if(e){if(Object(P.e)(e.category,e.property)){t=!0;n=e.property}else n=`${e.category}.${e.property}`;return{isPropertyOnlyToken:t,token:n}}},Qe=e=>Object(P.j)(e)||Object(P.k)(e),Ze=(e,t)=>{if(!e)return null;const n=t===Ke?200:320;return Object(Ce.jsx)(re.a,{layout:"centered",minHeight:n})},et=(e,t,n,r,i,o)=>{if(i||n!==Ye)return null;const{dropdownClassName:a,emailSettingsLink:s,personalizeConfig:c}=e;return Object(Ce.jsx)(De,{currentOption:t,dropdownClassName:a,emailSettingsLink:s,onPropertySelect:r,propertyOptions:o,personalizeConfig:c})},tt=(e,t,n,r,i,o,a,s,c,l,u,d,p)=>{const{dropdownClassName:h,tooltipClassName:m,emailSettingsLink:f,personalizeConfig:g,publishingSettingsLink:b,siteSettings:O}=e;if(c||n!==Ke||g.hideFallbacks)return null;const y=Object(P.k)(t,u);return Object(Ce.jsx)($e,{currentOption:t,defaultValue:Object(P.d)(t.name,t.category,O,g.isEmail),dropdownClassName:h,enableFallback:y,fallback:r,isGlobalFallback:a,isUserProperty:Object(P.j)(t),onBackClick:i,onFallbackChange:d,onIsGlobalFallbackChange:p,onUserPropertySelect:o,owners:s,propertyOptions:l,settingsLink:g.isEmail?f:b,userProperty:u,tooltipClassName:m})},nt=(e,t,n,r,i,o,a,s,c)=>{if(s||r!==Ke)return null;const{isInsert:l,onClose:u}=e,d=()=>{o(n)};return Object(Ce.jsxs)("div",{className:"m-bottom-5 m-top-3 m-x-5",children:[Object(Ce.jsx)(te.a,{use:"tertiary","data-test-id":"insert-token-confirm-button",onClick:d,disabled:!Xe(n,c,t,a,i),size:"small",children:Object(Ce.jsx)(Q.a,{message:l?Object(P.h)("insertToken"):Object(P.h)("editToken")})}),Object(Ce.jsx)(te.a,{use:"tertiary-light","data-test-id":"insert-token-cancel-button",onClick:u,size:"small",children:Object(Ce.jsx)(Q.a,{message:Object(P.h)("cancel")})})]})};function rt(e){const{onClose:t,onInsert:n,fetchProperties:r,personalizeConfig:i,property:o,siteSettings:a}=e,s=void 0===i.allowEmptyFallbacks||i.allowEmptyFallbacks,[c,l]=ce(r),u=le(e.fetchOwners),[d,p]=Object(K.useState)(o),[h,m]=Object(K.useState)(o.fallback),[f,g]=Object(K.useState)(void 0===o.fallback),[b,O]=Object(K.useState)(""),[y,j]=Object(K.useState)(o.category?Ke:Ye);Object(K.useEffect)(()=>{const e=Je(o),t=c.reduce((e,t)=>[...e,...t.options],[]).find(t=>(e.isPropertyOnlyToken?t.value.split(".")[1]:t.value)===e.token);if(t){p(t);const{dataSensitivity:e}=t.originalProperty||{};if(i.hideFallbacks||e===ee.a.STANDARD||e===ee.a.HIGH)j(Ye);else{const e=Qe(t)?Ke:Ye;j(e);m(o.fallback);g(void 0===o.fallback)}o.subCategory&&O(o.subCategory)}},[i.hideFallbacks,o,c]);const v=e=>{const r=f||i.hideFallbacks||!Object(P.k)(e,b);n(e,b,r?null:h||"");t()},C=({target:{value:e}})=>{if(!Qe(e)||i.hideFallbacks)v(e);else{p(e);j(Ke);O("");g(!Object(P.g)({defaultValue:Object(P.d)(e.name,e.category,a,i.isEmail),currentOption:e}))}},x=({target:{value:e}})=>{j(Ke);O(e)},E=()=>{j(Ye)},T=l===ie.a.PENDING||l===ie.a.UNINITIALIZED;return Object(Ce.jsxs)(ne.a,{"data-test-id":"personalize-browser-popover-body",_size:"small",children:[Ze(T,y),et(e,d,y,C,T,c),tt(e,d,y,h,E,x,f,u,T,c,b,m,g),nt(e,s,d,y,h,v,f,T,b)]})}rt.propTypes={onClose:X.a.func.isRequired,onInsert:X.a.func.isRequired,fetchProperties:X.a.func,fetchOwners:X.a.func,personalizeConfig:X.a.shape({hideFallbacks:X.a.bool,hideSiteSettingsCategory:X.a.bool,includeSubscriptionTypeCategory:X.a.bool,includeInternalContactRecord:X.a.bool,allowEmptyFallbacks:X.a.bool,isEmail:X.a.bool}),property:X.a.shape({category:X.a.string.isRequired,property:X.a.string.isRequired,fallback:X.a.string,subCategory:X.a.string,dataSensitivity:X.a.string}),siteSettings:X.a.shape({mergeTagDefaults:X.a.objectOf(X.a.string),pageMergeTagDefaults:X.a.objectOf(X.a.string),accountMergeTagDefaults:X.a.objectOf(X.a.string),pageAccountMergeTagDefaults:X.a.objectOf(X.a.string)})};rt.defaultProps={isInsert:!0,property:{fallback:void 0,category:"",property:"",subCategory:""}};const it=["type","onClose"];function ot(e){const{type:t,onClose:n}=e,i=Object(r.a)(e,it),o=e=>{e.key===J.b.ESCAPE&&n()};return Object(Ce.jsxs)("div",{className:"medium-popover-body p-top-5",tabIndex:"-1",onKeyDown:o,children:[Object(Ce.jsx)(Z.a,{className:"p-x-5 m-bottom-2",children:Object(Ce.jsx)(Q.a,{message:Object(P.h)("title."+t)})}),Object(Ce.jsx)(rt,Object.assign({isInsert:t===J.e.INSERT,onClose:n},i))]})}function at(e){return Object(Ce.jsx)(ot,Object.assign({},e,{type:J.e.INSERT}))}at.displayName="PersonalizePopoverBodyInsertLegacy";var st=at;const ct=e=>{const[t,n]=Object(K.useState)({});Object(K.useEffect)(()=>{const t=Object(oe.a)();e().then(t.resolve);t.promise.then(n).catch(console.warn);return()=>{t.reject("[rich-text-lib][personalization][fetchSettings] component unmounting abort state update")}},[e]);return t};function lt(e){const{fetchSiteSettings:t}=e,n=ct(t);return Object(Ce.jsx)(st,Object.assign({siteSettings:n},e))}lt.propTypes={fetchSiteSettings:X.a.func};lt.displayName="PersonalizePopoverBodyInsert";var ut=lt,dt=n(1287);function pt(e){return Object(Ce.jsx)("div",{className:"animated-popover-edit",children:Object(Ce.jsx)(ot,Object.assign({},e,{type:J.e.EDIT}))})}pt.displayName="PersonalizePopoverBodyEditLegacy";var ht=pt;function mt(e){const{fetchSiteSettings:t}=e,n=ct(t);return Object(Ce.jsx)(ht,Object.assign({siteSettings:n},e))}mt.propTypes={fetchSiteSettings:X.a.func};mt.displayName="PersonalizePopoverBodyEdit";var ft=mt,gt=n(1288);const bt=e=>"RichTextLib.personalize.lite."+e,Ot={onEdit:X.a.func.isRequired,onRemove:X.a.func.isRequired};function yt(e){const{onEdit:t,onRemove:n}=e,r=[{iconName:J.c.EDIT,onClick:t},{iconName:J.c.REMOVE,onClick:n}];return Object(Ce.jsx)("div",{className:"animated-popover-preview",children:Object(Ce.jsx)(gt.a,{"data-test-id":"personalize-popover-body-lite",iconButtons:r,i18nKey:bt})})}yt.propTypes=Ot;yt.displayName="PersonalizePopoverBodyLite";var jt=yt;const vt=["mode","onModeChange","onEdit","onTokenRemove"],Ct={mode:X.a.oneOf(Object.values(J.d)),onModeChange:X.a.func.isRequired,onEdit:X.a.func.isRequired,onTokenRemove:X.a.func.isRequired};function xt(e){const{mode:t,onModeChange:n,onEdit:i,onTokenRemove:o}=e,a=Object(r.a)(e,vt),s=()=>{n(J.d.PREVIEW)},c=()=>{n(J.d.EDIT)},l=(...e)=>{s();i(...e)},u=e=>{e.key===J.b.ESCAPE&&s()};return Object(Ce.jsx)("div",{className:"animated-popover-body",onKeyDown:u,tabIndex:"-1",children:Object(Ce.jsx)(dt.CSSTransitionGroup,{className:"animated-transition",transitionName:"animated-popover",transitionEnterTimeout:100,transitionLeaveTimeout:100,children:t===J.d.PREVIEW?Object(Ce.jsx)("div",{children:Object(Ce.jsx)(jt,{onEdit:c,onRemove:o})},"personalize-popover-lite-container"):Object(Ce.jsx)("div",{children:Object(Ce.jsx)(ft,Object.assign({},a,{onInsert:l,onClose:s}))},"personalize-popover-edit-container")})})}xt.propTypes=Ct;xt.displayName="PersonalizePopoverBodyBranch";var Et=xt,Tt=n(2824),St=n(1289),It=n(1291),wt=n(1259);const _t=["editor","onInsert","onEdit","mode","onModeChange","onTokenRemove","eventKey"];function Nt(e){const{editor:t,onInsert:n,onEdit:i,mode:o,onModeChange:a,onTokenRemove:s,eventKey:c}=e,l=Object(r.a)(e,_t),[u,d]=Object(K.useState)(J.e.INSERT),{inlineTarget:p,setInlineTarget:h,initInlineTarget:m}=Object(Tt.a)(t,null),[f,g]=Object(K.useState)(),b=Object(K.useRef)(p),O=Object(K.useRef)(u);Object(K.useEffect)(()=>{b.current=p;O.current=u});const y=Object(K.useCallback)(({restoreSelection:e}={})=>{if(b.current){h(null,{restoreSelection:e});g()}},[h]),j=(...e)=>{y();n(...e)},v=(...e)=>{y();i(...e)},C=()=>{y();s(p)};Object(K.useEffect)(()=>{const e=()=>{if(b.current)y({restoreSelection:!0});else{d(J.e.INSERT);m()}};t.on("OpenPersonalizePopover",e);return()=>t.off("OpenPersonalizePopover",e)},[t,m,y]);Object(K.useEffect)(()=>{const e=({element:e})=>{if(e){if(!e.hasAttribute(wt.a)){a(J.d.PREVIEW);if(e!==b.current){h(null);d(J.e.EDIT);g(Object(M.e)(e));h(e)}}}else y()};t.on("hsNodeChange:"+c,e);return()=>t.off("hsNodeChange:"+c,e)},[t,h,y,a,c]);const x=u===J.e.INSERT;let E,T={};if(x){E=ut;T={onInsert:j,onClose:y}}else{E=Et;T={mode:o,onModeChange:a,onEdit:v,onTokenRemove:C}}return Object(Ce.jsx)(St.a,{editor:t,"data-test-id":"personalize-browser-popover",open:!!p,target:p,placement:"bottom",onRemove:y,animateOnToggle:!1,renderContent:()=>Object(Ce.jsx)(E,Object.assign({},l,T,{apiClient:t.settings.apiClient,cacheKey:t.id,property:f,tooltipClassName:"mce-token-tooltip"}))})}var At=Object(It.a)(Nt),Dt=n(1292),kt=n(1293);const Pt=["contextualNodeAttributes","menuItems"],Rt=Object($.a)("TinymcePlugins.hspersonalize"),Ft=(e,t,n,i)=>{if(i){const t=Object(kt.a)(e,"PersonalizationUpgradeButton","`PersonalizationUpgradeButton` codesplit component is required for the personalization upgrade point");o.a.canvas.addButton(e,D.P,{renderControl:()=>Object(Ce.jsx)(t,{children:Rt("button")})});return}const{apiClient:a}=e.settings,s=E(a),c=Object(N.a)(a,n),l={personalizeConfig:n,dropdownClassName:"mce-hubspot-menu",fetchProperties:Object(T.e)(s,!1,n),fetchPaths:c,fetchSiteSettings:b(a),fetchOwners:f(a),emailSettingsLink:`${e.settings.appUrl}${A.b.settings("email","personalization")}`,publishingSettingsLink:`${e.settings.appUrl}${A.b.settings("publishing")}/all-domains/personalization`},u=W(e,t),d=G(e,t),p=({isActive:t})=>{t||e.fire("OpenPersonalizePopover")},h=({element:t})=>!!t&&Object(M.i)(e,t);o.a.canvas.addButton(e,D.P,{renderControl:t=>{const n=Object(r.a)(t,Pt);return Object(Ce.jsx)(w.a,{title:Rt("tooltip.insert"),placement:"bottom",children:Object(Ce.jsx)(_.a,Object.assign({"data-test-id":"insert-personalization-button",use:"transparent",onClick:()=>{p({isActive:h({element:e.selection.getNode()})})}},n,{children:Rt("button")}))})}});const m=({element:t})=>!!t&&(Object(M.i)(e,t)&&t);o.a.canvas.addNodeChangeHandler(e,{eventKey:t,includeInlineTargets:!0,isActiveNodeHandler:m});o.a.canvas.addPopover(e,t,{renderPopover:n=>Object(Ce.jsx)(At,Object.assign({editor:e,onInsert:u,onEdit:d,eventKey:t,onTokenRemove:z(e)},l,n))});o.a.canvas.addPopover(e,t+"-tooltip",{renderPopover:t=>Object(Ce.jsx)(Dt.a,Object.assign({editor:e},t))})};var Lt=n(1284);n.d(t,"a",(function(){return Bt}));const Mt=["useAsUpgradePoint"],Bt=a.J;function Ut(e){const t=Object(Lt.c)(e,Bt),{useAsUpgradePoint:n}=t,i=Object(r.a)(t,Mt);Ft(e,Bt,i,n);if(!n){Object(Lt.a)(e,Bt);o.a.canvas.addIdleCallback(e,"[data-mce-property-category]",()=>I(e,i).then(t=>{Object(Lt.b)(e,()=>t)}))}}o.a.PluginManager.add(Bt,Ut)},,function(e,t,n){"use strict";var r=n(1096),i=n(30),o=n.n(i),a=n(27),s=n(40),c=n(59),l=n(9),u=n.n(l),d=n(1098);function p(e){return{type:d.v,payload:e}}var h=n(58),m=n(60),f=n(2783),g=n(245);const b=g.f[g.h.CONTACT_LIFECYCLE];var O=({dispatch:e})=>t=>n=>{const r=t(n);switch(r.type){case d.q:{const{status:t}=r;if(t!==g.o.SUCCEEDED)break;const{payload:n}=r;n.criteria.forEach(t=>{const n=t.parameters[b];n&&n.length&&e(Object(f.a)())});break}case d.r:{const{status:t}=r;if(t!==g.o.SUCCEEDED)break;const{payload:n}=r;n.forEach(t=>{t.criteria.forEach(t=>{const n=t.parameters[b];n&&n.length&&e(Object(f.a)())})});break}}return r},y=n(73),j=n(2784),v=n(2663),C=n(1101);const x=g.f[g.h.CONTACT_LIST];var E=({dispatch:e})=>t=>n=>{const r=t(n);switch(r.type){case d.q:{const{status:t}=r;if(t!==g.o.SUCCEEDED)break;const{payload:n}=r,i=[],o=[];n.criteria.forEach(e=>{const t=e.parameters;if(Object(C.b)(g.h.CONTACT_LIST,t)){const e=t[g.j];e&&e.length&&o.push(...e)}else{const e=t[x];e&&e.length&&i.push(...e)}});Object(y.uniq)(i).forEach(t=>e(Object(j.b)(t)));Object(y.uniq)(o).forEach(t=>e(Object(v.b)(t)));break}case d.r:{const{status:t}=r;if(t!==g.o.SUCCEEDED)break;const{payload:n}=r,i=[],o=[];n.forEach(e=>{e.criteria.forEach(e=>{const t=e.parameters;if(Object(C.b)(g.h.CONTACT_LIST,t)){const e=t[g.j];e&&e.length&&o.push(...e)}else{const e=t[x];e&&e.length&&i.push(...e)}})});Object(y.uniq)(i).forEach(t=>e(Object(j.b)(t)));Object(y.uniq)(o).forEach(t=>e(Object(v.b)(t)));break}}return r};function T(e,t){return()=>n=>r=>{if(!e||!r.meta||!r.meta[g.s])return n(r);const{action:i,meta:o,usageTrackerJsName:a}=r.meta[g.s],s=t(i,o);a&&(e.trackInteraction?e.trackInteraction(a,s):e.track(a,s));return n(r)}}function S(e,t){return()=>n=>r=>{e&&r.type.startsWith(d.a)&&!1!==r.relay&&setTimeout(()=>{e.dispatchAction(Object.assign({},r,{source:t}))},0);return n(r)}}function I(){return(e,t={})=>Object.assign({screen:"manager",action:e},t)}function w(e={gates:[],portal:{},user:{scopes:[]}},t){const{type:n,payload:r}=t;switch(n){case d.v:return r;default:return e}}const _=(e,t,n)=>{if(e[t]){const r=e[t].adGroups;r&&r[n]||(e[t].adGroups=Object.assign({},r,{[n]:{individualAds:{}}}))}else e[t]={adGroups:{[n]:{individualAds:{}}}};return e};function N(e={},t){const{type:n}=t;switch(n){case d.h:{const{status:n}=t;if(n!==g.o.SUCCEEDED)return e;const{payload:r}=t;return Object.assign({},r.results.reduce((e,t)=>{const{properties:n}=t,{hs_ad_account_id:r,hs_ad_campaign_id:i}=n,{value:o}=r,{value:a}=i,s=e[o],c=s?s.adCampaigns:{};return Object.assign({},e,{[o]:Object.assign({},s,{adCampaigns:Object.assign({},c,{[a]:Object.assign({},t)})})})},Object.assign({},e)))}case d.i:{const{status:n}=t;if(n!==g.o.SUCCEEDED)return e;const{payload:r}=t;return Object.assign({},r.results.reduce((e,t)=>{const{properties:n}=t,{hs_ad_group_id:r,hs_ad_account_id:i}=n,{value:o}=r,{value:a}=i,s=_(Object.assign({},e),a,o),c=s[a].adGroups[o];s[a].adGroups[o]=Object.assign({},c,t);return s},Object.assign({},e)))}case d.g:{const{status:n}=t;if(n!==g.o.SUCCEEDED)return e;const{payload:r}=t;return Object.assign({},r.results.reduce((e,t)=>{const{properties:n}=t,{hs_ad_id:r,hs_ad_account_id:i,hs_ad_group_id:o}=n,{value:a}=r,{value:s}=i,{value:c}=o,l=_(Object.assign({},e),s,c),u=l[s].adGroups[c].individualAds;l[s].adGroups[c].individualAds=Object.assign({},u,{[a]:t});return l},Object.assign({},e)))}default:return e}}function A(e={},t){const{type:n}=t;switch(n){case d.w:{const{meta:n}=t,{criterionId:r}=n;return Object.assign({},e,{[r]:g.o.UNINITIALIZED})}case d.h:case d.i:case d.g:{const{meta:n,status:r}=t,{criterionIds:i=[]}=n;return Object.assign({},e,i.reduce((e,t)=>{e[t]=r;return e},{}))}default:return e}}var D=Object(h.combineReducers)({byAccountId:N,fetchStatusById:A});function k(e={},t){const{type:n,status:r}=t;switch(n){case d.l:{if(r!==g.o.SUCCEEDED)return e;const{payload:n}=t;return Object.assign({},e,n.results.reduce((e,t)=>{const{properties:n}=t,{hs_saved_audience_id:r}=n,{value:i}=r;return Object.assign({},e,{[Number(i)]:t})},{}))}case d.p:{if(r!==g.o.SUCCEEDED)return e;const{payload:n}=t,{results:i}=n,o=i[0],{properties:a}=o,{hs_saved_audience_id:s}=a,{value:c}=s;return Object.assign({},e,{[Number(c)]:o})}default:return e}}function P(e={},t){const{type:n,status:r,meta:i}=t;switch(n){case d.l:{if(r!==g.o.SUCCEEDED)return e;const{payload:n}=t;return Object.assign({},e,n.results.reduce((e,t)=>{const{properties:n}=t,{hs_saved_audience_id:i}=n,{value:o}=i;return Object.assign({},e,{[o]:r})},{}))}case d.p:{const{criterionId:t}=i;return Object.assign({},e,{[t]:r})}default:return e}}var R=Object(h.combineReducers)({audiences:k,audiencesFetchStatus:P});function F(e=[],t){const{status:n,type:r}=t;switch(r){case d.n:{if(n!==g.o.SUCCEEDED)return e;const{payload:r}=t;return r}default:return e}}function L(e={},t){const{status:n,type:r}=t;switch(r){case d.n:{if(n!==g.o.SUCCEEDED)return e;const{payload:r}=t;return r.reduce((e,t)=>{const{stageId:n}=t;e[n]=t;return e},Object.assign({},e))}default:return e}}function M(e=g.o.UNINITIALIZED,t){const{status:n,type:r}=t;switch(r){case d.n:return n;default:return e}}var B=Object(h.combineReducers)({options:F,byStageId:L,fetchStatus:M});function U(e={},t){const{type:n,status:r}=t;switch(n){case d.j:{if(r!==g.o.SUCCEEDED)return e;const{payload:n}=t;return Object.assign({},e,n.lists.reduce((e,{list:t})=>Object.assign({},e,{[t.listId]:t}),{}))}case d.m:{if(r!==g.o.SUCCEEDED)return e;const{payload:n}=t,{listId:i}=n;return Object.assign({},e,{[i]:n})}default:return e}}function V(e={},t){const{meta:n,status:r,type:i}=t;switch(i){case d.j:{if(r!==g.o.SUCCEEDED)return e;const{payload:n}=t;return Object.assign({},e,n.lists.reduce((e,{list:t})=>Object.assign({},e,{[t.listId]:g.o.SUCCEEDED}),{}))}case d.m:{const{listId:t}=n;return Object.assign({},e,{[t]:r})}default:return e}}function H(e=g.o.UNINITIALIZED,t){const{status:n,type:r}=t;switch(r){case d.j:return n;default:return e}}function q(e={},t){const{type:n,status:r}=t;switch(n){case d.k:{if(r!==g.o.SUCCEEDED)return e;const{payload:n}=t;return Object.assign({},e,n.lists.reduce((e,t)=>Object.assign({},e,{[t.listId]:t}),{}))}case d.o:{if(r!==g.o.SUCCEEDED)return e;const{payload:n}=t,{listId:i}=n;return Object.assign({},e,{[i]:n})}default:return e}}function G(e={},t){const{meta:n,status:r,type:i}=t;switch(i){case d.k:{if(r!==g.o.SUCCEEDED)return e;const{payload:n}=t;return Object.assign({},e,n.lists.reduce((e,t)=>Object.assign({},e,{[t.listId]:g.o.SUCCEEDED}),{}))}case d.o:{const{listId:t}=n;return Object.assign({},e,{[t]:r})}default:return e}}function W(e=g.o.UNINITIALIZED,t){const{status:n,type:r}=t;switch(r){case d.k:return n;default:return e}}var z=Object(h.combineReducers)({byClsId:U,fetchAllClsListsRequestStatus:H,fetchStatusByClsId:V,byIlsId:q,fetchAllIlsListsRequestStatus:W,fetchStatusByIlsId:G});function $(e={},t){const{type:n}=t;switch(n){case d.e:case d.q:{const{status:n}=t;if(n!==g.o.SUCCEEDED)return e;const{payload:r}=t;return Object.assign({},e,r.criteria.reduce((e,t)=>Object.assign({},e,{[t.id]:t}),{}))}case d.r:{const{status:n}=t;if(n!==g.o.SUCCEEDED)return e;const{payload:r}=t;return r.reduce((e,t)=>{const{criteria:n}=t;if(!n.length)return e;n.forEach(t=>{e[t.id]=t});return e},Object.assign({},e))}case d.f:{const{status:n}=t;if(n!==g.o.SUCCEEDED)return e;const{payload:r}=t,i=r.reduce((e,t)=>{t.succeeded&&e.push(""+t.id);return e},[]);return Object(y.omit)(e,i)}case d.d:{const{status:n}=t;if(n!==g.o.SUCCEEDED)return e;const{payload:r}=t,{id:i}=r;return Object.assign({},e,{[i]:r})}case d.b:{const{meta:n,status:r}=t,{criteriaIds:i=[]}=n;return r!==g.o.SUCCEEDED?e:Object(y.omit)(e,i.map(e=>""+e))}case d.w:{const{meta:n,status:r}=t,{criterionId:i}=n;if(!e[i]||r!==g.o.SUCCEEDED)return e;const{payload:o}=t;return Object.assign({},e,{[i]:o})}default:return e}}var K=Object(h.combineReducers)({byId:$}),Y=n(1102);function X(e={},t){const{type:n}=t;switch(n){case d.q:{const{meta:n,status:r}=t,{definitionId:i}=n;return Object.assign({},e,{[i]:r})}case d.r:{const{meta:n,status:r}=t,{definitionIds:i}=n;return i.reduce((e,t)=>Object.assign({},e,{[t]:r}),Object.assign({},e))}case d.e:{const{status:n}=t;if(n!==g.o.SUCCEEDED)return e;const{id:r}=t.payload;return Object.assign({},e,{[r]:g.o.SUCCEEDED})}case d.u:{const{definitionId:n}=t.payload;return Object.assign({},e,{[n]:g.o.UNINITIALIZED})}default:return e}}function J(e={},t){const{type:n}=t;switch(n){case d.e:case d.q:{const{status:n}=t;if(n!==g.o.SUCCEEDED)return e;const{payload:r}=t,{id:i,criteria:o}=r,a=Object(Y.b)(o,"precedence");return Object.assign({},e,{[i]:Object.assign({},r,{criteria:a.map(e=>e.id)})})}case d.r:{const{status:n}=t;if(n!==g.o.SUCCEEDED)return e;const{payload:r}=t;return r.reduce((e,t)=>{const{id:n,criteria:r}=t,i=Object(Y.b)(r,"precedence");return Object.assign({},e,{[n]:Object.assign({},t,{criteria:i.map(e=>e.id)})})},Object.assign({},e))}case d.f:{const{meta:n,status:r}=t,{definitionId:i}=n;if(r!==g.o.SUCCEEDED)return e;const{payload:o}=t,a=e[i];return 0===(e=Object.assign({},e,{[i]:Object.assign({},a,{criteria:o.reduce((e,t)=>{t.succeeded||e.push(t.id);return e},[])})}))[i].criteria.length?Object(y.omit)(e,""+i):e}case d.d:{const{meta:n,status:r}=t,{definitionId:i}=n;if(!e[i]||r!==g.o.SUCCEEDED)return e;const{payload:o}=t,a=e[i],{criteria:s}=a,{id:c}=o;return Object.assign({},e,{[i]:Object.assign({},a,{criteria:[...s,c]})})}case d.b:{const{meta:n,status:r}=t,{definitionId:i,criteriaIds:o}=n;if(!e[i]||r!==g.o.SUCCEEDED)return e;const a=e[i],{criteria:s}=a;return Object.assign({},e,{[i]:Object.assign({},a,{criteria:s.filter(e=>o.indexOf(e)<0)})})}default:return e}}var Q=Object(h.combineReducers)({byId:J,fetchStatusById:X}),Z=(e={},t)=>{switch(t.type){case d.s:{const{meta:n,status:r}=t;if(r!==g.o.SUCCEEDED)return e;const{payload:i}=t,{attributes:o}=i,{attributeKey:a}=n,s=o.find(({key:e})=>e===a),c=!(!s||"true"!==s.value);return Object.assign({},e,{[a]:c})}case d.x:{const{meta:n,status:r,value:i}=t,{attributeKey:o}=n;return r!==g.o.SUCCEEDED?e:Object.assign({},e,{[o]:i})}default:return e}};var ee=Object(h.combineReducers)({auth:w,adSources:D,audiences:R,contactLifecycleStages:B,contactLists:z,criteria:K,definitions:Q,userAttributes:Z});const te=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||h.compose;function ne(e,{httpClient:t,usageTracker:n,eventBus:r}){const i=[m.a.withExtraArgument(t),S(r),T(n,I()),E,O];return te(Object(h.applyMiddleware)(...i))(h.createStore)(ee,e)}var re=n(615),ie=n(661),oe=Object(re.DragDropContext)(ie.a),ae=n(45);function se({httpClient:e,withDragDropContext:t=!1,usageTracker:n,eventBus:r}){const i=ne({},{httpClient:e,usageTracker:n,eventBus:r});r&&r.on("reduxAction",e=>{i.dispatch(Object.assign({},e,{relay:!1}))});u.a.debug("smartcontent")&&(window.SmartContentStore=i);class o extends s.Component{componentDidMount(){const{auth:e={gates:[],portal:{},user:{scopes:[]}}}=this.props;i.dispatch(p(e))}render(){const{children:e}=this.props;return Object(ae.jsx)(c.Provider,{store:i,children:e})}}o.dispatch=i.dispatch;return t?oe(o):o}n.d(t,"a",(function(){return le}));const ce=se({httpClient:o.a,usageTracker:r.a});function le(e){return Object(ae.jsx)(ce,Object.assign({},e,{auth:Object(a.userInfoSync)()}))}},function(e,t,n){"use strict";var r=n(40),i=n(59),o=n(99),a=n(279),s=n(282),c=n(2796),l=n(2741),u=n(2655),d=n(512),p=n(2794),h=n(434),m=n(520),f=n(2679),g=n(710),b=n(2712),O=n(696),y=n(490),j=n(24),v=n.n(j),C=n(73);const x=e=>`(?=.*${e}.*)`;function E(e){const t=e.replace(/[^a-zA-Z\s]/g,"").split(/\s+/).map(x).join("");return new RegExp(t,"i")}function T(e,...t){return e.test(t.join(" "))}var S=n(167);const I=(e,t=!1,n="")=>{const{googleFontOptions:r,systemFonts:i}=e,o=E(n),a=i.filter(e=>T(o,e.text));let s=0,c=[];for(;!Object(C.isEmpty)(r)&&a[s]&&a[s].text<r[0].text;){c.push(a[s]);s++}r.reduce((e,t,n)=>{const i=a[s],o=r[n-1];if(i&&i.text<t.text){if(o&&i.text>o.text){e.push(i);s++}if(!o){e.push(i);s++}}e.push(t);return e},c);!t&&a.length&&(c=c.concat(a.slice(s)));return c},w=e=>"ContentComponents.cmv2.fields.font."+e,_=e=>{const t=parseInt(e,10)||400;let n=Object(o.a)(w("weights."+t));e.includes("italic")&&(n=Object(o.a)(w("weights.italic"),{weight:n}));return n},N=e=>{const t={fontWeight:parseInt(e,10)||400};e.includes("italic")&&(t.fontStyle="italic");return t},A=(e=[])=>{if(!e.length)return"";const t="object"==typeof e[0]?e.map(e=>e.name):e,n=t.reduce((e,t)=>{e[t]=t;return e},{});for(const e of S.a)if(n[e])return e;return t[0]},D={},k={},P=(e,t)=>{if(!e)return;const n="https://fonts.googleapis.com/css2?family="+e.replace(/\s/g,"+");let r="";if(t&&!k[e]){k[e]=e;r=":wght@"+t.filter(e=>!e.includes("italic")).map(e=>parseInt(e,10)||400).join(";")}if(D[e]){if(r){document.querySelector(`link[href^="${n}"]`).setAttribute("href",`${n}${r}`)}return}D[e]=e;const i=document.createElement("link");i.setAttribute("href",`${n}${r}`);i.setAttribute("rel","stylesheet");document.getElementsByTagName("head")[0].appendChild(i)};var R=n(506),F=n(45);class L extends r.PureComponent{constructor(e){super(e);this.onSvgError=this.onSvgError.bind(this);this.state={useFallback:!1}}onSvgError(){const{font:e,variant:t}=this.props;v.a.captureMessage("Missing valid Google font SVG",{extra:{family:e.family,variant:t}});this.setState({useFallback:!0})}renderFallback(){const{font:e,variant:t}=this.props,{family:n}=e;P(n,e.variants);return t?Object(F.jsx)("span",{style:Object.assign({fontFamily:n},N(t)),children:_(t)}):Object(F.jsx)("span",{style:{fontFamily:n},children:n})}render(){const{font:e,variant:t}=this.props,{svgUrls:n={}}=e,r=t?n[t]:n.main;return this.state.useFallback||!r?this.renderFallback():Object(F.jsx)(R.a,{className:"google-font-svg",onError:this.onSvgError,src:"//"+r})}}var M=L,B=n(1148),U=n.n(B);class V extends r.Component{constructor(e){super(e);this.onSvgError=this.onSvgError.bind(this);this.state={useFallback:!1}}shouldComponentUpdate(e,t){return U()(this,e,t)}onSvgError(){const{font:e,variant:t}=this.props,{family:n}=e||{};v.a.captureMessage("Missing valid Custom font SVG",{extra:{family:n,variant:t}});this.setState({useFallback:!0})}renderFallback(){const{font:e,variant:t}=this.props,{family:n,styles:r={}}=e||{};return t?Object(F.jsx)("span",{style:Object.assign({fontFamily:n},r[t]),children:t}):Object(F.jsx)("span",{style:{fontFamily:n},children:n})}render(){const{font:e,variant:t}=this.props,{defaultSvgUrl:n,svgUrls:r={}}=e,i=t?r[t]:n;return this.state.useFallback||!i?this.renderFallback():Object(F.jsx)(R.a,{className:"google-font-svg",onError:this.onSvgError,src:i})}}var H=V;class q extends r.Component{constructor(e){super(e);this.onSvgError=()=>{const{font:e,variant:t}=this.props,{name:n}=e||{};v.a.captureMessage("Missing valid Custom font SVG",{extra:{name:n,variant:t}});this.setState({useFallback:!0})};this.state={useFallback:!1}}shouldComponentUpdate(e,t){return U()(this,e,t)}renderFallback(){const{font:e,variant:t}=this.props,{name:n}=e||{};return t?Object(F.jsx)("span",{children:t}):Object(F.jsx)("span",{style:{fontFamily:n},children:n})}render(){const{font:e,variant:t}=this.props,{defaultSvgUrl:n,variants:r=[]}=e;let i=n;if(t){const e=Object(C.findWhere)(r,{name:t});i=e&&e.svgUrl}return this.state.useFallback||!i?this.renderFallback():Object(F.jsx)(R.a,{className:"google-font-svg",onError:this.onSvgError,src:i})}}var G=q,W=n(288),z=n.n(W),$=n(485),K=n(456),Y=n(443),X=n(2758),J=n(66),Q=n(160),Z=n(1206),ee=n(1049);function te(e,...t){return Object(ee.a)(t).get("google-fonts/v1/families",{query:e})}function ne(e,...t){return Object(ee.a)(t).get("google-fonts/v1/families/"+e)}function re({family:e,path:t},...n){return Object(ee.a)(n).get("content/fonts/v1/by-asset-path/"+t,{query:{family:e}})}function ie(...e){return Object(ee.a)(e).get("/branding/v1/fonts-with-variants")}function oe(e,...t){return Object(ee.a)(t).get("branding/v1/fonts-with-variants/"+e)}function ae(e,...t){return Object(ee.a)(t).post("branding/v1/fonts-with-variants",{data:e})}function se(e,...t){return Object(ee.a)(t).put("branding/v1/fonts-with-variants/"+e.id,{data:e})}function ce(e,...t){return Object(ee.a)(t).delete("/branding/v1/fonts/"+e)}function le(e,...t){return Object(ee.a)(t).post("filemanager/api/v3/files/upload",{data:e,headers:{"content-type":!1}})}function ue(e,...t){return Object(ee.a)(t).get("filemanager/api/v3/files/"+e)}var de=n(64),pe=n(68);const he=Object(de.b)(pe.GOOGLE_FONTS_FETCH_FONTS,te),me=Object(de.b)(pe.GOOGLE_FONTS_FETCH_FONT,ne),fe=Object(de.b)(pe.GOOGLE_FONTS_FETCH_COMMON_FONTS,te),ge=Object(de.b)(pe.CUSTOM_FONTS_FETCH_FONTS,ie),be=Object(de.b)(pe.CUSTOM_FONTS_BY_ASSET_FETCH_FONTS,re),Oe=Object(de.b)(pe.CUSTOM_FONTS_BY_ASSET_FETCH_FONTS,re),ye=Object(de.b)(pe.CUSTOM_FONTS_FETCH_FONT,oe),je=Object(de.a)(pe.CUSTOM_FONTS_CREATE_FONT,ae),ve=e=>he(e),Ce=e=>me(e),xe=e=>fe(e),Ee=()=>({type:pe.GOOGLE_FONTS_CLEAR}),Te=e=>({type:pe.SELECT_GOOGLE_FONT,font:e}),Se=e=>({type:pe.SELECT_CUSTOM_FONT,font:e}),Ie=e=>ge({selectedFontName:e}),we=e=>be(e),_e=e=>Oe(e),Ne=e=>ye(e),Ae=e=>je(e),De=e=>t=>{t({type:pe.CUSTOM_FONTS_EDIT_FONT,data:e});return se(e).then(e=>{t({type:pe.CUSTOM_FONTS_EDIT_FONT,response:e})}).catch(e=>{t({type:pe.CUSTOM_FONTS_EDIT_FONT,error:e})})},ke=(e,t)=>n=>{n({type:pe.CUSTOM_FONTS_FILE_UPLOAD,fileName:t});return le(e).then(e=>{n({type:pe.CUSTOM_FONTS_FILE_UPLOAD,response:e,fileName:t})}).catch(e=>{n({type:pe.CUSTOM_FONTS_FILE_UPLOAD,error:e,fileName:t})})},Pe=(e,t)=>n=>{n({type:pe.CUSTOM_FONTS_FETCH_FILE,id:e,fileName:t});return ue(e).then(r=>{n({type:pe.CUSTOM_FONTS_FETCH_FILE,response:r,id:e,fileName:t})}).catch(r=>{n({type:pe.CUSTOM_FONTS_FETCH_FILE,error:r,id:e,fileName:t})})},Re=e=>t=>{t({type:pe.CUSTOM_FONTS_DELETE_FONT,id:e});return ce(e).then(n=>{t({type:pe.CUSTOM_FONTS_DELETE_FONT,response:n,id:e})}).catch(n=>{t({type:pe.CUSTOM_FONTS_DELETE_FONT,error:n,id:e})})},Fe=()=>e=>{e({type:pe.CUSTOM_FONTS_CLEAR_UPDATE_STATUS})};var Le=n(65);const Me=e=>e.resources.googleFonts.fonts,Be=(e,t)=>e.resources.googleFonts.customFontsByAsset[t.assetPath]||{},Ue=e=>e.resources.googleFonts.customFonts||{},Ve=e=>e.resources.googleFonts.selectedCustomFonts,He=e=>e.resources.googleFonts.selectedFonts,qe=e=>e.resources.googleFonts.commonFonts,Ge=Object(Le.a)([qe],e=>e.reduce((e,t)=>{e[t.family]=t;return e},{})),We=e=>e.resources.googleFonts.commonFontsRequestStatus,ze=Object(Le.a)([Me],e=>e&&Object.keys(e)?Object.keys(e).map(t=>{const n=e[t];return{fontSet:S.d.GOOGLE,text:n.family,value:n.family}}):[]),$e=Object(Le.a)([Be],e=>e&&Object.keys(e)?Object.keys(e).map(t=>{const n=e[t];return{fontSet:S.d.CUSTOM,text:n.family,value:n.family}}):[]),Ke=Object(Le.a)([Ue],e=>e?Object.keys(e).map(t=>{const n=e[t];return{fontSet:S.d.BRANDING,text:n.name,value:n.name}}):[]),Ye=(e,t)=>e.resources.googleFonts.customFontsByAssetRequestStatus[t.assetPath],Xe=e=>e.resources.googleFonts.customFontsRequestStatus,Je=e=>e.resources.googleFonts.customFontRequestStatus,Qe=e=>e.resources.googleFonts.createCustomFontRequestStatus,Ze=e=>e.resources.googleFonts.customFontToEdit,et=e=>e.resources.googleFonts.editCustomFontRequestStatus,tt=e=>e.resources.googleFonts.uploadCustomFontFileRequestStatus,nt=e=>e.resources.googleFonts.uploadedCustomFontFilesByName,rt=e=>e.resources.googleFonts.uploadedCustomFontFilesById,it=e=>e.resources.googleFonts.fetchCustomFontFileRequestStatus,ot=e=>e.resources.googleFonts.deleteCustomFontRequestStatus;var at=n(2634),st=n(4),ct=n(717),lt=n(723),ut=n(607),dt=n(1002),pt=n(1319),ht=n(508),mt=n(1191),ft=n(287),gt=n.n(ft),bt=n(281),Ot=n(699),yt=n(1190),jt=n(2754);const vt=Object.freeze({ADD:"ADD",EDIT:"EDIT",MANAGE:"MANAGE"}),Ct=["font/ttf","font/otf","application/font-woff","application/vnd.oasis.opendocument.formula-template"];var xt=n(724),Et=n(751),Tt=n(2654);const St=e=>{e.preventDefault();e.stopPropagation()},It=e=>"ContentComponents.cmv2.fields.font.modals.upload.add."+e,wt=gt.a.div.withConfig({displayName:"AddCustomFont__DropBoxContents",componentId:"sc-1rluhg5-0"})(["width:80%;margin:auto;"]),_t=gt.a.div.withConfig({displayName:"AddCustomFont__TextInputContainer",componentId:"sc-1rluhg5-1"})(["max-width:350px;"]),Nt=gt.a.div.withConfig({displayName:"AddCustomFont__DragContainer",componentId:"sc-1rluhg5-2"})(["& *{pointer-events:none;}& button{pointer-events:auto;}&.isHovered button{pointer-events:none;}"]),At=Object.freeze({DEFAULT:"default",ERROR:"error",HOVER:"hover",DONE:"default"}),Dt=e=>({customFonts:Ue(e)}),kt=Object(i.connect)(Dt);class Pt extends r.PureComponent{constructor(e){super(e);this.onNameChange=e=>{const{handleUpdate:t}=this.props;t({fontName:e.target.value})};this.handleDragEnter=()=>{const{fileDropState:e}=this.state;e!==At.HOVER&&this.setState({fileDropState:At.HOVER})};this.handleDragLeave=()=>{const{fileDropState:e}=this.state;e===At.HOVER&&this.setState({fileDropState:At.DEFAULT})};this.handleDrop=e=>{St(e);const{fileDropState:t}=this.state,{addFiles:n}=this.props,{dataTransfer:{files:r}}=e;if(t===At.HOVER&&e.dataTransfer.files[0]){n(r);this.setState({fileDropState:At.DONE})}else this.setState({fileDropState:At.ERROR})};this.onNext=()=>{const{customFonts:e,handleUpdate:t,setErrorMessage:n,fontName:r}=this.props;r&&Object.keys(e).includes(r)?n(It("error.fontMustHaveUniqueName")):t({page:vt.EDIT})};this.renderPageNext=()=>{const{fontName:e,fontFiles:t}=this.props,n=e&&t&&t.length;return Object(F.jsx)(Tt.a,{placement:"right",disabled:!!n,title:Object(F.jsx)(bt.a,{message:It("pagination.disabledTooltip")}),children:Object(F.jsx)(Y.a,{use:"primary",disabled:!n,onClick:()=>this.onNext(),"data-selenium":"font-upload-add-next-button",children:Object(F.jsx)(a.a,{message:It("pagination.next")})})})};this.renderCancel=()=>{const{customFonts:e,changePage:t}=this.props;return!!Object.keys(e).length&&Object(F.jsx)(Y.a,{use:"secondary",onClick:()=>t(vt.MANAGE),children:Object(F.jsx)(a.a,{message:It("pagination.cancel")})})};this.state={fileDropState:At.DEFAULT}}renderNameInput(){const{fontName:e}=this.props;return Object(F.jsx)(l.a,{label:Object(o.a)(It("form.name.label")),required:!0,children:Object(F.jsx)(_t,{children:Object(F.jsx)(ht.a,{name:"font-name",placeholder:Object(o.a)(It("form.name.placeholder")),onChange:this.onNameChange,value:e,"data-selenium":"font-upload-name-input"})})})}renderFileUploadDropArea(){const{fileDropState:e}=this.state,{addFiles:t}=this.props;return Object(F.jsx)(Nt,{className:e===At.HOVER?"isHovered":"",onDragOver:St,onDrop:this.handleDrop,onDragEnter:this.handleDragEnter,onDragLeave:this.handleDragLeave,children:Object(F.jsx)(mt.a,{size:"large",use:e,children:Object(F.jsxs)(wt,{children:[Object(F.jsx)(Ot.a,{size:"sm",multiple:!0,onChange:e=>t(e.target.files),accept:Ct,"data-selenium":"font-upload-files-input",children:Object(F.jsx)(a.a,{message:It("form.chooseFile.button")})}),Object(F.jsx)("p",{className:"m-top-3",children:Object(F.jsx)(a.a,{message:It("form.chooseFile."+(e===At.ERROR?"error":"description"))})})]})})})}renderFilesUploadedListing(){const{fontFiles:e,addFiles:t,removeFile:n}=this.props;return e&&Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(dt.a,{children:e.map((e,t)=>Object(F.jsx)(jt.a,{size:6,children:Object(F.jsx)(yt.a,{className:"m-bottom-2",fileName:e.fileName,fileInfo:e.fileSize&&st.a.formatSize(e.fileSize),size:"small",closeable:!0,onCloseClick:()=>n(t,e.fileName),"data-selenium":"font-upload-files-uploaded:"+e.fileName})},e.fileName))}),Object(F.jsxs)(Ot.a,{use:"transparent",multiple:!0,onChange:e=>t(e.target.files),accept:Ct,"data-selenium":"font-upload-files-input",children:[Object(F.jsx)(f.a,{name:"add"}),Object(F.jsx)(a.a,{message:It("form.chooseFile.addMoreFiles")})]})]})}renderFileUpload(){const{fontFiles:e}=this.props;return Object(F.jsx)("div",{className:"m-top-5",children:e&&e.length>0?this.renderFilesUploadedListing():this.renderFileUploadDropArea()})}render(){return Object(F.jsxs)(F.Fragment,{children:[Object(F.jsxs)(xt.a,{children:[Object(F.jsx)("p",{children:Object(F.jsx)(bt.a,{message:It("body")})}),Object(F.jsxs)("p",{children:[Object(F.jsx)(a.a,{message:It("bodySupport")}),Object(F.jsx)("br",{}),Object(F.jsx)(b.a,{href:"https://knowledge.hubspot.com/website-pages/use-fonts-in-hubspot#use-custom-fonts",external:!0,children:Object(F.jsx)(a.a,{message:It("linkLearnMore")})})]}),this.renderNameInput(),this.renderFileUpload(),Object(F.jsx)($.a,{children:Object(F.jsx)(a.a,{message:It("form.chooseFile.disclaimer")})})]}),Object(F.jsxs)(Et.a,{children:[this.renderPageNext(),this.renderCancel()]})]})}}var Rt=kt(Pt),Ft=n(352),Lt=n(324);const Mt=["100","100-italic","200","200-italic","300","300-italic","400","400-italic","500","500-italic","600","600-italic","700","700-italic","800","800-italic","900","900-italic"];var Bt=n(2765),Ut=n(1305),Vt=n(2734);const Ht=e=>"ContentComponents.cmv2.fields.font.modals.upload.edit."+e,qt=e=>({uploadFileRequestStatus:tt(e),uploadedFileManagerFilesByName:nt(e),uploadedFileManagerFilesById:rt(e),createCustomFontRequestStatus:Qe(e),editCustomFontRequestStatus:et(e),customFontFetchStatus:Je(e),fontToEdit:Ze(e),fetchCustomFontFileRequestStatus:it(e)}),Gt={uploadFile:ke,fetchFile:Pe,createCustomFont:Ae,editCustomFont:De,fetchCustomFont:Ne,clearUpdateRequestStatuses:Fe},Wt=Object(i.connect)(qt,Gt);class zt extends r.PureComponent{constructor(e){super(e);this.unpackageBrandingCustomFontData=e=>{const{variants:t}=e,n=[],r=[];t.forEach(e=>{e.files.forEach(t=>{const i=decodeURI(this.getFileNameFromUrl(t.file));n.push(Object.assign({},t,{fileName:i}));r.push({fileName:i,style:e.name})})});const i=Object.keys(this.fontStyleMap);r.sort((e,t)=>i.indexOf(e.style)-i.indexOf(t.style));return{fontName:e.name,fontFiles:n,fontStyles:r}};this.getFileNameFromUrl=e=>e.substring(e.lastIndexOf("/")+1);this.onNameChange=e=>{const{handleUpdate:t}=this.props;t({fontName:e.target.value})};this.onStylesChange=(e,t)=>{const{handleUpdate:n,fontStyles:r=[],fontId:i}=this.props,o=[...r];o.splice(e,1,{fileName:o[e].fileName,style:t});n({fontStyles:o,fontEdited:!!i})};this.addEmptyStyle=()=>{const{handleUpdate:e,fontStyles:t=[]}=this.props;e({fontStyles:[...t,{fontName:void 0,style:void 0}]})};this.onSaveFont=()=>{const{fontId:e,fontFilesUploaded:t,createCustomFont:n,editCustomFont:r,uploadFileRequestStatus:i,usageTracker:o}=this.props;this.setState({fontIsSaving:!0,fontSaveFailed:!1});const a=t&&t.filter(e=>i[e.name]!==J.SUCCEEDED&&e);if(a&&Object.keys(a).length)this.uploadFontFiles(a);else if(e){r(this.packageBrandingCustomFontData());o.track("ContentComponentsInteraction",{action:"custom-fonts-edit-font"})}else{n(this.packageBrandingCustomFontData());o.track("ContentComponentsInteraction",{action:"custom-fonts-create-font"})}};this.uploadFontFiles=e=>{const{uploadFile:t}=this.props;e.forEach(e=>{const n=new FormData;n.append("file",e);n.append("options",JSON.stringify({access:Bt.e}));t(n,e.name)})};this.renderFile=(e,t)=>{const{fontFiles:n,removeFile:r,addFiles:i}=this.props,{fileName:o}=e,s=n&&n.find(e=>e.fileName===o);return o?Object(F.jsx)(yt.a,{fileName:o,fileInfo:s&&s.fileSize&&st.a.formatSize(s.fileSize),size:"small",closeable:!0,onCloseClick:()=>r(t,o,!1),"data-selenium":"font-upload-files-uploaded:"+o}):Object(F.jsxs)(Ot.a,{onChange:e=>i(e.target.files,t),accept:Ct,"data-selenium":"font-upload-edit-file-upload-button",children:[Object(F.jsx)(f.a,{name:"upload"}),Object(F.jsx)(a.a,{message:Ht("uploadAFile")})]})};this.renderPrimaryButton=()=>{const{fontId:e,fontStyles:t}=this.props,{fontIsSaving:n,fontSaveFailed:r}=this.state,i=t&&t.filter(e=>e.fileName&&e.style),o=t&&i&&i.length===t.length;return Object(F.jsx)(Tt.a,{placement:"right",disabled:!!o,title:Object(F.jsx)(bt.a,{message:Ht("pagination.disabledTooltip")}),children:Object(F.jsx)(Ut.a,{use:"primary",disabled:!o,onClick:()=>this.onSaveFont(),loading:n,failed:r,"data-selenium":"font-upload-edit-next-button",children:Object(F.jsx)(a.a,{message:Ht("pagination."+(e?"save":"next"))})})})};this.renderSecondaryButton=()=>{const{fontId:e,changePage:t}=this.props;return Object(F.jsx)(Y.a,{use:"secondary",onClick:()=>t(e?vt.MANAGE:vt.ADD),children:Object(F.jsx)(a.a,{message:Ht("pagination."+(e?"cancel":"back"))})})};this.renderName=()=>{const{fontName:e}=this.props,{editingName:t}=this.state;return t?Object(F.jsx)(ht.a,{name:"font-name",placeholder:Object(o.a)(Ht("nameLabel")),onChange:this.onNameChange,value:e,"data-selenium":"font-upload-edit-name-input"}):Object(F.jsxs)(h.a,{children:[Object(F.jsx)(Ft.a,{children:e}),Object(F.jsx)($.a,{children:Object(F.jsx)(b.a,{onClick:()=>this.setState({editingName:!0}),className:"m-top-1 m-left-3","data-selenium":"font-upload-edit-name-button",children:Object(F.jsx)(a.a,{message:Ht("editNameLink")})})})]})};this.renderVariantRows=()=>{const{fontStyles:e,removeFile:t}=this.props;return e&&e.map((e,n)=>{const{fileName:r}=e;return Object(F.jsx)(l.a,{label:st.a.text(Ht("fontStyle"),{index:n+1}),children:Object(F.jsxs)(dt.a,{children:[Object(F.jsx)(jt.a,{size:5,"data-selenium":"font-upload-edit-style-row:"+(r||"empty"),children:Object(F.jsx)(u.a,{options:this.fontStyleOptions,placeholder:st.a.text(Ht("selectStyle")),onChange:e=>this.onStylesChange(n,e.target.value),value:e.style,"data-selenium":"font-upload-edit-style-select:"+(r||"empty")})}),Object(F.jsx)(jt.a,{size:6,children:this.renderFile(e,n)}),Object(F.jsx)(jt.a,{size:1,className:"align-center",children:Object(F.jsx)(g.a,{use:"transparent",onClick:()=>t(n,r,!0),"data-selenium":"font-upload-edit-delete-style-button:"+(r||"empty"),children:Object(F.jsx)(f.a,{name:"delete",size:22,color:Lt.FLINT})})})]})},r||"empty"+(n+1))})};this.fontStyleMap=Mt.reduce((e,t)=>Object.assign({},e,{[Object(o.a)(Ht("styleOptions."+t.replace("-","")))]:t}),{});this.state={}}componentDidMount(){const{clearUpdateRequestStatuses:e,fetchCustomFont:t,fontFiles:n,fontId:r,fontStyles:i,handleUpdate:o}=this.props;e();if(r)t(r);else{o({fontStyles:n&&n.map(e=>{const t=i&&i.find(t=>t.fileName===e.fileName);return{fileName:e.fileName,style:t&&t.style}})})}}get fontStyleOptions(){return Object.keys(this.fontStyleMap).map(e=>({value:e}))}componentDidUpdate(e){const{createCustomFont:t,createCustomFontRequestStatus:n,customFontFetchStatus:r,editCustomFont:i,editCustomFontRequestStatus:o,fetchCustomFontFileRequestStatus:a,fetchFile:s,fontFiles:c,fontFilesUploaded:l,fontId:u,fontToEdit:d,handleUpdate:p,setErrorMessage:h,uploadedFileManagerFilesById:m,uploadedFileManagerFilesByName:f,uploadFileRequestStatus:g,usageTracker:b}=this.props,{customFontFetchStatus:O,editCustomFontRequestStatus:y,createCustomFontRequestStatus:j,fontFiles:v,fetchCustomFontFileRequestStatus:C}=e;if(O===J.PENDING&&r===J.SUCCEEDED&&d&&d.id===u){p(this.unpackageBrandingCustomFontData(d))}!v&&c&&c.length&&c.forEach(e=>{s(e.fileId,e.fileName)});if(c&&c.length===Object.keys(a).length){const e=Object.keys(a).find(e=>a[e]!==J.SUCCEEDED),t=Object.keys(C).find(e=>C[e]!==J.SUCCEEDED);if(!e&&t){p({fontFiles:c.map(e=>{const t=m[e.fileId];return Object.assign({},e,{fileSize:t.size})})})}}const x=u&&o===(J.UNINITIALIZED||J.FAILED),E=!u&&n===(J.UNINITIALIZED||J.FAILED);if(l&&l.length===Object.keys(g).length&&(x||E)){const e=Object.values(g).find(e=>e!==J.SUCCEEDED);if(e){if(e===J.FAILED){h(Ht("error.fileUploadFail"));this.setState({fontIsSaving:!1,fontSaveFailed:!0})}}else{const e=c.map(e=>{const t=f[e.fileName];return t&&Object.assign({},e,{file:t.url,fileId:t.id,format:t.extension})});if(x){i(this.packageBrandingCustomFontData(e));b.track("ContentComponentsInteraction",{action:"custom-fonts-create-font"})}if(E){t(this.packageBrandingCustomFontData(e));b.track("ContentComponentsInteraction",{action:"custom-fonts-create-font"})}}}if(u&&o!==J.PENDING&&y===J.PENDING||!u&&n!==J.PENDING&&j===J.PENDING)if(u&&o===J.SUCCEEDED||!u&&n===J.SUCCEEDED)p({page:vt.MANAGE,fontName:void 0,fontFiles:void 0,fontFilesUploaded:void 0,fontStyles:void 0,fontAdded:!u});else{h(Ht("error.fontSaveFailGeneric"));this.setState({fontIsSaving:!1,fontSaveFailed:!0})}}packageBrandingCustomFontData(e){const{fontName:t,fontId:n,fontFiles:r=[],fontStyles:i}=this.props,o=(e||r).reduce((e,t)=>{const n=i&&i.find(e=>e.fileName===t.fileName),r=n&&n.style;if(r){const n=e.findIndex(e=>e.name===r);if(-1!==n){const r=e[n];e[n]=Object.assign({},r,{files:[...r.files,t]})}else e.push({files:[t],name:r,style:this.createStyleCSSString(r)})}return e},[]);return Object.assign({name:t,variants:o},n?{id:n}:{})}createStyleCSSString(e){const t=this.fontStyleMap[e].split("-"),n=t[1]&&"italic"===t[1];return`{"font-weight":${t[0]}${n?', "font-style":"italic"':""}}`}render(){const{fontId:e,fontToEdit:t,setErrorMessage:n,customFontFetchStatus:r}=this.props;if(e&&!t){if(r===(J.UNINITIALIZED&&J.PENDING))return Object(F.jsx)(Vt.a,{layout:"centered",className:"m-bottom-10"});r===J.FAILED&&n(Ht("error.fontEditFetchFail"))}return Object(F.jsxs)(F.Fragment,{children:[(!e||e&&t)&&Object(F.jsxs)(xt.a,{children:[Object(F.jsx)("p",{children:Object(F.jsx)(bt.a,{message:Ht("body")})}),Object(F.jsx)("p",{children:Object(F.jsx)(b.a,{href:"https://knowledge.hubspot.com/website-pages/use-fonts-in-hubspot#use-custom-fonts",external:!0,children:Object(F.jsx)(a.a,{message:Ht("linkLearnMore")})})}),this.renderName(),this.renderVariantRows(),Object(F.jsxs)(Y.a,{className:"m-top-5",use:"transparent",onClick:()=>this.addEmptyStyle(),"data-selenium":"font-upload-edit-add-style-button",children:[Object(F.jsx)(f.a,{name:"add"}),Object(F.jsx)(a.a,{message:Ht("addMoreFiles")})]})]}),Object(F.jsxs)(Et.a,{children:[this.renderPrimaryButton(),this.renderSecondaryButton()]})]})}}var $t=Wt(zt),Kt=n(283),Yt=n(2735),Xt=n(2739),Jt=n(2632);const Qt=e=>"ContentComponents.cmv2.fields.font.modals.upload.manage."+e,Zt="https://knowledge.hubspot.com/website-pages/use-fonts-in-hubspot#use-custom-fonts",en=e=>({customFonts:Ue(e),customFontsRequestStatus:Xe(e),deleteFontRequestStatus:ot(e)}),tn={fetchCustomFonts:Ie,deleteFont:Re},nn=Object(i.connect)(en,tn);class rn extends r.PureComponent{constructor(e){super(e);this.resetFontState=e=>{const{handleUpdate:t}=this.props;t(Object.assign({fontName:void 0,fontFiles:void 0,fontStyles:void 0,fontFilesUploaded:void 0,fontId:void 0,fontEdited:void 0,fontAdded:void 0},e&&{page:e}))};this.handleEditFont=e=>{const{changePage:t,handleUpdate:n}=this.props;n({fontId:e});t(vt.EDIT)};this.handleDeleteFont=e=>{const{deleteFont:t,usageTracker:n}=this.props;t(e).catch(e=>{setTimeout(()=>{throw e})});this.setState({fontIdToDelete:void 0});n.track("ContentComponentsInteraction",{action:"custom-fonts-delete-font"})};this.renderConfirmDeleteModal=e=>{const{customFonts:t}=this.props,n=Object.values(t).find(t=>t.id===e);return Object(F.jsx)(Jt.a,{confirmLabel:st.a.text(Qt("confirmDelete.confirmButton")),confirmUse:"danger",description:Object(F.jsx)(Kt.a,{message:Qt("confirmDelete.body_jsx"),options:{href:Zt,fontName:n.name},elements:{UILink:b.a,strong:"strong"}}),message:Object(F.jsx)(a.a,{message:Qt("confirmDelete.header")}),size:"auto",use:"danger",onConfirm:()=>this.handleDeleteFont(e),onReject:()=>this.setState({fontIdToDelete:void 0}),rejectLabel:"Cancel",confirmButtonProps:{className:"font-upload-manage-confirm-delete"}})};this.renderFont=e=>Object(F.jsxs)(h.a,{align:"center",className:"m-y-5",children:[Object(F.jsx)(f.a,{className:"m-right-3",name:"fontFile",size:32,color:Lt.FLINT}),Object(F.jsx)(Yt.a,{grow:1,children:Object(F.jsx)(Ft.a,{"data-selenium":"font-upload-manage-font-name:"+e.name,className:"m-bottom-1",children:e.name})}),Object(F.jsx)(Yt.a,{children:Object(F.jsx)(Xt.a,{buttonClassName:"m-x-6",buttonSize:"small",buttonText:st.a.text(Qt("actions")),"data-selenium":"font-upload-manage-dropdown:"+e.name,children:Object(F.jsxs)(K.a,{children:[Object(F.jsx)(Y.a,{onClick:()=>{this.handleEditFont(e.id)},"data-selenium":"font-upload-manage-edit-button:"+e.name,children:Object(F.jsx)(a.a,{message:Qt("edit")})}),Object(F.jsx)(Y.a,{onClick:()=>{this.setState({fontIdToDelete:e.id})},"data-selenium":"font-upload-manage-delete-button:"+e.name,children:Object(F.jsx)(a.a,{message:Qt("delete")})})]})})})]},"custom-font-"+e.id);this.renderFontsList=()=>{const{customFonts:e,customFontsRequestStatus:t,deleteFontRequestStatus:n}=this.props;return(t||n)===(J.UNINITIALIZED&&J.PENDING)?Object(F.jsx)(Vt.a,{layout:"centered"}):e&&Object.values(e).map(e=>this.renderFont(e))};this.renderDone=()=>{const{onCancel:e}=this.props;return Object(F.jsx)(Y.a,{use:"primary",onClick:()=>e(),children:Object(F.jsx)(a.a,{message:Qt("pagination.done")})})};this.renderAdd=()=>Object(F.jsx)(Y.a,{use:"secondary",onClick:()=>this.resetFontState(vt.ADD),children:Object(F.jsx)(a.a,{message:Qt("pagination.add")})});this.state={}}componentDidMount(){const{fetchCustomFonts:e}=this.props;e().catch(e=>{setTimeout(()=>{throw e})});this.resetFontState()}componentDidUpdate(e){const{deleteFontRequestStatus:t,fetchCustomFonts:n}=this.props,{deleteFontRequestStatus:r}=e;t===J.SUCCEEDED&&r!==J.SUCCEEDED&&n().catch(e=>{setTimeout(()=>{throw e})})}render(){const{customFontsRequestStatus:e,setErrorMessage:t,deleteFontRequestStatus:n}=this.props,{fontIdToDelete:r}=this.state;e===J.FAILED&&t(Qt("error.fontsFetchFail"));n===J.FAILED&&t(Qt("error.fontDeleteFail"));return Object(F.jsxs)(F.Fragment,{children:[Object(F.jsxs)(xt.a,{children:[Object(F.jsx)("p",{children:Object(F.jsx)(Kt.a,{message:Qt("body_jsx"),options:{href:Zt,external:!0},elements:{UILink:b.a,strong:"strong"}})}),this.renderFontsList()]}),Object(F.jsxs)(Et.a,{children:[this.renderDone(),this.renderAdd()]}),r&&this.renderConfirmDeleteModal(r)]})}}var on=nn(rn),an=n(67),sn=n(2760),cn=n(2592),ln=n(1318),un=n.n(ln);const dn=e=>"ContentComponents.cmv2.fields.font.modals.upload."+e;class pn extends r.PureComponent{constructor(e){super(e);this.onUpdate=e=>{e.errorMessage=void 0;this.setState(e)};this.changePage=e=>{this.setState({page:e,errorMessage:void 0})};this.addStyle=(e,t)=>{const{fontStyles:n=[]}=this.state,r=[...n];r[e]={fileName:t.name,style:n[e].style};return r};this.addFiles=(e,t)=>{if(e){const{fontFiles:n=[],fontFilesUploaded:r=[]}=this.state;let i;const o=n.map(e=>e.fileName),a=Object.values(e).filter(e=>{const t=o.includes(e.name);t&&(i=dn("error.noDuplicateFileNames"));!Ct.includes(e.type)&&(i=dn("error.fileTypeNotSupported"));return!t});if(!a.length){this.setState({errorMessage:i});return}const s=a?[...r].concat([...a]):r,c=Array.from(a).map(e=>({fileName:e.name,fileSize:e.size})),l=[...n].concat(c),u=!Object(an.c)(t)&&this.addStyle(t,a[0]);this.setState(Object.assign({fontFilesUploaded:s,fontFiles:l},u?{fontStyles:u}:{},{errorMessage:i}))}};this.removeStyle=(e,t,n)=>{const{fontStyles:r}=this.state;return r&&r.reduce((r,i,o)=>{t&&t===i.fileName?n||r.push({fileName:void 0,style:i.style}):(t||!t&&e!==o)&&r.push(i);return r},[])};this.removeFile=(e,t,n)=>{const{fontStyles:r,fontFiles:i,fontId:o,fontFilesUploaded:a}=this.state;if(n&&r&&r.length<=1){this.setState({errorMessage:dn("error.noEmptyStyles")});return}const s=i&&i.filter(e=>e.fileName!==t),c=a&&a.filter(e=>e.name!==t),l=this.removeStyle(e,t,n);this.setState(Object.assign({fontFilesUploaded:c,fontFiles:s},l&&{fontStyles:l},o&&{fontEdited:!0},{errorMessage:void 0}))};this.closeModal=()=>{const{onCancel:e}=this.props;this.tracker&&this.tracker.track("ContentComponentsInteraction",{action:"custom-fonts-upload-modal-closed"});e()};this.renderErrorMessage=e=>{const{page:t}=this.state;return Object(F.jsx)(O.a,{type:"danger",className:"m-left-10 m-right-10"+(t===vt.MANAGE?" m-top-5":""),children:Object(F.jsx)(a.a,{message:e})})};this.tracker=Object(cn.a)({events:un.a});this.state={page:e.openingPage||vt.MANAGE}}componentDidMount(){this.tracker&&this.tracker.track("ContentComponentsInteraction",{action:"custom-fonts-upload-modal-opened"})}render(){const{page:e,fontName:t,fontFiles:n,fontFilesUploaded:r,fontStyles:i,fontId:o,fontEdited:s,fontAdded:c,errorMessage:l}=this.state;return Object(F.jsxs)(sn.a,{onEsc:this.closeModal,"data-selenium":"font-upload-modal-panel",children:[Object(F.jsxs)(lt.a,{children:[Object(F.jsx)(ut.a,{children:Object(F.jsx)(a.a,{message:dn(vt[e].toLowerCase()+".header")})}),Object(F.jsx)(ct.a,{onClick:this.closeModal,"data-selenium":"font-upload-modal-close"})]}),e!==vt.MANAGE&&Object(F.jsx)(dt.a,{children:Object(F.jsx)(pt.a,{direction:"horizontal",stepIndex:Object.keys(vt).indexOf(e),stepNames:[st.a.text(dn("addFontStep")),st.a.text(dn("editFontStep"))],use:"compact",className:"m-top-6 m-bottom-4"})}),l&&this.renderErrorMessage(l),e===vt.ADD&&Object(F.jsx)(Rt,{changePage:this.changePage,handleUpdate:this.onUpdate,fontName:t,fontFiles:n,addFiles:this.addFiles,removeFile:this.removeFile,setErrorMessage:e=>this.setState({errorMessage:e})}),e===vt.EDIT&&Object(F.jsx)($t,{changePage:this.changePage,handleUpdate:this.onUpdate,fontName:t,fontFiles:n,fontFilesUploaded:r,fontStyles:i,addFiles:this.addFiles,removeFile:this.removeFile,fontId:o,fontEdited:s,setErrorMessage:e=>this.setState({errorMessage:e}),usageTracker:this.tracker}),e===vt.MANAGE&&Object(F.jsx)(on,{changePage:this.changePage,handleUpdate:this.onUpdate,onCancel:this.closeModal,fontAdded:c,setErrorMessage:e=>this.setState({errorMessage:e}),usageTracker:this.tracker})]})}}const hn=e=>"ContentComponents.cmv2.fields.font."+e,mn=(e,t)=>{if(void 0===t||!0===t)return e;if(Array.isArray(t))return t.reduce(mn,e);Array.isArray(t.options)||e.push(t);return mn(e,t.options)},fn=(e,t)=>{const{modulePath:n,themePath:r,childTheme:i}=t,o=n?i||n.replace(/^\/+/,""):r;return{assetPath:o,commonGoogleFontResults:qe(e),commonGoogleFonts:Ge(e),commonGoogleFontsRequestStatus:We(e),customFontByAssetOptions:$e(e,{assetPath:o}),customFontOptions:Ke(e),customFontsByAsset:Be(e,{assetPath:o}),customFontsByAssetRequestStatus:Ye(e,{assetPath:o}),customFonts:Ue(e),customFontsRequestStatus:Xe(e),googleFontOptions:ze(e),googleFonts:Me(e),isUngatedForCustomFontsUpload:at.b.isUngated("Cms:RenderBrandingFonts"),selectedCustomFonts:Ve(e),selectedGoogleFonts:He(e)}},gn={fetchCustomFontByAsset:_e,fetchCustomFont:Ne,fetchCustomFontsByAsset:we,fetchCustomFonts:Ie,fetchGoogleFont:Ce,fetchGoogleFonts:ve,clearGoogleFonts:Ee,selectCustomFont:Se,selectGoogleFont:Te,fetchCommonGoogleFonts:xe},bn=Object(i.connect)(fn,gn),On=Object.values(S.c||{}),yn=Object.values(S.h||{});class jn extends r.Component{constructor(e){super(e);this.getLimitedOptions=e=>{const{customFontByAssetOptions:t,customFontOptions:n,googleFontOptions:r,showCustomFonts:i=!0}=this.props,o=[...t,...n],a=[...i?o:[],...r,...this.systemFonts].reduce((e,t)=>Object.assign({},e,{[t.text]:t}),{});return e.reduce((e,t)=>{const n=a[t];return n?[...e,n]:e},[])};this.togglePreviewPointerEvents=e=>{if(!this.props.isUngatedForCustomFontsUpload)return;const t=document&&document.querySelector(".preview-iframe-wrapper");t&&(t.style.pointerEvents=e)};e.fontList&&(this.fontListArray=mn([],Object.values(e.fontList)));this.getFontListOption=this.getFontListOption.bind(this);this.loadOptions=this.loadOptions.bind(this);this.onFontSelect=this.onFontSelect.bind(this);this.renderDisplayFont=this.renderDisplayFont.bind(this);this.renderFontPickerOption=this.renderFontPickerOption.bind(this);this.renderFontPickerValue=this.renderFontPickerValue.bind(this);this.handleCancelCustomUpload=this.handleCancelCustomUpload.bind(this);this.handleCustomUploadClick=this.handleCustomUploadClick.bind(this);this.trackCustomFontSelect=this.trackCustomFontSelect.bind(this);this.debouncedLoadOptionsWithFontFetching=Object(C.debounce)(this.loadOptionsWithFontFetching,X.c);this.debouncedLoadLimitedOptionsWithFontFetching=Object(C.debounce)(this.loadLimitedOptionsWithFontFetching,X.c);this.state={input:"",customUploadModalOpen:!1}}componentDidMount(){const{assetPath:e,fetchCustomFontByAsset:t,fetchCustomFont:n,fetchCustomFonts:r,fetchGoogleFont:i,value:o}=this.props,{font:a,font_set:s,fontId:c}=o||{};if(a&&!On.includes(a)&&!yn.includes(a)){let o=a;if(this.fontListArray){const e=this.fontListArray.find(e=>e.value===a);o=e&&e.text||a}s===S.d.CUSTOM?t({family:a,path:e}).catch(e=>{throw e}):s===S.d.BRANDING?c?n(c).catch(e=>{throw e}):r(a).catch(e=>{throw e}):s===S.d.GOOGLE&&i(o).catch(e=>{throw e})}this.total=null;this.hasMore=!0}get seleniumKey(){return this.props.fieldKey.join(".")}get systemFonts(){return Object.keys(S.c).map(e=>({fontSet:S.d.DEFAULT,text:e,value:S.c[e]}))}get commonGoogleFontOptions(){const{commonGoogleFontResults:e}=this.props,t=e.map(e=>{const{family:t}=e;return{fontSet:S.d.GOOGLE,text:t,value:t}});return I({googleFontOptions:t,systemFonts:this.systemFonts})}get allGoogleFonts(){return Object.assign({},this.props.commonGoogleFonts,this.props.googleFonts,this.props.selectedGoogleFonts)}get defaultOptions(){const{value:e}=this.props,{font_set:t}=e||{};let n={};if(this.fontListArray)return this.fontListArray.map(this.getFontListOption);if(!On.includes(this.font)&&!yn.includes(this.font))return[{fontSet:t,text:this.font,value:this.font}];if(yn.includes(this.font)){n={text:Object.keys(S.h).find(e=>S.h[e]===this.font),value:this.font}}return[n,...this.systemFonts]}get font(){const{value:e}=this.props;return e&&e.font?e.font:null}trackCustomFontSelect(e,t){const{trackFieldAction:n}=this.props;n&&n("custom-fonts-select-font",{fontFamily:e,customFontType:t})}getFontListOption(e){const{selectedCustomFonts:t}=this.props;if(e.options)return e;let n;n=S.c[e.text]?S.d.DEFAULT:t[e.text]?S.d.CUSTOM:S.d.GOOGLE;return{fontSet:n,text:e.text,value:e.value}}getGroupedOptions(e){const{customFontByAssetOptions:t,customFontOptions:n,googleFontOptions:r,isUngatedForCustomFontsUpload:i,showCustomFonts:a=!0}=this.props,s=I({googleFontOptions:r,systemFonts:this.systemFonts},this.hasMore,e),c=t&&t.concat(n);let l=[];if(e&&e.length)l=s;else{l=[{text:Object(o.a)(hn("commonFonts")),options:this.commonGoogleFontOptions},{text:Object(o.a)(hn("allFonts")),options:s}];a&&l.unshift({text:Object(o.a)(hn("customFonts")),options:i?c:t})}return l}loadOptionsWithFontFetching(e,t,n){const{assetPath:r,clearGoogleFonts:i,commonGoogleFontsRequestStatus:o,fetchCommonGoogleFonts:a,fetchCustomFontsByAsset:s,fetchCustomFonts:c,fetchGoogleFonts:l,isUngatedForCustomFontsUpload:u}=this.props;let d=n.offset;if(e!==this.state.input){this.setState({input:e});i();d=0}const p=l({search:e,limit:X.f,offset:d}),h=s({path:r}),m=u&&c(),f=[p,h,o===J.UNINITIALIZED?a({common:!0}):Promise.resolve()];u&&f.push(m);Promise.all(f).then(([n])=>{const{total:r,hasMore:i}=n;this.total=r;this.hasMore=i;const o=this.getGroupedOptions(e);t(null,{options:o,pagination:{hasMore:i,offset:d+X.f,length:r}})}).catch(e=>{throw e})}loadLimitedOptionsWithFontFetching(e,t){const{assetPath:n,fetchCustomFontsByAsset:r,fetchCustomFonts:i,fetchGoogleFont:o}=this.props,a=r({path:n}),s=i();Promise.all([s,a]).then(([n])=>{const r=n.map(e=>e.name||e.family),i=Object(C.difference)(e,Object.keys(S.c),r);if(i.length){const n=i.map(e=>o(e));Promise.all(n).then(()=>{t(null,{options:this.getLimitedOptions(e)})}).catch(e=>{throw e})}else t(null,{options:this.getLimitedOptions(e)})}).catch(e=>{throw e})}loadOptions(e,t,n){const{assetPath:r,customFontsByAssetRequestStatus:i,customFontsRequestStatus:o,fontList:a,googleFontOptions:s,isEmailOrAnyType:c,isUngatedForCustomFontsUpload:l,limitedOptions:u}=this.props;if(this.fontListArray){t(null,{options:Object.values(a).reduce((e,t)=>{const{options:n}=t;Array.isArray(n)?e.push({text:t.text,options:n.map(this.getFontListOption)}):e.push(this.getFontListOption(t));return e},[])});return}if(c){t(null,{options:this.systemFonts});return}let d=n.offset;const p=e===this.state.input,h=Object.keys(s).length,m=!r||i===J.SUCCEEDED,f=o===J.SUCCEEDED,g=p&&!d&&h&&m;if(l?g&&f:g){d=h;t(null,u?{options:this.getLimitedOptions(u)}:{options:this.getGroupedOptions(e),pagination:{hasMore:this.hasMore,offset:d,length:this.total}})}else u?this.debouncedLoadLimitedOptionsWithFontFetching(u,t):this.debouncedLoadOptionsWithFontFetching(e,t,n)}onFontSelect({target:{value:e}}){const{customFontsByAsset:t,customFonts:n,fontList:r,onFontFamilyChange:i,selectCustomFont:o,selectGoogleFont:a}=this.props;let s={font:e,fallback:null,variant:null,font_set:S.d.DEFAULT};if(!r&&!On.includes(e)){const r=t[e],i=n[e];if(r){o(r);const{variants:e,family:t,fallback:n,styles:i={}}=r;this.trackCustomFontSelect(t,S.d.CUSTOM);const a=e[0];s={styles:i[a],variant:a,font:t,fallback:n,font_set:S.d.CUSTOM}}else if(i){o(i);const{variants:e,name:t,fallback:n,id:r}=i;this.trackCustomFontSelect(t,S.d.BRANDING);const a=e&&e[0];s={styles:a,variant:null==a?void 0:a.name,font:t,fallback:n,font_set:S.d.BRANDING,fontId:r}}else{const t=this.allGoogleFonts[e];a(t);const{variants:n,family:r,fallback:i}=t;s={styles:{},variant:A(n),font:r,fallback:i,font_set:S.d.GOOGLE}}}i(s)}handleCancelCustomUpload(){this.setState({customUploadModalOpen:!1});this.togglePreviewPointerEvents("auto")}handleCustomUploadClick(){this.setState({customUploadModalOpen:!0});this.togglePreviewPointerEvents("none")}renderDisplayFont(e){const{commonGoogleFonts:t,customFontsByAsset:n,customFonts:r,fontList:i,googleFonts:o,selectedCustomFonts:a,selectedGoogleFonts:s}=this.props,{buttonText:c,dropdownText:l,fontSet:u,text:d,value:p}=e;if(c||l)return c||l;const h=i?d:p;switch(u){case S.d.BRANDING:{const e=a[h]||r[h];return Object(F.jsx)(G,{font:e||{family:h}})}case S.d.CUSTOM:{const e=a[h]||n[h];return Object(F.jsx)(H,{font:e||{family:h}})}case S.d.GOOGLE:{const e=s[h]||t[h]||o[h];return Object(F.jsx)(M,{font:e||{family:h}})}case S.d.DEFAULT:{const e=S.c[d];return Object(F.jsx)("span",{style:{fontFamily:e},children:d})}default:return Object(F.jsx)("span",{style:{fontFamily:p},children:d||p})}}renderFontPickerOption(e){const{dropdownClassName:t,options:n,text:r,value:i}=e,o=Array.isArray(n),a=z()(t,o?"m-x-5 p-y-2":"truncate-text"),s=r||i;return Object(F.jsx)("span",{"data-selenium-option":s,"data-option-value":i,role:"option",children:Object(F.jsx)(Y.a,{className:a,tabIndex:-1,title:s,use:"unstyled",children:o?s:this.renderDisplayFont(e)})})}renderFontPickerValue(e){return Object(F.jsx)("span",{"data-option-value":e.value,role:"option",children:Object(F.jsx)("span",{"data-option-text":!0,children:this.renderDisplayFont(e)})})}renderFooterLinks(e,t){const{isUngatedForCustomFontsUpload:n,customFontsRequestStatus:r,themePath:i,limitedOptions:o}=this.props;return!o&&!e&&(n&&r===J.SUCCEEDED?Object(F.jsxs)(K.a,{childClassName:"m-top-2",firstChildClassName:"",children:[Object(F.jsx)($.a,{children:Object(F.jsx)(b.a,{external:!0,href:"https://fonts.google.com/",children:Object(F.jsx)(a.a,{message:hn("googleFontsLink")})})}),i&&Object(F.jsx)($.a,{children:Object(F.jsx)(b.a,{onClick:this.handleCustomUploadClick,"data-selenium":this.seleniumKey+":customUploadLink",children:Object(F.jsx)(a.a,{message:hn("uploadFont."+t.toLowerCase())})})})]}):Object(F.jsx)($.a,{children:Object(F.jsx)(b.a,{external:!0,href:"https://fonts.google.com/",children:Object(F.jsx)(a.a,{message:hn("googleFontsLink")})})}))}render(){const{error:e,value:t,readOnly:n,fontPickerProps:r,isEmailOrAnyType:i,isUngatedForCustomFontsUpload:a,fontList:s,useOnDark:c,customFonts:l,limitedOptions:u}=this.props,{customUploadModalOpen:d}=this.state,{font:p}=t||{},h=i||!!s,m=l&&Object.keys(l).length?vt.MANAGE:vt.ADD;return Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(Z.a,Object.assign({},r,{className:"cmv2-font-family-select","data-selenium":this.seleniumKey+":font",defaultOptions:this.defaultOptions,dropdownClassName:"cmv2-font-picker-dropdown",dropdownFooter:this.renderFooterLinks(h,m),error:yn.includes(p)||e,loadOptions:this.loadOptions,menuStyle:{maxHeight:325},onChange:this.onFontSelect,optionRenderer:this.renderFontPickerOption,placeholder:Object(o.a)(hn("defaultButtonText")),readOnly:n,resultsClassName:"cmv2-font-results",searchable:!u&&!h,type:Q.FONT,useOnDark:c,value:this.font,valueRenderer:this.renderFontPickerValue})),a&&d&&Object(F.jsx)(pn,{onCancel:this.handleCancelCustomUpload,openingPage:m})]})}}var vn=bn(jn),Cn=n(1133),xn=n(1180);const En=e=>"ContentComponents.cmv2.fields.font."+e,Tn=e=>({selectedCustomFonts:Ve(e),selectedGoogleFonts:He(e)}),Sn=Object(i.connect)(Tn),In=xn.a[Q.FONT],wn=Object.values(S.c||{}),_n=Object.keys(S.c||{}),Nn=Object.values(S.h||{});class An extends r.PureComponent{constructor(e){super(e);this.renderDisplayVariant=(e,t,n)=>{switch(e){case S.d.CUSTOM:return this.renderCustomFont(t,this.font,n);case S.d.BRANDING:return this.renderBrandingCustomFont(t,this.font,n.name);default:return this.renderGoogleFont(t,this.font,n)}};this.renderVariantText=(e,t)=>{switch(e){case S.d.CUSTOM:return t;case S.d.BRANDING:return t.name;default:return _(t)}};this.colorPickerRenderer=this.colorPickerRenderer.bind(this);this.fontSizeFormatter=this.fontSizeFormatter.bind(this);this.isStyleSelected=this.isStyleSelected.bind(this);this.onFieldChange=this.onFieldChange.bind(this);this.onFontColorChange=this.onFontColorChange.bind(this);this.onFontSizeChange=this.onFontSizeChange.bind(this);this.onFontSizeUnitChange=this.onFontSizeUnitChange.bind(this);this.onStyleChange=this.onStyleChange.bind(this);this.onVariantSelect=this.onVariantSelect.bind(this);this.setOldStyleIfAvailable=this.setOldStyleIfAvailable.bind(this);this.style_order=Mt.map(e=>Object(o.a)(En("modals.upload.edit.styleOptions."+e.replace("-",""))))}get seleniumKey(){const{fieldKey:e=[]}=this.props;return e.join(".")}get shouldNotShowSizeUnit(){const{isEmailOrAnyType:e,showSizeUnit:t=!1}=this.props;return e||!t||this.hiddenSubfields[In.size_unit]}get sizeUnitOptions(){return Object.keys(S.e).map(e=>({value:e,text:e}))}get size(){const{value:e={}}=this.props,{size:t}=e||{};return t&&"object"==typeof t?t.value||null:t||null}get sizeUnit(){const{value:e={}}=this.props,{size:t,size_unit:n}=e||{};return(t&&"object"==typeof t?t.units:n)||S.e.px}get hiddenSubfields(){const{visibility:e={}}=this.props;return e.hidden_subfields||{}}get font(){const{value:e={}}=this.props;return e&&e.font?e.font:null}get color(){const{value:e={}}=this.props;return e&&e.color?e.color:null}get styles(){const{value:e={}}=this.props;return e&&e.styles?e.styles:Object.assign({},S.b)}get stepSize(){const{value:e={}}=this.props,{size_unit:t}=e||{};return X.o[t]?X.p:X.a}onFieldChange(e){const{onFieldChange:t,value:n={}}=this.props;t(Object.assign({},n,e))}onFontSizeChange({target:{value:e}}){const{value:t={}}=this.props,{size:n}=t||{},r="object"==typeof n&&null!==n?{size:{value:e,units:this.sizeUnit}}:{size:e};this.onFieldChange(r)}onFontSizeUnitChange({target:{value:e}}){const{value:t={}}=this.props,{size:n}=t||{},r="object"==typeof n&&null!==n?{size:{value:this.size,units:e}}:{size:this.size,size_unit:e};this.onFieldChange(r)}onFontColorChange(e){this.onFieldChange({color:e.color})}setOldStyleIfAvailable(e,t,n){const{useLegacyStyles:r=!1}=this.props;(void 0!==e[t]||r)&&(e[t]=n)}onStyleChange(e){let t=this.styles;const n=this.isStyleSelected(e);this.setOldStyleIfAvailable(t,e,!n);switch(e){case S.f.UNDERLINE:t=Object.assign({},t,{"text-decoration":n?S.b["text-decoration"]:S.f.UNDERLINE});break;case S.f.BOLD:t=Object.assign({},t,{"font-weight":n?S.b["font-weight"]:S.f.BOLD});break;case S.f.ITALIC:t=Object.assign({},t,{"font-style":n?S.b["font-style"]:S.f.ITALIC})}this.onFieldChange({styles:t})}isStyleSelected(e){const t=this.styles;switch(e){case S.f.UNDERLINE:return!(t["text-decoration"]!==S.f.UNDERLINE&&!t.underline);case S.f.BOLD:return!(t["font-weight"]!==S.f.BOLD&&!t.bold);case S.f.ITALIC:return!(t["font-style"]!==S.f.ITALIC&&!t.italic);default:return!1}}onVariantSelect(e){this.onFieldChange({variant:e.target.value})}colorPickerRenderer(e){const{ColorPicker:t=c.a,colorPickerClassName:n=""}=this.props;return Object(F.jsx)("div",{className:"cmv2-color-field alpha--is-hidden",children:Object(F.jsx)(t,Object.assign({},e,{onChange:this.onFontColorChange,className:z()(n,e.className)}))})}fontSizeFormatter(e){const{isEmailOrAnyType:t,showSizeUnit:n=!1}=this.props;return e?!n||this.hiddenSubfields[In.size_unit]||t?`${e}${this.sizeUnit}`:e:Object(o.a)(En("fontSizeUnit.default"))}renderFontPicker(){const{childTheme:e,error:t=!1,fieldKey:n=[],fontList:r,FontFamilyPickerComponent:i=vn,fontPickerProps:o={},isEmailOrAnyType:a,limited_options:s,modulePath:c,readOnly:l,themePath:u,trackFieldAction:d,useOnDark:p,showCustomFonts:h=!0,value:m={}}=this.props;return this.hiddenSubfields[In.font]?null:Object(F.jsx)(i,{childTheme:e,error:t,fieldKey:n,fontList:r,fontPickerProps:o,isEmailOrAnyType:a,modulePath:c,onFontFamilyChange:this.onFieldChange,readOnly:l,themePath:u,trackFieldAction:d,useOnDark:p,value:m,showCustomFonts:h,limitedOptions:s})}renderFontSizePicker(){const{readOnly:e,fontSizeProps:t={},useOnDark:n}=this.props;return this.hiddenSubfields[In.size]?null:Object(F.jsx)(d.a,Object.assign({"aria-label":Object(o.a)(En("fontSizeUnit.default")),"data-selenium":this.seleniumKey+":size",className:"cmv2-font-size-input",formatter:this.fontSizeFormatter,onChange:this.onFontSizeChange,readOnly:e,size:3,stepSize:this.stepSize,use:n?"on-dark":"default",value:this.size||void 0},t))}renderFontSizeUnitPicker(){const{readOnly:e,useOnDark:t}=this.props;return this.shouldNotShowSizeUnit?null:Object(F.jsx)(l.a,{label:Object(F.jsx)(a.a,{message:En("fontSizeUnit.label")}),tooltip:Object(F.jsx)(a.a,{message:En("fontSizeUnit.tooltip")}),tooltipPlacement:"top left",children:Object(F.jsx)(u.a,{buttonUse:t?"form-on-dark":"form","data-selenium":this.seleniumKey+":unit",className:"cmv2-font-size-unit-select",value:this.sizeUnit,menuWidth:75,onChange:this.onFontSizeUnitChange,options:this.sizeUnitOptions,readOnly:e})})}renderFontColorPicker(){const{readOnly:e,colorInputProps:t={},useOnDark:n}=this.props;return this.hiddenSubfields[In.color]?null:Object(F.jsx)(p.a,Object.assign({ColorPicker:this.colorPickerRenderer,color:this.color,className:"m-right-2 p-top-2",readOnly:e,showInput:!1,use:n?"on-dark":"default",inputProps:{"data-selenium":this.seleniumKey+":color_text"},swatchProps:{"aria-label":`${Object(o.a)(En("colorLabel"))}${this.color?" "+this.color:""}`,"data-selenium":this.seleniumKey+":color_swatch","data-color":this.color}},t))}renderStyleButtons(){const{readOnly:e,buttonSize:t}=this.props;return Object(F.jsx)(m.a,{className:"cmv2-font-styles",children:Object.keys(S.f||{}).map(n=>{const r=S.f[n];return this.hiddenSubfields[In[r]]?null:Object(F.jsx)(g.a,{"aria-label":Object(o.a)(En("styles."+r)),active:this.isStyleSelected(r),"data-selenium":`${this.seleniumKey}:styles:${r}`,"data-selenium-active":this.isStyleSelected(r),disabled:e,onClick:()=>this.onStyleChange(r),size:t,tooltip:Object(F.jsx)(a.a,{message:En("styles."+r)}),children:Object(F.jsx)(f.a,{name:r})},r)})})}renderGoogleFont(e,t,n){const r=e||{family:t};return Object(F.jsx)(M,{font:r,variant:n})}renderCustomFont(e,t,n){const r=e||{family:t};return Object(F.jsx)(H,{font:r,variant:n})}renderBrandingCustomFont(e,t,n){const r=e||{family:t};return Object(F.jsx)(G,{font:r,variant:n})}renderVariants(){const{buttonSize:e,readOnly:t,selectedCustomFonts:n,selectedGoogleFonts:r,useOnDark:i,value:s={}}=this.props,{font_set:c}=s||{},l=c===S.d.CUSTOM||c===S.d.BRANDING?n[this.font]:r[this.font];if(!l)return this.renderStyleButtons();let d=s.variant||A(l.variants);d===S.g&&(d="regular");const p=l.variants.reduce((e,t)=>{if("Main"===t)return e;const n=this.renderDisplayVariant(c,l,t);e.push({value:c===S.d.BRANDING?t.name:t,text:this.renderVariantText(c,t),dropdownText:n,buttonText:n});return e},[]);let m=p;c===S.d.BRANDING&&(m=p.sort((e,t)=>this.style_order.indexOf(e.value)-this.style_order.indexOf(t.value)));return Object(F.jsxs)(h.a,{className:"cmv2-font-variants",children:[Object(F.jsx)(u.a,{"aria-label":Object(o.a)(En("variantSelectLabel")),buttonUse:i?"form-on-dark":"form",className:"cmv2-font-variant-select","data-selenium":this.seleniumKey+":variants",defaultValue:d,onChange:this.onVariantSelect,options:m,readOnly:t,searchable:!1,value:d}),!this.hiddenSubfields[In.underline]&&Object(F.jsx)(g.a,{"aria-label":Object(o.a)(En("styles.underline")),active:this.isStyleSelected("underline"),className:"m-left-2","data-selenium-active":this.isStyleSelected("underline"),"data-selenium":this.seleniumKey+":styles:underline",disabled:t,onClick:()=>this.onStyleChange(S.f.UNDERLINE),size:e,tooltip:Object(F.jsx)(a.a,{message:En("styles.underline")}),children:Object(F.jsx)(f.a,{name:"underline"})},"underline")]})}renderStylePicker(){return this.hiddenSubfields[In.styles]?null:!this.font||wn.includes(this.font)||_n.includes(this.font)?this.renderStyleButtons():this.renderVariants()}renderUnsupportedFontsAlert(){const{value:e={}}=this.props,{font:t}=e||{};if(!Nn.includes(t))return null;const n=Object.keys(S.h).find(e=>S.h[e]===t),r=Object(F.jsx)(b.a,{external:!0,href:"https://blog.hubspot.com/website/web-safe-html-css-fonts",children:Object(F.jsx)(a.a,{message:En("unsupportedFontLink")})});return Object(F.jsx)(O.a,{className:"m-top-2",type:"danger","aria-label":Object(o.a)(En("unsupportedFontErrorLabel")),children:Object(F.jsx)(s.a,{message:En("unsupportedFontErrorText"),options:{fontName:n,unsupportedFontLink:r}})})}renderLabel(){const{label:e}=this.props;return this.shouldNotShowSizeUnit?null:Object(F.jsx)(y.a,{className:"p-top-0",htmlFor:this.seleniumKey,children:"string"==typeof e?Object(F.jsx)(Cn.a,{label:e}):e})}render(){const{showFontFamilyPickerOnly:e=!1}=this.props;return e?this.renderFontPicker():Object(F.jsxs)(r.Fragment,{children:[Object(F.jsxs)(h.a,{className:"cmv2-font-picker",direction:"column",children:[Object(F.jsxs)(h.a,{align:"end",className:"cmv2-font-properties",children:[Object(F.jsxs)(h.a,{direction:"column",children:[this.renderLabel(),Object(F.jsxs)(h.a,{align:"stretch",className:"width-100",children:[this.renderFontPicker(),this.renderFontSizePicker()]})]}),this.renderFontSizeUnitPicker()]}),Object(F.jsxs)(h.a,{align:"stretch",className:"cmv2-font-properties",children:[this.renderFontColorPicker(),this.renderStylePicker()]})]}),this.renderUnsupportedFontsAlert()]})}}t.a=Sn(An)},function(e,t,n){"use strict";var r=n(2),i=n(41),o=n.n(i),a=n(40),s=n(287),c=n.n(s),l=n(1212),u=n.n(l),d=n(1224);const p={click:"onClick",dblclick:"onDoubleClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mousemove:"onMouseMove",mouseover:"onMouseOver",beforepaste:"onBeforePaste",paste:"onPaste",cut:"onCut",copy:"onCopy",selectionchange:"onSelectionChange",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",keydown:"onKeyDown",keypress:"onKeyPress",keyup:"onKeyUp",contextmenu:"onContextMenu",dragend:"onDragEnd",dragover:"onDragOver",draggesture:"onDragGesture",dragdrop:"onDragDrop",drop:"onDrop",drag:"onDrag",SetAttrib:"onSetAttrib",PreInit:"onPreInit",PostRender:"onPostRender",init:"onInit",deactivate:"onDeactivate",activate:"onActivate",NodeChange:"onNodeChange",BeforeExecCommand:"onBeforeExecCommand",ExecCommand:"onExecCommand",show:"onShow",hide:"onHide",ProgressState:"onProgressState",LoadContent:"onLoadContent",SaveContent:"onSaveContent",BeforeSetContent:"onBeforeSetContent",SetContent:"onSetContent",BeforeGetContent:"onBeforeGetContent",GetContent:"onGetContent",VisualAid:"onVisualAid",remove:"onRemove",submit:"onSubmit",reset:"onReset",BeforeAddUndo:"onBeforeAddUndo",AddUndo:"onAddUndo",AppUndo:"onAppUndo",AppRedo:"onAppRedo",BeforeBookmark:"onBeforeBookmark",change:"onChange",undo:"onUndo",redo:"onRedo",ClearUndos:"onClearUndos",ObjectSelected:"onObjectSelected",ObjectResizeStart:"onObjectResizeStart",ObjectResized:"onObjectResized",PreProcess:"onPreProcess",PostProcess:"onPostProcess",focus:"onFocus",blur:"onBlur",dirty:"onDirty",transformerAlert:"onTransformAlert",ToolbarAnimationEnd:"onToolbarAnimationEnd"},h="RichTextTinymce",m="PLACEHOLDER_TYPE_FOCUS",f="PLACEHOLDER_TYPE_CONTENT",g="Tinymce:AllowSetEmptyContent";function b(e){const t=Object(a.useRef)(e);Object(a.useEffect)(()=>{t.current=e},[e]);return t.current}const O=(e,t)=>t.config!==e.config||t.content!==e.content&&null===t.uniqueKey||null!==t.uniqueKey&&t.uniqueKey!==e.uniqueKey,y=(e,t,n)=>t.content!==e.content&&t.content!==n.getContent()&&null!==t.uniqueKey,j=(e,t)=>Array.isArray(e)&&e.includes(t),v={},C=e=>()=>{v[e.id]=!0},x=e=>t=>{v[e.id]||t.preventDefault();v[e.id]=!1},E=e=>{e.on("mousedown",C(e));e.on("mouseup",x(e),!0)},T={},S={reportInitializations:(e,t)=>{if(T[e]){T[e].count++;clearTimeout(T[e].alertCallback);if(T[e].count>10){setTimeout(()=>{throw new Error(`The editor [${e}] in app [${t}] might be initializing indefinitely. Check for memoization or configuration issues.`)});T[e].count=0}else T[e].alertCallback=setTimeout(()=>{const n=T[e].count;T[e].count=0;if(n>4)throw new Error(`The editor [${e}] in app [${t}] was initialized ${n} times. There may be a memoization or configuration issue.`)},3e3)}else T[e]={count:1,alertCallback:setTimeout(()=>{},3e3)}}};var I=n(324),w=n(288),_=n.n(w),N=n(2618),A=n(45);const D=["namespace"],k=c()(N.a).withConfig({displayName:"IframeToolbar__StyledToolbar",componentId:"sc-1yybya-0"})(["padding:0 8px;border-bottom:1px solid ",";"],I.BATTLESHIP);class P extends a.Component{constructor(){super();this.handleIframeClick=this.handleIframeClick.bind(this)}componentDidMount(){this.props.editor.on("click",this.handleIframeClick)}componentWillUnmount(){this.props.editor.off("click",this.handleIframeClick)}handleIframeClick(){this.props.editor.editorContainer.click()}render(){const e=this.props,{namespace:t}=e,n=Object(r.a)(e,D),i=_()("mce-toolbar",t);return Object(A.jsx)(k,Object.assign({},n,{className:i}))}}P.propTypes={editor:o.a.object.isRequired,namespace:o.a.string};var R=P,F=n(279),L=n(443),M=n(479),B=n(434),U=n(327);const V="hasSeenUnreadable";var H=n(453),q=n(2706);const G=e=>"RichTextLib.newFeatures."+e,W=c.a.div.withConfig({displayName:"NewFeatureShepherd__StyledHeader",componentId:"selps2-0"})(["font-weight:bold;-webkit-font-smoothing:antialiased;"]);function z(e){const{children:t,className:n,placement:r,width:i,header:o,body:a,getUserAttributes:s,setUserAttribute:c,settingsKey:l,shouldShow:u}=e,[d,p,h]=Object(q.a)(s,c,l,!0),m=u&&d&&!p;return Object(A.jsx)(H.a,{tabIndex:"-1","data-test-id":"new-feature-popover-"+l,className:n,use:"shepherd",placement:r,autoPlacement:"horiz",open:m,width:i,content:{header:Object(A.jsx)(W,{children:o}),body:a,footer:Object(A.jsx)(L.a,{onClick:()=>h(!0),use:"primary",children:Object(A.jsx)(F.a,{message:G("confirm")})})},children:t})}z.propTypes={children:o.a.node.isRequired,header:o.a.node.isRequired,body:o.a.node.isRequired,settingsKey:o.a.string.isRequired,getUserAttributes:o.a.func.isRequired,setUserAttribute:o.a.func.isRequired,shouldShow:o.a.bool,width:o.a.number,placement:o.a.string,className:o.a.string};z.defaultProps={width:350,shouldShow:!0};var $=z;const K=["children","isUnreadable"],Y=e=>"RichTextLib.newFeatures.unreadable."+e;function X(e){let{children:t,isUnreadable:n}=e,i=Object(r.a)(e,K);const o=Object(A.jsx)("h4",{children:Object(A.jsx)(F.a,{message:Y("header")})}),a=Object(A.jsx)(F.a,{message:Y("body")});return Object(A.jsx)($,Object.assign({},i,{settingsKey:V,placement:"top left",width:350,header:o,body:a,shouldShow:n,children:t}))}var J=n(1215),Q=n(2654),Z=n(2712);function ee(){return Object(A.jsx)(Q.a,{arrowSize:"small",placement:"bottom",use:"longform",title:Object(A.jsx)(F.a,{message:"tinymceThemes.customToolbar.helpLinkToolTip"}),children:Object(A.jsx)(Z.a,{children:Object(A.jsx)(F.a,{message:"tinymceThemes.customToolbar.helpLink"})})})}const te=e=>"tinymceThemes.unreadable."+e,ne=c.a.div.withConfig({displayName:"IframeFooter__UnreadableContainer",componentId:"sc-1k0kavc-0"})(["margin:5px 0 5px auto;"]),re=c.a.div.withConfig({displayName:"IframeFooter__MessageContainer",componentId:"sc-1k0kavc-1"})(["margin:5px 0;"]),ie=c()(M.a).withConfig({displayName:"IframeFooter__StyledHelpIcon",componentId:"sc-1k0kavc-2"})(["margin-left:10px;"]),oe=c()(B.a).withConfig({displayName:"IframeFooter__StyledFooter",componentId:"sc-1k0kavc-3"})(["border-top:1px solid ",";background-color:",";min-height:48px;display:flex;padding:0 8px;"],I.BATTLESHIP,I.GYPSUM),ae=e=>{const t=e.dom.select('span:not(.mce-token)[style*="color"]'),n=e.getBody().textContent.length;return Array.from(t).reduce((t,n)=>{const r=window.getComputedStyle(n),{color:i}=r,o=e.dom.getParent(n,e=>!!e.style.backgroundColor).style.backgroundColor;return!Object(U.a)(o,i)&&n.textContent?t+n.textContent.length:t},0)/n};function se({editor:e}){const[t,n]=Object(a.useState)(!1),[r,i]=Object(a.useState)(!1),o=Object(a.useRef)(t);Object(a.useEffect)(()=>{o.current=t},[t]);const{getUserAttributes:s,setUserAttribute:c}=Object(J.h)(["plugins","hscore","api"],e),l=e.getParam("enabledFeatures"),u=!e.getParam("enforceEnabledFeatures")&&l&&!!l.length,d=Object(a.useCallback)(()=>{const t=e.getBody(),r=!o.current;t.style.backgroundColor=r?I.PANTERA:I.OLAF;n(r)},[e]);Object(a.useEffect)(()=>{const t=e.getBody(),n=()=>{t.style.backgroundColor||(t.style.backgroundColor=I.OLAF);ae(e)>=.5&&setTimeout(()=>{i(!0)},500)},r=t=>{["hscolorapply","hscolorremove"].includes(t.command)&&e.once("nodeChange",()=>{if(o.current)return;ae(e)>=.5&&i(!0)})};t?n():e.on("init",n);e.on("ExecCommand",r);return()=>{e.off("ExecCommand",r)}},[e,d]);return Object(A.jsxs)(oe,{"data-test-id":"iframe-footer",align:"center",wrap:"wrap",children:[u&&Object(A.jsx)(re,{children:Object(A.jsx)(ee,{})}),Object(A.jsxs)(ne,{children:[Object(A.jsx)(X,{isUnreadable:r,getUserAttributes:s,setUserAttribute:c,children:Object(A.jsx)(L.a,{use:"tertiary-light",size:"small",onClick:d,children:Object(A.jsx)(F.a,{message:te("button."+(t?"turnOff":"turnOn"))})})}),Object(A.jsx)(ie,{title:Object(A.jsx)(F.a,{message:te("tooltip.body")}),tooltipPlacement:"top left",tooltipProps:{use:"longform",headingText:Object(A.jsx)(F.a,{message:te("tooltip.header")})}})]})]})}var ce=n(1225),le=n(1223);class ue extends a.Component{static getDerivedStateFromError(){return{hasError:!0}}constructor(e){super(e);this.state={hasError:!1}}componentDidCatch(e,t){window.newrelic&&window.newrelic.noticeError&&window.newrelic.noticeError(e,{[h]:!0});console.error(e);console.info(t.componentStack)}render(){return this.state.hasError?null:this.props.children}}let de=0;class pe extends a.PureComponent{static getDerivedStateFromError(){return{hasError:!0}}constructor(e){super(e);this.state={hasError:!1}}componentDidCatch(e,t){console.error(e);console.info(t.componentStack)}render(){const{editor:e}=this.props;return this.state.hasError?null:Object(A.jsx)(a.Fragment,{children:e.popovers&&Object.keys(e.popovers).map(t=>e.popovers[t].renderPopover({key:"mce-hubspot-popover-"+ ++de}))})}}const he=c.a.div.withConfig({displayName:"TinymceIframe__EditorContainer",componentId:"sc-5owooc-0"})(["border:1px solid ",";position:'relative';.tox-edit-area__iframe{height:100%;width:100%;display:block;}"],I.BATTLESHIP),me=()=>{},fe=({initialized:e,editor:t,content:n,className:r,id:i,readOnly:o,hasToolbar:a,"data-onboarding":s,"data-test-id":c})=>{const l=e&&a;return Object(A.jsx)(ue,{children:Object(A.jsxs)(he,{role:"application",tabIndex:"-1",className:"tinymce-editor-container","data-onboarding":s,"data-test-id":c,children:[l&&Object(A.jsx)(R,{disabled:o,editor:t,toolbar:t.settings.canvasToolbar,showToolbarShepherd:t.settings[le.b],namespace:Object(ce.a)(t),shepherdClassName:"mce-shepherd"}),Object(A.jsx)("textarea",{id:i,className:r,style:{visibility:"hidden"},value:n,onChange:me}),l&&t.getParam("useDarkBackground")&&Object(A.jsx)(se,{editor:t}),e&&Object(A.jsx)(pe,{editor:t})]})})};fe.defaultProps={hasToolbar:!0};fe.propTypes={initialized:o.a.bool.isRequired,hasToolbar:o.a.bool,editor:o.a.object,content:o.a.string,className:o.a.string,id:o.a.string,readOnly:o.a.bool,"data-onboarding":o.a.string,"data-test-id":o.a.string};var ge=fe;let be=0;const Oe=()=>be++;function ye(){const e=Object(a.useRef)(null);null===e.current&&(e.current=Oe());return e.current}const je=["$minHeight","$maxHeight"],ve=c()(e=>{const t=Object(r.a)(e,je);return Object(A.jsx)("div",Object.assign({},t))}).withConfig({displayName:"TinymceInline__TinyMCEContainer",componentId:"pq50zu-0"})([""," ",";"],({$minHeight:e})=>e&&`min-height: ${e}px !important;`,({$maxHeight:e})=>e&&`max-height: ${e}px !important; overflow-y: auto;`);var Ce=({className:e,minHeight:t,maxHeight:n,uniqueKey:r,target:i,id:o,content:s,editor:c,initialized:l,config:u,"data-test-id":d,"data-onboarding":p})=>{const h=i&&u.hsInpage,m=ye();Object(a.useLayoutEffect)(()=>{l&&!h&&c.setContent(s)},[l,s,c,h]);if(i)return null;const f=u.hsInpage?{}:{translate:"no"};return Object(A.jsx)(ve,Object.assign({id:o,className:e,"data-test-id":d,"data-onboarding":p,$minHeight:t,$maxHeight:n},f),r||m)};const xe={READONLY:"readonly",DESIGN:"design"},Ee={NOT_STARTED:"not_started",IN_PROGRESS:"in_progress",FINISHED:"finished"};let Te=1;const Se=()=>{const e="react-tinymce-"+Te;Te++;return e};let Ie=1;const we=()=>{const e=`${Ee.NOT_STARTED}_${Ie}`;Ie++;return e},_e=e=>t=>{const n=Object(a.useRef)(null);return Object(A.jsx)(e,Object.assign({editorRef:n},t))},Ne=e=>Object.keys(p).map(t=>({mceEventName:t,handler:e[p[t]]})),Ae=(e,t)=>{const n=t.editorRef.current;return!(!n||!n.hasFocus()&&!Object(d.b)(document.activeElement)||t.readOnly)||!O(e,t)&&!y(e,t,n)&&e.readOnly===t.readOnly},De=Object(a.memo)(e=>{const{config:t,uniqueKey:n,content:r,readOnly:i,target:o,className:s,connectDropTarget:c,tinyMceRef:l,editorRef:d,placeholder:p,minHeight:h,maxHeight:m,"data-onboarding":f,"data-test-id":v}=e,[C,x]=Object(a.useState)(()=>we()),T=Object(a.useRef)(C),I=Object(a.useRef)(Se()),w=Object(a.useRef)(r),_=b(t),N=b(n),D=b(r),k=Ne(e),P=!(!d.current||!d.current.getParam("canvasToolbar")),R=Object(a.useCallback)(()=>{const e=o?void 0:"#"+I.current,n=t.setup;w.current=r;S.reportInitializations(I.current,t.hsPlugins&&t.hsPlugins.appName);T.current!==Ee.IN_PROGRESS&&x(Ee.IN_PROGRESS);const a=e=>{d.current=e;l({editor:e});E(e);e.on("init",()=>{j(t.gates,g)?null!=w.current&&e.setContent(w.current):w.current&&e.setContent(w.current);i&&e.setMode(xe.READONLY);x(Ee.FINISHED)});k.forEach(({mceEventName:t,handler:n})=>{"function"==typeof n&&e.on(t,t=>{n(t,e)})});"function"==typeof n&&n(e)};u.a.init(Object.assign({},t,{placeholder:p,selector:e,target:o,setup:a}))},[t,i,o,l,d,k,r,p]),F=Object(a.useCallback)(()=>{d.current&&d.current.remove();x(we())},[d]);Object(a.useEffect)(()=>{T.current=C;C!==Ee.FINISHED&&R()},[R,C]);Object(a.useEffect)(()=>{d.current&&C===Ee.FINISHED&&d.current.setMode(i?xe.READONLY:xe.DESIGN)},[d,C,i]);Object(a.useEffect)(()=>{const e={config:_,content:D,uniqueKey:N},i={config:t,content:r,uniqueKey:n};if(d.current&&O(e,i)){console.warn(`[Reinitializing TinyMCE] Editor with id '${I.current}' was forced to reinitialize.\nIf this was not intended, please check that your 'config' is properly memoized or if you should be including a 'uniqueKey'.`);F()}else if(y(e,i,d.current)){d.current.setContent(r);w.current=r}},[_,t,N,n,D,r,F,d]);Object(a.useLayoutEffect)(()=>()=>{F()},[F]);const L=C===Ee.FINISHED;return t.inline?Object(A.jsx)(Ce,{className:s,minHeight:h,maxHeight:m,editor:d.current,config:t,content:w.current,uniqueKey:n,target:o,connectDropTarget:c,initialized:L,id:I.current,"data-onboarding":f,"data-test-id":v}):Object(A.jsx)(ge,{hasToolbar:P,readOnly:i,content:w.current,initialized:L,editor:d.current,className:s,id:I.current,"data-onboarding":f,"data-test-id":v})},Ae),ke={config:o.a.object,content:o.a.string,readOnly:o.a.bool,className:o.a.string,uniqueKey:o.a.string,target:o.a.instanceOf(Element),connectDropTarget:o.a.func,tinyMceRef:o.a.func,editorRef:o.a.object,placeholder:o.a.string,"data-onboarding":o.a.string,"data-test-id":o.a.string};Object.keys(p).forEach(e=>{ke[p[e]]=o.a.func});De.propTypes=ke;De.defaultProps={readOnly:!1,uniqueKey:null};var Pe=_e(De);Me.propTypes={renderPlaceholder:o.a.func.isRequired,target:o.a.instanceOf(Element).isRequired,rootRelative:o.a.bool};Me.defaultProps={rootRelative:!1};function Re(e){const t=e.getBoundingClientRect(),{height:n,width:r}=t,i=window.pageXOffset||document.documentElement.scrollLeft,o=window.pageYOffset||document.documentElement.scrollTop;return{top:t.top+o,left:t.left+i,height:n,width:r}}function Fe(e){return{top:e.offsetTop,left:e.offsetLeft,height:e.clientHeight,width:e.clientWidth}}const Le=e=>{const t=Object(a.useRef)(),n=Object(a.useRef)(),r=i=>{if(void 0!==n.current){const t=i-n.current;e(t)}n.current=i;t.current=requestAnimationFrame(r)};Object(a.useEffect)(()=>{t.current=requestAnimationFrame(r);return()=>cancelAnimationFrame(t.current)},[])};function Me({target:e,renderPlaceholder:t,rootRelative:n}){const[r,i]=Object(a.useState)(0),[o,s]=Object(a.useState)(0),[c,l]=Object(a.useState)(0),[u,d]=Object(a.useState)(0);Le(()=>{const{height:t,width:r,top:o,left:a}=n?Re(e):Fe(e);i(t);s(r);l(o);d(a)});if(!e||!t)return null;const p={top:c,left:u,width:o,height:r,position:"absolute",display:"flex",alignItems:"stretch"};return Object(A.jsx)("div",{style:p,children:t()})}const Be=["placeholderText","placeholderType","placeholderClassName","error","config","renderPlaceholder"],Ue=c.a.div.withConfig({displayName:"js__InlineWrapper",componentId:"sc-1cy2se7-0"})(["",";"],e=>e.$error&&`\n    .mce-content-body {\n      border-color: ${I.CANDY_APPLE};\n      box-shadow: 0 0 0 1px ${I.CANDY_APPLE};\n    }\n    `);class Ve extends a.Component{constructor(e){super(e);this.setPlaceholderMinHeight=()=>{this.props.target&&!this.props.config.min_height&&(this.state.showPlaceholder?this.props.target.style.minHeight="4rem":this.props.target.style.minHeight="")};this.handleInit=(e,t)=>{this.editor=t};this.handleFocus=(e,t)=>{this.setShowPlaceholder(t,!1);this.props.onFocus&&this.props.onFocus(e,t)};this.handleBlur=(e,t)=>{this.setShowPlaceholder(t,!0);this.props.onBlur&&this.props.onBlur(e,t)};this.handleKeyDown=e=>{this.props.isMultiline||13!==e.keyCode||e.preventDefault()};this.handleSetContent=(e,t)=>{t.hasFocus()||this.setShowPlaceholder(t,!0)};this.state={showPlaceholder:!1}}componentDidMount(){const e=Boolean((this.props.placeholderText||this.props.renderPlaceholder)&&!this.props.content);this.setState({showPlaceholder:e},this.setPlaceholderMinHeight)}setShowPlaceholder(e,t){const n=""===e.getContent()&&t;n!==this.state.showPlaceholder&&this.setState({showPlaceholder:n},this.setPlaceholderMinHeight)}render(){const e=this.props,{placeholderText:t,placeholderType:n,error:i,config:o,renderPlaceholder:s}=e,c=Object(r.a)(e,Be),{showPlaceholder:l}=this.state,u={};n===f&&t&&(u.placeholder=t);const d=o.inline&&!this.props.target?Object(A.jsx)(Ue,{$error:i,children:Object(A.jsx)(Pe,Object.assign({config:o},c,u,{onBlur:this.handleBlur,onFocus:this.handleFocus,onKeyDown:this.handleKeyDown,onInit:this.handleInit,onSetContent:this.handleSetContent}))}):Object(A.jsx)(Pe,Object.assign({config:o},c,u,{onBlur:this.handleBlur,onFocus:this.handleFocus,onKeyDown:this.handleKeyDown,onInit:this.handleInit,onSetContent:this.handleSetContent}));return this.props.target&&s?Object(A.jsxs)(a.Fragment,{children:[l&&Object(A.jsx)(Me,{rootRelative:!0,renderPlaceholder:s,target:c.target}),d]}):n===m&&s?Object(A.jsxs)(a.Fragment,{children:[Object(A.jsx)("div",{ref:e=>{this.tinyRoot=e},className:"react-tinymce-root",style:{position:"relative",outline:"none"},children:d}),l&&Object(A.jsx)(Me,{target:this.tinyRoot,renderPlaceholder:s})]}):d}}Ve.propTypes={isMultiline:o.a.bool,placeholderType:o.a.oneOf([m,f]),placeholderText:o.a.string,placeholderClassName:o.a.string,tinyMceRef:o.a.func,renderPlaceholder:o.a.func,onBlur:o.a.func,onFocus:o.a.func,content:o.a.string,config:o.a.object,target:o.a.object,error:o.a.bool};Ve.defaultProps={isMultiline:!0,tinyMceRef:()=>{},placeholderType:m};t.a=Ve},,function(e,t,n){"use strict";var r=n(245),i=n(40),o=n(59),a=n(279),s=n(2655),c=n(1112),l=n(2783),u=n(45);const d=e=>"smartcontentlib.components.input.ContactLifecycleStageSelect."+e,p=e=>({contactLifecycleFetchStatus:Object(c.a)(e),contactLifecycleStageOptions:Object(c.b)(e)}),h={fetchCustomLifecycleStages:l.a},m=Object(o.connect)(p,h);class f extends i.Component{componentDidMount(){const{fetchCustomLifecycleStages:e}=this.props;this.lifecycleStagesFetched||e().catch(e=>{throw e})}get lifecycleStagesFetched(){const{contactLifecycleFetchStatus:e}=this.props;return e===r.o.SUCCEEDED}render(){const{contactLifecycleStageOptions:e,multi:t=!0,onChange:n,value:r}=this.props,i=Object(u.jsx)(a.a,{message:d(this.lifecycleStagesFetched?"placeholder":"loading")});return Object(u.jsx)(s.a,{"data-test-id":"contact-lifecycle-stage-select",anchorType:"button",className:"contact-lifecycle-stage-select criterion-parameters-select",clearable:!0,defaultValue:r,disabled:!this.lifecycleStagesFetched,multi:t,onChange:n,options:e,placeholder:i})}}var g=m(f),b=n(73),O=n(2784),y=n(2663),j=n(1099),v=n(1100);const C=300;function x({multi:e=!0,onChange:t,value:n,isIlsRule:c}){const l=Object(o.useDispatch)(),d=c?v.f:j.f,p=Object(o.useSelector)(e=>d(e,{value:n})),h=Object(o.useSelector)(v.a),m=Object(o.useSelector)(j.e),f=c?h===r.o.PENDING:m===r.o.PENDING,g=Object(i.useMemo)(()=>Object(b.debounce)((e,t)=>{c?l(y.a(e,n)).then(e=>{const n=e.lists.map(e=>({text:e.name,value:e.listId}));t(null,{complete:!e.hasMore,options:n})}).catch(e=>{setTimeout(()=>{throw e})}):l(O.a(e,n)).then(e=>{const n=e.lists?e.lists.map(({list:e})=>({text:e.name,value:e.listId})):[];t(null,{complete:!e.hasMore,options:n})}).catch(e=>{setTimeout(()=>{throw e})})},C),[l,c,n]);return Object(u.jsx)(s.a,{"data-test-id":"contact-list-select criterion-parameters-select",anchorType:"button",className:"contact-list-select",clearable:!0,value:n,loadOptions:g,multi:e,onChange:t,options:p,placeholder:Object(u.jsx)(a.a,{message:"smartcontentlib.components.input.ContactListSelect.placeholder"}),isLoading:f})}var E=x,T=n(99),S=n(298),I=n(2),w=n(41),_=n.n(w),N=n(288),A=n.n(N),D=n(2813),k=n(4);const P=["className","validCountries","optionsFilter","multi","enableSelectAll"],R=e=>{const{className:t,validCountries:n,optionsFilter:r,multi:i,enableSelectAll:o}=e,a=Object(I.a)(e,P),c=n?Object(D.b)({validCountries:n,optionsFilter:r}):Object(D.a)({optionsFilter:r}),l=[{text:k.a.text("i18nAddon.selectAllOptions"),selectAll:!0,options:c}];return Object(u.jsx)(s.a,Object.assign({},a,{multi:o||i,anchorType:"button",className:A()("country-select-input",t),options:o?l:c}))};R.propTypes={className:_.a.string,optionsFilter:_.a.func,validCountries:_.a.array,enableSelectAll:_.a.bool};var F=R;const L=["ap","eu","uk"];class M extends i.PureComponent{constructor(e){super(e);this.getUpperCaseValue=this.getUpperCaseValue.bind(this);this.handleChange=this.handleChange.bind(this);this.validCountries=Object.keys(Object(T.a)("SharedI18nStrings.countryCodes")).map(e=>e.toLowerCase()).filter(e=>!L.includes(e))}getLowerCaseValue(e=this.props.value){const{multi:t=!0}=this.props;return e?t&&e.map?e.map(e=>e.toLowerCase()):e.toLowerCase():e}getUpperCaseValue(e=this.props.value){const{multi:t=!0}=this.props;return e?t&&e.map?e.map(e=>e.toUpperCase()):e.toUpperCase():e}handleChange(e){const{onChange:t}=this.props;if(t){const n=this.getUpperCaseValue(e.target.value);t(Object(S.a)(n))}}render(){const{clearable:e=!0,itemComponent:t,multi:n=!0,onSelectedOptionChange:r}=this.props;return Object(u.jsx)(F,{className:"smart-content-test-country-select-input criterion-parameters-select",clearable:e,"data-test-id":"country-select",defaultValue:this.getLowerCaseValue(),itemComponent:t,multi:n,onChange:this.handleChange,onSelectedOptionChange:r,placeholder:Object(u.jsx)(a.a,{message:"smartcontentlib.components.input.CountrySelect.placeholder"}),validCountries:this.validCountries})}}const B={DESKTOP:"desktop",MOBILE:"mobile",TABLET:"tablet"};class U extends i.PureComponent{getOptions(){return Object.keys(r.i).sort().map(e=>({text:Object(T.a)(`smartcontentcore.DeviceTypes.${e}.label`),value:e,icon:B[e]}))}render(){const{onChange:e,value:t}=this.props;return Object(u.jsx)(s.a,{"data-test-id":"device-type-select",className:"criterion-parameters-select",defaultValue:t,multi:!1,onChange:e,options:this.getOptions(),placeholder:Object(u.jsx)(a.a,{message:"smartcontentlib.components.input.DeviceTypeSelect.placeholder"})})}}var V=n(2814);function H(e){const{clearable:t=!0,itemComponent:n,multi:r=!0,onChange:i,onSelectedOptionChange:o,value:s}=e;return Object(u.jsx)(V.a,{"data-test-id":"language-select",className:"smart-content-test-language-select-input criterion-parameters-select",clearable:t,defaultValue:s,itemComponent:n,multi:r,onChange:i,onSelectedOptionChange:o,placeholder:Object(u.jsx)(a.a,{message:"smartcontentlib.components.input.LanguageSelect.placeholder"})})}var q=n(55),G=n(2741),W=n(508),z=n(30),$=n.n(z);function K({offset:e,limit:t,sort:n},r=$.a){return r.get("campaigns/v1/campaigns/paginated",{query:{offset:e,limit:t,sort:n}})}const Y=10,X=(e,t)=>{const n=e.map(({display_name:e})=>({text:e,value:e}));return t?[...t,...n]:n},J=({onChange:e,value:t})=>{const n=Object(i.useCallback)((e,t,n={offset:0})=>{const r=n&&n.offset||0;K({limit:Y,offset:r,sort:"DISPLAY_NAME"}).then(e=>{const i=e.results,o=X(i,n.loadedOptions);t(null,{options:o,pagination:{hasMore:e.hasMore,length:e.total,offset:r+Y,loadedOptions:o}})}).catch(e=>{throw e})},[]);return Object(u.jsx)(s.a,{loadOptions:n,defaultValue:t,multi:!1,onChange:e,searchable:!1,placeholder:Object(u.jsx)(a.a,{message:"smartcontentcore.TrafficSourceTypes.OTHER_CAMPAIGNS.default"})})};var Q=Object(i.memo)(J);const Z={FACEBOOK:"socialFacebook",TWITTER:"socialTwitter",LINKEDIN:"socialLinkedin",GOOGLEPLUS:"socialGoogleplus"};class ee extends i.PureComponent{getOptions(){return Object.keys(r.r).map(e=>({text:Object(T.a)(`smartcontentcore.SocialMediaTypes.${e}.label`),value:e,icon:Z[e]}))}render(){const{onChange:e,value:t}=this.props;return Object(u.jsx)(s.a,{defaultValue:t,multi:!1,onChange:e,options:this.getOptions(),placeholder:Object(u.jsx)(a.a,{message:"smartcontentcore.TrafficSourceTypes.SOCIAL_MEDIA.default"})})}}const te=r.f[r.h.TRAFFIC_SOURCE],ne=[r.x.ORGANIC_SEARCH,r.x.REFERRALS,r.x.SOCIAL_MEDIA,r.x.EMAIL_MARKETING,r.x.PAID_SEARCH,r.x.DIRECT_TRAFFIC,r.x.OTHER_CAMPAIGNS],re=Object(b.memoize)((e,t)=>`smartcontentcore.TrafficSourceTypes.${e}.${t}`,(e,t)=>`${e}:${t}`);class ie extends i.PureComponent{constructor(e){super(e);this.getSourceTypeOptions=this.getSourceTypeOptions.bind(this);this.getSelectedSourceType=this.getSelectedSourceType.bind(this);this.getSelectedSourceTypeRule=this.getSelectedSourceTypeRule.bind(this);this.handleSourceRulesChange=this.handleSourceRulesChange.bind(this);this.handleSourceRulesClear=this.handleSourceRulesClear.bind(this);this.handleSourceTypeChange=this.handleSourceTypeChange.bind(this);this.renderSelectedSourceTypeControl=this.renderSelectedSourceTypeControl.bind(this);this.renderSourceTypeInput=this.renderSourceTypeInput.bind(this)}getTranslationKey(e){return"smartcontentlib.components.input.TrafficSourceTypeInputs."+e}getSourceTypeOptions(){return ne.map(e=>({text:Object(T.a)(re(e,"label")),value:e,help:Object(T.a)(re(e,"helpText"))}))}getSelectedSourceType(){const{parameters:e={[te]:null,[r.u]:null}}=this.props;return e[te]}getSelectedSourceTypeRule(){const{parameters:e={[te]:null,[r.u]:null}}=this.props;return(e[r.u]||[])[0]}handleSourceRulesChange({target:{value:e}}){const{onParametersChange:t=q.a,parameters:n={[te]:null,[r.u]:null}}=this.props;let i;e&&(Object(b.isString)(e)?i=[e]:Object(b.isArray)(e)&&e.every(e=>Boolean(e))&&(i=e));t(Object.assign({},n,{[r.u]:i}))}handleSourceTypeChange(e){const{onParametersChange:t=q.a}=this.props;t({[te]:e.target.value})}handleSourceRulesClear(){this.handleSourceRulesChange({target:{value:void 0}})}renderReferralsInput(){return Object(u.jsx)(W.a,{"data-test-id":"traffic-source-referral-input",onChange:this.handleSourceRulesChange,placeholder:Object(T.a)(this.getTranslationKey(`sourceTypes.${r.x.REFERRALS}.placeholder`)),value:this.getSelectedSourceTypeRule()})}renderSocialMediaSelect(){return Object(u.jsx)(ee,{onChange:this.handleSourceRulesChange,value:this.getSelectedSourceTypeRule()})}renderCampaignSelect(e){return Object(u.jsx)(Q,{onChange:this.handleSourceRulesChange,value:this.getSelectedSourceTypeRule()},e)}renderSourceTypeInput(e){switch(e){case r.x.REFERRALS:return this.renderReferralsInput();case r.x.SOCIAL_MEDIA:return this.renderSocialMediaSelect();case r.x.EMAIL_MARKETING:case r.x.PAID_SEARCH:case r.x.OTHER_CAMPAIGNS:return this.renderCampaignSelect(e);default:return null}}renderSelectedSourceTypeControl(){const e=this.getSelectedSourceType();if(!e)return null;const t=this.renderSourceTypeInput(e);return t&&Object(u.jsx)(G.a,{className:"m-top-3",children:t})}render(){const e=this.getSelectedSourceType();return Object(u.jsxs)("div",{children:[Object(u.jsx)(G.a,{className:"p-top-0",children:Object(u.jsx)(s.a,{"data-test-id":"traffic-source-select",defaultValue:e,onChange:this.handleSourceTypeChange,options:this.getSourceTypeOptions(),placeholder:Object(u.jsx)(a.a,{message:this.getTranslationKey("sourceTypeSelect.placeholder")}),searchable:!1})}),this.renderSelectedSourceTypeControl()]})}}var oe=ie,ae=n(729),se=n(282),ce=n(2712),le=n(434);const ue="name",de="operation",pe="value",he=e=>"smartcontentlib.components.input.QueryParamInputs."+e;class me extends i.Component{constructor(e){super(e);this.onChange=this.onChange.bind(this);this.verifyNameAndValue=this.verifyNameAndValue.bind(this);this.state={invalidChars:[],isInvalidName:!1,isInvalidValue:!1}}componentDidMount(){this.verifyNameAndValue()}componentDidUpdate(e){const{parameters:t={}}=this.props,{parameters:n}=e,{name:r,value:i}=t||{},{name:o,value:a}=n||{};o===r&&a===i||this.verifyNameAndValue()}get queryParamOperationOptions(){return Object.keys(r.n).map(e=>({text:Object(T.a)(he("operations."+e)),value:e}))}getInvalidChars(e){const t={};return e.reduce((e,n)=>{if(!t[n]){t[n]=!0;e.push(Object(u.jsx)("strong",{children:`"${n}"`},n))}return e},[])}verifyNameAndValue(){const{parameters:e={}}=this.props,{name:t="",value:n=""}=e||{},i=t.match(r.m)||new Array,o=n.match(r.m)||[],a=i.concat(o);this.setState({invalidChars:this.getInvalidChars(a),isInvalidName:i.length>0,isInvalidValue:o.length>0})}onChange(e,t){const{onChange:n,parameters:r={}}=this.props;n(Object.assign({},r,{[e]:t}))}renderInvalidChars(){const{invalidChars:e}=this.state;return Object(u.jsx)(ae.a,{exclusive:!0,children:e})}render(){const{parameters:e={}}=this.props,{invalidChars:t,isInvalidName:n,isInvalidValue:r}=this.state,{name:i,operation:o,value:c}=e,l=n||r,d=l?"m-top-1":"",p=Object(u.jsx)(ce.a,{external:!0,href:"https://knowledge.hubspot.com/website-pages/create-and-manage-smart-content-rules#smart-rule-categories",children:Object(u.jsx)(a.a,{message:he("learnMore")})}),h=l&&Object(u.jsx)(se.a,{message:he("reservedCharErrorMessage"),options:{chars:this.renderInvalidChars(),count:t.length,learnMoreLink:p}});return Object(u.jsx)(G.a,{className:d,error:l,validationMessage:h,children:Object(u.jsxs)(le.a,{align:"center",children:[Object(u.jsx)(W.a,{className:"m-right-2",error:n,onChange:e=>this.onChange(ue,e.target.value),placeholder:Object(T.a)(he("keyPlaceholder")),value:i}),Object(u.jsx)(s.a,{className:"m-right-2",onChange:e=>this.onChange(de,e.target.value),options:this.queryParamOperationOptions,value:o}),Object(u.jsx)(W.a,{error:r,onChange:e=>this.onChange(pe,e.target.value),placeholder:Object(T.a)(he("valuePlaceholder")),value:c})]})})}}var fe=me,ge=n(287),be=n.n(ge),Oe=n(2696),ye=n(1108),je=n(2654),ve=n(324);const Ce=be.a.div.withConfig({displayName:"AdSourceSelect__NoResultsWrapper",componentId:"sc-766ie8-0"})(["color:",";"],ve.CALYPSO),xe=300,Ee=e=>"smartcontentlib.components.input.AdSourceSelect."+e,Te=e=>({adAccounts:Object(ye.a)(e),adCampaignOptions:Object(ye.c)(e)}),Se={fetchCampaignAdGroups:Oe.c,fetchAdsForAdGroup:Oe.b,fetchAdCampaigns:Oe.a},Ie=Object(o.connect)(Te,Se);class we extends i.PureComponent{constructor(e){super(e);this.onAdGroupChange=e=>{const{onChange:t}=this.props,{adSources:n}=this.value;t(Object.assign({},this.value,{adSources:e.target.value.length>1?n:[],adGroups:e.target.value}))};this.onAdCampaignChange=e=>{const{onChange:t}=this.props,{adGroups:n}=this.value;t(Object.assign({},this.value,{adGroups:e.target.value.length>1?n:[],adCampaigns:e.target.value}))};this.onAdSingletonChange=e=>{const{onChange:t}=this.props;t(Object.assign({},this.value,{adSources:e.target.value}))};this.renderNoResultsText=()=>Object(u.jsxs)(le.a,{direction:"column",children:[Object(u.jsx)(a.a,{className:"m-bottom-1",message:Ee("noOptionsAvailable")}),Object(u.jsx)(je.a,{placement:"bottom",title:Object(u.jsx)(a.a,{message:Ee("adsNotUpdatingInfo")}),children:Object(u.jsx)(Ce,{children:Object(u.jsx)(a.a,{message:Ee("adsNotUpdating")})})})]});this.renderAdCampaignSelect=()=>{const{adCampaignOptions:e}=this.props,{adCampaigns:t}=this.value;return Object(u.jsx)(s.a,{"data-test-id":"ad-source-select criterion-parameters-select",className:"m-y-1",anchorType:"button",clearable:!0,value:t,multi:!0,options:e,loadOptions:this.debouncedFetchAdCampaigns,onChange:this.onAdCampaignChange,noResultsText:this.renderNoResultsText(),placeholder:Object(u.jsx)(a.a,{message:Ee("adCampaignPlaceholder")})})};this.renderAdGroupSelect=()=>{const{adGroups:e}=this.value;return this.isAdGroupOptionVisible?Object(u.jsx)(s.a,{className:"m-left-0 m-y-1","data-test-id":"ad-source-select criterion-parameters-select",anchorType:"button",clearable:!0,value:e,loadOptions:this.debouncedFetchAdGroups,multi:!0,onChange:this.onAdGroupChange,noResultsText:this.renderNoResultsText(),placeholder:Object(u.jsx)(a.a,{message:Ee("adGroupPlaceholder")})}):null};this.renderIndivdualAdSelect=()=>{const{adSources:e}=this.value;return this.isAdSingletonOptionVisible?Object(u.jsx)(s.a,{anchorType:"button",clearable:!0,className:"m-left-0 m-y-1",value:e,loadOptions:this.debouncedFetchAds,multi:!0,onChange:this.onAdSingletonChange,noResultsText:this.renderNoResultsText(),placeholder:Object(u.jsx)(a.a,{message:Ee("adsPlaceholder")})}):null};this.handleFetchAdGroups=this.handleFetchAdGroups.bind(this);this.handleFetchAds=this.handleFetchAds.bind(this);this.handleFetchAdCampaigns=this.handleFetchAdCampaigns.bind(this);this.debouncedFetchAdGroups=Object(b.debounce)(this.handleFetchAdGroups,xe);this.debouncedFetchAdCampaigns=Object(b.debounce)(this.handleFetchAdCampaigns,xe);this.debouncedFetchAds=Object(b.debounce)(this.handleFetchAds,xe)}get value(){const{value:e}=this.props,{adCampaigns:t=[],adGroups:n=[],adSources:r=[]}=e;return{adCampaigns:t,adGroups:n,adSources:r}}get isAdGroupOptionVisible(){const{adCampaigns:e}=this.value;return!(e.length>1||0===e.length)}get isAdSingletonOptionVisible(){const{adGroups:e}=this.value;return!(e.length>1||0===e.length)&&this.isAdGroupOptionVisible}handleFetchAdCampaigns(e,t){const{adCampaigns:n}=this.value;this.props.fetchAdCampaigns(n,{searchValue:e}).then(e=>{const{results:n=[]}=e;t(null,{options:n.map(e=>{const{hs_ad_campaign_id:t,hs_name:n}=e.properties,{value:r}=t,{value:i}=n;return{text:i,value:r}})})}).catch(e=>{setTimeout(()=>{throw e})})}handleFetchAdGroups(e,t){const{adCampaigns:n,adGroups:r}=this.value;this.props.fetchCampaignAdGroups(n[0],r,{searchValue:e}).then(e=>{const{results:n=[]}=e,r=n.map(e=>{const{hs_ad_group_id:t,hs_name:n}=e.properties,{value:r}=t,{value:i}=n;return{text:i,value:r}});t(null,{options:r})}).catch(e=>{setTimeout(()=>{throw e})})}handleFetchAds(e,t){const{adGroups:n,adSources:r}=this.value;this.props.fetchAdsForAdGroup(n[0],r,{searchValue:e}).then(e=>{const{results:n=[]}=e,r=n.map(e=>{const{hs_ad_id:t,hs_name:n}=e.properties,{value:r}=t,{value:i}=n;return{text:i,value:r}});t(null,{options:r})}).catch(e=>{setTimeout(()=>{throw e})})}render(){return Object(u.jsxs)(le.a,{direction:"column",children:[this.renderAdCampaignSelect(),this.renderAdGroupSelect(),this.renderIndivdualAdSelect()]})}}var _e=Ie(we),Ne=n(2785),Ae=n(1116);const De=300,ke=e=>({audiences:Object(Ae.b)(e)}),Pe={fetchAllAudiences:Ne.a},Re=Object(o.connect)(ke,Pe);class Fe extends i.PureComponent{constructor(e){super(e);this.handleFetchAudiences=this.handleFetchAudiences.bind(this);this.debounceFetchAudiences=Object(b.debounce)(this.handleFetchAudiences,De)}handleFetchAudiences(e,t){this.props.fetchAllAudiences({searchValue:e}).then(e=>{const{results:n=[]}=e,r=n.map(e=>{const{hs_audience_name:t,hs_saved_audience_id:n}=e.properties,{value:r}=t,{value:i}=n;return{text:r,value:Number(i)}});t(null,{options:r})}).catch(e=>{setTimeout(()=>{throw e})})}getTranslationKey(e){return"smartcontentlib.components.input.AudienceSelect."+e}render(){const{value:e,onChange:t}=this.props;return Object(u.jsx)(s.a,{anchorType:"button",defaultValue:e,clearable:!0,className:"m-left-0 m-y-1",loadOptions:this.debounceFetchAudiences,multi:!1,onChange:t,placeholder:Object(u.jsx)(a.a,{message:this.getTranslationKey("placeholder")})})}}var Le=Re(Fe),Me=n(1101),Be=n(1111);const Ue=e=>{switch(e){case r.h.GEO_IP:return M;case r.h.DEVICE_TYPE:return U;case r.h.LANGUAGE:return H;case r.h.CONTACT_LIFECYCLE:return g;default:return null}};function Ve({criterionParameters:e,criterionType:t,onParametersChange:n}){const i=Object(o.useSelector)(Be.c),a=Object(Me.b)(t,e),s=Object(Me.c)(t,e),c=a||s&&i,l=c?r.j:r.f[t],d=e[l],p=e=>{n({[l]:e.target.value})};if(t===r.h.CONTACT_LIST)return Object(u.jsx)(E,{onChange:p,value:d,isIlsRule:c});if(t===r.h.TRAFFIC_SOURCE)return Object(u.jsx)(oe,{onParametersChange:n,parameters:e||{}});if(t===r.h.QUERY_PARAM)return Object(u.jsx)(fe,{onChange:n,parameters:e||{}});if(t===r.h.AD_SOURCE)return Object(u.jsx)(_e,{onChange:n,value:e||{}});if(t===r.h.AUDIENCE)return Object(u.jsx)(Le,{onChange:p,value:d});const h=Ue(t);return h?Object(u.jsx)(h,{onChange:p,value:d}):null}t.a=Ve},function(e,t,n){"use strict";var r=n(40),i=n(47),o=n(2818),a=n(1404),s=n(1453),c=n(1),l=n.n(c);const u="property-validation/v1/property-validation",d=(e,t,n,r)=>t.post(`${u}/${encodeURIComponent(n)}/extended`,{data:e,query:{customValidation:!0,objectId:r,portalId:l.a.get()}});var p=n(283),h=n(279),m=n(1454),f=n(2809),g=n(2672),b=n(1344);const O="INVALID_EMAIL",y="CONFLICTING_UNIQUE_VALUE",j="EMAIL_GDPR_DELETED",v="INVALID_FORMAT_CAPITALIZATION",C="INVALID_FORMAT_UPPER",x="INVALID_FORMAT_LOWER",E="INVALID_FORMAT_EMAIL",T="INVALID_ALPHANUMERIC",S="INVALID_ALPHA",I="INVALID_NUMERIC",w="MAX_LENGTH",_="MIN_LENGTH",N="MIN_NUMBER",A="MAX_NUMBER",D="INVALID_START_DATE",k="INVALID_END_DATE",P="INVALID_START_DATETIME",R="INVALID_END_DATETIME",F="CONTAINS_INVALID_CHARACTERS",L="INVALID_DECIMAL_PRECISION",M="INVALID_BEFORE_DURATION",B="INVALID_AFTER_DURATION",U="INVALID_BEFORE_DATETIME_DURATION",V="INVALID_AFTER_DATETIME_DURATION",H="INVALID_DAYS_OF_WEEK",q="INVALID_ANGLE_BRACKETS";var G=n(45);const W=(e,t,n)=>e.error===y&&Object(g.c)(t,Object(b.v)(n))?m.a:e.error,z=e=>{switch(e){case y:case O:case j:return!0;case q:case v:case C:case x:case E:case T:case S:case I:case w:case _:case N:case A:case D:case k:case F:case L:case M:case B:case H:case P:case R:case U:case V:return!0;default:return!1}},$=(e,t,n)=>{const r=W(e,t,n);return r===m.a?{code:r,message:Object(G.jsx)(p.a,{elements:{KnowledgeBaseButton:f.a},message:"customerDataProperties.propertyValidationErrorMessages.uniqueEmailConflict_jsx",options:{useZorse:!0,url:"https://knowledge.hubspot.com/articles/kcs_article/contacts/why-cant-i-save-a-new-email-address-for-my-contact"}})}:r===j?{code:r,message:Object(G.jsxs)(G.Fragment,{children:[e.message," ",Object(G.jsx)(f.a,{useZorse:!0,url:"https://knowledge.hubspot.com/contacts/how-do-i-perform-a-gdpr-compliant-delete-in-hubspot"})]})}:z(r)?{code:r,message:e.message}:{code:r,message:Object(G.jsx)(h.a,{message:"customerDataProperties.propertyValidationErrorMessages.unknownError",options:{propertyName:t.label||t.name}})}},K=e=>e?e.isValid?s.e:s.a:s.e,Y=(e,t)=>t&&!1===t.isValid?[$(t,e.property,e.objectTypeId)]:[],X=(e,t)=>{const n=e.find(e=>e.name===t.property.name),r=K(n);return{errors:Y(t,n),validationRequest:t,validationStatus:r}},J=(e,t)=>void 0===e.value||null===e.value||""===e.value?Promise.resolve({errors:[],validationRequest:e,validationStatus:s.e}):d([{name:e.property.name,value:e.value}],t,e.objectTypeId,e.objectId).then(t=>X(t,e)).catch(()=>({errors:[],validationRequest:e,validationStatus:s.d}));var Q=n(2838),Z=n(281);const ee=/(^[^:/?#]*:(?:\/+)?)?(?:.*)/;function te(e){return e.match(ee)[1]}function ne(e){return Boolean(e&&void 0!==te(e))}function re(e){if(!e)return{domain:e,protocol:void 0};const t=te(e);return void 0!==t?{domain:e.replace(t,""),protocol:t}:{domain:e,protocol:void 0}}function ie(e){return e.replace(/^https?:\/\//i,"").replace(/^(www\.)?/i,"")}function oe(e){return-1!==ie(e).indexOf("/")}function ae(e){if(!e)return{domain:e,path:void 0};const t=ie(e),n=t.match(/([^/]*)(.*)/);return oe(e)?{domain:n[1],path:n[2]}:{domain:t,path:void 0}}function se(e){const{domain:t}=ae(e);return!!t&&Q.a.test(t)}function ce(e){return!e||se(e)&&!oe(e)&&!ne(e)}function le(e){const{protocol:t}=re(e),{path:n,domain:r}=ae(e);return t&&n?{code:m.c,message:Object(G.jsx)(Z.a,{message:"customerDataProperties.propertyValidationErrorMessages.invalidDomainBoth",options:{domain:r,protocol:t,path:n}})}:t?{code:m.c,message:Object(G.jsx)(Z.a,{message:"customerDataProperties.propertyValidationErrorMessages.invalidDomainProtocol",options:{domain:r,protocol:t}})}:n?{code:m.c,message:Object(G.jsx)(Z.a,{message:"customerDataProperties.propertyValidationErrorMessages.invalidDomainPath",options:{domain:r,path:n}})}:{code:m.c,message:Object(G.jsx)(h.a,{message:"customerDataProperties.propertyValidationErrorMessages.invalidDomainFormat"})}}function ue(e){const t=ce(e.value);return e.value&&!t?{errors:[le(e.value)],validationRequest:e,validationStatus:s.a}:{errors:[],validationRequest:e,validationStatus:s.e}}const de=e=>Promise.resolve(ue(e));var pe=n(2810);const he=e=>!/(support\.hubspot\.com)/g.test(e),me=e=>""===e||null==e||pe.a.test(e)&&he(e),fe=e=>{const t=me(e.value);return{errors:t?[]:[{code:m.d,message:Object(G.jsx)(h.a,{message:"customerDataProperties.propertyValidationErrorMessages.invalidEmailFormat"})}],validationRequest:e,validationStatus:t?s.e:s.a}},ge=e=>Promise.resolve(fe(e));var be=n(1395);const Oe=e=>{const{value:t,property:n,getAdditionalPropertyValue:r,objectId:i,objectTypeId:o}=e,a="recurringbillingfrequency"===n.name?t:r&&r("recurringbillingfrequency",i||void 0,o),c="hs_recurring_billing_period"===n.name?t:r&&r("hs_recurring_billing_period",i||void 0,o),l=Object(be.a)(c,a);return{errors:l?[]:[{code:m.b,message:Object(G.jsx)(h.a,{message:"customerDataProperties.propertyValidationErrorMessages.invalidBillingPeriodFrequencyRatio"})}],validationRequest:e,validationStatus:l?s.e:s.a}},ye=e=>Promise.resolve(Oe(e));function je(e){return e&&(""+e).includes('"')}function ve(e){const t=je(e.value);return e.value&&t?{errors:[{message:Object(G.jsx)(h.a,{message:"customerDataProperties.propertyValidationErrorMessages.invalidNameWithQuotes"}),code:m.f}],validationRequest:e,validationStatus:s.a}:{errors:[],validationRequest:e,validationStatus:s.e}}const Ce=e=>Promise.resolve(ve(e));var xe=n(1451);const Ee=[J],Te=e=>Object(g.c)(e.property,Object(b.v)(e.objectTypeId))||Object(xe.c)(e.property,Object(b.v)(e.objectTypeId))?[ge,...Ee]:Object(g.i)(e.property,Object(b.v)(e.objectTypeId))?[de,...Ee]:Object(g.v)(e.property,Object(b.v)(e.objectTypeId))?[Ce,...Ee]:Object(g.r)(e.property,e.objectTypeId)||Object(g.a)(e.property,e.objectTypeId)?[ye,...Ee]:Ee,Se=(e,t)=>{const n={errors:[],validationRequest:t,validationStatus:s.e};return e.reduce((e,t)=>{t.validationStatus===s.a&&(e.validationStatus=s.a);t.validationStatus===s.d&&e.validationStatus!==s.a&&(e.validationStatus=s.d);t.errors&&(e.errors=[...e.errors,...t.errors]);return e},n)},Ie=(e,t)=>{const n=Te(e);return Promise.all(n.map(n=>n(e,t))).then(t=>Se(t,e))};function we(e){return e===s.e||e===s.d}function _e(e){return e===s.a}function Ne(e){return e===s.c}const Ae=e=>e.errors[0]&&e.errors[0].message;var De=n(1342),ke=n(1455),Pe=n(1431),Re=n(1433);const Fe=e=>{const{property:t}=e;switch(t.type){case"string":return!!(Object(g.m)(t)||Object(g.q)(t)||Object(g.A)(t));case"number":return!1;case"bool":case"date":case"datetime":case"enumeration":case"phone_number":case"currency_number":case"json":case"object_coordinates":return!0;default:t.type;return!0}};n.d(t,"b",(function(){return Ve}));n.d(t,"c",(function(){return He}));n.d(t,"a",(function(){return qe}));n.d(t,"d",(function(){return Ge}));const Le=()=>Object(o.a)(500,(e,t,n)=>{Ie(e,t).then(n).catch(n)}),Me=Object(i.a)(({objectId:e,objectTypeId:t,property:n,value:r,getAdditionalPropertyValue:i})=>({objectId:e,objectTypeId:t,property:n,value:r,getAdditionalPropertyValue:i})),Be=e=>({errors:e.errors,validationStatus:e.validationStatus,loading:Ne(e.validationStatus),invalid:_e(e.validationStatus),saveable:we(e.validationStatus),message:Ae(e),value:e.validationRequest.value,propertyName:e.validationRequest.property.name}),Ue=(e,t)=>({errors:[],validationStatus:s.b,loading:!1,invalid:!1,saveable:!1,message:void 0,value:t,propertyName:e.name}),Ve=(e,t)=>({errors:[],loading:!0,invalid:!1,saveable:!1,message:void 0,validationStatus:s.c,value:t,propertyName:e.name}),He=(e,t)=>({errors:[],loading:!1,invalid:!1,saveable:!0,message:void 0,validationStatus:s.e,value:t,propertyName:e.name}),qe=(e,t,n)=>({errors:n,loading:!1,invalid:!0,saveable:!1,message:n[0].message,validationStatus:s.a,value:t,propertyName:e.name}),Ge=({disableValidation:e,objectId:t,objectTypeId:n,onChange:i,onValidationChange:o,propertyDefinition:s,propertyValue:c,validationSettings:l})=>{const u=Object(Re.a)(),d=Object(r.useRef)(Me({objectId:t,objectTypeId:n,property:s,value:c,getAdditionalPropertyValue:u})),[p,h]=Object(r.useState)(()=>Ue(s,c)),m=Object(r.useMemo)(()=>Le(),[]),f=Object(a.a)(),g=Object(Pe.a)(),b=Object(r.useCallback)(t=>{if(!g.current||e)return;if(t.validationRequest!==d.current)return;const n=Be(t);o(n);h(n)},[e,g,o]),O=Object(r.useCallback)(r=>{if(e)return;const i=Ve(s,r);o(i);h(i);const a=Me({objectId:t,objectTypeId:n,property:s,value:r,getAdditionalPropertyValue:u});d.current=a;Fe(a)?Ie(a,f).then(b).catch(b):m(a,f,b)},[m,e,b,f,t,n,o,s,u]);Object(r.useEffect)(()=>{e||d.current.value!==c&&O(c)},[e,O,c]);Object(r.useEffect)(()=>{if(e)return;if(Object(De.a)(["validateInitialValue"],l)){if(Object(ke.a)(c)){const e=He(s,c);o(e);h(e);return}O(c)}},[]);const y=Object(r.useCallback)(e=>{i(e);O(e[s.name])},[O,i,s]);return{onChangeSingle:Object(r.useCallback)(({target:{value:e}})=>{y({[s.name]:e})},[y,s]),onChangeMultiple:y,validationState:p}}},function(e,t,n){"use strict";var r=n(2),i=n(4),o=n(41),a=n.n(o),s=n(40),c=n(296),l=n(478),u=n(1186),d=n(298),p=n(2682),h=n(507),m=n(1188),f=n(508);const g=a.a.shape({year:a.a.number.isRequired,month:a.a.number.isRequired,date:a.a.number.isRequired});var b=n(307),O=n(489),y=n(1187),j=n(461),v=n(339),C=n(311),x=n(313);const E=e=>Object(u.h)(e)?{year:e.year,month:e.month}:null,T=({month:e,year:t})=>{const n=(e+11)%12;return{month:n,year:n===e-1?t:t-1}},S=({month:e,year:t})=>{const n=(e+1)%12;return{month:n,year:n===e+1?t:t+1}};class I extends s.Component{constructor(e){super(e);this.handleInputChange=e=>{const{format:t,onChange:n,value:r}=this.props;this.setState({inputValue:e.target.value});const i=e.target.value.trim();if(""===i)n(Object(d.a)(null));else{const e=Object(u.e)(i,t);null===e||Object(u.c)(e,r)||this.updateDate(e)}};this.handleKeyDown=e=>{const{onOpenChange:t,open:n,originDate:r,today:i,value:o}=this.props,{key:a}=e;clearTimeout(this._keyUpTimeout);this._pressedKey=a;const s=Object(u.h)(o)?o:r||i;if("ArrowUp"===a){e.preventDefault();const t=Object(u.i)(s);this.updateDate(t)}else if("ArrowDown"===a){e.preventDefault();const t=Object(u.k)(s);this.updateDate(t)}else if("Escape"===a){if(!n||!t)return;e.preventDefault();e.stopPropagation();t(Object(d.a)(!1))}};this.handleKeyUp=()=>{clearTimeout(this._keyUpTimeout);this._keyUpTimeout=setTimeout(()=>{this._pressedKey=null},0)};this.handleBlur=()=>{const{format:e,onFocusedValueChange:t,value:n}=this.props;this.updateInput(n,e);this._pressedKey=null;t(Object(d.a)(null))};this.state={inputValue:Object(u.l)(e.value,e.format)};this._keyUpTimeout=0;this._pressedKey=null}componentDidUpdate(e){const{calendarPage:t,onCalendarPageChange:n,onOpenChange:r,open:i,value:o,format:a}=e;if(Object(u.c)(o,this.props.value))a!==this.props.format&&this.updateInput(this.props.value,this.props.format);else{const e=E(this.props.value);Object(u.c)(e,t)||n(Object(d.a)(e));const o=null===this._pressedKey,a=null===this._pressedKey||"ArrowUp"===this._pressedKey||"ArrowDown"===this._pressedKey;o&&i&&r(Object(d.a)(!1));a&&this.updateInput(this.props.value,this.props.format)}}componentWillUnmount(){clearTimeout(this._keyUpTimeout)}updateInput(e,t){const{inputValue:n}=this.state,r=Object(u.l)(e,t);r!==n&&this.setState({inputValue:r})}updateDate(e){const{calendarPage:t,disabledValues:n,max:r,maxValue:i,min:o,minValue:a,onCalendarPageChange:s,onChange:c,onFocusedValueChange:l,onOpenChange:p}=this.props;t&&e.month===t.month||s(Object(d.a)({year:e.year,month:e.month}));if(!Object(u.c)(e,Object(u.f)(e,o||a,r||i))||n&&n.some(t=>Object(u.c)(e,t))){l(Object(d.a)(e));p(Object(d.a)(!0))}else{l(Object(d.a)(null));c(Object(d.a)(e))}}render(){const{children:e}=this.props,{inputValue:t}=this.state;return e({onBlur:this.handleBlur,onInputChange:this.handleInputChange,onKeyDown:this.handleKeyDown,onKeyUp:this.handleKeyUp,inputValue:t})}}0;I.defaultProps={format:"L"};var w=I,_=n(2636),N=n(287),A=n.n(N),D=n(2654),k=n(460),P=n(443),R=n(45);function F(e){return Object(R.jsx)(P.a,Object.assign({use:"tertiary-light",size:"xs",responsive:!1},e))}const L=["clearLabel","max","maxValidationMessage","min","minValidationMessage","onChange","today","todayLabel"],M=A.a.div.withConfig({displayName:"CalendarFooterButtons__Outer",componentId:"efgfal-0"})(["display:flex;justify-content:space-between;margin:16px 0 20px;"]),B=A()(F).withConfig({displayName:"CalendarFooterButtons__FooterButton",componentId:"efgfal-1"})(["flex-basis:50%;"]);function U(e){const{clearLabel:t,max:n,maxValidationMessage:i,min:o,minValidationMessage:a,onChange:s,today:c,todayLabel:l}=e,p=Object(r.a)(e,L),h=!Object(u.g)(c,o,n);return Object(R.jsxs)(M,Object.assign({},p,{children:[Object(R.jsx)(D.a,{title:h&&Object(k.a)(o&&-1===Object(u.b)(c,o)?a:i),children:Object(R.jsx)(B,{"data-action":"today",disabled:h,onClick:()=>{s(Object(d.a)(c))},children:Object(k.a)(l)})}),Object(R.jsx)(B,{"data-action":"clear",onClick:()=>{s(Object(d.a)(null))},children:Object(k.a)(t)})]}))}0;U.defaultProps={clearable:!0,clearLabel:()=>i.a.text("ui.datePicker.clear"),todayLabel:()=>i.a.text("ui.datePicker.today")};U.displayName="CalendarFooterButtons";var V=n(710),H=n(2679),q=n(324),G=n(1073),W=n(352),z=n(326);const $=["focusedValue","maxValidationMessage","minValidationMessage","children","disabledValues","leftControl","max","min","month","onDateClick","onDateMouseEnter","onDateMouseLeave","ownerId","rightControl","today","weekdayHeadings","weekStartDay","year"],K=(e,t)=>{const n=e.slice();for(let e=0;e<t;e++){const e=n.shift();n.push(e)}return n},Y=(e,t,n)=>{const r=new Date(e,t,n);return new u.a(r.getFullYear(),r.getMonth(),r.getDate())},X=(e,t,n)=>{const r=new Date(e,t).getDay(),i=new Date(e,t+1,0).getDate(),o=(n+6)%7,a=[[]],s=(r-n+7)%7-1,c=new Date(e,t,0).getDate();for(let n=c-s;n<=c;n++)a[0].push(Y(e,t-1,n));let l=0,u=r;for(let n=1;n<=i;n++){a[l].push(Y(e,t,n));if(u===o){l++;a.push([])}u=(u+1)%7}const d=7*(6-a.length)+7-a[l].length;for(let n=1;n<=d;n++){a[l].push(Y(e,t+1,n));if(u===o&&n!==i){l++;a.push([])}u=(u+1)%7}return a},J=e=>new u.a(+e.getAttribute("data-year"),+e.getAttribute("data-month"),+e.getAttribute("data-date")),Q=(e,t)=>{const n=i.a.moment({year:t,month:e});return Object(G.a)(n)},Z=A.a.div.withConfig({displayName:"AbstractMonth__Wrapper",componentId:"sc-1dt2rvf-0"})(["cursor:default;width:260px;height:260px;"]),ee=A.a.div.withConfig({displayName:"AbstractMonth__Header",componentId:"sc-1dt2rvf-1"})(["display:flex;height:42px;align-items:center;"]),te=A()(W.a).withConfig({displayName:"AbstractMonth__Heading",componentId:"sc-1dt2rvf-2"})(["display:inline-block;margin:0 auto;"]),ne=A.a.table.withConfig({displayName:"AbstractMonth__Table",componentId:"sc-1dt2rvf-3"})(["width:100%;table-layout:fixed;border-collapse:collapse;text-align:center;font-size:15px;"]),re=A.a.th.withConfig({displayName:"AbstractMonth__WeekdayHeading",componentId:"sc-1dt2rvf-4"})(["padding:7px 0;color:",";",";"],q.SLINKY,z.a.medium);function ie(e){const{focusedValue:t,maxValidationMessage:n,minValidationMessage:i,children:o,disabledValues:a,leftControl:c,max:l,min:p,month:h,onDateClick:m,onDateMouseEnter:f,onDateMouseLeave:g,ownerId:b,rightControl:O,today:y,weekdayHeadings:j,weekStartDay:v,year:C}=e,x=Object(r.a)(e,$),E=Object(s.useMemo)(()=>Q(h,C),[h,C]);return Object(R.jsxs)(Z,Object.assign({},x,{children:[Object(R.jsxs)(ee,{children:[c,Object(R.jsx)(te,{"aria-hidden":!0,children:E}),O]}),Object(R.jsxs)(ne,{role:"presentation",children:[Object(R.jsx)("thead",{"aria-hidden":!0,children:Object(R.jsx)("tr",{children:K(j,v).map((e,t)=>Object(R.jsx)(re,{children:e},t))})}),Object(R.jsx)("tbody",{children:X(C,h,v).map((e,r)=>Object(R.jsx)("tr",{children:e.map((e,r)=>{const s=p&&-1===Object(u.b)(e,p),c=l&&1===Object(u.b)(e,l),O=a&&a.some(t=>Object(u.c)(e,t)),j=s||c||O,v=Object(u.c)(e,t);return o(e,{id:`${b}-${e.month}-${e.date}`,"data-date":e.date,"data-month":e.month,"data-year":e.year,key:r,role:"menuitem",onClick:j?void 0:e=>{m(Object(d.a)(J(e.currentTarget)))},onMouseEnter:j||!f?void 0:e=>{f(Object(d.a)(J(e.currentTarget)))},onMouseLeave:j||!g?void 0:e=>{g(Object(d.a)(J(e.currentTarget)))},isCurrentMonth:e.month===h,isDisabled:j,isToday:Object(u.c)(e,y),tooltip:Object(k.a)(s&&i||c&&n),tooltipOpen:v||void 0})})},r))})]})]}))}var oe=n(302);const ae=["tooltip","tooltipOpen"],se=Object(N.css)(["::before{content:' ';display:inline-block;position:absolute;border:2.5px solid currentColor;border-radius:50%;top:22px;left:16px;}"]),ce=Object(N.css)(["::after{content:' ';display:inline-block;position:absolute;top:12px;bottom:0;left:2px;right:13px;border-top:1px solid currentColor;transform:rotate(45deg);}"]),le=A.a.td.withConfig({displayName:"Day__Cell",componentId:"xz4hdu-0"})(["position:relative;height:30px;padding:0;cursor:",";color:",";background-color:",";border-radius:",";",";",";",";&:hover{background-color:",";}"],({isDisabled:e})=>e?"not-allowed":"pointer",({isDisabled:e,isSelected:t,isToday:n,isCurrentMonth:r})=>e?q.BATTLESHIP:t?q.OLAF:r?n?q.SORBET_DARK:null:q.BATTLESHIP,({isDisabled:e,isInRange:t,isSelected:n})=>e?null:n?q.CALYPSO:t?q.CALYPSO_LIGHT:null,({isInRange:e,isRangeStart:t,isRangeEnd:n})=>e?null:t&&n?oe.m:t?`${oe.m} 0 0 ${oe.m}`:n?`0 ${oe.m} ${oe.m} 0`:oe.m,({isSelected:e,isToday:t})=>e||t?z.a.demibold:z.a.medium,({isToday:e})=>e&&se,({isDisabled:e})=>e&&ce,({isDisabled:e,isInRange:t,isSelected:n})=>!e&&!n&&(t?q.CALYPSO_MEDIUM:q.CALYPSO_LIGHT));function ue(e){const{tooltip:t,tooltipOpen:n}=e,i=Object(r.a)(e,ae);return Object(R.jsx)(D.a,{"aria-live":"polite",open:n,title:t,children:Object(R.jsx)(le,Object.assign({},i))})}ue.displayName="Day";const de=["month","onChange","value"];function pe(e){const{month:t,onChange:n,value:i}=e,o=Object(r.a)(e,de);return Object(R.jsx)(ie,Object.assign({},o,{month:t,onDateClick:n,children:(e,t)=>{const n=Object(u.c)(e,i);return Object(R.jsx)(ue,Object.assign({},t,{isSelected:n,children:e.date}))}}))}0;const he=["calendarPage","id","onCalendarPageChange","today","value"],me=A.a.div.withConfig({displayName:"CalendarPage__Wrapper",componentId:"sc-12ex4ak-0"})(["display:inline-block;"]),fe=e=>e?i.a.text("ui.datePicker.dateSelected",{date:Object(u.m)(e).format("LL")}):i.a.text("ui.datePicker.noDateSelected"),ge=(e,t,n)=>e||(Object(u.h)(t)?E(t):E(n));function be(e){const{calendarPage:t,id:n,onCalendarPageChange:o,today:a,value:s}=e,c=Object(r.a)(e,he),l=Object(y.b)(),u=ge(t,s,a),{month:p,year:h}=u;return Object(R.jsxs)(me,{id:n,children:[Object(R.jsx)("span",{className:"sr-only","aria-live":"polite","aria-atomic":!0,children:fe(s)}),Object(R.jsx)(pe,Object.assign({},c,{month:p,leftControl:Object(R.jsx)(V.a,{"data-action":"prev-month",use:"transparent","aria-label":i.a.text("ui.datePicker.prevMonth"),onClick:()=>{o(Object(d.a)(T(u)))},children:Object(R.jsx)(H.a,{name:"left",size:22})}),ownerId:n,rightControl:Object(R.jsx)(V.a,{"data-action":"next-month",use:"transparent","aria-label":i.a.text("ui.datePicker.nextMonth"),onClick:()=>{o(Object(d.a)(S(u)))},children:Object(R.jsx)(H.a,{name:"right",size:22})}),today:a,weekdayHeadings:l._weekdaysMin,weekStartDay:l._week.dow,value:s,year:h}))]})}be.displayName="CalendarPage";0;const Oe=["calendarId","clearLabel","max","maxValidationMessage","min","minValidationMessage","onChange","today","todayLabel","children","id","onFocusLeave","onOpenChange","open"];0;var ye=e=>{const{calendarId:t,clearLabel:n,max:i,maxValidationMessage:o,min:a,minValidationMessage:c,onChange:l,today:u,todayLabel:d,children:p,id:h,onFocusLeave:m,onOpenChange:f,open:g}=e,b=Object(r.a)(e,Oe);return Object(R.jsx)(_.a,{arrowSize:"none",content:{body:Object(R.jsxs)(s.Fragment,{children:[Object(R.jsx)(be,Object.assign({},b,{id:t,max:i,maxValidationMessage:o,min:a,minValidationMessage:c,onChange:l,tabIndex:-1,today:u})),Object(R.jsx)(U,{clearLabel:n,max:i,maxValidationMessage:o,min:a,minValidationMessage:c,onChange:l,today:u,todayLabel:d})]})},onOpenChange:f,pinToConstraint:["left","right"],placement:"bottom right",id:h,onFocusLeave:m,open:g,children:p})},je=n(2736),ve=n(47),Ce=n(345),xe=n(475),Ee=n(346);const Te={},Se={},Ie={},we=e=>{const t=Se[e],n=u.j(e);if(!t||!u.c(t,n)){Se[e]=n;Te[e].forEach(e=>e.forceUpdate())}},_e=(e,t)=>{Te[t]||(Te[t]=[]);const n=Te[t];if(0===n.length){we(t);Ie[t]=setInterval(Object(je.a)(we,t),6e4)}n.push(e)},Ne=(e,t)=>{0===Te[t].splice(Te[t].indexOf(e),1).length&&clearInterval(Ie[t])},Ae=(e,t)=>{e.tz&&Ne(e,e.tz);_e(e,t);e.tz=t};function De(e){class t extends s.Component{constructor(e){super(e);this._updateInstanceForTz=Object(ve.a)(Ae);this._updateInstanceForTz(this,e.tz)}componentWillUnmount(){Ne(this,this.props.tz)}render(){const{tz:t}=this.props;this._updateInstanceForTz(this,t);return Object(R.jsx)(e,Object.assign({today:Se[t]},this.props))}}Object(Ee.a)(t,e);t.displayName=`UsesToday(${Object(Ce.a)(e)})`;t.propTypes=Object.assign({},Object(xe.a)(e.propTypes,"today"),{tz:a.a.oneOf(["userTz","portalTz","utc"]).isRequired});t.defaultProps=Object.assign({},Object(xe.a)(e.defaultProps,"today"),{tz:"userTz"});return t}De.instancesForTz=Te;const ke=["aria-invalid","aria-label","aria-labelledby","aria-required","autoFocus","calendarPage","className","clearLabel","disabled","disabledValues","error","focusedValue","format","iconSize","id","Input","inputRef","inputWidth","min","minValue","max","maxValue","maxValidationMessage","maxValueValidationMessage","minValidationMessage","minValueValidationMessage","name","onCalendarPageChange","onChange","onFocusedValueChange","onOpenChange","open","readOnly","required","today","todayLabel","use","value"],Pe=(e,t,n)=>null==e||!!Object(u.h)(e)&&Object(u.g)(e,t,n),Re=Object(s.memo)(e=>{const{"aria-invalid":t,"aria-label":n,"aria-labelledby":i,"aria-required":o,autoFocus:a,calendarPage:u,className:p,clearLabel:h,disabled:f,disabledValues:g,error:j,focusedValue:v,format:C,iconSize:x,id:E,Input:T,inputRef:S,inputWidth:I,min:_,minValue:N,max:A,maxValue:D,maxValidationMessage:k,maxValueValidationMessage:P,minValidationMessage:F,minValueValidationMessage:L,name:M,onCalendarPageChange:B,onChange:U,onOpenChange:V,open:H,readOnly:q,required:G,today:W,todayLabel:z,use:$,value:K}=e,Y=Object(r.a)(e,ke),X=Object(c.a)("dateinput-calendar-"),J=Object(c.a)("dateinput-popover-"),Q=Object(s.useContext)(l.b),Z=f||Q.disabled,ee=()=>{q||Z||V(Object(d.a)(!0))};return Object(R.jsx)(w,Object.assign({},e,{children:({onInputChange:e,onKeyDown:r,onKeyUp:s,onBlur:c,inputValue:l})=>Object(R.jsx)(ye,{calendarId:X,calendarPage:u,clearLabel:h,disabledValues:g,focusedValue:v,id:J,max:A||D,min:_||N,maxValidationMessage:k||P,minValidationMessage:F||L,onCalendarPageChange:B,onChange:U,onFocusLeave:()=>{V(Object(d.a)(!1))},onMouseDown:O.c,onOpenChange:V,open:H&&!Z&&!q,today:W,todayLabel:z,value:K,children:Object(R.jsx)(m.a,Object.assign({},Y,{className:p,disabled:Z,iconName:"date",size:x||Q.size,children:Object(R.jsx)(T,{"aria-invalid":j?"true":t,"aria-label":n,"aria-labelledby":i,"aria-required":o,autoComplete:"off",autoFocus:a,className:Object(b.k)(p,"private-form__control--inline")?"private-form__control--inline":void 0,"data-format":Object(y.c)(C),disabled:Z,error:j||!Pe(K,N,D),id:E,inputRef:S,name:M,onBlur:c,onChange:e,onClick:ee,onFocus:e=>{if(!q&&!Z){e.target.select();ee()}},onKeyDown:r,onKeyUp:s,placeholder:Object(y.a)(C),readOnly:q,required:G,use:$,value:l,width:I})}))})}))}),Fe=e=>{const t=e.replace("Value","");return{message:`UIDateInput: The \`${e}\` prop is deprecated. Use \`${t}\` instead.`,key:"UIDateInput-old-minmax"}};Re.propTypes={"aria-invalid":a.a.string,"aria-label":a.a.string,"aria-labelledby":a.a.string,"aria-required":a.a.bool,autoFocus:a.a.bool,calendarPage:Object(v.a)(a.a.shape({year:a.a.number.isRequired,month:a.a.number.isRequired})),clearLabel:Object(j.a)(a.a.string),disabled:a.a.bool,disabledValues:a.a.arrayOf(g),error:a.a.bool,focusedValue:Object(v.a)(g),format:a.a.oneOf(["L","YYYY-MM-DD","LL","ll"]).isRequired,iconSize:Object(v.a)(a.a.number),id:a.a.string,Input:Object(v.a)(a.a.elementType.isRequired),inputRef:x.a.isRequired,inputWidth:Object(v.a)(a.a.number),max:g,maxValidationMessage:Object(j.a)(a.a.string),maxValue:Object(C.a)(g,Fe),maxValueValidationMessage:Object(C.a)(Object(j.a)(a.a.string),Fe),min:g,minValue:Object(C.a)(g,Fe),minValidationMessage:Object(j.a)(a.a.string),minValueValidationMessage:Object(C.a)(Object(j.a)(a.a.string),Fe),name:a.a.string,onCalendarPageChange:Object(v.a)(a.a.func.isRequired),onChange:a.a.func.isRequired,onFocusedValueChange:Object(v.a)(a.a.func.isRequired),onOpenChange:a.a.func.isRequired,open:a.a.bool.isRequired,readOnly:a.a.bool,required:a.a.bool,today:g.isRequired,todayLabel:Object(j.a)(a.a.string),use:f.a.propTypes.use,value:g};Re.defaultProps={clearLabel:()=>i.a.text("ui.datePicker.clear"),format:"L",Input:f.a,maxValidationMessage:()=>i.a.text("ui.datePicker.dateAboveMax"),minValidationMessage:()=>i.a.text("ui.datePicker.dateBelowMin"),open:!1,todayLabel:()=>i.a.text("ui.datePicker.today")};Re.displayName="UIDateInput";t.a=Object(h.a)(Object(p.a)(De(Re),["calendarPage","focusedValue","open","value"]))},function(e,t,n){"use strict";var r=n(2629),i=n(1467),o=n(1),a=n.n(o);const s=e=>Object.entries(e).map(([e,t])=>({id:e,label:t.name})),c=e=>({hasMore:e.hasMore,offset:e.offset,references:e.results.map(e=>({id:""+e.id,label:e.name}))}),l=({httpClient:e})=>Object(r.a)({fetchByIds:t=>e.put("/cosemail/v1/emails/search/by-ids",{query:{portalId:a.a.get()},data:{emailCampaignIds:t}}),fetchBySearch:t=>e.get("/cosemail/v1/emails/search",{query:{portalId:a.a.get(),limit:t.count,offset:t.offset,q:t.query}}),formatByIdResponse:s,formatSearchResponse:c,referenceType:i.a});var u=n(10),d=n(665);const p=e=>Object.entries(e.hits).map(([e,t])=>({id:e,label:t})),h=({httpClient:e})=>Object(r.a)({fetchByIds:t=>e.put("/inbounddb-io/imports/get-names",{query:{portalId:a.a.get()},data:t}),fetchBySearch:()=>{u.a.warn({message:"Import Name resolver does not support search fetching",key:"import-name-resolver"});return Promise.resolve({hasMore:!1,offset:0,references:[]})},formatByIdResponse:p,formatSearchResponse:d.a,referenceType:i.b}),m=e=>e.results.map(e=>Object.assign({id:""+e.id,label:e.name},e.description&&{description:e.description})),f=({httpClient:e})=>Object(r.a)({fetchByIds:t=>e.post("apps-hublets/v2/customer/applications/batch/read",{query:{portalId:a.a.get()},data:{inputs:t.map(e=>parseInt(e,10))}}),fetchBySearch:()=>{u.a.warn({message:"Integration Name resolver does not support search fetching",key:"integration-name-resolver"});return Promise.resolve({hasMore:!1,offset:0,references:[]})},isIdValid:e=>/^\d+$/.test(e),formatByIdResponse:m,formatSearchResponse:d.a,referenceType:i.c});var g=n(1468);const b=e=>e.map(e=>({id:e.id,label:e.name})),O=({httpClient:e})=>Object(r.a)({fetchByIds:t=>e.post("/sfdc/v1/campaigns/batch",{query:{portalId:a.a.get()},data:t}),fetchBySearch:()=>{u.a.warn({message:"Salesforce Campaign resolver does not support search fetching",key:"salesforce-campaign-resolver"});return Promise.resolve({hasMore:!1,offset:0,references:[]})},formatByIdResponse:b,formatSearchResponse:d.a,referenceType:i.f});var y=n(2839);var j=e=>t=>t[e],v=n(1448),C=n(1446);const x=[{base:"A",letters:/[\u0041\u24B6\uFF21\u00C0\u00C1\u00C2\u1EA6\u1EA4\u1EAA\u1EA8\u00C3\u0100\u0102\u1EB0\u1EAE\u1EB4\u1EB2\u0226\u01E0\u00C4\u01DE\u1EA2\u00C5\u01FA\u01CD\u0200\u0202\u1EA0\u1EAC\u1EB6\u1E00\u0104\u023A\u2C6F]/g},{base:"AA",letters:/[\uA732]/g},{base:"AE",letters:/[\u00C6\u01FC\u01E2]/g},{base:"AO",letters:/[\uA734]/g},{base:"AU",letters:/[\uA736]/g},{base:"AV",letters:/[\uA738\uA73A]/g},{base:"AY",letters:/[\uA73C]/g},{base:"B",letters:/[\u0042\u24B7\uFF22\u1E02\u1E04\u1E06\u0243\u0182\u0181]/g},{base:"C",letters:/[\u0043\u24B8\uFF23\u0106\u0108\u010A\u010C\u00C7\u1E08\u0187\u023B\uA73E]/g},{base:"D",letters:/[\u0044\u24B9\uFF24\u1E0A\u010E\u1E0C\u1E10\u1E12\u1E0E\u0110\u018B\u018A\u0189\uA779]/g},{base:"DZ",letters:/[\u01F1\u01C4]/g},{base:"Dz",letters:/[\u01F2\u01C5]/g},{base:"E",letters:/[\u0045\u24BA\uFF25\u00C8\u00C9\u00CA\u1EC0\u1EBE\u1EC4\u1EC2\u1EBC\u0112\u1E14\u1E16\u0114\u0116\u00CB\u1EBA\u011A\u0204\u0206\u1EB8\u1EC6\u0228\u1E1C\u0118\u1E18\u1E1A\u0190\u018E]/g},{base:"F",letters:/[\u0046\u24BB\uFF26\u1E1E\u0191\uA77B]/g},{base:"G",letters:/[\u0047\u24BC\uFF27\u01F4\u011C\u1E20\u011E\u0120\u01E6\u0122\u01E4\u0193\uA7A0\uA77D\uA77E]/g},{base:"H",letters:/[\u0048\u24BD\uFF28\u0124\u1E22\u1E26\u021E\u1E24\u1E28\u1E2A\u0126\u2C67\u2C75\uA78D]/g},{base:"I",letters:/[\u0049\u24BE\uFF29\u00CC\u00CD\u00CE\u0128\u012A\u012C\u0130\u00CF\u1E2E\u1EC8\u01CF\u0208\u020A\u1ECA\u012E\u1E2C\u0197]/g},{base:"J",letters:/[\u004A\u24BF\uFF2A\u0134\u0248]/g},{base:"K",letters:/[\u004B\u24C0\uFF2B\u1E30\u01E8\u1E32\u0136\u1E34\u0198\u2C69\uA740\uA742\uA744\uA7A2]/g},{base:"L",letters:/[\u004C\u24C1\uFF2C\u013F\u0139\u013D\u1E36\u1E38\u013B\u1E3C\u1E3A\u0141\u023D\u2C62\u2C60\uA748\uA746\uA780]/g},{base:"LJ",letters:/[\u01C7]/g},{base:"Lj",letters:/[\u01C8]/g},{base:"M",letters:/[\u004D\u24C2\uFF2D\u1E3E\u1E40\u1E42\u2C6E\u019C]/g},{base:"N",letters:/[\u004E\u24C3\uFF2E\u01F8\u0143\u00D1\u1E44\u0147\u1E46\u0145\u1E4A\u1E48\u0220\u019D\uA790\uA7A4]/g},{base:"NJ",letters:/[\u01CA]/g},{base:"Nj",letters:/[\u01CB]/g},{base:"O",letters:/[\u004F\u24C4\uFF2F\u00D2\u00D3\u00D4\u1ED2\u1ED0\u1ED6\u1ED4\u00D5\u1E4C\u022C\u1E4E\u014C\u1E50\u1E52\u014E\u022E\u0230\u00D6\u022A\u1ECE\u0150\u01D1\u020C\u020E\u01A0\u1EDC\u1EDA\u1EE0\u1EDE\u1EE2\u1ECC\u1ED8\u01EA\u01EC\u00D8\u01FE\u0186\u019F\uA74A\uA74C]/g},{base:"OI",letters:/[\u01A2]/g},{base:"OO",letters:/[\uA74E]/g},{base:"OU",letters:/[\u0222]/g},{base:"P",letters:/[\u0050\u24C5\uFF30\u1E54\u1E56\u01A4\u2C63\uA750\uA752\uA754]/g},{base:"Q",letters:/[\u0051\u24C6\uFF31\uA756\uA758\u024A]/g},{base:"R",letters:/[\u0052\u24C7\uFF32\u0154\u1E58\u0158\u0210\u0212\u1E5A\u1E5C\u0156\u1E5E\u024C\u2C64\uA75A\uA7A6\uA782]/g},{base:"S",letters:/[\u0053\u24C8\uFF33\u1E9E\u015A\u1E64\u015C\u1E60\u0160\u1E66\u1E62\u1E68\u0218\u015E\u2C7E\uA7A8\uA784]/g},{base:"T",letters:/[\u0054\u24C9\uFF34\u1E6A\u0164\u1E6C\u021A\u0162\u1E70\u1E6E\u0166\u01AC\u01AE\u023E\uA786]/g},{base:"TZ",letters:/[\uA728]/g},{base:"U",letters:/[\u0055\u24CA\uFF35\u00D9\u00DA\u00DB\u0168\u1E78\u016A\u1E7A\u016C\u00DC\u01DB\u01D7\u01D5\u01D9\u1EE6\u016E\u0170\u01D3\u0214\u0216\u01AF\u1EEA\u1EE8\u1EEE\u1EEC\u1EF0\u1EE4\u1E72\u0172\u1E76\u1E74\u0244]/g},{base:"V",letters:/[\u0056\u24CB\uFF36\u1E7C\u1E7E\u01B2\uA75E\u0245]/g},{base:"VY",letters:/[\uA760]/g},{base:"W",letters:/[\u0057\u24CC\uFF37\u1E80\u1E82\u0174\u1E86\u1E84\u1E88\u2C72]/g},{base:"X",letters:/[\u0058\u24CD\uFF38\u1E8A\u1E8C]/g},{base:"Y",letters:/[\u0059\u24CE\uFF39\u1EF2\u00DD\u0176\u1EF8\u0232\u1E8E\u0178\u1EF6\u1EF4\u01B3\u024E\u1EFE]/g},{base:"Z",letters:/[\u005A\u24CF\uFF3A\u0179\u1E90\u017B\u017D\u1E92\u1E94\u01B5\u0224\u2C7F\u2C6B\uA762]/g},{base:"a",letters:/[\u0061\u24D0\uFF41\u1E9A\u00E0\u00E1\u00E2\u1EA7\u1EA5\u1EAB\u1EA9\u00E3\u0101\u0103\u1EB1\u1EAF\u1EB5\u1EB3\u0227\u01E1\u00E4\u01DF\u1EA3\u00E5\u01FB\u01CE\u0201\u0203\u1EA1\u1EAD\u1EB7\u1E01\u0105\u2C65\u0250]/g},{base:"aa",letters:/[\uA733]/g},{base:"ae",letters:/[\u00E6\u01FD\u01E3]/g},{base:"ao",letters:/[\uA735]/g},{base:"au",letters:/[\uA737]/g},{base:"av",letters:/[\uA739\uA73B]/g},{base:"ay",letters:/[\uA73D]/g},{base:"b",letters:/[\u0062\u24D1\uFF42\u1E03\u1E05\u1E07\u0180\u0183\u0253]/g},{base:"c",letters:/[\u0063\u24D2\uFF43\u0107\u0109\u010B\u010D\u00E7\u1E09\u0188\u023C\uA73F\u2184]/g},{base:"d",letters:/[\u0064\u24D3\uFF44\u1E0B\u010F\u1E0D\u1E11\u1E13\u1E0F\u0111\u018C\u0256\u0257\uA77A]/g},{base:"dz",letters:/[\u01F3\u01C6]/g},{base:"e",letters:/[\u0065\u24D4\uFF45\u00E8\u00E9\u00EA\u1EC1\u1EBF\u1EC5\u1EC3\u1EBD\u0113\u1E15\u1E17\u0115\u0117\u00EB\u1EBB\u011B\u0205\u0207\u1EB9\u1EC7\u0229\u1E1D\u0119\u1E19\u1E1B\u0247\u025B\u01DD]/g},{base:"f",letters:/[\u0066\u24D5\uFF46\u1E1F\u0192\uA77C]/g},{base:"g",letters:/[\u0067\u24D6\uFF47\u01F5\u011D\u1E21\u011F\u0121\u01E7\u0123\u01E5\u0260\uA7A1\u1D79\uA77F]/g},{base:"h",letters:/[\u0068\u24D7\uFF48\u0125\u1E23\u1E27\u021F\u1E25\u1E29\u1E2B\u1E96\u0127\u2C68\u2C76\u0265]/g},{base:"hv",letters:/[\u0195]/g},{base:"i",letters:/[\u0069\u24D8\uFF49\u00EC\u00ED\u00EE\u0129\u012B\u012D\u00EF\u1E2F\u1EC9\u01D0\u0209\u020B\u1ECB\u012F\u1E2D\u0268\u0131]/g},{base:"j",letters:/[\u006A\u24D9\uFF4A\u0135\u01F0\u0249]/g},{base:"k",letters:/[\u006B\u24DA\uFF4B\u1E31\u01E9\u1E33\u0137\u1E35\u0199\u2C6A\uA741\uA743\uA745\uA7A3]/g},{base:"l",letters:/[\u006C\u24DB\uFF4C\u0140\u013A\u013E\u1E37\u1E39\u013C\u1E3D\u1E3B\u017F\u0142\u019A\u026B\u2C61\uA749\uA781\uA747]/g},{base:"lj",letters:/[\u01C9]/g},{base:"m",letters:/[\u006D\u24DC\uFF4D\u1E3F\u1E41\u1E43\u0271\u026F]/g},{base:"n",letters:/[\u006E\u24DD\uFF4E\u01F9\u0144\u00F1\u1E45\u0148\u1E47\u0146\u1E4B\u1E49\u019E\u0272\u0149\uA791\uA7A5]/g},{base:"nj",letters:/[\u01CC]/g},{base:"o",letters:/[\u006F\u24DE\uFF4F\u00F2\u00F3\u00F4\u1ED3\u1ED1\u1ED7\u1ED5\u00F5\u1E4D\u022D\u1E4F\u014D\u1E51\u1E53\u014F\u022F\u0231\u00F6\u022B\u1ECF\u0151\u01D2\u020D\u020F\u01A1\u1EDD\u1EDB\u1EE1\u1EDF\u1EE3\u1ECD\u1ED9\u01EB\u01ED\u00F8\u01FF\u0254\uA74B\uA74D\u0275]/g},{base:"oi",letters:/[\u01A3]/g},{base:"ou",letters:/[\u0223]/g},{base:"oo",letters:/[\uA74F]/g},{base:"p",letters:/[\u0070\u24DF\uFF50\u1E55\u1E57\u01A5\u1D7D\uA751\uA753\uA755]/g},{base:"q",letters:/[\u0071\u24E0\uFF51\u024B\uA757\uA759]/g},{base:"r",letters:/[\u0072\u24E1\uFF52\u0155\u1E59\u0159\u0211\u0213\u1E5B\u1E5D\u0157\u1E5F\u024D\u027D\uA75B\uA7A7\uA783]/g},{base:"s",letters:/[\u0073\u24E2\uFF53\u00DF\u015B\u1E65\u015D\u1E61\u0161\u1E67\u1E63\u1E69\u0219\u015F\u023F\uA7A9\uA785\u1E9B]/g},{base:"t",letters:/[\u0074\u24E3\uFF54\u1E6B\u1E97\u0165\u1E6D\u021B\u0163\u1E71\u1E6F\u0167\u01AD\u0288\u2C66\uA787]/g},{base:"tz",letters:/[\uA729]/g},{base:"u",letters:/[\u0075\u24E4\uFF55\u00F9\u00FA\u00FB\u0169\u1E79\u016B\u1E7B\u016D\u00FC\u01DC\u01D8\u01D6\u01DA\u1EE7\u016F\u0171\u01D4\u0215\u0217\u01B0\u1EEB\u1EE9\u1EEF\u1EED\u1EF1\u1EE5\u1E73\u0173\u1E77\u1E75\u0289]/g},{base:"v",letters:/[\u0076\u24E5\uFF56\u1E7D\u1E7F\u028B\uA75F\u028C]/g},{base:"vy",letters:/[\uA761]/g},{base:"w",letters:/[\u0077\u24E6\uFF57\u1E81\u1E83\u0175\u1E87\u1E85\u1E98\u1E89\u2C73]/g},{base:"x",letters:/[\u0078\u24E7\uFF58\u1E8B\u1E8D]/g},{base:"y",letters:/[\u0079\u24E8\uFF59\u1EF3\u00FD\u0177\u1EF9\u0233\u1E8F\u00FF\u1EF7\u1E99\u1EF5\u01B4\u024F\u1EFF]/g},{base:"z",letters:/[\u007A\u24E9\uFF5A\u017A\u1E91\u017C\u017E\u1E93\u1E95\u01B6\u0225\u0240\u2C6C\uA763]/g}],E=e=>{let t=e;for(let e=0;e<x.length;e++)t=t.replace(x[e].letters,x[e].base);return t},T=e=>E(e).toLowerCase(),S=(e,t)=>!!t&&t.includes(e),I=(e,t)=>{if(!t)return e.filter(({archived:e})=>!e);const n=T(t);return e.filter(e=>{const{description:t,label:r,id:i,archived:o}=e,a=i?T(i):void 0,s=r?T(r):void 0,c=t?T(t):void 0;return!o&&(S(n,a)||S(n,s)||S(n,c))})},w=j("id"),_=(e,t)=>{const n=e[t];return n?Promise.resolve(n):Promise.reject(Object(C.d)(t))},N=({all:e})=>{let t=null,n=null;const r=()=>{if(t)return t;t=e();return t},i={byId:e=>n?_(n,e):r().then(t=>{n=Object(v.a)(w)(t);return _(n,e)}),refreshCache:e=>{t=null;n=null;return i.byId(e)},search:e=>r().then(t=>{const{count:n,offset:r,query:i}=e;if("number"!=typeof r||r<0)return Promise.reject(Object(C.e)("FetchAllResolvers must be called with non-negative numeric offsets, non-numeric or negative offsets will result in pagination not working"));const o=I(t,i),a=o.slice(r,r+n),s=r>=o.length?o.length:r+a.length;return{hasMore:o.length>s,offset:s,references:a}})};return i};var A=n(1447);const D=({fetchAll:e,formatFetchAllResponse:t,referenceType:n})=>{Object(A.a)(n);return{api:N({all:()=>e().then(t).catch(e=>Promise.reject(Object(C.b)(e)))}),referenceType:n,useFetchQuery:y.a,useSearchQuery:y.b}},k="HIDDEN";var P=n(1408);const R=e=>!(!e.permission||e.permission.accessLevel!==k),F=(e,t,n)=>{const r=t?n.filter(e=>e.pipelineId===t):[...n];r.sort((e,t)=>R(e)!==R(t)?R(e)?1:-1:e.displayOrder-t.displayOrder);return r.flatMap(n=>[...n.stages].sort((e,t)=>e.displayOrder-t.displayOrder).map(r=>({id:r.stageId,label:t||!Object(P.b)(e)?r.label:`${r.label} (${n.label})`,disabled:R(n),additionalProperties:{pipelineId:n.pipelineId,label:n.label}})))},L=({objectTypeId:e,pipelineId:t,httpClient:n})=>D({fetchAll:()=>n.get("pipelines/v2/pipelines/"+encodeURIComponent(e),{query:{portalId:a.a.get(),includePermissions:!0}}),formatFetchAllResponse:F.bind(null,e,t),referenceType:i.e});n.d(t,"b",(function(){return U}));n.d(t,"a",(function(){return H}));const M={[i.a]:{},[i.b]:{},[i.c]:{},[i.d]:{},[i.f]:{},[i.e]:{}},B=(e,t,n)=>{switch(e){case i.e:{const{pipelineId:e}=n;return`${t}/${e}`}default:return t}},U=e=>[i.a,i.b,i.c,i.d,i.f,i.e].includes(e),V=(e,t,n)=>{const{httpClient:r}=n;if(e===i.a)return l({httpClient:r});if(e===i.b)return h({httpClient:r});if(e===i.c)return f({httpClient:r});if(e===i.d)return Object(g.a)({httpClient:r});if(e===i.f)return O({httpClient:r});if(e===i.e){return L({objectTypeId:t,pipelineId:n.pipelineId,httpClient:r})}throw Error("Attempted to create custom resovler for reference type that is not supported")},H=(e,t,n)=>{M[e]||(M[e]={});const r=B(e,t,n);if(M[e][r])return M[e][r];const i=V(e,t,n);M[e][r]=i;return i}},,,function(e,t,n){"use strict";var r=n(1212),i=n.n(r),o=n(30),a=n.n(o),s=n(1213),c=n(1214),l=n(0),u=n.n(l),d=n(1215),p=n(2),h=n(41),m=n.n(h),f=n(40),g=n(288),b=n.n(g),O=n(2618),y=n(287),j=n.n(y),v=n(327),C=n(324),x=n(45);const E=["namespace","inlineToolbarContainer","useAnimatedToolbar","hasFocus","forwardRef","showToolbarShepherd"],T=Object(y.keyframes)(["0%{transform:translate3d(0,0,0);box-shadow:0 1px 5px ",";}100%{transform:translate3d(0,-100%,0);box-shadow:0 1px 5px ","}"],Object(v.b)(C.PANTERA,.33),Object(v.b)(C.PANTERA,0)),S=Object(y.keyframes)(["0%{transform:translate3d(0,-100%,0);box-shadow:0 1px 5px ",";}100%{transform:translate3d(0,0,0);box-shadow:0 1px 5px ",";}"],Object(v.b)(C.PANTERA,0),Object(v.b)(C.PANTERA,.33)),I=j()(O.a).withConfig({displayName:"InlineToolbar__StaticStyledToolbar",componentId:"sc-4hof4h-0"})(["box-shadow:0 1px 5px ",";"],Object(v.b)(C.PANTERA,.15)),w=j()(O.a).withConfig({displayName:"InlineToolbar__AnimatedStyledToolbar",componentId:"sc-4hof4h-1"})(["animation-name:",";animation-duration:",";animation-timing-function:",";animation-fill-mode:forwards;"],e=>e.hasFocus?S:T,e=>e.hasFocus?".375s":".25s",e=>e.hasFocus?"ease-out":"ease-in");function _(e){const{namespace:t,inlineToolbarContainer:n,useAnimatedToolbar:r,hasFocus:i,forwardRef:o,showToolbarShepherd:a}=e,s=Object(p.a)(e,E),c=r?w:I,l=e.editor,u=b()("mce-toolbar",t),d=Object(f.useRef)();Object(f.useEffect)(()=>{const e=d.current;i&&(e.style.display="flex");const t=()=>{i||(e.style.display="none");l.fire("ToolbarAnimationEnd",{hasFocus:i})};e.addEventListener("animationend",t);return()=>{e.removeEventListener("animationend",t)}},[l,n,i]);Object(f.useEffect)(()=>{l.inlineToolbarContainer=n;return()=>{l.inlineToolbarContainer=null}},[l,n]);return Object(x.jsx)("div",{tabIndex:"-1",role:"application",className:u,children:Object(x.jsx)(c,Object.assign({},s,{forwardRef:e=>{o&&o(e);d.current=e},hasFocus:i,centerControls:!0,showToolbarShepherd:a&&i}))})}_.propTypes={inlineToolbarContainer:m.a.instanceOf(Element).isRequired,useAnimatedToolbar:m.a.bool,editor:m.a.object.isRequired,hasFocus:m.a.bool.isRequired,namespace:m.a.string,forwardRef:m.a.func,showToolbarShepherd:m.a.bool};_.defaultProps={useAnimatedToolbar:!1};var N=n(1225),A=n(1226),D=n(1223);function k(e){return function(t){const{editor:n,hasFocus:r,inlineToolbarContainer:i}=t,o=Object(f.useRef)(0),a=Object(f.useRef)(null);Object(f.useEffect)(()=>{n.getDoc().body.style.setProperty("transition","padding-top .33s ease","important")},[n]);Object(f.useEffect)(()=>{function e(){const e=i.clientHeight,t=n.getWin(),s=n.getDoc().body,c=e-t.pageYOffset;let l=0;l=c>0&&r?c:0;l!==o.current&&(a.current=requestAnimationFrame(()=>{o.current=l;s.style.setProperty("padding-top",l+"px","important")}))}e();window.addEventListener("scroll",e);return()=>{window.removeEventListener("scroll",e);a.current&&cancelAnimationFrame(a.current)}},[r,n,i]);return Object(x.jsx)(e,Object.assign({},t))}}const P=e=>{const t=[];return e.filter((e,n,r)=>{if(t.includes(n))return!0;return void 0===r.find((r,i)=>{if(i===n)return!1;const o=[[e.x,e.y],[e.x+e.width,e.y+e.height]],a=[[r.x,r.y],[r.x+r.width,r.y+r.height]];if(a[0][0]>=o[0][0]&&a[0][1]>=o[0][1]&&a[1][0]<=o[1][0]&&a[1][1]<=o[1][1]){t.push(i);return!0}return!1})})},R=({top:e,left:t,height:n,width:r},i,o)=>{const a=document.createElement("div");a.style.position="absolute";a.style.zIndex=10;a.style.userSelect="none";a.style.top=0;a.style.left=0;a.style.transform=`translate3d(${t-o}px, ${e-i}px, 0)`;a.style.height=n+"px";a.style.width=r+"px";a.style.backgroundColor="rgba(0, 0, 0, 0.17)";a.dataset.mceBogus=!0;return a};function F(e){return class extends f.Component{constructor(){super();this.handleSelectionChange=this.handleSelectionChange.bind(this);this.handleNodeChange=this.handleNodeChange.bind(this);this.drawSelection=this.drawSelection.bind(this);this.cleanSelection=this.cleanSelection.bind(this);this.setFocus=this.setFocus.bind(this);this.handleBlur=this.handleBlur.bind(this);this.selectionContainer=null;this.isFocused=null}componentDidMount(){const{editor:e}=this.props;e.getDoc().addEventListener("selectionchange",this.handleSelectionChange);e.on("NodeChange",this.handleNodeChange);e.on("SetContent",this.cleanSelection);e.on("focus",this.setFocus);e.on("blur",this.handleBlur)}componentWillUnmount(){const{editor:e}=this.props;if(!e.destroyed){this.cleanSelection();e.getDoc().removeEventListener("selectionchange",this.handleSelectionChange);e.off("NodeChange",this.handleNodeChange);e.off("SetContent",this.cleanSelection);e.off("focus",this.setFocus);e.off("blur",this.handleBlur)}}setFocus(){this.isFocused=!0}handleBlur(){this.isFocused=!1;this.cleanSelection()}getFakeSelectionId(){return`editor-${this.props.editor.id}-fake-selection`}hasDrawnSelection(){return this.selectionContainer&&this.selectionContainer.nodeType===Node.ELEMENT_NODE}getOldSelection(){return this.props.editor.dom.get(this.getFakeSelectionId())}handleNodeChange(){this.hasDrawnSelection()&&this.handleSelectionChange()}handleSelectionChange(){const{editor:e}=this.props;if(e.destroyed)return;const t=e.selection,n=e.getWin().getSelection();this.hasDrawnSelection()&&this.cleanSelection();if(!t.isCollapsed()&&n.isCollapsed){const e=t.getRng(),n=Object(d.a)(P,Array.from)(e.getClientRects());this.drawSelection(n)}}drawSelection(e){if(!Array.isArray(e)){console.warn(`rangeRects must be an array, got ${typeof e} instead`);return}if(!this.isFocused)return;const{editor:t}=this.props,n=t.getBody(),r=n.getBoundingClientRect(),i=r.left,o=r.top;this.selectionContainer=document.createElement("div");this.selectionContainer.id=this.getFakeSelectionId();this.selectionContainer.dataset.mceBogus=!0;e.forEach(e=>{const t=R(e,o,i);this.selectionContainer.appendChild(t)});n.appendChild(this.selectionContainer)}cleanSelection(){const e=this.getOldSelection();if(this.hasDrawnSelection()){this.props.editor.dom.remove(this.selectionContainer);this.selectionContainer=null}else e&&this.props.editor.dom.remove(e)}render(){return Object(x.jsx)(e,Object.assign({},this.props))}}}var L=n(1224);function M(e){const t=Object(L.a)(e);return e=>{const n=Object(d.h)(["Event","prototype","stopPropagation"],window),r=Object(d.h)(["jQuery","Event","prototype","stopPropagation"],window),i=function(){t(this.target)||n.apply(this)},o=function(){t(this.target)||r.apply(this)};return class extends f.Component{componentDidMount(){Event.prototype.stopPropagation=i;r&&(window.jQuery.Event.prototype.stopPropagation=o)}componentWillUnmount(){Event.prototype.stopPropagation=n;r&&(window.jQuery.Event.prototype.stopPropagation=r)}render(){return Object(x.jsx)(e,Object.assign({},this.props))}}}}var B=n(345);var U=(e,t,n)=>r=>{e.on("init",t);e.on("remove",n);class i extends f.Component{constructor(...e){super(...e);this.state={disabled:!0};this.handleBlur=()=>{this.setState({disabled:!0})};this.handleFocus=()=>{this.setState({disabled:!1})}}componentDidMount(){e.on("blur",this.handleBlur);e.on("focus",this.handleFocus)}componentWillUnmount(){e.off("blur",this.handleBlur);e.off("focus",this.handleFocus)}render(){return Object(x.jsx)(r,Object.assign({toolbarTooltip:e.settings.toolbarTooltip},this.props,{disabled:this.state.disabled}))}}i.displayName=`PersistentToolbar(${Object(B.a)(r)})`;return i};var V=(e,t,n)=>r=>{const i=e.settings.focusEvents||"focus",o=e.settings.blurEvents||"blur remove";e.on(i,t);e.on("remove",n);function a(t){const[n,a]=Object(f.useState)(!1),s=Object(f.useRef)(!1);Object(f.useEffect)(()=>{a(!0);const t=()=>{s.current&&a(!0)},n=()=>{s.current&&a(!1)};s.current=!0;e.on(i,t);e.on(o,n);return()=>{s.current=!1;e.off(i,t);e.off(o,n)}},[]);return Object(x.jsx)(r,Object.assign({},t,{useAnimatedToolbar:!0,hasFocus:n}))}a.displayName=`TransientToolbar(${Object(B.a)(r)})`;return a},H=n(1227);function q(e){let t;const n=e.settings,r=i.a.DOM.select(n.fixed_toolbar_container)[0],o=Object(N.a)(e),a=!!n.canvasToolbar;let s;if(a){const t=[n.persistToolbar?U(e,l,p):V(e,l,p),F,...n.propagationOverride?[M(o)]:[],...n.toolbarSpace?[k]:[]];s=Object(d.a)(...t)(_)}const c=()=>{const i=e.getElement();if(!t){t=document.createElement("div");t.id=e.id+"__editor-container"}a?r.parentElement.appendChild(t):i.parentNode.appendChild(t);Object(H.c)(e);Object(H.b)(e);Object(H.a)(e);n.content_editable=!0;return{editorContainer:t}};if(!n.inline)throw new Error("[tinymce-themes] the inline-canvas theme only supports inline mode");if(a&&!n.fixed_toolbar_container)throw new Error("[tinymce-themes] the inline-canvas theme requires a container to render into");function l(){u.a.render(Object(x.jsx)(s,{editor:e,toolbar:n.canvasToolbar,namespace:o,inlineToolbarContainer:r,showToolbarShepherd:!!e.settings[D.b],shepherdClassName:"mce-shepherd"}),r)}function p(){try{u.a.unmountComponentAtNode(r)}catch(e){console.error(e)}}return{renderUI:c}}i.a.ThemeManager.add(A.b,q);n(1228),n(1230);var G=n(2591),W=n(2602),z=n(2596),$=n(1296),K=n(1232),Y=n(1242);function X(e){Object(K.b)(e,t=>{const n=t.querySelectorAll("body");if(1===n.length){const t=n[0].innerHTML.replace(/(?:\r\n|\r|\n)/g,"<br>");e.dom.replace(e.dom.create("body",{},t),n[0])}});Object(K.a)(e,t=>{Array.from(t.querySelectorAll("p")).forEach(t=>{e.dom.replace(e.dom.createFragment(t.innerHTML),t)});Array.from(t.querySelectorAll("br")).forEach(t=>{e.dom.replace(e.dom.createFragment("\n"),t)})})}i.a.PluginManager.add(Y.e,X);var J=n(1259),Q=n(1282),Z=n(1294),ee=n(1240),te=n(1298),ne=n(1299);const re=["-span[*]","img[!data-mce-hubspot-object|src|class|style]"].join(","),ie=["br","p"].join(",");n.d(t,"a",(function(){return ae}));const oe={[ne.e]:{flag:"useFlexibleAssociations"}};i.a.baseURL=Object(c.b)("tinymce","/js/tinymce");const ae=(e={})=>{const{trackInteraction:t,usageTracker:n,appName:r,appUrl:i=Object(s.a)(),gates:o,hideTokenFallbacks:l=!0,allowEmptyTokenFallbacks:u=!1,includeInternalContactRecord:d,includeSiteSettings:p=!0,includeSubscriptionType:h=!0,isEmail:m=!1,isRtl:f,supportedCrmObjectFQNs:g=[],customObjectPrefixes:b={},enableEmoji:O=!1,pickerComponents:y,placeholder:j,isMultiline:v=!0,isEscapeNewlines:C=!1,useDataTokens:x=!1,dataTokenContext:E,unsupportedTokens:T,unsupportedDataTokenPaths:S,useDefaultLabelForCrmObjectTypes:I=!1,maxTokenWidth:w}=e;let _;_=x?z.a:W.a;const N=["autoresize","paste",G.a,_],D=Object(te.a)(oe,o);O&&N.push($.a);C&&N.push(Y.e);const k=[...N,...D.plugins].join(" "),{useFlexibleAssociations:P=!1}=D.flags,R=[re];v&&R.push(ie);return{appUrl:i,forced_root_block:!1,apiClient:a.a,skin:!1,statusbar:!1,menubar:!1,valid_elements:R.join(","),browser_spellcheck:!0,plugins:k,inline:!0,theme:A.b,content_css:Object(c.b)("tinymce-themes","/bundles/personalization-field.css"),toolbar:[],canvasToolbar:void 0,paste_as_text:!0,autoresize_bottom_margin:0,paste_data_images:!0,formats:{hsInlineTarget:J.d},placeholder:j,directionality:f?"rtl":"ltr",[ee.a]:!1,[ee.b]:{richTextLibStaticPrefix:Object(c.a)("rich-text-lib"),trackInteraction:t,usageTracker:n,isEmail:m,appName:r,pickerComponents:y,[_]:{[Q.g.HIDE_SITE_SETTINGS_CATEGORY]:!p,[Q.g.INCLUDE_SUBSCRIPTION_TYPE_CATEGORY]:h,[Q.g.SUPPORTED_CRM_OBJECT_FQNS]:g,[Q.g.CUSTOM_OBJECT_PREFIXES]:b,[Q.g.INCLUDE_INTERNAL_CONTACT_RECORD]:m&&d,[Q.g.ALLOW_EMPTY_FALLBACKS]:u,[Q.g.IS_EMAIL]:m,[Q.g.HIDE_FALLBACKS]:l,[Q.g.USE_FLEXIBLE_ASSOCIATIONS]:P,[Q.g.TOKEN_PATHS_CONTEXT]:E,[Q.g.UNSUPPORTED_TOKENS]:T,[Z.d.UNSUPPORTED_DATA_TOKEN_PATHS]:S,[Z.d.USE_DEFAULT_LABEL_FOR_CRM_OBJECT_TYPES]:I,[Z.d.MAX_TOKEN_WIDTH]:w}},gates:o}}},function(e,t,n){"use strict";var r=n(2825),i=n(1193),o=n(1),a=n.n(o),s=n(9),c=n.n(s),l=n(159);function u(){return c.a.getShort("filemanager")}const d=(e,t)=>`${a.a.get()}.fs1.hubspotusercontent${e}${t}.net`,p=e=>"qa"===e?"qa":"",h=()=>c.a.getHublet()!==l.na1;function m(){const e=p(u());return d(e,"-"+c.a.getHublet())}var f=n(181),g=n.n(f);n(2820);g.a.Set(["jpg","jpeg","png","gif","webp"]);const b={SQUARE:"SQUARE",LANDSCAPE:"LANDSCAPE",PORTRAIT:"PORTRAIT"};b.SQUARE,b.LANDSCAPE,b.PORTRAIT,b.SQUARE,b.LANDSCAPE,b.PORTRAIT;var O;n(1192);!function(e){e.ICON="icon";e.THUMB="thumb";e.PREVIEW="preview";e.MEDIUM="medium"}(O||(O={}));n(1194);const y=1e6;n(29);n.d(t,"e",(function(){return I}));n.d(t,"b",(function(){return N}));n.d(t,"c",(function(){return A}));n.d(t,"d",(function(){return D}));n.d(t,"a",(function(){return k}));const j=/\/hubfs\/([0-9]+)\/(.*)/,v=/\/hubfs\/(.*)/,C=/\/hub\/([0-9]+)\/(.*)/,x=/\/hs-fs\/(.*)/,E=/([0-9]{1,})\.fs[1-9]{1,}\.hubspotusercontent(?:qa)?-(?:[A-z0-9]+)(?:-sl[0-9{1,}])?.net/,T=/^.+\.hubspotpagebuilder(qa)?(-[A-z0-9]+)?\..+/,S=e=>e.startsWith("f.hubspotusercontent")||e.startsWith("fs.hubspotusercontent");function I(e,t){return!(!h()||e!==m())||(Boolean(e.match(E))||Boolean(e.match(T))||S(e)||["cdn2.hubspotqa.com","cdn2.hubspotqa.net","cdn2.hubspot.com","cdn2.hubspot.net"].includes(e))}function w(e){if(Object.keys(i.c).includes(e))return e;const t=i.h.findKey(t=>t.includes(e));return t||i.c.OTHER}function _(e){return e.get("type")?e.get("type"):w(e.get("extension"))}function N(e){return _(e)===i.c.IMG}function A(e){return N(e)&&"svg"===e.get("encoding")}const D=e=>e.get("size")>=y;function k(e){const t=new r.a(e).pathname;let n=t.match(j);if(n&&n.length)return!0;n=t.match(v);if(n&&n.length)return!0;n=t.match(C);if(n&&n.length)return!0;n=t.match(x);return!(!n||!n.length)}},,function(e,t,n){"use strict";var r=n(1234);const i='<b id="google-docs-import">';var o=n(29),a=n(307),s=n(46);function c(e){Object(s.a)("string"==typeof e,"Expected 'clipboardContent' to be a string of HTML, received "+typeof e);Object(s.a)(e.length>0,"Expected clipboardContent to have content, received empty string")}var l=n(1235),u=n(1236);const d={BOLD:"700",ITALIC:"italic",STRIKETHROUGH:"line-through",SUPERSCRIPT:"super",SUBSCRIPT:"sub"},p={ANCHOR:"a",BOLD:"strong",ITALIC:"em",STRIKETHROUGH:"del",SUPERSCRIPT:"sup",SUBSCRIPT:"sub",H2:"h2",H3:"h3"},h=["H1","H2","H3","H4","H5","H6"],m=["OL","UL","LI"],f=["TR","TD","TABLE"],g=["SPAN","B","I"],b=["P","A","SPAN",...h,...m,...f],O=/docs-internal-guid/,y=/#cmnt_ref\d+|#cmnt\d+/,j=/^https?:\/\/www.google.com\/url\?/,v=/lst-kix_(\w*)-(\d*)/;let C={};const x=["font-size","color","background-color"];let E;const T=e=>y.test(e),S="rgb(17, 85, 204)",I=()=>{E=x.reduce((e,t)=>{e[t]={};return e},{})},w=(e,t,n)=>{E[e][t]=(E[e][t]||0)+n},_=e=>{x.forEach(t=>{let n="";const r=E[t];Object.keys(r).forEach(e=>{(r[e]>r[n]||!n)&&(n=e)});r[n]/e.textContent.length<.75||Object(u.c)(e=>{const r=Object(a.b)(e,"P"),i=r&&r.style[t],o=Object(a.b)(e,"LI"),s=o&&o.style[t];null===i||e.style[t]!==n||i&&i!==n||e.style.removeProperty(t);null===s||e.style[t]!==n||s&&s!==n||e.style.removeProperty(t);Object(u.a)(e)},e.querySelectorAll(`[style*="${t}"]`))})},N=e=>{e.style.removeProperty("text-decoration");e.style.color===S&&e.style.removeProperty("color")},A=e=>{if(j.test(e)){const t=e.slice(e.indexOf("?")+1);return Object(o.parse)(t).q||e}return e},D=({border:e,margin:t})=>-1!==e.indexOf("1px")&&-1!==e.indexOf("solid")&&-1!==e.indexOf("black")&&"5px"===t,k=e=>{if(!e)return!1;const{color:t,fontFamily:n,fontSize:r,lineHeight:i,margin:o,padding:a,textAlign:s}=e;return"rgb(0, 0, 0)"===t&&"Arial"===n&&"11pt"===r&&"1"===i&&"0px"===o&&"0px"===a&&"left"===s},P=e=>"DIV"===e.nodeName&&1===e.childNodes.length&&f.includes(e.childNodes[0].nodeName),R=({childNodes:e})=>{for(let t=0;t<e.length;t++)if(!k(e[t].style))return!1;return!0},F=(e,t)=>{if(""===t)return document.createElement("a").append(...e);const n=document.createElement("a");n.href=A(t);let r=e[0];for(;r&&"SPAN"!==r.nodeName;){const e=r.childNodes;r=e.length?e[0]:null}if(r&&"SPAN"===r.nodeName){N(r);n.style.cssText=r.style.cssText;r.removeAttribute("style")}n.append(...e);return n},L=(e,t)=>{const n=document.createElement(t);n.appendChild(e.cloneNode(!0));return n},M=(e,t)=>{let n=t.cloneNode(!0);const r=[["fontWeight","BOLD"],["fontStyle","ITALIC"],["textDecoration","UNDERLINE"],["textDecoration","STRIKETHROUGH"],["verticalAlign","SUPERSCRIPT"],["verticalAlign","SUBSCRIPT"]];e&&e.style&&r.forEach(([t,r])=>{e.style[t]===d[r]&&(n=L(n,p[r]))});return n},B=e=>{const t=[];function n(e){[...e.childNodes].forEach(e=>{t.push(e);e.childNodes.length&&n(e)})}e.childNodes.length&&n(e);return t},U=e=>{const t=e.cloneNode(!0);let n,r=document.createTextNode(t.textContent);t.childNodes.length&&("title"===t.className?r=L(r,p.H2):"subtitle"===t.className?r=L(r,p.H3):t.childNodes[0].style&&(n=t.childNodes[0]));r=M(n,r);return r},V={"font-style":{italic:"em"},"font-weight":{bold:"strong",700:"strong"},"vertical-align":{sub:"sub",super:"sup"}},H=e=>{let t=!1,n=e;const r=e.style;for(let i=0;i<r.length;i++){const o=r[i];if(Object.prototype.hasOwnProperty.call(V,o)){const i=V[o][r[o]];if(i){"vertical-align"===o&&e.style.removeProperty("font-size");e.style.removeProperty(o);n=document.createElement(i);n.append(...Y(e));t=n.childNodes.length>0;break}}}return{didStyle:t,styledNode:n}},q=(e,t,n)=>{const r=v.exec(e);if(r){const[,i,o]=r;if(-1!==e.indexOf("start")){n.appendChild(t);if(C[i]){C[i][o]=n;C[i][""+(o-1)].appendChild(n);return!0}C[i]={[o]:n};return!1}C[i][o].appendChild(t);return!0}return!1},G=e=>{const{className:t,childNodes:n}=e,r=e.cloneNode(!1);r.removeAttribute("id");r.removeAttribute("class");const i=document.createDocumentFragment(),o=[];for(let e=0;e<n.length;e++){const t=n[e];if("A"===t.nodeName&&T(t.href))return[];o.push(...Y(t))}o.map(e=>i.appendChild(e));if(q(t,i,r))return[];r.appendChild(i);return[r]},W=e=>"#text"===e.nodeName?""===e.textContent:"IMG"===e.nodeName?!e.src:""===e.innerHTML,z=e=>{e.style.removeProperty("padding");if(e.style.marginLeft&&"P"===e.nodeName){const t=1.333*Number(e.style.marginLeft.replace(/[A-Za-z]./,"")),n=t-t%40;n&&(e.style.paddingLeft=n+"px")}e.style.removeProperty("margin")},$={border:["TABLE","TD"],textDecoration:["underline","line-through"],textAlign:["center","right","justify"],backgroundColor:["transparent","rgb(255, 255, 255)"]},K=e=>{z(e);Object.keys(V).forEach(t=>{e.style.removeProperty(t)});$.border.includes(e.nodeName)||e.style.removeProperty("border");$.textDecoration.includes(e.style.textDecoration)||e.style.removeProperty("text-decoration");"P"===e.nodeName&&$.textAlign.includes(e.style.textAlign)||e.style.removeProperty("text-align");$.backgroundColor.includes(e.style.backgroundColor)&&e.style.removeProperty("background-color");"LI"===e.nodeName&&e.style.removeProperty("font-size");if("SPAN"===e.nodeName&&0===e.style.length&&e.firstChild)return 1===e.childNodes.length?e.firstChild:e;x.forEach(t=>{const n=e.style[t];if(n){const r=e.textContent.length;w(t,n,r)}});return e},Y=e=>{if("SPAN"===e.nodeName){const{didStyle:t,styledNode:n}=H(e);if(t)return[n]}"#text"!==e.nodeName&&(e=K(e));if(e.childNodes&&!P(e)&&(e.childNodes.length<=1||b.includes(e.nodeName)||"DIV"===e.nodeName&&D(e.style))&&!O.test(e.id)){let t=null,n=document.createTextNode(e.textContent);if(m.includes(e.nodeName)||f.includes(e.nodeName)||h.includes(e.nodeName))return G(e);if("P"===e.nodeName){if(e.childNodes.length>1)return G(e);t=e.cloneNode(!1);t.removeAttribute("id");t.removeAttribute("class");const r=B(e);if(0===r.length)return[];n=r.length>1?Y(e.childNodes[0]):U(e)}else{if("#text"===e.nodeName)return[n];if("BR"===e.nodeName||"HR"===e.nodeName){n=document.createElement(e.tagName);return[n]}if("IMG"===e.nodeName)return[e.cloneNode(!0)];if("A"===e.nodeName){if(T(e.href))return[];const t=[];for(let n=0;n<e.childNodes.length;n++){const r=Y(e.childNodes[n]);t.push(...r)}if(0===t.length)return[];n=F(t,e.href);return[n]}if("DIV"===e.nodeName&&D(e.style)&&R(e))return[];if(g.includes(e.nodeName)){const t=[];for(let n=0;n<e.childNodes.length;n++){const r=Y(e.childNodes[n]);t.push(...r)}if(0===t.length)return[];switch(e.nodeName){case"I":n=document.createElement("em");break;case"B":n=document.createElement("strong");break;case"SPAN":if(1===t.length&&"A"===t[0].nodeName){n=t[0];N(e);n.style.cssText=e.style.cssText;return[n]}n=e.cloneNode(!1);break;default:n=e.cloneNode(!1)}n.append(...t);return[n]}t=e.cloneNode(!1);n=e.childNodes.length?Y(e.childNodes[0]):[]}if(t){Array.isArray(n)?n.forEach(e=>{W(e)||t.appendChild(e)}):W(n)||t.appendChild(n);return""===t.innerHTML?[]:[t]}return[e.cloneNode(!0)]}if(e.childNodes){const t=[];for(let n=0;n<e.childNodes.length;n++){const r=Y(e.childNodes[n]);t.push(...r)}return t}return[e]},X=e=>"#comment"!==e.nodeName&&("META"!==e.nodeName&&"STYLE"!==e.nodeName&&("#text"!==e.nodeName||"BODY"!==e.parentNode.nodeName||!(null===e.previousSibling&&e.nextSibling||e.previousSibling&&null===e.nextSibling))),J=e=>{I();const t=document.createElement("body"),n=e.childNodes,r=[];for(let e=0;e<n.length;e++)if(X(n[e])){const t=Y(n[e]);r.push(...t)}r.map(e=>t.appendChild(e.cloneNode(!0)));_(t);C={};return t};function Q(e,t=l.a){c(e);return J(t(e.replace(/(\r\n|\n|\r)/,""))).outerHTML}const Z=e=>Q(e),ee=e=>!(!e||"string"!=typeof e)&&/^#([0-9A-F]{6}|[0-9A-F]{3})$/i.test(e),te=e=>{let t=Number(e).toString(16);t.length<2&&(t="0"+t);return t},ne=({r:e,g:t,b:n})=>{const r=`#${te(e)}${te(t)}${te(n)}`;if(!ee(r))throw new Error("RGB value passed to convertRgbToHex results in invalid hex value.");return r},re=/rgba?\((\d+), (\d+), (\d+),? ?(\d\.?\d?)?\)/,ie=e=>{const t=e.match(re);if(!t)throw new Error("Invalid RGB string passed to convertRgbStringToHex");const[n,r,i,o,a]=t;return ne({r:r,g:i,b:o})},oe="MsoListParagraphCxSpFirst",ae="MsoListParagraphCxSpMiddle",se="MsoListParagraphCxSpLast",ce=[oe,ae,se],le=/mso-list:Ignore/,ue="#1155cc",de=/[\u2022\u00b7\u00a7\u25CFoo]/g,pe="mso-list:Ignore",he=e=>e.replace(/\s+/g,"").trim(),me=()=>{let e={};return{trackStyle:(t,n)=>{e[t]?e[t]+=n:e[t]=n},reset:()=>{e={}},getStyleCount:t=>e[t],getMajorityStyling:()=>Object.keys(e).reduce((t,n)=>(e[t]||0)>(e[n]||0)?t:n,null)}},fe=(()=>{const e={"font-size":me(),color:me(),"background-color":me()},t=()=>Object.keys(e),n=t=>e[t],r=e=>{t().forEach(t=>{const r=n(t),i=e.style[t];if(i){const t=he(e.textContent).length;r.trackStyle(i,t)}})};return{reset:()=>{Object.values(e).forEach(e=>e.reset())},getTracker:n,getTrackedStyles:t,trackNodeStyles:r}})(),ge=(e,t,n,r)=>{const i=Object(a.b)(e,r),o=i&&i.style[t],s=i&&""!==o,c=e.style[t]===n;!s&&c&&e.style.removeProperty(t);o===n&&c&&e.style.removeProperty(t)},be=(e,t,n)=>{ge(e,t,n,"P");ge(e,t,n,"LI");Object(u.a)(e)},Oe=e=>{fe.getTrackedStyles().forEach(t=>{const n=fe.getTracker(t),r=n.getMajorityStyling();if(!r)return;const i=he(e.textContent).length;n.getStyleCount(r)/i<.75||Object(u.c)(e=>be(e,t,r),e.querySelectorAll(`[style*="${t}"]`))})},ye=e=>{const t=e.querySelector(`[style='${pe}']`);return t&&t.textContent.trim().match(de)?"ul":"ol"},je=/mso-list:\w+\slevel(\d)\s/,ve=e=>{const t=e.getAttribute("style").match(je),n=t&&t[1];return n?parseInt(n,10):1},Ce=e=>{const t=document.createElement("li");Object(u.c)(e=>{Se(e).forEach(e=>{t.appendChild(e)})},e.childNodes);return t},xe=(e,t,n=1)=>{if(t===n)return e;const r=e.querySelector("ol, ul");return r?xe(r,t,n+1):e},Ee=(e,t=1,n=null)=>{const r=ye(e),i=ve(e),o=Ce(e),a=n&&n.cloneNode(!0)||document.createElement(r),s=e.nextElementSibling;if(s&&ce.includes(s.className)){if(i===t){xe(a,t).appendChild(o);return Ee(s,i,a)}if(i<t){xe(a,i).appendChild(o);return Ee(s,i,a)}{const e=document.createElement(r);e.appendChild(o);xe(a,t).appendChild(e);return Ee(s,i,a)}}a.appendChild(o);return a},Te=(e,t=!0)=>{if(e.childNodes&&t){const t=Te(e,!1);Object(u.c)(e=>{t.appendChild(Te(e,!0))},e.childNodes);return t}{const n=e.cloneNode(t);if(!n.style)return n;const r=n.style.marginLeft;if("LI"===n.nodeName&&r)n.style.marginLeft=null;else if(r){n.style.paddingLeft=r;n.style.marginLeft=null}return n}},Se=e=>{if(e.childNodes&&e.childNodes.length<=1){if("#comment"===e.nodeName)return[];if(e.outerHTML&&e.outerHTML.match(le))return[];const t=Te(e,!0);if("A"===t.nodeName){const e=t.firstChild;if(!e)return[];if("SPAN"===e.nodeName&&e.style){const t=e.style.color;t&&t.match(re)?t&&ie(t)===ue&&(e.style.color=null):"blue"===t&&(e.style.color=null)}}return[t]}if(e.className===oe)return[Ee(e)];if(e.className===ae||e.className===se)return[];if(e.childNodes){const t=Te(e,!1),n=[];Object(u.c)(e=>{n.push(...Se(e))},e.childNodes);n.forEach(e=>{t.appendChild(e)});return[t]}return[Te(e)]},Ie=e=>{fe.reset();const t=document.createElement("body"),n=e.childNodes;Object(u.c)(e=>{Se(e).forEach(e=>{t.appendChild(e)})},n);Object(u.c)(e=>{e.style&&fe.trackNodeStyles(e)},t.querySelectorAll("[style]"));Oe(t);return t};function we(e,t=l.a){c(e);return Ie(t(e.replace(/(\r\n|\n|\r)/,""))).outerHTML}function _e(e){c(e);return Object(l.a)(e.replace(/(\r\n|\n|\r)/,"")).outerHTML}var Ne=n(1215);const Ae=e=>{const t=e.getAttribute("class");if("string"!=typeof t)return;const n=t.split(" ").filter(e=>e.includes("hs-"));0!==n.length?e.setAttribute("class",n.join(" ")):e.removeAttribute("class")},De=["OL","UL"];function ke(e,t,n,r,i){let o=e;if(t[e.nodeName]){o=document.createElement(t[e.nodeName]);Array.from(e.childNodes).forEach(e=>o.appendChild(e.cloneNode(!0)));e.parentNode&&e.parentNode.replaceChild(o,e)}if(n&&o.style){o.removeAttribute("style");Ae(o)}if("PRE"===o.nodeName){const e=o.innerHTML.replace(/\r?\n/g,"<br />");o.innerHTML=e}if("#text"!==o.nodeName){const e=o&&"function"==typeof o.getAttribute&&o.getAttribute("style")||"";let t=Object(u.g)(Object(u.d)(e),u.b);r[o.nodeName]&&(t=Object.assign({},r[o.nodeName],t));const n=Object(u.f)(t);n&&o.setAttribute("style",n)}De.includes(o.nodeName)&&o.previousElementSibling&&"LI"===o.previousElementSibling.nodeName&&o.parentNode&&De.includes(o.parentNode.nodeName)&&o.previousElementSibling.appendChild(o);const a=i[o.nodeName];a&&Object.keys(a).forEach(e=>{o.setAttribute(e,a[e])});Array.from(o.childNodes).forEach(e=>ke(e,t,n,r,i));return o}const Pe=(e={},t=!1,n={},r={})=>i=>{if(Object.keys(e).length||t||Object.keys(n).length||Object.keys(r).length){const o=Object(l.a)(i);Array.from(o.childNodes).forEach(i=>ke(i,e,t,n,r));return o.outerHTML}return i},Re=[{entity:"&#8232;",replacement:"<br />"},{entity:"\u2028",replacement:"<br />"}],Fe=e=>{let t=e;Re.forEach(({entity:e,replacement:n})=>{t=t.replace(e,n)});return t},Le=[{attribute:"data-metadata",keyword:"figmeta"},{attribute:"data-buffer",keyword:"figma"}],Me=e=>{if(!e.includes("\x3c!--(figmeta)")&&!e.includes("\x3c!--(figma)"))return e;const t=Object(l.a)(e);Le.forEach(({attribute:e,keyword:n})=>{t.querySelectorAll(`[${e}]`).forEach(t=>{(t.getAttribute(e)||"").includes(n)&&t.removeAttribute(e);0===t.childNodes.length&&t.parentElement&&t.parentElement.removeChild(t)})});return t.innerHTML};n.d(t,"a",(function(){return Ge}));n.d(t,"b",(function(){return $e}));const Be=i,Ue=new RegExp('id="docs-internal-guid'),Ve=/<meta name=ProgId content=Word\.Document>/,He=/style=("|')-.[a-z]-clipboard:true;"/i,qe=r.c,Ge={CONVERT_GOOGLE_IMPORT_TO_HTML:"googleImport",CONVERT_GOOGLE_TO_HTML:"google",CONVERT_MSWORD_TO_HTML:"msword",CONVERT_EVERNOTE_TO_HTML:"evernote",TINYMCE:"tinymce",UNKNOWN:"unknown"},We=[{test:Be,converter:Z,converterName:Ge.CONVERT_GOOGLE_IMPORT_TO_HTML},{test:Ue,converter:Q,converterName:Ge.CONVERT_GOOGLE_TO_HTML},{test:Ve,converter:we,converterName:Ge.CONVERT_MSWORD_TO_HTML},{test:He,converter:_e,converterName:Ge.CONVERT_EVERNOTE_TO_HTML},{test:qe,converter:e=>e,converterName:Ge.TINYMCE}],ze=e=>We.find(t=>e.match(t.test))||{converter:e=>e,converterName:Ge.UNKNOWN},$e=({formatTransformMap:e,clearAllStyles:t,defaultStylesMap:n,defaultAttributesMap:r}={})=>(i="")=>{const{converter:o,converterName:a}=ze(i);return{converter:Object(Ne.a)(Fe,Pe(e,t||a===Ge.UNKNOWN,n,r),Me,o),converterName:a}}},function(e,t,n){"use strict";var r=n(2),i=n(41),o=n.n(i),a=n(40),s=n(1215),c=n(539),l=n(287),u=n.n(l),d=n(324),p=n(327),h=n(768),m=n(1216),f=n(771),g=n(1217),b=n(1218),O=n(4),y=n(45);const j=u.a.div.withConfig({displayName:"Divider__DividerDiv",componentId:"sc-1xs4489-0"})(["border-left:1px solid ",";height:33px;margin-left:8px;margin-right:8px;display:",";"],d.BATTLESHIP,({multiRow:e})=>e?"none":"inline-block");function v({multiRow:e}){return Object(y.jsx)(j,{multiRow:e})}var C=n(434);const x=2/3,E=12,T={width:24,marginLeft:4};class S extends a.Component{constructor(e){super(e);this.getMenu=()=>{const{toolbarWidth:e,menuItems:t}=this.props,n=this.getMenuControlWidths();return n>e*x?this.splitMenus(t,n):[t]};this.getControlWidth=e=>{const{width:t,marginLeft:n}=this.props.controlRects[e]||T;return t+n};this.getMenuControlWidths=()=>this.props.menuItems.reduce((e,{name:t})=>e+this.getControlWidth(t),0);this.splitMenus=(e,t)=>{let n=0,r=0;for(;r<=t/2-E;){r+=this.getControlWidth(e[n].name);n++}return 0===n||n===e.length?[e]:[e.slice(0,n),e.slice(n)]};this.renderControl=({name:e,renderControl:t},n)=>{const{contextualNodeAttributes:r}=this.props;return Object(y.jsx)("div",{className:n>0?"m-left-1":"",children:t({contextualNodeAttributes:r})},"more-"+e)};this.renderMenuRow=(e,t)=>Object(y.jsx)(C.a,{className:t>0?"m-top-2":"",align:"center",children:e.map(this.renderControl)},"menu-row-"+t);this.splitMenus=Object(g.a)(this.splitMenus.bind(this),e=>e.length)}render(){const e=this.getMenu();return Object(y.jsx)("div",{ref:e=>this.node=e,className:"p-all-2",children:e.map(this.renderMenuRow)})}}S.propTypes={menuItems:o.a.array.isRequired,toolbarWidth:o.a.number.isRequired,controlRects:o.a.object.isRequired,contextualNodeAttributes:o.a.object};var I=n(1219),w=n(1220);class _ extends a.Component{constructor(e){super(e);this.state={initialRenderComplete:!1};this.ref=Object(a.createRef)()}componentDidMount(){const{updateControlRect:e}=this.props,{width:t}=this.ref.current.getBoundingClientRect();e({width:t});this.setState({initialRenderComplete:!0})}render(){const{className:e,dropdownClassName:t,onOpenComplete:n,disabled:r,toolbarWidth:i,menuItems:o,updateControlRect:a,controlRects:s,contextualNodeAttributes:c}=this.props;return this.state.initialRenderComplete&&!o.length?null:Object(y.jsx)(I.a,{use:"unstyled",buttonText:O.a.text(Object(b.h)("moreMenu")),buttonUse:"transparent",buttonClassName:e,closeOnMenuClick:!1,dropdownClassName:t,autoPlacement:"horiz",placement:"bottom left",minMenuWidth:0,animateOnToggle:!1,onOpenComplete:n,disabled:r,buttonRef:this.ref,children:Object(y.jsx)(S,{toolbarWidth:i,menuItems:o,updateControlRect:a,controlRects:s,contextualNodeAttributes:c})})}}_.propTypes={menuItems:o.a.array.isRequired,toolbarWidth:o.a.number.isRequired,className:o.a.string,dropdownClassName:o.a.string,onOpenComplete:o.a.func,disabled:o.a.bool,updateControlRect:o.a.func.isRequired,controlRects:o.a.object,contextualNodeAttributes:o.a.object};var N=Object(w.a)(_);const A=e=>null===e?b.d.ZERO:e===b.e.BUTTON?b.d.BUTTON:b.d.DEFAULT,D=u.a.div.withConfig({displayName:"Control__StyledControl",componentId:"u36wsd-0"})(["flex-shrink:0;margin-left:","px;"],e=>e.marginLeft);class k extends a.Component{constructor(e){super();this.updateControlRect=()=>{const{updateControlRect:e}=this.props;if(this.el&&"function"==typeof e){e({width:this.el.getBoundingClientRect().width,marginLeft:this.state.marginLeft})}};this.state={marginLeft:A(e.prevControlType||null)}}componentDidMount(){this.updateControlRect()}componentDidUpdate(e){const{prevControlType:t,menuItems:n}=this.props;n||e.prevControlType===t||this.setState({marginLeft:A(t||null)},this.updateControlRect)}render(){const{disabled:e,contextualNodeAttributes:t,menuItems:n}=this.props;return Object(y.jsx)(D,{marginLeft:this.state.marginLeft,children:Object(y.jsx)("div",{ref:e=>this.el=e,children:this.props.render({disabled:e,contextualNodeAttributes:t,menuItems:n})})})}}var P=Object(w.a)(k);k.propTypes={render:o.a.func.isRequired,disabled:o.a.bool,prevControlType:o.a.string,updateControlRect:o.a.func,contextualNodeAttributes:o.a.object,menuItems:o.a.array};var R=n(2827);let F=0;const L=()=>++F,M=u.a.div.withConfig({displayName:"ControlGroup__ControlGroupDiv",componentId:"sc-1ubbe8-0"})(["display:flex;flex-shrink:0;align-items:center;"]),B=u()(N).withConfig({displayName:"ControlGroup__StyledMoreMenu",componentId:"sc-1ubbe8-1"})(["",";"],b.g),U=u()(R.a).withConfig({displayName:"ControlGroup__StyledToolbarMenu",componentId:"sc-1ubbe8-2"})(["",";"],b.g);class V extends a.Component{constructor(e){super(e);this.renderControl=this.renderControl.bind(this)}getPrevControlType(e){const{controls:t}=this.props,n=t[e-1];return n?n.type:""}updateControlRect(e){return t=>{this.props.collectControlRect(e,t)}}renderDivider(){return Object(y.jsx)(v,{},"divider-"+L())}renderControlButton(e,t,n){const{renderControl:r,name:i}=this.props.convertToButton(e);return Object(y.jsx)(P,{updateControlRect:this.updateControlRect(i),prevControlType:this.getPrevControlType(n),render:r,contextualNodeAttributes:this.props.contextualNodeAttributes,menuItems:t},i)}renderMoreMenu(e,t){return Object(y.jsx)(P,{prevControlType:this.getPrevControlType(t),render:t=>Object(y.jsx)(B,Object.assign({},t,{"data-test-id":"more-menu",dropdownClassName:this.props.dropdownClassName,menuItems:e.map(this.props.convertToButton),onOpenComplete:this.props.onMoreMenuOpenComplete,toolbarWidth:this.props.toolbarWidth,updateControlRect:this.updateControlRect("moremenu"),controlRects:this.props.controlRects,contextualNodeAttributes:this.props.contextualNodeAttributes}))},"more-menu")}renderInsertMenu(e,t){return Object(y.jsx)(P,{prevControlType:this.getPrevControlType(t),render:t=>Object(y.jsx)(U,Object.assign({},t,{"data-test-id":"insert-menu",dropdownClassName:this.props.dropdownClassName,menuItems:e.map(this.props.convertToMenuItem),buttonText:O.a.text(Object(b.h)("insertMenu"))}))},"insert-menu")}renderAdvancedMenu(e,t){return Object(y.jsx)(P,{prevControlType:this.getPrevControlType(t),render:t=>Object(y.jsx)(U,Object.assign({},t,{dropdownClassName:this.props.dropdownClassName,id:"advanced-menu","data-test-id":"advanced-menu",menuItems:e.map(this.props.convertToMenuItem),buttonText:O.a.text(Object(b.h)("advancedMenu"))}))},"advanced-menu")}renderControl({control:e,type:t,menuItems:n},r){switch(t){case b.e.DIVIDER:return this.renderDivider();case b.e.BUTTON:case b.e.SELECT:return this.renderControlButton(e,n,r);case b.e.MORE_MENU:return this.renderMoreMenu(n,r);case b.e.INSERT_MENU:return this.renderInsertMenu(n,r);case b.e.ADVANCED_MENU:return this.renderAdvancedMenu(n,r);default:return null}}render(){const{controls:e}=this.props;return Object(y.jsx)(M,{children:e.map(this.renderControl)})}}V.propTypes={controls:o.a.arrayOf(b.f).isRequired,convertToButton:o.a.func.isRequired,convertToMenuItem:o.a.func.isRequired,toolbarWidth:o.a.number.isRequired,collectControlRect:o.a.func,dropdownClassName:o.a.string,onMoreMenuOpenComplete:o.a.func,controlRects:o.a.object,toolbarShepherdProps:o.a.object,contextualNodeAttributes:o.a.object};var H=n(1221);const q=16,G=17,W=u.a.div.withConfig({displayName:"Toolbar__StyledToolbar",componentId:"r2e2gf-0"})(["background-color:",";display:flex;min-height:48px;justify-content:flex-start;overflow:auto;box-shadow:0 1px 5px ",";user-select:none;"],d.GYPSUM,Object(p.b)(d.PANTERA,.12)),z=u.a.div.withConfig({displayName:"Toolbar__StyledInnerToolbar",componentId:"r2e2gf-1"})(["display:flex;align-items:center;"," "," ",""],({multiRow:e})=>e&&"flex-wrap: wrap;",({centerControls:e})=>e&&"margin: 0 auto;",({expandedHeight:e})=>e&&"padding-bottom: 48px;"),$=u.a.div.withConfig({displayName:"Toolbar__StyledRow",componentId:"r2e2gf-2"})(["display:flex;height:48px;align-items:center;"]),K=u.a.div.withConfig({displayName:"Toolbar__DividerContainer",componentId:"r2e2gf-3"})(["display:flex;flex-shrink:0;align-items:center;"]),Y=null;let X=0;const J=()=>++X,Q=e=>{const t=[];e.forEach((e,n)=>{const r=e.reduce((e,t)=>[...e,...t.controls.filter(e=>e.menuItems&&0===e.menuItems.length)],[]);t[n]=r});return t};class Z extends a.Component{constructor(e){super(e);this.getInnerWidths=(e=[])=>this.rows.filter(e=>!!e).map((t,n)=>Array.from(t.children).reduce((e,{offsetWidth:t})=>e+t,e[n]||0));this.getTotalInnerWidth=e=>e.reduce((e,t)=>e+t,0);this.getCollapsePoint=e=>this.multiRowCollapsePoint[e];this.setCollapsePoint=(e,t,n=0)=>{const r=3*t/5,i=this.multiRowCollapsePoint[e],o=i?Math.max(i,n):r;o!==i&&(this.multiRowCollapsePoint[e]=o)};this.getControlWidth=({type:e,control:t})=>{let n=t;if(e===b.e.DIVIDER)return G;e===b.e.MORE_MENU&&(n="moremenu");return n?this.controlRects[n].width:0};this.id=J();const t=Array.isArray(e.toolbar[0]);this.state={toolbarWidth:0,maxInnerWidths:[],totalInnerWidth:0,controlRects:{},fontsLoaded:!1,multiRow:!1,contextualToolbar:{maxInnerWidths:[],totalInnerWidth:0},contextualToolbarType:Y,emptyMenuControls:[],hasRows:t,isMultiRowSupported:t};this.controlRects={};this.rows=[];this.multiRowCollapsePoint={};this.handleResize=this.handleResize.bind(this);this.collectControlRect=this.collectControlRect.bind(this);this.getToolbarWidth=this.getToolbarWidth.bind(this);this.getResponsiveToolbar=Object(g.a)(this.getResponsiveToolbar.bind(this),(e,t,n,r,i,o)=>`${t}:${n.join("-")}:${r}:${i}:${o}`);this.controlsCollected=Object(c.a)(this.controlsCollected.bind(this),100);this.renderControlGroup=this.renderControlGroup.bind(this)}static getDerivedStateFromProps(e,t){const{contextualToolbarType:n,toolbar:r}=e;if(n!==t.contextualToolbarType){const e=Array.isArray(r[0]);return{hasRows:e,multiRow:!1,maxInnerWidths:[],totalInnerWidth:0,contextualToolbar:{maxInnerWidths:[],totalInnerWidth:0},contextualToolbarType:n||Y,emptyMenuControls:Q(e?r:[r])}}return null}componentDidMount(){this.setState({toolbarWidth:this.getToolbarWidth()});this.initResponsiveToolbar()}componentDidUpdate(e){const{contextualToolbarType:t}=this.props;if(t!==e.contextualToolbarType){window.cancelAnimationFrame(this.animationFrameId);this.handleResize()}}componentWillUnmount(){window.cancelAnimationFrame(this.animationFrameId);this.controlsCollected.reset()}initResponsiveToolbar(){h.c.then(()=>{this.setState({fontsLoaded:!0},this.handleResize)})}getClonedToolbar(e){const t=e=>Object.assign({},e,{controls:e.controls.map(e=>Object.assign({},e))});return this.state.hasRows?e.map(e=>e.map(t)):e.map(t)}getToolbarWidth(){return this.outerToolbar?this.outerToolbar.offsetWidth-q:0}getInnerToolbarWidth(){return this.getTotalInnerWidth(this.getInnerWidths())}getResponsiveGroupIndex(e,t,n,r){let i=0,o=-1,a=1/0;e.forEach((e,s)=>{t&&s!==n||e.forEach((e,t)=>{const{responsivePriority:n=1/0}=e,c=e.boundary<e.controls.length-2;if(n<a&&!r[`${s}_${t}`]&&c){a=n;i=s;o=t}})});return{responsiveRowIndex:i,responsiveGroupIndex:o}}getCollapsedGroup(e,t){const{controls:n,boundary:r}=t,i=n.map(e=>Object.assign({},e)),o=i.pop(),a=[];let s=0,c=!1;0===o.menuItems.length&&(s-=this.getControlWidth(o));for(;!c;){const{indices:t}=i.reduce((e,{priority:t},n)=>{if(t>e.priority){e.priority=t;e.indices=[n]}else t===e.priority&&e.indices.push(n);return e},{priority:0,indices:[i.length-1]});t.sort((e,t)=>e-t);for(;t.length;){const e=t.pop(),r=i.splice(e,1)[0],o=n.indexOf(r);let c=0,l=!1;for(;!l;)if(c===a.length){a.push({control:r.control,originalIndex:o});l=!0}else if(o>a[c].originalIndex)c++;else{a.splice(c,0,{control:r.control,originalIndex:o});l=!0}const{width:u,marginLeft:d}=this.controlRects[r.control];s+=u+d}(s>=e||i.length<=r)&&(c=!0)}o.menuItems=[...a.map(({control:e})=>e),...o.menuItems];return{controls:[...i,o],removedControlWidths:s}}getResponsiveToolbar(e,t,n,r,i){const{contextualToolbarType:o}=this.state,a={},s=r-t;if(s<0)return[e,i];const c=this.getClonedToolbar(e),l=this.state.hasRows?c:[c];let u=[s];const d=[!1];if(i){u=n.map((e,n)=>e-t-(0===n?G:0));d.push(!1)}u.forEach((e,t)=>{let n=0;for(;n<e&&!d[t];){const{responsiveRowIndex:r,responsiveGroupIndex:o}=this.getResponsiveGroupIndex(l,i,t,a);if(i&&r!==t)d[t]=!0;else if(o>=0){const{controls:t,removedControlWidths:i}=this.getCollapsedGroup(e-n,l[r][o]);a[`${r}_${o}`]=t;n+=i}else d[t]=!0}});if(o&&i&&d[1]){const e=l[0],{bottomRow:o,removedControlGroups:a}=l[1].reduce((e,t)=>{t.multiRowResponsive?e.removedControlGroups.push(t):e.bottomRow.push(t);return e},{bottomRow:[],removedControlGroups:[]});if(a.length){e.push(...a);const s=a.reduce((e,t)=>{const{controls:n}=t;return e+n.reduce((e,t)=>e+this.getControlWidth(t),0)},0),c=n[0]+s,l=n[1]-s;return this.getResponsiveToolbar([e,o],t,[c,l],r,i)}}const p=d.reduce((e,t)=>e&&t,this.state.hasRows),h=this.getInnerToolbarWidth(),m=t<this.getCollapsePoint(o),f=p&&t<h;if(this.state.isMultiRowSupported&&!i&&(m||f)){f&&this.setCollapsePoint(o,r,h);this.setState({multiRow:!0})}Object.keys(a).forEach(e=>{const[t,n]=e.split("_");l[t][n]=Object.assign({},l[t][n],{controls:a[e]})});return[c,i]}handleResize(){const{contextualToolbarType:e}=this.props,t=this.getToolbarWidth();let n=this.state.maxInnerWidths,r=this.state.totalInnerWidth;if(e){n=this.state.contextualToolbar.maxInnerWidths;r=this.state.contextualToolbar.totalInnerWidth}if(this.innerToolbar&&!r){const t=this.state.emptyMenuControls.map(e=>e.reduce((e,t)=>e-this.getControlWidth(t),0));n=this.getInnerWidths(t);r=this.getTotalInnerWidth(n);this.setCollapsePoint(e,r)}const i={};let o=!1;if(e){if(this.state.toolbarWidth&&!this.state.contextualToolbar.totalInnerWidth){i.contextualToolbar={maxInnerWidths:n,totalInnerWidth:r};o=!0}}else if(this.state.toolbarWidth&&!this.state.totalInnerWidth){i.maxInnerWidths=n;i.totalInnerWidth=r;o=!0}if(this.state.toolbarWidth!==t){i.toolbarWidth=t;o=!0}if(this.state.isMultiRowSupported&&this.state.hasRows&&t&&r){const n=t<this.getCollapsePoint(e);if(this.state.multiRow!==n){i.multiRow=n;o=!0}}o&&this.setState(i);this.animationFrameId=window.requestAnimationFrame(this.handleResize)}controlsCollected(){Object.keys(this.state.controlRects).length!==Object.keys(this.controlRects).length&&this.setState({controlRects:this.controlRects})}collectControlRect(e,t){this.controlRects[e]=t;this.controlsCollected()}renderControlGroup({controls:e},t){const{centerControls:n,dropdownClassName:r,convertToButton:i,convertToMenuItem:o,onMoreMenuOpenComplete:a}=this.props,s={};this.props.showToolbarShepherd&&(s.toolbarShepherdProps={className:this.props.shepherdClassName,getUserAttributes:this.props.getUserAttributes,setUserAttribute:this.props.setUserAttribute});return Object(y.jsx)(V,Object.assign({controls:e,dropdownClassName:r,centerControls:n,convertToButton:i,convertToMenuItem:o,collectControlRect:this.collectControlRect,onMoreMenuOpenComplete:a,toolbarWidth:this.state.toolbarWidth,controlRects:this.state.controlRects,contextualNodeAttributes:this.props.contextualNodeAttributes},s),`toolbar-${this.id}-control-group-${t}`)}renderToolbar(e,t){return this.state.hasRows?e.map((e,n)=>Object(y.jsx)(a.Fragment,{children:Object(y.jsxs)($,{ref:e=>this.rows[n]=e,children:[e.map(this.renderControlGroup),0===n&&Object(y.jsx)(K,{children:Object(y.jsx)(v,{multiRow:t},"row-divider")})]},`toolbar-${this.id}-row-${n}`)},n)):Object(y.jsx)($,{ref:e=>this.rows[0]=e,children:e.map(this.renderControlGroup)},`toolbar-${this.id}-row-0`)}render(){const{forwardRef:e,centerControls:t,uploadProgress:n,renderFindReplace:r}=this.props,{toolbarWidth:i,contextualToolbarType:o,isMultiRowSupported:a,hasRows:s}=this.state;let c,l=!1,u={};if(i){let{maxInnerWidths:e,totalInnerWidth:t}=this.state;if(o){e=this.state.contextualToolbar.maxInnerWidths;t=this.state.contextualToolbar.totalInnerWidth;const n=!s,r=s&&t&&!this.state.multiRow;u={"data-test-id":"canvas-contextual-toolbar",expandedHeight:a&&i<=this.getCollapsePoint(Y)&&(n||r)}}const n=this.getResponsiveToolbar(this.props.toolbar,i,e,t,this.state.multiRow,o);c=n[0];l=n[1]}return Object(y.jsx)(H.b,{disabled:this.props.disabled,toolbarTooltip:this.props.toolbarTooltip,children:Object(y.jsxs)("div",{children:[Object(y.jsxs)(W,{"data-test-id":"canvas-toolbar",ref:t=>{e(t);this.outerToolbar=t},className:this.props.className,children:[Object(y.jsx)(z,Object.assign({},u,{multiRow:l,centerControls:t,ref:e=>this.innerToolbar=e,children:void 0!==c&&this.renderToolbar(c,l)}),"styled-inner-toolbar"),n&&Object(y.jsx)(m.a,{Component:f.a,value:n})]},"toolbar-"+this.id),"function"==typeof r&&r()]})})}}const ee=o.a.arrayOf(o.a.shape({controls:o.a.arrayOf(b.f).isRequired,boundary:o.a.number,responsivePriority:o.a.number}));Z.propTypes={forwardRef:o.a.func,toolbar:o.a.oneOfType([ee,o.a.arrayOf(ee)]).isRequired,contextualNodeAttributes:o.a.object,contextualToolbarType:o.a.string,convertToMenuItem:o.a.func.isRequired,convertToButton:o.a.func.isRequired,onMoreMenuOpenComplete:o.a.func,dropdownClassName:o.a.string,className:o.a.string,centerControls:o.a.bool,shepherdClassName:o.a.string,getUserAttributes:o.a.func,setUserAttribute:o.a.func,showToolbarShepherd:o.a.bool,disabled:o.a.bool,toolbarTooltip:o.a.string,uploadProgress:o.a.number,renderFindReplace:o.a.func};Z.defaultProps={centerControls:!1,convertToButton:s.e,convertToMenuItem:s.e,showToolbarShepherd:!1,disabled:!1,forwardRef:()=>{},toolbar:[],contextualNodeAttributes:{},contextualToolbarType:Y};var te=n(1223),ne=n(345);var re=e=>{function t(t){const{editor:n}=t,r=Object(s.h)(["toolbarPopovers","hsfindreplace","renderPopover"],n);return Object(y.jsx)(e,Object.assign({renderFindReplace:r},t))}t.displayName=`WithFindReplace(${Object(ne.a)(e)})`;return t},ie=n(1224);const oe=["editor","toolbar"];class ae extends a.Component{constructor(...e){super(...e);this.state={uploadProgress:null,menuItems:{},contextualToolbar:[],contextualNodeAttributes:{},contextualToolbarType:void 0};this.handleUploadComplete=()=>{this.setState({uploadProgress:null})};this.handleUploadProgress=({percentLoaded:e})=>{this.setState({uploadProgress:e})};this.handleWindowClick=e=>{const{editor:t}=this.props;t.editorManager.focusedEditor&&!Object(ie.b)(e.target)&&t.editorManager.focusedEditor.fire("focusout")};this.handleToggleMenuItemDisabledState=({name:e,disabled:t})=>{const n=this.state.menuItems[e];e&&n&&this.setState({menuItems:Object.assign({},this.state.menuItems,{[e]:Object.assign({},n,{disabled:t})})})};this.handleContextualToolbarChange=({contextualToolbar:e=[],contextualToolbarType:t,contextualNodeAttributes:n={}})=>{this.setState({contextualToolbar:e,contextualToolbarType:t,contextualNodeAttributes:n})};this.convertToButton=e=>{const t=this.props.editor.buttons[e];if(void 0===t)throw new Error(`[tinymce-themes] ${e} is not registered a button with TinyMCE`);const n="function"==typeof t?t():t;return Object.assign({},n,{name:e})};this.convertToMenuItem=e=>{let t=this.state.menuItems[e];if(void 0===t)throw new Error(`[tinymce-themes] ${e} is not registered a menuItem with TinyMCE`);t="function"==typeof t?t():t;return{name:e,disabled:t.disabled,tooltip:t.tooltip,text:t.text,onClick:t.onClick,render:t.render,child:t.child,icon:te.a[e]}};this.handleMoreMenuOpenComplete=()=>{setTimeout(()=>{this.props.editor.nodeChanged({selectionChange:!0})})}}componentDidMount(){window.addEventListener("click",this.handleWindowClick,!0);this.props.editor.on("uploadProgress",this.handleUploadProgress);this.props.editor.on("uploadComplete uploadFailure",this.handleUploadComplete);this.props.editor.on(te.c,this.handleToggleMenuItemDisabledState);this.props.editor.on("ContextualToolbarChange",this.handleContextualToolbarChange);this.setState({menuItems:this.props.editor.menuItems})}componentWillUnmount(){window.removeEventListener("click",this.handleWindowClick);this.props.editor.off("uploadProgress",this.handleUploadProgress);this.props.editor.off("uploadComplete uploadFailure",this.handleUploadComplete);this.props.editor.off(te.c,this.handleToggleMenuItemDisabledState);this.props.editor.off("ContextualToolbarChange",this.handleContextualToolbarChange)}render(){const e=this.props,{editor:t,toolbar:n}=e,i=Object(r.a)(e,oe),{contextualToolbar:o,contextualToolbarType:a,contextualNodeAttributes:c}=this.state,{getUserAttributes:l,setUserAttribute:u}=Object(s.h)(["plugins","hscore","api"],t);return Object(y.jsx)(Z,Object.assign({},i,{dropdownClassName:"mce-hubspot-dropdown",tabIndex:"-1",convertToButton:this.convertToButton,convertToMenuItem:this.convertToMenuItem,onMoreMenuOpenComplete:this.handleMoreMenuOpenComplete,uploadProgress:this.state.uploadProgress,getUserAttributes:l,setUserAttribute:u,toolbar:a?o:n,contextualToolbarType:a,contextualNodeAttributes:c}))}}ae.propTypes={editor:o.a.object.isRequired,toolbar:o.a.array.isRequired};t.a=re(ae)},function(e,t,n){"use strict";n.r(t);var r=n(40),i=n(508),o=n(2741),a=n(2671),s=n(279),c=n(99),l=n(2679),u=n(287),d=n.n(u),p=n(1321),h=n(4),m=(e,t)=>{const n=Object(p.a)(e);return h.a.text("i18n.numberRepresentation.phoneNumberWithExtension",{phoneNumber:n,extension:t})},f=n(1113);function g(e){if(!e)return;const t=f.c[e];return f.a[t].dialCode}function b(e){const t=new RegExp(/^(.*) ext\D*(\d+)$/).exec(e);return{phoneNumber:t?t[1]:e,extension:t?t[2]:""}}function O(e){const{phoneNumber:t,extension:n}=b(e),r=/(?=[^+])\D/;return!r.test(t)&&!r.test(n)}function y(e){if(O(e)){const{phoneNumber:t,extension:n}=b(e);return n?m(t,n):Object(p.a)(t,"")}return e}var j=n(443),v=n(2654),C=n(1),x=n.n(C);function E(e,t){return t.post("calls/v1/phone-numbers/validate/",{query:{portalId:x.a.get()},data:{phoneNumber:e}})}var T=(e,t)=>{const[n,i]=Object(r.useState)(e);Object(r.useEffect)(()=>{const n=setTimeout(()=>{i(e)},t);return()=>{clearTimeout(n)}},[e,t]);return n},S=n(1404);const I={UNINITIALIZED:"UNINITIALIZED",PENDING:"PENDING",SUCCEEDED:"SUCCEEDED",FAILED:"FAILED"},w={},_=(e,t)=>{const{type:n,phoneNumber:r,payload:i}=t;switch(n){case"PHONE_NUMBER_VALIDATION_PENDING":return Object.assign({},e,{[r]:{status:I.PENDING}});case"PHONE_NUMBER_VALIDATION_SUCCESS":return Object.assign({},e,{[r]:{status:I.SUCCEEDED,data:i}});case"PHONE_NUMBER_VALIDATION_FAILED":return Object.assign({},e,{[r]:{status:I.FAILED,error:i}});default:return e}};var N=e=>{const[t,n]=Object(r.useReducer)(_,w),i=T(e,500),o=Object(S.a)();if(!t[i]){n({type:"PHONE_NUMBER_VALIDATION_PENDING",phoneNumber:i,payload:void 0});E(i,o).then(e=>{n({type:"PHONE_NUMBER_VALIDATION_SUCCESS",phoneNumber:i,payload:e})}).catch(e=>{n({type:"PHONE_NUMBER_VALIDATION_FAILED",phoneNumber:i,payload:e})})}const a=t[e]||{status:I.PENDING};return{status:a.status,error:a.error,data:a.data}},A=n(302),D=n(324),k=n(1121),P=n(1439),R=n(45);const F=d.a.div.withConfig({displayName:"PropertyInputPhone__Wrapper",componentId:"sc-1xp4jy7-0"})(["min-width:359px;"]),L=d()(P.a).withConfig({displayName:"PropertyInputPhone__StyledUITileSection",componentId:"sc-1xp4jy7-1"})(["padding:14px 10px 10px 10px;"]),M=d()(l.a).withConfig({displayName:"PropertyInputPhone__StyledUIIcon",componentId:"sc-1xp4jy7-2"})(["padding-left:",";"],A.N),B=(e,t)=>null!==t&&""!==t&&void 0!==t?`${e} ext ${t}`:e||"",U=({disabled:e,value:t,initialCountryDialCode:n,status:l,error:u,showTextInput:d,onChange:p,onToggleInput:h})=>{const{rawValue:m,extensionValue:f}=Object(r.useMemo)(()=>{if(O(t)){const{phoneNumber:e,extension:n}=b(t);return{rawValue:e,extensionValue:n}}return{rawValue:t,extensionValue:""}},[t]),g=Object(r.useCallback)(e=>{p(e.target.value)},[p]),y=Object(r.useCallback)(({phoneNumber:e,extension:t,country:n})=>{const r=B(e,t);p(r,n)},[p]),C=Object(r.useMemo)(()=>{const e=l===I.PENDING,r=l===I.SUCCEEDED;return null==t||""===t||t===n?Object(R.jsx)("span",{style:{color:D.SLINKY},children:Object(R.jsx)(s.a,{message:"customerDataProperties.PropertyInputPhone.phoneNumberValidations.prevalidation","data-unit-test":"prevalidation-message"})}):(e||r)&&u?Object(R.jsx)(s.a,{message:"customerDataProperties.PropertyInputPhone.phoneNumberErrors.numberInvalid","data-unit-test":"error-number-invalid"}):u?Object(R.jsx)(s.a,{message:"customerDataProperties.PropertyInputPhone.phoneNumberErrors.validationFailed"}):e?Object(R.jsx)(s.a,{message:"customerDataProperties.PropertyInputPhone.phoneNumberValidations.validating"}):Object(R.jsx)(s.a,{message:"customerDataProperties.PropertyInputPhone.phoneNumberValidations.validated"})},[l,u,t,n]),x=d?"customerDataProperties.PropertyInputPhone.editOptions.editAsPhoneNumber.btn":"customerDataProperties.PropertyInputPhone.editOptions.editAsText.btn",E=d?"customerDataProperties.PropertyInputPhone.editOptions.editAsPhoneNumber.tooltip":"customerDataProperties.PropertyInputPhone.editOptions.editAsText.tooltip";return Object(R.jsxs)(F,{children:[d?Object(R.jsx)(i.a,{disabled:e,value:t,onChange:g,autoFocus:!0}):Object(R.jsx)(k.a,{compact:!0,children:Object(R.jsx)(L,{children:Object(R.jsx)(o.a,{error:u,validationMessage:C,"aria-label":Object(c.a)("customerDataProperties.PropertyInputPhone.ariaLabel"),children:Object(R.jsx)("div",{className:"display-flex",children:Object(R.jsx)(a.a,{value:m||n,extensionValue:f,phoneInputProps:{disabled:e,autoFocus:!0},onChange:y,countrySelectProps:{disabled:e},extensionInputProps:{disabled:e}})})})})}),Object(R.jsxs)(j.a,{className:"p-top-3",use:"link",onClick:h,"data-selenium-test":"toggle-input-type-button",disabled:l===I.PENDING,children:[Object(R.jsx)(s.a,{message:x}),Object(R.jsx)(v.a,{placement:"bottom",title:Object(R.jsx)(s.a,{message:E}),children:Object(R.jsx)(M,{name:"info"})})]})]})};var V=Object(r.memo)(U),H=n(2709),q=n(490),G=n(453),W=n(337),z=n(2779),$=n(298),K=n(1342);const Y="LocalSettings:Properties:";function X(e){return`${Y}${e}`}function J(e,t){if(window.localStorage)try{window.localStorage.setItem(X(e),t);return t}catch(e){return}}function Q(e){if(window.localStorage)try{return window.localStorage.getItem(X(e))}catch(e){return}}const Z="COUNTRY_DIAL_CODE_LOCAL_SETTINGS_KEY",ee="SHOW_PHONE_TEXT_INPUT_LOCAL_SETTINGS_KEY";var te=n(1423);const ne=d()(H.a).withConfig({displayName:"PropertyInputPhoneWrapper__StyledUIEditableControls",componentId:"yd1zlr-0"})(["margin:0 !important;"]),re=({onCancel:e,onConfirm:t,disabled:n,initialValue:i,onTracking:o,showAutoSaveText:a})=>{const[c,l]=Object(r.useState)(i||""),[u,d]=Object(r.useState)(void 0),p=Object(r.useMemo)(()=>Q(Z)||"",[]),h=Object(r.useMemo)(()=>"true"===Q(ee),[]),[m,f]=Object(r.useState)(!O(c)||h),{status:g,data:b,error:y}=N(c),j=Object(r.useMemo)(()=>Object(K.a)(["isValid"],b),[b]),v=Object(r.useCallback)((e,t)=>{l(e);d(t)},[]),C=Object(r.useCallback)(()=>{const e=!O(i||"")||h;"function"==typeof o&&m!==e&&o(m?"removes phone number formatting in phone property input":"applies phone number formatting in phone property input")},[o,m,i,h]),x=Object(r.useCallback)(()=>{if(!y)if(b){if(m){let e=b.formattedNumber;e&&0===e.indexOf("+")&&(e="+"+e.replace(/\D/g,""));const t=B(e,b.extension);l(t)}else l(b.rawNumber||"");f(e=>!e)}else l("")},[b,y,m]),E=Object(r.useCallback)(()=>{t(c,u,m);C()},[c,u,m,t,C]),T=a?Object(R.jsx)(s.a,{message:"customerDataProperties.PropertyInputPhone.save"}):Object(R.jsx)(s.a,{message:"customerDataProperties.PropertyInputPhone.apply"});return Object(R.jsxs)(R.Fragment,{children:[Object(R.jsxs)("div",{className:"display-flex",children:[Object(R.jsx)(q.a,{className:"p-left-4",children:Object(R.jsx)(s.a,{message:"customerDataProperties.PropertyInputPhone.label"})}),Object(R.jsx)(W.a,{color:D.EERIE,onClick:e,className:"m-left-auto"})]}),Object(R.jsx)(ne,{className:"m-bottom-1 p-x-4 p-bottom-4",onCancel:e,onSave:E,saveDisabled:n||!m&&(g===I.PENDING||!j)||i===c,use:"flush",defaultOpen:!0,saveLabel:T,children:Object(R.jsx)(V,{disabled:n,value:c,initialCountryDialCode:p,status:g,error:!!y||!j&&!!b,showTextInput:m,onChange:v,onToggleInput:x})})]})},ie=e=>{const{disabled:t,inputRef:n,onChange:i,onFocus:o,onTracking:a,popoverOpen:s,popoverProps:c,readOnly:l,setPopoverOpen:u,value:d,showAutoSaveText:p=!1}=e,h=Object(r.useCallback)(()=>{u(!1)},[u]),m=Object(r.useCallback)((e,t,n)=>{i(Object($.a)(e));if(t){const e=g(t);J(Z,e?"+"+e:"")}J(ee,""+n);u(!1)},[i,u]),f=Object(r.useMemo)(()=>null==d?"":y(d),[d]);return Object(R.jsx)(G.a,Object.assign({closeOnOutsideClick:!0,placement:"right"},c,{open:s&&!l&&!t,onOpenChange:e=>u(e.target.value),content:{body:Object(R.jsx)(re,{onCancel:h,onConfirm:m,disabled:t,initialValue:d,onTracking:a,showAutoSaveText:p})},"data-test-id":"property-input-phone-popover",children:Object(R.jsx)(z.a,Object.assign({},Object(te.a)(e),{value:f,inputRef:n,shrink:!0,onChange:void 0,onFocus:e=>{o&&o(e);e.target.blur();u(!0)},readOnly:l,disabled:t,"data-test-id":"property-input-phone-button"}))}))};t.default=Object(r.memo)(ie)},function(e,t,n){"use strict";var r=n(41),i=n.n(r),o=n(40),a=n(288),s=n.n(a),c=n(324),l=n(1117),u=n.n(l),d=n(2),p=n(287),h=n.n(p),m=n(45);const f=h.a.div.withConfig({displayName:"Board__BoardContainer",componentId:"sc-15b8cf9-0"})(["position:relative;height:100%;min-height:146px;min-width:146px;user-select:none;& > img{height:100%;}"]),g=h.a.div.withConfig({displayName:"Board__BoardInner",componentId:"sc-15b8cf9-1"})(["position:absolute;top:0;right:0;bottom:0;left:0;"]),b=h.a.div.withConfig({displayName:"Board__BoardPanel",componentId:"sc-15b8cf9-2"})(["width:100%;height:100%;position:relative;z-index:1;border-radius:2px;"]),O=h.a.div.withConfig({displayName:"Board__BoardPanelValue",componentId:"sc-15b8cf9-3"})(["border-radius:2px;position:absolute;width:100%;height:100%;left:0;top:0;z-index:2;background-image:linear-gradient(to bottom,transparent 0%,#000000 100%);"]),y=h.a.div.withConfig({displayName:"Board__BoardPanelSaturation",componentId:"sc-15b8cf9-4"})(["border-radius:2px;position:absolute;width:100%;height:100%;left:0;top:0;z-index:1;background-image:linear-gradient(to right,#ffffff 0%,transparent 100%);"]),j=h.a.span.withConfig({displayName:"Board__BoardPanelIndicator",componentId:"sc-15b8cf9-5"})(["position:absolute;border-radius:10px;border:1px solid #ffffff;width:9px;height:9px;left:-999px;top:-999px;box-shadow:0 0 1px rgba(120,120,120,0.7);z-index:2;"]),v=h.a.div.withConfig({displayName:"Board__BoardHandler",componentId:"sc-15b8cf9-6"})(["box-shadow:0 0 2px #808080 inset;border-radius:2px;cursor:crosshair;user-select:none;position:absolute;top:0;left:0;width:100%;height:100%;z-index:3;"]);class C extends o.Component{constructor(...e){super(...e);this.onBoardMouseDown=e=>{const t=e.clientX,n=e.clientY;this.pointMoveTo({x:t,y:n});window.addEventListener("mousemove",this.onBoardDrag);window.addEventListener("mouseup",this.onBoardDragEnd)};this.onBoardDrag=e=>{const t=e.clientX,n=e.clientY;this.pointMoveTo({x:t,y:n})};this.onBoardDragEnd=e=>{const t=e.clientX,n=e.clientY;this.pointMoveTo({x:t,y:n});this.removeMouseListeners()};this.pointMoveTo=e=>{const t=this.measureBounds(),n=t.width,r=t.height;let i=e.x-t.left,o=e.y-t.top;i=Math.max(0,i);i=Math.min(i,n);o=Math.max(0,o);o=Math.min(o,r);const a={h:this.props.hue,s:i/n*100,v:100*(1-o/r)},s=u.a.fromHsvObject(a).toHex();this.props.onChange({hex:s})}}componentWillUnmount(){this.removeMouseListeners()}removeMouseListeners(){window.removeEventListener("mousemove",this.onBoardDrag);window.removeEventListener("mouseup",this.onBoardDragEnd)}measureBounds(){return this.board&&this.board.getBoundingClientRect()}render(){const{className:e,hex:t,hue:n}=this.props,{s:r,v:i}=u.a.fromHex(t).toHsvObject(),o=`calc(${r}% - 4px)`,a=`calc(${100-i}% - 4px)`,s=[n,100,100],c=u.a.fromHsvArray(s).toHex();return Object(m.jsxs)(f,{ref:e=>this.board=e,className:e,"data-test-id":"board-container",children:[Object(m.jsx)("img",{src:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"}),Object(m.jsxs)(g,{children:[Object(m.jsxs)(b,{"data-test-id":"board-inner-panel",style:{backgroundColor:c},children:[Object(m.jsx)(O,{}),Object(m.jsx)(y,{})]}),Object(m.jsx)(j,{"data-test-id":"board-slider-indicator",style:{left:o,top:a}}),Object(m.jsx)(v,{"data-test-id":"board-handler",onMouseDown:this.onBoardMouseDown})]})]})}}C.propTypes={className:i.a.string,hex:i.a.string,hue:i.a.number,onChange:i.a.func};const x=h.a.div.withConfig({displayName:"Preview__PreviewContainer",componentId:"ms4ssp-0"})(["height:30px;width:30px;display:inline-block;position:relative;overflow:hidden;border-radius:2px;box-shadow:0 0 2px #808080 inset;background-image:url('data:image/png;base64,R0lGODdhCgAKAPAAAOXl5f///ywAAAAACgAKAEACEIQdqXt9GxyETrI279OIgwIAOw==');cursor:pointer;"]),E=h.a.span.withConfig({displayName:"Preview__PreviewInner",componentId:"ms4ssp-1"})(["position:absolute;display:block;height:100%;width:30px;border-radius:2px;box-shadow:0 0 2px #808080 inset;"]),T=h.a.input.withConfig({displayName:"Preview__PreviewInput",componentId:"ms4ssp-2"})(["position:absolute;display:block;height:100%;width:30px;border-radius:2px;box-shadow:0 0 2px #808080 inset;opacity:0;"]);class S extends o.Component{constructor(...e){super(...e);this.onChange=e=>{this.props.onChange({hex:e.target.value});e.stopPropagation()}}render(){const{hex:e}=this.props;return Object(m.jsxs)(x,{"data-test-id":"color-preview",children:[Object(m.jsx)(E,{style:{backgroundColor:e,opacity:this.props.alpha/100}}),Object(m.jsx)(T,{type:"color",defaultValue:e,onChange:this.onChange,onClick:this.props.onInputClick})]})}}S.propTypes={hex:i.a.string,alpha:i.a.number,onChange:i.a.func,onInputClick:i.a.func};const I=h.a.div.withConfig({displayName:"Ribbon__Slider",componentId:"sc-1ew5x1z-0"})(["position:relative;height:",";border-radius:2px;box-shadow:0 0 2px #808080 inset;background-image:linear-gradient( to right,#ff0000 0%,#ff9900 10%,#cdff00 20%,#35ff00 30%,#00ff66 40%,#00fffd 50%,#0066ff 60%,#3200ff 70%,#cd00ff 80%,#ff0099 90%,#ff0000 100% );"],({includeAlpha:e})=>e?"14px":"30px"),w=h.a.span.withConfig({displayName:"Ribbon__SliderIndicator",componentId:"sc-1ew5x1z-1"})(["position:absolute;top:2px;bottom:2px;width:6px;border:1px solid #888888;padding:1px 0;margin-left:-3px;background-color:#eeeeee;border-radius:3px;"]),_=h.a.div.withConfig({displayName:"Ribbon__SliderHandler",componentId:"sc-1ew5x1z-2"})(["position:absolute;width:104%;height:100%;left:-2%;cursor:pointer;"]);class N extends o.Component{constructor(...e){super(...e);this.onMouseDown=e=>{e.preventDefault();const t=e.clientX,n=e.clientY;this.pointMoveTo({x:t,y:n});window.addEventListener("mousemove",this.onDrag);window.addEventListener("mouseup",this.onDragEnd)};this.onDrag=e=>{const t=e.clientX,n=e.clientY;this.pointMoveTo({x:t,y:n})};this.onDragEnd=e=>{const t=e.clientX,n=e.clientY;this.pointMoveTo({x:t,y:n});this.removeMouseListeners()};this.pointMoveTo=e=>{const t=this.measureBounds(),n=t.width;let r=e.x-t.left;r=Math.max(0,r);r=Math.min(r,n);const i=r/n,o=Math.floor(360*i);this.props.onChange({hue:o})}}componentWillUnmount(){this.removeMouseListeners()}removeMouseListeners(){window.removeEventListener("mousemove",this.onDrag);window.removeEventListener("mouseup",this.onDragEnd)}measureBounds(){return this.slider&&this.slider.getBoundingClientRect()}render(){const{className:e,hue:t,includeAlpha:n}=this.props,r=t/360*100;return Object(m.jsxs)(I,{ref:e=>this.slider=e,"data-test-id":"ribbon-slider",className:e,includeAlpha:n,percent:r,children:[Object(m.jsx)(w,{"data-test-id":"ribbon-slider-indicator",style:{left:r+"%"}}),Object(m.jsx)(_,{"data-test-id":"ribbon-handler",onMouseDown:this.onMouseDown})]})}}N.propTypes={className:i.a.string,hue:i.a.number,onChange:i.a.func,includeAlpha:i.a.bool};function A(e,t,n,r){return`rgba(${[e,t,n,r/100].join(",")})`}const D=h.a.div.withConfig({displayName:"AlphaRibbon__Slider",componentId:"s9uw8p-0"})(["position:relative;height:14px;width:100%;border-radius:2px;margin-top:4px;background-image:url('data:image/png;base64,R0lGODdhCgAKAPAAAOXl5f///ywAAAAACgAKAEACEIQdqXt9GxyETrI279OIgwIAOw==');background-repeat:repeat;user-select:none;"]),k=h.a.div.withConfig({displayName:"AlphaRibbon__SliderBackground",componentId:"s9uw8p-1"})(["position:absolute;width:100%;height:100%;border-radius:2px;box-shadow:0 0 2px #808080 inset;"]),P=h.a.span.withConfig({displayName:"AlphaRibbon__SliderIndicator",componentId:"s9uw8p-2"})(["position:absolute;top:2px;bottom:2px;width:6px;border:1px solid #888888;padding:1px 0;margin-left:-3px;background-color:#eeeeee;border-radius:3px;"]),R=h.a.div.withConfig({displayName:"AlphaRibbon__SliderHandler",componentId:"s9uw8p-3"})(["position:absolute;width:104%;height:100%;left:-2%;border-radius:2px;cursor:pointer;"]);class F extends o.Component{constructor(...e){super(...e);this.onMouseDown=e=>{e.preventDefault();const t=e.clientX,n=e.clientY;this.pointMoveTo({x:t,y:n});window.addEventListener("mousemove",this.onDrag);window.addEventListener("mouseup",this.onDragEnd)};this.onDrag=e=>{const t=e.clientX,n=e.clientY;this.pointMoveTo({x:t,y:n})};this.onDragEnd=e=>{const t=e.clientX,n=e.clientY;this.pointMoveTo({x:t,y:n});this.removeMouseListeners()};this.getBackground=()=>{const{r:e,g:t,b:n}=u.a.fromHex(this.props.hex).toRgbObject();return`linear-gradient(to right, ${A(e,t,n,0)}, ${A(e,t,n,100)})`};this.pointMoveTo=e=>{const t=this.measureBounds(),n=t.width;let r=e.x-t.left;r=Math.max(0,r);r=Math.min(r,n);const i=Math.floor(r/n*100);this.props.onChange({alpha:i})}}componentWillUnmount(){this.removeMouseListeners()}removeMouseListeners(){window.removeEventListener("mousemove",this.onDrag);window.removeEventListener("mouseup",this.onDragEnd)}measureBounds(){return this.slider&&this.slider.getBoundingClientRect()}render(){const{alpha:e,className:t}=this.props;return Object(m.jsxs)(D,{ref:e=>this.slider=e,"data-test-id":"alpha-ribbon-slider",className:t,children:[Object(m.jsx)(k,{"data-test-id":"alpha-ribbon-background",style:{background:this.getBackground()}}),Object(m.jsx)(P,{"data-test-id":"alpha-ribbon-slider-indicator",style:{left:e+"%"}}),Object(m.jsx)(R,{"data-test-id":"alpha-ribbon-handler",onMouseDown:this.onMouseDown})]})}}F.propTypes={alpha:i.a.number,className:i.a.string,hex:i.a.string,onChange:i.a.func};var L=n(495),M=n(508),B=n(513),U=n(477);const V=["RGB","HSB","HSL"],H=h()(U.a).withConfig({displayName:"Params__ParamContainer",componentId:"sc-4kt7xk-0"})(["margin-left:8px;width:115px;"]),q=h()(e=>Object(m.jsx)(L.a,Object.assign({"data-test-id":"colorpicker-param-input-label",labelWrapperClassName:"input-label-wrapper"},e))).withConfig({displayName:"Params__ParamInputLabel",componentId:"sc-4kt7xk-1"})(["display:block;&:not(:last-child){margin-bottom:8px;}& .input-label-wrapper{padding-left:10px;width:22px;}"]);class G extends o.Component{static getDerivedStateFromProps(e,t){return e.hex!==t.prevHex?{inputValue:e.hex.replace("#",""),prevHex:e.hex}:null}constructor(e){super(e);this.onHexHandler=e=>{const t=e.target.value.replace(/[^0-9a-f]/gi,"").slice(0,6);this.setState({inputValue:t});if(!(t.length<6))try{const e=u.a.fromHex(t);this.props.onChange({hex:e.toHex()})}catch(e){}};this.onAlphaHandler=e=>{let t=parseInt(e.target.value,10);isNaN(t)&&(t=0);t=Math.max(0,t);t=Math.min(t,100);this.props.onChange({alpha:t})};this.onColorChannelChange=(e,t)=>{const n=this.getChannelInRange(t.target.value,e),r=this.getColorChannel();r[e]=n;const{hex:i,hue:o}=this.getColorByChannel(r);this.props.onChange({hex:i,hue:o})};this.getChannelInRange=(e,t)=>{const n={RGB:[[0,255],[0,255],[0,255]],HSB:[[0,360],[0,100],[0,100]],HSL:[[0,360],[0,100],[0,100]]}[this.props.mode][t];let r=parseInt(e,10);isNaN(r)&&(r=0);r=Math.max(n[0],r);r=Math.min(r,n[1]);return r};this.getColorByChannel=e=>{const{mode:t}=this.props;let n,r;switch(t){case"RGB":n=u.a.fromRgbArray(e).toHex();break;case"HSB":n=u.a.fromHsvArray(e).toHex();r=e[0];break;case"HSL":n=u.a.fromHslArray(e).toHex();r=e[0];break;default:n=u.a.fromRgbArray(e).toHex()}return{hex:n,hue:r}};this.getColorChannel=()=>{const{hex:e,hue:t,mode:n}=this.props,r=u.a.fromHex(e);let i;switch(n){case"RGB":i=r.toRgbArray();break;case"HSB":i=[t,...r.toHsvArray().slice(1)];break;case"HSL":i=[t,...r.toHslArray().slice(1)];break;default:i=r.toRgbArray()}return i};this.state={inputValue:e.hex.replace("#",""),prevHex:e.hex}}renderRgbaInput(e){const t=this.getColorChannel(),n=this.props.mode[e];return Object(m.jsx)(q,{text:n,className:"private-react-colorpicker--param-input",children:Object(m.jsx)(B.a,{maxLength:"A",value:t[e],onChange:this.onColorChannelChange.bind(null,e)})},n)}renderAlphaInput(){return Object(m.jsx)(q,{text:"A",className:"private-react-colorpicker--param-input",children:Object(m.jsx)(B.a,{value:this.props.alpha,onChange:this.onAlphaHandler})},"A")}renderRgba(){const{hexOnly:e,includeAlpha:t}=this.props;let n=[];e||(n=n.concat([this.renderRgbaInput(0),this.renderRgbaInput(1),this.renderRgbaInput(2)]));t&&n.push(this.renderAlphaInput());return n}render(){const{fieldsetSize:e}=this.props;return Object(m.jsxs)(H,{"data-test-id":"colorpicker-input-params",className:"private-react-colorpicker--params",_size:e,children:[this.renderRgba(),Object(m.jsx)(q,{text:"#",className:"private-react-colorpicker--param-input",children:Object(m.jsx)(M.a,{maxLength:"7",onChange:this.onHexHandler,value:this.state.inputValue})})]})}}G.propTypes={onChange:i.a.func,alpha:i.a.number,fieldsetSize:U.a.propTypes._size,hex:i.a.string.isRequired,hue:i.a.number.isRequired,hexOnly:i.a.bool,includeAlpha:i.a.bool,mode:i.a.oneOf(V)};G.defaultProps={mode:V[0]};var W=n(4),z=n(471);const $=h.a.div.withConfig({displayName:"FavoritesAccordion__FavoritesContainer",componentId:"y1l8sq-0"})(["display:inline-flex;"]),K=h.a.div.withConfig({displayName:"FavoritesAccordion__FavoriteSquatch",componentId:"y1l8sq-1"})(["display:inline-block;position:relative;overflow:hidden;background-color:",";height:15px;width:15px;border-radius:2px;box-shadow:0 0 2px #808080 inset;cursor:pointer;&:not(:last-child){margin-right:8px;}"],({backgroundColor:e})=>e);class Y extends o.Component{onClickFavorite(e){const{onSelectColor:t}=this.props;t({hex:e})}render(){const{favorites:e=[]}=this.props;if(e.length<=0)return null;const t=e.map((e,t)=>{const n=()=>{this.onClickFavorite(e)};return Object(m.jsx)(K,{"data-test-id":"favorites-accordion-squatch",backgroundColor:e,onClick:n},"favorite-"+t)});return Object(m.jsx)(z.a,{"data-test-id":"favorites-accordion",defaultOpen:!0,className:"m-top-2",flush:!0,title:W.a.text("colorPicker.favorites"),children:Object(m.jsx)($,{children:t})})}}Y.propTypes={favorites:i.a.arrayOf(i.a.string),onSelectColor:i.a.func.isRequired};var X=Y;const J=["alpha","alphaClassName","boardClassName","colorsClassName","ribbonClassName","favorites","fieldsetSize","hex","hexOnly","hue","includeAlpha","mode","onChange","onFocus","onBlur"],Q=h.a.div.withConfig({displayName:"Panel__PanelContainer",componentId:"hi1kh4-0"})(["display:flex;position:relative;padding:8px;"]),Z=h.a.div.withConfig({displayName:"Panel__PanelInner",componentId:"hi1kh4-1"})(["width:146px;display:flex;flex-direction:column;"]),ee=h.a.div.withConfig({displayName:"Panel__RibbonContainer",componentId:"hi1kh4-2"})(["display:flex;flex-shrink:0;"]),te=h.a.div.withConfig({displayName:"Panel__RibbonInner",componentId:"hi1kh4-3"})(["flex-grow:1;"]);class ne extends o.Component{constructor(...e){super(...e);this.onSystemColorPickerOpen=e=>{"color"===e.target.type&&(this.systemColorPickerOpen=!0)};this.onFocus=()=>{if(this._blurTimer){clearTimeout(this._blurTimer);this._blurTimer=null}else this.props.onFocus()};this.onBlur=()=>{this._blurTimer&&clearTimeout(this._blurTimer);this._blurTimer=setTimeout(()=>{this.systemColorPickerOpen?this.systemColorPickerOpen=!1:this.props.onBlur()},100)}}renderAlpha({alpha:e,alphaClassName:t,hex:n,includeAlpha:r,onChange:i}){return r?Object(m.jsx)(F,{alpha:e,className:t,hex:n,onChange:i}):null}render(){const e=this.props,{alpha:t,alphaClassName:n,boardClassName:r,colorsClassName:i,ribbonClassName:o,favorites:a,fieldsetSize:s,hex:c,hexOnly:l,hue:u,includeAlpha:p,mode:h,onChange:f}=e,g=Object(d.a)(e,J);return Object(m.jsxs)(Q,Object.assign({},g,{onFocus:this.onFocus,onBlur:this.onBlur,tabIndex:"0",children:[Object(m.jsxs)(Z,{"data-test-id":"panel-inner",className:i,children:[Object(m.jsx)(C,{className:r,hex:c,hue:u,onChange:f}),Object(m.jsxs)(ee,{"data-test-id":"ribbon-container",className:"m-top-2",children:[Object(m.jsxs)(te,{className:"m-right-2",children:[Object(m.jsx)(N,{hue:u,onChange:f,className:o,includeAlpha:p}),this.renderAlpha({alpha:t,alphaClassName:n,hex:c,includeAlpha:p,onChange:f})]}),Object(m.jsx)(S,{alpha:t,hex:c,onChange:f,onInputClick:this.onSystemColorPickerOpen})]}),Object(m.jsx)(X,{onSelectColor:f,favorites:a})]}),Object(m.jsx)(G,{hexOnly:l,includeAlpha:p,alpha:t,fieldsetSize:s,hex:c,hue:u,onChange:f,mode:h})]}))}}ne.propTypes={alpha:i.a.number,alphaClassName:i.a.string,boardClassName:i.a.string,className:i.a.string,colorsClassName:i.a.string,favorites:i.a.array,fieldsetSize:G.propTypes.fieldsetSize,hex:i.a.string,hexOnly:i.a.bool,hue:i.a.number,includeAlpha:i.a.bool,mode:i.a.oneOf(["RGB","HSL","HSB"]),onBlur:i.a.func,onChange:i.a.func,onFocus:i.a.func,ribbonClassName:i.a.string};n.d(t,"a",(function(){return oe}));const re=e=>{const t=u.a.fromHex(e).toHsvObject();return 0===t.s?null:t.h},ie=(e,t)=>{const n=u.a.fromHex(e).toHsvObject();return 0===n.s?e:u.a.fromHsvObject(Object.assign({},n,{h:t})).toHex()};class oe extends o.Component{static getDerivedStateFromProps(e,t){const{prevHex:n}=t,{color:r}=e;if(n!==r){const e=re(r);return null!=e?{hue:e,prevHex:r}:{prevHex:r}}return null}constructor(e){super(e);this.state={hue:u.a.fromHex(e.color).toHsvObject().h,prevHex:e.color};this.handleChange=this.handleChange.bind(this)}handleChange({alpha:e,hex:t=this.props.color,hue:n}){let r=t;if(null!=n){null==re(t)?this.setState({hue:n}):r=ie(t,n)}const i={};null!=r&&(i.color=r);null!=e&&(i.alpha=e);this.props.onChange(i)}render(){const{alpha:e,alphaClassName:t,boardClassName:n,className:r,color:i,colorsClassName:o,favorites:a,fieldsetSize:c,hexOnly:l,includeAlpha:u,onBlur:d,onFocus:p,ribbonClassName:h}=this.props,{hue:f}=this.state;return Object(m.jsx)(ne,{"data-test-id":"colorpicker-advanced",alphaClassName:t,boardClassName:n,colorsClassName:o,className:s()("private-react-colorpicker-popover--advanced",r),includeAlpha:u,hexOnly:l,favorites:a,fieldsetSize:c,alpha:e,hex:i,hue:f,onChange:this.handleChange,onBlur:d,onFocus:p,mode:this.props.mode,ribbonClassName:h})}}oe.propTypes={alpha:i.a.number,alphaClassName:i.a.string,boardClassName:i.a.string,className:i.a.string,color:i.a.string.isRequired,colorsClassName:i.a.string,favorites:i.a.array,fieldsetSize:ne.propTypes.fieldsetSize,hexOnly:i.a.bool,includeAlpha:i.a.bool,mode:i.a.oneOf(["RGB","HSL","HSB"]),onBlur:i.a.func,onChange:i.a.func,onFocus:i.a.func,ribbonClassName:i.a.string};oe.defaultProps={color:c.OLAF,includeAlpha:!1,hexOnly:!0,favorites:[],alpha:100,onChange:()=>null,onBlur:()=>null,onFocus:()=>null,style:{}}},,function(e,t,n){"use strict";n.r(t);var r=n(40),i=n(2707),o=n(1413);const a="**************";var s=n(2),c=n(279),l=n(462),u=n(1405),d=n(1402),p=n(1400),h=n(1416),m=n(1407);const f=()=>{const e=Object(m.a)(),t=Object(u.a)(),n=Object(p.a)(),i=Object(h.a)(),o=Object(r.useContext)(d.a),a=e.name,s=!o||!n,c=Object(r.useCallback)(()=>s?Promise.resolve(""):o.fetchHighlySensitivePropertyValue({objectTypeId:t,objectId:n,propertyName:a,timestamp:i}),[o,t,n,a,s,i]);if(s)return{fetchHighlySensitivePropertyValue:c,highlySensitiveValueStatus:void 0};const l=o.getHighlySensitivePropertyValue({objectTypeId:t,objectId:n,propertyName:a,timestamp:i});return{fetchHighlySensitivePropertyValue:c,highlySensitiveValueStatus:null==l?void 0:l.status}};var g=n(287),b=n.n(g),O=n(1305),y=n(695),j=n(45);const v=["$isVisible"],C=b()(e=>{let t=Object(s.a)(e,v);return Object(j.jsx)(O.a,Object.assign({},t))}).withConfig({displayName:"ShowHighlySensitiveValueButton__LoadingButton",componentId:"wc4y24-0"})(["transition:opacity 0.2s;opacity:",";"],({$isVisible:e})=>e?1:0);function x(e){const{isVisible:t,className:n}=e,{fetchHighlySensitivePropertyValue:i,highlySensitiveValueStatus:o}=f(),a="LOADING"===o,{onFocus:s,onBlur:u,focused:d}=Object(l.a)({}),[p,h]=Object(r.useState)(!1);return Object(j.jsx)(C,{className:n,size:"extra-small",use:"tertiary-light",failed:p,onClick:()=>{h(!1);i().catch(()=>{h(!0);y.a.addAlert({titleText:Object(j.jsx)(c.a,{message:"customerDataProperties.PropertyInputHighlySensitive.showValueErrorTitle"}),message:Object(j.jsx)(c.a,{message:"customerDataProperties.PropertyInputHighlySensitive.showValueErrorMessage"}),type:"danger"})})},loading:a,onFocus:s,onBlur:u,$isVisible:t||a||d,children:Object(j.jsx)(c.a,{message:"customerDataProperties.PropertyInputHighlySensitive.showValue"})})}const E=e=>{const{className:t,formControlProps:n,inputProps:r={}}=e;return Object(j.jsx)(i.a,Object.assign({},n,{formControlUse:"floating",overlayContent:Object(j.jsx)(x,{isVisible:!0}),hideEditIcon:!0,isStatic:!0,children:Object(j.jsx)("span",Object.assign({className:t},Object(o.a)(r),{children:a}))}))};var T=n(342),S=n(508),I=n(55),w=n(434),_=n(2735),N=n(302);const A=["$formControlUse"],D="26px",k=b()(e=>{let t=Object(s.a)(e,A);return Object(j.jsx)("div",Object.assign({},t))}).withConfig({displayName:"PositionedButtonContainer",componentId:"hufo0h-0"})(["position:absolute;"," ",""],({$formControlUse:e})=>"table-cell"!==e?`left: ${N.Q};`:"",({$formControlUse:e})=>["default","compact"].includes(e)?`bottom: calc((${N.P} - ${D}) / 2);`:""),P=["$formControlUse"],R=b()(e=>{let t=Object(s.a)(e,P);return Object(j.jsx)("span",Object.assign({},t))}).withConfig({displayName:"HiddenMaskedDisplay",componentId:"sc-1mpidmf-0"})(["visibility:hidden;",""],({$formControlUse:e})=>"table-cell"!==e?`font-size: ${N.S};`:""),F=["hovered"],L=b()(w.a).withConfig({displayName:"PropertyInputHighlySensitiveNonFloating__RelativeUIFlex",componentId:"sc-2mhudi-0"})(["position:relative;"]),M=e=>{const{className:t,use:n,formControlProps:r={},inputProps:c={}}=e,l=Object(T.a)({}),{hovered:u}=l,d=Object(s.a)(l,F);return Object(j.jsxs)(L,Object.assign({},d,{align:"center",direction:"row",children:[Object(j.jsx)(_.a,{grow:1,children:Object(j.jsx)(i.a,Object.assign({},r,{formControlUse:n,children:Object(j.jsx)(S.a,Object.assign({className:t},Object(o.a)(c),{value:a,onChange:I.a}))}))}),Object(j.jsxs)(k,{$formControlUse:n,children:[Object(j.jsx)(R,{$formControlUse:n,className:"m-right-2",children:a}),Object(j.jsx)(x,{isVisible:u})]})]}))},B=e=>"floating"===e.use?Object(j.jsx)(E,Object.assign({},e)):Object(j.jsx)(M,Object.assign({},e));t.default=Object(r.memo)(B)},,,,,,function(e,t,n){"use strict";var r=n(41),i=n.n(r),o=n(40),a=n(55),s=n(4),c=n(288),l=n.n(c),u=n(287),d=n.n(u),p=n(298),h=n(2682),m=n(443),f=n(2712),g=n(490),b=n(434),O=n(335),y=n(708),j=n(703),v=n(461),C=n(460),x=n(2620);const E={ADVANCED:"advanced",BRAND:"brand",SIMPLE:"simple"},T=["#000000","#FF0201","#FF9902","#FFFF04","#00FF03","#00FFFF","#0600FF","#9A00FF","#FF00FF","#FFFFFF","#F4CCCC","#FCE5CD","#FFF2CC","#D9EAD3","#D0E0E3","#CFE2F3","#D9D2E9","#EAD1DC","#FAFAFA","#EA9999","#F9CB9C","#FFE599","#B6D7A8","#A2C4C9","#9FC5E8","#B4A7D6","#D5A6BD","#EEEEEE","#E06666","#F6B26B","#FFD966","#93C47D","#76A5AF","#6FA8DC","#8E7CC3","#C27BA0","#CCCCCC","#CC0201","#E69138","#F1C233","#69A84F","#45818E","#3D85C6","#674EA7","#A64D79","#999999","#990100","#B45F06","#BF9002","#37761D","#134F5C","#0C5394","#351C75","#741B47","#666666","#660000","#783F04","#7F6001","#274E13","#0C343D","#073763","#20124D","#4C1130"];var S=n(2),I=(n(10),n(324)),w=n(326),_=n(339);const N=(e,t,n,r,i,o)=>Object(u.css)(["color:",";background-color:",";background-image:linear-gradient( ",","," ",","," "," ) !important;"],e,n,t,n,r,i,o);var A=n(327),D=n(1151),k=n(341),P=n(343),R=n(767),F=n(45);const L=["active","color","endColor","focused","hovered","opacity","startColor","size"],M=["angle","color","endColor","label","opacity","selected","size","startColor","children"],B='\n  <svg height="16" width="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n    <g fill-rule="nonzero" fill="none">\n      <path fill="%23F2F5F8" d="M0 0h16v16H0z"/>\n      <g fill="%23CBD6E2">\n        <path d="M8 8h8v8H8zM0 0h8v8H0z"/>\n      </g>\n    </g>\n  </svg>\n',U=28,V=`\n  box-shadow: 0 0 0 1px ${I.OLAF}, 0 0 0 3px ${I.CALYPSO};\n`,H=`\n  box-shadow: 0 0 0 2px ${I.CALYPSO_MEDIUM},\n    0 0 8px 0 ${Object(A.b)(I.CALYPSO,.3)};\n`,q=(e=U)=>Object(u.css)(["background-image:url('data:image/svg+xml;utf8,","');background-repeat:repeat;background-size:",";"],B,Object(w.m)(e/2.5)),G=d()(e=>{const t=Object(S.a)(e,L);return Object(F.jsx)(P.a,Object.assign({},t))}).withConfig({displayName:"UIColorSquatch__SquatchOuter",componentId:"q0dgj0-0"})(["",";border-radius:2px;",";",";height:",";position:relative;",";width:",";&::after{background-color:",";border-radius:inherit;bottom:0;content:'';display:",";left:0;position:absolute;right:0;top:0;}"],e=>e.opacity&&q(e.size),e=>e.selected&&V,e=>e.hovered&&!e.selected&&H,e=>Object(w.m)(e.size),Object(w.k)("box-shadow"),e=>Object(w.m)(e.size),Object(A.b)(I.MONOLITH,.1),e=>e.active?"block":"none"),W=d.a.span.withConfig({displayName:"UIColorSquatch__SquatchColor",componentId:"q0dgj0-1"})(["background:",";",";border-width:1px;border-color:",";border-radius:inherit;border-style:solid;display:block;height:100%;opacity:",";pointer-events:none;width:100%;"],e=>e.color&&e.color+" !important",e=>e.startColor&&N(void 0,e.angle,e.startColor,void 0,e.endColor,void 0),e=>e.selected?I.OLAF:Object(A.b)(I.MONOLITH,.2),e=>e.opacity&&e.opacity/100);function z(e){const{angle:t="90deg",color:n,endColor:r,label:i,opacity:o,selected:a,size:s=U,startColor:c,children:l}=e,u=Object(S.a)(e,M),d=`${!i&&c&&r?`${c}, ${r}`:i||n}${o?`, ${o} opacity`:""}`;0;return Object(F.jsx)(k.a,Object.assign({},e,{children:i=>Object(F.jsx)(D.a,Object.assign({},e,{children:p=>Object(F.jsx)(R.a,Object.assign({},e,{children:e=>Object(F.jsx)(G,Object.assign({},u,i,p,e,{size:s,"aria-label":d,"aria-pressed":a,opacity:o,selected:a,children:Object(F.jsx)(W,{angle:t,color:n,endColor:r,opacity:o,startColor:c,children:l})}))}))}))}))}z.propTypes={children:i.a.node,angle:i.a.string,color:i.a.string,endColor:i.a.string,focused:Object(_.a)(i.a.bool),hovered:Object(_.a)(i.a.bool),label:i.a.string,opacity:i.a.number,selected:i.a.bool,size:i.a.number,startColor:i.a.string};z.defaultProps={angle:"90deg",size:U};z.displayName="UIColorSquatch";var $=n(752);const K=["children","gapSize"];function Y(e){let{children:t,gapSize:n}=e,r=Object(S.a)(e,K);return Object(F.jsx)("div",Object.assign({},r,{children:Object(F.jsx)($.a,{horizontalGap:n,verticalGap:n,"data-test-id":"button-wrapper",children:t})}))}Y.propTypes={children:i.a.node,gapSize:i.a.number};Y.defaultProps={gapSize:6};Y.displayName="UIColorSquatchGrid";class X extends o.Component{colorMatches(e,t){return e&&t&&e.toLowerCase()===t.toLowerCase()}getValues(e){const{defaultAlpha:t,defaultColor:n}=this.props;if(/^#[0-9a-fA-F]{3,6}$/.test(e))return{color:e,alpha:t};if(e.color&&e.alpha){return{color:e.color,alpha:isNaN(e.alpha)?t:e.alpha}}setTimeout(()=>{throw new Error("Unable to parse color from "+e)},0);return{alpha:t,color:n}}render(){const{className:e,currentColor:t,gapSize:n,grid:r,onClick:i,squatchSize:o,showMatchedSquatch:a}=this.props;let s=!a;return Object(F.jsx)(Y,{"data-test-id":"colorpicker-squatch-grid",className:l()("private-react-colorpicker-popover--color-grid",e),gapSize:n,children:r.map((e,n)=>{const{color:r,alpha:a}=this.getValues(e),c=!s&&this.colorMatches(r,t);s=s||c;return Object(F.jsx)(z,{"data-test-id":"colorpicker-squatch",color:r,onClick:()=>{i({alpha:a,color:r})},opacity:a,selected:c,size:o},n)})})}}X.propTypes={className:i.a.string,currentColor:i.a.string.isRequired,defaultAlpha:i.a.number,defaultColor:i.a.string,gapSize:i.a.number,grid:i.a.arrayOf(i.a.oneOfType([i.a.string,i.a.shape({color:i.a.string,alpha:i.a.string})])).isRequired,onClick:i.a.func.isRequired,squatchSize:i.a.number,showMatchedSquatch:i.a.bool};X.defaultProps={defaultAlpha:100,defaultColor:"#FFFFFF",gapSize:5,squatchSize:25,showMatchedSquatch:!0};var J=X;const Q=e=>e&&Array.isArray(e)&&e.length>0,Z=d.a.div.withConfig({displayName:"ColorPickerPopoverBody__FavoritesLabelContainer",componentId:"sc-1wa9xcs-0"})(["margin-bottom:2px;display:flex;justify-content:space-between;"]),ee=d()(m.a).withConfig({displayName:"ColorPickerPopoverBody__ResetButton",componentId:"sc-1wa9xcs-1"})(["width:100%;"]);class te extends o.Component{constructor(...e){super(...e);this.handleResetClick=()=>{const{defaultAlpha:e,defaultColor:t,onChange:n,onResetClick:r,onOpenChange:i}=this.props;r?r():n({color:t,alpha:e});i&&i(Object(p.a)(!1))};this.handleColorChange=({color:e,alpha:t})=>{const{onChange:n,onOpenChange:r,pickerMode:i}=this.props;n({color:e,alpha:t});i===E.SIMPLE&&r&&r(Object(p.a)(!1))}}renderFavoritesLink(){const{editFavoritesLink:e,showFavoritesLink:t}=this.props;return e&&t?Object(F.jsx)(f.a,{external:!0,href:e,children:s.a.text("colorPicker.popover.edit")}):null}renderFavorites(){const{color:e,favorites:t,editFavoritesLabel:n}=this.props;return Q(t)?Object(F.jsxs)("div",{"data-test-id":"colorpicker-favorites",className:"private-react-colorpicker-popover--favorites m-top-2",children:[Object(F.jsxs)(Z,{children:[Object(F.jsx)(g.a,{className:"p-y-0",children:Object(C.a)(n)}),this.renderFavoritesLink()]}),Object(F.jsx)(J,{currentColor:e,grid:t,onClick:this.handleColorChange})]}):null}renderReset(){const{showResetToDefault:e}=this.props;return e?Object(F.jsx)(b.a,{children:Object(F.jsx)(ee,{"data-test-id":"colorpicker-reset-button",className:"private-react-colorpicker-popover--reset m-top-3",onClick:this.handleResetClick,size:"small",use:"tertiary-light",children:s.a.text("colorPicker.popover.reset")})}):null}renderSimpleTab(){const{color:e,colorGrid:t,favorites:n}=this.props,r=e&&Q(n)&&n.indexOf(e.toLowerCase())>=0;return Object(F.jsxs)(j.a,{onMouseDown:e=>e.preventDefault(),tabId:E.SIMPLE,title:s.a.text("colorPicker.popover.mode.simple"),children:[Object(F.jsx)(J,{currentColor:e,grid:t,onClick:this.handleColorChange,showMatchedSquatch:!r}),this.renderFavorites(),this.renderReset()]})}renderAdvancedTab(){const{alpha:e,alphaClassName:t,boardClassName:n,color:r,colorsClassName:i,colorPickerClassName:o,includeAlpha:a,ribbonClassName:c}=this.props,u=l()(o,"p-all-0");return Object(F.jsxs)(j.a,{onMouseDown:e=>e.preventDefault(),tabId:E.ADVANCED,title:s.a.text("colorPicker.popover.mode.advanced"),children:[Object(F.jsx)(x.a,{alpha:e,alphaClassName:t,boardClassName:n,className:u,color:r,colorsClassName:i,fieldsetSize:"small",hexOnly:!1,includeAlpha:a,onChange:this.handleColorChange,ribbonClassName:c}),this.renderReset()]})}render(){const{className:e,onPickerModeChange:t,pickerMode:n}=this.props;return Object(F.jsx)(O.a,{flush:!0,className:e,children:Object(F.jsxs)(y.a,{fill:!0,onSelectedChange:t,panelClassName:"p-all-4 m-all-0",selected:n,use:"toolbar",children:[this.renderSimpleTab(),this.renderAdvancedTab()]})})}}te.propTypes={alpha:i.a.number,alphaClassName:i.a.string,boardClassName:i.a.string,className:i.a.string,color:i.a.string,colorGrid:i.a.arrayOf(i.a.oneOfType([i.a.string,i.a.shape({color:i.a.string,alpha:i.a.string})])),colorPickerClassName:i.a.string,colorsClassName:i.a.string,defaultAlpha:i.a.number,defaultColor:i.a.string,editFavoritesLink:i.a.string,editFavoritesLabel:Object(v.a)(i.a.string),favorites:i.a.arrayOf(i.a.string),includeAlpha:i.a.bool,onChange:i.a.func.isRequired,onPickerModeChange:i.a.func,onOpenChange:i.a.func,onResetClick:i.a.func,pickerMode:i.a.oneOf(Object.keys(E).map(e=>E[e])),ribbonClassName:i.a.string,showFavoritesLink:i.a.bool,showResetToDefault:i.a.bool};te.defaultProps={colorGrid:T,defaultAlpha:100,defaultColor:"#FFFFFF",includeAlpha:!1,pickerMode:E.SIMPLE,onPickerModeChange:a.a.thatReturnsNull,showResetToDefault:!0,editFavoritesLabel:()=>s.a.text("colorPicker.favorites")};t.a=Object(h.a)(te,["pickerMode"])},function(e,t,n){"use strict";var r=n(2839),i=n(1447),o=n(539),a=n(1446);var s=(e,t)=>{const n=[];let r=0,i=0;do{n[i++]=e.slice(r,r+t);r+=t}while(r<e.length);return n};var c=e=>[].concat(...e),l=n(1448);const u=Object(l.a)(String),d=()=>{const e={};e.promise=new Promise((t,n)=>{e.resolve=t;e.reject=n});return e},p=()=>({idQueue:[],pending:{}}),h=({debouncePeriod:e,fetchByIds:t,isIdValid:n,maxBatchSize:r,resolutionCache:i})=>{const l=Object(o.a)(()=>{const e=i.idQueue;i.idQueue=[];const n=s(e,r);Promise.all(n.map(e=>t(e))).then(c).then(t=>{const n=u(e);t.forEach(e=>{const t=String(e.id);Object.prototype.hasOwnProperty.call(i.pending,t)&&i.pending[t].resolve(e);delete i.pending[t];delete n[t]});Object.keys(n).forEach(e=>{i.pending[e].reject(Object(a.d)(e));delete i.pending[e]})}).catch(t=>{e.forEach(e=>{const n=String(e);i.pending[n].reject(Object(a.b)(t));delete i.pending[n]})})},e);return e=>{if(!n(e))return Promise.reject(Object(a.c)(e));const t=String(e);if(Object.prototype.hasOwnProperty.call(i.pending,e))return i.pending[t].promise;const r=d();i.pending[t]=r;i.idQueue.push(e);l();return r.promise}},m=e=>t=>e(t).catch(e=>Promise.reject(Object(a.e)(e))),f=({byId:e,search:t})=>{const n={},r={byId:t=>Object.prototype.hasOwnProperty.call(n,t)?Promise.resolve(n[t]):e(t).then(e=>{n[t]=e;return e}),refreshCache:e=>{delete n[e];return r.byId(e)},search:e=>t(e).then(e=>{for(const t of e.references)n[t.id]=t;return e})};return r};var g=n(1350),b=n(24),O=n.n(b);const y=/^\d+$/,j=(e,t)=>{if(""===t||null==t)return!1;"number"==typeof t&&O.a.capturePageEvent("invalid-rrl-id",{extra:{id:t,referenceType:e,type:"Numeric Id"}});switch(e){case g.y:case g.Q:case g.k:return y.test(t);default:return!0}};n.d(t,"a",(function(){return v}));const v=({debouncePeriod:e=500,enableCaching:t=!0,fetchByIds:n,formatByIdResponse:o,formatSearchResponse:a,maxBatchSize:s=500,referenceType:c,isIdValid:l=(e=>j(c,e)),fetchBySearch:u})=>{Object(i.a)(c);const d=e=>n(e).then(o),g=e=>u(e).then(a),b=p(),O=h({debouncePeriod:e,fetchByIds:d,isIdValid:l,maxBatchSize:s,resolutionCache:b}),y=m(g),v={byId:e=>O(e),search:e=>y(e)};return{api:t?f(v):Object.assign({},v,{refreshCache:v.byId}),referenceType:c,useFetchQuery:r.a,useSearchQuery:r.b}}},,,,,,,,,,,,function(e,t,n){"use strict";var r=n(40),i=n(41),o=n.n(i),a=n(59),s=n(1148),c=n.n(s),l=n(73),u=n(279),d=n(696),p=n(2741),h=n(1272),m=n(1149),f=n(1200),g=n(1196),b=n(1198),O=n(24),y=n.n(O),j=n(1210),v=n(485),C=n(282),x=n(729),E=n(1140),T=n(287),S=n.n(T),I=n(496),w=n(490),_=n(2712),N=n(2734),A=n(1324),D=n(1201),k=n(66),P=n(178),R=n(2790),F=n(45);const L=e=>"ContentComponents.cmv2.fields.embed."+e,M=Object(D.g)(),B={updateOEmbedAsset:R.d},U=3.32,V=175,H=S.a.div.withConfig({displayName:"EmbedPreview__EmbedIframeContainer",componentId:"sc-1mfz96v-0"})(["position:relative;display:",";overflow:",";width:100%;height:0;padding-bottom:","%;"],({showPreview:e})=>e?"block":"none",({height:e,showPreview:t})=>t&&e<U*V?"hidden":"scroll",({paddingBottom:e})=>e>V?V:e),q=S.a.iframe.withConfig({displayName:"EmbedPreview__EmbedIframe",componentId:"sc-1mfz96v-1"})(["width:100%;border:none;position:absolute;top:0;left:0;"]);class G extends r.Component{constructor(e){super(e);const{height:t}=e.oEmbedAsset||{};this.hasUndefinedHeight=void 0===t;this.uniqueEmbedId=""+Math.ceil(Date.now()*Math.random());this.onEmbedPostMessage=this.onEmbedPostMessage.bind(this);this.postMessageToPreviewIframe=this.postMessageToPreviewIframe.bind(this);this.state={containerHeight:D.c.HEIGHT,containerWidth:D.c.WIDTH,previewLoadingStatus:k.UNINITIALIZED}}componentDidMount(){window.addEventListener("message",this.onEmbedPostMessage)}shouldComponentUpdate(e,t){return c()(this,e,t)}componentDidUpdate(e,t){const{embedHtml:n,oEmbedAsset:r,onOEmbedResize:i,oEmbedUrl:o,updateOEmbedAsset:a}=this.props,{containerHeight:s,containerWidth:c}=this.state;if(r){const n=r.provider_name?r.provider_name.toLowerCase():"",u=n===D.h.TWITTER,d=n===D.h.VIDYARD;Object(l.isEqual)(Object(l.omit)(e.oEmbedAsset||{},"height"),Object(l.omit)(r||{},"height"))||this.postMessageToPreviewIframe({action:D.b.SET_CONTENT,payload:{html:r.html}});if((this.hasUndefinedHeight||d)&&(t.containerHeight!==s||t.containerWidth!==c)){const e=s/c;i&&this.hasUndefinedHeight&&i();a(o,{height:u||d?Math.round(e*Number(r.width)):s})}}e.embedHtml!==n&&this.postMessageToPreviewIframe({action:D.b.SET_CONTENT,payload:{html:n}})}componentWillUnmount(){this.postMessageToPreviewIframe({action:D.b.DISCONNECT});window.removeEventListener("message",this.onEmbedPostMessage)}onEmbedPostMessage(e){const{embedHtml:t,oEmbedAsset:n,sourceType:r}=this.props,{height:i,html:o,provider_name:a,type:s,url:c,width:l}=n||{},{origin:u,source:d,data:p}=e,{action:h,id:m,payload:g}=p.body||{};let b=null;if(this.embedIframeTargetWindow&&u===M&&d===this.embedIframeTargetWindow&&m===this.uniqueEmbedId)if(h!==D.b.SET_CONTENT_DONE)if(h!==D.b.SIZE_CHANGE){if(r===P.a.HTML){b=t;if(!Object(f.e)(b)){const{dimensions:e,html:t}=Object(f.f)(b);b=t;this.setState({containerHeight:Number(e.height),containerWidth:Number(e.width)})}b=Object(f.j)(b)}else if(r===P.a.OEMBED||r===P.a.MEDIA_BRIDGE)if(s===P.b.VIDEO||s===P.b.RICH){b=o.trim();if(!Object(f.e)(b)){const{dimensions:e,html:t}=Object(f.f)(b,{width:l,height:i});b=t;this.setState({containerHeight:Number(e.height),containerWidth:Number(e.width)})}b=Object(f.j)(b,a)}else s===P.b.PHOTO&&(b=Object(f.g)(c));h===D.b.READY&&b&&this.postMessageToPreviewIframe({action:D.b.SET_CONTENT,payload:{html:b}})}else{const{height:e,width:t}=g;t>0&&t!==this.state.containerWidth&&this.setState({containerWidth:t});e>0&&e!==this.state.containerHeight&&this.setState({containerHeight:e})}else this.setState({previewLoadingStatus:k.SUCCEEDED})}postMessageToPreviewIframe(e){this.embedIframeTargetWindow&&this.embedIframeTargetWindow.postMessage(Object.assign({},e,{id:this.uniqueEmbedId}),M)}renderEmbedIframe(){const{oEmbedAsset:e,sourceType:t}=this.props;let n=this.state.containerWidth,i=this.state.containerHeight;const{height:o,width:a}=e||{};if((t===P.a.OEMBED||t===P.a.MEDIA_BRIDGE)&&a){n=Number(a);i=Number(o)||this.state.containerHeight}return Object(F.jsx)(H,{height:this.state.containerHeight,paddingBottom:Object(f.d)({width:n,height:i}),showPreview:this.state.previewLoadingStatus===k.SUCCEEDED,children:Object(F.jsxs)(r.Fragment,{children:[this.state.previewLoadingStatus!==k.SUCCEEDED&&Object(F.jsx)(N.a,{className:"m-top-6",layout:"centered"}),Object(F.jsx)(q,{height:this.state.containerHeight,ref:e=>{e&&e.contentWindow&&(this.embedIframeTargetWindow=e.contentWindow)},referrerPolicy:"strict-origin",sandbox:"allow-scripts allow-same-origin",src:`${D.a}?${encodeURIComponent(`id=${this.uniqueEmbedId}&origin=${window.location.origin}`)}`,width:n})]})})}render(){const{oEmbedAsset:e,oEmbedUrl:t,sourceType:n}=this.props;return Object(F.jsx)(p.a,{label:Object(F.jsx)(I.a,{itemRight:n===P.a.OEMBED&&Object(F.jsx)(v.a,{children:Object(F.jsx)(_.a,{external:!0,href:t,children:Object(F.jsx)(u.a,{message:L("oembedUrl.preview.link")})})}),children:Object(F.jsx)(w.a,{className:"p-all-0",children:Object(F.jsx)(u.a,{message:L("previewLabel")})})}),labelClassName:"p-right-0",children:e&&e.type===P.b.VIDEO?Object(F.jsx)(A.a,{children:this.renderEmbedIframe()}):this.renderEmbedIframe()})}}var W=Object(a.connect)(null,B)(G),z=n(443),$=n(2655),K=n(1334),Y=n(698),X=n(1333);const J=e=>"ContentComponents.cmv2.fields.embed.mediaBridge."+e,Q=e=>{const t=[K.a.VIDEO];if(e.includes(P.b.RICH)){t.push(K.a.AUDIO);t.push(K.a.DOCUMENT)}e.includes(P.b.PHOTO)&&t.push(K.a.IMAGE);return t},Z=(e,t)=>{const{supportedMediaBridgeProviders:n}=t,r=X.d(e,{supportedMediaBridgeProviders:n});return{hasFetchedProviders:X.a(e,{supportedMediaBridgeProviders:n}),mediaBridgeProviderIds:r,options:X.e(e,{supportedMediaBridgeProviders:n})}},ee={fetchMediaBridgeProviders:R.b};var te=Object(a.connect)(Z,ee)(({children:e,error:t=!1,fetchMediaBridgeProviders:n,hasFetchedProviders:i,hasValue:o,mediaBridgeProviderIds:a,onSelect:s,options:c,selectedProvider:l,selectedProviderId:p,supportedMediaBridgeProviders:h=[],supportedOEmbedTypes:m=[],use:f="tertiary"})=>{const g=a.length>1,b=1===a.length?a[0]:p,{MediaBridgePicker:O}=Object(r.useContext)(Y.a),[y,j]=Object(r.useState)(!1),[v,x]=Object(r.useState)(g&&!o?null:b);Object(r.useEffect)(()=>{i||n(h);o||v||!b||x(b)},[h.join(".")]);Object(r.useEffect)(()=>{g||x(b);O||console.warn("No MediaBridgePicker provided in PickersContext")},[b]);if(!O)return null;if(!i)return Object(F.jsx)(N.a,{});if(!p&&i&&!a.length)return Object(F.jsx)(d.a,{className:"m-top-2",titleText:Object(F.jsx)(u.a,{message:J("missingErrorTitle")}),type:"danger",children:Object(F.jsx)(u.a,{message:J("missingErrorText")})});const E=()=>{j(!1);g&&!o&&x(null)},T=e=>{s(e);E()},S=e=>{x(e.target.value);j(!0)},I=e=>{const t=e.dropdownClassName||"m-x-4 p-y-2";return Object(F.jsx)("div",{className:t,children:e.dropdownText||e.text})},w=()=>{const n=l&&l.name?Object(F.jsx)(C.a,{message:J("labelButton"),options:{providerName:l.name}}):Object(F.jsx)(u.a,{message:J("labelButtonDefault")});return g&&!o?Object(F.jsx)($.a,{buttonUse:"tertiary",buttonSize:"sm","data-selenium":"media-bridge-select",error:t,onChange:S,optionRenderer:I,options:c,placeholder:Object(F.jsx)(u.a,{message:J("labelSelect")}),value:v}):Object(F.jsx)(z.a,{className:"m-top-2",onClick:()=>j(!0),readOnly:!a.length,size:"small",use:f,children:e||n})};return Object(F.jsxs)(r.Fragment,{children:[y&&Object(F.jsx)(O,{mediaTypes:Q(m),onClose:E,onSelect:T,providerId:v}),w()]})}),ne=n(508),re=n(2779),ie=n(2),oe=n(296),ae=n(467);const se=["children","id","label"],ce=S.a.label.withConfig({displayName:"UIInlineLabel__InlineLabel",componentId:"sc-1v9t83t-0"})(["display:inline-flex;align-items:center;margin-right:12px;"]),le=S.a.div.withConfig({displayName:"UIInlineLabel__LabelText",componentId:"sc-1v9t83t-1"})(["flex-shrink:0;margin-right:8px;user-select:none;"]),ue=e=>{const{children:t,id:n,label:i}=e,o=Object(ie.a)(e,se),a=Object(oe.a)("uiinlinelabel-"),s=n||a;Object(ae.a)(t,ue.displayName);return Object(F.jsxs)(ce,Object.assign({},o,{id:s,children:[Object(F.jsx)(le,{children:i}),Object(r.cloneElement)(t,{"aria-labelledby":s})]}))};ue.propTypes={children:o.a.element.isRequired,label:o.a.node.isRequired};ue.displayName="UIInlineLabel";var de=ue,pe=n(1199),he=n(2797);const me=Object.freeze({EMBED_ADD_NEW:"embed-add-new",EMBED_TYPE:"embed-type",SERVICE:"service"}),fe=e=>"ContentComponents.cmv2.fields.embed."+e,ge=Object(j.a)(re.a);class be extends r.Component{constructor(e){super(e);const{onFieldChange:t,value:n}=e,{embed_html:r,media_bridge_object:i,oembed_url:o}=n||{},{oembed_url:a}=i||{};this.onClearMediaBridge=this.onClearMediaBridge.bind(this);this.onOEmbedResize=this.onOEmbedResize.bind(this);this.onHtmlEmbed=this.onHtmlEmbed.bind(this);this.onUrlEmbed=this.onUrlEmbed.bind(this);this.onMediaBridgeSelect=this.onMediaBridgeSelect.bind(this);this.debouncedOnFieldChange=Object(l.debounce)(t,250);this.state={isValidHtml:!r||Object(he.c)({embed:r,url:""}),isValidMediaBridgeUrl:!a||Object(he.c)({embed:"",url:a}),isValidUrl:!o||Object(he.c)({embed:"",url:o})}}shouldComponentUpdate(e,t){return c()(this,e,t)}componentDidUpdate(e){const{embedUrl:t,getNewOEmbedValue:n,isInEmail:r,oEmbedAsset:i,oEmbedFetchStatus:o,onFieldChange:a,sourceType:s,supportedOEmbedTypes:c,trackEvent:u,value:d}=this.props,{embed_html:p,media_bridge_object:h}=d||{},m=s===P.a.MEDIA_BRIDGE,{size_type:g}=m?h||{}:d||{};if(e.value&&e.value.embed_html!==p){const e=!p||Object(he.c)({embed:p,url:""});p&&e&&u&&u(me.EMBED_ADD_NEW,{[me.EMBED_TYPE]:s,[me.SERVICE]:Object(f.i)(p)});this.setState({isValidHtml:e})}if(e.embedUrl!==t){const e=!t||Object(he.c)({embed:"",url:t});m?this.setState({isValidMediaBridgeUrl:e}):this.setState({isValidUrl:e})}if(e.oEmbedFetchStatus!==o&&o===k.FAILED){if(Object.keys(f.a).some(e=>m?h&&h[e]&&(!h[e]).type:d&&d[e]&&(!d[e]).type)){a(n(Object(f.h)(m?h:d)))}m&&y.a.captureMessage("media bridge oembed fetch failed",{extra:{embedUrl:t}})}const b=i&&i.type||"";if(i&&!Object(l.isEqual)(e.oEmbedAsset,i)&&c.includes(b)&&this.shouldSaveOembedData){this.shouldSaveOembedData=!1;let e={oembed_response:i};if(b!==P.b.LINK){let t=i.width&&Number(i.width)||void 0,n=i.height&&Number(i.height)||void 0;if(m&&r&&!t&&Number(i.thumbnail_width)&&Number(i.thumbnail_height)){t=i.thumbnail_width;n=i.thumbnail_height}e=Object.assign({},e,{width:t,height:n,size_type:r?pe.a.EXACT:g||pe.a.AUTO});r||(e=Object.assign({},e,{max_width:t,max_height:n}))}u&&u(me.EMBED_ADD_NEW,{[me.EMBED_TYPE]:s,[me.SERVICE]:i.provider_name?i.provider_name.toLowerCase():null});this.debouncedOnFieldChange(n(e))}}onOEmbedResize(){this.shouldSaveOembedData=this.shouldTriggerOembedResize}onHtmlEmbed(e){const{onFieldChange:t,value:n}=this.props,r=e.target.value.trim();t(Object.assign({},n,{embed_html:r}))}onUrlEmbed(e){const{getNewOEmbedValue:t,onFieldChange:n,value:r}=this.props,i=e.target.value.trim();let o={oembed_url:i};if(i&&Object(he.c)({embed:"",url:i})){this.shouldSaveOembedData=!0;this.shouldTriggerOembedResize=!0}else o=Object.assign({},o,Object(f.h)(r));n(t(o))}onMediaBridgeSelect(e){const{onFieldChange:t,value:n}=this.props,{media_bridge_object:r}=n||{};this.shouldSaveOembedData=!0;this.shouldTriggerOembedResize=!0;t(Object.assign({},n,{media_bridge_object:Object.assign({},r,{id:e.id,oembed_url:e.oembedUrl,provider_id:e.providerId,title:e.title,media_type:e.mediaType})}))}onClearMediaBridge(){const{onFieldChange:e,value:t}=this.props,{media_bridge_object:n}=t||{};e(Object.assign({},t,{media_bridge_object:Object.assign({},n,{id:null,oembed_url:"",provider_id:null,title:null,media_type:null},Object(f.h)(n))}))}renderOEmbedValidationMessage(e,t,n){const{sourceType:r,supportedOEmbedTypes:i}=this.props,o=!(!n||i.includes(n));return e?t===k.FAILED?Object(F.jsx)(u.a,{message:fe(r===P.a.MEDIA_BRIDGE?"oembedUrl.mediaBridgeFetchFailed":"oembedUrl.unsupportedUrlWarning")}):o&&r!==P.a.MEDIA_BRIDGE?Object(F.jsx)(C.a,{message:fe("oembedUrl.invalidTypeWarning"),options:{supportedTypes:Object(F.jsx)(x.a,{exclusive:!0,children:i.map(e=>Object(F.jsx)(u.a,{message:fe(`oembedUrl.oembedTypes.${e}.singular`)},e))})}}):null:Object(F.jsx)(u.a,{message:fe("oembedUrl.malformedUrlWarning")})}renderMediaBridge(){const{error:e,mediaBridgeAssetFetchStatus:t,oEmbedAsset:n,oEmbedFetchStatus:i,readOnly:o,required:a,selectedMediaBridgeProvider:s,supportedMediaBridgeProviders:c,supportedOEmbedTypes:l,useOnDark:d,value:p}=this.props,{media_bridge_object:h}=p||{},{oembed_url:m,provider_id:f}=h||{},{isValidMediaBridgeUrl:g}=this.state,b=n&&n.type||"",O=!g||i===k.FAILED,y=t===k.FAILED||t===k.NOT_FOUND,j=b||h&&h.id,C=Object(F.jsxs)(r.Fragment,{children:[Object(F.jsx)(te,{error:e,hasValue:!0,onSelect:this.onMediaBridgeSelect,selectedProvider:s,selectedProviderId:f,supportedMediaBridgeProviders:c,supportedOEmbedTypes:l,use:"link",children:Object(F.jsx)(v.a,{children:Object(F.jsx)(u.a,{message:"ContentComponents.buttons.replace"})})}),Object(F.jsx)(z.a,{"data-test-id":"cmv2-media-bridge-remove",disabled:o||a,onClick:this.onClearMediaBridge,use:"link",children:Object(F.jsx)(v.a,{children:Object(F.jsx)(u.a,{message:"ContentComponents.buttons.remove"})})})]}),x=g&&t===k.NOT_FOUND?Object(F.jsx)(u.a,{message:fe("oembedUrl.mediaBridgeAssetDeleted"),options:{providerName:s&&s.name}}):this.renderOEmbedValidationMessage(g,i,b);return Object(F.jsxs)(r.Fragment,{children:[!j&&Object(F.jsx)(te,{hasValue:!1,onSelect:this.onMediaBridgeSelect,selectedProvider:s,selectedProviderId:f,supportedMediaBridgeProviders:c,supportedOEmbedTypes:l}),j&&Object(F.jsx)(E.a,{"data-test-id":"cmv2-media-bridge-form-control",error:O||y,label:Object(F.jsx)(u.a,{message:fe("oembedUrl.labelGeneral")}),labelItemRight:C,validationMessage:(O||y)&&x,children:Object(F.jsx)(ne.a,{name:"media-bridge",readOnly:!0,use:d?"on-dark":"default",value:m||""})}),i===k.PENDING?Object(F.jsx)(N.a,{className:"m-top-6",layout:"centered"}):m&&j&&b!==P.b.LINK&&this.renderMediaBridgePreview(O)]})}renderMediaBridgePreview(e){const{mediaBridgeAssetFetchStatus:t,oEmbedAsset:n,showPreview:i,sourceType:o}=this.props,{media_bridge_object:a}=this.props.value||{};if(!a)return null;const s=a.id?Object(F.jsxs)("div",{className:"m-top-4",children:[Object(F.jsx)("b",{children:a.title}),Object(F.jsx)("br",{}),a.media_type&&Object(F.jsx)(de,{label:Object(F.jsx)(u.a,{message:fe("mediaBridge.mediaType")}),children:Object(F.jsx)("span",{className:"titlecase",children:a.media_type.toLowerCase()})})]}):null;return!e&&i?Object(F.jsxs)(r.Fragment,{children:[s,t===k.SUCCEEDED?Object(F.jsx)(W,{oEmbedAsset:n,oEmbedUrl:a.oembed_url,onOEmbedResize:this.onOEmbedResize,sourceType:o}):null]}):s}renderOEmbed(){const{error:e,oEmbedFetchStatus:t,oEmbedAsset:n,readOnly:i,sourceType:o,supportedOEmbedTypes:a,useOnDark:s,value:c}=this.props,{oembed_url:l}=c||{},d=n&&n.type||"",h=!(!d||a.includes(d)),m=!this.state.isValidUrl||t===k.FAILED||h;let f="oembedUrl.labelGeneral";if(1===a.length)switch(a[0]){case P.b.PHOTO:f="oembedUrl.labelPhoto";break;case P.b.VIDEO:f="oembedUrl.labelVideo";break;case P.b.LINK:f="oembedUrl.labelLink";break;case P.b.RICH:f="oembedUrl.labelRich";break;default:f="oembedUrl.labelGeneral"}return Object(F.jsxs)(r.Fragment,{children:[Object(F.jsx)(p.a,{"data-test-id":"cmv2-oembed-form-control",error:m,label:Object(F.jsx)(u.a,{message:fe(f)}),validationMessage:m&&this.renderOEmbedValidationMessage(this.state.isValidUrl,t,d),tooltip:a.length>1&&Object(F.jsx)(C.a,{message:fe("oembedUrl.tooltipText"),options:{supportedTypes:Object(F.jsxs)(x.a,{exclusive:!0,children:[Object(F.jsx)(u.a,{message:fe(`oembedUrl.oembedTypes.${a[0]}.withArticle`)},a[0]),a.slice(1).map(e=>Object(F.jsx)(u.a,{message:fe(`oembedUrl.oembedTypes.${e}.singular`)},e))]})}}),children:Object(F.jsx)(ne.a,{error:e,name:"oembed",onChange:this.onUrlEmbed,readOnly:i,use:s?"on-dark":"default",value:l||""})}),t===k.PENDING?Object(F.jsx)(N.a,{className:"m-top-6",layout:"centered"}):l&&n&&d!==P.b.LINK&&!m&&Object(F.jsx)(W,{oEmbedAsset:n,oEmbedUrl:l,onOEmbedResize:this.onOEmbedResize,sourceType:o})]})}renderHtmlEmbed(){const{error:e,readOnly:t,sourceType:n,useOnDark:i,value:o}=this.props,{embed_html:a}=o||{};return Object(F.jsxs)(r.Fragment,{children:[Object(F.jsx)(p.a,{"data-test-id":"cmv2-embed-html-form-control",error:!this.state.isValidHtml,label:Object(F.jsx)(u.a,{message:fe("embedHtml.label")}),validationMessage:!this.state.isValidHtml&&Object(F.jsx)(u.a,{message:fe("embedHtml.validationWarning")}),children:Object(F.jsx)(ge,{error:e,shrink:!0,maxHeight:300,name:"embed-html",readOnly:t,use:i?"on-dark":"default",onChange:this.onHtmlEmbed,value:a||""})}),a&&this.state.isValidHtml&&Object(F.jsx)(W,{embedHtml:a,sourceType:n})]})}render(){const{sourceType:e}=this.props;return Object(F.jsxs)(r.Fragment,{children:[e===P.a.MEDIA_BRIDGE&&this.renderMediaBridge(),e===P.a.HTML&&this.renderHtmlEmbed(),e===P.a.OEMBED&&this.renderOEmbed()]})}}be.defaultProps={error:!1,showPreview:!0,supportedMediaBridgeProviders:[],supportedOEmbedTypes:[],value:{}};var Oe=be;const ye={EMBED_CHANGE_SIZE:"embed-change-size",EMBED_SIZE:"embed-size"},je={maxwidth:1200,maxheight:800},ve=e=>"ContentComponents.cmv2.fields.embed."+e,Ce=(e,t)=>{const{supported_media_bridge_providers:n,supported_source_types:r,value:i}=t,{media_bridge_object:o,oembed_url:a,source_type:s}=i||{},{id:c,provider_id:l}=o||{};let u=a;const d=!s&&r.includes(P.a.MEDIA_BRIDGE)&&!r.includes(P.a.OEMBED);(s===P.a.MEDIA_BRIDGE||d)&&(u=o&&o.oembed_url);return{mediaBridgeAssetFetchStatus:X.b(e,{id:c}),oEmbedAsset:X.f(e,{oEmbedUrl:u}),oEmbedFetchStatus:X.g(e,{oEmbedUrl:u}),selectedMediaBridgeProvider:X.c(e,{provider_id:l,supportedMediaBridgeProviders:n})}},xe={fetchMediaBridgeAsset:R.a,fetchOEmbedAsset:R.c};class Ee extends r.Component{constructor(e){super(e);this.getNewOEmbedValue=this.getNewOEmbedValue.bind(this);this.onDimensionChange=this.onDimensionChange.bind(this);this.onSizeTypeChange=this.onSizeTypeChange.bind(this);this.onSourceTypeChange=this.onSourceTypeChange.bind(this);this.setAspectRatio=this.setAspectRatio.bind(this);this.trackEvent=this.trackEvent.bind(this);this.fetchOEmbedAsset=this.fetchOEmbedAsset.bind(this);this.debouncedFetchOembedAsset=Object(l.debounce)(this.fetchOEmbedAsset,250)}componentDidMount(){const{oEmbedAsset:e,onFieldChange:t,supported_source_types:n,value:r}=this.props,{source_type:i}=r||{};n.includes(i)||t(Object.assign({},r,{source_type:n[0]}));!e&&Object(he.c)({url:this.embedUrl})?this.debouncedFetchOembedAsset(this.embedUrl):e&&e.type!==P.b.LINK&&this.setAspectRatio(e)}shouldComponentUpdate(e,t){return c()(this,e,t)}componentDidUpdate(e){const{oEmbedAsset:t,onFieldChange:n,supported_oembed_types:r,value:i}=this.props,{media_bridge_object:o,oembed_response:a,oembed_url:s,source_type:c}=i||{},{oembed_response:u,oembed_url:d}=o||{},{media_bridge_object:p,source_type:h}=e.value||{};let m=s,{oembed_url:g}=e.value||{};if(this.sourceType===P.a.MEDIA_BRIDGE){m=d;({oembed_url:g}=p||{})}const b=Object(he.c)({url:m});g!==m&&b&&this.debouncedFetchOembedAsset(m);t&&!Object(l.isEqual)(e.oEmbedAsset,t)&&t.type!==P.b.LINK&&this.setAspectRatio(t);h!==c&&!t&&b&&this.debouncedFetchOembedAsset(m);const O=t&&this.sourceType===P.a.OEMBED&&!r.includes(t.type);u&&u.type&&(!Object(he.c)({url:d})||O)&&n(Object.assign({},i,{media_bridge_object:Object.assign({},o,Object(f.h)(o))}));a&&a.type&&(!Object(he.c)({url:s})||O)&&n(Object.assign({},i,Object(f.h)(i)))}get embedUrl(){const{media_bridge_object:e,oembed_url:t}=this.props.value||{};return this.sourceType===P.a.MEDIA_BRIDGE?e&&e.oembed_url:t}get fieldKey(){const{fieldKey:e}=this.props;return e&&e.join(".")}get sourceType(){const{isInEmail:e,supported_source_types:t,value:n}=this.props,{source_type:r}=n||{},i=t.includes(P.a.HTML),o=t.includes(P.a.OEMBED),a=t.includes(P.a.MEDIA_BRIDGE);if(t.length)return 1===t.length?t[0]:!r||e&&r===P.a.HTML?o?P.a.OEMBED:!e&&i?P.a.HTML:e&&a?P.a.MEDIA_BRIDGE:void 0:r}fetchOEmbedAsset(e){const{fetchMediaBridgeAsset:t,fetchOEmbedAsset:n,maxContainerWidth:r,value:i}=this.props,{media_bridge_object:o}=i||{},{id:a,media_type:s,provider_id:c}=o||{},l=this.sourceType===P.a.MEDIA_BRIDGE;let u={};if(l){u=Object.assign({},je);r&&(u.maxwidth=r);if(o){u.mbAppId=o.provider_id;u.mbMediaType=o.media_type;u.mbId=o.id}}l&&a&&s&&c&&t(s,c,a);n(e,u,l)}getNewOEmbedValue(e){const{value:t}=this.props,{media_bridge_object:n}=t||{};return this.sourceType===P.a.MEDIA_BRIDGE?Object.assign({},t,{media_bridge_object:Object.assign({},n,e)}):Object.assign({},t,e)}setAspectRatio(e){if(!e)return;const{isInEmail:t}=this.props;let{width:n,height:r}=e;if(this.sourceType===P.a.MEDIA_BRIDGE&&t&&!Number(n)&&Number(e.thumbnail_width)&&Number(e.thumbnail_height)){n=e.thumbnail_width;r=e.thumbnail_height}n&&r&&(this.aspectRatio=n/r)}trackEvent(e,t){const{trackFieldAction:n}=this.props;n&&n(e,t)}onDimensionChange(e,t){const n=e.target.value,{onFieldChange:r,value:i}=this.props;let{size_type:o}=i||{};this.sourceType===P.a.MEDIA_BRIDGE&&({size_type:o}=i&&i.media_bridge_object||{});const a=o===pe.a.AUTO_CUSTOM_MAX,s=t(n,this.aspectRatio,a);s&&r(this.getNewOEmbedValue(s))}onSizeTypeChange(e){const{onFieldChange:t}=this.props;this.trackEvent(ye.EMBED_CHANGE_SIZE,{[ye.EMBED_SIZE]:e.target.value});t(this.getNewOEmbedValue({size_type:e.target.value}))}onSourceTypeChange(e){const{onFieldChange:t,value:n}=this.props,r=e.target.value;t(Object.assign({},n,{source_type:r}))}renderDimensions(){const{maxContainerWidth:e,readOnly:t,useOnDark:n,value:r}=this.props;let{height:i,max_height:o,max_width:a,size_type:s,width:c}=r||{};this.sourceType===P.a.MEDIA_BRIDGE&&({height:i,max_height:o,max_width:a,size_type:s,width:c}=r&&r.media_bridge_object||{});let l={},d=c,p=i,h=ve("sizing.sizeType.heightLabel"),m="height",b=ve("sizing.sizeType.widthLabel"),O="width";if(s===pe.a.AUTO_CUSTOM_MAX){p=o>0?o:i;d=a>0?a:c;h=ve("sizing.maxSizeType.heightLabel");m="maxHeight";b=ve("sizing.maxSizeType.widthLabel");O="maxWidth"}if(e){l={maxHeight:Math.round(e/this.aspectRatio),maxWidth:e}}return Object(F.jsx)(g.a,Object.assign({height:p,heightLabel:Object(F.jsx)(u.a,{message:h}),heightSeleniumKey:`${this.fieldKey}:${m}`,onHeightChange:e=>this.onDimensionChange(e,f.b),onWidthChange:e=>this.onDimensionChange(e,f.c),readOnly:t,useOnDark:n,width:d,widthLabel:Object(F.jsx)(u.a,{message:b}),widthSeleniumKey:`${this.fieldKey}:${O}`},l))}renderSourceTypeOptions(){const{isInEmail:e,readOnly:t,supported_source_types:n}=this.props;return n.length>1?Object(F.jsx)(p.a,{label:Object(F.jsx)(u.a,{message:ve("sourceOptions.header.label")}),children:Object(F.jsxs)(h.a,{name:"source-options",children:[n.includes(P.a.MEDIA_BRIDGE)&&Object(F.jsx)(m.a,{checked:this.sourceType===P.a.MEDIA_BRIDGE,"data-test-id":"cmv2-embed-media-bridge-choice",disabled:t,name:`${this.fieldKey}.${P.a.MEDIA_BRIDGE}`,onChange:this.onSourceTypeChange,size:"sm",value:P.a.MEDIA_BRIDGE,children:Object(F.jsx)(u.a,{message:ve("sourceOptions.choices.mediaBridge")})}),n.includes(P.a.OEMBED)&&Object(F.jsx)(m.a,{checked:this.sourceType===P.a.OEMBED,"data-test-id":"cmv2-embed-url-choice",disabled:t,name:`${this.fieldKey}.${P.a.OEMBED}`,onChange:this.onSourceTypeChange,size:"sm",value:P.a.OEMBED,children:Object(F.jsx)(u.a,{message:ve("sourceOptions.choices.oembed")})}),!e&&n.includes(P.a.HTML)&&Object(F.jsx)(m.a,{checked:this.sourceType===P.a.HTML,"data-test-id":"cmv2-embed-html-choice",disabled:t,name:`${this.fieldKey}.${P.a.HTML}`,onChange:this.onSourceTypeChange,size:"sm",value:P.a.HTML,children:Object(F.jsx)(u.a,{message:ve("sourceOptions.choices.code")})})]})}):null}renderSizingOptions(){const{isInEmail:e,mediaBridgeAssetFetchStatus:t,oEmbedAsset:n,oEmbedFetchStatus:i,readOnly:o,resizable:a,supported_oembed_types:s,useOnDark:c,value:l}=this.props;let{size_type:u}=l||{},d=i;if(this.sourceType===P.a.MEDIA_BRIDGE){({size_type:u}=l&&l.media_bridge_object||{});d=t}const p=!n||n.type===P.b.LINK||d!==k.SUCCEEDED||!Object(he.c)({url:this.embedUrl})||this.sourceType===P.a.OEMBED&&!s.includes(n.type);return this.sourceType===P.a.HTML||p||!a?null:e?this.renderDimensions():Object(F.jsxs)(r.Fragment,{children:[Object(F.jsx)(b.a,{className:"m-top-4",fieldKey:this.fieldKey,isExactSizingEnabled:!0,isFullWidthSizingEnabled:!0,onChange:this.onSizeTypeChange,readOnly:o,sizeType:u,useOnDark:c}),(u===pe.a.EXACT||u===pe.a.AUTO_CUSTOM_MAX)&&this.renderDimensions()]})}render(){const{error:e,isInEmail:t,mediaBridgeAssetFetchStatus:n,oEmbedAsset:r,oEmbedFetchStatus:i,onFieldChange:o,readOnly:a,required:s,selectedMediaBridgeProvider:c,show_preview:l,supported_oembed_types:p,supported_media_bridge_providers:h,useOnDark:m,value:f}=this.props;return this.sourceType?Object(F.jsxs)("div",{children:[this.renderSourceTypeOptions(),Object(F.jsx)(Oe,{embedUrl:this.embedUrl,error:e,getNewOEmbedValue:this.getNewOEmbedValue,isInEmail:t,mediaBridgeAssetFetchStatus:n,oEmbedAsset:r,oEmbedFetchStatus:i,onFieldChange:o,readOnly:a,required:s,selectedMediaBridgeProvider:c,showPreview:l,sourceType:this.sourceType,supportedMediaBridgeProviders:h,supportedOEmbedTypes:p,trackEvent:this.trackEvent,useOnDark:m,value:f}),this.renderSizingOptions()]}):Object(F.jsx)(d.a,{className:"m-top-2",titleText:Object(F.jsx)(u.a,{message:ve("sourceOptions.missingErrorTitle")}),type:"danger",children:Object(F.jsx)(u.a,{message:ve("sourceOptions.missingErrorText")})})}}Ee.propTypes={error:o.a.bool,fieldKey:o.a.arrayOf(o.a.oneOfType([o.a.string,o.a.number])),isInEmail:o.a.bool,maxContainerWidth:o.a.number,onFieldChange:o.a.func.isRequired,readOnly:o.a.bool,required:o.a.bool,resizable:o.a.bool,show_preview:o.a.bool,supported_media_bridge_providers:o.a.arrayOf(o.a.number).isRequired,supported_oembed_types:o.a.arrayOf(o.a.oneOf(Object.values(P.b))),supported_source_types:o.a.arrayOf(o.a.oneOf(Object.values(P.a))),trackFieldAction:o.a.func,useOnDark:o.a.bool,value:o.a.object,fetchMediaBridgeAsset:o.a.func.isRequired,fetchOEmbedAsset:o.a.func.isRequired,mediaBridgeAssetFetchStatus:o.a.string,oEmbedAsset:o.a.object,oEmbedFetchStatus:o.a.string,selectedMediaBridgeProvider:o.a.object};Ee.defaultProps={error:!1,fieldKey:[],resizable:!0,show_preview:!0,supported_media_bridge_providers:[],supported_oembed_types:[],supported_source_types:[],value:{}};t.a=Object(a.connect)(Ce,xe)(Ee)},function(e,t,n){"use strict";var r=n(4),i=n(73),o=(n(9),n(27),n(1049));function a(e,...t){return Object(o.a)(t).get("forms/v2/forms/"+e)}function s(e={},...t){return Object(o.a)(t).get("content-editor/v1/forms",{query:e})}function c(e,...t){return Object(o.a)(t).post("forms/v2/generate",{data:{name:e}})}function l(e,...t){return Object(o.a)(t).get("forms/v2/forms-drafts/"+e).then(({formDraft:e,form:t})=>e||t)}function u(e,t,...n){const{updatedAt:r}=t;return Object(o.a)(n).put(`forms/v2/forms-drafts/save/${e}?knownUpdatedAt=${r}`,{data:t})}function d(...e){return Object(o.a)(e).get("properties/v4/groups/contact/with-statistics").then(({results:e})=>e)}function p(...e){return Object(o.a)(e).get("subscriptions/v1/definitions")}function h(e,...t){return Object(o.a)(t).get("cosindex/api/v1/connections/parents?id="+e)}function m(e,t,...n){return Object(o.a)(n).post(`forms/v2/forms/${e}/clone`,{data:{name:t}})}var f=n(1050);n(413),n(1053);const g=(e,...t)=>Object(o.a)(t).get("/optins/v1/availability/"+e);n(1047);var b=n(64),O=n(68);const y=Object(b.b)(O.OPTIN_FETCH,g),j=e=>y(e);var v=n(1045),C=n(1054),x=n(1055),E=n(1046),T=n(30),S=n.n(T),I=n(1056);n.d(t,"m",(function(){return P}));n.d(t,"a",(function(){return R}));n.d(t,"e",(function(){return F}));n.d(t,"f",(function(){return L}));n.d(t,"g",(function(){return M}));n.d(t,"l",(function(){return B}));n.d(t,"j",(function(){return U}));n.d(t,"d",(function(){return V}));n.d(t,"k",(function(){return H}));n.d(t,"h",(function(){return q}));n.d(t,"p",(function(){return G}));n.d(t,"i",(function(){return W}));n.d(t,"s",(function(){return z}));n.d(t,"t",(function(){return $}));n.d(t,"r",(function(){return K}));n.d(t,"u",(function(){return X}));n.d(t,"o",(function(){return J}));n.d(t,"b",(function(){return Q}));n.d(t,"n",(function(){return Z}));n.d(t,"c",(function(){return ee}));n.d(t,"q",(function(){return te}));const w=412,_=Object(b.b)(O.FORMS_FETCH_FORM,a,v.g),N=Object(b.a)(O.FORMS_FETCH_FORM_DRAFT,l),A=Object(b.a)(O.FORMS_CREATE,c),D=25,k=e=>{if(e.length>D){const t=[];for(let n=0;n<Math.ceil(e.length/D);n++)t.push(f.e(e.slice(n*D,(n+1)*D)));return Promise.all(t)}return f.e(e)},P=(e,t)=>{const{request:n,requestHybrids:r,receive:i,error:o}=P;return a=>{let s=[];a(n(e));f.d(e,I.b[t||I.a]).then(t=>{const n={};s=t.reduce((e,t)=>{const{parentName:r}=t,i=r&&Number(r.split("-")[1]);if(i&&!n[i]){e.push(i);n[i]=i}return e},[]);a(r(e,s));return k(s)}).then(t=>{const n=Array.isArray(t)?t.reduce((e,t)=>Object.assign({},e,t),{}):t;a(i(e,s,n));return t}).catch(t=>{a(o(e,t));return t})}};P.request=e=>({type:O.FORMS_FETCH_WORKFLOW_DEPENDENCIES,formId:e});P.requestHybrids=(e,t)=>({type:O.FORMS_FETCH_WORKFLOW_DEPENDENCIES,formId:e,flowIds:t});P.receive=(e,t,n)=>({type:O.FORMS_FETCH_WORKFLOW_DEPENDENCIES,formId:e,flowIds:t,hybridsResponse:n});P.error=(e,t)=>({type:O.FORMS_FETCH_WORKFLOW_DEPENDENCIES,formId:e,error:t});const R=(e,t,n)=>{const{request:r,receive:i,error:o}=R;return(a,s)=>{a(r(e));const c=Object(C.e)(s(),{id:e});if(c){const r=Object(x.a)(c,t,n);return f.j(r).then(n=>{a(i(e,t,n));return n}).catch(t=>{a(o(e,t));return t})}return f.e([e]).then(r=>{const i=Object(x.a)(r[e],t,n);return f.j(i)}).then(n=>{a(i(e,t,n));return n}).catch(t=>{a(o(e,t));return t})}};R.request=e=>({type:O.FORMS_ADD_WORKFLOW_DEPENDENCY,flowId:e});R.receive=(e,t,n)=>({type:O.FORMS_ADD_WORKFLOW_DEPENDENCY,flowId:e,formId:t,newHybrid:n});R.error=(e,t)=>({type:O.FORMS_ADD_WORKFLOW_DEPENDENCY,flowId:e,error:t});const F=(e,t,n)=>{const{request:r,receive:i,error:o}=R;return a=>{a(r(void 0));return f.b(Object(x.b)(e,t,n),n).then(e=>{a(i(e.flowId,t,e));return e}).catch(e=>{a(o(void 0,e));return e})}},L=(e,t,n)=>{const{request:r,receive:i,error:o}=L;return(a,s)=>{const c=Object(C.e)(s(),{id:e}),l=Object(x.f)(c,t,n);a(r(e,t));return f.j(l).then(n=>{a(i(e,t,n));return n}).catch(n=>{a(o(e,t,n));return n})}},M=(e,t)=>{const{request:n,error:r}=L,{receive:i}=M;return(o,a)=>{const s=Object(C.e)(a(),{id:e})||{},{sourceApp:c}=s.createMetadata||{};o(n(e,t));return f.c(e,c).then(n=>{n&&"OK"===n["@result"]?o(i(e,t)):o(r(e,t,n&&n.errorType));return n}).catch(n=>{o(r(e,t,n));return n})}};L.request=(e,t)=>({type:O.FORMS_DELETE_WORKFLOW_DEPENDENCY,flowId:e,formId:t});L.receive=(e,t,n)=>({type:O.FORMS_DELETE_WORKFLOW_DEPENDENCY,flowId:e,formId:t,updatedHybrid:n});M.receive=(e,t)=>({type:O.FORMS_DELETE_WORKFLOW_DEPENDENCY,flowId:e,formId:t,deleted:!0});L.error=(e,t,n)=>({type:O.FORMS_DELETE_WORKFLOW_DEPENDENCY,flowId:e,formId:t,error:n});function B(e){return _(e)}function U(e){return N(e)}function V(e){return A(e)}function H(e){const{request:t,receive:n,error:r}=B;return(i,{httpClient:o=S.a}={})=>{i(t());return s(e,o).then(t=>{const{limit:r,offset:o}=e,{total:a,results:s}=t,c={limit:r,objects:s,total:a,offset:o};i(n(c));return c}).catch(e=>{i(r(e));return e})}}function q(){const{request:e,receive:t,error:n}=q;return(r,i,{httpClient:o=S.a}={})=>{r(e());return d(o).then(e=>r(t(e))).catch(e=>r(n(e)))}}function G(){const{request:e,receive:t,error:n}=G;return(r,i,{httpClient:o=S.a}={})=>{r(e());return p(o).then(e=>r(t(e))).catch(e=>r(n(e)))}}function W(e){const{request:t,receive:n,error:r}=W;return i=>{i(t());return e().then(e=>i(n(e))).catch(e=>i(r(e)))}}B.request=()=>({type:O.FORMS_FETCH});B.receive=e=>({type:O.FORMS_FETCH,response:e});B.error=e=>({type:O.FORMS_FETCH,error:e});q.request=()=>({type:O.FORMS_PROPERTIES_FETCH});q.receive=e=>({type:O.FORMS_PROPERTIES_FETCH,response:e});q.error=e=>({type:O.FORMS_PROPERTIES_FETCH,error:e});G.request=()=>({type:O.FORMS_SUBSCRIPTIONS_FETCH});G.receive=e=>({type:O.FORMS_SUBSCRIPTIONS_FETCH,response:e});G.error=e=>({type:O.FORMS_SUBSCRIPTIONS_FETCH,error:e});W.request=()=>({type:O.FORMS_DEFAULT_CONSENT_FETCH});W.receive=e=>({type:O.FORMS_DEFAULT_CONSENT_FETCH,response:e});W.error=e=>({type:O.FORMS_DEFAULT_CONSENT_FETCH,error:e});U.request=()=>({type:O.FORMS_FETCH});U.error=e=>({type:O.FORMS_FETCH,error:e});U.receive=e=>({type:O.FORMS_FETCH,response:Object.assign({},e,{id:e.guid})});function z(e){return(t,n)=>{const r=Object(v.f)(n(),{formGuid:e});t({type:O.FORMS_SAVE_FORM_CACHE,form:r})}}function $(e){return(t,n,{httpClient:r=S.a}={})=>{const i=Object(v.d)(n(),{formGuid:e});t({type:O.FORMS_SAVE_FORM_DRAFT_REQUEST});u(e,i,r).then(({updatedAt:n})=>{t({type:O.FORMS_SAVE_FORM_DRAFT,response:{updatedAt:n,guid:e}})}).catch(e=>{t({type:e.status===w?O.FORMS_SAVE_FORM_DRAFT_PRECONDITION_FAIL:O.FORMS_SAVE_FORM_DRAFT_FAIL});return e})}}function K(e){return(t,{httpClient:n=S.a}={})=>{t({type:O.FORMS_SAVE_FORM_DRAFT_REQUEST});l(e,n).then(e=>{t({type:O.FORMS_FETCH_FORM_DRAFT,response:e})}).catch(e=>{t({type:O.FORMS_SAVE_FORM_DRAFT_FAIL});return e})}}const Y=Object(i.debounce)((e,t,n)=>{n($(e.guid));t(e)},200);function X(e,t){return n=>{Y(e,t,n);n({type:O.FORMS_UPDATE_FORM_DRAFT,response:e})}}function J(e){return(t,n,{httpClient:r=S.a}={})=>{t({type:O.FORMS_FETCH_PARENT_PAGES_REQUEST});h(e,r).then(e=>{t({type:O.FORMS_FETCH_PARENT_PAGES_SUCCEEDED,response:e})}).catch(e=>{t({type:O.FORMS_FETCH_PARENT_PAGES_FAIL});return e})}}function Q(){return{type:O.FORMS_CLEAR_CACHE}}function Z(){return e=>{e(j(E.a))}}function ee(e,t=null){return(n,i)=>{const{name:o}=Object(v.d)(i(),{formGuid:e});let a;a=null!==t?t:r.a.text("ContentComponents.cmv2.fields.form.withInlineEditing.copyName",{name:o,timestamp:r.a.moment().format("LL LTS")});return m(e,a).then(e=>{n({type:O.FORMS_FETCH_FORM_DRAFT,response:e});n({type:O.FORMS_CREATE,response:e});n(Q());return e})}}function te(){return{type:O.FORMS_DISMISSED_PAGES_WARNING}}},function(e,t,n){"use strict";var r=n(2);const i=["@result"],o=["@result"],a=Symbol("contents"),s=Symbol("result");function c(e){return"object"==typeof e&&null!==e&&"@result"in e&&"OK"===e["@result"]}function l(e){return"object"==typeof e&&null!==e&&"@result"in e&&"ERR"===e["@result"]}function u(e){return"OK"===e[s]}function d(e){return"ERR"===e[s]}function p(e){if(c(e)){const{"@result":t}=e,n=Object(r.a)(e,i),o="@ok"in n?n["@ok"]:n;return{[s]:t,[a]:o}}if(l(e)){const{"@result":t}=e,n=Object(r.a)(e,o),i="@err"in n?n["@err"]:n;return{[s]:t,[a]:i}}throw new Error("Provided value was not a valid Result")}function h(e){if(d(e))throw new Error("Tried to unwrap an Err Result");return e[a]}function m(e){if(u(e))throw new Error("Tried to unwrap the error of an Ok Result");return e[a]}var f=n(24),g=n.n(f),b=n(8);const O=Object(b.createMetricsFactory)("frontend-preferences-client");var y=n(31),j=n(30),v=n.n(j);class C{constructor(e,t,n,r){this.httpClient=v.a;this.caller=e;this.fetchEndpoint=t;this.writeEndpoint=n;this.deleteEndpoint=r}waitForEarlyRequestOrSendNewBatchFetch(e,t){const n=t?y.a.getRequestStateByName(t):null,r=()=>this.httpClient.post(this.fetchEndpoint,{data:{names:e},timeout:5e3,query:{caller:this.caller}});return t&&n?new Promise((e,i)=>{n.whenFinished(n=>{e(n);y.a.removeEarlyRequest(t)});n.onError((n,o)=>{r().then(e,i);const a=new Error(o);O.counter("fetch-preference-early-request-failed").increment();g.a.captureException(a);console.error(a);y.a.removeEarlyRequest(t)})}):r()}fetch(e,t,n){if(null==t)throw new Error("defaultValue cannot be null or undefined");return this.waitForEarlyRequestOrSendNewBatchFetch([e],n).then(n=>{const r=p(n);if(d(r))return t;const{results:i}=h(r);return Object.prototype.hasOwnProperty.call(i,e)?i[e]:t}).catch(e=>{O.counter("fetch-preference-threw-error").increment();g.a.captureException(e);console.error(e);return t})}batchFetch(e,t){for(const[t,n]of Object.entries(e))if(null==n)throw new Error(`default value for preference "${t}" cannot be null or undefined`);return this.waitForEarlyRequestOrSendNewBatchFetch(Object.keys(e),t).then(t=>{const n=p(t);if(d(n))return e;const{results:r}=h(n);return Object.assign({},e,r)}).catch(t=>{O.counter("fetch-preferences-batch-threw-error").increment();g.a.captureException(t);console.error(t);return e})}write(e,t){return this.httpClient.post(this.writeEndpoint,{data:{name:e,value:t},query:{caller:this.caller}}).then(e=>{const n=p(e);if(u(n))return t;const r=m(n);throw new Error(r.message?`${r.type} - ${r.message}`:r.type)}).catch(e=>{O.counter("write-preference-threw-error").increment();g.a.captureException(e);console.error(e);throw e})}del(e){return this.httpClient.post(this.deleteEndpoint,{data:{name:e},query:{caller:this.caller}}).then(e=>{const t=p(e);if(u(t)){const e=h(t);return null===e?null:e.value}const n=m(t);throw new Error(n.message?`${n.type} - ${n.message}`:n.type)}).catch(e=>{O.counter("delete-preference-threw-error").increment();g.a.captureException(e);console.error(e);throw e})}withHttpClient(e){this.httpClient=e;return this}}class x extends C{constructor(e){super(e,"/user-attributes/v1/app-preferences/fetch","/user-attributes/v1/app-preferences/write","/user-attributes/v1/app-preferences/delete")}static forCaller(e){return new x(e)}}n.d(t,"a",(function(){return x}))},function(e,t,n){"use strict";var r=n(4),i=n(2672),o=n(1347),a=n(2823),s=n(1422);const c="--";var l=n(2819),u=n(1428),d=n(99);const p=(e,t)=>{const n=r.a.moment[t](e).toArray().slice(0,3);return r.a.moment.userTz(n)},h=(e,t)=>{const n=r.a.moment.userTz().startOf("day");switch(p(e,t).diff(n,"days")){case 1:return Object(d.a)("customerDataPropertyUtils.relativeDateTimeLabel.tomorrow");case 0:return Object(d.a)("customerDataPropertyUtils.relativeDateTimeLabel.today");case-1:return Object(d.a)("customerDataPropertyUtils.relativeDateTimeLabel.yesterday");default:return null}},m=({value:e,isDateTime:t})=>{const n=Number(e),i=h(n,t?"userTz":"utc");return i?t?Object(d.a)("customerDataPropertyUtils.relativeDateTimeLabel.relativeTime",{day:i,time:r.a.moment.userTz(n).format("LT")}):i:null};var f=n(2829);const g=(e,t,n,i,o)=>{let a="";const s=i&&"time_since"!==e.dateDisplayHint&&"time_until"!==e.dateDisplayHint?m({value:t,isDateTime:!1}):null;if(s)a=s;else{a=r.a.moment.utc(Number(t)).format(n);const i=o||"time_since"===e.dateDisplayHint||"time_until"===e.dateDisplayHint?Object(f.a)({value:t,type:e.type,dateDisplayHint:e.dateDisplayHint}):null;i&&(a="time_since"===e.dateDisplayHint||"time_until"===e.dateDisplayHint?""+i:`${a} (${i})`)}return a},b=(e,t,n,i,o)=>{let a="";const s=i&&"time_since"!==e.dateDisplayHint&&"time_until"!==e.dateDisplayHint?m({value:t,isDateTime:!0}):null,c=o||"time_since"===e.dateDisplayHint||"time_until"===e.dateDisplayHint?Object(f.a)({value:t,type:e.type,dateDisplayHint:e.dateDisplayHint}):null;if(s){a=s;"absolute_with_relative"===e.dateDisplayHint&&c&&(a=`${a} (${c})`)}else{a=r.a.moment.userTz(Number(t)).format(n);c&&(a="time_since"===e.dateDisplayHint||"time_until"===e.dateDisplayHint?""+c:`${a} (${c})`)}return a};n.d(t,"c",(function(){return C}));n.d(t,"b",(function(){return x}));n.d(t,"a",(function(){return E}));function O(e){return t=>t.reduce((t,n)=>{t[e(n)]=n;return t},{})}const y=O(e=>e.id||e.value),j=e=>e instanceof l.a,v=e=>{const t=e.options.map(t=>({text:Object(a.c)({label:t.label,isHubSpotDefined:e.hubspotDefined}),value:t.value}));return Array.isArray(t)?t:t.toJS()};function C(e){return v(e)}function x(e){let t;const n=Object(a.c)({label:j(e)?e.placeholder:"",isHubSpotDefined:e.hubspotDefined}),r=v(e);if(e.options.some(e=>""===e.value))t=r;else{t=[{text:n,value:""},...r]}return t}function E(e,t,n,{dateFormat:a="L",dateTimeFormat:l="L LT z",relativeDate:d=!1,relativeDateTime:p=!1,showDateDisplayHintLabel:h=!1}={},m){let f;null==t&&(t="");if(""===t){const t=T(e,m);if(void 0!==t)return t}const O=Object(i.u)(e);if(Object(i.l)(e)||O){const r=O?Object(s.b)(t):[t];null==n&&(n=x(e));const i=y(n);f=r.map(e=>{if(null==e)return e;const t=i[e];return t&&t.text||e}).join(", ")}else{if(Object(i.f)(e)&&""!==t&&null!=t)return e.type===o.c?b(e,t,l,p,h):g(e,t,a,d,h);Object(i.y)(e)||Object(i.E)(e)?f=""===t?c:r.a.formatPercentage(100*Number(t),{precision:2}):Object(i.z)(e)?f=""===t?c:r.a.formatPercentage(Number(t),{precision:2}):Object(i.j)(e)?f=null==t||isNaN(+t)||""===t?c:Object(u.a)(t):Object(i.o)(e)&&(f=""===t?"":r.a.formatNumber(Number(t),{precision:5}))}return f||t}function T(e,t){if(t&&Object(i.a)(e,t))return Object(d.a)("customerDataPropertyUtils.PropertyValueDisplay.billingFrequencyPlaceholder.placeholder")}},function(e,t,n){"use strict";n.r(t);var r=n(288),i=n.n(r),o=n(40),a=n(4),s=n(2754),c=n(453),l=n(357),u=n(1422),d=n(279),p=n(352),h=n(456),m=n(443),f=n(2679),g=n(2),b=n(281),O=n(99),y=n(2739),j=n(1002),v=n(2687),C=n(508),x=n(1458),E=n(45);const T=["inputRef","showError","value"],S=e=>{let{inputRef:t,showError:n,value:r}=e,i=Object(g.a)(e,T);const[a,c]=Object(o.useState)(!1),l=null==r?"":""+r,u=Object(o.useCallback)(()=>{c(!0)},[]),d=Object(o.useCallback)(()=>{c(!1)},[]),p=Object(o.useMemo)(()=>n&&a&&l&&(!Object(x.e)(l)||Object(x.a)(l)||Object(x.b)(l)),[n,a,l]),h=Object(o.useMemo)(()=>{if(!p)return null;const{path:e,domain:t}=Object(x.c)(l),{protocol:n}=Object(x.d)(l);return n&&e?Object(E.jsx)("div",{className:"is--text--error",children:Object(E.jsx)(b.a,{message:"customerDataProperties.PropertyDomain.error.invalidDomainBoth",options:{domain:t,protocol:n,path:e}})}):n?Object(E.jsx)("div",{className:"is--text--error",children:Object(E.jsx)(b.a,{message:"customerDataProperties.PropertyDomain.error.invalidProtocol",options:{domain:t,protocol:n}})}):e?Object(E.jsx)("div",{className:"is--text--error",children:Object(E.jsx)(b.a,{message:"customerDataProperties.PropertyDomain.error.invalidPath",options:{domain:t,path:e}})}):Object(E.jsx)("div",{className:"is--text--error",children:Object(E.jsx)(b.a,{message:"customerDataProperties.PropertyDomain.error.invalidDomain",options:{domain:l}})})},[p,l]);return Object(E.jsxs)(s.a,{size:{xs:12},className:"p-x-0",children:[Object(E.jsx)(C.a,Object.assign({},i,{inputRef:t,value:l,onBlur:u,onFocus:d})),h]})};var I=Object(o.memo)(S);const w=["isPrimaryDomain","onRemoveDomain","onPromoteDomain"];function _(e){const{value:t,onRemoveDomain:n,onPromoteDomain:r,isPrimaryDomain:i}=e,o=Object(g.a)(e,w),a="p-left-0"+(i?" p-top-2":"");return Object(E.jsxs)(j.a,{children:[Object(E.jsx)(s.a,{size:{xs:8},children:Object(E.jsx)(I,Object.assign({className:"p-x-2"},o))}),Object(E.jsx)(s.a,{size:{xs:4},className:a,children:i?Object(E.jsx)(v.a,{className:"m-left-5",children:Object(E.jsx)(b.a,{message:"customerDataProperties.PropertyInputMultipleDomain.primaryDomainTag"})}):Object(E.jsx)(y.a,{buttonUse:"transparent",buttonText:Object(O.a)("customerDataProperties.PropertyInputMultipleDomain.actions"),children:Object(E.jsxs)(h.a,{children:[Object(E.jsx)(m.a,{use:"transparent",size:"extra-small",onClick:()=>{r(t)},children:Object(E.jsx)(b.a,{message:"customerDataProperties.PropertyInputMultipleDomain.makePrimary"})}),Object(E.jsx)(m.a,{use:"transparent",size:"extra-small",onClick:()=>{n(t)},children:Object(E.jsx)(b.a,{message:"customerDataProperties.PropertyInputMultipleDomain.delete"})})]})})})]})}var N=_,A=n(2709);function D({domains:e,onSave:t,onCancel:n,showAutoSaveText:r}){const[i,a]=Object(o.useState)(""),c=e.includes(i),l=!i||!Object(x.e)(i)||c,u=r?Object(E.jsx)(d.a,{message:"customerDataProperties.PropertyInputMultipleDomain.save"}):Object(E.jsx)(d.a,{message:"customerDataProperties.PropertyInputMultipleDomain.apply"});return Object(E.jsxs)(j.a,{children:[Object(E.jsx)(s.a,{size:{xs:8},children:Object(E.jsx)(A.a,{className:"m-bottom-1",onCancel:n,onSave:()=>t(i),saveDisabled:l,use:"flush",saveLabel:u,children:Object(E.jsx)(I,{autoFocus:!0,className:"p-x-2",onChange:e=>a(e.target.value),value:i})})}),Object(E.jsx)(s.a,{size:{xs:4}})]})}var k=D,P=n(324),R=n(1456);function F({domains:e,onChangeDomain:t,onAddDomain:n,onRemoveDomain:r,onPromoteDomain:i,showAutoSaveText:a}){const[s,c]=Object(o.useState)(!1),l=()=>c(!0),u=()=>c(!1),g=e=>{n(e);c(!1)},b=(e,n)=>{const o=0===n;return Object(E.jsx)(N,{autoFocus:o,onChange:e=>t(n,e.target.value),showError:!0,value:e,isPrimaryDomain:o,onRemoveDomain:r,onPromoteDomain:i},n)},O=Object(E.jsxs)(m.a,{use:"transparent",onClick:l,className:"p-left-0",children:[Object(E.jsx)(f.a,{name:"add",size:"xxs",color:P.CALYPSO_DARK}),Object(E.jsx)(d.a,{message:"customerDataProperties.PropertyInputMultipleDomain.addDomain"})]});return Object(E.jsxs)(R.a,{children:[Object(E.jsx)(p.a,{children:Object(E.jsx)(d.a,{message:"customerDataProperties.PropertyInputMultipleDomain.label"})}),Object(E.jsxs)(h.a,{childClassName:"m-bottom-2",children:[e.map(b),s&&Object(E.jsx)(k,{domains:e,onSave:g,onCancel:u,showAutoSaveText:a})]}),O]})}var L=F;const M=({value:e,additionalDomains:t,onChangeMultiple:n,popoverOpen:r,popoverProps:d,property:p,readOnly:h=!1,disabled:m=!1,setPopoverOpen:f,className:g,showAutoSaveText:b=!1})=>{const O=Object(o.useCallback)(()=>{h||m||f(!0)},[m,h,f]),y=Object(o.useMemo)(()=>{const n=[e||""];return t?[...n,...Object(u.b)(t)]:n},[e,t]),j=r=>{const i=r[0],o=Object(u.a)(r.slice(1));n(Object.assign({},i!==e?{[p.name]:i}:void 0,o!==t?{hs_additional_domains:o}:void 0))},v=(e,t)=>{const n=[...y];n[e]=t;j(n)},C=e=>{const t=[...y,e];j(t)},x=e=>{const t=y.filter(t=>t!==e);j(t)},T=e=>{const t=y.filter(t=>t!==e),n=[e,...t];j(n)},S=Object(E.jsx)(L,{domains:y,onChangeDomain:v,onRemoveDomain:x,onPromoteDomain:T,onAddDomain:C,showAutoSaveText:b}),I=i()(g,""===e?"p-bottom-5":"p-top-1");return Object(E.jsx)(s.a,{size:{xs:12},className:"p-x-0",children:Object(E.jsx)(c.a,Object.assign({closeOnOutsideClick:!0,width:350,placement:"right"},d,{open:r,onOpenChange:e=>f(e.target.value),content:S,children:Object(E.jsx)("div",{"data-test-id":"domain-input",className:I,onClick:O,children:Object(E.jsx)(l.a,{children:a.a.formatList(y)})})}))})};t.default=Object(o.memo)(M)},function(e,t,n){"use strict";n.r(t);var r=n(1400),i=n(40),o=n(443),a=n(1443),s=n(1444),c=n(1421),l=n(2648),u=n(1404),d=n(1405),p=n(1432),h=n(1408),m=n(279),f=n(2766),g=n(723),b=n(724),O=n(751),y=n(717),j=n(2654),v=n(2741),C=n(607),x=n(1418),E=n(1467),T=n(2611),S=n(1469),I=n(2711),w=n(1474),_=n(1410);const N=({httpClient:e,objectTypeId:t,inputMode:n,objectId:r})=>{const o=null!=r&&n===_.c,[a,s]=Object(i.useState)(void 0),[c,l]=Object(i.useState)(void 0),[u,d]=Object(i.useState)(o),p=Object(i.useRef)(Object(w.a)());Object(i.useEffect)(()=>{o&&p.current.get({objectTypeId:t,objectId:r},e).then(e=>{const n=e[Object(h.c)(t)],r=e[Object(h.d)(t)];s(n);l(r)}).catch(()=>{}).finally(()=>d(!1))},[e,t,r,o]);return{recordPipelineId:a,recordStageId:c,propertyValuesLoading:u}};var A=n(2734),D=n(45);const k=e=>{const{onConfirm:t,onCancel:n,defaultPipelineId:s,defaultPipelineStageId:c,inputMode:p,stageChangeValidatorLoading:h,showAutoSaveText:w=!1}=e,_=Object(d.a)(),k=Object(r.a)(),P=Object(u.a)(),[R,F]=Object(i.useState)(s),[L,M]=Object(i.useState)(c),{recordPipelineId:B,recordStageId:U,propertyValuesLoading:V}=N({httpClient:P,objectTypeId:_,inputMode:p,objectId:k}),H=Object(I.a)({httpClient:P,objectTypeId:_,pipelineId:R,inputMode:p,objectId:k}),q=Object(l.a)(a.e,_,{httpClient:P}),G=Object(T.a)(E.e,_,{pipelineId:null===R?void 0:R,httpClient:P}),W=Object(i.useCallback)(e=>{const t=e.target.value.reference,n=""+e.target.value.value,r=t&&t.additionalProperties&&t.additionalProperties.defaultPipelineStageId?""+t.additionalProperties.defaultPipelineStageId:null,i=!V&&n===B&&U?U:r;F(n);M(i)},[B,U,V]),z=Object(i.useCallback)(e=>{const t=e.target.value.reference,n=""+e.target.value.value,r=t&&t.additionalProperties&&t.additionalProperties.pipelineId?""+t.additionalProperties.pipelineId:null;F(r);M(n)},[]),$=Object(i.useCallback)(()=>{t({pipelineId:R,pipelineStageId:L})},[t,R,L]),K=!(R&&L),Y=w?Object(D.jsx)(m.a,{message:"customerDataProperties.PropertyInputPipelineV2.save"}):Object(D.jsx)(m.a,{message:"customerDataProperties.PropertyInputPipelineV2.apply"});return Object(D.jsxs)(f.a,{children:[Object(D.jsxs)(g.a,{children:[Object(D.jsx)(C.a,{children:Object(D.jsx)(m.a,{message:"customerDataProperties.PropertyInputPipelineV2.header"})}),Object(D.jsx)(y.a,{onClick:n})]}),Object(D.jsxs)(b.a,{children:[V&&Object(D.jsx)(A.a,{layout:"centered"}),!V&&Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)(v.a,{label:Object(D.jsx)(m.a,{message:"customerDataProperties.PropertyInputPipelineV2.pipeline"}),children:Object(D.jsx)(x.a,{referenceToOption:S.a,onSelectedOptionChange:W,resolver:q,value:R})}),Object(D.jsx)(v.a,{label:Object(D.jsx)(m.a,{message:"customerDataProperties.PropertyInputPipelineV2.stage"}),children:Object(D.jsx)(x.a,{referenceToOption:S.a,onSelectedOptionChange:z,resolver:G,value:L,loadReferences:H})})]})]}),Object(D.jsxs)(O.a,{children:[Object(D.jsx)(j.a,{title:Object(D.jsx)(m.a,{message:"customerDataProperties.PropertyInputPipelineV2.confirmDisabledTooltip"}),disabled:!K,children:Object(D.jsx)(o.a,{use:"primary",onClick:$,disabled:K||h,children:Y})}),Object(D.jsx)(o.a,{onClick:n,children:Object(D.jsx)(m.a,{message:"customerDataProperties.PropertyInputPipelineV2.cancel"})})]})]})};k.displayName="PipelineModal";var P=k,R=n(1413),F=n(2676),L=n(1445);const M=e=>{const{autoFocus:t,className:n,readOnly:r,disabled:f,value:g,onChangeMultiple:b,popoverOpen:O,setPopoverOpen:y,use:j="form",truncate:v=!1}=e,C=Object(d.a)(),x=Object(u.a)(),E=Object(l.a)(a.e,C,{httpClient:x}),{status:T,reference:S}=Object(s.a)(E,null===g?void 0:g),I=Object(i.useMemo)(()=>Object(L.g)(T)?Object(D.jsx)(c.a,{"data-test-id":"loading-text"}):(null==S?void 0:S.label)||g||Object(D.jsx)(m.a,{message:"customerDataProperties.PropertyInputPipelineV2.placeholder"}),[T,S,g]),{data:w,loading:_}=Object(p.a)({pipelineStageId:Object(h.d)(C)});if(_||void 0===w)return null;const{pipelineStageId:N}=w,A=void 0===g?null:g,k=void 0===N?null:N,F=()=>y(!0),M=()=>y(!1),B=({pipelineId:e,pipelineStageId:t})=>{y(!1);if(e===A&&t===k)return;const n={[Object(h.c)(C)]:e,[Object(h.d)(C)]:t};b(n)};return Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)(o.a,Object.assign({},Object(R.a)(e),{autoFocus:t,className:n,disabled:r||f,onClick:F,use:j,truncate:v,children:I})),O&&Object(D.jsx)(P,Object.assign({onConfirm:B,onCancel:M,defaultPipelineId:A,defaultPipelineStageId:k},e))]})};M.displayName="PipelineButton";var B=e=>{const{onChangeMultiple:t,inputMode:n}=e,{stageChangeValidatorLoading:r,stageValidationModal:i,onChangeWithStageValidation:o}=Object(F.a)({onChangeMultiple:t,inputMode:n});return Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)(M,Object.assign({},e,{onChangeMultiple:o,stageChangeValidatorLoading:r})),i]})},U=n(1423);const V=e=>{const{clearable:t,dropdownFooter:n,inputRef:r,onChangeMultiple:o,placeholder:s,value:c,inputMode:p}=e,f=Object(d.a)(),g=Object(u.a)(),b=Object(l.a)(a.e,f,{httpClient:g}),O=Object(i.useCallback)(e=>{const t=""+e.target.value.value;if(t===c)return;const n=e.target.value.reference,r=n&&n.additionalProperties&&n.additionalProperties.createStageId?""+n.additionalProperties.createStageId:null,i=n&&n.additionalProperties&&n.additionalProperties.defaultPipelineStageId?""+n.additionalProperties.defaultPipelineStageId:null,a=p===_.b&&r?r:i,s={[Object(h.c)(f)]:t,[Object(h.d)(f)]:a};o(s)},[c,p,f,o]);return Object(D.jsx)(x.a,Object.assign({},Object(U.a)(e),{referenceToOption:S.a,onChange:void 0,onSelectedOptionChange:O,resolver:b,ref:r,anchorType:"button",value:c,clearable:void 0!==t?t:Object(h.a)(f),dropdownFooter:n,placeholder:s||Object(D.jsx)(m.a,{message:"customerDataProperties.PropertyInputPipelineV2.placeholder"})}))};V.displayName="PipelineSelect";var H=V,q=n(1438);const G=e=>{const t=Object(r.a)(),{enablePopovers:n}=e;return Object(q.a)({enablePopovers:n,objectId:t})?Object(D.jsx)(B,Object.assign({},e)):Object(D.jsx)(H,Object.assign({},e))};G.displayName="PropertyInputPipelineV2";t.default=G},function(e,t,n){"use strict";n.r(t);var r=n(298),i=n(40),o=n(434),a=n(453),s=n(335),c=n(337),l=n(2),u=n(4),d=n(1186),p=n(2610),h=n(41),m=n.n(h),f=(n(46),n(338)),g=n(297),b=n(2682),O=n(507),y=n(478),j=n(2636),v=n(313),C=n(339),x=n(310),E=n(2736),T=n(47),S=n(341),I=n(1033),w=n(502),_=n(1008),N=n(45);const A=["value","valueFormatter","hovered"],D=["hovered"];function k(e,t){if(null==t||""===t)return;const n=u.a.moment.utc(t,e);return 60*n.hours()+n.minutes()}function P(e,t){return null==t?"":u.a.moment.utc(0).minutes(t).format(e)}const R=(e,t)=>({text:t?t(e):e,value:e}),F=class extends i.Component{constructor(e){super(e);this.scrollIntoView=()=>{const e=this._ref;if(null==e)return;const{offsetHeight:t,offsetParent:n,offsetTop:r}=e;n.scrollTop=r-(n.offsetHeight-t)/2};this.refCallback=e=>{this._ref=e};this._getOption=Object(T.a)(R)}componentDidMount(){this.props.highlighted&&this.scrollIntoView()}componentDidUpdate(e){const{highlighted:t}=this.props;this._hovered||!t||e.highlighted||this.scrollIntoView()}render(){const e=this.props,{value:t,valueFormatter:n}=e,r=Object(l.a)(e,A),i=this._getOption(t,n);return Object(N.jsx)(S.a,Object.assign({},this.props,{children:e=>{const{hovered:t}=e,n=Object(l.a)(e,D);this._hovered=t;return Object(N.jsx)(w.a,Object.assign({},r,n,{ref:this.refCallback,option:i}))}}))}};class L extends i.PureComponent{render(){const{focusedValue:e,valueFormatter:t,interval:n,makeOptionId:i,max:o,min:a,onOptionClick:s,onOptionHover:c}=this.props,l=Math.ceil(a/n)*n,u=(Math.floor(o/n)+1)*n;return Object(N.jsx)(I.a,{children:Object(_.a)(l,u,n).map(n=>Object(N.jsx)(F,{id:i(n),valueFormatter:t,highlighted:n===e,value:n,onMouseDown:e=>{s(Object(r.a)(n,e))},onMouseEnter:Object(E.a)(c,n)},n))})}}L.propTypes={focusedValue:m.a.number,valueFormatter:m.a.func,interval:m.a.number,makeOptionId:m.a.func,max:m.a.number,min:m.a.number,onOptionHover:m.a.func.isRequired,onOptionClick:m.a.func};var M=n(1188),B=n(513),U=n(307);const V=["autoFocus","className","disabled","error","format","iconSize","id","Input","inputRef","inputWidth","interval","max","min","name","onBlur","onChange","onFocus","onKeyDown","onOpenChange","open","readOnly","use","value"],H=1439,q=(e,t,n=Math.round)=>n(e/t)*t,G=Object(f.a)(()=>"HH:MM".replace(/HH/,u.a.text("ui.timePicker.placeholder.hour")).replace(/MM/,u.a.text("ui.timePicker.placeholder.minute")));class W extends i.Component{static getDerivedStateFromProps(e,t){return!t.prevOpen&&e.open?{activeDescendant:e.value,prevOpen:e.open}:t.prevOpen!==e.open?{prevOpen:e.open}:null}constructor(e){super(e);this.numberInputFormatter=e=>P(this.props.format,e);this.numberInputParser=e=>k(this.props.format,e);this.makeListboxOptionId=e=>`${this._listboxOptionIdPrefix}-${e}`;this.handleOptionClick=e=>{Object(g.a)(this.props.onChange,Object(r.a)(e.target.value))};this.handleOptionHover=e=>{this.setActiveDescendant(e)};this.handleInputFocus=e=>{const{inputRef:t,onFocus:n,onOpenChange:i}=this.props;i(Object(r.a)(!0));t.current.select();n&&n(e)};this.handleInputBlur=e=>{Object(g.a)(this.props.onOpenChange,Object(r.a)(!1));Object(g.a)(this.props.onBlur,e)};this.handleInputChange=e=>{this.setActiveDescendant(e.target.value);Object(g.a)(this.props.onChange,e)};this.handleInputKeyDown=e=>{const{value:t,interval:n,min:i,max:o,onChange:a,open:s,onOpenChange:c,onKeyDown:l,disabled:u,readOnly:d}=this.props;if(u||d)return;const{activeDescendant:p}=this.state,h=i,m=o;let f=t,b=s,O=p;switch(e.key){case"ArrowDown":e.preventDefault();b=!0;O=null==p?h:Math.min(m,p+n);O=q(O,n,Math.floor);break;case"ArrowUp":e.preventDefault();b=!0;O=null==p?m:Math.max(h,p-n);O=q(O,n,Math.ceil);break;case"Enter":s&&(f=p);b=!s;break;default:Object(g.a)(l,e);return}p!==O&&this.setActiveDescendant(O);t!==f&&Object(g.a)(a,Object(r.a)(f));s!==b&&Object(g.a)(c,Object(r.a)(b))};this.state={activeDescendant:e.value,popoverWidth:"auto",prevOpen:e.open};this._listboxOptionIdPrefix=`UITimeInput-${Object(x.d)()}-result-item`}componentDidMount(){this.updatePopoverContentWidth()}componentDidUpdate(e){!e.open&&this.props.open&&this.updatePopoverContentWidth()}setActiveDescendant(e){this.setState({activeDescendant:e})}updatePopoverContentWidth(){const e=this.props.inputRef.current;if(e){const{width:t}=e.getBoundingClientRect(),n=window.chrome?Math.floor(t):t;this.setState({popoverWidth:n})}}render(){const e=this.props,{autoFocus:t,className:n,disabled:r,error:i,iconSize:o,id:a,Input:s,inputRef:c,inputWidth:u,interval:d,max:p,min:h,name:m,onOpenChange:f,open:g,readOnly:b,use:O,value:v}=e,C=Object(l.a)(e,V),{activeDescendant:x}=this.state;0;const E=g&&!r&&!b;return Object(N.jsx)(y.c,{children:e=>{const l=r||e.disabled;return Object(N.jsx)(j.a,{arrowSize:"none",placement:"bottom",width:this.state.popoverWidth,open:E,onOpenChange:f,content:Object(N.jsx)(L,{focusedValue:x,interval:d,makeOptionId:this.makeListboxOptionId,max:p,min:h,onOptionClick:this.handleOptionClick,onOptionHover:this.handleOptionHover,valueFormatter:this.numberInputFormatter}),children:Object(N.jsx)(M.a,Object.assign({},C,{className:n,disabled:l,iconName:"time",size:o||e.size,children:Object(N.jsx)(s,{"aria-activedescendant":x?this.makeListboxOptionId(x):void 0,className:Object(U.k)(n,"private-form__control--inline")?"private-form__control--inline":void 0,autoComplete:"off",autoFocus:t,disabled:l,error:i,formatter:this.numberInputFormatter,id:a,inputRef:c,max:p,min:h,name:m,onBlur:this.handleInputBlur,onChange:this.handleInputChange,onFocus:this.handleInputFocus,onKeyDown:this.handleInputKeyDown,parser:this.numberInputParser,placeholder:G(),readOnly:b,use:O,value:v,width:u})}))})}})}}W.propTypes={autoFocus:m.a.bool,disabled:m.a.bool,error:m.a.bool,format:m.a.string.isRequired,iconSize:Object(C.a)(m.a.number),Input:Object(C.a)(m.a.elementType),inputRef:v.a,inputWidth:Object(C.a)(m.a.number),interval:m.a.number.isRequired,max:m.a.number.isRequired,min:m.a.number.isRequired,name:m.a.string,onChange:m.a.func,onOpenChange:m.a.func,open:m.a.bool,readOnly:m.a.bool,use:m.a.oneOf(["default","on-dark"]).isRequired,value:m.a.number};W.defaultProps={min:0,max:H,format:"LT",Input:B.a,use:"default",interval:30,open:!1};W.displayName="UITimeInput";var z=Object(O.a)(Object(b.a)(W,["open","value"])),$=n(2741),K=n(1197),Y=n(2735);const X=["value","inputRef","onChange","defaultDate","defaultTime"],J=60,Q=480;function Z(e){var t,n,a,s;let{value:c,inputRef:h,onChange:m,defaultDate:f,defaultTime:g}=e,b=Object(l.a)(e,X);const O=Object(i.useRef)(null),y=Object(i.useMemo)(()=>{if(c||0===c){const e=Number(c);return isNaN(e)||0===e?null:u.a.moment.userTz(e)}return null},[c]),j=y&&y.hours()*J+y.minutes(),v=`LT [${y?y.format("z"):u.a.moment.userTz().format("z")}]`,C=y&&d.d(y),x=e=>{const t=e.target.value;if(null===t){"function"==typeof m&&m(Object(r.a)(null));return}const n=d.m(t||f||d.j()),i=null!==j?j:g||Q,o=n.add(i,"minutes").valueOf(),a=null===j&&null===C,s=(null==c?void 0:c.toString())!==o.toString();"function"==typeof m&&s&&m(Object(r.a)(o));if(a){var l;null==O||null===(l=O.current)||void 0===l||l.focus()}},E=e=>{const t=e.target.value,n=d.m(C||f||d.j()),i=null!==t?t:g||Q,o=n.add(i,"minutes").valueOf(),a=null===j&&null===C,s=(null==c?void 0:c.toString())!==o.toString();"function"==typeof m&&s&&m(Object(r.a)(o));if(a){var l;null==h||null===(l=h.current)||void 0===l||l.focus()}},{disabled:T,readOnly:S,error:I}=b;return Object(N.jsx)(K.a,{children:Object(N.jsxs)(o.a,{gap:8,children:[Object(N.jsx)(Y.a,{grow:1,children:Object(N.jsx)($.a,{"aria-label":null!==(t=null==b||null===(n=b.property)||void 0===n?void 0:n.label)&&void 0!==t?t:"",children:Object(N.jsx)(p.a,{inputRef:h,onKeyDown:ee,onKeyPress:ee,onKeyUp:ee,disabled:T,readOnly:S,value:C,onChange:x,error:I})})}),Object(N.jsx)(Y.a,{grow:1,children:Object(N.jsx)($.a,{"aria-label":null!==(a=null==b||null===(s=b.property)||void 0===s?void 0:s.label)&&void 0!==a?a:"",children:Object(N.jsx)(z,{inputRef:O,disabled:T,readOnly:S,value:j,format:v,onChange:E},v)})})]})})}function ee(e){e.stopPropagation()}var te=n(2644),ne=n(2829),re=n(443),ie=n(279),oe=n(485),ae=n(1423),se=n(508),ce=n(55),le=n(1400),ue=n(2609),de=n(2828),pe=n(188);const he=e=>{const{value:t,property:n,objectTypeId:l,onFocus:d,popoverProps:p,popoverOpen:h,setPopoverOpen:m,disableValidation:f,applyChange:g}=e,b=Object(de.a)(),O=Object(le.a)(),[y,j]=Object(i.useState)(t),v=void 0===y||null==y||""===y,C=t!==y,x=b(Object(pe.a)("CRM:PropMgmt:RelativeDateWithTime")),E=Object(i.useCallback)(e=>{const t=e[n.name];j(t)},[n.name]),T=Object(i.useCallback)(()=>{j(t)},[t]),{onChangeSingle:S,validationState:I}=Object(ue.d)({disableValidation:f,objectId:O,objectTypeId:l,onChange:E,onValidationChange:ce.a,propertyDefinition:n,propertyValue:y,validationSettings:{validateInitialValue:!0}}),w=!!f||I.saveable,_=C&&w,A=Object(i.useCallback)(e=>{const{target:{value:t}}=e;"function"==typeof S&&S(null==t?Object(r.a)(null):Object(r.a)(String(t)))},[S]),D=Object(i.useCallback)(()=>{m(!1);T()},[T,m]),k=Object(i.useCallback)(()=>{g(y);m(!1)},[g,y,m]);Object(i.useEffect)(()=>{h||T()},[h,T]);const P=Object(i.useMemo)(()=>u.a.moment.userTz().zoneName()!==u.a.moment.portalTz().zoneName(),[]),R=Object(i.useCallback)(()=>Object(N.jsxs)(s.a,{className:"p-bottom-5",children:[Object(N.jsxs)(o.a,{justify:"between",children:[Object(N.jsx)("b",{children:n.label}),Object(N.jsx)(c.a,{onClick:D})]}),Object(N.jsxs)(o.a,{direction:"column",className:"m-top-2",gap:12,children:[Object(N.jsxs)(o.a,{direction:"column",gap:8,children:[Object(N.jsx)(Z,Object.assign({},e,{value:y,onChange:A,error:I.invalid})),Object(N.jsxs)(o.a,{direction:"column",gap:4,children:[P&&I.invalid?Object(N.jsx)(oe.a,{children:Object(N.jsx)(ie.a,{message:"customerDataProperties.PropertyInputDateTime.timezone",options:{timezone:""+u.a.moment.userTz().format("UTC Z z")}})}):null,I.invalid&&Object(N.jsx)(oe.a,{"data-test-id":"popover-validation-message",use:"error",children:I.message})]})]}),Object(N.jsxs)(o.a,{direction:"row",align:"center",children:[Object(N.jsx)(re.a,{use:"tertiary",size:"xs",onClick:k,disabled:!_,children:Object(N.jsx)(ie.a,{message:"customerDataProperties.PropertyInputDateTime.apply"})}),Object(N.jsx)(re.a,{use:"tertiary-light",size:"xs",onClick:D,children:Object(N.jsx)(ie.a,{message:"customerDataProperties.PropertyInputDateTime.cancel"})}),Object(N.jsx)(re.a,{use:"link",size:"xs",onClick:()=>A(Object(r.a)(null)),disabled:v,children:Object(N.jsx)(ie.a,{message:"customerDataProperties.PropertyInputDateTime.clear"})})]})]})]}),[D,y,A,_,n.label,e,k,P,v,I]),F=Object(i.useCallback)(e=>{m(e.target.value)},[m]),L=Object(i.useCallback)(e=>{d&&d(e);m(!0)},[d,m]),M=Object(i.useMemo)(()=>x&&t&&Object(ne.a)({value:""+t,type:n.type,dateDisplayHint:n.dateDisplayHint}),[n.dateDisplayHint,n.type,x,t]),B=Object(i.useMemo)(()=>{const e=Object(te.a)(n,t,void 0,{},l);return M?`${e} (${M})`:e},[M,l,n,t]);return Object(N.jsx)(a.a,Object.assign({width:400,placement:"right"},p,{open:h,renderContent:R,onOpenChange:F,closeOnTargetLeave:!0,"data-test-id":"property-input-date-time-popover",children:Object(N.jsx)(se.a,Object.assign({},Object(ae.a)(e),{value:B,inputRef:e.inputRef,onChange:ce.a,onFocus:L,readOnly:e.readOnly,disabled:e.disabled,"data-test-id":"property-input-date-time-button"}))}))};var me=Object(i.memo)(he),fe=n(1438),ge=n(1455);const be=e=>{const{onChange:t,enablePopovers:n,value:a}=e,s=Object(le.a)(),c=Object(fe.a)({enablePopovers:n,objectId:s}),l=Object(i.useCallback)(e=>{"function"==typeof t&&t(null==e?Object(r.a)(null):Object(r.a)(String(e)))},[t]),u=Object(i.useCallback)(e=>l(e.target.value),[l]);return c?Object(N.jsx)(me,Object.assign({},e,{applyChange:l})):Object(N.jsxs)(o.a,{direction:"column",gap:8,children:[Object(N.jsx)(Z,Object.assign({},e,{onChange:u})),Object(N.jsx)(re.a,{use:"link",size:"small",onClick:()=>l(null),disabled:Object(ge.a)(a)||null===a,children:Object(N.jsx)(ie.a,{message:"customerDataProperties.PropertyInputDateTime.clear"})})]})};t.default=Object(i.memo)(be)},function(e,t,n){"use strict";var r=n(2629),i=n(1),o=n.n(i);const a="external-options/v3",s=e=>`${a}/fetch/${encodeURIComponent(e)}`,c=e=>`${a}/pagedFetch/${encodeURIComponent(e)}`,l=()=>({portalId:o.a.get()}),u=(e,t,n,r,i)=>Object.assign({referenceType:t,ids:e,includeDeleted:n.includeDeleted,includeDisabled:!1,portalId:o.a.get(),externalOptionsMetaData:i,formatLabel:!0},r&&{objectType:r}),d=(e,t,n,r,i)=>Object.assign({referenceType:e,limit:t.count,searchQuery:t.query,offset:""+t.offset,portalId:o.a.get(),includeDeleted:n.includeDeleted,useIndexOffset:!1,externalOptionsMetaData:i,formatLabel:!0},r&&{objectType:r});var p=n(2),h=n(1350);const m=["additionalFields","description"],f=(e,t,n)=>{if(e===h.A||e===h.M){const{additionalFields:e}=n,t=e.iconSrc;return t?{src:t}:void 0}},g=(e,t)=>{const{additionalFields:n,description:r}=e,i=Object(p.a)(e,m),{objectTypeId:o,referenceType:a}=t,s=f(a,o,e);return Object.assign({},i,{additionalProperties:n},null!=r&&{description:r},null!=s&&{icon:s})},b=(e,t)=>e.map(e=>g(e,t)),O=(e,t)=>({hasMore:e.hasMore,offset:e.offset,references:e.results.map(e=>g(e,t))});var y=n(30),j=n.n(y),v=n(2590);const C=async(e,t,n)=>{const r=await Object(v.a)({httpClient:n}),i=await r.properties.getProperty({frameworkTypeIdentifier:e,propertyName:t});if(i&&i.externalOptionsMetaData)return i.externalOptionsMetaData},x=async(e,t,n)=>{if(e&&t)try{return await C(e,t,n)}catch(e){}},E=({byIdFetchOptions:e={includeDeleted:!0},debouncePeriod:t,enableCaching:n,httpClient:i=j.a,maxBatchSize:o,objectTypeId:a,propertyName:p,referenceType:h,searchFetchOptions:m={includeDeleted:!1},externalOptionsMetaData:f})=>{const g=s(h),y=c(h),v=async t=>i.post(g,{query:l(),data:u(t,h,e,a,f||await x(a,p,i))}),C=async e=>i.post(y,{query:l(),data:d(h,e,m,a,f||await x(a,p,i))}),E=e=>b(e,{objectTypeId:a,referenceType:h}),T=e=>O(e,{objectTypeId:a,referenceType:h});return Object(r.a)({debouncePeriod:t,enableCaching:n,fetchByIds:v,fetchBySearch:C,formatByIdResponse:E,formatSearchResponse:T,maxBatchSize:o,referenceType:h})};var T=n(1449),S=n.n(T);n.d(t,"a",(function(){return _}));const I={},w=(e,t,n)=>`${e}-${t||"default"}-${n.propertyName||"default"}-${Boolean(n.byIdIncludeDeleted)}-${Boolean(n.searchIncludeDeleted)}-${S()(n.externalOptionsMetaData)}`,_=(e,t,n={})=>{const{httpClient:r,byIdIncludeDeleted:i,searchIncludeDeleted:o,propertyName:a,externalOptionsMetaData:s}=n,c=w(e,t,n);I[c]||(I[c]=E({objectTypeId:t,propertyName:a,referenceType:e,httpClient:r,byIdFetchOptions:"boolean"==typeof i?{includeDeleted:i}:void 0,searchFetchOptions:"boolean"==typeof o?{includeDeleted:o}:void 0,externalOptionsMetaData:s}));return I[c]}},function(e,t,n){"use strict";var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}Object.create;Object.create;var o="Invariant Violation",a=Object.setPrototypeOf,s=void 0===a?function(e,t){e.__proto__=t;return e}:a,c=function(e){i(t,e);function t(n){void 0===n&&(n=o);var r=e.call(this,"number"==typeof n?o+": "+n+" (see https://github.com/apollographql/invariant-packages)":n)||this;r.framesToPop=1;r.name=o;s(r,t.prototype);return r}return t}(Error);function l(e,t){if(!e)throw new c(t)}var u=["debug","log","warn","error","silent"],d=u.indexOf("log");function p(e){return function(){if(u.indexOf(e)>=d){return(console[e]||console.log).apply(console,arguments)}}}!function(e){e.debug=p("debug");e.log=p("log");e.warn=p("warn");e.error=p("error")}(l||(l={}));var h="3.11.4",m=n(1483),f=n(1481);function g(e){return function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];if("number"==typeof t){var i=t;if(!(t=j(i))){t=v(i,n);n=[]}}e.apply(void 0,[t].concat(n))}}var b=Object.assign((function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];e||l(e,j(t,n)||v(t,n))}),{debug:g(l.debug),log:g(l.log),warn:g(l.warn),error:g(l.error)});var O=Symbol.for("ApolloErrorMessageHandler_"+h);function y(e){if("string"==typeof e)return e;try{return Object(f.a)(e,2).slice(0,1e3)}catch(e){return"<non-serializable>"}}function j(e,t){void 0===t&&(t=[]);if(e)return m.a[O]&&m.a[O](e,t.map(y))}function v(e,t){void 0===t&&(t=[]);if(e)return"An error occurred! For more details, see the full error text at https://go.apollo.dev/c/err#".concat(encodeURIComponent(JSON.stringify({version:h,message:e,args:t.map(y)})))}var C=n(1480);n.d(t,"b",(function(){return C.a}));n.d(t,"a",(function(){return b}))},,,,,,,,,,function(e,t,n){"use strict";var r=n(1003),i=n(1004);const o="\\s\\(\\)\\[\\]\\{\\}";var a=({isGlobal:e=!1,protocolRequired:t=!1,domain:n=i.a.domain,protocol:r=i.a.protocol,path:a=i.a.path,file:s=i.a.file,search:c=i.a.search}={})=>{let l="i";let u=`${t?r:r+"?"}${n}(?:${a}(?:${s})?)?${c}?`;if(e){l+="g";u=`[^${o}]*?${u}[^${o}]*?`}else u=`^${u}$`;return new RegExp(u,l)};var s=a();var c=a({protocol:i.a.protocolRequired,protocolRequired:!0});const l=()=>a({isGlobal:!0,search:i.a.ungroupedSearch}),u=Object(r.a)({name:"Url",validator:(e,t={})=>t&&t.requireProtocol?c.test(e):s.test(e)});u.pick=e=>{const t=l(),n=[];let r=t.exec(e);for(;null!==r;){const i=r.index,o=i+r[0].length-1;n.push({start:i,end:o});r=t.exec(e)}return n};t.a=u},,,function(e,t,n){"use strict";var r=n(728),i=n(40),o=n(41),a=n.n(o),s=n(59),c=n(2655),l=n(4),u=n(65);const d=e=>!!Object.keys(e.languages).length,p=e=>e.languages,h=(e,t)=>t.omittedLanguages||[],m=()=>Object(u.a)([p,h],(e,t)=>Object.keys(e.without(t)).map(e=>({value:e,text:l.a.text("SharedI18nStrings.languageNames."+e)})));var f=n(63),g=n(30),b=n.n(g);const O=()=>b.a.get("content/api/v4/contents/supported-languages"),y=()=>{const{request:e,receive:t,error:n}=y;return(r,i)=>{if(!d(i())){r(e());O().then(e=>{r(t(e.objects))}).catch(e=>{r(n(e))})}}};y.request=()=>({type:f.LANGUAGES_FETCH});y.receive=e=>({type:f.LANGUAGES_FETCH,languages:e});y.error=e=>({type:f.LANGUAGES_FETCH,error:e});var j=n(45);const v=()=>(e,t)=>({options:m()(e,t)}),C={fetchSupportedLanguages:y};class x extends i.Component{componentDidMount(){this.props.fetchSupportedLanguages()}render(){const e=this.props,t=Object.assign({},(Object(r.a)(e),e));return Object(j.jsx)(c.a,Object.assign({menuWidth:300},t))}}x.propTypes={omittedLanguages:a.a.arrayOf(a.a.string),options:a.a.arrayOf(a.a.shape({value:a.a.string.isRequired,text:a.a.string.isRequired})),fetchSupportedLanguages:a.a.func.isRequired};x.defaultProps={omittedLanguages:[],options:[]};t.a=Object(s.connect)(v,C)(x)},function(e,t,n){"use strict";var r={};n.r(r);n.d(r,"fetchIlsList",(function(){return p}));n.d(r,"fetchIlsLists",(function(){return h}));var i=n(1098),o=n(30),a=n.n(o);const s={ILS_ID:"hs_list_id",NAME:"hs_list_name"},c=e=>({listId:Number(e.properties[s.ILS_ID].value),name:e.properties[s.NAME].value}),l=e=>({lists:e.results.map(c),hasMore:e.hasMore,offset:e.offset,total:e.total}),u="inbounddb-lists/v1",d=50;function p(e,t=a.a){return t.get(`${u}/lists/${e}`)}function h(e,t=a.a){return t.post(u+"/segments-ui/searchLists",{data:{query:e,count:d,fetchAllProperties:!1,properties:[s.NAME,s.ILS_ID],listFilterProperties:{objectTypeId:"0-1"}}}).then(e=>l(e))}var m=n(245),f=n(1100),g=n(73);n.d(t,"a",(function(){return j}));n.d(t,"b",(function(){return E}));const b=e=>({type:i.k,meta:{searchTerm:e},status:m.o.PENDING}),O=(e,t)=>({type:i.k,payload:t,meta:{searchTerm:e},status:m.o.SUCCEEDED}),y=(e,t)=>({type:i.k,error:!0,payload:t,meta:{searchTerm:e},status:m.o.FAILED});function j(e,t,n=r,i=!1){return(r,o,a)=>{const s=o(),c=Object.keys(s.contactLists.byIlsId).map(Number);if(i&&!e&&t&&c.length&&!Object(g.difference)(t,c).length){const e={lists:c.map(e=>s.contactLists.byIlsId[e]),hasMore:!1,offset:0,total:c.length};return Promise.resolve(e)}r(b(e));return n.fetchIlsLists(e,a).then(t=>{r(O(e,t));return t}).catch(t=>{r(y(e,t));return t})}}const v=e=>({type:i.o,meta:{listId:e},status:m.o.PENDING}),C=(e,t)=>({type:i.o,payload:t,meta:{listId:e},status:m.o.SUCCEEDED}),x=(e,t)=>({type:i.o,error:!0,payload:t,meta:{listId:e},status:m.o.FAILED});function E(e){return(t,n,r)=>{const i=n(),o=Object(f.b)(i,{listId:e}),a=Object(f.c)(i,{listId:e});if(!o&&a!==m.o.PENDING){t(v(e));p(e,r).then(n=>{t(C(e,n))}).catch(n=>{t(x(e,n))})}}}},function(e,t,n){"use strict";var r=n(2),i=n(40),o=n.n(i),a=n(59),s=n(287),c=n.n(s),l=n(73),u=n(4),d=n(1088),p=n(1141),h=n(2655),m=n(1149),f=n(2742),g=n(1150),b=n(434),O=n(1133),y=n(1148),j=n.n(y),v=n(288),C=n.n(v),x=n(58),E=n(0),T=n.n(E);function S(e,t){return(S=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e})(e,t)}function I(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;S(e,t)}var w=Object.assign;function _(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function N(e,t){var n=Object(i.useState)((function(){return{inputs:t,result:e()}}))[0],r=Object(i.useRef)(!0),o=Object(i.useRef)(n),a=r.current||Boolean(t&&o.current.inputs&&_(t,o.current.inputs))?o.current:{inputs:t,result:e()};Object(i.useEffect)((function(){r.current=!1;o.current=a}),[a]);return a.result}function A(e,t){return N((function(){return e}),t)}var D=N,k=A,P=!0,R="Invariant failed";function F(e,t){if(!e){if(P)throw new Error(R);throw new Error(R+": "+(t||""))}}var L=function(e){var t=e.top,n=e.right,r=e.bottom,i=e.left;return{top:t,right:n,bottom:r,left:i,width:n-i,height:r-t,x:i,y:t,center:{x:(n+i)/2,y:(r+t)/2}}},M=function(e,t){return{top:e.top-t.top,left:e.left-t.left,bottom:e.bottom+t.bottom,right:e.right+t.right}},B=function(e,t){return{top:e.top+t.top,left:e.left+t.left,bottom:e.bottom-t.bottom,right:e.right-t.right}},U=function(e,t){return{top:e.top+t.y,left:e.left+t.x,bottom:e.bottom+t.y,right:e.right+t.x}},V={top:0,right:0,bottom:0,left:0},H=function(e){var t=e.borderBox,n=e.margin,r=void 0===n?V:n,i=e.border,o=void 0===i?V:i,a=e.padding,s=void 0===a?V:a,c=L(M(t,r)),l=L(B(t,o)),u=L(B(l,s));return{marginBox:c,borderBox:L(t),paddingBox:l,contentBox:u,margin:r,border:o,padding:s}},q=function(e){var t=e.slice(0,-2);if("px"!==e.slice(-2))return 0;var n=Number(t);isNaN(n)&&F(!1);return n},G=function(){return{x:window.pageXOffset,y:window.pageYOffset}},W=function(e,t){var n=e.borderBox,r=e.border,i=e.margin,o=e.padding,a=U(n,t);return H({borderBox:a,border:r,margin:i,padding:o})},z=function(e,t){void 0===t&&(t=G());return W(e,t)},$=function(e,t){var n={top:q(t.marginTop),right:q(t.marginRight),bottom:q(t.marginBottom),left:q(t.marginLeft)},r={top:q(t.paddingTop),right:q(t.paddingRight),bottom:q(t.paddingBottom),left:q(t.paddingLeft)},i={top:q(t.borderTopWidth),right:q(t.borderRightWidth),bottom:q(t.borderBottomWidth),left:q(t.borderLeftWidth)};return H({borderBox:e,margin:n,padding:r,border:i})},K=function(e){var t=e.getBoundingClientRect(),n=window.getComputedStyle(e);return $(t,n)},Y=Number.isNaN||function(e){return"number"==typeof e&&e!=e};function X(e,t){return e===t||!(!Y(e)||!Y(t))}function J(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!X(e[n],t[n]))return!1;return!0}function Q(e,t){void 0===t&&(t=J);var n,r,i=[],o=!1;function a(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];if(o&&n===this&&t(a,i))return r;r=e.apply(this,a);o=!0;n=this;i=a;return r}return a}var Z=function(e){var t=[],n=null,r=function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];t=i;n||(n=requestAnimationFrame((function(){n=null;e.apply(void 0,t)})))};r.cancel=function(){if(n){cancelAnimationFrame(n);n=null}};return r},ee=!0,te=/[ \t]{2,}/g,ne=/^[ \t]*/gm,re=function(e){return e.replace(te," ").replace(ne,"").trim()},ie=function(e){return re("\n  %creact-beautiful-dnd\n\n  %c"+re(e)+"\n\n  %c👷‍ This is a development only message. It will be removed in production builds.\n")},oe=function(e){return[ie(e),"color: #00C584; font-size: 1.2em; font-weight: bold;","line-height: 1.5","color: #723874;"]},ae="__react-beautiful-dnd-disable-dev-warnings";function se(e,t){var n;ee||"undefined"!=typeof window&&window[ae]||(n=console)[e].apply(n,oe(t))}se.bind(null,"warn");var ce=se.bind(null,"error");function le(){}function ue(e,t){return w({},e,{},t)}function de(e,t,n){var r=t.map((function(t){var r=ue(n,t.options);e.addEventListener(t.eventName,t.fn,r);return function(){e.removeEventListener(t.eventName,t.fn,r)}}));return function(){r.forEach((function(e){e()}))}}var pe=!0,he="Invariant failed";function me(e){this.message=e}me.prototype.toString=function(){return this.message};function fe(e,t){if(!e)throw new me(pe?he:he+": "+(t||""))}var ge=function(e){I(t,e);function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];(t=e.call.apply(e,[this].concat(r))||this).callbacks=null;t.unbind=le;t.onWindowError=function(e){var n=t.getCallbacks();n.isDragging()&&n.tryAbort();if(e.error instanceof me){e.preventDefault();0}};t.getCallbacks=function(){if(!t.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return t.callbacks};t.setCallbacks=function(e){t.callbacks=e};return t}var n=t.prototype;n.componentDidMount=function(){this.unbind=de(window,[{eventName:"error",fn:this.onWindowError}])};n.componentDidCatch=function(e){if(!(e instanceof me))throw e;0;this.setState({})};n.componentWillUnmount=function(){this.unbind()};n.render=function(){return this.props.children(this.setCallbacks)};return t}(o.a.Component),be=function(e){return e+1},Oe=function(e,t){var n=e.droppableId===t.droppableId,r=be(e.index),i=be(t.index);return n?"\n      You have moved the item from position "+r+"\n      to position "+i+"\n    ":"\n    You have moved the item from position "+r+"\n    in list "+e.droppableId+"\n    to list "+t.droppableId+"\n    in position "+i+"\n  "},ye=function(e,t,n){return t.droppableId===n.droppableId?"\n      The item "+e+"\n      has been combined with "+n.draggableId:"\n      The item "+e+"\n      in list "+t.droppableId+"\n      has been combined with "+n.draggableId+"\n      in list "+n.droppableId+"\n    "},je=function(e){return"\n  The item has returned to its starting position\n  of "+be(e.index)+"\n"},ve={dragHandleUsageInstructions:"\n  Press space bar to start a drag.\n  When dragging you can use the arrow keys to move the item around and escape to cancel.\n  Some screen readers may require you to be in focus mode or to use your pass through key\n",onDragStart:function(e){return"\n  You have lifted an item in position "+be(e.source.index)+"\n"},onDragUpdate:function(e){var t=e.destination;if(t)return Oe(e.source,t);var n=e.combine;return n?ye(e.draggableId,e.source,n):"You are over an area that cannot be dropped on"},onDragEnd:function(e){if("CANCEL"===e.reason)return"\n      Movement cancelled.\n      "+je(e.source)+"\n    ";var t=e.destination,n=e.combine;return t?"\n      You have dropped the item.\n      "+Oe(e.source,t)+"\n    ":n?"\n      You have dropped the item.\n      "+ye(e.draggableId,e.source,n)+"\n    ":"\n    The item has been dropped while not over a drop area.\n    "+je(e.source)+"\n  "}},Ce={x:0,y:0},xe=function(e,t){return{x:e.x+t.x,y:e.y+t.y}},Ee=function(e,t){return{x:e.x-t.x,y:e.y-t.y}},Te=function(e,t){return e.x===t.x&&e.y===t.y},Se=function(e){return{x:0!==e.x?-e.x:0,y:0!==e.y?-e.y:0}},Ie=function(e,t,n){var r;void 0===n&&(n=0);return(r={})[e]=t,r["x"===e?"y":"x"]=n,r},we=function(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))},_e=function(e,t){return Math.min.apply(Math,t.map((function(t){return we(e,t)})))},Ne=function(e){return function(t){return{x:e(t.x),y:e(t.y)}}},Ae=function(e,t){var n=L({top:Math.max(t.top,e.top),right:Math.min(t.right,e.right),bottom:Math.min(t.bottom,e.bottom),left:Math.max(t.left,e.left)});return n.width<=0||n.height<=0?null:n},De=function(e,t){return{top:e.top+t.y,left:e.left+t.x,bottom:e.bottom+t.y,right:e.right+t.x}},ke=function(e){return[{x:e.left,y:e.top},{x:e.right,y:e.top},{x:e.left,y:e.bottom},{x:e.right,y:e.bottom}]},Pe={top:0,right:0,bottom:0,left:0},Re=function(e,t){return t?De(e,t.scroll.diff.displacement):e},Fe=function(e,t,n){if(n&&n.increasedBy){var r;return w({},e,((r={})[t.end]=e[t.end]+n.increasedBy[t.line],r))}return e},Le=function(e,t){return t&&t.shouldClipSubject?Ae(t.pageMarginBox,e):L(e)},Me=function(e){var t=e.page,n=e.withPlaceholder,r=e.axis,i=e.frame,o=Re(t.marginBox,i),a=Fe(o,r,n);return{page:t,withPlaceholder:n,active:Le(a,i)}},Be=function(e,t){e.frame||fe(!1);var n=e.frame,r=Ee(t,n.scroll.initial),i=Se(r),o=w({},n,{scroll:{initial:n.scroll.initial,current:t,diff:{value:r,displacement:i},max:n.scroll.max}}),a=Me({page:e.subject.page,withPlaceholder:e.subject.withPlaceholder,axis:e.axis,frame:o});return w({},e,{frame:o,subject:a})};function Ue(e){return Number.isInteger?Number.isInteger(e):"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}function Ve(e){return Object.values?Object.values(e):Object.keys(e).map((function(t){return e[t]}))}function He(e,t){if(e.findIndex)return e.findIndex(t);for(var n=0;n<e.length;n++)if(t(e[n]))return n;return-1}function qe(e,t){if(e.find)return e.find(t);var n=He(e,t);return-1!==n?e[n]:void 0}function Ge(e){return Array.prototype.slice.call(e)}var We=Q((function(e){return e.reduce((function(e,t){e[t.descriptor.id]=t;return e}),{})})),ze=Q((function(e){return e.reduce((function(e,t){e[t.descriptor.id]=t;return e}),{})})),$e=Q((function(e){return Ve(e)})),Ke=Q((function(e){return Ve(e)})),Ye=Q((function(e,t){return Ke(t).filter((function(t){return e===t.descriptor.droppableId})).sort((function(e,t){return e.descriptor.index-t.descriptor.index}))}));function Xe(e){return e.at&&"REORDER"===e.at.type?e.at.destination:null}function Je(e){return e.at&&"COMBINE"===e.at.type?e.at.combine:null}var Qe=Q((function(e,t){return t.filter((function(t){return t.descriptor.id!==e.descriptor.id}))})),Ze=function(e){var t=e.isMovingForward,n=e.draggable,r=e.destination,i=e.insideDestination,o=e.previousImpact;if(!r.isCombineEnabled)return null;if(!Xe(o))return null;function a(e){var t={type:"COMBINE",combine:{draggableId:e,droppableId:r.descriptor.id}};return w({},o,{at:t})}var s=o.displaced.all,c=s.length?s[0]:null;if(t)return c?a(c):null;var l=Qe(n,i);if(!c){return l.length?a(l[l.length-1].descriptor.id):null}var u=He(l,(function(e){return e.descriptor.id===c}));-1===u&&fe(!1);var d=u-1;return d<0?null:a(l[d].descriptor.id)},et=function(e,t){return e.descriptor.droppableId===t.descriptor.id},tt={point:Ce,value:0},nt={invisible:{},visible:{},all:[]},rt={displaced:nt,displacedBy:tt,at:null},it=function(e,t){return function(n){return e<=n&&n<=t}},ot=function(e){var t=it(e.top,e.bottom),n=it(e.left,e.right);return function(r){if(t(r.top)&&t(r.bottom)&&n(r.left)&&n(r.right))return!0;var i=t(r.top)||t(r.bottom),o=n(r.left)||n(r.right);if(i&&o)return!0;var a=r.top<e.top&&r.bottom>e.bottom,s=r.left<e.left&&r.right>e.right;return!(!a||!s)||(a&&o||s&&i)}},at=function(e){var t=it(e.top,e.bottom),n=it(e.left,e.right);return function(e){return t(e.top)&&t(e.bottom)&&n(e.left)&&n(e.right)}},st={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},ct={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"},lt=function(e){return function(t){var n=it(t.top,t.bottom),r=it(t.left,t.right);return function(t){return e===st?n(t.top)&&n(t.bottom):r(t.left)&&r(t.right)}}},ut=function(e,t){var n=t.frame?t.frame.scroll.diff.displacement:Ce;return De(e,n)},dt=function(e,t,n){return!!t.subject.active&&n(t.subject.active)(e)},pt=function(e,t,n){return n(t)(e)},ht=function(e){var t=e.target,n=e.destination,r=e.viewport,i=e.withDroppableDisplacement,o=e.isVisibleThroughFrameFn,a=i?ut(t,n):t;return dt(a,n,o)&&pt(a,r,o)},mt=function(e){return ht(w({},e,{isVisibleThroughFrameFn:ot}))},ft=function(e){return ht(w({},e,{isVisibleThroughFrameFn:at}))},gt=function(e){return ht(w({},e,{isVisibleThroughFrameFn:lt(e.destination.axis)}))},bt=function(e,t,n){if("boolean"==typeof n)return n;if(!t)return!0;var r=t.invisible,i=t.visible;if(r[e])return!1;var o=i[e];return!o||o.shouldAnimate};function Ot(e,t){var n=e.page.marginBox,r={top:t.point.y,right:0,bottom:0,left:t.point.x};return L(M(n,r))}function yt(e){var t=e.afterDragging,n=e.destination,r=e.displacedBy,i=e.viewport,o=e.forceShouldAnimate,a=e.last;return t.reduce((function(e,t){var s=Ot(t,r),c=t.descriptor.id;e.all.push(c);if(!mt({target:s,destination:n,viewport:i,withDroppableDisplacement:!0})){e.invisible[t.descriptor.id]=!0;return e}var l={draggableId:c,shouldAnimate:bt(c,a,o)};e.visible[c]=l;return e}),{all:[],visible:{},invisible:{}})}function jt(e,t){if(!e.length)return 0;var n=e[e.length-1].descriptor.index;return t.inHomeList?n:n+1}function vt(e){var t=e.insideDestination,n=e.inHomeList,r=e.displacedBy,i=e.destination,o=jt(t,{inHomeList:n});return{displaced:nt,displacedBy:r,at:{type:"REORDER",destination:{droppableId:i.descriptor.id,index:o}}}}function Ct(e){var t=e.draggable,n=e.insideDestination,r=e.destination,i=e.viewport,o=e.displacedBy,a=e.last,s=e.index,c=e.forceShouldAnimate,l=et(t,r);if(null==s)return vt({insideDestination:n,inHomeList:l,displacedBy:o,destination:r});var u=qe(n,(function(e){return e.descriptor.index===s}));if(!u)return vt({insideDestination:n,inHomeList:l,displacedBy:o,destination:r});var d=Qe(t,n),p=n.indexOf(u);return{displaced:yt({afterDragging:d.slice(p),destination:r,displacedBy:o,last:a,viewport:i.frame,forceShouldAnimate:c}),displacedBy:o,at:{type:"REORDER",destination:{droppableId:r.descriptor.id,index:s}}}}function xt(e,t){return Boolean(t.effected[e])}var Et=function(e){var t=e.isMovingForward,n=e.destination,r=e.draggables,i=e.combine,o=e.afterCritical;if(!n.isCombineEnabled)return null;var a=i.draggableId,s=r[a].descriptor.index;return xt(a,o)?t?s:s-1:t?s+1:s},Tt=function(e){var t=e.isMovingForward,n=e.isInHomeList,r=e.insideDestination,i=e.location;if(!r.length)return null;var o=i.index,a=t?o+1:o-1,s=r[0].descriptor.index,c=r[r.length-1].descriptor.index;return a<s||a>(n?c:c+1)?null:a},St=function(e){var t=e.isMovingForward,n=e.isInHomeList,r=e.draggable,i=e.draggables,o=e.destination,a=e.insideDestination,s=e.previousImpact,c=e.viewport,l=e.afterCritical,u=s.at;u||fe(!1);if("REORDER"===u.type){var d=Tt({isMovingForward:t,isInHomeList:n,location:u.destination,insideDestination:a});return null==d?null:Ct({draggable:r,insideDestination:a,destination:o,viewport:c,last:s.displaced,displacedBy:s.displacedBy,index:d})}var p=Et({isMovingForward:t,destination:o,displaced:s.displaced,draggables:i,combine:u.combine,afterCritical:l});return null==p?null:Ct({draggable:r,insideDestination:a,destination:o,viewport:c,last:s.displaced,displacedBy:s.displacedBy,index:p})},It=function(e){var t=e.displaced,n=e.afterCritical,r=e.combineWith,i=e.displacedBy,o=Boolean(t.visible[r]||t.invisible[r]);return xt(r,n)?o?Ce:Se(i.point):o?i.point:Ce},wt=function(e){var t=e.afterCritical,n=e.impact,r=e.draggables,i=Je(n);i||fe(!1);var o=i.draggableId,a=r[o].page.borderBox.center,s=It({displaced:n.displaced,afterCritical:t,combineWith:o,displacedBy:n.displacedBy});return xe(a,s)},_t=function(e,t){return t.margin[e.start]+t.borderBox[e.size]/2},Nt=function(e,t){return t.margin[e.end]+t.borderBox[e.size]/2},At=function(e,t,n){return t[e.crossAxisStart]+n.margin[e.crossAxisStart]+n.borderBox[e.crossAxisSize]/2},Dt=function(e){var t=e.axis,n=e.moveRelativeTo,r=e.isMoving;return Ie(t.line,n.marginBox[t.end]+_t(t,r),At(t,n.marginBox,r))},kt=function(e){var t=e.axis,n=e.moveRelativeTo,r=e.isMoving;return Ie(t.line,n.marginBox[t.start]-Nt(t,r),At(t,n.marginBox,r))},Pt=function(e){var t=e.axis,n=e.moveInto,r=e.isMoving;return Ie(t.line,n.contentBox[t.start]+_t(t,r),At(t,n.contentBox,r))},Rt=function(e){var t=e.impact,n=e.draggable,r=e.draggables,i=e.droppable,o=e.afterCritical,a=Ye(i.descriptor.id,r),s=n.page,c=i.axis;if(!a.length)return Pt({axis:c,moveInto:i.page,isMoving:s});var l=t.displaced,u=t.displacedBy,d=l.all[0];if(d){var p=r[d];if(xt(d,o))return kt({axis:c,moveRelativeTo:p.page,isMoving:s});var h=W(p.page,u.point);return kt({axis:c,moveRelativeTo:h,isMoving:s})}var m=a[a.length-1];if(m.descriptor.id===n.descriptor.id)return s.borderBox.center;if(xt(m.descriptor.id,o)){var f=W(m.page,Se(o.displacedBy.point));return Dt({axis:c,moveRelativeTo:f,isMoving:s})}return Dt({axis:c,moveRelativeTo:m.page,isMoving:s})},Ft=function(e,t){var n=e.frame;return n?xe(t,n.scroll.diff.displacement):t},Lt=function(e){var t=e.impact,n=e.draggable,r=e.droppable,i=e.draggables,o=e.afterCritical,a=n.page.borderBox.center,s=t.at;return r&&s?"REORDER"===s.type?Rt({impact:t,draggable:n,draggables:i,droppable:r,afterCritical:o}):wt({impact:t,draggables:i,afterCritical:o}):a},Mt=function(e){var t=Lt(e),n=e.droppable;return n?Ft(n,t):t},Bt=function(e,t){var n=Ee(t,e.scroll.initial),r=Se(n);return{frame:L({top:t.y,bottom:t.y+e.frame.height,left:t.x,right:t.x+e.frame.width}),scroll:{initial:e.scroll.initial,max:e.scroll.max,current:t,diff:{value:n,displacement:r}}}};function Ut(e,t){return e.map((function(e){return t[e]}))}function Vt(e,t){for(var n=0;n<t.length;n++){var r=t[n].visible[e];if(r)return r}return null}var Ht=function(e){var t=e.impact,n=e.viewport,r=e.destination,i=e.draggables,o=e.maxScrollChange,a=Bt(n,xe(n.scroll.current,o)),s=r.frame?Be(r,xe(r.frame.scroll.current,o)):r,c=t.displaced,l=yt({afterDragging:Ut(c.all,i),destination:r,displacedBy:t.displacedBy,viewport:a.frame,last:c,forceShouldAnimate:!1}),u=yt({afterDragging:Ut(c.all,i),destination:s,displacedBy:t.displacedBy,viewport:n.frame,last:c,forceShouldAnimate:!1}),d={},p={},h=[c,l,u];c.all.forEach((function(e){var t=Vt(e,h);t?p[e]=t:d[e]=!0}));return w({},t,{displaced:{all:c.all,invisible:d,visible:p}})},qt=function(e,t){return xe(e.scroll.diff.displacement,t)},Gt=function(e){var t=e.pageBorderBoxCenter,n=e.draggable,r=e.viewport,i=qt(r,t),o=Ee(i,n.page.borderBox.center);return xe(n.client.borderBox.center,o)},Wt=function(e){var t=e.draggable,n=e.destination,r=e.newPageBorderBoxCenter,i=e.viewport,o=e.withDroppableDisplacement,a=e.onlyOnMainAxis,s=void 0!==a&&a,c=Ee(r,t.page.borderBox.center),l={target:De(t.page.borderBox,c),destination:n,withDroppableDisplacement:o,viewport:i};return s?gt(l):ft(l)},zt=function(e){var t=e.isMovingForward,n=e.draggable,r=e.destination,i=e.draggables,o=e.previousImpact,a=e.viewport,s=e.previousPageBorderBoxCenter,c=e.previousClientSelection,l=e.afterCritical;if(!r.isEnabled)return null;var u=Ye(r.descriptor.id,i),d=et(n,r),p=Ze({isMovingForward:t,draggable:n,destination:r,insideDestination:u,previousImpact:o})||St({isMovingForward:t,isInHomeList:d,draggable:n,draggables:i,destination:r,insideDestination:u,previousImpact:o,viewport:a,afterCritical:l});if(!p)return null;var h=Mt({impact:p,draggable:n,droppable:r,draggables:i,afterCritical:l});if(Wt({draggable:n,destination:r,newPageBorderBoxCenter:h,viewport:a.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0})){return{clientSelection:Gt({pageBorderBoxCenter:h,draggable:n,viewport:a}),impact:p,scrollJumpRequest:null}}var m=Ee(h,s);return{clientSelection:c,impact:Ht({impact:p,viewport:a,destination:r,draggables:i,maxScrollChange:m}),scrollJumpRequest:m}},$t=function(e){var t=e.subject.active;t||fe(!1);return t},Kt=function(e){var t=e.isMovingForward,n=e.pageBorderBoxCenter,r=e.source,i=e.droppables,o=e.viewport,a=r.subject.active;if(!a)return null;var s=r.axis,c=it(a[s.start],a[s.end]),l=$e(i).filter((function(e){return e!==r})).filter((function(e){return e.isEnabled})).filter((function(e){return Boolean(e.subject.active)})).filter((function(e){return ot(o.frame)($t(e))})).filter((function(e){var n=$t(e);return t?a[s.crossAxisEnd]<n[s.crossAxisEnd]:n[s.crossAxisStart]<a[s.crossAxisStart]})).filter((function(e){var t=$t(e),n=it(t[s.start],t[s.end]);return c(t[s.start])||c(t[s.end])||n(a[s.start])||n(a[s.end])})).sort((function(e,n){var r=$t(e)[s.crossAxisStart],i=$t(n)[s.crossAxisStart];return t?r-i:i-r})).filter((function(e,t,n){return $t(e)[s.crossAxisStart]===$t(n[0])[s.crossAxisStart]}));if(!l.length)return null;if(1===l.length)return l[0];var u=l.filter((function(e){return it($t(e)[s.start],$t(e)[s.end])(n[s.line])}));return 1===u.length?u[0]:u.length>1?u.sort((function(e,t){return $t(e)[s.start]-$t(t)[s.start]}))[0]:l.sort((function(e,t){var r=_e(n,ke($t(e))),i=_e(n,ke($t(t)));return r!==i?r-i:$t(e)[s.start]-$t(t)[s.start]}))[0]},Yt=function(e,t){var n=e.page.borderBox.center;return xt(e.descriptor.id,t)?Ee(n,t.displacedBy.point):n},Xt=function(e,t){var n=e.page.borderBox;return xt(e.descriptor.id,t)?De(n,Se(t.displacedBy.point)):n},Jt=function(e){var t=e.pageBorderBoxCenter,n=e.viewport,r=e.destination,i=e.insideDestination,o=e.afterCritical;return i.filter((function(e){return ft({target:Xt(e,o),destination:r,viewport:n.frame,withDroppableDisplacement:!0})})).sort((function(e,n){var i=we(t,Ft(r,Yt(e,o))),a=we(t,Ft(r,Yt(n,o)));return i<a?-1:a<i?1:e.descriptor.index-n.descriptor.index}))[0]||null},Qt=Q((function(e,t){var n=t[e.line];return{value:n,point:Ie(e.line,n)}})),Zt=function(e,t,n){var r=e.axis;if("virtual"===e.descriptor.mode)return Ie(r.line,t[r.line]);var i=e.subject.page.contentBox[r.size],o=Ye(e.descriptor.id,n).reduce((function(e,t){return e+t.client.marginBox[r.size]}),0)+t[r.line]-i;return o<=0?null:Ie(r.line,o)},en=function(e,t){return w({},e,{scroll:w({},e.scroll,{max:t})})},tn=function(e,t,n){var r=e.frame;et(t,e)&&fe(!1);e.subject.withPlaceholder&&fe(!1);var i=Qt(e.axis,t.displaceBy).point,o=Zt(e,i,n),a={placeholderSize:i,increasedBy:o,oldFrameMaxScroll:e.frame?e.frame.scroll.max:null};if(!r){var s=Me({page:e.subject.page,withPlaceholder:a,axis:e.axis,frame:e.frame});return w({},e,{subject:s})}var c=o?xe(r.scroll.max,o):r.scroll.max,l=en(r,c),u=Me({page:e.subject.page,withPlaceholder:a,axis:e.axis,frame:l});return w({},e,{subject:u,frame:l})},nn=function(e){var t=e.subject.withPlaceholder;t||fe(!1);var n=e.frame;if(!n){var r=Me({page:e.subject.page,axis:e.axis,frame:null,withPlaceholder:null});return w({},e,{subject:r})}var i=t.oldFrameMaxScroll;i||fe(!1);var o=en(n,i),a=Me({page:e.subject.page,axis:e.axis,frame:o,withPlaceholder:null});return w({},e,{subject:a,frame:o})},rn=function(e){var t=e.previousPageBorderBoxCenter,n=e.moveRelativeTo,r=e.insideDestination,i=e.draggable,o=e.draggables,a=e.destination,s=e.viewport,c=e.afterCritical;if(!n){if(r.length)return null;var l={displaced:nt,displacedBy:tt,at:{type:"REORDER",destination:{droppableId:a.descriptor.id,index:0}}},u=Mt({impact:l,draggable:i,droppable:a,draggables:o,afterCritical:c}),d=et(i,a)?a:tn(a,i,o);return Wt({draggable:i,destination:d,newPageBorderBoxCenter:u,viewport:s.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0})?l:null}var p,h=Boolean(t[a.axis.line]<=n.page.borderBox.center[a.axis.line]),m=(p=n.descriptor.index,n.descriptor.id===i.descriptor.id||h?p:p+1),f=Qt(a.axis,i.displaceBy);return Ct({draggable:i,insideDestination:r,destination:a,viewport:s,displacedBy:f,last:nt,index:m})},on=function(e){var t=e.isMovingForward,n=e.previousPageBorderBoxCenter,r=e.draggable,i=e.isOver,o=e.draggables,a=e.droppables,s=e.viewport,c=e.afterCritical,l=Kt({isMovingForward:t,pageBorderBoxCenter:n,source:i,droppables:a,viewport:s});if(!l)return null;var u=Ye(l.descriptor.id,o),d=Jt({pageBorderBoxCenter:n,viewport:s,destination:l,insideDestination:u,afterCritical:c}),p=rn({previousPageBorderBoxCenter:n,destination:l,draggable:r,draggables:o,moveRelativeTo:d,insideDestination:u,viewport:s,afterCritical:c});if(!p)return null;var h=Mt({impact:p,draggable:r,droppable:l,draggables:o,afterCritical:c});return{clientSelection:Gt({pageBorderBoxCenter:h,draggable:r,viewport:s}),impact:p,scrollJumpRequest:null}},an=function(e){var t=e.at;return t?"REORDER"===t.type?t.destination.droppableId:t.combine.droppableId:null},sn=function(e,t){var n=an(e);return n?t[n]:null},cn=function(e){var t=e.state,n=e.type,r=sn(t.impact,t.dimensions.droppables),i=Boolean(r),o=t.dimensions.droppables[t.critical.droppable.id],a=r||o,s=a.axis.direction,c="vertical"===s&&("MOVE_UP"===n||"MOVE_DOWN"===n)||"horizontal"===s&&("MOVE_LEFT"===n||"MOVE_RIGHT"===n);if(c&&!i)return null;var l="MOVE_DOWN"===n||"MOVE_RIGHT"===n,u=t.dimensions.draggables[t.critical.draggable.id],d=t.current.page.borderBoxCenter,p=t.dimensions,h=p.draggables,m=p.droppables;return c?zt({isMovingForward:l,previousPageBorderBoxCenter:d,draggable:u,destination:a,draggables:h,viewport:t.viewport,previousClientSelection:t.current.client.selection,previousImpact:t.impact,afterCritical:t.afterCritical}):on({isMovingForward:l,previousPageBorderBoxCenter:d,draggable:u,isOver:a,draggables:h,droppables:m,viewport:t.viewport,afterCritical:t.afterCritical})};function ln(e){return"DRAGGING"===e.phase||"COLLECTING"===e.phase}function un(e){var t=it(e.top,e.bottom),n=it(e.left,e.right);return function(e){return t(e.y)&&n(e.x)}}function dn(e,t){return e.left<t.right&&e.right>t.left&&e.top<t.bottom&&e.bottom>t.top}function pn(e){var t=e.pageBorderBox,n=e.draggable,r=e.candidates,i=n.page.borderBox.center,o=r.map((function(e){var n=e.axis,r=Ie(e.axis.line,t.center[n.line],e.page.borderBox.center[n.crossAxisLine]);return{id:e.descriptor.id,distance:we(i,r)}})).sort((function(e,t){return t.distance-e.distance}));return o[0]?o[0].id:null}function hn(e){var t=e.pageBorderBox,n=e.draggable,r=e.droppables,i=$e(r).filter((function(e){if(!e.isEnabled)return!1;var n=e.subject.active;if(!n)return!1;if(!dn(t,n))return!1;if(un(n)(t.center))return!0;var r=e.axis,i=n.center[r.crossAxisLine],o=t[r.crossAxisStart],a=t[r.crossAxisEnd],s=it(n[r.crossAxisStart],n[r.crossAxisEnd]),c=s(o),l=s(a);return!c&&!l||(c?o<i:a>i)}));return i.length?1===i.length?i[0].descriptor.id:pn({pageBorderBox:t,draggable:n,candidates:i}):null}var mn=function(e,t){return L(De(e,t))},fn=function(e,t){var n=e.frame;return n?mn(t,n.scroll.diff.value):t};function gn(e){var t=e.displaced,n=e.id;return Boolean(t.visible[n]||t.invisible[n])}function bn(e){var t=e.draggable,n=e.closest,r=e.inHomeList;return n?r&&n.descriptor.index>t.descriptor.index?n.descriptor.index-1:n.descriptor.index:null}var On=function(e){var t=e.pageBorderBoxWithDroppableScroll,n=e.draggable,r=e.destination,i=e.insideDestination,o=e.last,a=e.viewport,s=e.afterCritical,c=r.axis,l=Qt(r.axis,n.displaceBy),u=l.value,d=t[c.start],p=t[c.end],h=bn({draggable:n,closest:qe(Qe(n,i),(function(e){var t=e.descriptor.id,n=e.page.borderBox.center[c.line],r=xt(t,s),i=gn({displaced:o,id:t});return r?i?p<=n:d<n-u:i?p<=n+u:d<n})),inHomeList:et(n,r)});return Ct({draggable:n,insideDestination:i,destination:r,viewport:a,last:o,displacedBy:l,index:h})},yn=4,jn=function(e){var t=e.draggable,n=e.pageBorderBoxWithDroppableScroll,r=e.previousImpact,i=e.destination,o=e.insideDestination,a=e.afterCritical;if(!i.isCombineEnabled)return null;var s=i.axis,c=Qt(i.axis,t.displaceBy),l=c.value,u=n[s.start],d=n[s.end],p=qe(Qe(t,o),(function(e){var t=e.descriptor.id,n=e.page.borderBox,i=n[s.size]/yn,o=xt(t,a),c=gn({displaced:r.displaced,id:t});return o?c?d>n[s.start]+i&&d<n[s.end]-i:u>n[s.start]-l+i&&u<n[s.end]-l-i:c?d>n[s.start]+l+i&&d<n[s.end]+l-i:u>n[s.start]+i&&u<n[s.end]-i}));return p?{displacedBy:c,displaced:r.displaced,at:{type:"COMBINE",combine:{draggableId:p.descriptor.id,droppableId:i.descriptor.id}}}:null},vn=function(e){var t=e.pageOffset,n=e.draggable,r=e.draggables,i=e.droppables,o=e.previousImpact,a=e.viewport,s=e.afterCritical,c=mn(n.page.borderBox,t),l=hn({pageBorderBox:c,draggable:n,droppables:i});if(!l)return rt;var u=i[l],d=Ye(u.descriptor.id,r),p=fn(u,c);return jn({pageBorderBoxWithDroppableScroll:p,draggable:n,previousImpact:o,destination:u,insideDestination:d,afterCritical:s})||On({pageBorderBoxWithDroppableScroll:p,draggable:n,destination:u,insideDestination:d,last:o.displaced,viewport:a,afterCritical:s})},Cn=function(e,t){var n;return w({},e,((n={})[t.descriptor.id]=t,n))},xn=function(e){var t=e.previousImpact,n=e.impact,r=e.droppables,i=an(t),o=an(n);if(!i)return r;if(i===o)return r;var a=r[i];if(!a.subject.withPlaceholder)return r;var s=nn(a);return Cn(r,s)},En=function(e){var t=e.draggable,n=e.draggables,r=e.droppables,i=e.previousImpact,o=e.impact,a=xn({previousImpact:i,impact:o,droppables:r}),s=an(o);if(!s)return a;var c=r[s];if(et(t,c))return a;if(c.subject.withPlaceholder)return a;var l=tn(c,t,n);return Cn(a,l)},Tn=function(e){var t=e.state,n=e.clientSelection,r=e.dimensions,i=e.viewport,o=e.impact,a=e.scrollJumpRequest,s=i||t.viewport,c=r||t.dimensions,l=n||t.current.client.selection,u=Ee(l,t.initial.client.selection),d={offset:u,selection:l,borderBoxCenter:xe(t.initial.client.borderBoxCenter,u)},p={selection:xe(d.selection,s.scroll.current),borderBoxCenter:xe(d.borderBoxCenter,s.scroll.current),offset:xe(d.offset,s.scroll.diff.value)},h={client:d,page:p};if("COLLECTING"===t.phase)return w({phase:"COLLECTING"},t,{dimensions:c,viewport:s,current:h});var m=c.draggables[t.critical.draggable.id],f=o||vn({pageOffset:p.offset,draggable:m,draggables:c.draggables,droppables:c.droppables,previousImpact:t.impact,viewport:s,afterCritical:t.afterCritical}),g=En({draggable:m,impact:f,previousImpact:t.impact,draggables:c.draggables,droppables:c.droppables});return w({},t,{current:h,dimensions:{draggables:c.draggables,droppables:g},impact:f,viewport:s,scrollJumpRequest:a||null,forceShouldAnimate:!a&&null})};function Sn(e,t){return e.map((function(e){return t[e]}))}var In=function(e){var t=e.impact,n=e.viewport,r=e.draggables,i=e.destination,o=e.forceShouldAnimate,a=t.displaced,s=yt({afterDragging:Sn(a.all,r),destination:i,displacedBy:t.displacedBy,viewport:n.frame,forceShouldAnimate:o,last:a});return w({},t,{displaced:s})},wn=function(e){var t=e.impact,n=e.draggable,r=e.droppable,i=e.draggables,o=e.viewport,a=e.afterCritical,s=Mt({impact:t,draggable:n,draggables:i,droppable:r,afterCritical:a});return Gt({pageBorderBoxCenter:s,draggable:n,viewport:o})},_n=function(e){var t=e.state,n=e.dimensions,r=e.viewport;"SNAP"!==t.movementMode&&fe(!1);var i=t.impact,o=r||t.viewport,a=n||t.dimensions,s=a.draggables,c=a.droppables,l=s[t.critical.draggable.id],u=an(i);u||fe(!1);var d=c[u],p=In({impact:i,viewport:o,destination:d,draggables:s}),h=wn({impact:p,draggable:l,droppable:d,draggables:s,viewport:o,afterCritical:t.afterCritical});return Tn({impact:p,clientSelection:h,state:t,dimensions:a,viewport:o})},Nn=function(e){return{index:e.index,droppableId:e.droppableId}},An=function(e){var t=e.draggable,n=e.home,r=e.draggables,i=e.viewport,o=Qt(n.axis,t.displaceBy),a=Ye(n.descriptor.id,r),s=a.indexOf(t);-1===s&&fe(!1);var c=a.slice(s+1),l=c.reduce((function(e,t){e[t.descriptor.id]=!0;return e}),{}),u={inVirtualList:"virtual"===n.descriptor.mode,displacedBy:o,effected:l};return{impact:{displaced:yt({afterDragging:c,destination:n,displacedBy:o,last:null,viewport:i.frame,forceShouldAnimate:!1}),displacedBy:o,at:{type:"REORDER",destination:Nn(t.descriptor)}},afterCritical:u}},Dn=function(e,t){return{draggables:e.draggables,droppables:Cn(e.droppables,t)}},kn=function(e){0},Pn=function(e){0},Rn=function(e){var t=e.draggable,n=e.offset,r=e.initialWindowScroll,i=W(t.client,n),o=z(i,r);return w({},t,{placeholder:w({},t.placeholder,{client:i}),client:i,page:o})},Fn=function(e){var t=e.frame;t||fe(!1);return t},Ln=function(e){var t=e.additions,n=e.updatedDroppables,r=e.viewport,i=r.scroll.diff.value;return t.map((function(e){var t=e.descriptor.droppableId,o=n[t],a=Fn(o).scroll.diff.value,s=xe(i,a);return Rn({draggable:e,offset:s,initialWindowScroll:r.scroll.initial})}))},Mn=function(e){var t=e.state,n=e.published;kn();var r=n.modified.map((function(e){var n=t.dimensions.droppables[e.droppableId];return Be(n,e.scroll)})),i=w({},t.dimensions.droppables,{},We(r)),o=ze(Ln({additions:n.additions,updatedDroppables:i,viewport:t.viewport})),a=w({},t.dimensions.draggables,{},o);n.removals.forEach((function(e){delete a[e]}));var s={droppables:i,draggables:a},c=an(t.impact),l=c?s.droppables[c]:null,u=s.draggables[t.critical.draggable.id],d=s.droppables[t.critical.droppable.id],p=An({draggable:u,home:d,draggables:a,viewport:t.viewport}),h=p.impact,m=p.afterCritical,f=l&&l.isCombineEnabled?t.impact:h,g=vn({pageOffset:t.current.page.offset,draggable:s.draggables[t.critical.draggable.id],draggables:s.draggables,droppables:s.droppables,previousImpact:f,viewport:t.viewport,afterCritical:m});Pn();var b=w({phase:"DRAGGING"},t,{phase:"DRAGGING",impact:g,onLiftImpact:h,dimensions:s,afterCritical:m,forceShouldAnimate:!1});return"COLLECTING"===t.phase?b:w({phase:"DROP_PENDING"},b,{phase:"DROP_PENDING",reason:t.reason,isWaiting:!1})},Bn=function(e){return"SNAP"===e.movementMode},Un=function(e,t,n){var r=Dn(e.dimensions,t);return!Bn(e)||n?Tn({state:e,dimensions:r}):_n({state:e,dimensions:r})};function Vn(e){return e.isDragging&&"SNAP"===e.movementMode?w({phase:"DRAGGING"},e,{scrollJumpRequest:null}):e}var Hn={phase:"IDLE",completed:null,shouldFlush:!1},qn=function(e,t){void 0===e&&(e=Hn);if("FLUSH"===t.type)return w({},Hn,{shouldFlush:!0});if("INITIAL_PUBLISH"===t.type){"IDLE"!==e.phase&&fe(!1);var n=t.payload,r=n.critical,i=n.clientSelection,o=n.viewport,a=n.dimensions,s=n.movementMode,c=a.draggables[r.draggable.id],l=a.droppables[r.droppable.id],u={selection:i,borderBoxCenter:c.client.borderBox.center,offset:Ce},d={client:u,page:{selection:xe(u.selection,o.scroll.initial),borderBoxCenter:xe(u.selection,o.scroll.initial),offset:xe(u.selection,o.scroll.diff.value)}},p=$e(a.droppables).every((function(e){return!e.isFixedOnPage})),h=An({draggable:c,home:l,draggables:a.draggables,viewport:o}),m=h.impact;return{phase:"DRAGGING",isDragging:!0,critical:r,movementMode:s,dimensions:a,initial:d,current:d,isWindowScrollAllowed:p,impact:m,afterCritical:h.afterCritical,onLiftImpact:m,viewport:o,scrollJumpRequest:null,forceShouldAnimate:null}}if("COLLECTION_STARTING"===t.type){if("COLLECTING"===e.phase||"DROP_PENDING"===e.phase)return e;"DRAGGING"!==e.phase&&fe(!1);return w({phase:"COLLECTING"},e,{phase:"COLLECTING"})}if("PUBLISH_WHILE_DRAGGING"===t.type){"COLLECTING"!==e.phase&&"DROP_PENDING"!==e.phase&&fe(!1);return Mn({state:e,published:t.payload})}if("MOVE"===t.type){if("DROP_PENDING"===e.phase)return e;ln(e)||fe(!1);var f=t.payload.client;return Te(f,e.current.client.selection)?e:Tn({state:e,clientSelection:f,impact:Bn(e)?e.impact:null})}if("UPDATE_DROPPABLE_SCROLL"===t.type){if("DROP_PENDING"===e.phase)return Vn(e);if("COLLECTING"===e.phase)return Vn(e);ln(e)||fe(!1);var g=t.payload,b=g.id,O=g.newScroll,y=e.dimensions.droppables[b];if(!y)return e;var j=Be(y,O);return Un(e,j,!1)}if("UPDATE_DROPPABLE_IS_ENABLED"===t.type){if("DROP_PENDING"===e.phase)return e;ln(e)||fe(!1);var v=t.payload,C=v.id,x=v.isEnabled,E=e.dimensions.droppables[C];E||fe(!1);E.isEnabled===x&&fe(!1);var T=w({},E,{isEnabled:x});return Un(e,T,!0)}if("UPDATE_DROPPABLE_IS_COMBINE_ENABLED"===t.type){if("DROP_PENDING"===e.phase)return e;ln(e)||fe(!1);var S=t.payload,I=S.id,_=S.isCombineEnabled,N=e.dimensions.droppables[I];N||fe(!1);N.isCombineEnabled===_&&fe(!1);var A=w({},N,{isCombineEnabled:_});return Un(e,A,!0)}if("MOVE_BY_WINDOW_SCROLL"===t.type){if("DROP_PENDING"===e.phase||"DROP_ANIMATING"===e.phase)return e;ln(e)||fe(!1);e.isWindowScrollAllowed||fe(!1);var D=t.payload.newScroll;if(Te(e.viewport.scroll.current,D))return Vn(e);var k=Bt(e.viewport,D);return Bn(e)?_n({state:e,viewport:k}):Tn({state:e,viewport:k})}if("UPDATE_VIEWPORT_MAX_SCROLL"===t.type){if(!ln(e))return e;var P=t.payload.maxScroll;if(Te(P,e.viewport.scroll.max))return e;var R=w({},e.viewport,{scroll:w({},e.viewport.scroll,{max:P})});return w({phase:"DRAGGING"},e,{viewport:R})}if("MOVE_UP"===t.type||"MOVE_DOWN"===t.type||"MOVE_LEFT"===t.type||"MOVE_RIGHT"===t.type){if("COLLECTING"===e.phase||"DROP_PENDING"===e.phase)return e;"DRAGGING"!==e.phase&&fe(!1);var F=cn({state:e,type:t.type});return F?Tn({state:e,impact:F.impact,clientSelection:F.clientSelection,scrollJumpRequest:F.scrollJumpRequest}):e}if("DROP_PENDING"===t.type){var L=t.payload.reason;"COLLECTING"!==e.phase&&fe(!1);return w({phase:"DROP_PENDING"},e,{phase:"DROP_PENDING",isWaiting:!0,reason:L})}if("DROP_ANIMATE"===t.type){var M=t.payload,B=M.completed,U=M.dropDuration,V=M.newHomeClientOffset;"DRAGGING"!==e.phase&&"DROP_PENDING"!==e.phase&&fe(!1);return{phase:"DROP_ANIMATING",completed:B,dropDuration:U,newHomeClientOffset:V,dimensions:e.dimensions}}if("DROP_COMPLETE"===t.type){return{phase:"IDLE",completed:t.payload.completed,shouldFlush:!1}}return e},Gn=function(e){return{type:"BEFORE_INITIAL_CAPTURE",payload:e}},Wn=function(e){return{type:"LIFT",payload:e}},zn=function(e){return{type:"INITIAL_PUBLISH",payload:e}},$n=function(e){return{type:"PUBLISH_WHILE_DRAGGING",payload:e}},Kn=function(){return{type:"COLLECTION_STARTING",payload:null}},Yn=function(e){return{type:"UPDATE_DROPPABLE_SCROLL",payload:e}},Xn=function(e){return{type:"UPDATE_DROPPABLE_IS_ENABLED",payload:e}},Jn=function(e){return{type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:e}},Qn=function(e){return{type:"MOVE",payload:e}},Zn=function(e){return{type:"MOVE_BY_WINDOW_SCROLL",payload:e}},er=function(e){return{type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:e}},tr=function(){return{type:"MOVE_UP",payload:null}},nr=function(){return{type:"MOVE_DOWN",payload:null}},rr=function(){return{type:"MOVE_RIGHT",payload:null}},ir=function(){return{type:"MOVE_LEFT",payload:null}},or=function(){return{type:"FLUSH",payload:null}},ar=function(e){return{type:"DROP_ANIMATE",payload:e}},sr=function(e){return{type:"DROP_COMPLETE",payload:e}},cr=function(e){return{type:"DROP",payload:e}},lr=function(e){return{type:"DROP_PENDING",payload:e}},ur=function(){return{type:"DROP_ANIMATION_FINISHED",payload:null}};function dr(e,t){}var pr=function(e){return function(t){var n=t.getState,r=t.dispatch;return function(t){return function(i){if("LIFT"===i.type){var o=i.payload,a=o.id,s=o.clientSelection,c=o.movementMode,l=n();"DROP_ANIMATING"===l.phase&&r(sr({completed:l.completed}));"IDLE"!==n().phase&&fe(!1);r(or());r(Gn({draggableId:a,movementMode:c}));var u={draggableId:a,scrollOptions:{shouldPublishImmediately:"SNAP"===c}},d=e.startPublishing(u),p=d.critical,h=d.dimensions,m=d.viewport;dr(p,h);r(zn({critical:p,dimensions:h,clientSelection:s,movementMode:c,viewport:m}))}else t(i)}}}},hr=function(e){return function(){return function(t){return function(n){"INITIAL_PUBLISH"===n.type&&e.dragging();"DROP_ANIMATE"===n.type&&e.dropping(n.payload.completed.result.reason);"FLUSH"!==n.type&&"DROP_COMPLETE"!==n.type||e.resting();t(n)}}}},mr={outOfTheWay:"cubic-bezier(0.2, 0, 0, 1)",drop:"cubic-bezier(.2,1,.1,1)"},fr={opacity:{drop:0,combining:.7},scale:{drop:.75}},gr={outOfTheWay:.2,minDropTime:.33,maxDropTime:.55},br=gr.outOfTheWay+"s "+mr.outOfTheWay,Or={fluid:"opacity "+br,snap:"transform "+br+", opacity "+br,drop:function(e){var t=e+"s "+mr.drop;return"transform "+t+", opacity "+t},outOfTheWay:"transform "+br,placeholder:"height "+br+", width "+br+", margin "+br},yr=function(e){return Te(e,Ce)?null:"translate("+e.x+"px, "+e.y+"px)"},jr={moveTo:yr,drop:function(e,t){var n=yr(e);return n?t?n+" scale("+fr.scale.drop+")":n:null}},vr=gr.minDropTime,Cr=gr.maxDropTime,xr=Cr-vr,Er=1500,Tr=.6,Sr=function(e){var t=e.current,n=e.destination,r=e.reason,i=we(t,n);if(i<=0)return vr;if(i>=Er)return Cr;var o=vr+xr*(i/Er);return Number(("CANCEL"===r?o*Tr:o).toFixed(2))},Ir=function(e){var t=e.impact,n=e.draggable,r=e.dimensions,i=e.viewport,o=e.afterCritical,a=r.draggables,s=r.droppables,c=an(t),l=c?s[c]:null,u=s[n.descriptor.droppableId],d=wn({impact:t,draggable:n,draggables:a,afterCritical:o,droppable:l||u,viewport:i});return Ee(d,n.client.borderBox.center)},wr=function(e){var t=e.draggables,n=e.reason,r=e.lastImpact,i=e.home,o=e.viewport,a=e.onLiftImpact;if(!r.at||"DROP"!==n){return{impact:In({draggables:t,impact:a,destination:i,viewport:o,forceShouldAnimate:!0}),didDropInsideDroppable:!1}}return"REORDER"===r.at.type?{impact:r,didDropInsideDroppable:!0}:{impact:w({},r,{displaced:nt}),didDropInsideDroppable:!0}},_r=function(e){var t=e.getState,n=e.dispatch;return function(e){return function(r){if("DROP"===r.type){var i=t(),o=r.payload.reason;if("COLLECTING"!==i.phase){if("IDLE"!==i.phase){"DROP_PENDING"===i.phase&&i.isWaiting&&fe(!1);"DRAGGING"!==i.phase&&"DROP_PENDING"!==i.phase&&fe(!1);var a=i.critical,s=i.dimensions,c=s.draggables[i.critical.draggable.id],l=wr({reason:o,lastImpact:i.impact,afterCritical:i.afterCritical,onLiftImpact:i.onLiftImpact,home:i.dimensions.droppables[i.critical.droppable.id],viewport:i.viewport,draggables:i.dimensions.draggables}),u=l.impact,d=l.didDropInsideDroppable,p=d?Xe(u):null,h=d?Je(u):null,m={index:a.draggable.index,droppableId:a.droppable.id},f={draggableId:c.descriptor.id,type:c.descriptor.type,source:m,reason:o,mode:i.movementMode,destination:p,combine:h},g=Ir({impact:u,draggable:c,dimensions:s,viewport:i.viewport,afterCritical:i.afterCritical}),b={critical:i.critical,afterCritical:i.afterCritical,result:f,impact:u};if(!Te(i.current.client.offset,g)||Boolean(f.combine)){var O=Sr({current:i.current.client.offset,destination:g,reason:o});n(ar({newHomeClientOffset:g,dropDuration:O,completed:b}))}else n(sr({completed:b}))}}else n(lr({reason:o}))}else e(r)}}},Nr=function(){return{x:window.pageXOffset,y:window.pageYOffset}};function Ar(e){return{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(t){t.target!==window&&t.target!==window.document||e()}}}function Dr(e){var t=e.onWindowScroll;function n(){t(Nr())}var r=Z(n),i=Ar(r),o=le;function a(){return o!==le}function s(){a()&&fe(!1);o=de(window,[i])}function c(){a()||fe(!1);r.cancel();o();o=le}return{start:s,stop:c,isActive:a}}var kr=function(e){return"DROP_COMPLETE"===e.type||"DROP_ANIMATE"===e.type||"FLUSH"===e.type},Pr=function(e){var t=Dr({onWindowScroll:function(t){e.dispatch(Zn({newScroll:t}))}});return function(e){return function(n){t.isActive()||"INITIAL_PUBLISH"!==n.type||t.start();t.isActive()&&kr(n)&&t.stop();e(n)}}},Rr=function(e){var t=!1,n=!1,r=setTimeout((function(){n=!0})),i=function(i){if(!t&&!n){t=!0;e(i);clearTimeout(r)}};i.wasCalled=function(){return t};return i},Fr=function(){var e=[],t=function(t){var n=He(e,(function(e){return e.timerId===t}));-1===n&&fe(!1);e.splice(n,1)[0].callback()};return{add:function(n){var r=setTimeout((function(){return t(r)})),i={timerId:r,callback:n};e.push(i)},flush:function(){if(e.length){var t=[].concat(e);e.length=0;t.forEach((function(e){clearTimeout(e.timerId);e.callback()}))}}}},Lr=function(e,t){return null==e&&null==t||null!=e&&null!=t&&(e.droppableId===t.droppableId&&e.index===t.index)},Mr=function(e,t){return null==e&&null==t||null!=e&&null!=t&&(e.draggableId===t.draggableId&&e.droppableId===t.droppableId)},Br=function(e,t){if(e===t)return!0;var n=e.draggable.id===t.draggable.id&&e.draggable.droppableId===t.draggable.droppableId&&e.draggable.type===t.draggable.type&&e.draggable.index===t.draggable.index,r=e.droppable.id===t.droppable.id&&e.droppable.type===t.droppable.type;return n&&r},Ur=function(e,t){kn();t();Pn()},Vr=function(e,t){return{draggableId:e.draggable.id,type:e.droppable.type,source:{droppableId:e.droppable.id,index:e.draggable.index},mode:t}},Hr=function(e,t,n,r){if(e){var i=Rr(n);e(t,{announce:i});i.wasCalled()||n(r(t))}else n(r(t))},qr=function(e,t){var n=Fr(),r=null,i=function(n){r||fe(!1);r=null;Ur("onDragEnd",(function(){return Hr(e().onDragEnd,n,t,ve.onDragEnd)}))},o=function(){if(r){var e=w({},Vr(r.lastCritical,r.mode),{combine:null,destination:null,reason:"CANCEL"});i(e)}};return{beforeCapture:function(t,n){r&&fe(!1);Ur("onBeforeCapture",(function(){var r=e().onBeforeCapture;if(r){r({draggableId:t,mode:n})}}))},beforeStart:function(t,n){r&&fe(!1);Ur("onBeforeDragStart",(function(){var r=e().onBeforeDragStart;r&&r(Vr(t,n))}))},start:function(i,o){r&&fe(!1);var a=Vr(i,o);r={mode:o,lastCritical:i,lastLocation:a.source,lastCombine:null};n.add((function(){Ur("onDragStart",(function(){return Hr(e().onDragStart,a,t,ve.onDragStart)}))}))},update:function(i,o){var a=Xe(o),s=Je(o);r||fe(!1);var c=!Br(i,r.lastCritical);c&&(r.lastCritical=i);var l=!Lr(r.lastLocation,a);l&&(r.lastLocation=a);var u=!Mr(r.lastCombine,s);u&&(r.lastCombine=s);if(c||l||u){var d=w({},Vr(i,r.mode),{combine:s,destination:a});n.add((function(){Ur("onDragUpdate",(function(){return Hr(e().onDragUpdate,d,t,ve.onDragUpdate)}))}))}},flush:function(){r||fe(!1);n.flush()},drop:i,abort:o}},Gr=function(e,t){var n=qr(e,t);return function(e){return function(t){return function(r){if("BEFORE_INITIAL_CAPTURE"!==r.type)if("INITIAL_PUBLISH"!==r.type)if("DROP_COMPLETE"!==r.type){t(r);if("FLUSH"!==r.type){var i=e.getState();"DRAGGING"===i.phase&&n.update(i.critical,i.impact)}else n.abort()}else{var o=r.payload.completed.result;n.flush();t(r);n.drop(o)}else{var a=r.payload.critical;n.beforeStart(a,r.payload.movementMode);t(r);n.start(a,r.payload.movementMode)}else n.beforeCapture(r.payload.draggableId,r.payload.movementMode)}}}},Wr=function(e){return function(t){return function(n){if("DROP_ANIMATION_FINISHED"===n.type){var r=e.getState();"DROP_ANIMATING"!==r.phase&&fe(!1);e.dispatch(sr({completed:r.completed}))}else t(n)}}},zr=function(e){var t=null,n=null;function r(){if(n){cancelAnimationFrame(n);n=null}if(t){t();t=null}}return function(i){return function(o){"FLUSH"!==o.type&&"DROP_COMPLETE"!==o.type&&"DROP_ANIMATION_FINISHED"!==o.type||r();i(o);if("DROP_ANIMATE"===o.type){var a={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){"DROP_ANIMATING"===e.getState().phase&&e.dispatch(ur())}};n=requestAnimationFrame((function(){n=null;t=de(window,[a])}))}}}},$r=function(e){return function(){return function(t){return function(n){"DROP_COMPLETE"!==n.type&&"FLUSH"!==n.type&&"DROP_ANIMATE"!==n.type||e.stopPublishing();t(n)}}}},Kr=function(e){var t=!1;return function(){return function(n){return function(r){if("INITIAL_PUBLISH"!==r.type){n(r);if(t)if("FLUSH"!==r.type){if("DROP_COMPLETE"===r.type){t=!1;var i=r.payload.completed.result;i.combine&&e.tryShiftRecord(i.draggableId,i.combine.draggableId);e.tryRestoreFocusRecorded()}}else{t=!1;e.tryRestoreFocusRecorded()}}else{t=!0;e.tryRecordFocus(r.payload.critical.draggable.id);n(r);e.tryRestoreFocusRecorded()}}}}},Yr=function(e){return"DROP_COMPLETE"===e.type||"DROP_ANIMATE"===e.type||"FLUSH"===e.type},Xr=function(e){return function(t){return function(n){return function(r){if(Yr(r)){e.stop();n(r)}else if("INITIAL_PUBLISH"!==r.type){n(r);e.scroll(t.getState())}else{n(r);var i=t.getState();"DRAGGING"!==i.phase&&fe(!1);e.start(i)}}}}},Jr=function(e){return function(t){return function(n){t(n);if("PUBLISH_WHILE_DRAGGING"===n.type){var r=e.getState();"DROP_PENDING"===r.phase&&(r.isWaiting||e.dispatch(cr({reason:r.reason})))}}}},Qr=x.compose,Zr=function(e){var t=e.dimensionMarshal,n=e.focusMarshal,r=e.styleMarshal,i=e.getResponders,o=e.announce,a=e.autoScroller;return Object(x.createStore)(qn,Qr(Object(x.applyMiddleware)(hr(r),$r(t),pr(t),_r,Wr,zr,Jr,Xr(a),Pr,Kr(n),Gr(i,o))))},ei=function(){return{additions:{},removals:{},modified:{}}};function ti(e){var t=e.registry,n=e.callbacks,r=ei(),i=null,o=function(){if(!i){n.collectionStarting();i=requestAnimationFrame((function(){i=null;kn();var e=r,o=e.additions,a=e.removals,s=e.modified,c=Object.keys(o).map((function(e){return t.draggable.getById(e).getDimension(Ce)})).sort((function(e,t){return e.descriptor.index-t.descriptor.index})),l=Object.keys(s).map((function(e){return{droppableId:e,scroll:t.droppable.getById(e).callbacks.getScrollWhileDragging()}})),u={additions:c,removals:Object.keys(a),modified:l};r=ei();Pn();n.publish(u)}))}};return{add:function(e){var t=e.descriptor.id;r.additions[t]=e;r.modified[e.descriptor.droppableId]=!0;r.removals[t]&&delete r.removals[t];o()},remove:function(e){var t=e.descriptor;r.removals[t.id]=!0;r.modified[t.droppableId]=!0;r.additions[t.id]&&delete r.additions[t.id];o()},stop:function(){if(i){cancelAnimationFrame(i);i=null;r=ei()}}}}var ni=function(e){var t=e.scrollHeight,n=e.scrollWidth,r=e.height,i=e.width,o=Ee({x:n,y:t},{x:i,y:r});return{x:Math.max(0,o.x),y:Math.max(0,o.y)}},ri=function(){var e=document.documentElement;e||fe(!1);return e},ii=function(){var e=ri();return ni({scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,width:e.clientWidth,height:e.clientHeight})},oi=function(){var e=Nr(),t=ii(),n=e.y,r=e.x,i=ri(),o=i.clientWidth,a=i.clientHeight;return{frame:L({top:n,left:r,right:r+o,bottom:n+a}),scroll:{initial:e,current:e,max:t,diff:{value:Ce,displacement:Ce}}}},ai=function(e){var t=e.critical,n=e.scrollOptions,r=e.registry;kn();var i=oi(),o=i.scroll.current,a=t.droppable,s=r.droppable.getAllByType(a.type).map((function(e){return e.callbacks.getDimensionAndWatchScroll(o,n)})),c=r.draggable.getAllByType(t.draggable.type).map((function(e){return e.getDimension(o)})),l={draggables:ze(c),droppables:We(s)};Pn();return{dimensions:l,critical:t,viewport:i}};function si(e,t,n){return n.descriptor.id!==t.id&&(n.descriptor.type===t.type&&"virtual"===e.droppable.getById(n.descriptor.droppableId).descriptor.mode)}var ci,li,ui=function(e,t){var n=null,r=ti({callbacks:{publish:t.publishWhileDragging,collectionStarting:t.collectionStarting},registry:e}),i=function(t){n||fe(!1);var i=n.critical.draggable;"ADDITION"===t.type&&si(e,i,t.value)&&r.add(t.value);"REMOVAL"===t.type&&si(e,i,t.value)&&r.remove(t.value)};return{updateDroppableIsEnabled:function(r,i){e.droppable.exists(r)||fe(!1);n&&t.updateDroppableIsEnabled({id:r,isEnabled:i})},updateDroppableIsCombineEnabled:function(r,i){if(n){e.droppable.exists(r)||fe(!1);t.updateDroppableIsCombineEnabled({id:r,isCombineEnabled:i})}},scrollDroppable:function(t,r){n&&e.droppable.getById(t).callbacks.scroll(r)},updateDroppableScroll:function(r,i){if(n){e.droppable.exists(r)||fe(!1);t.updateDroppableScroll({id:r,newScroll:i})}},startPublishing:function(t){n&&fe(!1);var r=e.draggable.getById(t.draggableId),o=e.droppable.getById(r.descriptor.droppableId),a={draggable:r.descriptor,droppable:o.descriptor},s=e.subscribe(i);n={critical:a,unsubscribe:s};return ai({critical:a,registry:e,scrollOptions:t.scrollOptions})},stopPublishing:function(){if(n){r.stop();var t=n.critical.droppable;e.droppable.getAllByType(t.type).forEach((function(e){return e.callbacks.dragStopped()}));n.unsubscribe();n=null}}}},di=function(e,t){return"IDLE"===e.phase||"DROP_ANIMATING"===e.phase&&(e.completed.result.draggableId!==t&&"DROP"===e.completed.result.reason)},pi=function(e){window.scrollBy(e.x,e.y)},hi=Q((function(e){return $e(e).filter((function(e){return!!e.isEnabled&&!!e.frame}))})),mi=function(e,t){return qe(hi(t),(function(t){t.frame||fe(!1);return un(t.frame.pageMarginBox)(e)}))},fi=function(e){var t=e.center,n=e.destination,r=e.droppables;if(n){var i=r[n];return i.frame?i:null}return mi(t,r)},gi={startFromPercentage:.25,maxScrollAtPercentage:.05,maxPixelScroll:28,ease:function(e){return Math.pow(e,2)},durationDampening:{stopDampeningAt:1200,accelerateAt:360}},bi=function(e,t){return{startScrollingFrom:e[t.size]*gi.startFromPercentage,maxScrollValueAt:e[t.size]*gi.maxScrollAtPercentage}},Oi=function(e){var t=e.startOfRange,n=e.endOfRange,r=e.current,i=n-t;return 0===i?0:(r-t)/i},yi=1,ji=function(e,t){if(e>t.startScrollingFrom)return 0;if(e<=t.maxScrollValueAt)return gi.maxPixelScroll;if(e===t.startScrollingFrom)return yi;var n=1-Oi({startOfRange:t.maxScrollValueAt,endOfRange:t.startScrollingFrom,current:e}),r=gi.maxPixelScroll*gi.ease(n);return Math.ceil(r)},vi=gi.durationDampening.accelerateAt,Ci=gi.durationDampening.stopDampeningAt,xi=function(e,t){var n=t,r=Ci,i=Date.now()-n;if(i>=Ci)return e;if(i<vi)return yi;var o=Oi({startOfRange:vi,endOfRange:r,current:i}),a=e*gi.ease(o);return Math.ceil(a)},Ei=function(e){var t=e.distanceToEdge,n=e.thresholds,r=e.dragStartTime,i=e.shouldUseTimeDampening,o=ji(t,n);return 0===o?0:i?Math.max(xi(o,r),yi):o},Ti=function(e){var t=e.container,n=e.distanceToEdges,r=e.dragStartTime,i=e.axis,o=e.shouldUseTimeDampening,a=bi(t,i);return n[i.end]<n[i.start]?Ei({distanceToEdge:n[i.end],thresholds:a,dragStartTime:r,shouldUseTimeDampening:o}):-1*Ei({distanceToEdge:n[i.start],thresholds:a,dragStartTime:r,shouldUseTimeDampening:o})},Si=function(e){var t=e.container,n=e.subject,r=e.proposedScroll,i=n.height>t.height,o=n.width>t.width;return o||i?o&&i?null:{x:o?0:r.x,y:i?0:r.y}:r},Ii=Ne((function(e){return 0===e?0:e})),wi=function(e){var t=e.dragStartTime,n=e.container,r=e.subject,i=e.center,o=e.shouldUseTimeDampening,a={top:i.y-n.top,right:n.right-i.x,bottom:n.bottom-i.y,left:i.x-n.left},s=Ti({container:n,distanceToEdges:a,dragStartTime:t,axis:st,shouldUseTimeDampening:o}),c=Ti({container:n,distanceToEdges:a,dragStartTime:t,axis:ct,shouldUseTimeDampening:o}),l=Ii({x:c,y:s});if(Te(l,Ce))return null;var u=Si({container:n,subject:r,proposedScroll:l});return u?Te(u,Ce)?null:u:null},_i=Ne((function(e){return 0===e?0:e>0?1:-1})),Ni=(ci=function(e,t){return e<0?e:e>t?e-t:0},function(e){var t=e.current,n=e.max,r=e.change,i=xe(t,r),o={x:ci(i.x,n.x),y:ci(i.y,n.y)};return Te(o,Ce)?null:o}),Ai=function(e){var t=e.max,n=e.current,r=e.change,i={x:Math.max(n.x,t.x),y:Math.max(n.y,t.y)},o=_i(r),a=Ni({max:i,current:n,change:o});return!a||(0!==o.x&&0===a.x||0!==o.y&&0===a.y)},Di=function(e,t){return Ai({current:e.scroll.current,max:e.scroll.max,change:t})},ki=function(e,t){if(!Di(e,t))return null;var n=e.scroll.max,r=e.scroll.current;return Ni({current:r,max:n,change:t})},Pi=function(e,t){var n=e.frame;return!!n&&Ai({current:n.scroll.current,max:n.scroll.max,change:t})},Ri=function(e,t){var n=e.frame;return n&&Pi(e,t)?Ni({current:n.scroll.current,max:n.scroll.max,change:t}):null},Fi=function(e){var t=e.viewport,n=e.subject,r=e.center,i=e.dragStartTime,o=e.shouldUseTimeDampening,a=wi({dragStartTime:i,container:t.frame,subject:n,center:r,shouldUseTimeDampening:o});return a&&Di(t,a)?a:null},Li=function(e){var t=e.droppable,n=e.subject,r=e.center,i=e.dragStartTime,o=e.shouldUseTimeDampening,a=t.frame;if(!a)return null;var s=wi({dragStartTime:i,container:a.pageMarginBox,subject:n,center:r,shouldUseTimeDampening:o});return s&&Pi(t,s)?s:null},Mi=function(e){var t=e.state,n=e.dragStartTime,r=e.shouldUseTimeDampening,i=e.scrollWindow,o=e.scrollDroppable,a=t.current.page.borderBoxCenter,s=t.dimensions.draggables[t.critical.draggable.id].page.marginBox;if(t.isWindowScrollAllowed){var c=t.viewport,l=Fi({dragStartTime:n,viewport:c,subject:s,center:a,shouldUseTimeDampening:r});if(l){i(l);return}}var u=fi({center:a,destination:an(t.impact),droppables:t.dimensions.droppables});if(u){var d=Li({dragStartTime:n,droppable:u,subject:s,center:a,shouldUseTimeDampening:r});d&&o(u.descriptor.id,d)}},Bi=function(e){var t=e.scrollWindow,n=e.scrollDroppable,r=Z(t),i=Z(n),o=null,a=function(e){o||fe(!1);var t=o,n=t.shouldUseTimeDampening,a=t.dragStartTime;Mi({state:e,scrollWindow:r,scrollDroppable:i,dragStartTime:a,shouldUseTimeDampening:n})};return{start:function(e){kn();o&&fe(!1);var t=Date.now(),n=!1,r=function(){n=!0};Mi({state:e,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:r,scrollDroppable:r});o={dragStartTime:t,shouldUseTimeDampening:n};Pn();n&&a(e)},stop:function(){if(o){r.cancel();i.cancel();o=null}},scroll:a}},Ui=function(e){var t=e.move,n=e.scrollDroppable,r=e.scrollWindow,i=function(e,n){var r=xe(e.current.client.selection,n);t({client:r})},o=function(e,t){if(!Pi(e,t))return t;var r=Ri(e,t);if(!r){n(e.descriptor.id,t);return null}var i=Ee(t,r);n(e.descriptor.id,i);return Ee(t,i)},a=function(e,t,n){if(!e)return n;if(!Di(t,n))return n;var i=ki(t,n);if(!i){r(n);return null}var o=Ee(n,i);r(o);return Ee(n,o)};return function(e){var t=e.scrollJumpRequest;if(t){var n=an(e.impact);n||fe(!1);var r=o(e.dimensions.droppables[n],t);if(r){var s=e.viewport,c=a(e.isWindowScrollAllowed,s,r);c&&i(e,c)}}}},Vi=function(e){var t=e.scrollDroppable,n=e.scrollWindow,r=e.move,i=Bi({scrollWindow:n,scrollDroppable:t}),o=Ui({move:r,scrollWindow:n,scrollDroppable:t});return{scroll:function(e){"DRAGGING"===e.phase&&("FLUID"!==e.movementMode?e.scrollJumpRequest&&o(e):i.scroll(e))},start:i.start,stop:i.stop}},Hi="data-rbd",qi={base:li=Hi+"-drag-handle",draggableId:li+"-draggable-id",contextId:li+"-context-id"},Gi=function(){var e=Hi+"-draggable";return{base:e,contextId:e+"-context-id",id:e+"-id"}}(),Wi=function(){var e=Hi+"-droppable";return{base:e,contextId:e+"-context-id",id:e+"-id"}}(),zi={contextId:Hi+"-scroll-container-context-id"},$i=function(e){return function(t){return"["+t+'="'+e+'"]'}},Ki=function(e,t){return e.map((function(e){var n=e.styles[t];return n?e.selector+" { "+n+" }":""})).join(" ")},Yi="pointer-events: none;",Xi=function(e){var t,n,r=$i(e),i=(t="\n      cursor: -webkit-grab;\n      cursor: grab;\n    ",{selector:r(qi.contextId),styles:{always:"\n          -webkit-touch-callout: none;\n          -webkit-tap-highlight-color: rgba(0,0,0,0);\n          touch-action: manipulation;\n        ",resting:t,dragging:Yi,dropAnimating:t}}),o=[(n="\n      transition: "+Or.outOfTheWay+";\n    ",{selector:r(Gi.contextId),styles:{dragging:n,dropAnimating:n,userCancel:n}}),i,{selector:r(Wi.contextId),styles:{always:"overflow-anchor: none;"}},{selector:"body",styles:{dragging:"\n        cursor: grabbing;\n        cursor: -webkit-grabbing;\n        user-select: none;\n        -webkit-user-select: none;\n        -moz-user-select: none;\n        -ms-user-select: none;\n        overflow-anchor: none;\n      "}}];return{always:Ki(o,"always"),resting:Ki(o,"resting"),dragging:Ki(o,"dragging"),dropAnimating:Ki(o,"dropAnimating"),userCancel:Ki(o,"userCancel")}},Ji="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?i.useLayoutEffect:i.useEffect,Qi=function(){var e=document.querySelector("head");e||fe(!1);return e},Zi=function(e){var t=document.createElement("style");e&&t.setAttribute("nonce",e);t.type="text/css";return t};function eo(e,t){var n=D((function(){return Xi(e)}),[e]),r=Object(i.useRef)(null),o=Object(i.useRef)(null),a=k(Q((function(e){var t=o.current;t||fe(!1);t.textContent=e})),[]),s=k((function(e){var t=r.current;t||fe(!1);t.textContent=e}),[]);Ji((function(){(r.current||o.current)&&fe(!1);var i=Zi(t),c=Zi(t);r.current=i;o.current=c;i.setAttribute(Hi+"-always",e);c.setAttribute(Hi+"-dynamic",e);Qi().appendChild(i);Qi().appendChild(c);s(n.always);a(n.resting);return function(){var e=function(e){var t=e.current;t||fe(!1);Qi().removeChild(t);e.current=null};e(r);e(o)}}),[t,s,a,n.always,n.resting,e]);var c=k((function(){return a(n.dragging)}),[a,n.dragging]),l=k((function(e){a("DROP"!==e?n.userCancel:n.dropAnimating)}),[a,n.dropAnimating,n.userCancel]),u=k((function(){o.current&&a(n.resting)}),[a,n.resting]);return D((function(){return{dragging:c,dropping:l,resting:u}}),[c,l,u])}var to=function(e){return e&&e.ownerDocument?e.ownerDocument.defaultView:window};function no(e){return e instanceof to(e).HTMLElement}function ro(e,t){var n="["+qi.contextId+'="'+e+'"]',r=Ge(document.querySelectorAll(n));if(!r.length)return null;var i=qe(r,(function(e){return e.getAttribute(qi.draggableId)===t}));return i&&no(i)?i:null}function io(e){var t=Object(i.useRef)({}),n=Object(i.useRef)(null),r=Object(i.useRef)(null),o=Object(i.useRef)(!1),a=k((function(e,n){var r={id:e,focus:n};t.current[e]=r;return function(){var n=t.current;n[e]!==r&&delete n[e]}}),[]),s=k((function(t){var n=ro(e,t);n&&n!==document.activeElement&&n.focus()}),[e]),c=k((function(e,t){n.current===e&&(n.current=t)}),[]),l=k((function(){r.current||o.current&&(r.current=requestAnimationFrame((function(){r.current=null;var e=n.current;e&&s(e)})))}),[s]),u=k((function(e){n.current=null;var t=document.activeElement;t&&t.getAttribute(qi.draggableId)===e&&(n.current=e)}),[]);Ji((function(){o.current=!0;return function(){o.current=!1;var e=r.current;e&&cancelAnimationFrame(e)}}),[]);return D((function(){return{register:a,tryRecordFocus:u,tryRestoreFocusRecorded:l,tryShiftRecord:c}}),[a,u,l,c])}function oo(){var e={draggables:{},droppables:{}},t=[];function n(e){t.push(e);return function(){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}}function r(e){t.length&&t.forEach((function(t){return t(e)}))}function i(t){return e.draggables[t]||null}function o(e){var t=i(e);t||fe(!1);return t}function a(t){return e.droppables[t]||null}function s(e){var t=a(e);t||fe(!1);return t}function c(){e.draggables={};e.droppables={};t.length=0}return{draggable:{register:function(t){e.draggables[t.descriptor.id]=t;r({type:"ADDITION",value:t})},update:function(t,n){var r=e.draggables[n.descriptor.id];if(r&&r.uniqueId===t.uniqueId){delete e.draggables[n.descriptor.id];e.draggables[t.descriptor.id]=t}},unregister:function(t){var n=t.descriptor.id,o=i(n);if(o&&t.uniqueId===o.uniqueId){delete e.draggables[n];r({type:"REMOVAL",value:t})}},getById:o,findById:i,exists:function(e){return Boolean(i(e))},getAllByType:function(t){return Ve(e.draggables).filter((function(e){return e.descriptor.type===t}))}},droppable:{register:function(t){e.droppables[t.descriptor.id]=t},unregister:function(t){var n=a(t.descriptor.id);n&&t.uniqueId===n.uniqueId&&delete e.droppables[t.descriptor.id]},getById:s,findById:a,exists:function(e){return Boolean(a(e))},getAllByType:function(t){return Ve(e.droppables).filter((function(e){return e.descriptor.type===t}))}},subscribe:n,clean:c}}function ao(){var e=D(oo,[]);Object(i.useEffect)((function(){return function(){requestAnimationFrame(e.clean)}}),[e]);return e}var so=o.a.createContext(null),co=function(){var e=document.body;e||fe(!1);return e},lo={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"},uo=function(e){return"rbd-announcement-"+e};function po(e){var t=D((function(){return uo(e)}),[e]),n=Object(i.useRef)(null);Object(i.useEffect)((function(){var e=document.createElement("div");n.current=e;e.id=t;e.setAttribute("aria-live","assertive");e.setAttribute("aria-atomic","true");w(e.style,lo);co().appendChild(e);return function(){setTimeout((function(){var t=co();t.contains(e)&&t.removeChild(e);e===n.current&&(n.current=null)}))}}),[t]);return k((function(e){var t=n.current;t&&(t.textContent=e)}),[])}var ho=0,mo={separator:"::"};function fo(e,t){void 0===t&&(t=mo);return D((function(){return""+e+t.separator+ho++}),[t.separator,e])}function go(e){return"rbd-hidden-text-"+e.contextId+"-"+e.uniqueId}function bo(e){var t=e.contextId,n=e.text,r=fo("hidden-text",{separator:"-"}),o=D((function(){return go({contextId:t,uniqueId:r})}),[r,t]);Object(i.useEffect)((function(){var e=document.createElement("div");e.id=o;e.textContent=n;e.style.display="none";co().appendChild(e);return function(){var t=co();t.contains(e)&&t.removeChild(e)}}),[o,n]);return o}var Oo=o.a.createContext(null),yo={react:"^16.8.5 || ^17.0.0","react-dom":"^16.8.5 || ^17.0.0"},jo=/(\d+)\.(\d+)\.(\d+)/,vo=function(e){var t=jo.exec(e);null==t&&fe(!1);return{major:Number(t[1]),minor:Number(t[2]),patch:Number(t[3]),raw:e}},Co=function(e,t){return t.major>e.major||!(t.major<e.major)&&(t.minor>e.minor||!(t.minor<e.minor)&&t.patch>=e.patch)},xo=function(e,t){var n=vo(e),r=vo(t);Co(n,r)},Eo=function(e){var t=e.doctype;if(t){t.name.toLowerCase();t.publicId}};function To(e){0}function So(e,t){To((function(){Object(i.useEffect)((function(){try{e()}catch(e){ce("\n          A setup problem was encountered.\n\n          > "+e.message+"\n        ")}}),t)}))}function Io(){So((function(){xo(yo.react,o.a.version);Eo(document)}),[])}function wo(e){var t=Object(i.useRef)(e);Object(i.useEffect)((function(){t.current=e}));return t}function _o(){var e=null;function t(){return Boolean(e)}function n(t){return t===e}function r(t){e&&fe(!1);var n={abandon:t};e=n;return n}function i(){e||fe(!1);e=null}function o(){if(e){e.abandon();i()}}return{isClaimed:t,isActive:n,claim:r,release:i,tryAbandon:o}}var No,Ao=9,Do=27,ko=32,Po=33,Ro=34,Fo=35,Lo=36,Mo=37,Bo=38,Uo=39,Vo=40,Ho=((No={})[13]=!0,No[Ao]=!0,No),qo=function(e){Ho[e.keyCode]&&e.preventDefault()},Go=function(){var e="visibilitychange";return"undefined"==typeof document?e:qe([e,"ms"+e,"webkit"+e,"moz"+e,"o"+e],(function(e){return"on"+e in document}))||e}(),Wo=0,zo=5;function $o(e,t){return Math.abs(t.x-e.x)>=zo||Math.abs(t.y-e.y)>=zo}var Ko,Yo={type:"IDLE"};function Xo(e){var t=e.cancel,n=e.completed,r=e.getPhase,i=e.setPhase;return[{eventName:"mousemove",fn:function(e){var t=e.button,n=e.clientX,o=e.clientY;if(t===Wo){var a={x:n,y:o},s=r();if("DRAGGING"!==s.type){"PENDING"!==s.type&&fe(!1);if($o(s.point,a)){e.preventDefault();var c=s.actions.fluidLift(a);i({type:"DRAGGING",actions:c})}}else{e.preventDefault();s.actions.move(a)}}}},{eventName:"mouseup",fn:function(e){var i=r();if("DRAGGING"===i.type){e.preventDefault();i.actions.drop({shouldBlockNextClick:!0});n()}else t()}},{eventName:"mousedown",fn:function(e){"DRAGGING"===r().type&&e.preventDefault();t()}},{eventName:"keydown",fn:function(e){if("PENDING"!==r().type)if(e.keyCode!==Do)qo(e);else{e.preventDefault();t()}else t()}},{eventName:"resize",fn:t},{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(){"PENDING"===r().type&&t()}},{eventName:"webkitmouseforcedown",fn:function(e){var n=r();"IDLE"===n.type&&fe(!1);n.actions.shouldRespectForcePress()?t():e.preventDefault()}},{eventName:Go,fn:t}]}function Jo(e){var t=Object(i.useRef)(Yo),n=Object(i.useRef)(le),r=D((function(){return{eventName:"mousedown",fn:function(t){if(!t.defaultPrevented&&t.button===Wo&&!(t.ctrlKey||t.metaKey||t.shiftKey||t.altKey)){var r=e.findClosestDraggableId(t);if(r){var i=e.tryGetLock(r,s,{sourceEvent:t});if(i){t.preventDefault();var o={x:t.clientX,y:t.clientY};n.current();u(i,o)}}}}}}),[e]),o=D((function(){return{eventName:"webkitmouseforcewillbegin",fn:function(t){if(!t.defaultPrevented){var n=e.findClosestDraggableId(t);if(n){var r=e.findOptionsForDraggable(n);r&&(r.shouldRespectForcePress||e.canGetLock(n)&&t.preventDefault())}}}}}),[e]),a=k((function(){var e={passive:!1,capture:!0};n.current=de(window,[o,r],e)}),[o,r]),s=k((function(){if("IDLE"!==t.current.type){t.current=Yo;n.current();a()}}),[a]),c=k((function(){var e=t.current;s();"DRAGGING"===e.type&&e.actions.cancel({shouldBlockNextClick:!0});"PENDING"===e.type&&e.actions.abort()}),[s]),l=k((function(){var e={capture:!0,passive:!1},r=Xo({cancel:c,completed:s,getPhase:function(){return t.current},setPhase:function(e){t.current=e}});n.current=de(window,r,e)}),[c,s]),u=k((function(e,n){"IDLE"!==t.current.type&&fe(!1);t.current={type:"PENDING",point:n,actions:e};l()}),[l]);Ji((function(){a();return function(){n.current()}}),[a])}function Qo(){}var Zo=((Ko={})[Ro]=!0,Ko[Po]=!0,Ko[Lo]=!0,Ko[Fo]=!0,Ko);function ea(e,t){function n(){t();e.cancel()}function r(){t();e.drop()}return[{eventName:"keydown",fn:function(t){if(t.keyCode!==Do)if(t.keyCode!==ko)if(t.keyCode!==Vo)if(t.keyCode!==Bo)if(t.keyCode!==Uo)if(t.keyCode!==Mo)Zo[t.keyCode]?t.preventDefault():qo(t);else{t.preventDefault();e.moveLeft()}else{t.preventDefault();e.moveRight()}else{t.preventDefault();e.moveUp()}else{t.preventDefault();e.moveDown()}else{t.preventDefault();r()}else{t.preventDefault();n()}}},{eventName:"mousedown",fn:n},{eventName:"mouseup",fn:n},{eventName:"click",fn:n},{eventName:"touchstart",fn:n},{eventName:"resize",fn:n},{eventName:"wheel",fn:n,options:{passive:!0}},{eventName:Go,fn:n}]}function ta(e){var t=Object(i.useRef)(Qo),n=D((function(){return{eventName:"keydown",fn:function(n){if(!n.defaultPrevented&&n.keyCode===ko){var i=e.findClosestDraggableId(n);if(i){var o=e.tryGetLock(i,c,{sourceEvent:n});if(o){n.preventDefault();var a=!0,s=o.snapLift();t.current();t.current=de(window,ea(s,c),{capture:!0,passive:!1})}}}function c(){a||fe(!1);a=!1;t.current();r()}}}}),[e]),r=k((function(){var e={passive:!1,capture:!0};t.current=de(window,[n],e)}),[n]);Ji((function(){r();return function(){t.current()}}),[r])}var na={type:"IDLE"},ra=120,ia=.15;function oa(e){var t=e.cancel,n=e.getPhase;return[{eventName:"orientationchange",fn:t},{eventName:"resize",fn:t},{eventName:"contextmenu",fn:function(e){e.preventDefault()}},{eventName:"keydown",fn:function(e){if("DRAGGING"===n().type){e.keyCode===Do&&e.preventDefault();t()}else t()}},{eventName:Go,fn:t}]}function aa(e){var t=e.cancel,n=e.completed,r=e.getPhase;return[{eventName:"touchmove",options:{capture:!1},fn:function(e){var n=r();if("DRAGGING"===n.type){n.hasMoved=!0;var i=e.touches[0],o={x:i.clientX,y:i.clientY};e.preventDefault();n.actions.move(o)}else t()}},{eventName:"touchend",fn:function(e){var i=r();if("DRAGGING"===i.type){e.preventDefault();i.actions.drop({shouldBlockNextClick:!0});n()}else t()}},{eventName:"touchcancel",fn:function(e){if("DRAGGING"===r().type){e.preventDefault();t()}else t()}},{eventName:"touchforcechange",fn:function(e){var n=r();"IDLE"===n.type&&fe(!1);var i=e.touches[0];if(i){if(i.force>=ia){var o=n.actions.shouldRespectForcePress();if("PENDING"!==n.type)if(o){if(n.hasMoved){e.preventDefault();return}t()}else e.preventDefault();else o&&t()}}}},{eventName:Go,fn:t}]}function sa(e){var t=Object(i.useRef)(na),n=Object(i.useRef)(le),r=k((function(){return t.current}),[]),o=k((function(e){t.current=e}),[]),a=D((function(){return{eventName:"touchstart",fn:function(t){if(!t.defaultPrevented){var r=e.findClosestDraggableId(t);if(r){var i=e.tryGetLock(r,c,{sourceEvent:t});if(i){var o=t.touches[0],a={x:o.clientX,y:o.clientY};n.current();p(i,a)}}}}}}),[e]),s=k((function(){var e={capture:!0,passive:!1};n.current=de(window,[a],e)}),[a]),c=k((function(){var e=t.current;if("IDLE"!==e.type){"PENDING"===e.type&&clearTimeout(e.longPressTimerId);o(na);n.current();s()}}),[s,o]),l=k((function(){var e=t.current;c();"DRAGGING"===e.type&&e.actions.cancel({shouldBlockNextClick:!0});"PENDING"===e.type&&e.actions.abort()}),[c]),u=k((function(){var e={capture:!0,passive:!1},t={cancel:l,completed:c,getPhase:r},i=de(window,aa(t),e),o=de(window,oa(t),e);n.current=function(){i();o()}}),[l,r,c]),d=k((function(){var e=r();"PENDING"!==e.type&&fe(!1);var t=e.actions.fluidLift(e.point);o({type:"DRAGGING",actions:t,hasMoved:!1})}),[r,o]),p=k((function(e,t){"IDLE"!==r().type&&fe(!1);var n=setTimeout(d,ra);o({type:"PENDING",point:t,actions:e,longPressTimerId:n});u()}),[u,r,o,d]);Ji((function(){s();return function(){n.current();var e=r();if("PENDING"===e.type){clearTimeout(e.longPressTimerId);o(na)}}}),[r,s,o]);Ji((function(){return de(window,[{eventName:"touchmove",fn:function(){},options:{capture:!1,passive:!1}}])}),[])}function ca(e){To((function(){var t=wo(e);So((function(){t.current.length!==e.length&&fe(!1)}))}))}var la={input:!0,button:!0,textarea:!0,select:!0,option:!0,optgroup:!0,video:!0,audio:!0};function ua(e,t){if(null==t)return!1;if(Boolean(la[t.tagName.toLowerCase()]))return!0;var n=t.getAttribute("contenteditable");return"true"===n||""===n||t!==e&&ua(e,t.parentElement)}function da(e,t){var n=t.target;return!!no(n)&&ua(e,n)}var pa=function(e){return L(e.getBoundingClientRect()).center};function ha(e){return e instanceof to(e).Element}var ma=function(){var e="matches";return"undefined"==typeof document?e:qe([e,"msMatchesSelector","webkitMatchesSelector"],(function(e){return e in Element.prototype}))||e}();function fa(e,t){return null==e?null:e[ma](t)?e:fa(e.parentElement,t)}function ga(e,t){return e.closest?e.closest(t):fa(e,t)}function ba(e){return"["+qi.contextId+'="'+e+'"]'}function Oa(e,t){var n=t.target;if(!ha(n))return null;var r=ga(n,ba(e));return r&&no(r)?r:null}function ya(e,t){var n=Oa(e,t);return n?n.getAttribute(qi.draggableId):null}function ja(e,t){var n="["+Gi.contextId+'="'+e+'"]',r=qe(Ge(document.querySelectorAll(n)),(function(e){return e.getAttribute(Gi.id)===t}));return r&&no(r)?r:null}function va(e){e.preventDefault()}function Ca(e){var t=e.expected,n=e.phase,r=e.isLockActive;e.shouldWarn;return!!r()&&t===n}function xa(e){var t=e.lockAPI,n=e.store,r=e.registry,i=e.draggableId;if(t.isClaimed())return!1;var o=r.draggable.findById(i);return!!o&&(!!o.options.isEnabled&&!!di(n.getState(),i))}function Ea(e){var t=e.lockAPI,n=e.contextId,r=e.store,i=e.registry,o=e.draggableId,a=e.forceSensorStop,s=e.sourceEvent;if(!xa({lockAPI:t,store:r,registry:i,draggableId:o}))return null;var c=i.draggable.getById(o),l=ja(n,c.descriptor.id);if(!l)return null;if(s&&!c.options.canDragInteractiveElements&&da(l,s))return null;var u=t.claim(a||le),d="PRE_DRAG";function p(){return c.options.shouldRespectForcePress}function h(){return t.isActive(u)}function m(e,t){Ca({expected:e,phase:d,isLockActive:h,shouldWarn:!0})&&r.dispatch(t())}var f=m.bind(null,"DRAGGING");function g(e){function n(){t.release();d="COMPLETED"}if("PRE_DRAG"!==d){n();"PRE_DRAG"!==d&&fe(!1)}r.dispatch(Wn(e.liftActionArgs));d="DRAGGING";function i(t,i){void 0===i&&(i={shouldBlockNextClick:!1});e.cleanup();if(i.shouldBlockNextClick){var o=de(window,[{eventName:"click",fn:va,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(o)}n();r.dispatch(cr({reason:t}))}return w({isActive:function(){return Ca({expected:"DRAGGING",phase:d,isLockActive:h,shouldWarn:!1})},shouldRespectForcePress:p,drop:function(e){return i("DROP",e)},cancel:function(e){return i("CANCEL",e)}},e.actions)}function b(e){var t=Z((function(e){f((function(){return Qn({client:e})}))})),n=g({liftActionArgs:{id:o,clientSelection:e,movementMode:"FLUID"},cleanup:function(){return t.cancel()},actions:{move:t}});return w({},n,{move:t})}function O(){var e={moveUp:function(){return f(tr)},moveRight:function(){return f(rr)},moveDown:function(){return f(nr)},moveLeft:function(){return f(ir)}};return g({liftActionArgs:{id:o,clientSelection:pa(l),movementMode:"SNAP"},cleanup:le,actions:e})}function y(){Ca({expected:"PRE_DRAG",phase:d,isLockActive:h,shouldWarn:!0})&&t.release()}return{isActive:function(){return Ca({expected:"PRE_DRAG",phase:d,isLockActive:h,shouldWarn:!1})},shouldRespectForcePress:p,fluidLift:b,snapLift:O,abort:y}}var Ta=[Jo,ta,sa];function Sa(e){var t=e.contextId,n=e.store,r=e.registry,o=e.customSensors,a=e.enableDefaultSensors,s=[].concat(a?Ta:[],o||[]),c=Object(i.useState)((function(){return _o()}))[0],l=k((function(e,t){e.isDragging&&!t.isDragging&&c.tryAbandon()}),[c]);Ji((function(){var e=n.getState();return n.subscribe((function(){var t=n.getState();l(e,t);e=t}))}),[c,n,l]);Ji((function(){return c.tryAbandon}),[c.tryAbandon]);var u=k((function(e){return xa({lockAPI:c,registry:r,store:n,draggableId:e})}),[c,r,n]),d=k((function(e,i,o){return Ea({lockAPI:c,registry:r,contextId:t,store:n,draggableId:e,forceSensorStop:i,sourceEvent:o&&o.sourceEvent?o.sourceEvent:null})}),[t,c,r,n]),p=k((function(e){return ya(t,e)}),[t]),h=k((function(e){var t=r.draggable.findById(e);return t?t.options:null}),[r.draggable]),m=k((function(){if(c.isClaimed()){c.tryAbandon();"IDLE"!==n.getState().phase&&n.dispatch(or())}}),[c,n]),f=k(c.isClaimed,[c]),g=D((function(){return{canGetLock:u,tryGetLock:d,findClosestDraggableId:p,findOptionsForDraggable:h,tryReleaseLock:m,isLockClaimed:f}}),[u,d,p,h,m,f]);ca(s);for(var b=0;b<s.length;b++)s[b](g)}var Ia=function(e){return{onBeforeCapture:e.onBeforeCapture,onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragEnd:e.onDragEnd,onDragUpdate:e.onDragUpdate}};function wa(e){e.current||fe(!1);return e.current}function _a(e){var t=e.contextId,n=e.setCallbacks,r=e.sensors,s=e.nonce,c=e.dragHandleUsageInstructions,l=Object(i.useRef)(null);Io();var u=wo(e),d=k((function(){return Ia(u.current)}),[u]),p=po(t),h=bo({contextId:t,text:c}),m=eo(t,s),f=k((function(e){wa(l).dispatch(e)}),[]),g=D((function(){return Object(x.bindActionCreators)({publishWhileDragging:$n,updateDroppableScroll:Yn,updateDroppableIsEnabled:Xn,updateDroppableIsCombineEnabled:Jn,collectionStarting:Kn},f)}),[f]),b=ao(),O=D((function(){return ui(b,g)}),[b,g]),y=D((function(){return Vi(w({scrollWindow:pi,scrollDroppable:O.scrollDroppable},Object(x.bindActionCreators)({move:Qn},f)))}),[O.scrollDroppable,f]),j=io(t),v=D((function(){return Zr({announce:p,autoScroller:y,dimensionMarshal:O,focusMarshal:j,getResponders:d,styleMarshal:m})}),[p,y,O,j,d,m]);0;l.current=v;var C=k((function(){var e=wa(l);"IDLE"!==e.getState().phase&&e.dispatch(or())}),[]),E=k((function(){var e=wa(l).getState();return e.isDragging||"DROP_ANIMATING"===e.phase}),[]);n(D((function(){return{isDragging:E,tryAbort:C}}),[E,C]));var T=k((function(e){return di(wa(l).getState(),e)}),[]),S=k((function(){return ln(wa(l).getState())}),[]),I=D((function(){return{marshal:O,focus:j,contextId:t,canLift:T,isMovementAllowed:S,dragHandleUsageInstructionsId:h,registry:b}}),[t,O,h,j,T,S,b]);Sa({contextId:t,store:v,registry:b,customSensors:r,enableDefaultSensors:!1!==e.enableDefaultSensors});Object(i.useEffect)((function(){return C}),[C]);return o.a.createElement(Oo.Provider,{value:I},o.a.createElement(a.Provider,{context:so,store:v},e.children))}var Na=0;function Aa(){return D((function(){return""+Na++}),[])}function Da(e){var t=Aa(),n=e.dragHandleUsageInstructions||ve.dragHandleUsageInstructions;return o.a.createElement(ge,null,(function(r){return o.a.createElement(_a,{nonce:e.nonce,contextId:t,setCallbacks:r,dragHandleUsageInstructions:n,enableDefaultSensors:e.enableDefaultSensors,sensors:e.sensors,onBeforeCapture:e.onBeforeCapture,onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragUpdate:e.onDragUpdate,onDragEnd:e.onDragEnd},e.children)}))}var ka=function(e){return function(t){return e===t}},Pa=ka("scroll"),Ra=ka("auto"),Fa=(ka("visible"),function(e,t){return t(e.overflowX)||t(e.overflowY)}),La=function(e){var t=window.getComputedStyle(e),n={overflowX:t.overflowX,overflowY:t.overflowY};return Fa(n,Pa)||Fa(n,Ra)},Ma=function(){return!1},Ba=function e(t){return null==t?null:t===document.body?Ma()?t:null:t===document.documentElement?null:La(t)?t:e(t.parentElement)},Ua=function(e){return{x:e.scrollLeft,y:e.scrollTop}},Va=function e(t){return!!t&&("fixed"===window.getComputedStyle(t).position||e(t.parentElement))},Ha=function(e){return{closestScrollable:Ba(e),isFixedOnPage:Va(e)}},qa=function(e){var t=e.descriptor,n=e.isEnabled,r=e.isCombineEnabled,i=e.isFixedOnPage,o=e.direction,a=e.client,s=e.page,c=e.closest,l=function(){if(!c)return null;var e=c.scrollSize,t=c.client,n=ni({scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,height:t.paddingBox.height,width:t.paddingBox.width});return{pageMarginBox:c.page.marginBox,frameClient:t,scrollSize:e,shouldClipSubject:c.shouldClipSubject,scroll:{initial:c.scroll,current:c.scroll,max:n,diff:{value:Ce,displacement:Ce}}}}(),u="vertical"===o?st:ct;return{descriptor:t,isCombineEnabled:r,isFixedOnPage:i,axis:u,isEnabled:n,client:a,page:s,frame:l,subject:Me({page:s,withPlaceholder:null,axis:u,frame:l})}},Ga=function(e,t){var n=K(e);if(!t)return n;if(e!==t)return n;var r=n.paddingBox.top-t.scrollTop,i=n.paddingBox.left-t.scrollLeft,o=r+t.scrollHeight,a=i+t.scrollWidth,s=M({top:r,right:a,bottom:o,left:i},n.border);return H({borderBox:s,margin:n.margin,border:n.border,padding:n.padding})},Wa=function(e){var t=e.ref,n=e.descriptor,r=e.env,i=e.windowScroll,o=e.direction,a=e.isDropDisabled,s=e.isCombineEnabled,c=e.shouldClipSubject,l=r.closestScrollable,u=Ga(t,l),d=z(u,i),p=function(){if(!l)return null;var e=K(l),t={scrollHeight:l.scrollHeight,scrollWidth:l.scrollWidth};return{client:e,page:z(e,i),scroll:Ua(l),scrollSize:t,shouldClipSubject:c}}();return qa({descriptor:n,isEnabled:!a,isCombineEnabled:s,isFixedOnPage:r.isFixedOnPage,direction:o,client:u,page:d,closest:p})},za={passive:!1},$a={passive:!0},Ka=function(e){return e.shouldPublishImmediately?za:$a};function Ya(e){var t=Object(i.useContext)(e);t||fe(!1);return t}var Xa=function(e){return e&&e.env.closestScrollable||null};function Ja(e){var t=Object(i.useRef)(null),n=Ya(Oo),r=fo("droppable"),o=n.registry,a=n.marshal,s=wo(e),c=D((function(){return{id:e.droppableId,type:e.type,mode:e.mode}}),[e.droppableId,e.mode,e.type]),l=Object(i.useRef)(c),u=D((function(){return Q((function(e,n){t.current||fe(!1);var r={x:e,y:n};a.updateDroppableScroll(c.id,r)}))}),[c.id,a]),d=k((function(){var e=t.current;return e&&e.env.closestScrollable?Ua(e.env.closestScrollable):Ce}),[]),p=k((function(){var e=d();u(e.x,e.y)}),[d,u]),h=D((function(){return Z(p)}),[p]),m=k((function(){var e=t.current,n=Xa(e);e&&n||fe(!1);e.scrollOptions.shouldPublishImmediately?p():h()}),[h,p]),f=k((function(e,r){t.current&&fe(!1);var i=s.current,o=i.getDroppableRef();o||fe(!1);var a=Ha(o),l={ref:o,descriptor:c,env:a,scrollOptions:r};t.current=l;var u=Wa({ref:o,descriptor:c,env:a,windowScroll:e,direction:i.direction,isDropDisabled:i.isDropDisabled,isCombineEnabled:i.isCombineEnabled,shouldClipSubject:!i.ignoreContainerClipping}),d=a.closestScrollable;if(d){d.setAttribute(zi.contextId,n.contextId);d.addEventListener("scroll",m,Ka(l.scrollOptions));0}return u}),[n.contextId,c,m,s]),g=k((function(){var e=t.current,n=Xa(e);e&&n||fe(!1);return Ua(n)}),[]),b=k((function(){var e=t.current;e||fe(!1);var n=Xa(e);t.current=null;if(n){h.cancel();n.removeAttribute(zi.contextId);n.removeEventListener("scroll",m,Ka(e.scrollOptions))}}),[m,h]),O=k((function(e){var n=t.current;n||fe(!1);var r=Xa(n);r||fe(!1);r.scrollTop+=e.y;r.scrollLeft+=e.x}),[]),y=D((function(){return{getDimensionAndWatchScroll:f,getScrollWhileDragging:g,dragStopped:b,scroll:O}}),[b,f,g,O]),j=D((function(){return{uniqueId:r,descriptor:c,callbacks:y}}),[y,c,r]);Ji((function(){l.current=j.descriptor;o.droppable.register(j);return function(){t.current&&b();o.droppable.unregister(j)}}),[y,c,b,j,a,o.droppable]);Ji((function(){t.current&&a.updateDroppableIsEnabled(l.current.id,!e.isDropDisabled)}),[e.isDropDisabled,a]);Ji((function(){t.current&&a.updateDroppableIsCombineEnabled(l.current.id,e.isCombineEnabled)}),[e.isCombineEnabled,a])}function Qa(){}var Za={width:0,height:0,margin:Pe},es=function(e){var t=e.isAnimatingOpenOnMount,n=e.placeholder,r=e.animate;return t||"close"===r?Za:{height:n.client.borderBox.height,width:n.client.borderBox.width,margin:n.client.margin}},ts=function(e){var t=e.isAnimatingOpenOnMount,n=e.placeholder,r=e.animate,i=es({isAnimatingOpenOnMount:t,placeholder:n,animate:r});return{display:n.display,boxSizing:"border-box",width:i.width,height:i.height,marginTop:i.margin.top,marginRight:i.margin.right,marginBottom:i.margin.bottom,marginLeft:i.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:"none"!==r?Or.placeholder:null}};function ns(e){var t=Object(i.useRef)(null),n=k((function(){if(t.current){clearTimeout(t.current);t.current=null}}),[]),r=e.animate,a=e.onTransitionEnd,s=e.onClose,c=e.contextId,l=Object(i.useState)("open"===e.animate),u=l[0],d=l[1];Object(i.useEffect)((function(){if(!u)return Qa;if("open"!==r){n();d(!1);return Qa}if(t.current)return Qa;t.current=setTimeout((function(){t.current=null;d(!1)}));return n}),[r,u,n]);var p=k((function(e){if("height"===e.propertyName){a();"close"===r&&s()}}),[r,s,a]),h=ts({isAnimatingOpenOnMount:u,animate:e.animate,placeholder:e.placeholder});return o.a.createElement(e.placeholder.tagName,{style:h,"data-rbd-placeholder-context-id":c,onTransitionEnd:p,ref:e.innerRef})}var rs=o.a.memo(ns),is=o.a.createContext(null);function os(e){e&&no(e)||fe(!1)}function as(e){return"boolean"==typeof e}function ss(e,t){t.forEach((function(t){return t(e)}))}var cs=[function(e){var t=e.props;t.droppableId||fe(!1);"string"!=typeof t.droppableId&&fe(!1)},function(e){var t=e.props;as(t.isDropDisabled)||fe(!1);as(t.isCombineEnabled)||fe(!1);as(t.ignoreContainerClipping)||fe(!1)},function(e){os((0,e.getDroppableRef)())}],ls=[function(e){var t=e.props,n=e.getPlaceholderRef;if(t.placeholder)n()}],us=[function(e){e.props.renderClone||fe(!1)},function(e){(0,e.getPlaceholderRef)()&&fe(!1)}];function ds(e){So((function(){ss(e,cs);"standard"===e.props.mode&&ss(e,ls);"virtual"===e.props.mode&&ss(e,us)}))}var ps=function(e){I(t,e);function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];(t=e.call.apply(e,[this].concat(r))||this).state={isVisible:Boolean(t.props.on),data:t.props.on,animate:t.props.shouldAnimate&&t.props.on?"open":"none"};t.onClose=function(){"close"===t.state.animate&&t.setState({isVisible:!1})};return t}t.getDerivedStateFromProps=function(e,t){return e.shouldAnimate?e.on?{isVisible:!0,data:e.on,animate:"open"}:t.isVisible?{isVisible:!0,data:t.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:Boolean(e.on),data:e.on,animate:"none"}};t.prototype.render=function(){if(!this.state.isVisible)return null;var e={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(e)};return t}(o.a.PureComponent),hs={dragging:5e3,dropAnimating:4500},ms=function(e,t){return t?Or.drop(t.duration):e?Or.snap:Or.fluid},fs=function(e,t){return e?t?fr.opacity.drop:fr.opacity.combining:null},gs=function(e){return null!=e.forceShouldAnimate?e.forceShouldAnimate:"SNAP"===e.mode};function bs(e){var t=e.dimension.client,n=e.offset,r=e.combineWith,i=e.dropping,o=Boolean(r),a=gs(e),s=Boolean(i),c=s?jr.drop(n,o):jr.moveTo(n);return{position:"fixed",top:t.marginBox.top,left:t.marginBox.left,boxSizing:"border-box",width:t.borderBox.width,height:t.borderBox.height,transition:ms(a,i),transform:c,opacity:fs(o,s),zIndex:s?hs.dropAnimating:hs.dragging,pointerEvents:"none"}}function Os(e){return{transform:jr.moveTo(e.offset),transition:e.shouldAnimateDisplacement?null:"none"}}function ys(e){return"DRAGGING"===e.type?bs(e):Os(e)}function js(e,t,n){void 0===n&&(n=Ce);var r=window.getComputedStyle(t),i=t.getBoundingClientRect(),o=$(i,r),a=z(o,n);return{descriptor:e,placeholder:{client:o,tagName:t.tagName.toLowerCase(),display:r.display},displaceBy:{x:o.marginBox.width,y:o.marginBox.height},client:o,page:a}}function vs(e){var t=fo("draggable"),n=e.descriptor,r=e.registry,o=e.getDraggableRef,a=e.canDragInteractiveElements,s=e.shouldRespectForcePress,c=e.isEnabled,l=D((function(){return{canDragInteractiveElements:a,shouldRespectForcePress:s,isEnabled:c}}),[a,c,s]),u=k((function(e){var t=o();t||fe(!1);return js(n,t,e)}),[n,o]),d=D((function(){return{uniqueId:t,descriptor:n,options:l,getDimension:u}}),[n,u,l,t]),p=Object(i.useRef)(d),h=Object(i.useRef)(!0);Ji((function(){r.draggable.register(p.current);return function(){return r.draggable.unregister(p.current)}}),[r.draggable]);Ji((function(){if(h.current)h.current=!1;else{var e=p.current;p.current=d;r.draggable.update(d,e)}}),[d,r.draggable])}function Cs(e,t,n){So((function(){var r=e.draggableId;r||fe(!1);"string"!=typeof r&&fe(!1);Ue(e.index)||fe(!1);if("DRAGGING"!==e.mapped.type){os(n());e.isEnabled&&(ro(t,r)||fe(!1))}}))}function xs(e){To((function(){var t=Object(i.useRef)(e);So((function(){e!==t.current&&fe(!1)}),[e])}))}function Es(e){e.preventDefault()}function Ts(e){var t=Object(i.useRef)(null),n=k((function(e){t.current=e}),[]),r=k((function(){return t.current}),[]),o=Ya(Oo),a=o.contextId,s=o.dragHandleUsageInstructionsId,c=o.registry,l=Ya(is),u=l.type,d=l.droppableId,p=D((function(){return{id:e.draggableId,index:e.index,type:u,droppableId:d}}),[e.draggableId,e.index,u,d]),h=e.children,m=e.draggableId,f=e.isEnabled,g=e.shouldRespectForcePress,b=e.canDragInteractiveElements,O=e.isClone,y=e.mapped,j=e.dropAnimationFinished;Cs(e,a,r);xs(O);if(!O){vs(D((function(){return{descriptor:p,registry:c,getDraggableRef:r,canDragInteractiveElements:b,shouldRespectForcePress:g,isEnabled:f}}),[p,c,r,b,g,f]))}var v=D((function(){return f?{tabIndex:0,role:"button","aria-describedby":s,"data-rbd-drag-handle-draggable-id":m,"data-rbd-drag-handle-context-id":a,draggable:!1,onDragStart:Es}:null}),[a,s,m,f]),C=k((function(e){"DRAGGING"===y.type&&y.dropping&&"transform"===e.propertyName&&j()}),[j,y]),x=D((function(){var e=ys(y),t="DRAGGING"===y.type&&y.dropping?C:null;return{innerRef:n,draggableProps:{"data-rbd-draggable-context-id":a,"data-rbd-draggable-id":m,style:e,onTransitionEnd:t},dragHandleProps:v}}),[a,v,m,y,C,n]),E=D((function(){return{draggableId:p.id,type:p.type,source:{index:p.index,droppableId:p.droppableId}}}),[p.droppableId,p.id,p.index,p.type]);return h(x,y.snapshot,E)}var Ss=function(e,t){return e===t},Is=function(e){var t=e.combine,n=e.destination;return n?n.droppableId:t?t.droppableId:null},ws=function(e){return e.combine?e.combine.draggableId:null},_s=function(e){return e.at&&"COMBINE"===e.at.type?e.at.combine.draggableId:null};function Ns(){var e=Q((function(e,t){return{x:e,y:t}})),t=Q((function(e,t,n,r,i){return{isDragging:!0,isClone:t,isDropAnimating:Boolean(i),dropAnimation:i,mode:e,draggingOver:n,combineWith:r,combineTargetFor:null}})),n=Q((function(e,n,r,i,o,a,s){return{mapped:{type:"DRAGGING",dropping:null,draggingOver:o,combineWith:a,mode:n,offset:e,dimension:r,forceShouldAnimate:s,snapshot:t(n,i,o,a,null)}}}));return function(r,i){if(r.isDragging){if(r.critical.draggable.id!==i.draggableId)return null;var o=r.current.client.offset,a=r.dimensions.draggables[i.draggableId],s=an(r.impact),c=_s(r.impact),l=r.forceShouldAnimate;return n(e(o.x,o.y),r.movementMode,a,i.isClone,s,c,l)}if("DROP_ANIMATING"===r.phase){var u=r.completed;if(u.result.draggableId!==i.draggableId)return null;var d=i.isClone,p=r.dimensions.draggables[i.draggableId],h=u.result,m=h.mode,f=Is(h),g=ws(h),b={duration:r.dropDuration,curve:mr.drop,moveTo:r.newHomeClientOffset,opacity:g?fr.opacity.drop:null,scale:g?fr.scale.drop:null};return{mapped:{type:"DRAGGING",offset:r.newHomeClientOffset,dimension:p,dropping:b,draggingOver:f,combineWith:g,mode:m,forceShouldAnimate:null,snapshot:t(m,d,f,g,b)}}}return null}}function As(e){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:e,combineWith:null}}var Ds={mapped:{type:"SECONDARY",offset:Ce,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:As(null)}};function ks(){var e=Q((function(e,t){return{x:e,y:t}})),t=Q(As),n=Q((function(e,n,r){void 0===n&&(n=null);return{mapped:{type:"SECONDARY",offset:e,combineTargetFor:n,shouldAnimateDisplacement:r,snapshot:t(n)}}})),r=function(e){return e?n(Ce,e,!0):null},i=function(t,i,o,a){var s=o.displaced.visible[t],c=Boolean(a.inVirtualList&&a.effected[t]),l=Je(o),u=l&&l.draggableId===t?i:null;if(!s){if(!c)return r(u);if(o.displaced.invisible[t])return null;var d=Se(a.displacedBy.point),p=e(d.x,d.y);return n(p,u,!0)}if(c)return r(u);var h=o.displacedBy.point,m=e(h.x,h.y);return n(m,u,s.shouldAnimate)};return function(e,t){if(e.isDragging)return e.critical.draggable.id===t.draggableId?null:i(t.draggableId,e.critical.draggable.id,e.impact,e.afterCritical);if("DROP_ANIMATING"===e.phase){var n=e.completed;return n.result.draggableId===t.draggableId?null:i(t.draggableId,n.result.draggableId,n.impact,n.afterCritical)}return null}}var Ps=function(){var e=Ns(),t=ks();return function(n,r){return e(n,r)||t(n,r)||Ds}},Rs={dropAnimationFinished:ur},Fs=Object(a.connect)(Ps,Rs,null,{context:so,areStatePropsEqual:Ss})(Ts);function Ls(e){return Ya(is).isUsingCloneFor!==e.draggableId||e.isClone?o.a.createElement(Fs,e):null}function Ms(e){var t="boolean"!=typeof e.isDragDisabled||!e.isDragDisabled,n=Boolean(e.disableInteractiveElementBlocking),r=Boolean(e.shouldRespectForcePress);return o.a.createElement(Ls,w({},e,{isClone:!1,isEnabled:t,canDragInteractiveElements:n,shouldRespectForcePress:r}))}function Bs(e){var t=Object(i.useContext)(Oo);t||fe(!1);var n=t.contextId,r=t.isMovementAllowed,a=Object(i.useRef)(null),s=Object(i.useRef)(null),c=e.children,l=e.droppableId,u=e.type,d=e.mode,p=e.direction,h=e.ignoreContainerClipping,m=e.isDropDisabled,f=e.isCombineEnabled,g=e.snapshot,b=e.useClone,O=e.updateViewportMaxScroll,y=e.getContainerForClone,j=k((function(){return a.current}),[]),v=k((function(e){a.current=e}),[]),C=k((function(){return s.current}),[]),x=k((function(e){s.current=e}),[]);ds({props:e,getDroppableRef:j,getPlaceholderRef:C});var E=k((function(){r()&&O({maxScroll:ii()})}),[r,O]);Ja({droppableId:l,type:u,mode:d,direction:p,isDropDisabled:m,isCombineEnabled:f,ignoreContainerClipping:h,getDroppableRef:j});var S=o.a.createElement(ps,{on:e.placeholder,shouldAnimate:e.shouldAnimatePlaceholder},(function(e){var t=e.onClose,r=e.data,i=e.animate;return o.a.createElement(rs,{placeholder:r,onClose:t,innerRef:x,animate:i,contextId:n,onTransitionEnd:E})})),I=D((function(){return{innerRef:v,placeholder:S,droppableProps:{"data-rbd-droppable-id":l,"data-rbd-droppable-context-id":n}}}),[n,l,S,v]),w=b?b.dragging.draggableId:null,_=D((function(){return{droppableId:l,type:u,isUsingCloneFor:w}}),[l,w,u]);function N(){if(!b)return null;var e=b.dragging,t=b.render,n=o.a.createElement(Ls,{draggableId:e.draggableId,index:e.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},(function(n,r){return t(n,r,e)}));return T.a.createPortal(n,y())}return o.a.createElement(is.Provider,{value:_},c(I,g),N())}var Us=function(e,t){return e===t.droppable.type},Vs=function(e,t){return t.draggables[e.draggable.id]},Hs=function(){var e={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},t=w({},e,{shouldAnimatePlaceholder:!1}),n=Q((function(e){return{draggableId:e.id,type:e.type,source:{index:e.index,droppableId:e.droppableId}}})),r=Q((function(r,i,o,a,s,c){var l=s.descriptor.id;if(s.descriptor.droppableId===r){var u=c?{render:c,dragging:n(s.descriptor)}:null,d={isDraggingOver:o,draggingOverWith:o?l:null,draggingFromThisWith:l,isUsingPlaceholder:!0};return{placeholder:s.placeholder,shouldAnimatePlaceholder:!1,snapshot:d,useClone:u}}if(!i)return t;if(!a)return e;var p={isDraggingOver:o,draggingOverWith:l,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:s.placeholder,shouldAnimatePlaceholder:!0,snapshot:p,useClone:null}}));return function(n,i){var o=i.droppableId,a=i.type,s=!i.isDropDisabled,c=i.renderClone;if(n.isDragging){var l=n.critical;if(!Us(a,l))return t;var u=Vs(l,n.dimensions),d=an(n.impact)===o;return r(o,s,d,d,u,c)}if("DROP_ANIMATING"===n.phase){var p=n.completed;if(!Us(a,p.critical))return t;var h=Vs(p.critical,n.dimensions);return r(o,s,Is(p.result)===o,an(p.impact)===o,h,c)}if("IDLE"===n.phase&&n.completed&&!n.shouldFlush){var m=n.completed;if(!Us(a,m.critical))return t;var f=an(m.impact)===o,g=Boolean(m.impact.at&&"COMBINE"===m.impact.at.type),b=m.critical.droppable.id===o;return f?g?e:t:b?e:t}return t}},qs={updateViewportMaxScroll:er};function Gs(){document.body||fe(!1);return document.body}var Ws={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:Gs},zs=Object(a.connect)(Hs,qs,null,{context:so,areStatePropsEqual:Ss})(Bs);zs.defaultProps=Ws;var $s=n(298),Ks=n(343),Ys=n(1089),Xs=n(100),Js=n(45);const Qs=265,Zs=c.a.div.withConfig({displayName:"ReorderableSelect__StyledDropZone",componentId:"sc-1ybmnug-0"})(["display:",";overflow:auto;vertical-align:middle;width:auto;max-width:","px;"],e=>e.isLastZone?"inline-flex":"flex",Qs),ec=c.a.input.withConfig({displayName:"ReorderableSelect__StyledInput",componentId:"sc-1ybmnug-1"})(["width:5px !important;height:100%;box-sizing:content-box !important;"]),tc=c()(Ks.a).withConfig({displayName:"ReorderableSelect__StyledUIClickable",componentId:"sc-1ybmnug-2"})(["align-self:stretch;flex-grow:1;min-height:40px;"]),nc=c.a.div.withConfig({displayName:"ReorderableSelect__StyledArrow",componentId:"sc-1ybmnug-3"})(["display:flex !important;align-self:stretch;align-items:center;.Select-arrow{transform:translateY(2px);}"]);class rc extends i.Component{constructor(e){super(e);this.onDragEnd=this.onDragEnd.bind(this);this.triggerOpen=this.triggerOpen.bind(this);this.formatDropZoneListValues=this.formatDropZoneListValues.bind(this);this.valueSizesMap=new Map;this.state={values:[e.value]}}componentDidMount(){this.formatDropZoneListValues()}shouldComponentUpdate(e,t){return j()(this,e,t)}componentDidUpdate(e,t){const{onFieldChange:n}=this.props,{values:r}=this.state;JSON.stringify(t.values)!==JSON.stringify(r)&&n(r.flat())}formatDropZoneListValues(e=[]){const t=[];let n=0,r=[];(e.length?e:[...this.valueSizesMap.keys()]).forEach(e=>{const i=this.valueSizesMap.get(e);if(!n||n+i<Qs){r.push(e);n+=i}else{t.push(r);n=i;r=[e]}});t.push(r);this.setState({values:t})}triggerOpen(){this.props.onOpenChange(Object($s.a)(!0))}onDragEnd(e){const{destination:t,source:n}=e,{id:r}=this.props;if(!t)return;let i=[...this.state.values];const o=`droppable-${r}--`.length,a=+n.droppableId.substring(o),s=+t.droppableId.substring(o),c=this.state.values[a].slice(0);if(a===s){const[e]=c.splice(n.index,1);c.splice(t.index,0,e);i[a]=c;i=i.flat()}else{const e=this.state.values[s].slice(0),[r]=c.splice(n.index,1);e.splice(t.index,0,r);i[a]=c;i[s]=e;i=i.filter(e=>e.length).flat()}this.formatDropZoneListValues(i)}renderDraggableValues(e,t){const{id:n,optionsCache:r,valueRenderer:i}=this.props;return e.map((e,o)=>{const a=r[e]||{text:e,value:e},s=i(a);return Object(Js.jsx)(Ms,{draggableId:`draggable-${n}--${e}`,index:o,children:r=>Object(Js.jsx)("div",Object.assign({ref:t=>{t&&!this.valueSizesMap.has(e)&&this.valueSizesMap.set(e,t.offsetWidth);r.innerRef(t)}},r.draggableProps,r.dragHandleProps,{style:Object.assign({maxWidth:Qs-8+"px"},r.draggableProps.style),children:Object(Js.jsx)(Ys.a,{className:t===this.state.values.length-1?"m-y-0":"m-bottom-0",closeable:!1,style:{maxWidth:"calc(100% - 8px)"},value:a,children:s},`${n}--${e}`)}))},`draggable-${n}--${e}`)})}renderDragAndDrop(){const{id:e}=this.props;return Object(Js.jsx)(Da,{onDragEnd:this.onDragEnd,children:this.state.values.map((t,n)=>Object(Js.jsx)(zs,{droppableId:`droppable-${e}--${n}`,direction:"horizontal",children:e=>Object(Js.jsx)(Zs,Object.assign({isLastZone:n===this.state.values.length-1,ref:e.innerRef},e.droppableProps,{children:Object(Js.jsxs)(Js.Fragment,{children:[this.renderDraggableValues(t,n),e.placeholder]})}))},`droppable-${e}--${n}`))})}render(){const{className:e,error:t,id:n,readOnly:r,required:i,remainingPropsForAria:o}=this.props,a=C()(e,"private-form__selectplus Select Select--multi private-form__selectplus--multi has-value",t&&"private-form__control--error",r&&"is-readonly");return Object(Js.jsx)("div",Object.assign({},Object(Xs.b)(o),{className:a,"data-collapsed":!0,children:Object(Js.jsxs)("div",{className:"Select-control",style:{height:1===this.state.values.length?"40px":"auto"},children:[Object(Js.jsxs)("span",{className:"Select-multi-value-wrapper",id:`react-select-${n}--value`,style:{width:"auto"},children:[this.renderDragAndDrop(),Object(Js.jsx)("div",{className:"Select-input",style:{display:"inline-block"},children:Object(Js.jsx)(ec,{readOnly:!0,required:i,autoComplete:"off",role:"combobox","aria-expanded":"false","aria-haspopup":"menu","aria-activedescendant":`react-select-${n}--value`,value:""})})]}),Object(Js.jsx)(tc,{onClick:this.triggerOpen}),Object(Js.jsx)(nc,{className:"Select-arrow-zone",onClick:this.triggerOpen,children:Object(Js.jsx)("div",{className:"Select-arrow"})})]})}))}}var ic=n(2793),oc=n(1066),ac=n(176),sc=n(160),cc=n(1043),lc=n(67),uc=n(1152),dc=n.n(uc),pc=n(1153),hc=n.n(pc),mc=n(1154),fc=n.n(mc),gc=n(1155),bc=n.n(gc),Oc=n(1156),yc=n.n(Oc),jc=n(1157),vc=n.n(jc),Cc=n(1158),xc=n.n(Cc),Ec=n(1159),Tc=n.n(Ec),Sc=n(1160),Ic=n.n(Sc),wc=n(1161),_c=n.n(wc),Nc=n(1162),Ac=n.n(Nc),Dc=n(1163),kc=n.n(Dc),Pc=n(1164),Rc=n.n(Pc),Fc=n(1165),Lc=n.n(Fc),Mc=n(1166),Bc=n.n(Mc),Uc=n(1167),Vc=n.n(Uc),Hc=n(1168),qc=n.n(Hc),Gc=n(1169),Wc=n.n(Gc),zc=n(1170),$c=n.n(zc),Kc=n(1171),Yc=n.n(Kc),Xc=n(1172),Jc=n.n(Xc),Qc=n(1173),Zc=n.n(Qc),el=n(1174),tl=n.n(el),nl=n(1175),rl=n.n(nl),il=n(1176),ol=n.n(il),al=n(1177),sl=n.n(al),cl=n(1178),ll=n.n(cl);const ul=e=>"contentUtils.choiceButtonPresets."+e,dl=()=>({expand_icon:{caret:{label:u.a.text(ul("caret.label")),set:"fontawesome-5.14.0",icon:"Caret Down"},plus:{label:u.a.text(ul("plus.label")),set:"fontawesome-5.14.0",icon:"plus"}},layout:{tiles:{label:u.a.text(ul("layoutTiles.label")),image:dc.a,image_alt:u.a.text(ul("layoutTiles.imageAlt"))},minimal:{label:u.a.text(ul("layoutMinimal.label")),image:fc.a,image_alt:u.a.text(ul("layoutMinimal.imageAlt"))},cards:{label:u.a.text(ul("layoutCards.label")),image:hc.a,image_alt:u.a.text(ul("layoutCards.imageAlt"))}},icon_size:{small:{label:u.a.text(ul("iconSizeSmall.label")),image:bc.a,image_alt:u.a.text(ul("iconSizeSmall.imageAlt"))},medium:{label:u.a.text(ul("iconSizeMedium.label")),image:yc.a,image_alt:u.a.text(ul("iconSizeMedium.imageAlt"))},large:{label:u.a.text(ul("iconSizeLarge.label")),image:vc.a,image_alt:u.a.text(ul("iconSizeLarge.imageAlt"))}},icon_background_shape:{none:{label:u.a.text(ul("iconBackgroundShapeNone.label")),image:xc.a,image_alt:u.a.text(ul("iconBackgroundShapeNone.imageAlt"))},square:{label:u.a.text(ul("iconBackgroundShapeSquare.label")),image:Tc.a,image_alt:u.a.text(ul("iconBackgroundShapeSquare.imageAlt"))},rounded:{label:u.a.text(ul("iconBackgroundShapeRounded.label")),image:Ic.a,image_alt:u.a.text(ul("iconBackgroundShapeRounded.imageAlt"))},circle:{label:u.a.text(ul("iconBackgroundShapeCircle.label")),image:_c.a,image_alt:u.a.text(ul("iconBackgroundShapeCircle.imageAlt"))}},social_icon_size:{small:{label:u.a.text(ul("iconSizeSmall.label")),image:Ac.a,image_alt:u.a.text(ul("iconSizeSmall.imageAlt"))},medium:{label:u.a.text(ul("iconSizeMedium.label")),image:kc.a,image_alt:u.a.text(ul("iconSizeMedium.imageAlt"))},large:{label:u.a.text(ul("iconSizeLarge.label")),image:Rc.a,image_alt:u.a.text(ul("iconSizeLarge.imageAlt"))}},social_icon_background_shape:{none:{label:u.a.text(ul("iconBackgroundShapeNone.label")),image:xc.a,image_alt:u.a.text(ul("iconBackgroundShapeNone.imageAlt"))},square:{label:u.a.text(ul("iconBackgroundShapeSquare.label")),image:Lc.a,image_alt:u.a.text(ul("iconBackgroundShapeSquare.imageAlt"))},rounded:{label:u.a.text(ul("iconBackgroundShapeRounded.label")),image:Bc.a,image_alt:u.a.text(ul("iconBackgroundShapeRounded.imageAlt"))},circle:{label:u.a.text(ul("iconBackgroundShapeCircle.label")),image:Vc.a,image_alt:u.a.text(ul("iconBackgroundShapeCircle.imageAlt"))}},filled:{pill:{label:u.a.text(ul("buttonShapePill.label")),image:qc.a,image_alt:u.a.text(ul("buttonShapePill.imageAlt"))},rounded:{label:u.a.text(ul("buttonShapeRounded.label")),image:Wc.a,image_alt:u.a.text(ul("buttonShapeRounded.imageAlt"))},rectangle:{label:u.a.text(ul("buttonShapeRectangle.label")),image:$c.a,image_alt:u.a.text(ul("buttonShapeRectangle.imageAlt"))}},unfilled:{pill:{label:u.a.text(ul("buttonShapePill.label")),image:Yc.a,image_alt:u.a.text(ul("buttonShapePill.imageAlt"))},rounded:{label:u.a.text(ul("buttonShapeRounded.label")),image:Jc.a,image_alt:u.a.text(ul("buttonShapeRounded.imageAlt"))},rectangle:{label:u.a.text(ul("buttonShapeRectangle.label")),image:Zc.a,image_alt:u.a.text(ul("buttonShapeRectangle.imageAlt"))}},field_border:{none:{label:u.a.text(ul("fieldBorderNone.label")),image:tl.a,image_alt:u.a.text(ul("fieldBorderNone.imageAlt"))},all:{label:u.a.text(ul("fieldBorderAll.label")),image:rl.a,image_alt:u.a.text(ul("fieldBorderAll.imageAlt"))},bottom:{label:u.a.text(ul("fieldBorderBottom.label")),image:ol.a,image_alt:u.a.text(ul("fieldBorderBottom.imageAlt"))}},case:{none:{label:u.a.text(ul("caseNone.label")),image:tl.a,image_alt:u.a.text(ul("caseNone.imageAlt"))},upper:{label:u.a.text(ul("caseUpper.label")),image:sl.a,image_alt:u.a.text(ul("caseUpper.imageAlt"))},lower:{label:u.a.text(ul("caseLower.label")),image:ll.a,image_alt:u.a.text(ul("caseLower.imageAlt"))}}});var pl=n(35);const hl=["error","id","onFieldChange","readOnly","required"],ml=e=>"ContentComponents.cmv2.fields.choice."+e,fl=ac.a[sc.CHOICE],gl=45,bl=35,Ol=c.a.div.withConfig({displayName:"Choice__IconWrapper",componentId:"nclu52-0"})(["display:flex;height:100%;align-items:center;justify-content:center;"]),yl=c.a.div.withConfig({displayName:"Choice__ButtonWrapper",componentId:"nclu52-1"})(["width:33.3%;"]),jl=c.a.img.withConfig({displayName:"Choice__ButtonImage",componentId:"nclu52-2"})(["height:auto;max-height:45px;max-width:100%;"]),vl=c.a.div.withConfig({displayName:"Choice__ButtonTextWrapper",componentId:"nclu52-3"})(["margin-top:4px;text-align:center;"]);function Cl(){const e=Object(oc.c)();return function(t){return e(t)}}const xl={fetchIcon:ic.b},El=Object(a.connect)(Cl,xl);class Tl extends i.Component{constructor(e){super(e);Object(l.bindAll)(this,"getReorderableSelectKey","onChangeCheckbox","onChangeRadio","onChangeValue","onSelectOpenChange","renderRadioOption","renderSelectOption");const t=this.getOptionsData();this.choiceButtonPresets=dl();this.reorderableSelectKey=this.getReorderableSelectKey(t.optionsCache);this.state={isOpenSelect:!1,options:t.options,optionsCache:t.optionsCache}}componentDidMount(){const{choices:e,display:t=fl.SELECT,fetchIcon:n,preset:r}=this.props;e.forEach(e=>{const i=e[1],o=e[2]||{},a=r&&this.choiceButtonPresets[r],s=t===fl.BUTTONS&&r&&a?a[i.toLowerCase()]:o;if(s&&s.icon){const e=s.set||pl.a;n(e,{search:s.icon}).catch(e=>{throw e})}})}componentDidUpdate(e){const{choices:t}=this.props;if(JSON.stringify(e.choices)!==JSON.stringify(t)){const e=this.getOptionsData(this.state.optionsCache);this.reorderableSelectKey=this.getReorderableSelectKey(e.optionsCache);this.setState({options:e.options,optionsCache:e.optionsCache})}}get seleniumKey(){const{fieldKey:e=[]}=this.props;return e.join(".")}onChangeValue(e){const{onFieldChange:t}=this.props;t(e.target.value)}onChangeRadio(e){const{onFieldChange:t}=this.props;t(e)}onChangeCheckbox(e,t,{target:{checked:n}}){const{onFieldChange:r}=this.props,i=!n&&t,o=n&&t&&!t.includes(e);let a=t||[e];o?a=[...t,e]:i&&(a=t.filter(t=>t!==e));r(a)}onSelectOpenChange(e){this.setState({isOpenSelect:e.target.value})}getOptionsData(e={}){const{choices:t,display:n=fl.SELECT,readOnly:r=!1,value:i}=this.props,o=i&&i.choices?i.choices:t,a=o.length&&Array.isArray(o[0][1]);let s=[];const c=Object.assign({},e);s=a&&n===fl.SELECT?o.map(e=>{const[t,n]=e,i=n.map(e=>{const[t,n]=e,i={disabled:r,text:n,value:t};c[t]=i;return i});return{disabled:r,options:i,text:t}}):o.map(e=>{const[t,n]=e,i={disabled:r,text:n,value:t};c[t]=i;return i});return{options:s,optionsCache:c}}getButtonFlexJustificationByIndex(e){switch(e%3){case 1:return"center";case 2:return"end";default:return"start"}}getReorderableSelectKey(e){const{reordering_enabled:t=!1,value:n}=this.props;let r=n&&n.selectedValue?n.selectedValue:n;if(!t||!Array.isArray(r)||r.length<=1)return;Object(lc.d)(r)&&(r=void 0);return r.reduce((t,n)=>`${t}${n}${e[n]&&e[n].text}`,"")}renderIcon(e,t){const{selectedIcons:n={}}=this.props,r=n[e];if(!r)return null;const i=!!r&&{name:e,viewPort:r.viewPort,svg:r.svg};return Object(Js.jsx)(d.a,{className:"m-top-1",color:t,height:bl,iconData:i,width:bl})}renderImage(e,t){return e?Object(Js.jsx)(jl,{alt:t,src:e}):null}renderHelpText(e){return e?Object(Js.jsx)(p.a,{iconProps:{className:"m-left-1"},title:Object(Js.jsx)(O.a,{label:e})}):null}renderRadioOption(e,t){const{value:n,readOnly:r=!1}=this.props,[i,o]=e;return Object(Js.jsx)(m.a,{checked:i===n,"data-selenium":`${this.seleniumKey}:opt:${i}`,name:t,onChange:()=>this.onChangeRadio(i),readOnly:r,size:"small",value:i,children:Object(Js.jsx)(O.a,{label:o})},i)}renderRadio(){const e=""+Math.random();return Object(Js.jsx)("div",{"data-selenium":this.seleniumKey,children:this.props.choices.map(t=>this.renderRadioOption(t,e))})}renderButtonContents(e,t={}){if(Object(l.isEmpty)(t))return Object(Js.jsx)("span",{children:e});const{color:n,icon:r,image:o,image_alt:a}=t;return Object(Js.jsxs)(i.Fragment,{children:[this.renderIcon(r,n),this.renderImage(o,a)]})}renderButtonLabelsAndHelpText(e,t={}){if(Object(l.isEmpty)(t))return null;const{help_text:n}=t;return Object(Js.jsxs)(vl,{children:[e,this.renderHelpText(n)]})}renderIconButton(e){const{value:t,preset:n,readOnly:r=!1}=this.props,[i,o,a]=e,s=n&&this.choiceButtonPresets[n],c=n&&s?s[o.toLowerCase()]:void 0,l=n&&c?c.label:o,u=c||a;return Object(Js.jsxs)("div",{className:"m-bottom-3",children:[Object(Js.jsx)(g.a,{block:!0,height:gl,onSelectedChange:()=>this.onChangeValue(Object($s.a)(i)),readOnly:r,selected:i===t,width:gl,children:Object(Js.jsx)(Ol,{children:this.renderButtonContents(l,u)})}),this.renderButtonLabelsAndHelpText(l,u)]})}renderButtons(){const{choices:e}=this.props;return Object(Js.jsx)(b.a,{align:"start",className:"m-top-2",justify:"start",wrap:"wrap",children:e.map((e,t)=>Object(Js.jsx)(yl,{children:Object(Js.jsx)(b.a,{justify:this.getButtonFlexJustificationByIndex(t),children:this.renderIconButton(e)})},t))})}renderSelectValue(e){const t=e.text||e.buttonText||e.value;return void 0===t?null:Object(Js.jsx)(O.a,{label:t})}renderSelectOption(e){const t=e.text||e.dropdownText||e.value;return Object(Js.jsx)("div",{"data-selenium":`${this.seleniumKey}:opt:${t}`,dangerouslySetInnerHTML:{__html:Object(cc.a)(t)},className:"p-x-2 p-y-3",title:t})}renderReorderableSelect(e){const t=this.props,{error:n,id:i,onFieldChange:o,readOnly:a=!1,required:s=!1}=t,c=Object(r.a)(t,hl);return Object(Js.jsx)(rc,{error:!!n,id:i,onFieldChange:o,onOpenChange:this.onSelectOpenChange,optionsCache:this.state.optionsCache,readOnly:a,remainingPropsForAria:c,required:s,value:e,valueRenderer:this.renderSelectValue},this.reorderableSelectKey)}renderSelect(){const{error:e,multiple:t=!1,placeholder:n,readOnly:r=!1,reordering_enabled:i=!1,required:o=!1,useOnDark:a,value:s}=this.props,{isOpenSelect:c}=this.state,l=n||u.a.text(ml("placeholder"));let d=s&&s.selectedValue?s.selectedValue:s;Object(lc.d)(d)&&(d=void 0);const p=i&&Array.isArray(d)&&d.length>1;return p&&!c?this.renderReorderableSelect(d):Object(Js.jsx)(h.a,{autoFocus:p,buttonUse:a?"form-on-dark":"form",clearable:!o,"data-selenium":this.seleniumKey,"data-value":d,defaultValue:d,error:e,multi:t,onChange:this.onChangeValue,onOpenChange:this.onSelectOpenChange,open:c,optionRenderer:this.renderSelectOption,options:this.state.options,placeholder:l,readOnly:r,value:d,valueRenderer:this.renderSelectValue})}renderCheckboxOption(e,t){const{value:n,readOnly:r=!1}=this.props,[i,o]=e;let a=n;Array.isArray(n)||(a=Object(lc.c)(n)?[]:[n]);return Object(Js.jsx)(f.a,{checked:a.includes(i),"data-selenium":`${this.seleniumKey}:opt:${i}`,name:t,onChange:e=>this.onChangeCheckbox(i,a,e),readOnly:r,size:"small",value:i,children:Object(Js.jsx)(O.a,{label:o})},i)}renderCheckbox(){const{choices:e,reordering_enabled:t=!1}=this.props;if(t)return this.renderSelect();const n=""+Math.random();return Object(Js.jsx)("div",{"data-selenium":this.seleniumKey,children:e.map(e=>this.renderCheckboxOption(e,n))})}render(){const{display:e=fl.SELECT}=this.props;switch(e){case fl.RADIO:return this.renderRadio();case fl.CHECKBOX:return this.renderCheckbox();case fl.BUTTONS:return this.renderButtons();default:return this.renderSelect()}}}t.a=El(Tl)},function(e,t,n){"use strict";var r=n(40),i=n(55),o=n(41),a=n.n(o),s=n(288),c=n.n(s),l=n(73),u=n(0),d=(n(591),n(593),n(594),n(2746),n(2747)),p=n(596),h=n(345),m=n(586),f=n(522),g=n.n(f),b=(n(584),n(540),n(541),n(581),n(582),n(1301),n(583),n(45));function O(){return function(e){class t extends r.Component{constructor(e){super(e);this.codemirror=null;this.refCodemirror=this.refCodemirror.bind(this)}codemirrorMounted(e){if(this.codemirror!==e){this.codemirror=e;this.codemirror&&this.addSearch()}}addSearch(){this.codemirror.addKeyMap(this.keyMap)}get keyMap(){if(this.__keyMap)return this.__keyMap;const{isMac:e}=m.a;this.__keyMap=g.a.normalizeKeyMap(Object.assign({[e?"Cmd-F":"Ctrl-F"]:"findPersistent",[e?"Shift-Cmd-F":"Shift-Ctrl-F"]:"replace"},e?{"Cmd-Alt-F":!1}:{}));return this.__keyMap}refCodemirror(e){const t=e&&e.codemirror;this.codemirrorMounted(t);this.props.refCodemirror&&this.props.refCodemirror(e)}render(){return Object(b.jsx)(e,Object.assign({},this.props,{refCodemirror:this.refCodemirror}))}}t.propTypes={refCodemirror:a.a.func};t.displayName=`WithSearch(${Object(h.a)(e)})`;return t}}var y=n(572),j=n(2),v=n(324);const C=["color","className","height","width"],x=e=>{const{color:t,className:n,height:r,width:i}=e,o=Object(j.a)(e,C);return Object(b.jsx)("span",Object.assign({className:c()("content-resize-handle",n)},o,{children:Object(b.jsxs)("svg",{width:i+"px",height:r+"px",viewBox:"0 0 16 16",fill:t,children:[Object(b.jsx)("rect",{x:"12",y:"12",width:"2",height:"2"}),Object(b.jsx)("rect",{x:"12",y:"8",width:"2",height:"2"}),Object(b.jsx)("rect",{x:"12",y:"4",width:"2",height:"2"}),Object(b.jsx)("rect",{x:"8",y:"12",width:"2",height:"2"}),Object(b.jsx)("rect",{x:"8",y:"8",width:"2",height:"2"}),Object(b.jsx)("rect",{x:"4",y:"12",width:"2",height:"2"})]})}))};x.propTypes={color:a.a.string.isRequired,className:a.a.string,height:a.a.number.isRequired,width:a.a.number.isRequired};x.defaultProps={color:v.FLINT,height:16,width:16};var E=x,T=n(58);const S=200,I=18,w=Object(T.compose)(O(),Object(y.a)(),Object(p.a)())(d.a);class _ extends r.PureComponent{constructor(e){super(e);Object(l.bindAll)(this,["refCodemirror","updateCodemirrorSize","onMouseMove","onMouseUp","onMouseDown"]);this.state={height:S}}componentDidUpdate(e,t){t.height!==this.state.height&&this.updateCodemirrorSize()}get className(){return c()("content-codemirror",this.props.className,this.props.readOnly&&"is--read-only",!this.props.resizable&&"auto--size")}refCodemirror(e){this.props.refCodemirror&&this.props.refCodemirror(e);this.codemirror=e&&e.codemirror;this.codemirror&&this.props.resizable&&this.updateCodemirrorSize()}updateCodemirrorSize(){this.codemirror.setSize(null,this.state.height)}onMouseMove(e){this.setState({height:Math.max(S,this.startHeight+e.pageY-this.startY-I)})}onMouseUp(){document.removeEventListener("mousemove",this.onMouseMove);document.removeEventListener("mouseup",this.onMouseUp)}onMouseDown(e){this.startY=e.pageY;this.startHeight=Object(u.findDOMNode)(this).getBoundingClientRect().height;document.addEventListener("mousemove",this.onMouseMove);document.addEventListener("mouseup",this.onMouseUp)}renderResizeHandle(){return this.props.resizable?Object(b.jsx)(E,{onMouseDown:this.onMouseDown}):null}render(){return Object(b.jsxs)("div",{"data-test-id":"codemirror",children:[Object(b.jsx)(w,Object.assign({scrollbarStyle:"overlay",fixedGutter:!1,width:"100%",viewportMargin:1/0,autoCloseBrackets:!0,matchBrackets:!0,matchTags:!0,lineWrapping:!0},this.props,{refCodemirror:this.refCodemirror,className:this.className})),this.renderResizeHandle()]})}}_.propTypes={className:a.a.string,readOnly:a.a.bool,theme:a.a.string,resizable:a.a.bool,refCodemirror:a.a.func};_.defaultProps={theme:"hubspot-canvas-light",resizable:!0,readOnly:!1};class N extends r.Component{constructor(e){super(e);this.onChange=this.onChange.bind(this)}onChange({value:e}){const{onFieldChange:t=i.a}=this.props;t(e)}render(){const{codeMirrorProps:e,readOnly:t,useOnDark:n,value:r=""}=this.props;return Object(b.jsx)(_,Object.assign({className:"cmv2-html-field"+(n?" gypsum-background-dark":""),readOnly:t,mode:"htmlmixed",onChange:this.onChange,value:r},e))}}t.a=N},function(e,t,n){"use strict";var r=n(2),i=n(40),o=n(345),a=n(58),s=n(59),c=n(73),l=n(2634),u=n(4),d=n(279),p=n(282),h=n(458),m=n(490),f=n(2712),g=n(485),b=n(2668),O=n(1181),y=n(1202),j=n(1303),v=n(1204),C=n(1),x=n.n(C),E=n(1049);function T(...e){return Object(E.a)(e).get("content-settings/v1/site-settings/by-portal-id/"+x.a.get(),{query:{casing:"snake"}})}var S=n(65);const I=e=>e.resources.siteSettings,w=(e,t)=>t.domain,_=()=>Object(S.a)([I,w],(e,t)=>{if(!t)return null;const{body_override_by_domain:n}=e;return n&&n[t]}),N=()=>{const e=_();return Object(S.a)([I,e],(e,t)=>{const n=t||{};return{src:n.logoSrc||e.logo_src,width:n.logoWidth||e.logo_width,height:n.logoHeight||e.logo_height,alt:n.logoAlt||e.logo_alt}})},A=()=>{const e=_();return Object(S.a)([e],e=>!(!e||!e.logoSrc))};var D=n(68),k=n(30),P=n.n(k);const R=()=>{const{request:e,receive:t,error:n}=R;return(r,i,{httpClient:o=P.a}={})=>{const a=I(i());if(Object(c.isEmpty)(a)){r(e());T(o).then(e=>{r(t(e))}).catch(e=>{r(n(e))})}}};R.request=()=>({type:D.SITE_SETTINGS_FETCH});R.receive=e=>({type:D.SITE_SETTINGS_FETCH,siteSettings:e});R.error=e=>({type:D.SITE_SETTINGS_FETCH,error:e});var F=n(1143),L=n(1132),M=n(747),B=n(67),U=n(45);const V=["brandKitId","defaultLogoValue","domain","forceShowLoading","help_text","isInEmail","readOnly","required","show_loading","useOnDark","value"],H=Object(v.a)(b.a),q=e=>"ContentComponents.cmv2.fields.logo."+e,G=()=>{const e=N(),t=A();return(n,r)=>({businessUnitId:Object(L.g)(n,r),brandKitId:Object(L.c)(n),defaultLogoValue:l.b.isUngated("Cms:BrandingLogoFaviconMigration")?Object(L.f)(n):e(n,r),isSrcDomainSpecific:t(n,r)})},W={fetchSiteSettings:R,fetchBrandedLogo:F.c,fetchBusinessUnit:F.e,fetchBrandKit:F.b},z={override_inherited_src:!1,suppress_company_name:!0,src:null,alt:null},$=Object(s.connect)(G,W);class K extends i.Component{constructor(e,t){super(e,t);this.onImageChange=this.onImageChange.bind(this);this.onLoadingChange=this.onLoadingChange.bind(this);this.onOverrideInheritedSrcChange=this.onOverrideInheritedSrcChange.bind(this);this.onSuppressCompanyNameChange=this.onSuppressCompanyNameChange.bind(this)}componentDidMount(){const{businessUnitId:e,contentId:t,contentCategoryName:n,domain:r,value:i={},fetchBrandedLogo:o,fetchSiteSettings:a,fetchBusinessUnit:s,fetchBrandKit:c,setSessionStorageItem:u}=this.props;if(l.b.isUngated("Cms:BrandingLogoFaviconMigration"))if(Object(B.c)(e)&&n&&t)s(n,t).catch(e=>{throw e});else{o(r,e).catch(e=>{throw e});c(e).catch(e=>{throw e})}else a();i.src&&u(this.props.id,i)}componentDidUpdate(e){const{businessUnitId:t,domain:n,fetchBrandedLogo:r,fetchBrandKit:i}=this.props,{businessUnitId:o}=e;if(l.b.isUngated("Cms:BrandingLogoFaviconMigration")&&t!==o){r(n,t).catch(e=>{throw e});i(t).catch(e=>{throw e})}}onImageChange(e){const{id:t,onFieldChange:n,setSessionStorageItem:r,value:i={}}=this.props,{suppress_company_name:o}=i;if(e&&!Object(c.isEmpty)(e)&&e.src){r(t,e);n(Object.assign({},i||{},e))}else n(Object.assign({},z,{override_inherited_src:!0,suppress_company_name:o}))}onLoadingChange(e){const{onFieldChange:t,value:n={}}=this.props;t(Object.assign({},n,{loading:e}))}onOverrideInheritedSrcChange(e){const{getSessionStorageItem:t,id:n,onFieldChange:r,value:i={}}=this.props,{loading:o}=i;e.target.checked?r(Object.assign({},i,t(n),{loading:o,override_inherited_src:!0,suppress_company_name:!0})):r(Object.assign({},z,{loading:o}))}onSuppressCompanyNameChange(e){const{onFieldChange:t,value:n={}}=this.props;t(Object.assign({},n||{},{suppress_company_name:!e.target.checked}))}renderSourceLabel(){const e=this.props.isSrcDomainSpecific?this.props.domain:u.a.text(q("sourceLabel.allDomains"));return Object(U.jsx)("div",{className:"p-y-2",children:Object(U.jsx)(m.a,{children:Object(U.jsx)(d.a,{message:q("sourceLabel.label"),options:{domain:e}})})})}renderLogoImage(){const e=this.props,{brandKitId:t,defaultLogoValue:n,domain:i,forceShowLoading:o=!1,isInEmail:a,readOnly:s=!1,required:c=!1,show_loading:h=!1,useOnDark:m,value:b={}}=e,j=Object(r.a)(e,V),{override_inherited_src:v,loading:C}=b,x=h&&!a||o,E=l.b.isUngated("Cms:BrandingLogoFaviconMigration")?l.b.logoBrandSettings(t):l.b.logoSettings(i);if(!v){const{src:e,alt:t}=n;if(!e){const e=Object(U.jsx)(f.a,{external:!0,href:E,children:Object(U.jsx)(d.a,{message:q("emptyLogo.linkLabel")})});return Object(U.jsx)(g.a,{use:"help",children:Object(U.jsx)(p.a,{message:q("emptyLogo.message"),options:{link:e}})})}return Object(U.jsxs)("div",{children:[this.renderSourceLabel(),Object(U.jsx)("div",{className:"m-bottom-1",children:Object(U.jsx)(O.a,{alt:t,readOnly:s,src:e})}),Object(U.jsx)(f.a,{disabled:s,external:!0,href:E,children:Object(U.jsx)(d.a,{message:q("editLogoLinkLabel")})}),x&&Object(U.jsx)(y.a,{onChange:this.onLoadingChange,readOnly:s,useOnDark:m,value:C})]})}return Object(U.jsx)(H,Object.assign({},j,{forceShowLoading:o,label:u.a.text(q("logoLabel")),onFieldChange:this.onImageChange,picker:M.b.IMAGE,readOnly:s,required:c,responsive:!1,show_loading:h,useOnDark:m,value:b}))}renderCompanyNameToggle(){const{defaultLogoValue:e,readOnly:t=!1,value:n={}}=this.props,{override_inherited_src:r,suppress_company_name:i,src:o}=n||{};return o||!r&&e.src?null:Object(U.jsxs)("div",{className:"m-top-3",children:[Object(U.jsx)(m.a,{children:Object(U.jsx)(g.a,{children:Object(U.jsx)(d.a,{message:q("suppressCompanyNameLabel")})})}),Object(U.jsx)(h.a,{"data-selenium":"render-company",checked:!i,onChange:this.onSuppressCompanyNameChange,readOnly:t,size:"extra-small"})]})}render(){const{readOnly:e=!1,value:t={}}=this.props,{override_inherited_src:n}=t||{};return Object(U.jsxs)("div",{children:[Object(U.jsxs)("div",{className:"m-bottom-3",children:[Object(U.jsx)(m.a,{children:Object(U.jsx)(g.a,{children:Object(U.jsx)(d.a,{message:q("overrideDefaultLogoLabel")})})}),Object(U.jsx)(h.a,{"data-selenium":"override-inherited-src",checked:!!n,onChange:this.onOverrideInheritedSrcChange,readOnly:e,size:"extra-small"})]}),this.renderLogoImage(),this.renderCompanyNameToggle()]})}}t.a=Object(a.compose)($,Object(j.a)(Object(o.a)(K)))(K)},function(e,t,n){"use strict";var r=n(40),i=n(41),o=n.n(i),a=n(59),s=n(1148),c=n.n(s),l=n(73),u=n(99),d=n(279),p=n(282),h=n(27),m=n(2634),f=n(2741),g=n(2712),b=n(2655),O=n(443),y=n(696),j=n(2742),v=n(485),C=n(1134),x=n(1196),E=n(1198),T=n(2787),S=n(2586),I=n(55),w=n(747),_=n(2734),N=n(698),A=n(2599),D=n(1324),k=n(45);const P=e=>"ContentComponents.videoPicker."+e,R=16/9;class F extends r.Component{constructor(e){super(e);this.handleVideoPickerOpen=()=>{this.setState({videoPickerOpen:!0})};this.handleVideoPickerClose=()=>{this.setState({videoPickerOpen:!1})};this.handleVideoSelect=e=>{this.handleVideoPickerClose();this.props.handleVideoSelect(e)};this.onClearVideo=this.onClearVideo.bind(this);this.setIframeDisabled=this.setIframeDisabled.bind(this);this.setIframeEnabled=this.setIframeEnabled.bind(this);this.state={iframeDisabled:!1,videoPickerOpen:!1}}componentDidMount(){document.addEventListener("mousedown",this.setIframeDisabled);document.addEventListener("mouseup",this.setIframeEnabled)}shouldComponentUpdate(e,t){return c()(this,e,t)}componentWillUnmount(){document.removeEventListener("mousedown",this.setIframeDisabled);document.removeEventListener("mouseup",this.setIframeEnabled)}get iframeClassname(){return"video-iframe width-100"+(this.state.iframeDisabled?" is--disabled":"")}onClearVideo(){const{onFieldChange:e}=this.props;e({player_id:null})}setIframeDisabled(){this.setState({iframeDisabled:!0})}setIframeEnabled(){this.setState({iframeDisabled:!1})}renderHubSpotPreview(){const{videoData:e,value:t,posterUrl:n}=this.props;if(!e||!t)return null;const{conversion_asset:r,player_id:i}=t||{},{height:o,width:a,name:s}=e||{},c=o&&a?o/a:R,l={conversion_asset:r?JSON.stringify(r):"",playerType:"editorPreview",posterUrl:n,renderContext:"video-field-preview"},u=m.b.getVideo2PreviewUrl(i,l);return Object(k.jsx)("div",{className:"video-wrapper",style:{paddingBottom:100*c+"%"},children:Object(k.jsx)("iframe",{allowFullScreen:!0,className:this.iframeClassname,frameBorder:"0",height:o,src:u,width:a,title:s,style:{backgroundColor:"black"}})})}renderPicker(){return this.state.videoPickerOpen?Object(k.jsx)(N.a.Consumer,{children:({HubSpotVideoPicker:e})=>{if(!e)throw new Error("Missing required HubSpotVideoPicker PickerComponent");return Object(k.jsx)(e,{onClose:this.handleVideoPickerClose,onSelect:this.handleVideoSelect})}}):null}renderContent(e){const{isLoading:t,showPreview:n}=this.props;return t?Object(k.jsx)(_.a,{grow:!0,layout:"centered",minHeight:100}):n&&e?Object(k.jsxs)(D.a,{children:[this.renderHubSpotPreview(),this.renderPicker()]}):this.renderPicker()}render(){const{fieldKey:e,handleVideoSelect:t,hasHubSpotVideoAccess:n,helpText:r,inlineHelpText:i,label:o,readOnly:a,required:s,useOnDark:c,value:l,videoData:d}=this.props,p=!(!l||!d);return Object(k.jsx)(A.a,{browseText:Object(u.a)(P("buttons.browseVideos")),fieldKey:e,fileName:d&&d.title,fileType:w.e.MOVIE,inlineHelpText:i,handleFileSelect:t,hasValue:p,helpText:r,label:o,onClearFile:this.onClearVideo,onFileManagerOpen:this.handleVideoPickerOpen,readOnly:a,removeOnly:!n,required:s,uploadText:Object(u.a)(P("buttons.uploadVideo")),useOnDark:c,children:this.renderContent(p)})}}F.defaultProps={hasHubSpotVideoAccess:!0,label:"",handleVideoSelect:I.a,showPreview:!0,value:{}};var L=F,M=n(1200),B=n(2670);const U="hsvideo2",V=Object.freeze({LOOP_VIDEO:"loop_video",MUTE_BY_DEFAULT:"mute_by_default",AUTOPLAY:"autoplay",HIDE_CONTROLS:"hide_controls"});var H=n(1140),q=n(1081),G=n(1079),W=n(1080);const z=Object.freeze({NONE:"NONE",FORM:"FORM",CTA:"CTA"}),$=Object.freeze({PRE:"PRE",POST:"POST"});var K=n(160),Y=n(1199),X=n(66),J=n(1325),Q=n(2701);const Z={CONVERSION_ASSET_TYPE:"conversion-asset-type",VIDEO_ADD_NEW:"video-add-new",VIDEO_CHANGE_MAX_SIZE:"video-change-max-size",VIDEO_ADD_OVERLAY:"select-form",VIDEO_MAX_SIZE:"video-max-size",VIDEO_PQL_CLICK:"video-pql-click"},ee=e=>"ContentComponents.cmv2.fields.video."+e,te=e=>{const t=m.b.fileManager("",{section:"subtitles",showDetails:e.fileId,source:"video-field"});return Object(k.jsxs)("div",{className:"flex-row align-center",children:[Object(k.jsx)(O.a,Object.assign({"data-test-id":"cmv2-video-details-open",disabled:e.disabled,onClick:e.onClick,size:"extra-small",use:"tertiary-light"},e,{children:Object(k.jsx)(d.a,{message:ee("details.buttonText")})})),Object(k.jsx)(g.a,{className:"p-left-3",external:!0,href:t,children:Object(k.jsx)(d.a,{message:ee("details.manageSubtitles")})})]})},ne=(e,t)=>{const{player_id:n}=t.value||{};return{video:G.a(e,{playerId:n}),videoFetchRequestStatus:G.b(e,{playerId:n})}},re={fetchVideoByPlayerId:W.a,saveVideo:W.b};class ie extends r.Component{constructor(e){super(e);this.handleVideoSelect=this.handleVideoSelect.bind(this);this.onConversionAssetIdChange=this.onConversionAssetIdChange.bind(this);this.onDimensionChange=this.onDimensionChange.bind(this);this.onOverlayChange=this.onOverlayChange.bind(this);this.onPositionChange=this.onPositionChange.bind(this);this.onSaveComplete=this.onSaveComplete.bind(this);this.onSizeTypeChange=this.onSizeTypeChange.bind(this);this.onVideoDetailsPanelClose=this.onVideoDetailsPanelClose.bind(this);this.onVideoDetailsPanelOpen=this.onVideoDetailsPanelOpen.bind(this);this.onAdvancedOptionChange=this.onAdvancedOptionChange.bind(this);this.setAspectRatio=this.setAspectRatio.bind(this);this.openConversionAssetPanel=this.openConversionAssetPanel.bind(this);this.onSubmitConversionAssetPanel=this.onSubmitConversionAssetPanel.bind(this);this.onCloseConversionAssetPanel=this.onCloseConversionAssetPanel.bind(this);this.state={hasHubSpotVideoAccess:!1,hasAdvancedLeadGenAccess:!1,isVideoDetailsPanelOpen:!1,pollingForVideo:!1,posterUrl:null}}componentDidMount(){const{value:e}=this.props;e&&e.player_id&&this.fetchVideoPlayer();this.setAspectRatio(e);const{user:t}=Object(h.userInfoSync)(),n=t.scopes.includes("marketing-video"),r=t.scopes.includes("video-advanced-lead-gen");this.setState({hasAdvancedLeadGenAccess:r,hasHubSpotVideoAccess:n})}shouldComponentUpdate(e,t){return c()(this,e,t)}componentDidUpdate(e){const{video:t,value:n}=this.props,r=e.value||{};!t&&n&&n.player_type===U&&n.player_id&&r&&r.player_id!==n.player_id&&this.fetchVideoPlayer()}get conversionAsset(){const{conversion_asset:e}=this.props.value||{};return e||{}}get fieldKey(){const{fieldKey:e}=this.props;return e&&e.join(".")}get readOnlyOrNoVideoAccess(){return this.props.readOnly||!this.state.hasHubSpotVideoAccess}get videoConversionAssetOptions(){return Object.keys(z).map(e=>({text:Object(u.a)(ee("overlayOptions.choices."+e)),value:e}))}get displayTimeOptions(){return Object.keys($).map(e=>({text:Object(u.a)(ee("displayTimeOptions.choices."+e)),value:$[e]}))}setAspectRatio(e){if(!e)return;const{width:t,height:n}=e;t&&n&&(this.aspectRatio=t/n)}trackEvent(e,t){const{trackFieldAction:n}=this.props;n&&n(e,t)}fetchVideoPlayer(){const{fetchVideoByPlayerId:e,value:t={}}=this.props;e(t.player_id)}onUpdateVideo(e){const{onFieldChange:t,saveVideo:n,value:r}=this.props,i=Object(l.pick)(Object(B.b)(e),["player_id","height","width"]);i.player_type=U;n(i.player_id,e);this.trackEvent(Z.VIDEO_ADD_NEW);this.setAspectRatio(e);t(Object.assign({},r,i))}handleVideoSelect(e){const t=e.toJS?e.toJS():e;if(e.toJS&&t.id){Object(q.b)(t.id).then(e=>{this.onUpdateVideo(e);this.setState({pollingForVideo:!1})});this.setState({pollingForVideo:!0})}else this.onUpdateVideo(t)}onSaveComplete(e){const{saveVideo:t,value:n}=this.props,{player_id:r}=n||{};t(r,e.toJS?e.toJS():e);this.setState({isVideoDetailsPanelOpen:!1,posterUrl:e.posterUrl})}openConversionAssetPanel(){this.setState({conversionAssetPanelOpen:!0})}onSubmitConversionAssetPanel(e){this.setState({conversionAssetPanelOpen:!1});this.props.onFieldChange(Object.assign({},this.props.value,{conversion_asset:e}))}onCloseConversionAssetPanel(){this.setState({conversionAssetPanelOpen:!1})}onVideoDetailsPanelOpen(){this.setState({isVideoDetailsPanelOpen:!0})}onVideoDetailsPanelClose(){this.setState({isVideoDetailsPanelOpen:!1});this.fetchVideoPlayer()}onDimensionChange(e,t){const n=e.target.value,{onFieldChange:r,value:i}=this.props,{size_type:o}=i||{},a=o===Y.a.AUTO_CUSTOM_MAX,s=t(n,this.aspectRatio,a);s&&r(Object.assign({},i,s))}onOverlayChange({target:{value:e}}){const{onFieldChange:t,value:n}=this.props;if(e===z.NONE)t(Object.assign({},n,{conversion_asset:{type:null}}));else{const r=e?`video-select-${e.toLowerCase()}-overlay`:Z.VIDEO_ADD_OVERLAY;this.trackEvent(r,{[Z.CONVERSION_ASSET_TYPE]:e});t(Object.assign({},n,{conversion_asset:{type:e,id:null,position:this.conversionAsset.position||$.PRE}}))}}onPositionChange({target:{value:e}}){const{onFieldChange:t,value:n}=this.props;t(Object.assign({},n,{conversion_asset:Object.assign({},this.conversionAsset,{position:e})}))}onConversionAssetIdChange(e){const{onFieldChange:t,value:n}=this.props;t(Object.assign({},n,{conversion_asset:Object.assign({},this.conversionAsset,{id:e})}))}onSizeTypeChange(e){const{onFieldChange:t,value:n}=this.props;this.trackEvent(Z.VIDEO_CHANGE_MAX_SIZE,{[Z.VIDEO_MAX_SIZE]:e.target.value});t(Object.assign({},n,{size_type:e.target.value}))}onAdvancedOptionChange(e,t){const{onFieldChange:n,value:r}=this.props;n(Object.assign({},r,{[t]:e.target.checked}));this.trackEvent(`video-${t}-${e.target.checked?"enabled":"disabled"}`)}renderConversionAssets(){const{isInEmail:e,useOnDark:t,video:n,show_conversion_assets:r}=this.props;return!e&&n&&r?Object(k.jsx)("div",{className:"video-asset-editing",children:Object(k.jsx)(C.a,{"data-test-id":"cmv2-video-conversion-assets",className:"cmv2-field-group without-nested-groups",titleText:Object(u.a)(ee("overlayOptions.expandableLabel")),useOnDark:t,children:Object(k.jsx)(f.a,{className:"p-x-6 p-top-2",label:Object(k.jsx)(d.a,{message:ee("overlayOptions.header.labelAdvanced")}),children:Object(k.jsxs)("div",{children:[Object(k.jsx)(b.a,{onChange:this.onOverlayChange,options:this.videoConversionAssetOptions,readOnly:this.readOnlyOrNoVideoAccess,value:this.conversionAsset.type||z.NONE}),this.renderContentPicker(),this.renderDisplayTimeOptions()]})})})}):null}renderDisplayTimeOptions(){const e=this.conversionAsset;return e.type&&e.type!==z.NONE?this.state.hasAdvancedLeadGenAccess?e.id?Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(H.a,{className:"m-top-2",label:Object(k.jsx)(d.a,{message:ee("displayTimeOptions.header.labelAdvanced")}),labelItemRight:Object(k.jsx)(O.a,{className:"display-block",size:"sm",use:"link",onClick:this.openConversionAssetPanel,children:Object(k.jsx)(v.a,{children:Object(k.jsx)(d.a,{message:ee("displayTimeOptions.editButtonText")})})}),children:Object(k.jsx)(J.a,{className:"m-bottom-0",conversionAsset:e})}),this.state.conversionAssetPanelOpen&&Object(k.jsx)(Q.a,{conversionAsset:e,video:this.props.video,onSubmit:this.onSubmitConversionAssetPanel,onClose:this.onCloseConversionAssetPanel,trackVideoInteraction:this.props.trackFieldAction})]}):null:Object(k.jsx)(r.Fragment,{children:Object(k.jsx)(f.a,{label:Object(k.jsx)(d.a,{message:ee("displayTimeOptions.header.label")}),children:Object(k.jsx)(b.a,{onChange:this.onPositionChange,options:this.displayTimeOptions,readOnly:this.readOnlyOrNoVideoAccess,value:e.position||$.PRE})})}):null}renderContentPicker(){const e=this.conversionAsset;if(!e.type||e.type===z.NONE)return null;switch(e.type){case z.CTA:return Object(k.jsx)(T.a,{isVideo:!0,includeVideoCtas:!0,label:Object(k.jsx)(d.a,{message:ee("overlayOptions.choices.CTA")}),onFieldChange:e=>{this.onConversionAssetIdChange(e);this.trackEvent(e?"video-select-cta":"video-remove-cta")},readOnly:this.readOnlyOrNoVideoAccess,value:e.id});case z.FORM:return Object(k.jsx)(f.a,{label:Object(k.jsx)(d.a,{message:ee("overlayOptions.choices.FORM")}),children:Object(k.jsx)(S.a,{componentsByType:this.props.componentsByType,type:K.FORM,allowFormEditing:!1,forVideo:!0,readOnly:this.readOnlyOrNoVideoAccess,required:!1,value:{form_id:e.id},onFieldChange:({form_id:t}={})=>{t!==e.id&&this.onConversionAssetIdChange(t)},onRedirect:this.props.onRedirect,setFieldKey:this.props.setFieldKey,trackFormAction:(e,t)=>{this.trackEvent("video-"+e,t)}})});default:return null}}renderDimensions(){const{useOnDark:e,value:t,maxContainerWidth:n}=this.props,{height:r,max_height:i,max_width:o,size_type:a,width:s}=t||{};let c={},l=s,u=r,p=ee("sizing.sizeType.heightLabel"),h="height",m=ee("sizing.sizeType.widthLabel"),f="width";if(a===Y.a.AUTO_CUSTOM_MAX){u=i>0?i:r;l=o>0?o:s;p=ee("sizing.maxSizeType.heightLabel");h="maxHeight";m=ee("sizing.maxSizeType.widthLabel");f="maxWidth"}if(n){c={maxHeight:Math.round(n/this.aspectRatio),maxWidth:n}}return Object(k.jsx)(x.a,Object.assign({height:u,heightLabel:Object(k.jsx)(d.a,{message:p}),heightSeleniumKey:`${this.fieldKey}:${h}`,onHeightChange:e=>this.onDimensionChange(e,M.b),onWidthChange:e=>this.onDimensionChange(e,M.c),readOnly:this.readOnlyOrNoVideoAccess,useOnDark:e,width:l,widthLabel:Object(k.jsx)(d.a,{message:m}),widthSeleniumKey:`${this.fieldKey}:${f}`},c))}renderSizingOptions(){const{isInEmail:e,resizable:t,useOnDark:n,value:i,video:o}=this.props,{size_type:a}=i||{};if(!o||!t)return null;if(e)return this.renderDimensions();const s=Object(k.jsx)(g.a,{external:!0,href:"https://knowledge.hubspot.com/cos-general/how-will-my-hubspot-content-appear-on-a-mobile-device",children:Object(k.jsx)(d.a,{message:ee("sizing.maxSizeType.tooltipLink")})});return Object(k.jsxs)(r.Fragment,{children:[Object(k.jsx)(E.a,{fieldKey:this.fieldKey,fullWidthHelpText:Object(k.jsx)(d.a,{message:ee("sizing.maxSizeType.options.fullWidthTooltip")}),isFullWidthSizingEnabled:!0,maxSizeLabelProps:{tooltip:Object(k.jsx)(p.a,{message:ee("sizing.maxSizeType.tooltip"),options:{tooltipLink:s}})},onChange:this.onSizeTypeChange,readOnly:this.readOnlyOrNoVideoAccess,sizeType:a,useOnDark:n}),i&&i.size_type===Y.a.AUTO_CUSTOM_MAX&&this.renderDimensions()]})}renderDetailsPanel(){const{player_id:e}=this.props.value||{};return this.state.isVideoDetailsPanelOpen?Object(k.jsx)(N.a.Consumer,{children:({HubSpotVideoPicker:t})=>{if(!t)throw new Error("Missing required HubSpotVideoPicker PickerComponent");return Object(k.jsx)(t,{editingVideoId:e,onClose:this.onVideoDetailsPanelClose,onSelect:this.onSaveComplete})}}):null}renderVideoDetails(){const{video:e}=this.props;if(!e)return null;const t=Object(k.jsx)(g.a,{external:!0,href:"https://knowledge.hubspot.com/integrations/use-video-in-hubspot#add-video-to-your-content",children:Object(k.jsx)(d.a,{message:ee("details.tooltipLink")})});return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(f.a,{label:Object(k.jsx)(d.a,{message:ee("details.label")}),tooltip:Object(k.jsx)(p.a,{message:ee("details.tooltip"),options:{tooltipLink:t}}),children:Object(k.jsx)(te,{disabled:this.readOnlyOrNoVideoAccess,onClick:this.onVideoDetailsPanelOpen,fileId:e.sourceFileId})}),this.renderDetailsPanel()]})}renderMissingScopeAlert(){if(this.state.hasHubSpotVideoAccess)return null;const e=Object(k.jsx)(g.a,{external:!0,href:m.b.marketingHubPricingPage(),onClick:()=>{this.trackEvent(Z.VIDEO_PQL_CLICK)},children:Object(k.jsx)(d.a,{message:ee("missingScope.upgradeLinkText")})});return Object(k.jsx)(y.a,{titleText:Object(k.jsx)(d.a,{message:ee("missingScope.title")}),type:"warning",children:Object(k.jsx)(p.a,{message:ee("missingScope.message"),options:{upgradeLink:e}})})}renderAdvancedOptions(){const{isInEmail:e,readOnly:t,show_advanced_options:n,useOnDark:r,value:i,video:o}=this.props;return!e&&o&&n?Object(k.jsx)("div",{className:"video-advanced-options",children:Object(k.jsx)(C.a,{"data-test-id":"cmv2-video-advanced-options",className:"cmv2-field-group without-nested-groups",titleText:Object(u.a)(ee("advancedOptions.expandableLabel")),useOnDark:r,children:Object(k.jsx)("div",{className:"p-x-6 p-top-6",children:Object.keys(V).map(e=>{const n=V[e],r=i&&i[n];return Object(k.jsx)(j.a,{checked:r,onChange:e=>this.onAdvancedOptionChange(e,n),readOnly:t,children:Object(k.jsx)(d.a,{message:ee("advancedOptions."+n)})},n)})})})}):null}renderNotEmbeddableAlert(){const{video:e}=this.props;return Object(k.jsx)(y.a,{titleText:Object(k.jsx)(d.a,{message:ee("nonEnbeddableVideo2.title")}),type:"warning",children:Object(k.jsx)(p.a,{message:ee("nonEnbeddableVideo2.message"),options:{allowEmbeddingLink:Object(k.jsx)(g.a,{external:!0,href:m.b.fileManager("",{showDetails:e.sourceFileId||e.id,source:"video-field"}),children:Object(k.jsx)(d.a,{message:ee("nonEnbeddableVideo2.allowEmbeddingLink")})})}})})}render(){const{fieldKey:e,help_text:t,inline_help_text:n,label:i,onFieldChange:o,readOnly:a,required:s,show_preview:c,useOnDark:l,value:u,video:p,videoFetchRequestStatus:h}=this.props,{hasHubSpotVideoAccess:m,pollingForVideo:f}=this.state,{player_id:g}=u||{},b=!(!g||h!==X.FAILED&&(h!==X.SUCCEEDED||p));if(!m&&(!g||b))return Object(k.jsx)(H.a,{label:i,required:s,helpText:t,inlineHelpText:n,children:this.renderMissingScopeAlert()});let O=!1;g&&p&&(O=!p.isEmbeddable);const j=!(!g||!p||!p.deleted_at&&!p.deletedAt);let v=null;m?O?v=this.renderNotEmbeddableAlert():j?v=Object(k.jsx)(y.a,{titleText:Object(k.jsx)(d.a,{message:ee("deletedVideo.title")}),type:"warning",children:Object(k.jsx)(d.a,{message:ee("deletedVideo.message")})}):b&&(v=Object(k.jsx)(y.a,{titleText:Object(k.jsx)(d.a,{message:ee("videoFetchFailed.title")}),type:"warning",children:Object(k.jsx)(d.a,{message:ee("videoFetchFailed.message")})})):v=this.renderMissingScopeAlert(g);return Object(k.jsxs)(r.Fragment,{children:[v,Object(k.jsx)(L,{fieldKey:e,handleVideoSelect:this.handleVideoSelect,hasHubSpotVideoAccess:m,helpText:t,inlineHelpText:n,label:i,onFieldChange:o,isLoading:h===X.PENDING||f,posterUrl:this.state.posterUrl,readOnly:a,required:s,showPreview:c,useOnDark:l,value:u,videoData:p}),!(O||j||b)&&Object(k.jsxs)(r.Fragment,{children:[this.renderSizingOptions(),this.renderVideoDetails(),this.renderConversionAssets(),this.renderAdvancedOptions()]})]})}}ie.propTypes={componentsByType:o.a.object.isRequired,fetchVideoByPlayerId:o.a.func.isRequired,fieldKey:o.a.arrayOf(o.a.oneOfType([o.a.string,o.a.number])),help_text:o.a.string,inline_help_text:o.a.string,isInEmail:o.a.bool,label:o.a.node.isRequired,maxContainerWidth:o.a.number,onFieldChange:o.a.func.isRequired,onRedirect:o.a.func,readOnly:o.a.bool,required:o.a.bool,resizable:o.a.bool,setFieldKey:o.a.func.isRequired,show_preview:o.a.bool,saveVideo:o.a.func.isRequired,show_advanced_options:o.a.bool,show_conversion_assets:o.a.bool,trackFieldAction:o.a.func,useOnDark:o.a.bool,value:o.a.object,video:o.a.object,videoFetchRequestStatus:o.a.string};ie.defaultProps={fieldKey:[],resizable:!0,show_advanced_options:!1,show_conversion_assets:!0,show_preview:!0,value:{},label:""};t.a=Object(a.connect)(ne,re)(ie)},function(e,t,n){"use strict";var r=n(24),i=n.n(r),o=n(40),a=n(539),s=n(1148),c=n.n(s),l=n(73),u=n(99),d=n(279),p=n(201),h=n(696),m=n(2741),f=n(508),g=n(1181),b=n(2599),O=n(1196),y=n(1198),j=n(1200),v=n(1199),C=n(45);const x=e=>"ContentComponents.cmv2.fields.image."+e;class E extends o.Component{constructor(e){super(e);this.getDimensionProps=()=>{const{fieldKey:e,value:t}=this.props,{height:n,max_height:r,max_width:i,size_type:o,width:a}=t||{};let s=a,c=n,l=x("sizing.sizeType.heightLabel"),u="height",p=x("sizing.sizeType.widthLabel"),h="width";if(o===v.a.AUTO_CUSTOM_MAX){c=r&&r>0?r:n;s=i&&i>0?i:a;l=x("sizing.maxSizeType.heightLabel");u="maxHeight";p=x("sizing.maxSizeType.widthLabel");h="maxWidth"}return{height:c,heightLabel:Object(C.jsx)(d.a,{message:l}),heightSeleniumKey:`${e}:${u}`,width:s,widthLabel:Object(C.jsx)(d.a,{message:p}),widthSeleniumKey:`${e}:${h}`}};this.getMaxDimensionProps=()=>{const{aspectRatio:e,maxContainerWidth:t,responsiveEnabled:n}=this.props;let r={};if(!n&&t){r={maxHeight:Math.round(1*t/e),maxWidth:t}}return r};this.onDimensionChange=this.onDimensionChange.bind(this);this.onSizeTypeChange=this.onSizeTypeChange.bind(this)}shouldComponentUpdate(e){return c()(this,e,null)}get isResponsiveSizing(){const{value:e}=this.props,{size_type:t}=e||{};return t===v.a.AUTO||t===v.a.AUTO_CUSTOM_MAX}onDimensionChange(e,t,n){const{aspectRatio:r,dimensionsLogger:i,onFieldChange:o,responsiveEnabled:a,value:s}=this.props,{size_type:c}=s||{},l=e.target.value,u=c===v.a.AUTO_CUSTOM_MAX;if(u&&!a)return;const d=t(l,r,u);if(d){"function"==typeof i&&i(d||{},n);o(Object.assign({},s,d))}}onSizeTypeChange(e){const{onFieldChange:t,value:n}=this.props;t(Object.assign({},n,{size_type:e.target.value}))}renderDimensions(){const{readOnly:e,resizable:t,useOnDark:n}=this.props;return t?Object(C.jsx)(O.a,Object.assign({onHeightChange:e=>this.onDimensionChange(e,j.b,"onHeightChange"),onWidthChange:e=>this.onDimensionChange(e,j.c,"onWidthChange"),readOnly:e,useOnDark:n},this.getDimensionProps(),this.getMaxDimensionProps())):null}renderResponsiveSizing(){const{fieldKey:e,readOnly:t,responsiveEnabled:n,useOnDark:r,value:i}=this.props,{size_type:o}=i||{};return Object(C.jsxs)("div",{className:"m-top-4",children:[Object(C.jsx)(y.a,{fieldKey:e,exactTooltip:Object(C.jsx)(d.a,{message:x("sizing.sizeType.options.exactTooltip")}),isExactSizingEnabled:!0,isFullWidthSizingEnabled:!1,onChange:this.onSizeTypeChange,originalSizeOption:Object(u.a)(x("sizing.maxSizeType.options.original")),readOnly:t||!n,responsiveTooltip:Object(C.jsx)(d.a,{message:x("sizing.sizeType.options.autoTooltip")}),showResponsiveSizingAlert:!n&&this.isResponsiveSizing,sizeType:o,useOnDark:r}),(!o||o===v.a.EXACT||o===v.a.AUTO_CUSTOM_MAX)&&this.renderDimensions()]})}render(){const{resizable:e,responsiveEnabled:t}=this.props;return e?t||this.isResponsiveSizing?this.renderResponsiveSizing():Object(C.jsx)("div",{className:"m-top-4",children:this.renderDimensions()}):null}}E.defaultProps={resizable:!0,value:{}};var T=E,S=n(1202),I=n(747);const w={ONE_MB:1e6,FIFTY_MB:5e7},_="gif",N=2e3;var A=n(1203),D=n(186);const k=(e,t)=>{const n=e&&t,r=Math.max(e,t);if(n&&r>N){const n=e/t,i=r===e?N:N*n,o=r===t?N:N/n;return{maxWidth:i,maxHeight:o,areaReductionRatio:i*o/(e*t)}}return{maxWidth:e,maxHeight:t,areaReductionRatio:0}},P=e=>"ContentComponents.cmv2.fields.image."+e,R=e=>"ContentComponents.buttons."+e,F=/^{{\s*([a-zA-Z0-9_.]+)\s*}}$/;class L extends o.Component{constructor(e){super(e);this.handleImageSelect=this.handleImageSelect.bind(this);this.logSentryForFailedImageLoad=this.logSentryForFailedImageLoad.bind(this);this.onAltTextChange=this.onAltTextChange.bind(this);this.trackAltTextChange=this.trackAltTextChange.bind(this);this.onClearImage=this.onClearImage.bind(this);this.onFileManagerOpen=this.onFileManagerOpen.bind(this);this.onLazyLoadingChange=this.onLazyLoadingChange.bind(this);this.setAspectRatio=this.setAspectRatio.bind(this);this.setImageNaturalDimensions=this.setImageNaturalDimensions.bind(this);this.onCloseWarning=this.onCloseWarning.bind(this);this.resetFileAttributeWarnings=this.resetFileAttributeWarnings.bind(this);this.resetFileSizeWarnings=this.resetFileSizeWarnings.bind(this);this.resetFileInfoNotices=this.resetFileInfoNotices.bind(this);this.debouncedTrackAltTextChange=Object(a.a)(this.trackAltTextChange,250);this.naturalImg=null;this.naturalImgData=null;this.state={aspectRatio:null,fileAttributeWarnings:[],fileSizeWarnings:[],fileInfoNotices:[]}}componentDidMount(){const{value:e={}}=this.props;e&&e.src&&(e.height&&e.width?this.setAspectRatio(e):this.setImageNaturalDimensions(e))}shouldComponentUpdate(e,t){return c()(this,e,t)}componentDidUpdate(e){const{value:t={}}=this.props;!this.state.aspectRatio&&null===e.value&&t&&this.setAspectRatio(t)}componentWillUnmount(){const{onFieldChange:e}=this.props;this.naturalImg&&(this.naturalImg.onload=null);this.naturalImgData&&e(this.naturalImgData)}get fieldKey(){const{fieldKey:e=[]}=this.props;return e&&e.join(".")}get responsiveEnabled(){const{forceHideResponsive:e,responsive:t}=this.props;return!e&&t}setAspectRatio(e){if(!e)return;const{width:t,height:n}=e;t&&n&&this.setState({aspectRatio:t/n})}buildManualFetchImageSrc(e){const[t,...n]=e.split("?"),r=new URLSearchParams(n.join(""));r.append("manualFetch",""+Date.now());return`${t}?${r.toString()}`}setImageNaturalDimensions(e,t=!1){const{onFieldChange:n}=this.props,r=Object.assign({},e);this.naturalImg=new Image;this.naturalImgData=t?r:null;const i=this.buildManualFetchImageSrc(e.src);this.naturalImg.onload=()=>{const{naturalHeight:e,naturalWidth:i}=this.naturalImg;r.width=i;r.height=e;if(this.responsiveEnabled){const{areaReductionRatio:t,maxHeight:n,maxWidth:o}=k(i,e);r.max_width=o;r.max_height=n;t>0&&(r.size_type=D.a.AUTO_CUSTOM_MAX)}this.naturalImg=null;this.naturalImgData=null;this.setAspectRatio(r);t&&n(r)};this.naturalImg.onerror=()=>{this.naturalImg=null;this.naturalImgData=null;t&&n(r);this.logSentryForFailedImageLoad(e.src)};this.naturalImg.src=i}logSentryForFailedImageLoad(e){i.a.captureMessage("Grabbing image natural dimensions failed",{extra:{src:e}})}resetFileAttributeWarnings(){this.setState({fileAttributeWarnings:[]})}resetFileSizeWarnings(){this.setState({fileSizeWarnings:[]})}resetFileInfoNotices(){this.setState({fileInfoNotices:[]})}setImageAttributeWarnings(e){this.resetFileAttributeWarnings();const t=[];e.extension===_&&t.push("fileTypeWarning");this.setState({fileAttributeWarnings:t})}setImageSizeWarningsAndNotices(e,t=0){this.resetFileSizeWarnings();this.resetFileInfoNotices();const n=[],r=[];if(t>0){e*=t;r.push("automaticallyReducedMaxDimension")}e>=w.FIFTY_MB?n.push("fileSizeWarning50MB"):e>=w.ONE_MB&&n.push("fileSizeWarning1MB");this.setState({fileSizeWarnings:n,fileInfoNotices:r})}handleImageSelect(e){const{value:t={}}=this.props,n=e.toJS?e.toJS():e;let r,i=n.name||n.title;n.meta&&n.meta.title&&(i=n.meta.title);const o=Object.assign({},Object(l.omit)(t,["max_width","max_height"]),{alt:i,src:n.url,width:n.width,height:n.height});if(this.responsiveEnabled){const{areaReductionRatio:e,maxHeight:t,maxWidth:i}=k(n.width,n.height);o.max_width=i;o.max_height=t;r=e;r>0&&(o.size_type=D.a.AUTO_CUSTOM_MAX)}if(o.height&&o.width){this.setAspectRatio(o);this.props.onFieldChange(o);this.setImageSizeWarningsAndNotices(e.size,r)}else this.setImageNaturalDimensions(o,!0);this.setImageAttributeWarnings(n)}onClearImage(){this.resetFileAttributeWarnings();this.resetFileSizeWarnings();this.resetFileInfoNotices();this.props.onFieldChange({src:""})}onFileManagerOpen(e,t={}){const{onFileManagerOpen:n}=this.props;n(this.handleImageSelect,t)}onLazyLoadingChange(e){const{value:t={},onFieldChange:n}=this.props;n(Object.assign({},t,{loading:e}))}trackAltTextChange(){const{trackFieldAction:e}=this.props;e&&e("fileManagerManageFiles",{action:"update alt text",fileType:I.e.IMG})}onAltTextChange(e){const{value:t={},onFieldChange:n}=this.props,r=e.target.value;n(Object.assign({},t,{alt:r}));this.debouncedTrackAltTextChange()}onCloseWarning(e){this.setState(t=>({fileAttributeWarnings:t.fileAttributeWarnings.filter(t=>t!==e),fileSizeWarnings:t.fileSizeWarnings.filter(t=>t!==e),fileInfoNotices:t.fileInfoNotices.filter(t=>t!==e)}))}renderLazyLoadingSelect(){const{value:e={},readOnly:t,useOnDark:n}=this.props;return Object(C.jsx)(S.a,{onChange:this.onLazyLoadingChange,readOnly:t,useOnDark:n,value:e.loading||A.a.DISABLED})}renderAltTextInput(){const{highlightedField:e=[],readOnly:t,showAlt:n=!0,useOnDark:r,value:i={}}=this.props;if(!n)return null;const o=1===e.length&&"alt"===e[0];return Object(C.jsx)(m.a,{className:"m-top-4",label:Object(u.a)(P("altTextLabel")),children:Object(C.jsx)(f.a,{className:o?"xray-highlight":"","data-selenium":this.fieldKey+":alt",onChange:this.onAltTextChange,readOnly:t,use:r?"on-dark":"default",value:i&&i.alt})})}renderTextFieldForImage(e){return F.test(e)?Object(C.jsx)(f.a,{value:e,readOnly:!0}):null}renderWarnings(){const{fileAttributeWarnings:e,fileSizeWarnings:t,fileInfoNotices:n}=this.state;return Object(C.jsxs)(C.Fragment,{children:[e.length>0&&e.map(e=>this.renderUIAlert("warning",e)),t.length>0&&t.map(e=>this.renderUIAlert("warning",e)),n.length>0&&n.map(e=>this.renderUIAlert("info",e))]})}renderUIAlert(e,t){const{isInEmail:n}=this.props,r=n?".email":"",i=P(`warnings.${t}.title`),o=Object(p.a)(i);return Object(C.jsx)(h.a,{use:"inline",titleText:o&&Object(C.jsx)(d.a,{message:i}),className:"m-bottom-2",closeable:!0,onClose:()=>this.onCloseWarning(t),type:e,children:Object(C.jsx)(d.a,{message:P(`warnings.${t}${r}.text`)})},t)}render(){const{contentAssistanceEnabled:e,fieldKey:t=[],forceShowLoading:n=!1,help_text:r,inline_help_text:i,isInEmail:a,label:s="",maxContainerWidth:c,onFieldChange:l,readOnly:p,required:h,resizable:m=!0,show_loading:f=!1,trackFieldAction:O,uploadedFileAccess:y,useOnDark:j,value:v={}}=this.props,x=v&&v.src,E=f&&x&&!a||n;return Object(C.jsxs)(o.Fragment,{children:[this.renderWarnings(),Object(C.jsx)(b.a,{browseText:Object(u.a)(P("browseImages")),contentAssistanceEnabled:e,fieldKey:t,fileType:I.e.IMG,handleFileSelect:this.handleImageSelect,hasValue:!!x,helpText:r,inlineHelpText:i,label:s,onClearFile:this.onClearImage,onFileManagerOpen:this.onFileManagerOpen,readOnly:p,required:h,trackFieldAction:O,uploadedFileAccess:y,uploadText:Object(u.a)(P("uploadImage")),children:x&&Object(C.jsxs)("div",{children:[this.renderTextFieldForImage(v.src)||Object(C.jsx)(g.a,{alt:v.alt,src:v.src,onHoverlayClick:this.onFileManagerOpen,hoverlayLabel:Object(C.jsx)(d.a,{message:R("replace")}),readOnly:p}),this.renderAltTextInput(),Object(C.jsx)(T,{aspectRatio:this.state.aspectRatio,fieldKey:this.fieldKey,onFieldChange:l,readOnly:p,maxContainerWidth:c,resizable:m,responsiveEnabled:this.responsiveEnabled,useOnDark:j,value:v})]})}),E&&!a&&this.renderLazyLoadingSelect()]})}}t.a=L},function(e,t,n){"use strict";var r=n(2),i=(n(10),n(41)),o=n.n(i),a=n(40),s=n(288),c=n.n(s),l=n(485),u=n(352),d=n(2654),p=n(2682),h=n(297),m=n(298),f=n(45);const g=({className:e,currentSliderValue:t,value:n,min:r})=>Object(f.jsx)("div",{className:c()(e,"private-slider__tickmark",n<=t&&"private-slider__tickmark--left"+(r<=n?" private-slider__tickmark--filled":""))});g.propTypes={currentSliderValue:o.a.number,value:o.a.number,min:o.a.number};g.displayName="UISliderTickMark";var b=g,O=n(287),y=n.n(O),j=n(324),v=n(500),C=n(326);const x=["size","restricted","disabled","readOnly","left","width"],E=Object(v.b)(e=>Object(f.jsx)("div",Object.assign({},e)),["left","lineStyle","width","color","restricted","disabled"]),T=e=>{const{value:t,disabled:n,restricted:r,readOnly:i}=e;if(t<=0){if(n||i)return j.KOALA;if(!r)return j.CALYPSO}return j.BATTLESHIP},S={md:1,lg:2},I=e=>S[e]||0,w=y()(E).withConfig({displayName:"UISliderTrack__UISliderTrackLine",componentId:"sc-15bksr6-0"})(["border-color:",";border-style:",";border-width:",";margin:0 ",";"],e=>e.color,e=>e.lineStyle,e=>Object(C.m)(I(e.size)),e=>Object(C.m)(I(e.size)));0;const _=y()(E).withConfig({displayName:"UISliderTrack__UISliderTrackContainer",componentId:"sc-15bksr6-1"})(["position:absolute;top:0;bottom:0;left:",";width:",";cursor:",";& ","{position:absolute;top:",";right:0;left:0;}"],e=>Object(C.l)(e.left),e=>Object(C.l)(e.width),e=>e.restricted||e.disabled?"not-allowed":void 0,w,e=>"lg"===e.size?"8px":"6px");0;const N=e=>{const{size:t,restricted:n,disabled:i,readOnly:o,left:a,width:s}=e,c=Object(r.a)(e,x),l=T(e),u=e.restricted?"dashed":"solid";return Object(f.jsx)(_,Object.assign({size:t,left:a,width:s,disabled:i,readOnly:o,restricted:n},c,{children:Object(f.jsx)(w,{size:t,color:l,lineStyle:u})}))};N.propTypes=Object.assign({},_.propTypes,{value:o.a.oneOf([-1,0,1])});N.defaultProps={value:0,size:"md",disabled:!1,restricted:!1};N.displayName="UISliderTrackSegment";var A=n(489);const D=["children","onMouseDown","onDragStart","onDragEnd","onDrag"];class k extends a.PureComponent{constructor(e){super(e);this.handleMouseDown=e=>{const{onMouseDown:t,onDragStart:n}=this.props;Object(h.a)(t,e);if(!e.defaultPrevented&&Object(A.a)(e)){this.updatePosition(e.clientX);Object(h.a)(n);this.bindWindowListeners()}};this.handleWindowMouseMove=e=>{this.updatePosition(e.clientX)};this.handleWindowMouseUp=()=>{const{onDragEnd:e}=this.props;Object(h.a)(e);this.unbindWindowListeners()};this.refCallback=e=>{this._el=e};this.state={Dragging:!1}}componentWillUnmount(){this.unbindWindowListeners()}bindWindowListeners(){addEventListener("mousemove",this.handleWindowMouseMove);addEventListener("mouseup",this.handleWindowMouseUp)}unbindWindowListeners(){removeEventListener("mousemove",this.handleWindowMouseMove);removeEventListener("mouseup",this.handleWindowMouseUp)}updatePosition(e){const{onDrag:t}=this.props;if(null==this._el)return;const{left:n,right:r}=this._el.getBoundingClientRect();if(n===r)return;let i=(e-n)/(r-n);i<0&&(i=0);i>1&&(i=1);Object(h.a)(t,Object(m.a)({percentX:i}))}render(){const e=this.props,{children:t}=e,n=Object(r.a)(e,D);return Object(f.jsx)("div",Object.assign({},n,{onMouseDown:this.handleMouseDown,ref:this.refCallback,children:t}))}}k.propTypes={"aria-label":o.a.string,"aria-valuemax":o.a.number,"aria-valuemin":o.a.number,"aria-valuenow":o.a.number,"aria-valuetext":o.a.string,children:o.a.node,className:o.a.string,"data-test-id":o.a.string,id:o.a.string,onChange:o.a.func,onDrag:o.a.func,onDragEnd:o.a.func,onDragStart:o.a.func,onKeyDown:o.a.func,onMouseDown:o.a.func,role:o.a.string,style:o.a.object,tabIndex:o.a.number};k.displayName="UIAbstractSlider";var P=k,R=n(349),F=n(329);const L=["value","restricted","width","left"],M=["className","disabled","min","minLabel","max","maxLabel","trackStart","trackEnd","onChange","onRawValueChange","readOnly","size","showLabels","showTickMarks","step","tabIndex","value","restrictedAreaTooltip"],B=(...e)=>e.find(e=>null!=e),U=(e,t,n,r)=>r<e?e:r>t?t:0!==Math.abs(r%n)?Math.round(r/n)*n:r,V=(e,t,n)=>t-e==0?0:(n-e)/(t-e)*100,H={max:"private-slider__label--max",min:"private-slider__label--min"};class q extends a.Component{constructor(...e){super(...e);this.state={isDragging:!1};this.handleChange=e=>{const{disabled:t,max:n,min:r,onChange:i,onRawValueChange:o,readOnly:a,step:s,value:c,trackStart:l,trackEnd:u}=this.props;if(t||a)return;const d=U(l,u,s,e);Object(h.a)(o,Object(m.a)(d));const p=U(r,n,s,e);c!==p&&i(Object(m.a)(p))};this.handleKeyDown=e=>{const{step:t,value:n}=this.props;let r=n||0;if("ArrowLeft"===e.key||"ArrowDown"===e.key){e.preventDefault();r=n-t}else if("ArrowRight"===e.key||"ArrowUp"===e.key){e.preventDefault();r=n+t}this.handleChange(r);Object(h.a)(this.props.onKeyDown,e)};this.handleDrag=e=>{const{percentX:t}=e.target.value;this.handleChange(this.getControlValueFromPercentX(t))};this.handleDragStart=()=>{const{onDragStart:e}=this.props;this.setState({isDragging:!0});Object(h.a)(e)};this.handleDragEnd=()=>{const{onDragEnd:e}=this.props;this.setState({isDragging:!1});Object(h.a)(e)};this.handleMinLabelClick=()=>{const{disabled:e,min:t,readOnly:n}=this.props;e||n||this.handleChange(t)};this.handleMaxLabelClick=()=>{const{disabled:e,max:t,readOnly:n}=this.props;e||n||this.handleChange(t)}}componentDidUpdate(e,t){!t.isDragging&&this.state.isDragging?this.addBodyDragCursorClass():t.isDragging&&!this.state.isDragging&&this.removeBodyDragCursorClass()}componentWillUnmount(){this.removeBodyDragCursorClass()}addBodyDragCursorClass(){document.body.classList.add("hubspot-drag-cursor")}removeBodyDragCursorClass(){document.body.classList.remove("hubspot-drag-cursor")}getControlValueFromPercentX(e){const t=B(this.props.trackStart,this.props.min,0);return e*(B(this.props.trackEnd,this.props.max,0)-t)+t}renderLabel(e,t,n,r){const i="lg"===e?null:"help",o=c()("private-slider__label",H[r]),a="lg"===e?u.a:l.a;return Object(f.jsx)(a,{className:o,onClick:"min"===r?this.handleMinLabelClick:this.handleMaxLabelClick,use:i,children:n||t})}renderTrackSegment(e,t,n,i,o){let{value:a,restricted:s,width:c,left:l}=o,u=Object(r.a)(o,L);if(c<=0)return null;const p=Object(f.jsx)(N,Object.assign({},u,{left:l,width:c,size:"lg"===i?i:"md",restricted:s,disabled:e,readOnly:t,value:a}));if(n){const e="function"==typeof n?n(a>0?"upper":"lower"):n;return Object(f.jsx)(d.a,{title:e,placement:"bottom",children:p})}return p}renderTickMarks(e,t,n,r,i){const o=(r-i)/n,a=[];for(let r=0;r<=o;r++)a.push(Object(f.jsx)(b,{currentSliderValue:t,value:r*n+i,min:e},r));return a}render(){const e=this.props,{className:t,disabled:n,min:i,minLabel:o,max:a,maxLabel:s,trackStart:l,trackEnd:u,readOnly:d,size:p,showLabels:h,showTickMarks:m,step:g,tabIndex:b,value:O,restrictedAreaTooltip:y}=e,j=Object(r.a)(e,M);0;const v=Object(F.c)(p),C=c()(t,"private-slider",n&&"private-slider--disabled",d&&"private-slider--readonly",this.state.isDragging&&"private-slider--dragging","lg"===v&&"private-slider--large"),x=U(i,a,g,O),E=B(l,i,0),T=B(u,a,0),S=T-E,I=V(E,T,x);let w=0,_=0,N=0,A=0;if(S>0){w=(i-E)/S*100;_=(T-a)/S*100;N=I-w;A=100-_-I}return Object(f.jsxs)("div",Object.assign({},j,{"aria-disabled":n,"aria-readonly":d,"aria-valuemax":a,"aria-valuemin":i,"aria-valuenow":O||0,"aria-valuetext":""+(O||0),className:C,onKeyDown:this.handleKeyDown,role:"slider",tabIndex:Object(R.a)(n,b),children:[h&&this.renderLabel(v,E,o,"min"),Object(f.jsx)(P,{className:"private-slider__slider",onDrag:this.handleDrag,onDragStart:this.handleDragStart,onDragEnd:this.handleDragEnd,children:Object(f.jsxs)("div",{className:"private-slider__slider-track",children:[Object(f.jsx)("div",{className:"private-slider__tickmarks",children:m&&this.renderTickMarks(i,O,g,T,E)}),this.renderTrackSegment(n,d,y,v,{width:w,restricted:!0,value:-1}),this.renderTrackSegment(n,d,null,v,{left:w,width:N,value:0}),this.renderTrackSegment(n,d,null,v,{left:I,width:A,value:1}),this.renderTrackSegment(n,d,y,v,{left:I+A,width:_,restricted:!0,value:1}),Object(f.jsx)("div",{className:"private-slider__control",style:{left:I+"%"}})]})}),h&&this.renderLabel(v,T,s,"max")]}))}}q.propTypes={disabled:o.a.bool,onChange:o.a.func,onRawValueChange:o.a.func,min:o.a.number,minLabel:o.a.node,max:o.a.number.isRequired,maxLabel:o.a.node,trackStart:o.a.number,trackEnd:o.a.number,onDragStart:o.a.func,onDragEnd:o.a.func,onKeyDown:o.a.func,onMouseLeave:o.a.func,onMouseMove:o.a.func,onMouseDown:o.a.func,onMouseUp:o.a.func,showLabels:o.a.bool,size:o.a.oneOfType([Object(F.b)(["lg"]),o.a.oneOf(["default"])]),step:o.a.number.isRequired,showTickMarks:o.a.bool,value:o.a.number,readOnly:o.a.bool,restrictedAreaTooltip:o.a.oneOfType([o.a.node,o.a.func])};q.defaultProps={min:0,max:100,step:1,value:null};q.displayName="UISlider";t.a=Object(p.a)(q)},function(e,t,n){"use strict";var r=n(1193),i=n(182);function o(e,t,n){let r=e,i=0;if("string"==typeof t)return e[t]?e[t]:n;for(;i<t.length;){if(null===r[t[i]]||void 0===r[t[i]])return n;r=r[t[i]];i+=1}return r}var a=n(1194);const s=e=>{if("string"==typeof e)return e.charAt(0).toUpperCase()+e.slice(1)};const c=["type","id","position"];function l(e){return o(e,r.f)}const u=e=>{if("videoId"in e)return!0;const t=d(e,r.i.HUBSPOT_VIDEO_2,{includeDisabled:!0});return Boolean(t&&t.id)};function d(e,t,{includeDisabled:n=!1}={}){let r=l(e);if(!r)return{};n||(r=r.filter(e=>"ENABLED"===e.status));return r.find(e=>e.provider===t)||{}}const p=e=>{const{width:t,height:n}=e;if("videoId"in e)return{width:t,height:n,player_id:e.videoId};const i=d(e,r.i.HUBSPOT_VIDEO_2);return i.id?Object.assign({},e.meta.video_data,{width:t,height:n,player_id:i.id}):{}},h=e=>u(e)&&"videoId"in e?e.videoId:p(e).player_id,m=e=>u(e)&&"isEmbeddable"in e?e.isEmbeddable:Boolean(h(e)),f=e=>Boolean(e.id&&e.type&&e.position),g=e=>{if(!e)return!1;if("object"!=typeof e){Object(a.c)("conversion_asset attribute needs to be a valid JSON object","conversion_asset is "+(null===e?"null":"not an object"));return!1}if(!f(e)){Object(a.c)("conversion_asset must have at least 3 properties: "+c.join());return!1}return!0},b=e=>{const t=Object.assign({},i.a,e);return Object.keys(t).filter(e=>i.b.includes(e)).filter(e=>"conversion_asset"!==e||g(t[e])).map(e=>{const n=t[e];if("boolean"==typeof n)return`${e}=${s(n.toString())}`;if("conversion_asset"===e)try{return`conversion_asset='${JSON.stringify(n)}'`}catch(e){Object(a.c)(String(e))}return`${e}='${n}'`}).join(", ")},O=e=>`{% video_player "embed_player" ${b(e)} %}`;n.d(t,"c",(function(){return y}));n.d(t,"d",(function(){return j}));n.d(t,"b",(function(){return v}));n.d(t,"a",(function(){return C}));const y=m,j=u,v=p,C=O},function(e,t,n){"use strict";var r=n(2),i=n(41),o=n.n(i),a=n(40),s=n(4),c=n(2812),l=n(1321),u=n(288),d=n.n(u),p=n(508),h=n(2655),m=n(2679),f=n(1115),g=n(2813);let b=[];var O=e=>{if(b.length)return b;const t=Object(g.a)();b=t.filter(t=>e.find(e=>e.iso2===t.value)).map(t=>{const n=e.find(e=>e.iso2===t.value).dialCode;return Object.assign({},t,{text:`${t.text} +${n}`})});return b},y={CRM:"CRM",SALES_HUB:"SALES_HUB"},j={[y.SALES_HUB]:["ar","at","au","cx","cc","be","br","bg","ca","cl","cn","co","cr","cz","cy","dk","ee","fi","fr","de","gr","in","ie","il","it","jp","lv","lt","lu","mt","mx","nl","nz","no","pa","pe","pl","pt","ro","sg","sk","za","kr","es","se","ch","gb","us"],[y.CRM]:["au","br","fr","de","ie","jp","es","gb","us"]},v=n(1113),C=n(45);n.d(t,"a",(function(){return w}));const x=["className","countrySelectProps","extensionInputProps","extensionValue","phoneInputProps","onChange","validCountries","supportedCountrySet"],E=v.a,T=v.c,S={dialCode:"",priority:10001,iso2:null},I=(e,t=!1)=>{let n;n=e.value?e.value:"";let r=S,i=n;if(""===n||0===n.indexOf("+")){r=Object(c.a)(n.replace(/\D/g,""));const e=n?n.replace(/\D/g,""):r.dialCode;i=Object(l.a)(e,r.format)}const o={selectedCountry:r,formattedNumber:i};t&&(o.propsMemo=e.value);return o};class w extends a.Component{constructor(e,t){super(e,t);this._cursorToEnd=()=>{const e=this.numberInputRef.current;e&&e.focus()};this.formatSimpleNumber=(e,t=!0)=>{const n=e.replace(/\D/g,"");return t?"+"+n:n};this.handlePhoneNumberInput=e=>{const{formattedNumber:t,selectedCountry:n}=this.state,r=this.props.extensionValue,i=e.target;if(i.value===t)return;let o=i.value.replace(/\D/g,"");0!==o.indexOf(n.dialCode)&&(o=n.dialCode);this.props.onChange&&this.props.onChange({phoneNumber:this.formatSimpleNumber(o,n.dialCode),extension:r,country:n.iso2});const a=i.selectionStart,s=Object(l.a)(o,n.format);this.setState({formattedNumber:s},()=>{let e=a;o!==n.dialCode&&a!==t.length+1||(e=s.length+1);i.selectionStart=e;i.selectionEnd=e})};this.handleExtensionInput=e=>{const{selectedCountry:t,formattedNumber:n}=this.state;this.props.onChange({phoneNumber:this.formatSimpleNumber(n,t.dialCode),extension:e.target.value.replace(/\D/g,""),country:t.iso2})};this.handleFlagItemClick=e=>{const t=this.props.extensionValue,{selectedCountry:n,formattedNumber:r}=this.state,i=E[T[e.target.value]];if(n.iso2!==i.iso2){const e=n.dialCode?r.replace(/\D/g,"").replace(n.dialCode,i.dialCode):`${i.dialCode}${r}`,o=Object(l.a)(e,i.format);this.setState({selectedCountry:i,formattedNumber:o},()=>{this._cursorToEnd();this.props.onChange&&this.props.onChange({phoneNumber:this.formatSimpleNumber(e,n.dialCode||i.dialCode),extension:t,country:i.iso2})})}};this.getCountryDropDownList=(e,t,n)=>{let r=O(E);const i=e=>j[n].indexOf(e.value)>=0,o=e=>t.indexOf(e.value)>=0;n&&t?r=r.filter(e=>i(e)&&o(e)):n?r=r.filter(i):t&&(r=r.filter(o));return e?r:[{value:S.iso2,text:s.a.text("i18nAddon.countryInfo.invalidCountryOption")},...r]};this.buildValueRenderer=e=>()=>e?Object(C.jsx)(f.a,{countryCode:e}):Object(C.jsx)(m.a,{name:"warning"});this.renderExtension=(e,t)=>"string"!=typeof e?null:Object(C.jsx)(p.a,Object.assign({},t,{className:d()("extension-input",t.className),placeholder:s.a.text("i18nAddon.phoneNumberInput.extensionPlaceholder"),onChange:this.handleExtensionInput,value:e}));this.state=I(e,!0)}static getDerivedStateFromProps(e,t){if(null===e.value||void 0===e.value)return Object.assign({},t,I(e));{const n=e.value.replace(/\D/g,"");if(t.propsMemo!==e.value){const r=Object(l.a)(n,t.selectedCountry.format);return Object.assign({},t,{formattedNumber:r,propsMemo:e.value})}}return null}render(){const{selectedCountry:e,formattedNumber:t}=this.state,n=this.props,{className:i,countrySelectProps:o,extensionInputProps:s,extensionValue:c,phoneInputProps:l,validCountries:u,supportedCountrySet:m}=n,f=Object(r.a)(n,x);this.numberInputRef=this.numberInputRef||Object(a.createRef)();return Object(C.jsxs)("div",Object.assign({},f,{className:d()("phone-number-input",i),children:[Object(C.jsx)(h.a,Object.assign({},o,{"data-test-id":"country-select",className:d()("country-select",o.className),dropdownClassName:d()("country-dropdown",o.dropdownClassName),onChange:this.handleFlagItemClick,options:this.getCountryDropDownList(e.dialCode,u,m),value:e.iso2,valueRenderer:this.buildValueRenderer(e.iso2)})),Object(C.jsx)(p.a,Object.assign({},l,{className:d()("phone-text-input",l.className),inputRef:this.numberInputRef,onChange:this.handlePhoneNumberInput,value:t,type:"tel"})),this.renderExtension(c,s)]}))}}w.propTypes={countrySelectProps:o.a.object,extensionInputProps:o.a.object,extensionValue:o.a.string,onChange:o.a.func,phoneInputProps:o.a.object,supportedCountrySet:o.a.oneOf(Object.keys(j)),validCountries:o.a.array,value:o.a.string};w.defaultProps={countrySelectProps:{},extensionInputProps:{},phoneInputProps:{}}},function(e,t,n){"use strict";var r=n(1346),i=n(1347),o=n(1348),a=n(1341),s=n(1344),c=n(1345),l=n(2704),u=n(1349);const d="OWNER",p="ACTIVITY_TYPE",h="CALL_DISPOSITION",m="CAMPAIGN",f="COMPANY",g="DEAL_PIPELINE",b="DEAL_STAGE",O="FORM",y="_inbounddbio.importid_",j="INBOUND_DB_LIST",v="LIST",C="MULTI_CURRENCY_CURRENCY_CODE",x="MEETING_OUTCOME",E="PERSONA",T="SALESFORCE_CAMPAIGN",S="TEAM",I="TICKET_PIPELINE",w="TICKET_STAGE",_="USER";n(1350);var N=n(1351);const A="MIN_REVENUE",D="MAX_REVENUE",k="MIN_EMPLOYEES",P="MAX_EMPLOYEES";s.b,s.c,c.i,c.j,c.q,c.s,c.C,c.L,c.U,c.W;n.d(t,"J",(function(){return U}));n.d(t,"M",(function(){return V}));n.d(t,"K",(function(){return H}));n.d(t,"f",(function(){return q}));n.d(t,"g",(function(){return G}));n.d(t,"h",(function(){return W}));n.d(t,"e",(function(){return z}));n.d(t,"o",(function(){return $}));n.d(t,"w",(function(){return K}));n.d(t,"A",(function(){return Y}));n.d(t,"l",(function(){return X}));n.d(t,"u",(function(){return J}));n.d(t,"z",(function(){return Q}));n.d(t,"y",(function(){return Z}));n.d(t,"E",(function(){return ee}));n.d(t,"j",(function(){return te}));n.d(t,"t",(function(){return ne}));n.d(t,"q",(function(){return re}));n.d(t,"B",(function(){return ie}));n.d(t,"C",(function(){return oe}));n.d(t,"I",(function(){return ae}));n.d(t,"c",(function(){return se}));n.d(t,"k",(function(){return ce}));n.d(t,"i",(function(){return le}));n.d(t,"d",(function(){return ue}));n.d(t,"n",(function(){return de}));n.d(t,"s",(function(){return pe}));n.d(t,"v",(function(){return he}));n.d(t,"D",(function(){return me}));n.d(t,"L",(function(){return fe}));n.d(t,"x",(function(){return ge}));n.d(t,"m",(function(){return be}));n.d(t,"H",(function(){return Oe}));n.d(t,"G",(function(){return ye}));n.d(t,"F",(function(){return je}));n.d(t,"r",(function(){return ve}));n.d(t,"a",(function(){return Ce}));n.d(t,"p",(function(){return Ee}));n.d(t,"b",(function(){return Te}));const R=["_inbounddbio.importid_","associatedcompanyid","associations.company","associations.contact","dealstage.probability","formSubmissions.formId","ilsListMemberships.listId","listMemberships.listId"],F=(e,t)=>t===s.n&&("hs_start_datetime"===e.name||"hs_end_datetime"===e.name),L=(e,t)=>[s.b,s.e,s.i,s.o,s.p,s.t].includes(t)&&["hs_timestamp","hs_meeting_start_time"].includes(e.name),M=(e,t)=>t===s.a&&("hs_appointment_start"===e.name||"hs_appointment_end"===e.name),B=({hidden:e,name:t,hubspotDefined:n})=>!(e||R.includes(t)&&n);function U(e){return e.readOnlyValue||e.calculated||!B(e)||"file_upload_"===e.name}function V(e){return e&&e.type===i.f&&(e.fieldType===r.g||"description"===e.name)}function H(e){return e&&e.type===i.f&&!V(e)&&!["firstname","lastname","phone"].includes(e.name)}function q(e){return e&&[i.c,i.b].includes(e.type)}function G(e){return e&&e.type===i.c}const W=(e,t)=>![F,L,M].some(n=>n(e,t))&&(G(e)&&e.hubspotDefined);function z(e){return e&&e.showCurrencySymbol&&e.type===i.e}function $(e){return e&&e.type===i.e&&e.numberDisplayHint!==o.e}function K(e){return e&&e.type===i.e}function Y(e){return e&&e.fieldType===r.e}function X(e){return e&&[i.d,i.a].includes(e.type)}function J(e){return e&&e.fieldType===r.b&&e.type!==i.a}function Q(e){return e&&"hs_predictivecontactscore_v2"===e.name}function Z(e){return e&&e.type===i.e&&e.numberDisplayHint===o.c}function ee(e){return e&&e.type===i.e&&(e.numberDisplayHint===o.d||"hs_forecast_probability"===e.name||"hs_deal_stage_probability"===e.name||"hs_deal_forecast_probability"===e.name)}function te(e){if(!e)return e;const t=e.hubspotDefined&&e.name&&(e.name.startsWith("hs_time_in_")||"time_to_first_agent_reply"===e.name||"time_to_close"===e.name),n=e.type===i.e&&e.numberDisplayHint===o.a;return t||n}function ne(e){return z(e)&&e.hubspotDefined&&e.name&&e.name.startsWith(a.E)}function re(e){return e&&e.type===i.f&&e.fieldType===r.d}function ie(e,t){if(!e||!e.hubspotDefined||!e.externalOptions)return!1;switch(t){case s.h:return"pipeline"===e.name;case s.u:case s.l:default:return"hs_pipeline"===e.name}}function oe(e,t){if(!e||!e.hubspotDefined||!e.externalOptions)return!1;switch(t){case s.g:case s.f:return"lifecyclestage"===e.name;case s.h:return"dealstage"===e.name;case s.u:case s.l:default:return"hs_pipeline_stage"===e.name}}function ae(e,t){return e&&e.hubspotDefined&&(e.name===l.f||e.name===l.j)&&Object(u.a)(t)}const se=(e,t)=>t===c.j&&"email"===e.name,ce=(e,t)=>t===c.q&&"primary_point_of_contact_email"===e.name,le=(e,t)=>t===c.i&&"domain"===e.name,ue=(e,t)=>t===c.q&&("createdate"===e.name||"closedate"===e.name)||t===c.U&&("createdate"===e.name||"closed_date"===e.name),de=e=>"file_upload_"===e.name,pe=(e,t)=>t===c.q&&"deal_currency_code"===e.name||t===s.c&&"hs_currency_code"===e.name,he=(e,t)=>t===c.j&&["firstname","lastname"].includes(e.name),me=e=>e.hubspotDefined&&("hs_ticket_priority"===e.name||"hs_task_priority"===e.name||"hs_priority"===e.name||"hs_lead_label"===e.name),fe=(e,t)=>t===s.s&&"hs_status"===e.name,ge=(e,t)=>t===s.d&&"hs_latest_status"===e.name,be=e=>e.fieldType===r.c,Oe=(e,t)=>t===s.r&&"hs_url"===e.name;function ye(e,t){return t===s.r&&"price"===e.name}function je(e,t){return t===s.r&&"hs_cost_of_goods_sold"===e.name}function ve(e,t){return"hs_recurring_billing_period"===e.name&&(!t||(t===s.r||t===s.m))}function Ce(e,t){return"recurringbillingfrequency"===e.name&&(t===s.r||t===s.m)}const xe={[c.W]:[l.m,l.n],[c.j]:[l.e,l.f,l.c,l.d],[c.q]:[l.e,l.f,l.g,l.h],[c.i]:[l.e,l.f,l.a,l.b]},Ee=(e,t,n)=>{const r=xe[t];return!!r&&(r.includes(e.name)&&!!n&&Object(N.b)(n))},Te=e=>e.fieldType===r.a},function(e,t,n){"use strict";n.r(t);var r=n(40),i=n(2),o=n(41),a=n.n(o),s=n(2655),c=n(4),l=n(1114),u=n(1340);const d={[u.b.short]:[],[u.b.long]:[]},p=({currencyStyle:e,currenciesFilter:t,validCurrencies:n})=>{const r=t||(e=>n.indexOf(e.value)>=0),i=d[e];if(!n&&!t&&i.length)return i;if(i.length)return i.filter(r);d[e]=Object.keys(c.a.currencySymbols).map(t=>({text:u.a[e](t),value:t})).sort(l.a);return n||t?d[e].filter(r):d[e]};var h=n(45);const m=["currencyStyle","validCurrencies","currenciesFilter"],f=Object(r.forwardRef)((e,t)=>{const{currencyStyle:n,validCurrencies:r,currenciesFilter:o}=e,a=Object(i.a)(e,m);return Object(h.jsx)(s.a,Object.assign({},a,{className:e.className,ref:t,options:p({currencyStyle:n,currenciesFilter:o,validCurrencies:r})}))});f.propTypes={className:a.a.string,currencyStyle:a.a.oneOf(Object.keys(u.b)).isRequired,validCurrencies:a.a.array,currenciesFilter:a.a.func};f.defaultProps={currencyStyle:u.b.short};var g=f,b=n(1443),O=n(1444),y=n(1445),j=n(682),v=n(2648),C=n(1404);const x=(e,t,n)=>{const r=Object(C.a)();return Object(v.a)(e,t,Object.assign({},n,{httpClient:r}))},E={count:1e3,query:"",offset:0},T=({autoFocus:e,buttonUse:t,className:n,"data-selenium-test":i,"data-test-id":o,defaultOpen:a,disabled:s,inputRef:c,readOnly:l,onChange:u,value:d})=>{const p=x(b.b),{status:m,results:f}=Object(O.b)(p,E),v=Object(r.useMemo)(()=>{if(!f||Object(y.e)(m)||Object(y.g)(m))return new Set;const{references:e}=f,t=e.map(e=>e.id);Object(j.a)(d)&&t.unshift(d);return new Set(t)},[f,m,d]);return Object(h.jsx)(g,{autoFocus:e,buttonUse:t,"data-test-id":o,"data-selenium-test":i,defaultOpen:a,className:n,readOnly:l,disabled:s,currenciesFilter:e=>v.has(e.value),currencyStyle:"long",onChange:u,ref:c,value:d})};t.default=Object(r.memo)(T)},function(e,t,n){"use strict";n.r(t);var r=n(40),i=n(443),o=n(1023),a=n(2679),s=n(468),c=n(2735),l=n(434),u=n(2833),d=n(2709),p=n(752),h=n(279),m=n(2654),f=n(2609),g=n(55),b=n(1344),O=n(2741),y=n(45);var j=({accessLevel:e,className:t,disabled:n,enablePopovers:o,inputMode:a,isNewEmail:s,isOnlyEmail:j,isPrimaryEmail:v,objectTypeId:C,onDelete:x,onPromoteToPrimary:E,onSave:T,property:S,subjectId:I,value:w,showAutoSaveText:_})=>{const[N,A]=Object(r.useState)(void 0),D=void 0===N?w:N,k=Object(r.useCallback)(e=>{const t=e[S.name];null!=t&&A(Object.assign({},D,{value:t}))},[D,S.name]),{onChangeSingle:P,onChangeMultiple:R,validationState:{saveable:F,invalid:L,message:M}}=Object(f.d)({objectId:I,objectTypeId:C,onChange:k,onValidationChange:g.a,propertyDefinition:S,propertyValue:D.value}),B=Object(r.createRef)(),U=Object(r.useCallback)(()=>{x(D)},[x,D]),V=Object(r.useCallback)(()=>{E(D)},[D,E]),H=!F||void 0===N||""===N.value,q=Object(r.useCallback)(()=>{if(!H){T(N,w);A(void 0)}},[N,T,w,H]),G=Object(r.useCallback)(()=>{s?x(D):A(void 0)},[D,s,x]),W=v&&!j||n,z=void 0!==N||n,$=_?Object(y.jsx)(h.a,{message:"customerDataProperties.PropertyInputMultipleEmailV2.save"}):Object(y.jsx)(h.a,{message:"customerDataProperties.PropertyInputMultipleEmailV2.apply"});return Object(y.jsxs)(l.a,{className:t,wrap:"wrap",children:[Object(y.jsx)(c.a,{grow:1,className:"m-right-4 m-y-1",children:Object(y.jsx)(d.a,{className:"m-all-0",onCancel:G,onSave:q,saveDisabled:H,use:"flush",saveLabel:$,children:Object(y.jsx)(O.a,{error:L,validationMessage:M,children:Object(y.jsx)(u.default,{accessLevel:e,disabled:n,enablePopovers:o,inputMode:a,inputRef:B,internalValue:w.value,objectType:Object(b.v)(C),objectTypeId:C,onChange:P,onChangeMultiple:R,onValidationChange:g.a,popoverOpen:!1,setPopoverOpen:g.a,property:S,subjectId:I,value:D.value,formControlUse:"default"})})})}),!s&&Object(y.jsx)(c.a,{alignSelf:"start",shrink:0,className:"m-y-1",children:Object(y.jsxs)(p.a,{children:[!v&&Object(y.jsx)(m.a,{"data-test-id":"multiple-email-make-primary-tooltip",disabled:!z,title:Object(y.jsx)(h.a,{message:"customerDataProperties.PropertyInputMultipleEmailV2.makePrimary.disabledTooltip"}),children:Object(y.jsx)(i.a,{"data-test-id":"multiple-email-make-primary-btn",disabled:z,onClick:V,use:"tertiary-light",size:"sm",children:Object(y.jsx)(h.a,{message:"customerDataProperties.PropertyInputMultipleEmailV2.makePrimary.buttonText"})})}),Object(y.jsx)(m.a,{"data-test-id":"multiple-email-delete-tooltip",disabled:!W,title:Object(y.jsx)(h.a,{message:"customerDataProperties.PropertyInputMultipleEmailV2.delete.disabledTooltip"}),children:Object(y.jsx)(i.a,{"data-test-id":"multiple-email-delete-btn",disabled:W,onClick:U,use:"danger",size:"sm",children:Object(y.jsx)(h.a,{message:"customerDataProperties.PropertyInputMultipleEmailV2.delete.buttonText"})})})]})})]})},v=n(324),C=n(1456);var x=({accessLevel:e,additionalEmails:t,disabled:n,enablePopovers:c,inputMode:l,objectTypeId:u,onPrimaryEmailInputAdded:d,onPrimaryEmailDeleted:p,onPrimaryEmailSaved:m,onPromoteToPrimary:f,onAdditionalEmailInputAdded:b,onAdditionalEmailDeleted:O,onAdditionalEmailSaved:x,primaryEmail:E,property:T,subjectId:S,showAutoSaveText:I})=>{const w=Object(r.useCallback)(()=>{E?b():d()},[d,b,E]);return Object(y.jsxs)(C.a,{children:[Object(y.jsxs)(s.a,{style:{width:"100%"},children:[Object(y.jsx)(o.a,{"data-selenium-test":"email-input-primary-heading",children:Object(y.jsx)(h.a,{message:"customerDataProperties.PropertyInputMultipleEmailV2.primaryEmail"})}),E&&Object(y.jsx)(j,{accessLevel:e,disabled:n,enablePopovers:c,isNewEmail:E.isNewEmail,isOnlyEmail:0===t.length,isPrimaryEmail:!0,objectTypeId:u,onDelete:p,onPromoteToPrimary:g.a,onSave:m,property:T,subjectId:S,value:E,showAutoSaveText:I,inputMode:l},E.id)]}),E&&Object(y.jsxs)(s.a,{style:{width:"100%"},children:[Object(y.jsx)(o.a,{"data-selenium-test":"email-input-additional-heading",children:Object(y.jsx)(h.a,{message:"customerDataProperties.PropertyInputMultipleEmailV2.additionalEmails"})}),t.map(t=>Object(y.jsx)(j,{accessLevel:e,className:"m-top-4",disabled:n,enablePopovers:c,isOnlyEmail:!1,isNewEmail:t.isNewEmail,isPrimaryEmail:!1,objectTypeId:u,onDelete:O,onPromoteToPrimary:f,onSave:x,property:T,subjectId:S,value:t,showAutoSaveText:I,inputMode:l},t.id))]}),Object(y.jsxs)(i.a,{className:"p-left-0",disabled:n,onClick:w,use:"transparent",children:[Object(y.jsx)(a.a,{name:"add",size:"xxs",color:v.CALYPSO_DARK}),Object(y.jsx)(h.a,{message:"customerDataProperties.PropertyInputMultipleEmailV2.addEmail"})]})]})},E=n(453),T=n(2754),S=n(99),I=n(357),w=n(550),_=n(696);var N=({onClose:e})=>Object(y.jsx)(s.a,{children:Object(y.jsx)(_.a,{closeable:!0,onClose:e,type:"danger",children:Object(y.jsx)(h.a,{message:"customerDataProperties.PropertyInputMultipleEmailV2.asyncErrorMessage"})})}),A=n(2632),D=n(1403);const k=()=>Object(w.a)("email"),P=({additionalEmails:e,value:t})=>({draftAdditionalEmails:(null!=e&&""!==e?e.split(";"):[]).map(e=>({id:k(),isNewEmail:!1,value:e})),draftDeletedEmail:void 0,draftPrimaryEmail:{id:k(),isNewEmail:!t,value:t||""},isEditable:!0,shouldShowErrorBanner:!1}),R=(e,t)=>{switch(t.type){case"ADDITIONAL_EMAIL_INPUT_ADDED":return Object.assign({},e,{draftAdditionalEmails:[...e.draftAdditionalEmails,{id:k(),isNewEmail:!0,value:""}]});case"ADDITIONAL_EMAIL_DELETE_SUCCEEDED":return Object.assign({},e,{draftAdditionalEmails:e.draftAdditionalEmails.filter(e=>e.id!==t.payload.email.id),draftDeletedEmail:void 0,isEditable:!0,shouldShowErrorBanner:!1});case"ASYNC_ACTION_STARTED":return Object.assign({},e,{isEditable:!1,shouldShowErrorBanner:!1});case"ASYNC_ACTION_FAILED":return Object.assign({},e,{isEditable:!0,shouldShowErrorBanner:!0});case"ADDITIONAL_EMAIL_SAVE_SUCCEEDED":return Object.assign({},e,{draftAdditionalEmails:e.draftAdditionalEmails.reduce((e,n)=>{n.id===t.payload.email.id?e.push(Object.assign({},t.payload.email,{isNewEmail:!1})):e.push(n);return e},[]),isEditable:!0});case"EMAIL_PROMOTED_TO_PRIMARY_SUCCEEDED":return!e.draftPrimaryEmail||e.draftPrimaryEmail.isNewEmail?Object.assign({},e,{draftPrimaryEmail:t.payload.email,draftAdditionalEmails:e.draftAdditionalEmails.filter(e=>e.id!==t.payload.email.id),isEditable:!0}):Object.assign({},e,{draftPrimaryEmail:t.payload.email,draftAdditionalEmails:[e.draftPrimaryEmail,...e.draftAdditionalEmails.filter(e=>e.id!==t.payload.email.id)],isEditable:!0});case"PRIMARY_EMAIL_INPUT_ADDED":return Object.assign({},e,{draftPrimaryEmail:{id:k(),isNewEmail:!0,value:""}});case"PRIMARY_EMAIL_DELETE_SUCCEEDED":return Object.assign({},e,{draftDeletedEmail:void 0,draftPrimaryEmail:void 0,isEditable:!0});case"PRIMARY_EMAIL_SAVE_SUCCEEDED":return Object.assign({},e,{draftPrimaryEmail:Object.assign({},t.payload.email,{isNewEmail:!1}),isEditable:!0});case"ERROR_BANNER_CLOSED":return Object.assign({},e,{shouldShowErrorBanner:!1});case"EMAIL_DELETE_STARTED":return Object.assign({},e,{draftDeletedEmail:t.payload.email});case"EMAIL_DELETE_CANCELED":return Object.assign({},e,{draftDeletedEmail:void 0});case"EMAIL_DELETE_FAILED":return Object.assign({},e,{isEditable:!0,shouldShowErrorBanner:!0,draftDeletedEmail:void 0});default:throw new Error("Unknown action detected")}},F=()=>Promise.reject(new Error("Not implemented")),L=({actions:e={addAdditionalEmail:F,deleteAdditionalEmail:F,makeEmailPrimary:F,updatePrimaryEmail:F,updateAdditionalEmail:F},accessLevel:t,additionalEmails:n,"data-selenium-test":i,className:o,disabled:a,enablePopovers:s,inputMode:c,objectTypeId:l,popoverOpen:u,popoverProps:d,property:p,readOnly:m,setPopoverOpen:f,subjectId:g,value:b,showAutoSaveText:O=!0})=>{const[j,v]=Object(r.useReducer)(R,{additionalEmails:n,value:b},P),C=Object(r.useCallback)(()=>{m||a||f(!0)},[a,m,f]),w=Object(r.useCallback)(e=>{f(e.target.value)},[f]),_=Object(r.useCallback)(()=>v({type:"ERROR_BANNER_CLOSED"}),[]),k=Object(r.useCallback)(()=>{v({type:"ADDITIONAL_EMAIL_INPUT_ADDED"})},[]),L=Object(r.useCallback)(t=>{v({type:"ASYNC_ACTION_STARTED"});Object(D.a)(e.deleteAdditionalEmail(t.value).then(()=>v({type:"ADDITIONAL_EMAIL_DELETE_SUCCEEDED",payload:{email:t}})).catch(()=>v({type:"EMAIL_DELETE_FAILED"})))},[e]),M=Object(r.useCallback)((t,n)=>{v({type:"ASYNC_ACTION_STARTED"});t.isNewEmail?Object(D.a)(e.addAdditionalEmail(t.value).then(()=>v({type:"ADDITIONAL_EMAIL_SAVE_SUCCEEDED",payload:{email:t}})).catch(()=>v({type:"ASYNC_ACTION_FAILED"}))):Object(D.a)(e.updateAdditionalEmail(n.value,t.value).then(()=>v({type:"ADDITIONAL_EMAIL_SAVE_SUCCEEDED",payload:{email:t}})).catch(()=>v({type:"ASYNC_ACTION_FAILED"})))},[e]),B=Object(r.useCallback)(t=>{v({type:"ASYNC_ACTION_STARTED"});Object(D.a)(e.makeEmailPrimary(t.value).then(()=>v({type:"EMAIL_PROMOTED_TO_PRIMARY_SUCCEEDED",payload:{email:t}})).catch(()=>v({type:"ASYNC_ACTION_FAILED"})))},[e]),U=Object(r.useCallback)(()=>{v({type:"PRIMARY_EMAIL_INPUT_ADDED"})},[]),V=Object(r.useCallback)(t=>{v({type:"ASYNC_ACTION_STARTED"});Object(D.a)(e.updatePrimaryEmail("").then(()=>{v({type:"PRIMARY_EMAIL_DELETE_SUCCEEDED",payload:{email:t}})}).catch(()=>v({type:"EMAIL_DELETE_FAILED"})))},[e]),H=Object(r.useCallback)(t=>{v({type:"ASYNC_ACTION_STARTED"});Object(D.a)(e.updatePrimaryEmail(t.value).then(()=>v({type:"PRIMARY_EMAIL_SAVE_SUCCEEDED",payload:{email:t}})).catch(()=>v({type:"ASYNC_ACTION_FAILED"})))},[e]),q=Object(r.useCallback)(e=>{e.isNewEmail?v({type:"PRIMARY_EMAIL_DELETE_SUCCEEDED",payload:{email:e}}):v({type:"EMAIL_DELETE_STARTED",payload:{email:e}})},[]),G=Object(r.useCallback)(e=>{e.isNewEmail?v({type:"ADDITIONAL_EMAIL_DELETE_SUCCEEDED",payload:{email:e}}):v({type:"EMAIL_DELETE_STARTED",payload:{email:e}})},[]),W=Object(r.useCallback)(()=>{j.draftDeletedEmail&&(j.draftPrimaryEmail&&j.draftDeletedEmail.id===j.draftPrimaryEmail.id?V(j.draftDeletedEmail):L(j.draftDeletedEmail))},[L,V,j.draftDeletedEmail,j.draftPrimaryEmail]),z=Object(r.useCallback)(()=>v({type:"EMAIL_DELETE_CANCELED"}),[]),$=Object(r.useMemo)(()=>[j.draftPrimaryEmail?j.draftPrimaryEmail.value:"",...j.draftAdditionalEmails.map(e=>e.value)],[j.draftAdditionalEmails,j.draftPrimaryEmail]),K=Object(y.jsxs)(y.Fragment,{children:[j.shouldShowErrorBanner&&Object(y.jsx)(N,{onClose:_}),Object(y.jsx)(x,{accessLevel:t,additionalEmails:j.draftAdditionalEmails,disabled:!j.isEditable,enablePopovers:s,inputMode:c,primaryEmail:j.draftPrimaryEmail,objectTypeId:l,subjectId:g,onPrimaryEmailInputAdded:U,onPrimaryEmailDeleted:q,onPrimaryEmailSaved:H,onPromoteToPrimary:B,onAdditionalEmailInputAdded:k,onAdditionalEmailDeleted:G,onAdditionalEmailSaved:M,property:p,showAutoSaveText:O})]});return Object(y.jsxs)(T.a,{size:{xs:12},className:"p-x-0",children:[Object(y.jsx)(E.a,Object.assign({closeOnOutsideClick:!0,width:500,placement:"right"},d,{open:u,content:K,onOpenChange:w,className:"p-bottom-4",children:Object(y.jsx)("div",{onClick:C,className:o,"data-selenium-test":i,children:Object(y.jsx)(I.a,{children:$.join(Object(S.a)("customerDataProperties.PropertyInputMultipleEmailV2.commaSeparatorKey"))})})})),j.draftDeletedEmail&&Object(y.jsx)(A.a,{confirmLabel:Object(y.jsx)(h.a,{message:"customerDataProperties.PropertyInputMultipleEmailV2.delete.confirmLabel"}),confirmUse:"danger",description:Object(y.jsx)("div",{children:Object(y.jsx)(h.a,{message:"customerDataProperties.PropertyInputMultipleEmailV2.delete.description",options:{email:j.draftDeletedEmail.value}})}),message:Object(y.jsx)("span",{children:Object(y.jsx)(h.a,{message:"customerDataProperties.PropertyInputMultipleEmailV2.delete.title"})}),onConfirm:W,onReject:z,rejectLabel:Object(y.jsx)(h.a,{message:"customerDataProperties.PropertyInputMultipleEmailV2.delete.rejectLabel"}),size:"auto",use:"danger"})]})};t.default=Object(r.memo)(L)},function(e,t,n){"use strict";var r=n(2),i=n(41),o=n.n(i),a=n(40),s=n(2739),c=n(475),l=n(285),u=n(2682),d=n(456),p=n(288),h=n.n(p),m=n(324),f=n(287),g=n.n(f),b=n(297),O=n(298),y=n(2679),j=n(341),v=n(307),C=n(447),x=n(45);const E=["className","defaultValue","dropdownClassName","groupType","hovered","menuHovered","onMenuHoveredChange","options","popoverProps","value","onChange"],T=["hovered"],S=g()(C.a).withConfig({displayName:"SubDropdownMenu__SubDropdown",componentId:"skm4xh-0"})(["&&&{background-color:",";}"],({open:e})=>e?m.GYPSUM:null);S.displayName="SubDropdownMenu__SubDropdown";const I=()=>Object(x.jsx)(y.a,{name:"right",size:"xxs",color:m.EERIE});class w extends a.PureComponent{constructor(...e){super(...e);this.handleKeyDown=e=>{const{key:t}=e,{onMenuHoveredChange:n}=this.props;if("ArrowRight"===t||"Enter"===t||" "===t){this.getComputedOpen()||"Enter"!==t||e.preventDefault();n(Object(O.a)(!0));e.stopPropagation()}};this.handleKeyUp=e=>{const{key:t}=e;if("ArrowRight"===t||"Enter"===t||" "===t){const t=this._menuEl.querySelector("li");t&&t.children[0].focus();e.preventDefault();e.stopPropagation()}};this.handleKeyUpOnMenu=e=>{const{key:t}=e,{onMenuHoveredChange:n}=this.props;if("Escape"!==t);else{n(Object(O.a)(!1));e.stopPropagation()}};this.handleKeyDownOnMenu=e=>{const{key:t}=e,{onMenuHoveredChange:n}=this.props;if(this.getComputedOpen())if("ArrowLeft"!==t){if("ArrowDown"===t||"ArrowUp"===t){Object(v.m)("li",this._menuEl,"ArrowUp"===t)&&e.preventDefault();e.stopPropagation()}}else{n(Object(O.a)(!1));e.stopPropagation()}};this.menuRefCallback=e=>{this._menuEl=e};this.renderChildren=({options:e,groupType:t,value:n,onChange:r})=>{let i=e;"radio"===t&&(i=i.map(e=>{const t=Object.assign({},e);t.selected=n===e.value;t.onClick=n=>{n.preventDefault();n.stopPropagation();this.props.value!==t.value&&r(Object(O.a)(t.value));Object(b.a)(e.onClick,n)};return t}));return V(i)}}getComputedOpen(){const{menuHovered:e,open:t}=this.props;return t||this._hovered||e}render(){const e=this.props,{className:t,defaultValue:n,dropdownClassName:i,groupType:o,onMenuHoveredChange:a,options:s,popoverProps:c,value:l,onChange:u}=e,d=Object(r.a)(e,E),p=h()(t,i,"private-dropdown--list");return Object(x.jsx)(j.a,Object.assign({},this.props,{children:e=>{const{hovered:t}=e,i=Object(r.a)(e,T);this._hovered=t;const h=this.getComputedOpen();return Object(x.jsx)(S,Object.assign({},d,i,{popoverProps:Object.assign({_distanceAdjustment:-4,_insetAdjustment:8},c,{onMouseEnter:()=>a(Object(O.a)(!0)),onMouseLeave:()=>a(Object(O.a)(!1)),onKeyDown:this.handleKeyDownOnMenu,onKeyUp:this.handleKeyUpOnMenu}),caretRenderer:I,dropdownClassName:p,placement:"right bottom",open:h,onKeyUp:this.handleKeyUp,onKeyDown:this.handleKeyDown,animateOnToggle:!1,autoPlacement:"horiz",children:Object(x.jsx)("div",{"data-dropdown-menu":!0,ref:this.menuRefCallback,children:this.renderChildren({options:s,groupType:o,value:l||n,onChange:u})})}))}}))}}w.propTypes=Object.assign({},C.a.propTypes,{groupType:o.a.oneOf(["none","radio"]),hovered:o.a.bool,open:o.a.bool,value:o.a.string});w.defaultProps=Object.assign({},C.a.defaultProps,{groupType:"none",menuWidth:"auto"});w.displayName="SubDropdownMenu";var _=Object(u.a)(w,["menuHovered","value"]),N=n(443),A=n(302),D=n(2654);const k=["children","selected","tooltip"],P=g.a.span.withConfig({displayName:"DropdownMenuOption__ButtonChildWrapper",componentId:"sc-1ykvqzp-0"})(["display:flex;justify-content:space-between;align-items:center;"]);function R(e){let{children:t,selected:n,tooltip:i}=e,o=Object(r.a)(e,k);const a=null!==n?{role:"menuitemcheckbox","aria-checked":n}:{role:"menuitem"};return Object(x.jsx)(D.a,{title:i,placement:"right",children:Object(x.jsx)(N.a,Object.assign({use:"transparent"},o,a,{children:Object(x.jsxs)(P,{children:[Object(x.jsx)("span",{className:"private-dropdown__button-label uiDropdown__buttonLabel",children:t}),n?Object(x.jsx)(y.a,{name:"success",size:parseInt(A.w,10),color:m.EERIE}):null]})}))})}R.propTypes={children:o.a.node,selected:o.a.bool,tooltip:o.a.node};R.defaultProps={selected:null};R.displayName="DropdownMenuOption";var F=n(701),L=n(467);const M=["label","options"],B=["label"],U=(e,t)=>{if(Object(a.isValidElement)(e)){Object(L.a)(e,"renderMultiLevelMenu","option");return Object(a.cloneElement)(e,{key:t})}if(e.label&&e.options){const{label:n,options:i}=e,o=Object(r.a)(e,M);return Object(x.jsx)(_,Object.assign({buttonText:n},o,{options:i}),t)}if(e.label){const{label:n}=e,i=Object(r.a)(e,B);return Object(x.jsx)(R,Object.assign({},i,{children:n}),t)}return null},V=e=>e&&0!==e.length?Object(x.jsx)(d.a,{role:"menu",children:e.map((t,n)=>{if(Array.isArray(t)){const r=t.map((e,t)=>U(e,t));e.length>n+1&&r.push(Object(x.jsx)(F.a,{}));return r}return U(t,n)})}):null,H=["buttonRef","options"];class q extends a.PureComponent{constructor(...e){super(...e);this.buttonRef=Object(a.createRef)();this.renderMenu=()=>{const{options:e}=this.props;return V(e)}}componentDidUpdate(e){const{buttonRef:t,open:n}=this.props;!0===e.open&&!1===n&&Object(l.a)()&&(t||this.buttonRef).current.focus()}render(){const e=this.props,{buttonRef:t}=e,n=Object(r.a)(e,H);return Object(x.jsx)(s.a,Object.assign({},n,{animateOnToggle:!1,buttonRef:t||this.buttonRef,Content:this.renderMenu}))}}q.propTypes=Object.assign({},Object(c.a)(s.a.propTypes,["animateOnMount","animateOnToggle","Content"]),{options:o.a.arrayOf(o.a.oneOfType([o.a.shape({label:o.a.node,selected:o.a.bool,options:o.a.oneOfType([o.a.array,o.a.node])}),o.a.node,o.a.arrayOf(o.a.shape({label:o.a.node,selected:o.a.bool,options:o.a.oneOfType([o.a.array,o.a.node])}))])).isRequired});q.defaultProps=Object.assign({},s.a.defaultProps);q.displayName="UIMultiLevelDropdown";t.a=Object(u.a)(q,["open"])},function(e,t,n){"use strict";var r=n(40),i=n(1432),o=n(1405),a=n(1408),s=n(1472),c=n(1471);const l=Object(c.a)(({pipelineId:e})=>e);class u{constructor(){this.cache={}}get({objectTypeId:e,httpClient:t}){if(Object.prototype.hasOwnProperty.call(this.cache,e))return this.cache[e];const n=t.get(`/pipelines/v2/pipelines/${encodeURIComponent(e)}?includeApprovalStageStatus=true`).then(e=>l(e));this.cache[e]=n;return n}clear(){this.cache={}}}const d=new u;var p=n(1470),h=n(1404);const m=()=>{const[e,t]=Object(r.useState)({data:null,loading:!0}),n=Object(h.a)(),i=Object(o.a)();Object(r.useEffect)(()=>{null===e.data&&d.get({objectTypeId:i,httpClient:n}).then(e=>t({data:e,loading:!1})).catch(e=>t({data:{},loading:!1,error:e}))},[i,n,e.data]);const a=Object(r.useCallback)(t=>{const{data:n}=e,{originStageId:r,originPipelineId:i,targetStageId:o,targetPipelineId:a}=t;if(n&&a&&n[a]){const e=n[a];return Object(p.d)({targetPipeline:e,originStageId:r,targetStageId:o,originPipelineId:i})}return{isValid:!0}},[e]);return Object(r.useMemo)(()=>({loading:e.loading,stageChangeValidator:a}),[e.loading,a])};var f=n(1410),g=n(279),b=n(443),O=n(724),y=n(751),j=n(723),v=n(2766),C=n(2703),x=n(55),E=n(717),T=n(45);const S=(e,t)=>{switch(t.type){case"OPEN_MODAL":return{isOpen:!0,onConfirm:t.onConfirm,onCancel:t.onCancel};case"CLOSE_MODAL":return{isOpen:!1,onConfirm:x.a,onCancel:x.a};default:return e}},I={isOpen:!1,onConfirm:x.a,onCancel:x.a},w=({onConfirm:e,onCancel:t})=>Object(T.jsxs)(v.a,{width:450,use:"danger",children:[Object(T.jsxs)(j.a,{children:[Object(T.jsx)(C.a,{children:Object(T.jsx)(g.a,{message:"customerDataProperties.stageValidation.modals.restartApproval.header"})}),Object(T.jsx)(E.a,{onClick:t})]}),Object(T.jsx)(O.a,{children:Object(T.jsx)(g.a,{message:"customerDataProperties.stageValidation.modals.restartApproval.body"})}),Object(T.jsxs)(y.a,{children:[Object(T.jsx)(b.a,{use:"danger",onClick:e,children:Object(T.jsx)(g.a,{message:"customerDataProperties.stageValidation.modals.restartApproval.footer.confirm"})}),Object(T.jsx)(b.a,{use:"tertiary-light",onClick:t,children:Object(T.jsx)(g.a,{message:"customerDataProperties.stageValidation.modals.restartApproval.footer.cancel"})})]})]}),_=()=>{const[e,t]=Object(r.useReducer)(S,I),n=Object(r.useCallback)(e=>{t(Object.assign({type:"OPEN_MODAL"},e))},[t]),i=Object(r.useCallback)(()=>{t({type:"CLOSE_MODAL"})},[t]),o=Object(r.useMemo)(()=>e.isOpen?Object(T.jsx)(w,{onConfirm:e.onConfirm,onCancel:e.onCancel}):null,[e]);return Object(r.useMemo)(()=>({openModal:n,closeModal:i,stageValidationModal:o}),[n,i,o])};var N=n(1400);n.d(t,"a",(function(){return A}));const A=e=>{const{onChangeMultiple:t,inputMode:n}=e,c=Object(o.a)(),l=Object(N.a)(),u=Object(a.d)(c),d=Object(a.c)(c),{data:p,loading:h}=Object(i.a)({originStageId:u,originPipelineId:d}),g=null==p?void 0:p.originStageId,b=null==p?void 0:p.originPipelineId,{loading:O,stageChangeValidator:y}=m(),{stageValidationModal:j,openModal:v,closeModal:C}=_(),x=Object(r.useCallback)((e,n)=>{y(e).code!==s.a?t(n):v({onConfirm:()=>{t(n);C()},onCancel:()=>{C()}})},[v,C,t,y]),E=Object(r.useCallback)(e=>{if(!l||n!==f.c){t(e);return}const r=e[u],i=e[d]||b;r&&i?x({originStageId:g,originPipelineId:b,targetStageId:r,targetPipelineId:i},e):t(e)},[b,t,u,x,d,g,l,n]);return Object(r.useMemo)(()=>({stageChangeValidatorLoading:O||h,stageValidationModal:j,onChangeWithStageValidation:E}),[O,h,j,E])}},,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";var r=n(40),i=n(59),o=n(73),a=n(4),s=n(1043),c=n(67),l=n(173),u=n(1045),d=n(2642),p=n(1057),h=n(2800),m=n(1058),f=n(1059),g=n(2801),b=n(2802),O=n(1061),y=n(2803),j=n(1062),v=n(1063),C=n(1065),x=n(2792),E=n(1066),T=n(2793),S=n(1067),I=n(2781),w=n(1070),_=n(1054),N=n(1074),A=n(1075),D=n(2805),k=n(1076),P=n(1077),R=n(2806),F=n(1078),L=n(2807),M=n(1079),B=n(1080),U=n(1082),V=n(2782),H=n(1083),q=n(1085),G=n(2808),W=n(177),z=n(160);const $=Object.freeze({[z.BLOG]:z.BLOG,[z.CRM_OBJECT]:z.CRM_OBJECT,[z.CRM_OBJECT_PROPERTY]:z.CRM_OBJECT_PROPERTY,[z.CTA]:z.CTA,[z.FOLLOW_UP_EMAIL]:z.FOLLOW_UP_EMAIL,[z.FORM]:z.FORM,[z.HUBDB_ROW]:z.HUBDB_ROW,[z.HUBDB_TABLE]:z.HUBDB_TABLE,[z.ICON]:z.ICON,[z.LINK]:z.LINK,[z.MEETING]:z.MEETING,[z.MENU]:z.MENU,[z.PAGE]:z.PAGE,[z.PAYMENT]:z.PAYMENT,[z.SFDC_CAMPAIGN]:z.SFDC_CAMPAIGN,[z.SURVEY]:z.SURVEY,[z.TAG]:z.TAG,[z.URL]:z.URL,[z.VIDEO]:z.VIDEO,[z.WORKFLOW]:z.WORKFLOW}),K={[z.FORM]:(e,t)=>Object(u.e)(e,{formGuid:t}),[z.PAGE]:(e,t)=>Object(p.b)(e,{id:t}),[z.FOLLOW_UP_EMAIL]:(e,t)=>Object(m.d)(e,{id:t}),[z.MENU]:(e,t)=>Object(g.d)(e,{id:t}),[z.TAG]:(e,{value:t,tagValue:n})=>Object(O.a)(e,{value:t,tagValue:n}),[z.BLOG]:(e,t)=>Object(j.a)(e,{id:t}),[z.CTA]:(e,t)=>Object(C.a)(e,{guid:t}),[z.ICON]:(e,{name:t})=>Object(E.a)(e,{name:t}),[z.HUBDB_TABLE]:(e,t)=>Object(S.i)(e,{id:t}),[z.WORKFLOW]:(e,t)=>Object(_.c)(e,{id:t}),[z.MEETING]:(e,t)=>{const n=Object(A.b)(e,{link:t});return n&&{label:Object(k.a)(n)}},[z.SFDC_CAMPAIGN]:(e,t)=>Object(P.a)(e,{id:t}),[z.SURVEY]:(e,{id:t,surveyType:n})=>Object(F.a)(e,{id:t,surveyType:n}),[z.VIDEO]:(e,t)=>Object(M.a)(e,{playerId:t}),[z.URL]:(e,t)=>{const{type:n,content_id:r}=t||{};return n===W.a.BLOG?Object(j.a)(e,{id:r}):n===W.a.CONTENT?Object(p.b)(e,{id:r}):null},[z.LINK]:(e,t)=>{const{type:n,content_id:r}=t&&t.url?t.url:{};return n===W.a.BLOG?Object(j.a)(e,{id:r}):n===W.a.CONTENT?Object(p.b)(e,{id:r}):null},[z.CRM_OBJECT]:(e,t)=>{const{display_format:n,display_properties:r,id:i,object_type:o}=t||{},a=Object(U.a)(e,{id:i,objectType:o}),s=Object(U.g)(e,{objectType:o});return a&&{label:Object(H.c)(a,s,{displayFormat:n,displayProperties:r})}},[z.CRM_OBJECT_PROPERTY]:(e,t)=>{const{property:n,object_type:r}=t||{};return Object(U.g)(e,{objectType:r})&&n&&{label:Object(U.e)(e,{objectType:r,property:n})}},[z.HUBDB_ROW]:(e,t)=>{const n="id",r=Object(S.f)(e,{displayColumns:t.displayColumns,displayFormat:t.displayFormat,[n]:t[n],rowId:t.rowId}),i=r&&Object(w.a)(r);return i&&i.length&&{label:i}},[z.PAYMENT]:(e,t)=>Object(q.c)(e,{id:t})},Y={[z.FORM]:(e,t)=>Object(u.g)(e,{formGuid:t}),[z.PAGE]:(e,t)=>Object(p.d)(e,{id:t}),[z.FOLLOW_UP_EMAIL]:(e,t)=>Object(m.g)(e,{id:t}),[z.MENU]:(e,t)=>Object(g.f)(e,{id:t}),[z.TAG]:(e,{value:t})=>Object(O.c)(e,{key:t}),[z.BLOG]:(e,t)=>Object(j.c)(e,{id:t}),[z.CTA]:(e,t)=>Object(C.b)(e,{guid:t}),[z.ICON]:(e,{name:t})=>Object(E.b)(e,{name:t}),[z.HUBDB_TABLE]:(e,t)=>Object(S.k)(e,{id:t}),[z.WORKFLOW]:(e,t)=>Object(_.d)(e,{id:t}),[z.MEETING]:(e,t)=>Object(A.d)(e,{link:t}),[z.SFDC_CAMPAIGN]:(e,t)=>Object(P.b)(e,{id:t}),[z.SURVEY]:(e,{id:t,surveyType:n})=>Object(F.c)(e,{id:t,surveyType:n}),[z.VIDEO]:(e,t)=>Object(M.b)(e,{playerId:t}),[z.URL]:(e,t)=>{const{type:n,content_id:r}=t||{};return n===W.a.BLOG?Object(j.c)(e,{id:r}):n===W.a.CONTENT?Object(p.d)(e,{id:r}):null},[z.LINK]:(e,t)=>{const{type:n,content_id:r}=t&&t.url?t.url:{};return n===W.a.BLOG?Object(j.c)(e,{id:r}):n===W.a.CONTENT?Object(p.d)(e,{id:r}):null},[z.CRM_OBJECT]:(e,t)=>{const{id:n,object_type:r}=t||{};return Object(U.d)(e,{id:n,objectType:r})},[z.CRM_OBJECT_PROPERTY]:(e,t)=>{const{object_type:n}=t||{};return Object(U.i)(e,{objectType:n})},[z.HUBDB_ROW]:(e,t)=>{const{rowId:n}=t||{};return Object(S.e)(e,{id:n})},[z.PAYMENT]:(e,t)=>Object(q.f)(e,{id:t})},X={[z.FORM]:d.l,[z.PAGE]:h.b,[z.FOLLOW_UP_EMAIL]:f.d,[z.MENU]:b.c,[z.TAG]:({value:e,tagValue:t})=>Object(y.b)(e,t),[z.BLOG]:v.c,[z.CTA]:x.a,[z.ICON]:e=>{const{name:t,icon_set:n}=e||{};return Object(T.b)(n,{search:t})},[z.HUBDB_TABLE]:I.d,[z.WORKFLOW]:N.b,[z.MEETING]:D.b,[z.SFDC_CAMPAIGN]:R.a,[z.SURVEY]:L.b,[z.VIDEO]:B.a,[z.URL]:e=>{const{type:t,content_id:n}=e||{};return t===W.a.BLOG?Object(v.c)(n):t===W.a.CONTENT?Object(h.b)(n):()=>{}},[z.LINK]:e=>{const{type:t,content_id:n}=e&&e.url?e.url:{};return t===W.a.BLOG?Object(v.c)(n):t===W.a.CONTENT?Object(h.b)(n):()=>{}},[z.CRM_OBJECT]:e=>{const{id:t,display_properties:n,object_type:r}=e||{};return r&&t?(e,i)=>{if(Object(U.g)(i(),{objectType:r}))return e(Object(V.d)(r,n,t));e(Object(V.e)(r)).then(()=>{e(Object(V.d)(r,n,t))}).catch(e=>{setTimeout(()=>{throw e})})}:()=>{}},[z.CRM_OBJECT_PROPERTY]:e=>{const{object_type:t}=e||{};return t?(e,n)=>{const r=Object(U.g)(n(),{objectType:t});return r||e(Object(V.e)(t))}:()=>{}},[z.HUBDB_ROW]:e=>{const{rowId:t,id:n}=e||{};return n&&t?(e,r)=>{const i=r(),o=Object(S.i)(i,{id:n}),a=Object(S.o)(i,{id:n});if(o&&!a)return e(Object(I.b)({rowId:t,tableId:n}));e(Object(I.d)(n)).then(r=>{const o=isNaN(parseInt(n,10))?r.objects[0]:r;if(o&&!Object(S.o)(i,{id:o.id})){const n=o&&o.id;e(Object(I.b)({rowId:t,tableId:n}))}}).catch(e=>{setTimeout(()=>{throw e})})}:()=>{}},[z.PAYMENT]:G.a};var J=n(66);const Q=(e,t)=>{const{type:n}=t;if(!e)return null;if(n===z.ICON)return{name:e.name,icon_set:t.icon_set};if(n===z.FORM&&"object"==typeof e)return e.form_id;if(n===z.VIDEO)return e.player_id;if(n===z.SURVEY)return e;if(n===z.URL)return e;if(n===z.LINK)return e;if(n===z.LOCATION)return e;if(n===z.CRM_OBJECT)return Object.assign({},e||{},{display_format:t.display_format,display_properties:t.display_properties,object_type:t.object_type});if(n===z.CRM_OBJECT_PROPERTY)return Object.assign({},e||{},{object_type:t.object_type});if(n===z.TAG)return{value:e,tagValue:t.tag_value};if(n===z.HUBDB_ROW){const n="id";return{displayColumns:t.display_columns,displayFormat:t.display_format,[n]:t.table_name_or_id,rowId:e.id}}return n===z.PAYMENT?e.id:e},Z=e=>!(e===J.PENDING||e===J.SUCCEEDED);var ee=n(178),te=n(324),ne=n(167),re=n(506),ie=n(434),oe=n(1086),ae=n(1088),se=n(1089),ce=n(45);const le=Object(o.invert)(ne.c),ue=20;function de(e,t){const n=Q(t.value,t.field),r=t.field.type;if(!r||!n||!$[r])return{};const i=K[r],o=Y[r];return{resource:i(e,n),status:o(e,n)}}const pe=(e,t)=>{const n=t.field.type;if(!n||!$[n])return{};const r=X[n];return{fetchResource:t=>e(r(t))}};class he extends r.Component{constructor(...e){super(...e);this.ConnectedOccurrenceLabel=Object(i.connect)(de,pe)(he)}componentDidMount(){const{fetchResource:e,field:t,resource:n,status:r,value:i}=this.props;if(!n&&e&&Z(r)){const n=Q(i,t);n&&e(n)}}renderConnectedResource(e){let t=e.label||e.name;this.props.field.type===z.CTA&&(t=e.name);return this.props.field.type===z.ICON?this.renderIcon():Object(ce.jsx)("span",{children:t})}renderGroup(e){const{field:t,asString:n,resources:r,defaultLabel:i}=this.props;if(!Object(o.isObject)(e)||!Object.keys(e).length||!t.children)return Object(ce.jsx)("span",{children:i});let a=t.occurrence&&t.occurrence.sorting_label_field&&t.children.find(e=>e.id===t.occurrence.sorting_label_field);a=a||t.children[0];return a?Object(ce.jsx)(this.ConnectedOccurrenceLabel,{defaultLabel:i,value:e[a.name],field:a,resources:r,asString:n}):Object(ce.jsx)("span",{children:i})}renderImage(e){const{asString:t,defaultLabel:n}=this.props;let r=e.alt;if(!r&&e.src){const t=e.src.split("/");r=t[t.length-1]}else r||(r=n);return t||!e.src?Object(ce.jsx)("span",{children:r}):Object(ce.jsxs)(ie.a,{align:"center",children:[Object(ce.jsx)(ie.a,{className:"occurrence-label-image-thumbnail",align:"center",justify:"center",children:Object(ce.jsx)(re.a,{src:e.src})}),r]})}renderIcon(){const{asString:e,resource:t,defaultLabel:n,value:r}=this.props;if(e||!r||!t)return Object(ce.jsx)("span",{children:n});const{name:i,type:o}=r,{unicode:a,viewPort:s,categories:c,svg:l}=t,u={name:i,unicode:a,viewPort:s,svg:l,type:o,categories:c};return Object(ce.jsxs)(ie.a,{align:"center",children:[Object(ce.jsx)(ie.a,{className:"occurrence-label-icon",align:"center",justify:"center",children:Object(ce.jsx)(ae.a,{className:"menu-icon",height:ue,iconData:u,width:ue})}),i]})}renderColor(e){const{asString:t}=this.props;e="string"==typeof e?e:e.color;return t?Object(ce.jsx)("span",{children:e}):Object(ce.jsxs)(ie.a,{align:"center",children:[Object(ce.jsx)(oe.a,{className:"m-right-1",color:e,borderColor:te.BATTLESHIP,borderWidth:1,size:10}),e]})}renderChoice(e,t){let n=t;if(!this.choicesCache){const n=t.choices?t.choices:e.choices;this.choicesCache=n&&n.reduce((e,t)=>{t[1]&&(Array.isArray(t[1])?t[1].forEach(t=>{e[t[0]]={text:t[1],value:t[0]}}):e[t[0]]={text:t[1],value:t[0]});return e},{})}if(e.multiple&&Array.isArray(t)&&t.length>1)n=t.map(e=>{const t=this.choicesCache[e]||{text:e,value:e},n=t.text||t.value;return Object(ce.jsx)(se.a,{closeable:!1,value:t,children:Object(ce.jsx)("div",{dangerouslySetInnerHTML:{__html:Object(s.a)(""+n)},title:""+n})},e)});else{const e=this.choicesCache[t],r=e?e.text||e.value:n;n=Object(ce.jsx)("span",{dangerouslySetInnerHTML:{__html:Object(s.a)(r)},title:r})}return Object(ce.jsx)(r.Fragment,{children:n})}render(){const{field:e,resources:t,asString:n,defaultLabel:r,resource:i}=this.props;let{value:s}=this.props;void 0===s&&void 0!==e.default&&(s=e.default);if(Object(c.c)(s)||""===s||e.type===z.SIMPLE_MENU)return Object(ce.jsx)("span",{children:r});if(Array.isArray(s)&&e.type!==z.CHOICE)return s.length?Object(l.b)(e)&&!Array.isArray(s[0])?Object(ce.jsx)("span",{children:s.join(", ")}):Object(ce.jsx)(this.ConnectedOccurrenceLabel,{defaultLabel:r,value:s[0],field:e,resources:t,asString:n}):Object(ce.jsx)("span",{children:r});if(i)return this.renderConnectedResource(i);switch(e.type){case z.GROUP:return this.renderGroup(s);case z.LOGO:case z.IMAGE:return this.renderImage(s);case z.COLOR:return this.renderColor(s);case z.ICON:return this.renderIcon();case z.CHOICE:return this.renderChoice(e,s);case z.DATE:return s?Object(ce.jsx)("span",{children:a.a.moment.portalTz(s).format("L")}):Object(ce.jsx)("span",{children:r});case z.DATE_TIME:return s?Object(ce.jsx)("span",{children:a.a.moment.portalTz(s).format("lll")}):Object(ce.jsx)("span",{children:r});case z.FILE:{const e=s.split("/");return Object(ce.jsx)("span",{children:e[e.length-1]})}case z.RICH_TEXT:{const e=document.createElement("DIV");e.innerHTML=s;return Object(ce.jsx)("span",{children:e.textContent||e.innerText||s})}case z.FORM:case z.SURVEY:case z.BOOLEAN:case z.VIDEO:case z.CRM_OBJECT:case z.CRM_OBJECT_PROPERTY:case z.PAYMENT:case z.HUBDB_ROW:return Object(ce.jsx)("span",{children:r});case z.TAG:return Object(o.isObject)(s)?Object(ce.jsx)("span",{children:s.name}):Object(ce.jsx)("span",{children:s});case z.URL:{const e=Object(o.isObject)(s)&&s.href;return e?Object(ce.jsx)("span",{children:e}):Object(ce.jsx)("span",{children:r})}case z.LINK:{const e=Object(o.isObject)(s)&&s.url&&s.url.href;return e?Object(ce.jsx)("span",{children:e}):Object(ce.jsx)("span",{children:r})}case z.LOCATION:{const e=Object(o.isObject)(s)&&s.lat&&s.long;return e?Object(ce.jsx)("span",{children:e}):Object(ce.jsx)("span",{children:r})}case z.FONT:{const e=Object(o.isObject)(s)&&s.font;if(!e)return Object(ce.jsx)("span",{children:r});const t=le[e];return Object(ce.jsx)("span",{children:t||e})}case z.EMBED:{const e=Object(o.isObject)(s)&&s.source_type;let t=r;e===ee.a.OEMBED&&s.oembed_url?t=s.oembed_url:e===ee.a.HTML&&s.embed_html&&(t=s.embed_html);return Object(ce.jsx)("span",{children:t})}default:return"object"==typeof s?Object(ce.jsx)("span",{children:JSON.stringify(s)}):Object(ce.jsx)("span",{children:s})}}}he.defaultProps={asString:!1,resources:{}};t.a=Object(i.connect)(de,pe)(he)},function(e,t,n){"use strict";var r=n(1098),i=n(30),o=n.n(i),a=n(1),s=n.n(a),c=n(245);const l="hs_name";Object.freeze({AD_SOURCES:"adSources",AD_GROUPS:"adGroups",AD_CAMPAIGNS:"adCampaigns"});function u(e,t){const n=[];e&&e.length&&e.forEach(e=>{n.push({filters:[{property:t,value:e,operator:"EQ"}]})});return n}function d(e=""){const t=[];e&&t.push({filters:[{property:l,value:`*${e}*`,operator:"EQ"}]});return t}function p(e,t){const n=[];t&&n.push({filters:[{property:e,value:t,operator:"EQ"}]});return n}const h=e=>e.reduce((e,t)=>t.filters&&t.filters.length>0?{filters:[...e.filters,...t.filters]}:e,{filters:[]}),m=(Object.freeze(["hs_ad_network","hs_ad_account_id","hs_name","hs_status"]),Object.freeze(["hs_ad_network","hs_ad_account_id","hs_name","hs_status","hs_origin_asset_id","hs_ad_campaign_id","hs_object_id"])),f=Object.freeze(["hs_ad_network","hs_ad_account_id","hs_name","hs_status","hs_ad_group_id","hs_object_id"]),g=Object.freeze(["hs_ad_network","hs_ad_account_id","hs_name","hs_status","hs_ad_group_id","hs_ad_id","hs_object_id"]),b="hs_ad_group_id",O="hs_ad_campaign_id",y="hs_ad_id";function j(e,t,n=o.a){const r=[...u(e,O),...d(t)];return n.post("crm-search/search",{query:{portalId:s.a.get(),properties:m},data:{objectTypeId:"AD_CAMPAIGN",count:50,requestOptions:{includeAllValues:!0},filterGroups:r}})}function v(e,t,n="",r=o.a){const i=p(O,e),a=[...t.map(e=>h([...i,...u([e],b)]))];n&&a.push(h([...i,...d(n)]));t.length||n||a.push(...i);return r.post("crm-search/search",{query:{portalId:s.a.get(),properties:f},data:{objectTypeId:"AD_GROUP",count:50,requestOptions:{includeAllValues:!0},filterGroups:a}})}function C(e,t,n,r=o.a){const i=p(b,""+e),a=[...t.map(e=>h([...i,...u([e],y)]))];n&&a.push(h([...i,...d(n)]));t.length||n||a.push(...i);return r.post("crm-search/search",{query:{portalId:s.a.get(),properties:g},data:{objectTypeId:"AD",count:50,requestOptions:{includeAllValues:!0},filterGroups:a}})}n.d(t,"a",(function(){return S}));n.d(t,"c",(function(){return N}));n.d(t,"b",(function(){return P}));const x=e=>({type:r.h,meta:{criterionIds:e},status:c.o.PENDING}),E=(e,t)=>({type:r.h,payload:t,meta:{criterionIds:e},status:c.o.SUCCEEDED}),T=(e,t)=>({type:r.h,error:!0,payload:t,meta:{criterionIds:e},status:c.o.FAILED});function S(e,{searchValue:t,criterionIds:n}){return r=>{r(x(n));return j(e,t).then(e=>{r(E(n,e));return e}).catch(e=>{r(T(n,e));return e})}}const I=e=>({type:r.i,meta:{criterionIds:e},status:c.o.PENDING}),w=(e,t)=>({type:r.i,payload:t,meta:{criterionIds:e},status:c.o.SUCCEEDED}),_=(e,t)=>({type:r.i,error:!0,payload:t,meta:{criterionIds:e},status:c.o.FAILED});function N(e,t,{searchValue:n,criterionIds:r}){return i=>{i(I(r));return v(e,t,n).then(e=>{i(w(r,e));return e}).catch(e=>{i(_(r,e));return e})}}const A=e=>({type:r.g,meta:{criterionIds:e},status:c.o.PENDING}),D=(e,t,n)=>({type:r.g,payload:n,meta:{adGroupId:t,criterionIds:e},status:c.o.SUCCEEDED}),k=(e,t)=>({type:r.g,error:!0,payload:t,meta:{criterionIds:e},status:c.o.FAILED});function P(e,t,{criterionIds:n,searchValue:r=null}){return i=>{i(A(n));return C(e,t,r).then(t=>{i(D(n,e,t));return t}).catch(e=>{i(k(n,e));return e})}}},function(e,t,n){"use strict";var r=n(40),i=n(288),o=n.n(i),a=n(55),s=n(4),c=n(1186),l=n(434),u=n(2735),d=n(2),p=n(41),h=n.n(p),m=n(10),f=n(2682),g=n(2655),b=n(727),O=n(302),y=n(45);const j=parseInt(O.x,10),v=40,C=40,x=64,E=60;function T(e){return e&&Array.isArray(e.options)}function S(e){return T(e)?C+e.options.reduce((e,t)=>e+S(t),0):e.help?x:e.loading?E:v}function I(e){let t=0;for(let n=0;n<e.length;n++){t+=S(e[n]);if(t>j)return j}return t}const w={};function _(e,t){w[e]||(w[e]=({focusedOption:n,instancePrefix:r,onFocus:i,onOptionRef:a,onSelect:s,optionClassName:c,optionComponent:l,optionGroupComponent:u,optionRenderer:d,options:p,valueArray:h,valueKey:m})=>{const f=p.indexOf(n),g=I(p),O=l,j=u,v=d;function C(e,t,l){if(T(e))return Object(y.jsx)("span",{style:l,children:Object(y.jsx)(j,{className:"Select-option-group",label:v(e),option:e,optionIndex:t,children:e.options.map((e,t)=>C(e,t))})},"option-group-"+t);const u=h&&h.indexOf(e)>-1,d=e===n,p=o()("private-typeahead-option--virtualized Select-option",c,u&&"is-selected",d&&"is-focused",e.disabled&&"is-disabled");return Object(y.jsx)("span",{style:l,children:Object(y.jsx)(O,{className:p,instancePrefix:r,isDisabled:e.disabled,isFocused:d,isSelected:u,onFocus:i,onSelect:s,option:e,optionIndex:t,ref:e=>{a(e,d)},children:v(e,t)})},`option-${t}-${e[m]}`)}function x({index:e}){return S(p[e])}function E({index:e,style:t}){return C(p[e],e,t)}return Object(y.jsx)(b.b,{height:g,rowCount:p.length,rowHeight:x,rowRenderer:E,scrollToIndex:f,width:e,ref:t})});return w[e]}_.displayName="virtualizedMenuRenderer";var N=_,A=n(502),D=n(461),k=n(311),P=n(329);const R=["className","format","interval","menuWidth","size","use","value"],F=1440,L=/\d/,M=e=>e.replace(/\s/g,"").toLowerCase(),B=(e,t)=>s.a.moment.utc(0).minutes(t).format(e),U=(e,t,n,r,i,o)=>{if(n<=0){const e="UITimePicker: Interval cannot be a number less than or equal to 0";m.a.warn({message:e,key:e})}const a=n<=0?1:n,c=[],l="number"==typeof i?i:0,u="number"==typeof r?r:F;for(let e=0;e<F;e+=a){if(l>e||e>u)continue;const n=B(t,e);c.push({text:n,value:e});if(o&&o>e&&o<e+a){const e=s.a.moment.utc(0).minutes(o).format(t);c.push({text:e,value:o})}}e.forEach(e=>{if(!c.some(t=>t.value===e)){const n=B(t,e);c.push({text:n,value:e})}});return c},V=(e,t)=>{if(null==t)return null;if("number"==typeof t)return t;m.a.warn({message:`UITimePicker: String value "${t}" given. This can cause inconsistent behavior.`,key:"UITimePicker: string value"});const n=s.a.moment.utc(t,e);return 60*n.hours()+n.minutes()},H=(e,t)=>{if(!t)return!0;const n=M(t),r=M(e.text),i=n.match(L);if(i&&i[0]!==e.text.match(L)[0])return!1;let o=-1;for(let e=0;e<n.length;e++){const t=r.indexOf(n[e],o+1);if(-1===t)return!1;o=t}return!0},q=(e,t)=>{const n=e.filter(e=>H(e,t)),r=[],i=[];n.forEach(e=>{M(e.text).startsWith(M(t))?r.push(e):i.push(e)});return[...r,...i]},G=e=>{const t=e.replace("Value","");return{message:`UITimePicker: The \`${e}\` prop is deprecated. Use \`${t}\` instead.`,key:"UITimePicker-old-minmax"}},W=e=>Object(y.jsx)(A.a,{"aria-invalid":e.invalid,itemComponent:"span",option:Object.assign({},e,{icon:"time"}),_useButton:!1,_useDropdownText:!1}),z=(e,t)=>"sm"===e&&"on-dark"===t?"sm":"default",$=(e,t)=>"on-dark"===t?"sm"===e?"tertiary-extra-light":"form-on-dark":"sm"===e?"link":"form",K=(e,t)=>e||("sm"===t?300:void 0);class Y extends r.Component{static getDerivedStateFromProps(e,t){const{extraTimes:n,format:r,interval:i,max:o,maxValue:a,min:s,minValue:c,value:l}=e;if(n!==t.prevExtraTimes||r!==t.prevFormat||i!==t.prevInterval||o!==t.prevMax||a!==t.prevMaxValue||s!==t.prevMin||c!==t.prevMinValue||l!==t.prevValue){const e=V(r,l);return{options:U(n,r,i,o||a,s||c,e)}}return null}constructor(e){super(e);this.focus=()=>{this._timeInputRef&&this._timeInputRef.focus()};const{extraTimes:t,format:n,interval:r,max:i,maxValue:o,min:a,minValue:s,value:c}=e,l=V(n,c);this.state={options:U(t,n,r,i||o,a||s,l),prevExtraTimes:e.extraTimes,prevFormat:e.format,prevInterval:e.interval,prevMax:e.max,prevMaxValue:e.maxValue,prevMin:e.min,prevMinValue:e.minValue,prevValue:e.value}}render(){const e=this.props,{className:t,format:n,menuWidth:r,size:i,use:a,value:s}=e,c=Object(d.a)(e,R),l=Object(P.c)(i),u=z(l,a),p=$(l,a),h=K(r,l);return Object(y.jsx)(g.a,Object.assign({},c,{buttonSize:u,buttonUse:p,className:o()("private-timepicker",t),filterOptions:q,matchPos:"start",matchProp:"label",menuRenderer:N,menuWidth:h,options:this.state.options,ref:e=>{this._timeInputRef=e},resetValue:null,value:V(n,s),valueRenderer:W}))}}Y.propTypes={clearable:h.a.bool.isRequired,extraTimes:h.a.arrayOf(h.a.number).isRequired,format:h.a.string.isRequired,interval:h.a.number.isRequired,max:h.a.number,maxValue:Object(k.a)(h.a.number,G),menuWidth:g.a.propTypes.menuWidth,min:h.a.number,minValue:Object(k.a)(h.a.number,G),onChange:h.a.func,placeholder:Object(D.a)(h.a.node).isRequired,size:h.a.oneOfType([Object(P.b)(["sm"]),h.a.oneOf(["default"])]).isRequired,use:h.a.oneOf(["default","on-dark"]).isRequired,value:h.a.oneOfType([h.a.number,h.a.string]),readOnly:h.a.bool,disabled:h.a.bool,searchable:h.a.bool,error:h.a.bool};Y.defaultProps={clearable:!0,extraTimes:[],format:"LT",interval:30,placeholder:()=>s.a.text("salesUI.UITimePicker.placeholder"),size:"default",use:"default"};Y.displayName="UITimePicker";var X=Object(f.a)(Y),J=n(2610),Q=n(1148),Z=n.n(Q),ee=n(160);const te=6e4;class ne extends r.Component{constructor(e){super(e);this.onDateChange=this.onDateChange.bind(this);this.onTimeChange=this.onTimeChange.bind(this)}shouldComponentUpdate(e,t){return Z()(this,e,t)}getMoment(){const{value:e=null,useUniversalTz:t}=this.props;return e?t?s.a.moment.utc(e):s.a.moment.portalTz(e):null}getDate(e=this.getMoment()){return e?Object(c.d)(e):null}getMinutes(e=this.getMoment()){const{type:t}=this.props;if(e)return t!==ee.DATE_TIME?0:(e.valueOf()-e.clone().startOf("day").valueOf())/te}getTimestamp(e,t){return(this.props.useUniversalTz?Object(c.o)(e):Object(c.n)(e)).add(t,"m").valueOf()}onDateChange(e){const t=e.target.value;this.setDateAndMinutes(t,this.getMinutes())}onTimeChange(e){const t=e.target.value;this.setDateAndMinutes(this.getDate(),t)}setDateAndMinutes(e,t){const{value:n=null,onFieldChange:r=a.a}=this.props;if(e){const i=this.getTimestamp(e,t);n===i||isNaN(i)||r(i)}else r(null)}renderTimePicker(e,t){const{step:n=30,type:r,readOnly:i=!1,useOnDark:o}=this.props;return r!==ee.DATE_TIME?null:Object(y.jsx)(u.a,{className:"input-box m-left-2",grow:1,children:Object(y.jsx)(X,{disabled:!t,interval:n,onChange:this.onTimeChange,readOnly:i,use:o?"on-dark":"default",value:this.getMinutes(e)})})}render(){const{className:e=null,error:t=!1,readOnly:n=!1,useOnDark:r}=this.props,i=o()("cmv2-date-time-field",e),a=this.getMoment(),s=this.getDate(a);return Object(y.jsxs)(l.a,{className:i,children:[Object(y.jsx)(u.a,{className:"input-box",grow:1,children:Object(y.jsx)(J.a,{error:t,onChange:this.onDateChange,readOnly:n,use:r?"on-dark":"default",value:s})}),this.renderTimePicker(a,s)]})}}t.a=ne},function(e,t,n){"use strict";var r=n(40),i=n(1148),o=n.n(i),a=n(99),s=n(73),c=n(2796),l=n(279),u=n(2655),d=n(2741),p=n(2794),h=n(710),m=n(443),f=n(2679),g=n(434);n(1330);const b=e=>!(isNaN(e)||"number"!=typeof e||e<0||e>1),O=e=>{const t=isNaN(e)||"number"!=typeof e;return null==e||!t&&(e>=0&&e<=100)},y=e=>!!["r","g","b"].every(t=>!(isNaN(e[t])||"number"!=typeof e[t]||e[t]<0||e[t]>255)),j=e=>b(e.a)&&y(e),v=e=>null==e||/^#([0-9A-F]{6}|[0-9A-F]{3})$/i.test(e),C=e=>{let t=Number(e).toString(16);t.length<2&&(t="0"+t);return t},x=({r:e,g:t,b:n})=>{if(null==e||null==t||null==n)return null;const r=`#${C(e)}${C(t)}${C(n)}`;if(!v(r))throw new Error("RGB value passed to convertRgbToHex results in invalid hex value.");return r},E=e=>{if(null!=e&&"number"!=typeof e)throw new Error("Invalid number passed to convertAlphaIntToDec.");if(null==e)return null;const t=e/100;if(!b(t))throw new Error("Alpha integer value results in invalid decimal value.");return t},T=(e,t=1)=>{if(!v(e))throw new Error("Invalid hex value supplied to convertHexAndAlphaToRgbaObject.");if(!e)return{r:null,g:null,b:null,a:t};if(3===(e=e.replace("#","")).length){const t=e.split("").reduce((e,t)=>e+t+t,"");e=t}const n={r:parseInt(e.substring(0,2),16),g:parseInt(e.substring(2,4),16),b:parseInt(e.substring(4,6),16),a:t};if(!j(n))throw new Error("Invalid hex value converts to out of range color channel values. Valid range for each channel is (0 - 255)");return n},S=(e,t=100)=>T(e,E(t)),I=Object.freeze({TO_TOP:"toTop",TO_BOTTOM:"toBottom",TO_LEFT:"toLeft",TO_RIGHT:"toRight",TO_BOTTOM_RIGHT:"toBottomRight",TO_BOTTOM_LEFT:"toBottomLeft"}),w=Object.freeze({[I.TO_TOP]:{verticalSide:"TOP",horizontalSide:null},[I.TO_BOTTOM]:{verticalSide:"BOTTOM",horizontalSide:null},[I.TO_LEFT]:{horizontalSide:"LEFT",verticalSide:null},[I.TO_RIGHT]:{horizontalSide:"RIGHT",verticalSide:null},[I.TO_BOTTOM_LEFT]:{verticalSide:"BOTTOM",horizontalSide:"LEFT"},[I.TO_BOTTOM_RIGHT]:{verticalSide:"BOTTOM",horizontalSide:"RIGHT"}});var _=n(1180),N=n(160),A=n(45);const D=e=>"ContentComponents.cmv2.fields.gradient."+e,k={verticalSide:null,horizontalSide:null},P={hex:null,opacity:null},R=[P,P],F=_.a[N.GRADIENT],L={UP:"up",DOWN:"down"};class M extends r.Component{constructor(e){super(e);const{value:t={}}=e;this.convertRGBAToHexAndOpacity=this.convertRGBAToHexAndOpacity.bind(this);this.getColorObjectsClone=this.getColorObjectsClone.bind(this);this.onColorOrOpacityChange=this.onColorOrOpacityChange.bind(this);this.onChangeGradientColor=this.onChangeGradientColor.bind(this);this.onChangeGradientOpacity=this.onChangeGradientOpacity.bind(this);this.onChangeGradientDirection=this.onChangeGradientDirection.bind(this);this.getGradientDirectionTypeFromObject=this.getGradientDirectionTypeFromObject.bind(this);this.onAddColorStop=this.onAddColorStop.bind(this);this.onDeleteColorStop=this.onDeleteColorStop.bind(this);this.onHoverGradientColor=this.onHoverGradientColor.bind(this);this.convertRGBValues=!0;this.state={hoveredColorStop:null,colors:this.convertRGBAToHexAndOpacity(t.colors)}}shouldComponentUpdate(e,t){return o()(this,e,t)}componentDidUpdate(e){const{value:t={}}=this.props,{value:n}=e;n.colors&&!t.colors&&this.setState({colors:R});n.colors&&t.colors&&n.colors!==t.colors&&(this.convertRGBValues?this.setState({colors:this.convertRGBAToHexAndOpacity(t.colors)}):this.convertRGBValues=!0)}get fieldKey(){const{fieldKey:e=[]}=this.props;return e&&e.join(".")}get gradientOptions(){const{options:e=Object.values(I)}=this.props;return e.map(e=>({text:Object(a.a)(D("directionInputs."+e)),value:e}))}get hiddenSubfields(){const{visibility:e={}}=this.props;return e.hidden_subfields||{}}getGradientDirectionTypeFromObject(e){const t=Object.assign({},k,e);let n;Object.keys(w).forEach(e=>{const r=w[e];Object(s.isEqual)(r,t)&&(n=e)});return n}convertRGBAToHexAndOpacity(e=[]){return e&&e.length?e.map(e=>{const{color:t}=e,{r:n,g:r,b:i,a:o}=t;return{hex:x({r:n,g:r,b:i}),opacity:null!=o?100*o:null}}):R}getColorObjectsClone(){const{colors:e}=this.state;return e.map(e=>Object.assign({},e))}onHoverGradientColor(e){this.setState({hoveredColorStop:e})}onChangeGradientDirection({target:{value:e}}){const{onFieldChange:t,value:n={}}=this.props;this.convertRGBValues=!1;const r=w[e];t(Object.assign({},n,{side_or_corner:r}))}onColorOrOpacityChange(e){const{onFieldChange:t,value:n={}}=this.props;if(e.every(e=>v(e.hex)&&O(e.opacity))){const r=e.reduce((e,t)=>{const{hex:n,opacity:r}=t,i=S(n,r);e.push({color:i});return e},[]);this.convertRGBValues=!1;t(Object.assign({},n,{colors:r}))}}onChangeGradientColor(e,t){const n=this.getColorObjectsClone();n[e].hex=t;null==n[e].opacity&&(n[e].opacity=100);this.setState({colors:n});this.onColorOrOpacityChange(n)}onChangeGradientOpacity(e,t){const n=this.getColorObjectsClone();n[e].opacity=t;this.setState({colors:n});this.onColorOrOpacityChange(n)}onAddColorStop(){const e=this.getColorObjectsClone();e.push(P);this.setState({colors:e});this.onColorOrOpacityChange(e)}onDeleteColorStop(e){const t=this.getColorObjectsClone();t.splice(e,1);this.setState({colors:t});this.onColorOrOpacityChange(t)}onReorderColorStop(e,t){const n=this.getColorObjectsClone(),r=n[t];n.splice(t,1);switch(e){case L.UP:n.splice(--t,0,r);break;case L.DOWN:n.splice(++t,0,r)}this.setState({colors:n});this.onColorOrOpacityChange(n)}renderDirectionSelect(){const{readOnly:e=!1,useOnDark:t,value:n={}}=this.props;return this.hiddenSubfields[F.direction]?null:Object(A.jsx)(d.a,{"data-test-id":"gradient-direction-select",label:Object(A.jsx)(l.a,{message:D("direction")}),children:Object(A.jsx)(u.a,{buttonUse:t?"form-on-dark":"form",onChange:this.onChangeGradientDirection,options:this.gradientOptions,placeholder:Object(A.jsx)(l.a,{message:D("directionPlaceholder")}),readOnly:e,searchable:!1,value:this.getGradientDirectionTypeFromObject(n.side_or_corner)})})}renderReorderButton(e,t){const{colors:n}=this.state,r=e===L.UP&&0===t||e===L.DOWN&&t===n.length-1;return Object(A.jsx)(h.a,{className:"m-all-0","data-test-id":`cmv2-reorder-${e}-gradient-color-${t}`,disabled:r,onClick:()=>this.onReorderColorStop(e,t),size:"small",use:"link",children:Object(A.jsx)(f.a,{className:"m-all-0",name:e})})}renderColorInputs(){const{colors:e}=this.state;return e.map((e,t)=>{const{hex:n,opacity:r}=e;return this.renderColorInput(n,r,t)})}renderColorInput(e,t,n){const{ColorPicker:r=c.a,readOnly:i=!1,useOnDark:o}=this.props,{colors:a,hoveredColorStop:s}=this.state,l=s===n,u=l&&a.length>2,m=l&&a.length>1;return Object(A.jsx)("span",{onMouseEnter:()=>this.onHoverGradientColor(n),onMouseLeave:()=>this.onHoverGradientColor(null),children:Object(A.jsx)(d.a,{className:"m-y-4","data-test-id":"cmv2-background-gradient-color-"+n,children:Object(A.jsxs)(g.a,{align:"center",children:[Object(A.jsx)(p.a,{"data-test-id":"cmv2-gradient-color-"+n,color:e,ColorPicker:r,onColorChange:({target:{value:e}})=>this.onChangeGradientColor(n,e),onOpacityChange:({target:{value:e}})=>this.onChangeGradientOpacity(n,e),opacity:t,readOnly:i,use:o?"on-dark":"default"},"gradient-color-"+n),m&&Object(A.jsxs)(g.a,{className:"cmv2-gradient-reorder m-left-4 m-right-1",direction:"column",children:[this.renderReorderButton(L.UP,n),this.renderReorderButton(L.DOWN,n)]}),u&&Object(A.jsx)(h.a,{"data-test-id":"cmv2-delete-gradient-color-"+n,onClick:()=>this.onDeleteColorStop(n),placement:"right",size:"small",use:"link",children:Object(A.jsx)(f.a,{className:"m-all-0",name:"delete"})})]})})},"background-gradient-color-"+n)}renderAddColorButton(){const{readOnly:e=!1}=this.props,{colors:t}=this.state;return Object(A.jsxs)(m.a,{"data-test-id":"cmv2-add-gradient-color-button",className:"m-top-4",disabled:5===t.length||e,onClick:this.onAddColorStop,use:"link",children:[Object(A.jsx)(f.a,{name:"add"}),Object(A.jsx)(l.a,{message:D("addColorButton")})]})}render(){const{hideAddMore:e=!1}=this.props;return Object(A.jsxs)("div",{"data-test-id":"cmv2-gradient-field",children:[this.renderDirectionSelect(),this.renderColorInputs(),!e&&this.renderAddColorButton()]})}}t.a=M},function(e,t,n){"use strict";var r=n(40),i=n(1148),o=n.n(i),a=n(279),s=n(99),c=n(2741),l=n(1149),u=n(2655),d=n(1272),p=n(2668),h=n(698);const m=Object.freeze({TOP:"TOP",MIDDLE:"MIDDLE",BOTTOM:"BOTTOM"}),f=Object.freeze({LEFT:"LEFT",CENTER:"CENTER",RIGHT:"RIGHT"}),g=Object.freeze({TOP_LEFT:`${m.TOP}_${f.LEFT}`,TOP_CENTER:`${m.TOP}_${f.CENTER}`,TOP_RIGHT:`${m.TOP}_${f.RIGHT}`,MIDDLE_LEFT:`${m.MIDDLE}_${f.LEFT}`,MIDDLE_CENTER:`${m.MIDDLE}_${f.CENTER}`,MIDDLE_RIGHT:`${m.MIDDLE}_${f.RIGHT}`,BOTTOM_LEFT:`${m.BOTTOM}_${f.LEFT}`,BOTTOM_CENTER:`${m.BOTTOM}_${f.CENTER}`,BOTTOM_RIGHT:`${m.BOTTOM}_${f.RIGHT}`});var b=Object.freeze({auto:"auto",contain:"contain",cover:"cover"}),O=n(1180),y=n(160),j=n(45);const v=O.a[y.BACKGROUND_IMAGE],C=e=>"ContentComponents.cmv2.fields.backgroundImage."+e,x=g.MIDDLE_CENTER,E=Object.freeze([{textKey:"topLeft",value:g.TOP_LEFT},{textKey:"topCenter",value:g.TOP_CENTER},{textKey:"topRight",value:g.TOP_RIGHT},{textKey:"middleLeft",value:g.MIDDLE_LEFT},{textKey:"middleCenter",value:g.MIDDLE_CENTER},{textKey:"middleRight",value:g.MIDDLE_RIGHT},{textKey:"bottomLeft",value:g.BOTTOM_LEFT},{textKey:"bottomCenter",value:g.BOTTOM_CENTER},{textKey:"bottomRight",value:g.BOTTOM_RIGHT}]);class T extends r.Component{constructor(e){super(e);this.openFileManager=this.openFileManager.bind(this);this.closeFileManager=this.closeFileManager.bind(this);this.onSelectImage=this.onSelectImage.bind(this);this.onChangeImage=this.onChangeImage.bind(this);this.handleSizeChange=this.handleSizeChange.bind(this);this.handlePositionChange=this.handlePositionChange.bind(this);this.state={isFileManagerOpen:!1}}shouldComponentUpdate(e,t){return o()(this,e,t)}get fieldKey(){const{fieldKey:e}=this.props;return e&&e.join(".")}get hasImgSrc(){const{value:e}=this.props;return e&&e.src}get positionOptions(){return E.map(e=>({text:Object(s.a)(C("positionInputs."+e.textKey)),value:e.value}))}get hiddenSubfields(){const{visibility:e={}}=this.props;return e.hidden_subfields||{}}openFileManager(e){this.setState({isFileManagerOpen:!0,imageSelectedCallback:e})}closeFileManager(){this.setState({isFileManagerOpen:!1})}onSelectImage(e){const{imageSelectedCallback:t}=this.state;this.closeFileManager();t&&t(e)}onChangeImage(e){const{onFieldChange:t,value:n}=this.props;t({background_position:n.background_position||x,background_size:n.background_size||b.cover,src:e.src})}handleSizeChange(e){const{onFieldChange:t,value:n}=this.props;t(Object.assign({},n,{background_size:e}))}handlePositionChange({target:{value:e}}){const{onFieldChange:t,value:n}=this.props;t(Object.assign({},n,{background_position:e}))}renderFileManager(){const{isFileManagerOpen:e}=this.state;return e?Object(j.jsx)(h.a.Consumer,{children:({FilePicker:e})=>{if(!e)throw new Error("BackgroundImage field requires FilePicker to be provided in PickersContext.");return Object(j.jsx)(e,{onClose:this.closeFileManager,onSelect:this.onSelectImage,pickerType:"SIDE_MODAL",type:"IMAGE"})}}):null}renderSizeInputs(){const{readOnly:e,value:t}=this.props;return this.hiddenSubfields[v.size]?null:this.hasImgSrc?Object(j.jsx)(c.a,{"data-test-id":this.fieldKey+":sizeInputs",className:"m-top-4",label:Object(j.jsx)(a.a,{message:C("sizeInputs.label")}),children:Object(j.jsxs)(d.a,{name:"size-toggles",children:[Object(j.jsx)(l.a,{"data-test-id":this.fieldKey+":sizeInputs:contain",checked:t.background_size===b.contain,name:"contain-radio-input",onChange:()=>this.handleSizeChange(b.contain),readOnly:e,children:Object(j.jsx)(a.a,{message:C("sizeInputs.showEntireImage")})}),Object(j.jsx)(l.a,{"data-test-id":this.fieldKey+":sizeInputs:cover",checked:t.background_size===b.cover,name:"cover-radio-input",onChange:()=>this.handleSizeChange(b.cover),readOnly:e,children:Object(j.jsx)(a.a,{message:C("sizeInputs.fillContainer")})}),Object(j.jsx)(l.a,{"data-test-id":this.fieldKey+":sizeInputs:auto",checked:t.background_size===b.auto,name:"auto-radio-input",onChange:()=>this.handleSizeChange(b.auto),readOnly:e,children:Object(j.jsx)(a.a,{message:C("sizeInputs.fullSize")})})]})}):null}renderPositionInput(){const{readOnly:e,useOnDark:t,value:n}=this.props;return this.hiddenSubfields[v.position]?null:this.hasImgSrc?Object(j.jsx)(c.a,{className:"m-top-4",label:Object(j.jsx)(a.a,{message:C("positionInputs.label")}),children:Object(j.jsx)(u.a,{buttonUse:t?"form-on-dark":"form","data-test-id":this.fieldKey+":positionInput",onChange:this.handlePositionChange,options:this.positionOptions,readOnly:e,value:n.background_position})}):null}render(){return Object(j.jsxs)("div",{children:[Object(j.jsx)(p.a,Object.assign({},this.props,{onFieldChange:this.onChangeImage,onFileManagerOpen:this.openFileManager,resizable:!1,showAlt:!1})),this.renderSizeInputs(),this.renderPositionInput(),this.renderFileManager()]})}}T.defaultProps={fieldKey:[],readOnly:!1,required:!1,value:{}};t.a=T},,function(e,t,n){"use strict";var r=n(40),i=n(4),o=n(279),a=n(324),s=n(2661),c=n(2771),l=n(750),u=n(737),d=n(717),p=n(443),h=n(2741),m=n(2655),f=n(2669),g=n(1326),b=n(1327),O=n(508),y=n(45);var j=({value:e,video:t,onChange:n,trackVideoInteraction:i})=>{const[o,a]=Object(r.useState)(Object(b.a)(e));Object(r.useEffect)(()=>{a(Object(b.a)(e))},[e]);const s=Object(r.useCallback)(r=>{i("change-overlay-delay-via-input");const o=Object(b.d)(r.target.value);"number"==typeof o&&o>=0&&o<=Math.floor(t.duration/1e3)?n(o):a(Object(b.a)(e))},[e,n,i,t.duration]),c=Object(r.useCallback)(e=>{a(e.target.value)},[]);return Object(y.jsx)(O.a,{value:o,onBlur:s,onChange:c,"data-test-id":"conv-asset-panel-delay-seconds"})},v=n(41),C=n.n(v),x=n(287),E=n.n(x),T=n(1),S=n.n(T);const I=E.a.div.withConfig({displayName:"VideoPlayer__StyledWrapper",componentId:"sc-1a8vuur-0"})(["background-color:",";line-height:0;"],e=>e.backgroundColor),w=E.a.iframe.withConfig({displayName:"VideoPlayer__StyledIframe",componentId:"sc-1a8vuur-1"})(["width:100%;border:0 none;"]),_=({portalId:e=S.a.get(),video:t={},maxHeight:n,backgroundColor:i,conversionAsset:o,hiddenControls:a,currentTime:s})=>{const c=Object(r.useRef)(null),l={hsvid:"rich-text-lib-preview",conversionAsset:JSON.stringify(o)},u=`${Object(b.c)(e,t.videoId,{parentOrigin:window.location.origin,renderContext:"rich-text-lib"})}#${Object(b.e)(l)}`;Object(r.useEffect)(()=>{c.current&&s&&c.current.contentWindow.postMessage({type:g.c.SET_CURRENT_TIME,currentTime:s},Object(b.b)())},[s]);Object(r.useEffect)(()=>{c.current&&c.current.contentWindow.postMessage({type:g.c.UPDATE_DISPLAY_OPTIONS,payload:{hiddenControls:a,conversionAsset:o}},Object(b.b)())},[a,o]);return Object(y.jsx)(I,{className:"hs-video-player",backgroundColor:i,children:Object(y.jsx)(w,{ref:c,src:u,height:n,referrerPolicy:"origin",sandbox:"allow-forms allow-scripts allow-same-origin allow-popups",allow:"fullscreen;"})})};_.propTypes={id:C.a.number,portalId:C.a.number,video:C.a.object,maxHeight:C.a.number,backgroundColor:C.a.string,conversionAsset:C.a.object,currentTime:C.a.number,hiddenControls:C.a.bool};var N=_;const A={position:g.a.PRE,overlay_delay_seconds:0},D="RECOMMENDED",k=.15,P=()=>{const e={value:g.a.PRE,text:i.a.text("RichTextLib.video.conversionAssetPanel.fields.position.options.pre")},t={value:g.a.POST,text:i.a.text("RichTextLib.video.conversionAssetPanel.fields.position.options.post")},n={value:g.a.CUSTOM,text:i.a.text("RichTextLib.video.conversionAssetPanel.fields.position.options.custom")};return[{value:D,text:i.a.text("RichTextLib.video.conversionAssetPanel.fields.position.options.recommended")},e,t,n]},R=e=>e===g.b.FORM?[{value:!1,text:i.a.text("RichTextLib.video.conversionAssetPanel.fields.preventSkip.options.canSkipForm")},{value:!0,text:i.a.text("RichTextLib.video.conversionAssetPanel.fields.preventSkip.options.preventSkipForm")}]:e===g.b.CTA?[{value:!1,text:i.a.text("RichTextLib.video.conversionAssetPanel.fields.preventSkip.options.canSkipCta")},{value:!0,text:i.a.text("RichTextLib.video.conversionAssetPanel.fields.preventSkip.options.preventSkipCta")}]:[],F=({conversionAsset:e,video:t,onSubmit:n,onClose:i,trackVideoInteraction:b=(()=>{})})=>{const[O,v]=Object(r.useState)(Object.assign({},A,e)),[C,x]=Object(r.useState)(e.overlay_delay_seconds||0);Object(r.useEffect)(()=>{b("open-conversion-options")},[]);const{id:E,type:T}=O,S=Math.floor(k*(t.duration/1e3)),I=O.position===g.a.CUSTOM&&S===C?D:O.position,w=Object(r.useCallback)(({target:{value:e}})=>{b("select-position-"+e.toLowerCase());if(e===D){e=g.a.CUSTOM;x(S)}const t=Object.assign({},O,{position:e});v(t)},[O,S,b]),_=Object(r.useCallback)(({target:{value:e}})=>{b(`select-overlay-${e?"prevent":"allow"}-skip`);v(Object.assign({},O,{prevent_skip:e}))},[O,b]),F=()=>{if(O.position===g.a.CUSTOM)if(C)O.overlay_delay_seconds=C;else{O.position=g.a.PRE;delete O.overlay_delay_seconds}0===O.overlay_delay_seconds&&delete O.overlay_delay_seconds;b("submit-conversion-options");n(O)},L=()=>{b("close-conversion-options");i()};return Object(y.jsxs)(s.a,{className:"mce-video-conversion-asset-options",width:600,"data-test-id":"conversion-asset-options-panel",children:[Object(y.jsx)(d.a,{onClick:L}),Object(y.jsx)(c.a,{children:Object(y.jsx)("h2",{children:Object(y.jsx)(o.a,{message:"RichTextLib.video.conversionAssetPanel.header"})})}),Object(y.jsxs)(u.a,{children:[E&&t&&Object(y.jsxs)("div",{className:"m-y-4",children:[Object(y.jsx)(N,{video:t,portalId:t.portalId,conversionAsset:O,maxHeight:300,currentTime:C,hiddenControls:O.position===g.a.CUSTOM,backgroundColor:"black"}),O.position===g.a.CUSTOM&&t.duration&&Object(y.jsx)("div",{className:"p-x-4 p-y-3",style:{backgroundColor:a.SLINKY},children:Object(y.jsx)(f.a,{min:0,max:Math.floor(t.duration/1e3),value:C,onChange:e=>{b("change-overlay-delay-via-slider");x(e.target.value)}})})]}),O.id&&Object(y.jsx)(h.a,{label:Object(y.jsx)(o.a,{message:"RichTextLib.video.conversionAssetPanel.fields.position.label"}),children:Object(y.jsx)(m.a,{options:P(),value:I,onChange:w,dropdownClassName:"mce-ignore","data-test-id":"conv-asset-panel-position-select"})}),O.position===g.a.CUSTOM&&Object(y.jsx)(h.a,{label:Object(y.jsx)(o.a,{message:"RichTextLib.video.conversionAssetPanel.fields.delaySeconds.label"}),tooltip:Object(y.jsx)(o.a,{message:"RichTextLib.video.conversionAssetPanel.fields.delaySeconds.tooltip"}),children:Object(y.jsx)(j,{value:C,video:t,onChange:x,trackVideoInteraction:b})}),E&&Object(y.jsx)(h.a,{label:Object(y.jsx)(o.a,{message:"RichTextLib.video.conversionAssetPanel.fields.preventSkip.label"}),help:Object(y.jsx)(o.a,{message:"RichTextLib.video.conversionAssetPanel.fields.preventSkip.help."+T}),children:Object(y.jsx)(m.a,{options:R(T),value:O.prevent_skip||!1,onChange:_,dropdownClassName:"mce-ignore","data-test-id":"conv-asset-panel-prevent-skip-select"})})]}),Object(y.jsxs)(l.a,{children:[Object(y.jsx)(p.a,{use:"primary",onClick:F,"data-test-id":"submit-conversion-asset-options",children:Object(y.jsx)(o.a,{message:"RichTextLib.video.conversionAssetPanel.footer.done"})}),Object(y.jsx)(p.a,{onClick:i,children:Object(y.jsx)(o.a,{message:"RichTextLib.video.conversionAssetPanel.footer.cancel"})})]})]})};t.a=F},function(e,t,n){"use strict";var r=n(2),i=n(1212),o=n.n(i),a=n(1260),s=n(1297),c=n(40),l=n(41),u=n.n(l),d=n(1290),p=n(1211),h=n(45);const m=["open","className","pinToConstraint","onRemove","children","storeHandlers","EmojiPicker","onInsertEmoji"];class f extends c.Component{constructor(...e){super(...e);this.handleEmojiClick=e=>{this.props.onInsertEmoji(e);this.popoverRef.focus()}}render(){const e=this.props,{open:t,className:n,pinToConstraint:i,onRemove:o,children:a,storeHandlers:s,EmojiPicker:c}=e,l=Object(r.a)(e,m),u=Object.assign({open:t,className:n,pinToConstraint:i,autoPlacement:!0,animateOnToggle:!1,arrowSize:"none",placement:"bottom right",closeOnOutsideClick:!0,onOpenChange:o},l);return Object(h.jsx)(p.a,{ref:e=>this.popoverRef=e,native:!0,autoFocus:!0,onClick:this.handleEmojiClick,popoverProps:u,useDefaultFilter:!0,unicodeVersion:8,storeHandlers:s,PickerContent:c,children:a})}}f.propTypes={EmojiPicker:u.a.func.isRequired,open:u.a.bool.isRequired,onRemove:u.a.func.isRequired,onInsertEmoji:u.a.func.isRequired,storeHandlers:u.a.shape({init:u.a.func,getter:u.a.func,setter:u.a.func}),children:u.a.object,className:u.a.string,pinToConstraint:u.a.array};var g=Object(d.a)(f),b=n(2824),O=n(1240);function y(e){const{editor:t,EmojiPicker:n,storeHandlers:r,onInsert:i,onOpenChange:o}=e,{inlineTarget:a,setInlineTarget:s,initInlineTarget:l,insertAtInlineTarget:u}=Object(b.a)(t,null),d=Object(c.useRef)(a);Object(c.useEffect)(()=>{d.current=a});Object(c.useEffect)(()=>{const e=()=>{d.current?s(null,{restoreSelection:!0}):t.settings[O.a]?r.init(()=>l({fireNodeChange:!0})):l({fireNodeChange:!0})};t.on("OpenEmojiPopover",e);t.on("PreloadEmojiPicker",n.preload);return()=>{t.off("OpenEmojiPopover",e);t.off("PreloadEmojiPicker",n.preload)}},[t,n,r,l,s]);Object(c.useEffect)(()=>{o(!!a)},[o,a]);const p=()=>{d.current&&s(null)},m=(...e)=>{u(i.bind(null,...e))},f=e=>!(e&&e.target&&t.dom.getParent(e.target,".mce-toolbar,.mce-hubspot-popover,.mce-hubspot-dropdown"));return Object(h.jsx)(g,{"data-test-id":"emoji-popover-manager",tabIndex:"-1",editor:t,open:!!a,target:a,onRemove:p,onOpenChange:p,onInsertEmoji:m,storeHandlers:r,EmojiPicker:n,shouldCloseOnClick:f,arrowSize:"medium",placement:"bottom right",autoPlacement:"vert"})}var j=n(1267),v=n(1237),C=n(1239),x=n(1245),E=n(1293);n.d(t,"a",(function(){return D}));const T=["contextualNodeAttributes"],S=Object(s.a)(a.a),I="hsEmojiOpenChange",w=Object(x.a)("TinymcePlugins.hsemoji");let _=0;const N=()=>{_++;return _},A=()=>{_=0};function D(e,t,n=(()=>{})){const i=()=>e.fire("OpenEmojiPopover"),a=()=>e.fire("PreloadEmojiPicker"),s=t=>{e.insertContent(t.native);Object(C.b)(e,"tinymceInsertEmoji",v.G,{insertCount:N(),version:"v1"})},c=t=>{if(t){A();Object(C.b)(e,"tinymceEmoji",v.Y,{version:"v1"})}e.fire(I,{selected:t})};o.a.canvas.addButton(e,j.x,{renderControl:t=>{const n=Object(r.a)(t,T);return Object(h.jsx)(S,Object.assign({"data-test-id":"insert-emoji-button",iconName:"emoji",tooltip:w("tooltip"),onClick:i,onMouseEnter:a,editor:e,eventKey:I},n))}});o.a.canvas.addMenuItem(e,j.x,{text:w("menuItem"),onClick:i});const l=Object(E.a)(e,"EmojiPicker","`EmojiPicker` picker component is required for the emoji plugin");o.a.canvas.addPopover(e,t,{renderPopover:t=>Object(h.jsx)(y,Object.assign({editor:e,onInsert:s,onOpenChange:c,EmojiPicker:l,storeHandlers:n(e)},t))})}},,function(e,t,n){"use strict";n(2826);const r="IMPORT",i="INTEGRATION";var o=n(1349);const a="EMAIL_MARKETING",s="OFFLINE";n.d(t,"l",(function(){return c}));n.d(t,"e",(function(){return l}));n.d(t,"f",(function(){return u}));n.d(t,"c",(function(){return d}));n.d(t,"g",(function(){return p}));n.d(t,"a",(function(){return h}));n.d(t,"d",(function(){return m}));n.d(t,"h",(function(){return f}));n.d(t,"b",(function(){return g}));n.d(t,"m",(function(){return b}));n.d(t,"n",(function(){return O}));n.d(t,"k",(function(){return y}));n.d(t,"i",(function(){return j}));n.d(t,"j",(function(){return v}));n.d(t,"p",(function(){return x}));n.d(t,"q",(function(){return E}));n.d(t,"o",(function(){return T}));n.d(t,"r",(function(){return S}));const c="hs_analytics_source",l="hs_analytics_source_data_1",u="hs_analytics_source_data_2",d="hs_latest_source_data_1",p="hs_analytics_latest_source_data_1",h="hs_analytics_latest_source_data_1",m="hs_latest_source_data_2",f="hs_analytics_latest_source_data_2",g="hs_analytics_latest_source_data_2",b="sourceData1",O="sourceData2",y="hs_latest_source",j=d,v=m,C=[s,"IMPORTED"];function x({analyticsSource:e,analyticsSourceData1:t}){return!(!e||!C.includes(e)||t!==r)}function E({analyticsSourceData1:e}){return e===i}function T({analyticsSource:e}){return e===a}function S({analyticsSourceData2:e}){return Object(o.a)(e)}},function(e,t,n){"use strict";var r=n(2),i=n(1463),o=n(1186),a=n(2610),s=n(298),c=n(4),l=n(288),u=n.n(l),d=n(1423),p=n(40),h=n(287),m=n.n(h);const f=Object(h.css)(["display:inline-block;font-size:14px;height:25px;line-height:normal;padding-top:4px;padding-bottom:4px;width:","px;"],({width:e})=>e);var g=n(768),b=n(1187),O=n(509),y=n(45);const j=["format","inputRef"],v=m()(a.a).withConfig({displayName:"UIMicroDateInput__DateInputWrapper",componentId:"o3wrvz-0"})(["display:inline-block;"]),C=m()(a.a.defaultProps.Input).withConfig({displayName:"UIMicroDateInput__MicroInput",componentId:"o3wrvz-1"})(["&&{",";}"],f),x=e=>{const{format:t,inputRef:n}=e,i=Object(r.a)(e,j),o=Object(p.useRef)(null),a=n||o,[s,c]=Object(p.useState)(137);Object(p.useEffect)(()=>{let e=!0;const n=()=>{c(Math.ceil(Object(O.b)(a.current,Object(b.a)(t))))};n();g.b.then(()=>{e&&n()});return()=>{e=!1}},[t]);return Object(y.jsx)(v,Object.assign({},i,{format:t,iconSize:14,inputRef:a,inputWidth:s}))};x.propTypes=a.a.propTypes;x.defaultProps=Object.assign({},a.a.defaultProps,{Input:C});x.displayName="UIMicroDateInput";var E=x,T=n(2829),S=n(2828),I=n(188);const w=["format"];function _(e,t,n){if(!n)return null;if("date"===t)return o.o(n).valueOf();{let r;r=e===i.a.PORTAL?o.n(n):o.m(n);"endOfDay"===t&&(r=r.endOf("day"));return r.valueOf()}}function N(e,t,n){let r;if(!n&&0!==n)return null;r=Number(n);if(isNaN(r))return null;if("date"===t)return c.a.moment.utc(r);switch(e){case i.a.PORTAL:return c.a.moment.portalTz(r);case i.a.USER:return c.a.moment.userTz(r);case i.a.MOMENT:return c.a.moment(r);default:return null}}const A=e=>{const{className:t,dateDisplayHint:n,inputSize:c="large",inputRef:l,momentType:p=i.a.USER,onChange:h,type:m="default",value:f}=e,g=Object(S.a)()(Object(I.a)("CRM:PropMgmt:RelativeDateWithTime"))&&"date"===m,b=()=>{const e=N(p,m,f);return e?o.d(e):null},O=e=>{const t=_(p,m,e.target.value);"function"==typeof h&&h(Object(s.a)(t))},j=()=>Object.assign({},Object(d.a)(e),{className:u()("crm-property-date-input",t),inputRef:l,onChange:O,onKeyDown:D,onKeyPress:D,onKeyUp:D}),v=g&&f&&Object(T.a)({value:""+f,type:m,dateDisplayHint:n}),C=j(),{format:x}=C,A=Object(r.a)(C,w),k=v?`L [(${v})]`:x||"L";switch(c){case"small":return Object(y.jsx)(E,Object.assign({"data-test-id":"micro-date-input"},A,{format:k,value:b()}));case"large":default:return Object(y.jsx)(a.a,Object.assign({"data-test-id":"date-input"},A,{value:b(),format:k}))}};t.a=A;function D(e){e.stopPropagation()}},function(e,t,n){"use strict";var r=n(40);const i=e=>{const t=sessionStorage.getItem(e);return"string"==typeof t?JSON.parse(t):t},o=(e,t)=>{sessionStorage.setItem(e,JSON.stringify(t))},a=e=>{sessionStorage.removeItem(e)},s="hs-rich-text";n.d(t,"a",(function(){return c}));function c(e,t,n,c=!1){const[l,u]=Object(r.useState)(!1),[d,p]=Object(r.useState)(!1),h=Object(r.useRef)(null),m=Object(r.useCallback)((e=!0)=>{t(n,e).catch(e=>{console.error("Unable to set user attribute",e)});p(e)},[t,n]);Object(r.useEffect)(()=>{e(n).then(e=>{let t=!(!n||"true"!==e);if(c){h.current=`${s}:${n}`;const e=!!i(h.current);t=t||e;o(h.current,!0)}p(t);u(!0)}).catch(console.error);if(c){const e=()=>{"hidden"===document.visibilityState&&h.current&&a(h.current)};window.addEventListener("visibilitychange",e);return()=>window.removeEventListener("visibilitychange",e)}},[e,n,c]);return[l,d,m]}},function(e,t,n){"use strict";var r=n(2),i=n(41),o=n.n(i),a=n(40),s=n(0),c=n(288),l=n.n(c),u=n(324),d=n(297),p=n(2679),h=n(490),m=n(357),f=n(2654),g=n(45);const b=["children","className","floatActive","sibling","tooltip","tooltipProps"];function O(e){let{children:t,className:n,floatActive:i,sibling:o,tooltip:a,tooltipProps:s}=e,c=Object(r.a)(e,b);const u=l()(n,"private-form__label--floating",!i&&"private-form__label--floating-as-placeholder");return a?Object(g.jsx)(h.a,Object.assign({},c,{className:u,children:Object(g.jsx)(f.a,Object.assign({},s,{title:a,children:Object(g.jsx)(m.a,{useFlex:!0,fixedChildren:o,tooltip:!1,children:t})}))})):Object(g.jsx)(h.a,Object.assign({},c,{className:u,children:Object(g.jsx)(m.a,{useFlex:!0,fixedChildren:o,children:t})}))}O.propTypes=Object.assign({},h.a.propTypes,{children:o.a.node.isRequired,floatActive:o.a.bool.isRequired,sibling:o.a.node,tooltip:o.a.node,tooltipProps:o.a.object});O.defaultProps=Object.assign({},h.a.defaultProps,{floatActive:!1});O.displayName="UIFloatingFormLabel";var y=n(2759),j=n(451),v=n(339),C=n(767),x=n(341),E=n(310),T=n(467);const S=["children","className","error","focused","hideEditIcon","htmlFor","isStatic","label","labelProps","overlayContent","readOnly","required","validationMessage"],I=["focused"],w=["hovered"],_=e=>Object(g.jsx)(j.a,Object.assign({},e,{hidden:!0})),N=e=>a.Children.only(e.children).props,A=e=>{const t=a.Children.only(e).props;return!(!t.placeholder&&!t.format)},D=e=>Array.isArray(e)?e.length>0:"number"==typeof e||Boolean(e);class k extends a.Component{constructor(e){super(e);this.updateHasClosedDropdown=()=>{if(!this._isMounted)return;const e=!!this._el.querySelector('[data-dropdown-open="false"]');this.state.hasClosedDropdown!==e&&this.setState({hasClosedDropdown:e})};this.handleInputChange=e=>{this.setState({inputValue:e.target.value})};this.handleLabelOnMouseDown=e=>{const{focused:t}=this.props;t&&e.preventDefault()};this.handleOverlayBlur=()=>{this.setState({overlayHasFocus:!1})};this.handleOverlayFocus=()=>{this.setState({overlayHasFocus:!0})};this.handleEditIconClick=e=>{if(this._inputRef&&"function"==typeof this._inputRef.focus){e.stopPropagation();this._inputRef.focus()}};this.state={hasClosedDropdown:!1,inputId:"",inputValue:N(e).defaultValue,overlayHasFocus:!1}}static getDerivedStateFromProps(e,t){const n=N(e),r=n.id,i=n.value;return Object.assign({},t,{inputId:r||t.inputId||Object(E.d)("floating-input-"),inputValue:void 0!==i?i:t.inputValue})}componentDidMount(){this._isMounted=!0;this._el=Object(s.findDOMNode)(this);if(this._el){this.updateHasClosedDropdown();this.startMutationObserver()}}componentWillUnmount(){this._isMounted=!1;this.stopMutationObserver()}startMutationObserver(){if(this._el){this._observer=new MutationObserver(this.updateHasClosedDropdown);this._observer.observe(this._el,{attributes:!0,subtree:!0})}}stopMutationObserver(){if(this._observer){this._observer.disconnect();this._observer=null}}renderClonedInput(e,t,n,r,i,o,s,c,u,p){const h=a.Children.only(e),m=h.props,f=null==m.readOnly?u:m.readOnly,g=null==m.required?p:m.required,b=!0===t?"true":void 0,O={className:l()(m.className,"private-form__control--inline",i&&!s&&"private-form__control--inline--show-placeholder"),id:c,readOnly:f,required:g,"aria-invalid":b,"aria-required":g,onChange:Object(d.b)(this.handleInputChange,m.onChange),ref:e=>{this._inputRef=e}};t&&(O.error=!!t);!r||n||o||(O.caretRenderer=_);Object(T.a)(h,k.displayName);return Object(a.cloneElement)(h,O)}render(){const e=this.props,{children:t,className:n,error:i,hideEditIcon:o,htmlFor:a,isStatic:s,label:c,labelProps:d,overlayContent:h,readOnly:m,required:f,validationMessage:b}=e,j=Object(r.a)(e,S),{hasClosedDropdown:v,inputId:E,inputValue:T,overlayHasFocus:_}=this.state;return Object(g.jsx)(x.a,Object.assign({},this.props,{children:e=>Object(g.jsx)(C.a,Object.assign({},this.props,{children:C=>{const{focused:x}=C,S=Object(r.a)(C,I),{hovered:N}=e,k=Object(r.a)(e,w),P=a||E,R=l()("private-form__set private-form__set--floating",n,i&&"private-form__set--error",x&&"private-form__set--floating--focused"),F=A(t),L=D(T),M=c&&Object(g.jsx)(O,Object.assign({},d,{floatActive:N||x||L||F||s,error:i,htmlFor:P,onMouseDown:this.handleLabelOnMouseDown,readOnly:m,required:f,children:c})),B=s?Object(g.jsx)("div",{className:"private-form__control-floating__static-input-wrapper",children:t}):this.renderClonedInput(t,i,x,v,F,N,L,E,m,f);return Object(g.jsxs)("div",Object.assign({className:R},j,S,k,{children:[M,B,(h||!o)&&Object(g.jsxs)("div",{className:l()("private-form__control__overlay",_?"private-form__control__overlay--visible":x&&"private-form__control__overlay--hidden"),onFocus:this.handleOverlayFocus,onBlur:this.handleOverlayBlur,children:[o||m?null:Object(g.jsx)(p.a,{className:"private-form__control-floating__edit-icon",color:u.CALYPSO,name:"edit",onClick:this.handleEditIconClick,size:12}),h]}),b&&Object(g.jsx)("div",{className:"private-form__validation-wrapper",children:Object(g.jsx)(y.a,{className:"private-form__validation",use:i?"error":"success",children:b})})]}))}}))}))}}k.propTypes={children:o.a.node.isRequired,error:o.a.bool,focused:Object(v.a)(o.a.bool),hideEditIcon:o.a.bool.isRequired,htmlFor:o.a.string,isStatic:o.a.bool.isRequired,overlayContent:o.a.node,label:o.a.node,labelProps:o.a.object,readOnly:o.a.bool,required:o.a.bool,validationMessage:o.a.node};k.defaultProps={error:!1,hideEditIcon:!1,isStatic:!1};k.displayName="UIFloatingFormControl";k.hiddenCaretRenderer=_;var P=n(2741),R=n(2823),F=n(1407),L=n(2828),M=n(287),B=n.n(M),U=n(2672),V=n(1415);const H=["children","Component","formControlUse"],q=["hideEditIcon","isStatic","label","overlayContent"],G=["hideEditIcon","isStatic","label"],W=e=>e.hubspotDefined?Object(R.b)(e.label):e.label,z=B.a.div.withConfig({displayName:"FormControl__StyledDivOverlayWrapper",componentId:"sc-16rflky-0"})(["height:100%;"]),$=B()(k).withConfig({displayName:"FormControl__StyledUIFloatingFormControl",componentId:"sc-16rflky-1"})([".private-form__control__overlay{background:transparent !important;box-shadow:none !important;}"]),K=e=>{let{children:t,Component:n=P.a,formControlUse:i="default"}=e,o=Object(r.a)(e,H);const a=Object(F.a)(),s=Object(L.a)();if("inline"===i||"table-cell"===i||!n)return Object(g.jsx)(g.Fragment,{children:t});const c=s("CRM:Properties:DefaultLabel"),l=s(V.c),u=c?W(a):void 0,d=!!l&&Object(U.m)(a);if("floating"===i||n===k){const{hideEditIcon:e,isStatic:n,label:i=u,overlayContent:a}=o,s=Object(r.a)(o,q),c=d?Object(g.jsx)(z,{children:a}):a;return Object(g.jsx)($,Object.assign({hideEditIcon:e,isStatic:n,"data-test-id":k.name,label:i,overlayContent:c},s,{children:t}))}const{label:p=u}=o,h=Object(r.a)(o,G);return Object(g.jsx)(n,Object.assign({"data-test-id":n.name,label:p},h,{children:t}))};t.a=K},function(e,t,n){"use strict";var r=n(40),i=n(1403),o=n(1404),a=n(1431);const s=(e,t)=>{switch(t.status){case"loading":return{loading:!0,error:!1,data:void 0};case"error":return{loading:!1,error:!0,data:void 0};case"success":return{loading:!1,error:!1,data:t.data};default:throw new Error("Unhandled action: "+t)}};let c;const l=e=>{c||(c=e.get("multi-currency/v2/currencies/information"));return c},u=()=>{const e=Object(o.a)(),t=Object(a.a)(),[n,c]=Object(r.useReducer)(s,void 0);if(!n){c({status:"loading"});Object(i.a)(l(e).then(e=>{t.current&&c({status:"success",data:e.homeCurrency.currencyCode})}).catch(()=>{t.current&&c({status:"error"})}));return{loading:!0,error:!1,data:void 0}}return{loading:n.loading,error:n.error,data:n.data}};var d=n(1407),p=n(1405),h=n(1411),m=n(1432),f=n(1426),g=n(1434),b=n(1344);const O=new Set([b.d,b.s,b.q,b.r]);function y(e){return O.has(e)}var j=n(2672);n.d(t,"a",(function(){return x}));const v={precision:6,stripInsignificantZeros:!0},C=(e,t,n)=>void 0!==n?n:Object(j.G)(e,t)||Object(j.F)(e,t)?0:void 0,x=({defaultValue:e,defaultCurrencyCode:t,defaultMin:n,shouldSimplifyCurrency:r}={})=>{const i=Object(p.a)(),o=Object(d.a)(),a=Object(h.a)(),{data:s}=Object(m.a)({subjectCurrencyCode:o.currencyPropertyName},{skip:!o.currencyPropertyName}),{data:c}=u(),l=null==s?void 0:s.subjectCurrencyCode,b=Object(f.a)(null!=e?e:a),O=t||l||c,j=C(o,i,n);return{currencyValue:b,currencyCode:O,formattingOptions:{shouldSimplifyCurrency:void 0!==r?r:!y(i),fractionalCurrencyProps:Object(g.a)(i)?v:void 0,min:j}}}},function(e,t,n){"use strict";var r=n(2),i=n(2682),o=n(4),a=n(288),s=n.n(a),c=n(41),l=n.n(c),u=n(40),d=n(298),p=n(443),h=n(62),m=n(287),f=n.n(m),g=n(469),b=n(326),O=n(45);const y=["children","className","Content","onOpenChange"],j=parseInt(h.d,10),v=8,C=f()(g.b.defaultProps.Wrapper).withConfig({displayName:"UISlideoutDrawer__SlideoutTransitionWrapper",componentId:"l8l5ly-0"})(["height:auto;transition:",";transform:",";"],({duration:e,measuredHeight:t,transitionActive:n,opening:r})=>{if(!n||null==t)return"none";const i=r?.7*e:.3*e;return`opacity ${i}ms ease-out ${r?e-i:0}ms, transform ${e}ms`},({open:e,measuredHeight:t,transitioning:n})=>n&&(e?"translateY(0)":`translateY(${Object(b.m)(-1*(t-v))})`)),x=f.a.div.withConfig({displayName:"UISlideoutDrawer__DrawerContent",componentId:"l8l5ly-1"})(["padding-top:12px;padding-bottom:12px;"]),E=e=>{const{children:t,className:n,Content:i}=e,o=Object(r.a)(e,y);return Object(O.jsx)(g.b,Object.assign({},o,{className:s()("uiEditableControlsStage",n),duration:j,Wrapper:C,children:Object(O.jsx)(i,{className:"private-slideout-drawer__content",children:t})}))};E.propTypes={Content:l.a.elementType.isRequired,onOpenChange:l.a.func,open:l.a.bool,children:l.a.node};E.defaultProps={Content:x,open:!1};E.displayName="UISlideoutDrawer";var T=Object(i.a)(E,["open"]),S=n(460),I=n(339),w=n(461),_=n(345),N=n(346);var A=e=>{const t=Object(u.forwardRef)((t,n)=>{const r={},[i,o]=Object(u.useState)(!1);["onCompositionStart","onCompositionEnd"].forEach(e=>{const n=Object(u.useRef)(),i=Object(u.useRef)();if(!i.current||n.current!==t[e]){n.current=t[e];i.current=n=>{o("onCompositionStart"===e);t[e]&&t[e](n)}}r[e]=i.current});return Object(O.jsx)(e,Object.assign({},t,r,{composing:i,ref:n}))});t.displayName=`IMEAware(${Object(_.a)(e)})`;t.propTypes=Object.assign({},e.propTypes);delete t.propTypes.composing;t.defaultProps=e.defaultProps;Object(N.a)(t,e);return t};const D=["composing","cancelButtonUse","cancelLabel","children","className","okButtonUse","onCancel","onOpenChange","onSave","open","responsive","saveDisabled","saveOnEnter","saveLabel","use"];class k extends u.PureComponent{constructor(...e){super(...e);this.handleFocus=e=>{const{onFocus:t,onOpenChange:n}=this.props;n&&n(Object(d.a)(!0));t&&t(e)};this.handleKeyDown=e=>{const{saveDisabled:t,saveOnEnter:n,composing:r}=this.props;if(r)return;const{key:i}=e;"Enter"===i&&!t&&(n||e.metaKey||e.ctrlKey)&&this.handleSave();"Escape"===i&&this.handleCancel()};this.handleChange=()=>{const{onOpenChange:e}=this.props;e&&e(Object(d.a)(!0))};this.handleSave=()=>{const{onOpenChange:e,onSave:t}=this.props;this._el&&this._el.focus();e&&e(Object(d.a)(!1));t&&t()};this.handleCancel=()=>{const{onCancel:e,onOpenChange:t}=this.props;this._el&&this._el.focus();t&&t(Object(d.a)(!1));e&&e()}}render(){const e=this.props,{cancelButtonUse:t,cancelLabel:n=(()=>o.a.text("salesUI.UIEditableControls.cancel")),children:i,className:a,okButtonUse:c,open:l,responsive:u,saveLabel:d=(()=>o.a.text("salesUI.UIEditableControls.save")),use:h}=e,m=Object(r.a)(e,D),f=s()("uiEditableControls private-editable-control",a,"flush"===h&&"private-editable-control--flush");return Object(O.jsxs)("div",Object.assign({className:f,onChange:this.handleChange,onFocus:this.handleFocus,onKeyDown:this.handleKeyDown,ref:e=>{this._el=e}},m,{children:[i,Object(O.jsx)(T,{open:l,children:Object(O.jsxs)("div",{className:"private-editable-control__controls",children:[Object(O.jsx)(p.a,{className:"private-editable-control__save",disabled:this.props.saveDisabled,onClick:this.handleSave,responsive:u,size:"extra-small",use:c,children:Object(S.a)(d)}),Object(O.jsx)(p.a,{className:"private-editable-control__cancel",onClick:this.handleCancel,responsive:u,size:"extra-small",use:t,children:Object(S.a)(n)})]},"controls")})]}))}}const P={composing:Object(I.a)(l.a.bool),cancelButtonUse:l.a.string,cancelLabel:Object(w.a)(l.a.node).isRequired,children:l.a.node,okButtonUse:l.a.string,onCancel:l.a.func,onFocus:l.a.func,onOpenChange:l.a.func,onSave:l.a.func,open:l.a.bool,responsive:l.a.bool,saveDisabled:l.a.bool,saveLabel:Object(w.a)(l.a.node).isRequired,saveOnEnter:l.a.bool,use:l.a.oneOf(["inset","flush"])};k.propTypes=P;k.defaultProps={cancelButtonUse:"tertiary-light",cancelLabel:()=>o.a.text("salesUI.UIEditableControls.cancel"),okButtonUse:"tertiary",open:!1,responsive:!0,saveDisabled:!1,saveLabel:()=>o.a.text("salesUI.UIEditableControls.save"),saveOnEnter:!0,use:"inset"};k.displayName="UIEditableControls";t.a=A(Object(i.a)(k,["open"]))},function(e,t,n){"use strict";var r=n(41),i=n.n(r),o=n(2819),a=i.a.shape({label:i.a.string,value:i.a.string,displayOrder:i.a.number,hidden:i.a.bool,readOnly:i.a.bool,description:i.a.string}),s=i.a.shape({calculated:i.a.bool,currencyPropertyName:i.a.string,deleted:i.a.bool,description:i.a.string,displayMode:i.a.string,displayOrder:i.a.number,externalOptions:i.a.bool,externalOptionsReferenceType:i.a.string,fieldType:i.a.string,formField:i.a.bool,groupName:i.a.string,hasUniqueValue:i.a.bool,hidden:i.a.bool,hubspotDefined:i.a.bool,isCustomizedDefault:i.a.bool,label:i.a.string,mutableDefinitionNotDeletable:i.a.bool,name:i.a.string.isRequired,numberDisplayHint:i.a.string,options:i.a.arrayOf(a.isRequired),optionsAreMutable:i.a.bool,optionSortStrategy:i.a.string,readOnlyDefinition:i.a.bool,readOnlyValue:i.a.bool,referencedObjectType:i.a.string,searchableInGlobalSearch:i.a.bool,showCurrencySymbol:i.a.bool,textDisplayHint:i.a.string,type:i.a.string});t.a=i.a.oneOfType([i.a.instanceOf(o.a),s])},function(e,t,n){"use strict";var r=n(40),i=n(1410),o=n(24),a=n.n(o),s=n(1470);const c=null,l=({httpClient:e,objectTypeId:t,validationRequest:n})=>{const r={includeTranslations:!1,objectValidations:n};return e.post("pipelines-validation/v2/validate/objects/batch",{data:r}).then(e=>{if(!e||!e.objects)throw new Error("Failed to return validations");const n=e.objects;return 0===n.length?c:Object(s.b)(t,n)}).catch(e=>{a.a.captureException(e,{extra:{objectTypeId:t,objectId:n.length&&n[0].objectId}});return c})};const u=({objectTypeId:e,inputMode:t,pipelineId:n,stageIds:r,objectId:o},a)=>{if(!(t===i.c||t===i.b))return Promise.resolve(null);const s=o&&t===i.c?parseInt(o,10):void 0;return n?l({httpClient:a,objectTypeId:e,validationRequest:[{targetPipelineId:n,objectTypeId:e,objectId:s}]}):r&&r.length?l({httpClient:a,objectTypeId:e,validationRequest:r.map(t=>({targetStageIds:[t],objectTypeId:e,objectId:s}))}):Promise.resolve(null)},d=({pipelineId:e,objectTypeId:t,inputMode:n,objectId:r,stageIds:i})=>`${t}/${e}/${n}/${r}/${JSON.stringify(i)}`,p=new(n(1473).a)(u,d);var h=n(99);n.d(t,"a",(function(){return f}));const m=(e,t)=>{const n=Object(s.a)(e.id,t),r=Object(s.c)(e.id,t);return n?e:r?Object.assign({},e,{description:Object(h.a)("governance.pipelineStages.bypassed")}):Object.assign({},e,{disabled:!0,description:Object(h.a)("governance.pipelineStages.disabled")})},f=({httpClient:e,objectTypeId:t,pipelineId:n,inputMode:o,objectId:a})=>Object(r.useCallback)(async(r,s)=>{const c=!!s.query||o===i.b,l=r.api.search(s),u={objectTypeId:t,inputMode:o,objectId:a};if(!n){const t=await l,n=t.references.map(e=>e.id),r=p.get(Object.assign({},u,{stageIds:n}),e,!c),i=await r;return Object.assign({},t,{references:t.references.map(e=>m(e,i))})}const d=p.get(Object.assign({},u,{pipelineId:n}),e,!c);return Promise.all([l,d]).then(([e,t])=>Object.assign({},e,{references:e.references.map(e=>m(e,t))}))},[n,e,a,t,o])},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";var r=n(40),i=n(41),o=n.n(i),a=n(59),s=n(73),c=n(729),l=n(279),u=n(282),d=n(324),p=n(2738),h=n(259),m=n(394),f=n(78),g=n(599),b=n(395),O=n(416),y=n(2677),j=n(2728),v=n(249),C=n(365),x=n(284),E=n(434),T=n(2735),S=n(443),I=n(696),w=n(2679),_=n(2734),N=n(1119),A=n(1103),D=n(1120),k=n(212),P=n(254),R=n(2601),F=n(1123),L=n(2),M=n(288),B=n.n(M),U=n(1124),V=n(45);const H=["className"];class q extends r.PureComponent{render(){const e=this.props,{className:t}=e,n=Object(L.a)(e,H),r=B()("form-card-footer",t);return Object(V.jsx)(U.a,Object.assign({},n,{className:r}))}}q.propTypes={className:o.a.string};var G=n(1125),W=n(1126),z=n(1127),$=n(58);const K=[[m.PAGE_TEMPLATE],[m.BLOG_POST_TEMPLATE],[m.BLOG_LISTING_TEMPLATE],[m.EMAIL_TEMPLATE],[m.SYSTEM_TEMPLATE],[m.CODED_FILE]],Y=[[m.DRAFT_PAGE],[m.DRAFT_EMAIL]],X=[[m.PUBLISHED_PAGE],[m.SENT_EMAIL]];function J(e,t){return t.reduce((t,n)=>t+Object.keys(e[n]).length,0)}function Q(){const e=j.makeGetParentConnectionsByCategory(),t=v.h();return function(n,r){const i=v.d(n,r);if(!i)return{};const o=e(n,{assetId:r.globalWidgetId}),{smart_objects:a}=i.body,{hasSmartContent:s,isEligibleForSmartContent:c,smartDefinitionId:l,smartTargetType:u,smartType:d}=t(n,r);return{globalWidgetBody:i.body,globalWidgetLabel:i.label,dependentsCount:{templatesCount:J(o,K),draftPagesCount:J(o,Y),livePagesCount:J(o,X)},hasSmartContent:s,isEligibleForSmartContent:c,smartDefinitionId:l,smartRuleIds:a&&(a||[]).map(e=>e.criterion_id),smartTargetType:u,smartType:d}}}const Z={editGlobalWidgetBody:O.c,publishGlobalWidget:O.f,fetchForParentConnections:b.b,upgradeGlobalWidget:O.k,openTab:y.f},ee=e=>"DesignEditorsUI.globalWidgetEditor."+e;class te extends r.PureComponent{constructor(e){super(e);this.mergeBodyEdits=e=>{const{globalWidgetBody:t}=this.props,n=Object.assign({},t,e);this.editBody(n)};this.handleCancel=()=>{const{onCancel:e}=this.props;e&&e()};this.getSmartObjectDataFromCriterion=e=>{const{smartTargetType:t}=this.props;return Object(k.a)(e,t)};this.handleMakeSmart=({definition:e,criterionType:t,initialCriterion:n})=>{const{globalWidgetId:r,editGlobalWidgetBody:i}=this.props;i(r,{definition_id:e.id,smart_objects:[this.getSmartObjectDataFromCriterion(n)],smart_type:t});this.publishGlobalWidget();this.setState({selectedSmartRuleId:n.id})};this.handleAddSmartRule=e=>{const{globalWidgetId:t,editGlobalWidgetBody:n}=this.props,{globalWidgetBody:r}=this.props,{smart_objects:i=[]}=r,o=[...i,this.getSmartObjectDataFromCriterion(e)];n(t,{smart_objects:Object(s.sortBy)(o,"order")});this.publishGlobalWidget();this.setState({selectedSmartRuleId:e.id})};this.handleSelectSmartRule=(e={})=>{const{id:t}=e;if(t){const{globalWidgetBody:t}=this.props,{smart_objects:n=[]}=t;if(!n.find(t=>t.criterion_id===e.id)){this.handleAddSmartRule(e);return}}this.setState({selectedSmartRuleId:t})};this.handleSaveSmartDefinition=(e,t={})=>{const{globalWidgetBody:n,globalWidgetId:r,editGlobalWidgetBody:i}=this.props,{definitionId:o,smartType:a}=t,s=n.smart_objects,c=e.map(this.getSmartObjectDataFromCriterion);i(r,{definition_id:o,smart_objects:Object(P.a)(s,c),smart_type:a});this.publishGlobalWidget();this.setState({selectedSmartRuleId:null})};this.upgradeGlobalWidget=()=>{this.props.upgradeGlobalWidget(this.props.globalWidgetId)};this.handleFormUpdate=(e,t,n)=>{const{selectedSmartRuleId:r}=this.state;if(r){const{globalWidgetBody:e}=this.props,{smart_objects:t=[]}=e,i=t.map(e=>e.criterion_id!==r?e:Object.assign({},e,n));this.mergeBodyEdits({smart_objects:i})}else this.mergeBodyEdits(n)};this.publishGlobalWidget=()=>{const{globalWidgetId:e,publishGlobalWidget:t,onPublish:n}=this.props;t(e);n&&n()};this.onViewCustomWidget=()=>{const{customWidgetForGlobalWidget:e}=this.props,t=new h.a({id:e.id,assetType:f.CUSTOM_WIDGET,label:e.name});this.props.openTab(t)};const t=g.b.bind(null,this.guardReadOnly);this.editBody=t(this.editBody,this);this.state={selectedSmartRuleId:null}}componentDidMount(){this.props.fetchForParentConnections(this.props.globalWidgetId)}componentDidUpdate(e){this.props.globalWidgetId!==e.globalWidgetId&&this.props.fetchForParentConnections(this.props.globalWidgetId)}get formKey(){const{globalWidgetId:e,revisionId:t}=this.props,{selectedSmartRuleId:n="default"}=this.state;return[e,n||"default",t].filter(Boolean).join("-")}guardReadOnly(){return this.props.isReadOnly}editBody(e){const{editGlobalWidgetBody:t,globalWidgetId:n}=this.props;t(n,e,!1)}renderUpgradeAlert(){if(!this.props.isLoaded||this.props.isReadOnly)return null;if(this.props.customWidgetForGlobalWidget){const e=Object(V.jsx)(l.a,{message:ee("customWidget.title")});return Object(V.jsx)(I.a,{className:"p-y-5 m-bottom-3",titleText:e,type:"info",children:Object(V.jsxs)(E.a,{justify:"end",children:[Object(V.jsx)(l.a,{message:ee("customWidget.message")}),Object(V.jsx)(T.a,{className:"p-left-5",shrink:0,children:Object(V.jsx)(S.a,{onClick:this.onViewCustomWidget,size:"extra-small",use:"tertiary-light",children:Object(V.jsx)(l.a,{message:ee("customWidget.buttonText")})})})]})})}const e=Object(V.jsx)(l.a,{message:ee("upgrade.title")});return Object(V.jsx)(I.a,{className:"p-y-5 m-bottom-3",titleText:e,type:"info",children:Object(V.jsxs)(E.a,{justify:"end",children:[Object(V.jsx)(l.a,{message:ee("upgrade.message")}),Object(V.jsx)(T.a,{className:"p-left-5",shrink:0,children:Object(V.jsx)(S.a,{onClick:this.upgradeGlobalWidget,size:"extra-small",use:"tertiary-light",children:Object(V.jsx)(l.a,{message:ee("upgrade.buttonText")})})})]})})}renderDependentsAlert(){const{dependentsCount:e,globalWidgetId:t,isLoaded:n,isReadOnly:r}=this.props;if(r||!n||!e)return null;const i=Object.keys(e).reduce((t,n)=>{const r=e[n];r&&t.push(Object(V.jsx)(l.a,{message:ee("dependents."+n),options:{count:r}},n));return t},[]);if(!i.length)return null;const o=Object(V.jsx)(x.a,{to:Object(C.b)(f.GLOBAL_WIDGET,t),children:Object(V.jsx)(c.a,{children:i})}),a=Object(V.jsx)(w.a,{color:d.MARIGOLD_DARK,name:"globalGroup"});return Object(V.jsx)(I.a,{className:"m-bottom-3",titleText:a,type:"warning",children:Object(V.jsx)(u.a,{message:ee("dependents.message"),options:{dependents:o}})})}renderPublishSection(){const{isLoaded:e,showPublishButton:t,showCancelButton:n}=this.props;if(!e||!t)return null;const r=t&&Object(V.jsx)(S.a,{onClick:this.publishGlobalWidget,use:"primary",children:Object(V.jsx)(l.a,{message:ee("publishButtonText")})}),i=n&&Object(V.jsx)(S.a,{onClick:this.handleCancel,use:"secondary",children:Object(V.jsx)(l.a,{message:ee("cancelButtonText")})});return Object(V.jsxs)(q,{children:[r,i]})}renderTitle(){const{globalWidgetLabel:e}=this.props;if(!e)return null;const t=Object(V.jsx)(l.a,{message:ee("title"),options:{label:e}});return Object(V.jsx)(G.a,{title:t})}renderSmartContentControls(){const{globalWidgetId:e,isEligibleForSmartContent:t,isLoaded:n,isReadOnly:r,smartDefinitionId:i,smartRuleIds:o,smartType:a}=this.props,{selectedSmartRuleId:s}=this.state;return n&&t&&!r?Object(V.jsx)(R.a,{definitionId:i,isReadOnly:r,onAddRule:this.handleAddSmartRule,onSaveSmartDefinition:this.handleSaveSmartDefinition,onSelectRule:this.handleSelectSmartRule,selectedRuleId:s,smartType:a,targetId:e,validRules:o}):null}renderForm(){if(!this.props.isLoaded)return Object(V.jsx)(_.a,{grow:!0});const{globalWidgetId:e,isReadOnly:t,catalogWidgetForGlobalWidget:n,globalWidgetBody:r}=this.props,{selectedSmartRuleId:i}=this.state;let o=r||{};if(i){const{smart_objects:e=[]}=r;for(const t of e)if(t.criterion_id===i){o=Object(s.omit)(t,D.a);break}}return Object(V.jsx)("div",{children:Object(V.jsx)(N.a,{id:""+e,flush:!1,module:o,moduleSpec:n,onUpdate:this.handleFormUpdate,readOnly:t},this.formKey)})}render(){return Object(V.jsxs)(W.a,{"data-test-id":"global_widget__form_card",children:[this.renderTitle(),Object(V.jsxs)(F.a,{flush:!0,children:[Object(V.jsxs)("div",{className:"p-x-6",children:[this.renderUpgradeAlert(),this.renderDependentsAlert(),this.renderSmartContentControls()]}),this.renderForm()]}),this.renderPublishSection()]})}}te.propTypes={globalWidgetId:o.a.number.isRequired,revisionId:o.a.number,globalWidgetBody:o.a.object,globalWidgetLabel:o.a.string,catalogWidgetForGlobalWidget:o.a.instanceOf(p.a),customWidgetForGlobalWidget:o.a.instanceOf(p.a),editGlobalWidgetBody:o.a.func.isRequired,isLoaded:o.a.bool.isRequired,isReadOnly:o.a.bool.isRequired,publishGlobalWidget:o.a.func.isRequired,upgradeGlobalWidget:o.a.func.isRequired,onCancel:o.a.func,onPublish:o.a.func,openTab:o.a.func.isRequired,showPublishButton:o.a.bool,showCancelButton:o.a.bool,fetchForParentConnections:o.a.func.isRequired,dependentsCount:o.a.shape({templatesCount:o.a.number.isRequired,draftPagesCount:o.a.number.isRequired,livePagesCount:o.a.number.isRequired}),isEligibleForSmartContent:o.a.bool.isRequired,smartDefinitionId:o.a.number,smartRuleIds:o.a.arrayOf(o.a.number),smartTargetType:o.a.oneOf(Object.keys(A.e)),smartType:o.a.oneOf(Object.keys(A.b))};te.defaultProps={globalWidgetBody:{},hasSmartContent:!1,isEligibleForSmartContent:!1,isReadOnly:!1,showPublishButton:!0,showCancelButton:!1};t.a=Object($.compose)(Object(z.a)(),Object(a.connect)(Q,Z))(te)},,,,,,function(e,t,n){"use strict";var r=n(40),i=n(288),o=n.n(i),a=n(2634),s=n(2679),c=n(506);const l="customModules",u=Object.freeze({widget_container:"flexColumn",cell:"groupModule",virtual_cell:"flexColumn",global_group:"partial",global_widget:l,section_delimiter:l});var d=n(2659),p=n(324),h=n(348),m=n(351),f=n(35),g=n(45);const{getContentIconsUrl:b}=a.b,O="xxs",y={};class j extends r.PureComponent{constructor(e){super(e);this.checkIconUrl=this.checkIconUrl.bind(this);this.onIconFetchComplete=this.onIconFetchComplete.bind(this);this.img=null;this._isMounted=!1;this.state={iconFetchComplete:{}}}componentDidMount(){this._isMounted=!0;this.checkIconUrl()}componentDidUpdate(e){const{icon:t}=this.props;e.icon!==t&&this.checkIconUrl()}componentWillUnmount(){this._isMounted=!1}get iconUrl(){const{icon:e}=this.props;if(!e)return e;if(d.a.test(e))return e;const t=e.split(":");let n,r,i;if(f.b[t[0]]){i=t[0];n=t[1];r=t[2]}else{n=t[0];r=t[1]}return b(i,n,r)}checkIconUrl(){const{iconUrl:e}=this;if(e&&!y[e]){const t=new Image;t.crossOrigin="anonymous";t.onload=()=>{this.onIconFetchComplete(e,!1)};t.onerror=()=>{this.onIconFetchComplete(e,!0)};t.src=e;this.img=t}}onIconFetchComplete(e,t){y[e]={failed:t};this._isMounted&&this.setState({iconFetchComplete:Object.assign({},this.state.iconFetchComplete,{[e]:!0})})}render(){const{alignment:e,className:t,color:n,size:r,type:i}=this.props,{iconUrl:a}=this,d=o()("widget-icon",t);let p=parseInt(""+(m.c[r]||r),10);p=isNaN(p)?parseInt(""+m.c[O],10):p;const f={height:p,width:p},b=Object.assign({},f,{verticalAlign:e});let j;const v=y[a]&&y[a].failed;if(!a||v)j=Object(g.jsx)(s.a,{className:"widget-icon__icon",color:n,name:u[i]||l,size:r});else if(Object(h.c)())j=Object(g.jsx)(c.a,{responsive:!0,src:this.iconUrl,width:"100%"});else{const e=`url(${this.iconUrl.replace(/(?=[()])/g,"\\")}) no-repeat center/contain`,t=Object.assign({},f,{backgroundColor:n,mask:e,WebkitMask:e});j=Object(g.jsx)("div",{className:"widget-icon__mask",style:t})}return Object(g.jsx)("div",{className:d,style:b,"data-test-id":"widget-icon",children:j})}}j.defaultProps={alignment:null,className:null,color:p.OBSIDIAN,icon:null,size:O};t.a=j},,,,,,,,,,,function(e,t,n){"use strict";var r={AUTOMATED_DRAFT:"AUTOMATED_DRAFT",AUTOMATED_DRAFT_AB:"AUTOMATED_DRAFT_AB",AUTOMATED_DRAFT_ABVARIANT:"AUTOMATED_DRAFT_ABVARIANT",AUTOMATED_FOR_FORM_BUFFER:"AUTOMATED_FOR_FORM_BUFFER",AUTOMATED_FOR_FORM_DRAFT:"AUTOMATED_FOR_FORM_DRAFT",BLOG_EMAIL_DRAFT:"BLOG_EMAIL_DRAFT",DISCARDABLE_STUB:"DISCARDABLE_STUB",DRAFT:"DRAFT",DRAFT_AB:"DRAFT_AB",DRAFT_AB_VARIANT:"DRAFT_AB_VARIANT",ERROR:"ERROR",LOSER_AB_VARIANT:"LOSER_AB_VARIANT",PAGE_STUB:"PAGE_STUB",RSS_TO_EMAIL_DRAFT:"RSS_TO_EMAIL_DRAFT",AUTOMATED:"AUTOMATED",AUTOMATED_AB:"AUTOMATED_AB",AUTOMATED_AB_VARIANT:"AUTOMATED_AB_VARIANT",AUTOMATED_FOR_FORM:"AUTOMATED_FOR_FORM",AUTOMATED_SENDING:"AUTOMATED_SENDING",BLOG_EMAIL_PUBLISHED:"BLOG_EMAIL_PUBLISHED",PRE_PROCESSING:"PRE_PROCESSING",PROCESSING:"PROCESSING",PUBLISHED:"PUBLISHED",PUBLISHED_AB:"PUBLISHED_AB",PUBLISHED_AB_VARIANT:"PUBLISHED_AB_VARIANT",PUBLISHED_NO_CONTACTS:"PUBLISHED_NO_CONTACTS",PUBLISHED_OR_SCHEDULED:"PUBLISHED_OR_SCHEDULED",RSS_TO_EMAIL_PUBLISHED:"RSS_TO_EMAIL_PUBLISHED",SCHEDULED:"SCHEDULED",SCHEDULED_AB:"SCHEDULED_AB"};const i={DRAFT:[r.AUTOMATED_DRAFT,r.AUTOMATED_DRAFT_AB,r.AUTOMATED_DRAFT_ABVARIANT,r.AUTOMATED_FOR_FORM_BUFFER,r.AUTOMATED_FOR_FORM_DRAFT,r.BLOG_EMAIL_DRAFT,r.DISCARDABLE_STUB,r.DRAFT,r.DRAFT_AB,r.DRAFT_AB_VARIANT,r.ERROR,r.LOSER_AB_VARIANT,r.PAGE_STUB,r.RSS_TO_EMAIL_DRAFT],PUBLISHED:[r.AUTOMATED,r.AUTOMATED_AB,r.AUTOMATED_AB_VARIANT,r.AUTOMATED_FOR_FORM,r.AUTOMATED_SENDING,r.BLOG_EMAIL_PUBLISHED,r.PRE_PROCESSING,r.PROCESSING,r.PUBLISHED,r.PUBLISHED_AB,r.PUBLISHED_AB_VARIANT,r.PUBLISHED_NO_CONTACTS,r.PUBLISHED_OR_SCHEDULED,r.RSS_TO_EMAIL_PUBLISHED],SCHEDULED:[r.SCHEDULED,r.SCHEDULED_AB]};t.a=i},,,,,function(e,t,n){"use strict";var r=n(40),i=n(41),o=n.n(i),a=n(55),s=n(6),c=n(99),l=n(73),u=n(2655),d=n(405),p=Object.freeze({CONTENT_TYPES:[d.a.ACCORDION,d.a.ANIMATION,d.a.BLOG_POST,d.a.BUTTONS,d.a.CODE,d.a.CTA,d.a.FEED,d.a.FORM,d.a.ICON,d.a.IMAGE,d.a.LISTS,d.a.LOGO,d.a.MENU,d.a.RICH_TEXT,d.a.SLIDER,d.a.TEXT,d.a.VIDEO],FUNCTIONS:[d.a.BANNER,d.a.BLOG,d.a.BRANDING,d.a.CALCULATOR,d.a.CONVERSION,d.a.EMAIL,d.a.GALLERY,d.a.HEADERS,d.a.INTERACTION,d.a.LAYOUT,d.a.MAP,d.a.MULTIMEDIA,d.a.NAVIGATION,d.a.PROGRESS_BAR,d.a.SEARCH,d.a.SETTINGS,d.a.SOCIAL,d.a.TRANSLATION]}),h=n(1007),m=n(45);n.d(t,"a",(function(){return j}));const f=e=>`designdata.widgetCatalog.widgetCategories.${e}.label`,g=e=>"contentUtils.cmv2Tags."+e,b={contentTypes:p.CONTENT_TYPES,functions:p.FUNCTIONS},O=e=>Object.keys(d.a).find(t=>d.a[t]===e),y=Object(l.memoize)(e=>Object.keys(b).map(e=>({text:Object(c.a)(g("categories."+e)),options:b[e].map(e=>({text:Object(c.a)(g(e)),value:O(e)}))})));class j extends r.Component{constructor(...e){super(...e);this.onChange=e=>{const{onChange:t}=this.props;t&&t(e.target.value)}}getCategoryOptions(){return this.props.showCategories?{text:Object(c.a)(f("sectionLabel")),options:h.a.filter(e=>this.props.getCategoryData(e)).map(e=>({text:Object(c.a)(f(e)),value:e,disabled:this.props.selectedCategory&&this.props.selectedCategory!==e}))}:null}render(){const{autoFocus:e,className:t,isReadOnly:n,placeholder:r,selectedTags:i,showTags:o}=this.props,a=[...i],c=this.getCategoryOptions(),l=o?y(Object(s.a)()):[],d=c?[c,...l]:l;return Object(m.jsx)(u.a,{"data-test-id":"widget-catalog-list-tags-category-select",anchorType:"button",autoFocus:e,className:t,closeOnTargetLeave:!0,disabled:n,multi:!0,onChange:this.onChange,options:d,value:a,placeholder:r})}}j.propTypes={autoFocus:o.a.bool,isReadOnly:o.a.bool,selectedTags:o.a.arrayOf(o.a.string),onChange:o.a.func,placeholder:o.a.string,getCategoryData:o.a.func,showCategories:o.a.bool,selectedCategory:o.a.string,showTags:o.a.bool,className:o.a.string};j.defaultProps={isReadOnly:!1,selectedTags:[],showCategories:!0,showTags:!0,getCategoryData:a.a}},,,function(e,t,n){"use strict";var r=n(1049);function i(e,...t){return Object(r.a)(t).get("hubdb/api/v2/tables/"+e)}function o(e,...t){return Object(r.a)(t).get("hubdb/api/v2/tables",{query:e})}function a({tableId:e,rowId:t},...n){return Object(r.a)(n).get(`hubdb/api/v2/tables/${e}/rows/${t}`)}function s({tableId:e,query:t},...n){return Object(r.a)(n).get(`hubdb/api/v2/tables/${e}/rows`,{query:t})}function c({tableId:e,query:t},...n){return Object(r.a)(n).get(`hubdb/api/v2/tables/${e}/rows/search`,{query:t})}var l=n(1067),u=n(68),d=n(64);n.d(t,"d",(function(){return O}));n.d(t,"e",(function(){return y}));n.d(t,"b",(function(){return j}));n.d(t,"c",(function(){return v}));n.d(t,"f",(function(){return C}));n.d(t,"g",(function(){return x}));n.d(t,"a",(function(){return E}));n.d(t,"h",(function(){return T}));const p=Object(d.b)(u.HUBDB_FETCH_TABLE,i),h=Object(d.b)(u.HUBDB_FETCH_TABLE_BY_NAME,o),m=Object(d.b)(u.HUBDB_FETCH_TABLES,o),f=Object(d.b)(u.HUBDB_FETCH_ROW,a),g=Object(d.b)(u.HUBDB_FETCH_ROWS,s),b=Object(d.b)(u.HUBDB_SEARCH_ROWS,c),O=e=>isNaN(parseInt(e,10))?h({name:e}):p(e),y=e=>m(e),j=e=>f(e),v=e=>g(e),C=e=>(t,n)=>{const r=Object(l.j)(n(),{id:e});t({type:u.HUBDB_SAVE_TABLE_CACHE,table:r})},x=(e,t)=>(n,r)=>{const i=Object(l.a)(r(),{tableId:e,rowId:t});n({type:u.HUBDB_SAVE_ROW_CACHE,tableId:e,row:i})},E=()=>({type:u.HUBDB_CLEAR_CACHE}),T=e=>b(e)},function(e,t,n){"use strict";var r=n(30),i=n.n(r),o=n(64),a=n(1049);function s({objectTypeId:e,id:t,query:n},...r){return Object(a.a)(r).get(`inbounddb-objects/v1/crm-objects/${e}/${t}`,{query:n})}function c({objectTypeId:e,query:t},...n){return Object(a.a)(n).post("crm-search/search",{data:Object.assign({objectTypeId:e},t)})}function l(e,...t){return Object(a.a)(t).get("crm-object-schemas/v3/schemas/"+e)}function u(e,...t){return Object(a.a)(t).get(`crm/v3/properties/${e}/groups`)}function d(...e){return Object(a.a)(e).get("inbounddb-meta/v1/object-types/for-portal")}function p(e,...t){return Object(a.a)(t).post("crm/v3/objects/"+e.objectType,{data:{properties:e.properties}})}function h(e,...t){return Object(a.a)(t).patch(`crm/v3/objects/${e.objectType}/${e.objectId}`,{data:{properties:e.properties}})}var m=n(1082),f=n(68),g=n(1083),b=n(1084);n.d(t,"b",(function(){return E}));n.d(t,"c",(function(){return T}));n.d(t,"d",(function(){return I}));n.d(t,"h",(function(){return w}));n.d(t,"e",(function(){return _}));n.d(t,"f",(function(){return N}));n.d(t,"g",(function(){return A}));n.d(t,"i",(function(){return D}));n.d(t,"a",(function(){return k}));n.d(t,"j",(function(){return P}));const O=Object(o.b)(f.CRM_OBJECTS_FETCH_OBJECT,s),y=Object(o.b)(f.CRM_OBJECTS_FETCH_OBJECTS,c),j=Object(o.b)(f.CRM_OBJECTS_FETCH_OBJECT_TYPES,d),v=Object(o.a)(f.CRM_OBJECTS_EDIT_OBJECT,p),C=Object(o.a)(f.CRM_OBJECTS_EDIT_OBJECT,h),x=Object(o.b)(f.CRM_OBJECTS_FETCH_OBJECT_SCHEMA_GROUPS,u),E=e=>v(e),T=e=>C(e);function S(e,t){return[...Object(g.d)(e,t),"hs_object_id"]}function I(e,t,n){return(r,i)=>{const o=Object(m.g)(i(),{objectType:e})||{};let a;a=t===b.c?{[b.c]:b.d}:{properties:S(o,t)};return r(O({objectType:e,objectTypeId:o.objectTypeId,id:n,query:a}))}}function w(e,t,n){return(r,i)=>{const o=Object(m.g)(i(),{objectType:e})||{};n.sorts=n.sorts?n.sorts:[{property:"hs_object_id",order:"ASC"}];n.requestOptions={properties:S(o,t)};return r(y({objectType:e,objectTypeId:o.objectTypeId,query:n}))}}const _=e=>{const{request:t,receive:n,error:r}=_;return(o,a,{httpClient:s=i.a}={})=>{o(t(e));return l(e,s).then(t=>{o(n(e,t));return t}).catch(t=>{if(/-|_/.test(e))return l("p_"+e,s).then(t=>{o(n(e,t));return t}).catch(t=>{o(r(e,t));return t});o(r(e,t));return t})}};_.request=e=>({type:f.CRM_OBJECTS_FETCH_OBJECT_SCHEMA,options:e});_.receive=(e,t)=>({type:f.CRM_OBJECTS_FETCH_OBJECT_SCHEMA,response:t,options:e});_.error=(e,t)=>({type:f.CRM_OBJECTS_FETCH_OBJECT_SCHEMA,error:t,options:e});const N=e=>x(e),A=()=>j();function D(e,t){return(n,r)=>{const i=Object(m.b)(r(),{id:t,objectType:e});n({type:f.CRM_OBJECTS_SAVE_OBJECT_CACHE,crmObject:i,objectType:e})}}function k(e){return{type:f.CRM_OBJECTS_CLEAR_CACHE,objectType:e}}function P(e,t,n){return r=>{r({type:f.CRM_OBJECTS_SAVE_PROPERTY_CACHE,property:n,objectType:e,options:t})}}},function(e,t,n){"use strict";var r=n(1098),i=n(30),o=n.n(i);function a(e=o.a){return e.get("pipelines/v2/pipelines/0-1/contacts-lifecycle-pipeline")}var s=n(245);n.d(t,"a",(function(){return d}));const c=()=>({type:r.n,status:s.o.PENDING}),l=e=>({type:r.n,payload:e.stages,status:s.o.SUCCEEDED}),u=e=>({type:r.n,error:!0,payload:e,status:s.o.FAILED});function d(){return e=>{e(c());return a().then(t=>{e(l(t));return t}).catch(t=>{e(u(t));return t})}}},function(e,t,n){"use strict";var r={};n.r(r);n.d(r,"fetchClsLists",(function(){return s}));n.d(r,"fetchClsList",(function(){return c}));var i=n(1098),o=n(30),a=n.n(o);function s(e,t=a.a){return t.get("contacts/v1/segment-ui/all",{query:{q:e}})}function c(e,t=a.a){return t.get("contacts/v1/lists/"+e)}var l=n(245),u=n(1099),d=n(73);n.d(t,"a",(function(){return f}));n.d(t,"b",(function(){return y}));const p=e=>({type:i.j,meta:{searchTerm:e},status:l.o.PENDING}),h=(e,t)=>({type:i.j,payload:t,meta:{searchTerm:e},status:l.o.SUCCEEDED}),m=(e,t)=>({type:i.j,error:!0,payload:t,meta:{searchTerm:e},status:l.o.FAILED});function f(e,t,n=r){return(r,i,o)=>{const a=i(),s=Object.keys(a.contactLists.byClsId);if(!e&&t&&s.length&&!Object(d.difference)(t,s).length)return Promise.resolve({lists:s.map(e=>({list:a.contactLists.byClsId[e]}))});r(p(e));return n.fetchClsLists(e,o).then(t=>{r(h(e,t));return t}).catch(t=>{r(m(e,t));return t})}}const g=e=>({type:i.m,meta:{listId:e},status:l.o.PENDING}),b=(e,t)=>({type:i.m,payload:t,meta:{listId:e},status:l.o.SUCCEEDED}),O=(e,t)=>({type:i.m,error:!0,payload:t,meta:{listId:e},status:l.o.FAILED});function y(e){return(t,n,r)=>{const i=n(),o=Object(u.a)(i,{listId:e}),a=Object(u.b)(i,{listId:e});if(!o&&a!==l.o.PENDING){t(g(e));c(e,r).then(n=>{t(b(e,n))}).catch(n=>{t(O(e,n))})}}}},function(e,t,n){"use strict";var r={};n.r(r);n.d(r,"filterByName",(function(){return l}));n.d(r,"filterById",(function(){return u}));n.d(r,"fetchAudiences",(function(){return d}));n.d(r,"fetchAudienceById",(function(){return p}));var i=n(30),o=n.n(i),a=n(1),s=n.n(a);const c=Object.freeze(["hs_audience_name","hs_saved_audience_id"]);function l(e=""){const t=[];e&&t.push({filters:[{property:"hs_audience_name",value:`*${e}*`,operator:"EQ"}]});return t}function u(e){const t=[];e&&t.push({filters:[{property:"hs_saved_audience_id",value:""+e,operator:"EQ"}]});return t}function d(e="",t=o.a){const n=l(e);return t.post("crm-search/search",{query:{portalId:s.a.get(),properties:c},data:{objectTypeId:"AUDIENCE",count:50,requestOptions:{includeAllValues:!0},filterGroups:n}})}function p(e,t=o.a){const n=u(e);return t.post("crm-search/search",{query:{portalId:s.a.get(),properties:c},data:{objectTypeId:"AUDIENCE",count:1,requestOptions:{includeAllValues:!0},filterGroups:n}})}var h=n(245),m=n(1116),f=n(1098);n.d(t,"a",(function(){return C}));n.d(t,"b",(function(){return x}));const g=e=>({type:f.l,meta:{criterionIds:e},status:h.o.PENDING}),b=(e,t)=>({type:f.l,payload:t,meta:{criterionIds:e},status:h.o.SUCCEEDED}),O=(e,t)=>({type:f.l,error:!0,payload:t,meta:{criterionIds:e},status:h.o.FAILED}),y=(e,t)=>({type:f.p,meta:{audienceId:e,criterionId:t},status:h.o.PENDING}),j=(e,t,n)=>({type:f.p,meta:{audienceId:e,criterionId:t},payload:n,status:h.o.SUCCEEDED}),v=(e,t,n)=>({type:f.p,error:!0,payload:n,meta:{audienceId:e,criterionId:t},status:h.o.FAILED});function C({searchValue:e,criterionIds:t},n=r){return(r,i,o)=>{r(g(t));return n.fetchAudiences(e,o).then(e=>{r(b(t,e));return e}).catch(e=>{r(O(t,e));return e})}}function x(e,t,n=r){return(r,i,o)=>{const a=i(),s=Object(m.a)(a,e),c=Object(m.c)(a,{criterionId:t});if(!s&&c!==h.o.PENDING){r(y(e,t));n.fetchAudienceById(e,o).then(n=>{r(j(e,t,n))}).catch(n=>{r(v(e,t,n))})}}}},function(e,t,n){"use strict";var r=n(2),i=n(40),o=n(59),a=n(1132),s=n(2634),c=n(1133),l=n(279),u=n(283),d=n(2712),p=n(2679),h=n(710),m=n(168),f=n(45);const g=e=>"ContentComponents.cmv2."+e;var b=({inheritedValue:e,isDefaultValue:t,onResetClick:n,onUnlinkClick:r,scrollToField:i,themePath:c})=>{const{inheritanceType:b,inheritanceFieldKey:O,inheritanceFieldLabel:y}=e||{},j=Object(o.useSelector)(a.c);if(!b)return null;let v;t||(v=b===m.a.brandSettings?Object(f.jsx)(l.a,{message:g("inheritanceTooltip.reset.brandSettings")}):Object(f.jsx)(l.a,{message:g("inheritanceTooltip.reset.default")}));b===m.a.brandSettings?v=Object(f.jsx)(u.a,{message:g("inheritanceTooltip.brandSettings_jsx"),options:{href:s.b.brandSettings(j)},elements:{Link:d.a}}):b===m.a.theme&&c?v=y?Object(f.jsx)(u.a,{message:g("inheritanceTooltip.themeEditorField_jsx"),options:{href:s.b.themeEditor(c,{scrollToField:O.join(".")}),inheritanceFieldLabel:y},elements:{Link:d.a}}):Object(f.jsx)(u.a,{message:g("inheritanceTooltip.themeEditor_jsx"),options:{href:s.b.themeEditor(c)},elements:{Link:d.a}}):y&&(v=i?Object(f.jsx)(u.a,{message:g("inheritanceTooltip.field_jsx"),options:{onClick:()=>{i({fieldKey:O})},inheritanceFieldLabel:y},elements:{Link:d.a}}):Object(f.jsx)(l.a,{message:g("inheritanceTooltip.field"),options:{inheritanceFieldLabel:y}}));return v?Object(f.jsx)(h.a,{className:"m-left-1",onClick:t?r:n,size:"sm",tooltip:v,use:"link",children:Object(f.jsx)(p.a,{className:"m-right-0",name:t?"link":"unlink"})}):null};const O=["label","LabelComponent"],y=e=>"ContentComponents.cmv2."+e,j=e=>({brandKitId:Object(a.c)(e)}),v=Object(o.connect)(j);class C extends i.PureComponent{constructor(e){super(e);this.handleResetClick=this.handleResetClick.bind(this);this.renderResetButton=this.renderResetButton.bind(this)}get isOccurrence(){const{fieldKey:e}=this.props;return e.some(e=>"number"==typeof e)}handleResetClick(e){const{fieldKey:t,onFieldReset:n}=this.props;e.stopPropagation();e.preventDefault();n(t)}renderInheritanceIcon(){const{inheritedValue:e,isDefaultValue:t,isOccurrencesLabel:n,scrollToField:r,label:i,LabelComponent:o,allowFieldReset:a,onFieldUnlink:s}=this.props,{property_value_paths:c}=e||{},l=c&&n;return!a||this.isOccurrence||l||!o&&!i?null:Object(f.jsx)(b,{inheritedValue:e,isDefaultValue:t,onResetClick:this.handleResetClick,onUnlinkClick:s,scrollToField:r})}renderResetButton(){const{isDefaultValue:e,allowFieldReset:t,LabelComponent:n,label:r}=this.props;return e||this.isOccurrence||!t?null:n||r?Object(f.jsx)(h.a,{tooltip:Object(f.jsx)(l.a,{message:y("resetButton.resetFieldTooltip")}),use:"link",onClick:this.handleResetClick,className:"align-self-center m-left-1",size:"xs",children:Object(f.jsx)("div",{children:Object(f.jsx)(p.a,{name:"refresh"})})}):null}renderLabel(){const e=this.props,{label:t,LabelComponent:n}=e,i=Object(r.a)(e,O);return t?n?Object(f.jsx)(n,Object.assign({},i,{label:t})):t&&Object(f.jsx)(c.a,{label:t}):null}render(){const{className:e,inheritedValue:t}=this.props,{inheritanceType:n}=t||{};return Object(f.jsxs)("span",{className:e,children:[this.renderLabel(),s.b.isUngated("CMv2:DisplayInheritanceIcon")&&n?this.renderInheritanceIcon():this.renderResetButton()]})}}C.defaultProps={isDefaultValue:!0};t.a=v(C)},function(e,t,n){"use strict";var r=n(40),i=n(55),o=n(59),a=n(1),s=n.n(a),c=n(1148),l=n.n(c),u=n(2634),d=n(73),p=n(279),h=n(2654),m=n(443),f=n(1140),g=n(485),b=n(1181),O=n(45);const y=e=>"ContentComponents.cmv2.fields.cta."+e,j=e=>"ContentComponents.buttons."+e;class v extends r.Component{constructor(e){super(e);this.onEdit=this.onEdit.bind(this);this.onDelete=this.onDelete.bind(this)}shouldComponentUpdate(e,t){return l()(this,e,t)}onEdit(){const{onOpenEditor:e=i.a}=this.props;e()}onDelete(){const{onFieldChange:e=i.a}=this.props;e("")}renderImage(){const{hasCtaAccess:e=!1,selectedCtaImage:t}=this.props,{altText:n,url:r}=t||{};if(!t){const t=y(e?"noCtaSelected":"noAccess");return Object(O.jsx)("span",{className:"cmv2-cta-zero-state",children:Object(O.jsx)(p.a,{message:t})})}return Object(O.jsx)(b.a,{alt:n,src:r})}renderReplaceButton(){const{hasCtaAccess:e=!1,onOpenPicker:t=i.a,readOnly:n=!1,value:r=null}=this.props,o=!r||n||!e;return r?Object(O.jsx)(m.a,{"data-test-id":"cmv2-cta-replace-button",disabled:o,onClick:t,use:"link",children:Object(O.jsx)(g.a,{children:Object(O.jsx)(p.a,{message:j("replace")})})}):null}renderAddButton(){const{hasCtaAccess:e=!1,onOpenPicker:t=i.a,readOnly:n=!1,value:r=null}=this.props,o=n||!e;return r?null:Object(O.jsx)(m.a,{className:"m-top-3","data-test-id":"cmv2-cta-add-button",disabled:o,onClick:t,size:"small",use:"tertiary",children:Object(O.jsx)(p.a,{message:y("insertCta")})})}renderRemoveButton(e=!1){const{hasCtaAccess:t=!1,readOnly:n=!1,required:r,value:i=null}=this.props,o=n||Boolean(r&&i&&t);return e||i?Object(O.jsx)(m.a,{"data-test-id":"cmv2-cta-remove-button",disabled:o,onClick:this.onDelete,use:"link",children:Object(O.jsx)(g.a,{children:Object(O.jsx)(p.a,{message:j("remove")})})}):null}renderEditButton(e=!1){const{disableEdit:t=!1,editTooltip:n,hasCtaAccess:r=!1,readOnly:i=!1,value:o=null}=this.props,a=i||!o||t||!r;if(!e&&!o)return null;let s=Object(O.jsx)(m.a,{className:"cmv2-cta-edit-button","data-test-id":"cmv2-cta-edit-button",disabled:a,onClick:this.onEdit,size:"small",use:"tertiary-light",children:Object(O.jsx)(g.a,{children:Object(O.jsx)(p.a,{message:y("editCta")})})});n&&(s=Object(O.jsx)(h.a,{title:n,children:s}));return s}render(){const{label:e="",help_text:t,inline_help_text:n,required:r,value:i=null}=this.props;return Object(O.jsx)(f.a,{helpText:t,inlineHelpText:n,label:e,labelItemRight:Object(O.jsxs)("div",{children:[this.renderReplaceButton(),this.renderRemoveButton()]}),required:r,children:Object(O.jsxs)("div",{children:[this.renderImage(),i?this.renderEditButton():this.renderAddButton()]})})}}var C=v,x=n(282),E=n(696),T=n(2712),S=n(2792),I=n(1183),w=n(1065),_=n(1185),N=n(2758),A=n(698),D=n(378);const k=()=>{const e=w.c();return(t,n)=>{const r=n.value;let i,o;if(Object(D.b)(r)){i=_.c(t,{id:Number(r),isInEmail:n.isInEmail});o=i?i.ctaInfo[0].image:null}else{i=w.a(t,{guid:r});o=e(t,{guid:r})}return{cta:i,selectedCtaImage:o}}},P=(e,t)=>({fetchCta:n=>Object(D.b)(t.value)?e(I.b(n)):e(S.a(n))}),R=Object(o.connect)(k,P),F=e=>"ContentComponents.cmv2.fields.cta."+e;class L extends r.Component{constructor(e){super(e);this.swapOutIds=e=>{this.onInsertCta(null,e)};this.trackPQLClick=this.trackPQLClick.bind(this);this.onInsertCta=this.onInsertCta.bind(this);this.onClosePicker=this.onClosePicker.bind(this);this.onOpenPicker=this.onOpenPicker.bind(this);this.onOpenEditor=this.onOpenEditor.bind(this);this.state={hasCtaAccess:!1,showPicker:N.e.CLOSED,input:""}}componentDidMount(){const{fetchCta:e,value:t=null}=this.props;t&&e(t);this.setState({hasCtaAccess:Object(D.a)()})}shouldComponentUpdate(e,t){return l()(this,e,t)}componentDidUpdate(e){const{cta:t,fetchCta:n,value:r=null}=this.props,{value:i=null}=e;Object(d.isEqual)(i,r)||t||n(r).catch(e=>{throw e})}trackPQLClick(){const{trackFieldAction:e}=this.props;e&&e("cta-pql-click")}onInsertCta(e,t){const{fetchCta:n,onFieldChange:r=i.a}=this.props;n(t).then(()=>{r(t)}).catch(e=>{setTimeout(()=>{throw e})});this.onClosePicker()}onOpenPicker(){this.setState({showPicker:N.e.OPEN})}onOpenEditor(){const{value:e=null}=this.props;Object(D.b)(e)?Object(D.c)(e):this.setState({showPicker:N.e.EDIT})}onClosePicker(){this.setState({showPicker:N.e.CLOSED})}renderCtaAccessWarning(){const e=Object(O.jsx)(T.a,{external:!0,href:u.b.marketingHubPricingPage(),onClick:this.trackPQLClick,children:Object(O.jsx)(p.a,{message:F("missingScope.upgradeLinkText")})});return Object(O.jsx)(E.a,{titleText:Object(O.jsx)(p.a,{message:F("missingScope.title")}),type:"warning",children:Object(O.jsx)(x.a,{message:F("missingScope.message"),options:{upgradeLink:e}})})}renderCtaPicker(){const{value:e=null,isVideo:t=!1,includeVideoCtas:n=!1}=this.props,{showPicker:r}=this.state;return r===N.e.CLOSED?null:Object(O.jsx)(A.a.Consumer,{children:({CtaPicker:i,FilePicker:o})=>Object(O.jsx)(i,{portalId:s.a.get(),handleInsert:this.onInsertCta,handleClose:this.onClosePicker,selectedGuid:r===N.e.EDIT?e:null,FilePicker:o,isVideo:t,includeVideoCtas:n})})}renderCtaMigratedWarning(){const{cta:e}=this.props,{migratedWebInteractiveContentId:t}=e;return Object(O.jsxs)(E.a,{titleText:Object(O.jsx)(p.a,{message:F("migrated.title")}),type:"warning",children:[Object(O.jsx)(p.a,{message:F("migrated.message")}),Object(O.jsx)("div",{className:"m-top-1",children:Object(O.jsx)(T.a,{onClick:()=>this.swapOutIds(t),children:Object(O.jsx)(p.a,{message:F("migrated.swapOutMessage")})})})]})}render(){const{hasCtaAccess:e}=this.state,{cta:t}=this.props;return Object(O.jsxs)("div",{children:[!e&&this.renderCtaAccessWarning(),t&&t.isMigrated&&this.renderCtaMigratedWarning(),Object(O.jsx)(C,Object.assign({},this.props,{hasCtaAccess:e,onOpenPicker:this.onOpenPicker,onOpenEditor:this.onOpenEditor})),this.renderCtaPicker()]})}}t.a=R(L)},function(e,t,n){"use strict";var r=n(40),i=n(1148),o=n.n(i),a=n(73),s=n(4),c=n(512),l=n(2),u=n(41),d=n.n(u),p=n(2669),h=n(513),m=n(2682),f=n(45);const g=["disabled","max","min","numberInputProps","numberInputWidth","onChange","readOnly","value"];class b extends r.Component{render(){const e=this.props,{disabled:t,max:n,min:r,numberInputProps:i,numberInputWidth:o,onChange:a,readOnly:s,value:c}=e,u=Object(l.a)(e,g);return Object(f.jsxs)("div",{className:"private-slider__input",children:[Object(f.jsx)(h.a,Object.assign({className:"private-slider__number-input",disabled:t,max:n,min:r,value:c,onChange:a,readOnly:s,style:{width:o}},i)),Object(f.jsx)(p.a,Object.assign({disabled:t,max:n,min:r,value:c,onChange:a,readOnly:s},u))]})}}b.propTypes=Object.assign({},p.a.propTypes,{defaultValue:d.a.number,numberInputProps:d.a.object,numberInputWidth:d.a.oneOfType([d.a.string,d.a.number]),onChange:d.a.func,readOnly:d.a.bool,value:d.a.number});b.defaultProps=p.a.defaultProps;b.displayName="UISliderInput";var O=Object(m.a)(b),y=n(160),j=n(176),v=n(67),C=n(165);function x(e){return Object(a.isNumber)(e)&&isFinite(e)}class E extends r.Component{constructor(e){super(e);this.numberFormatter=this.numberFormatter.bind(this);this.onChange=this.onChange.bind(this)}shouldComponentUpdate(e,t){return o()(this,e,t)}get seleniumKey(){const{fieldKey:e=[]}=this.props;return e.join(".")}get placeholder(){const{min:e,placeholder:t}=this.props;return t||(Object(v.c)(this.props.default)?Object(v.c)(e)?this.numberFormatter(0):this.numberFormatter(e):this.numberFormatter(this.props.default))}numberFormatter(e){const{prefix:t,suffix:n}=this.props;return Object(v.c)(e)?null:`${t||""}${s.a.formatNumber(e)}${n||""}`}onChange(e){let t=e.target.value;const{min:n,max:r,onFieldChange:i,format:o=C.a.ANY}=this.props;x(n)&&x(t)&&t<n&&(t=n);x(r)&&x(t)&&t>r&&(t=r);Object(a.isNumber)(t)?o!==C.a.INTEGER||Number.isInteger(t)?i(t):i(Math.round(t)):i(null)}renderText(){const{error:e=!1,max:t,min:n,readOnly:r=!1,step:i=1,useOnDark:o,value:a}=this.props;return Object(f.jsx)(c.a,{"data-selenium":this.seleniumKey,error:e,formatter:this.numberFormatter,max:t,min:n,onChange:this.onChange,placeholder:this.placeholder,readOnly:r,stepSize:i,use:o?"on-dark":"default",value:a})}renderSlider(){const{error:e=!1,max:t,min:n,readOnly:r=!1,step:i=1,useOnDark:o,value:a}=this.props;return Object(f.jsx)(O,{max:t,min:n,numberInputProps:{"data-selenium":this.seleniumKey,error:e,formatter:this.numberFormatter,use:o?"on-dark":"default",placeholder:this.placeholder},numberInputWidth:"45%",onChange:this.onChange,readOnly:r,showLabels:!0,step:i,value:a})}render(){const{display:e="text"}=this.props;return e===j.a[y.NUMBER].TEXT?this.renderText():this.renderSlider()}}t.a=E},function(e,t,n){"use strict";var r=n(40),i=n(279),o=n(283),a=n(434),s=n(490),c=n(458),l=n(2597),u=n(2741),d=n(2742),p=n(2712),h=n(1272),m=n(177);const f=Object.freeze({NO_FOLLOW:"no_follow",SPONSORED:"sponsored",UGC:"user_generated_content"});var g=n(1028),b=n(45);const O=e=>"ContentComponents.cmv2.fields.link."+e,y={url:{type:m.a.EXTERNAL,href:""},open_in_new_tab:!1,no_follow:!1};class j extends r.Component{constructor(e){super(e);this.onUrlDataChange=this.onUrlDataChange.bind(this);this.onPropertyChange=this.onPropertyChange.bind(this)}get fieldKey(){const{fieldKey:e}=this.props;return e&&e.join(".")}onUrlDataChange(e){const{onFieldChange:t,value:n=Object.assign({},y)}=this.props;t(Object.assign({},n,{url:e}))}onPropertyChange(e,t){const{onFieldChange:n,value:r=Object.assign({},y)}=this.props;n(Object.assign({},r,{[e]:t.target.checked}))}renderToggle(e){const{partial:t,readOnly:n,value:r=Object.assign({},y)}=this.props,o=r&&r[e];return Object(b.jsxs)(a.a,{align:"center",justify:"between",children:[Object(b.jsx)(s.a,{children:Object(b.jsx)(i.a,{message:O(`toggles.${e}.label`)})}),Object(b.jsx)(c.a,{"data-toggle":e,"data-checked":o,checked:o,id:e,onChange:t(this.onPropertyChange,e),readOnly:n,size:"extra-small"})]})}renderRelOptions(){const{partial:e,readOnly:t,show_advanced_rel_options:n=!1,value:r=Object.assign({},y)}=this.props;return Object.keys(f).map(o=>{const a=f[o],c=!(!r||!r[a]),l=a===f.SPONSORED||a===f.UGC;return!n&&l?null:Object(b.jsx)(d.a,{checked:c,id:`${this.fieldKey}-${a}`,onChange:e(this.onPropertyChange,a),readOnly:t,size:"small",children:Object(b.jsx)(s.a,{"data-toggle":a,"data-checked":c,className:"p-y-0",htmlFor:`${this.fieldKey}-${a}`,children:Object(b.jsx)(i.a,{message:O(`toggles.${a}.label`)})})},a)})}render(){const{componentsByType:e,error:t=!1,fieldKey:n,pageContext:r={},placeholder:a,readOnly:s,required:c,supported_types:d,useOnDark:f,value:g=Object.assign({},y)}=this.props,j=g&&g.url||y.url,v=g&&g.url&&g.url.type===m.a.CALL_TO_ACTION,C=Object(b.jsx)(o.a,{message:O("toggles.tooltip_jsx"),elements:{Link:p.a},options:{href:"https://knowledge.hubspot.com/website-pages/insert-a-link-in-a-rich-text-module#customize-your-link-s-attributes-optional"}});return Object(b.jsxs)("div",{children:[Object(b.jsx)(u.a,{children:Object(b.jsx)(l.a,{error:t,fieldKey:n,onFieldChange:this.onUrlDataChange,placeholder:a,value:j,supported_types:d,readOnly:s,required:c,componentsByType:e,useOnDark:f,pageContext:r})}),!v&&Object(b.jsx)(u.a,{children:this.renderToggle("open_in_new_tab")}),!v&&Object(b.jsx)(u.a,{className:"m-top-0",label:Object(b.jsx)(i.a,{message:O("toggles.label")}),tooltip:C,children:Object(b.jsx)(h.a,{name:this.fieldKey,children:this.renderRelOptions()})})]})}}t.a=Object(g.a)()(j)},function(e,t,n){"use strict";var r=n(64),i=n(1333),o=n(68),a=n(1049);function s(e){return window.fetch(e).then(t=>{if(!t.ok){const n=new Error(`Request to fetch oembed url: ${e} directly failed`);Object.assign(n,t);return Promise.reject(n)}return t.json()})}function c({oEmbedUrl:e,params:t={},isMediaBridge:n=!1},...r){const i=Object(a.a)(r).get("oembedproxy/v1/app-oembed",{query:Object.assign({},t,{url:e})});return n?i.catch(()=>s(e)):i}function l(...e){return Object(a.a)(e).get("media-bridge/v1/providers/installed")}function u(e=[],...t){return Object(a.a)(t).post("media-bridge/v1/providers/getBatch",{data:e})}function d({mediaType:e,providerId:t,mediaId:n},...r){return Object(a.a)(r).get(`media-bridge/v1/${e}/provider/${t}/id/${n}`)}n.d(t,"b",(function(){return g}));n.d(t,"c",(function(){return b}));n.d(t,"a",(function(){return O}));n.d(t,"d",(function(){return y}));const p=Object(r.b)(o.EMBED_FETCH_ASSET,c,i.g),h=Object(r.b)(o.EMBED_FETCH_MEDIA_BRIDGE_ASSET,d,i.b),m=Object(r.b)(o.EMBED_FETCH_MEDIA_BRIDGE_PROVIDERS,l),f=Object(r.b)(o.EMBED_FETCH_MEDIA_BRIDGE_PROVIDERS,u),g=e=>e&&Array.isArray(e)&&e.length?f(e):m(),b=(e,t,n)=>p({oEmbedUrl:e,params:t,isMediaBridge:n}),O=(e,t,n)=>h({mediaType:e,providerId:t,mediaId:n}),y=(e,t)=>(n,r)=>{const a=Object(i.f)(r(),{oEmbedUrl:e});n({type:o.EMBED_UPDATE_ASSET,oEmbedUrl:e,oEmbedAsset:Object.assign({},a,t)})}},,function(e,t,n){"use strict";var r=n(64),i=n(1049);function o(e,...t){return Object(i.a)(t).get("ctas/v3/placements/"+e,{query:{includeCtaInfo:!0,includeMigrated:!0}})}var a=n(68);n.d(t,"a",(function(){return c}));const s=Object(r.b)(a.CTAS_FETCH_CTA,o),c=e=>s(e)},function(e,t,n){"use strict";var r=n(1049),i=n(35);function o(e,t,...n){e&&"string"==typeof e||(e=i.a);return Object(r.a)(n).get("content-icons/v1/sets/"+e,{query:t})}var a=n(68);n.d(t,"a",(function(){return s}));n.d(t,"e",(function(){return c}));n.d(t,"d",(function(){return l}));n.d(t,"c",(function(){return u}));n.d(t,"b",(function(){return d}));function s(){return{type:a.CLEAR_ICONS}}function c(e){return{type:a.SAVE_ICON,iconData:e}}function l(){return{type:a.FETCH_SELECTED_ICONS}}function u(e,t){const{request:n,receive:r,error:i}=u;return a=>{a(n());return o(e,t).then(e=>{a(r(e))}).catch(e=>{a(i(e))})}}u.request=()=>({type:a.FETCH_ICONS});u.receive=e=>({type:a.FETCH_ICONS,result:e});u.error=e=>({type:a.FETCH_ICONS,error:e});function d(e,t){const{request:n,receive:r,error:i}=d;return a=>{a(n(t));return o(e,t).then(e=>{a(r(e,t))}).catch(e=>{a(i(e,t))})}}d.request=e=>({type:a.FETCH_ICON,query:e});d.receive=(e,t)=>({type:a.FETCH_ICON,query:t,result:e});d.error=(e,t)=>({type:a.FETCH_ICON,query:t,error:e})},function(e,t,n){"use strict";var r=n(2),i=n(41),o=n.n(i),a=n(40),s=n(287),c=n.n(s),l=n(495),u=n(508),d=n(512),p=n(1086),h=n(450),m=n(446),f=n(1118),g=n(2682),b=n(298),O=n(47),y=n(331),j=n(324),v=n(45);function C({color:e,onChange:t,open:n}){const r=Object(a.useRef)(null);Object(a.useEffect)(()=>{n&&r.current.click()},[n]);return Object(v.jsx)("input",{className:"hidden",type:"color",value:e,onChange:t,ref:r})}C.propTypes={color:o.a.string,onChange:o.a.func,open:o.a.bool.isRequired};C.displayName="ColorPickerShim";var x=n(453),E=n(2741);const T=["showOpacityInput","showInput"],S=["disabled"],I=["className","color","colorInputLabel","ColorPicker","colorValidator","disabled","id","inputClassName","inputProps","onColorChange","onOpacityChange","onOpenChange","opacity","opacityInputClassName","opacityInputLabel","opacityInputProps","open","readOnly","showInput","swatchClassName","swatchProps","use"],w="",_="top",N=e=>e===w||null===e||"#"===e,A=e=>"#"===e[0]?e:"#"+e,D=e=>(e||"").replace("#",""),k=(e,t=j.OLAF)=>N(e)?j.OLAF:e.length>4&&e.length<7?e.slice(0,4):e.length<=3?t:e,P=()=>Object(v.jsx)("span",{}),R=c.a.div.withConfig({displayName:"UIColorInput__InputWrapper",componentId:"sc-10ftzyd-0"})(["display:inline-block;"]),F=c()(e=>{const t=Object(r.a)(e,T);return Object(v.jsx)(E.a,Object.assign({},t))}).withConfig({displayName:"UIColorInput__FormControl",componentId:"sc-10ftzyd-1"})(["display:inline-block;vertical-align:",";width:115px;&&{","}"],_,({showOpacityInput:e})=>e&&"display: inline-block;\n      width: 95px;\n      margin-left: 8px;\n      margin-top: 0px !important;\n    "),L=c.a.div.withConfig({displayName:"UIColorInput__SwatchWrapper",componentId:"sc-10ftzyd-2"})(["display:inline-block;margin-left:",";vertical-align:",";"],({showInput:e})=>e?"8px":"0px",_),M=c()(e=>{const t=Object(r.a)(e,S);return Object(v.jsx)(p.a,Object.assign({},t))}).withConfig({displayName:"UIColorInput__ColorSwatch",componentId:"sc-10ftzyd-3"})(["cursor:",";"],({disabled:e})=>e?"not-allowed":"default"),B=c.a.div.withConfig({displayName:"UIColorInput__ColorPickerWrapper",componentId:"sc-10ftzyd-4"})(["box-shadow:none;border:0;"]),U=(e,t,n,r,i,o,a)=>{if(!t&&"native"!==e||e===P)return null;const s=h.b("native"===e?C:e,{open:t,hexOnly:!1,color:n,alpha:r,onChange:i,mode:"RGB",includeAlpha:Boolean(r)});return"native"===e?s:Object(v.jsx)(x.a,{autoPlacement:"horiz",closeOnOutsideClick:!0,content:s,onOpenChange:o,open:t,placement:"right",target:a})};class V extends a.Component{static getDerivedStateFromProps(e,t){const{prevColor:n}=t,{color:r}=e;return r!==n?{prevColor:r,swatchColor:k(r,t.swatchColor)}:null}constructor(e){super(e);this.handleColorChange=e=>{const{onColorChange:t,onOpacityChange:n,opacity:r}=this.props;r&&e.alpha&&n(e.target?e:Object(b.a)(e.alpha));t(e.target?e:Object(b.a)(e.color))};this.handleInputChange=({target:{value:e}})=>{const{colorValidator:t,readOnly:n}=this.props;n||t(e)&&(e?this.handleColorChange(Object(b.a)(A(e))):this.handleColorChange(Object(b.a)(null)))};this.handleOpacityInputChange=e=>{const{onOpacityChange:t,readOnly:n}=this.props;n||t(e)};this.handleOpenChange=()=>{const{onOpenChange:e,open:t}=this.props;e(Object(b.a)(!t))};this.refCallback=e=>{if(e){this._triggerEl=e;this.setState({targetLoaded:!0})}};this.state={swatchColor:k(this.props.color),targetLoaded:!1};this._renderColorPickerPanel=Object(O.a)(U)}render(){const e=this.props,{className:t,color:n,colorInputLabel:i,ColorPicker:o,disabled:a,id:s,inputClassName:c,inputProps:p,opacity:h,opacityInputClassName:m,opacityInputLabel:f,opacityInputProps:g,open:b,readOnly:O,showInput:j,swatchClassName:C,swatchProps:x,use:E}=e,T=Object(r.a)(e,I),{swatchColor:S}=this.state,w=O||a?P:o,_=a?Object(v.jsx)(u.a,Object.assign({className:c,id:s,disabled:!0,use:E,value:"#"+D(n)},p)):Object(v.jsx)(l.a,{text:"#",children:Object(v.jsx)(u.a,Object.assign({className:c,id:s,maxLength:7,onChange:this.handleInputChange,spellCheck:!1,use:E,value:D(n),readOnly:O},p))}),N=void 0!==h&&j,A=N?Object(v.jsx)(F,{"aria-label":f||"opacity input",label:f,showOpacityInput:N,children:Object(v.jsx)(d.a,Object.assign({className:m,disabled:a,value:h,onChange:this.handleOpacityInputChange,min:0,max:100,formatStyle:"percentage",readOnly:O,use:E},g))}):null,k=this._renderColorPickerPanel(w,b,S,h,this.handleColorChange,this.handleOpenChange,this._triggerEl);return Object(v.jsx)(R,Object.assign({},T,{className:t,children:Object(v.jsxs)("div",{ref:this.refCallback,children:[Object(v.jsx)(F,{"aria-label":i||"color input",label:i,showInput:j,className:j?"":"hidden",children:_}),A,Object(v.jsxs)(L,{showInput:j,children:[Object(v.jsx)(M,Object.assign({className:C,borderColor:y.h,borderWidth:1},x,{opacity:h,color:S,onClick:a||O?null:this.handleOpenChange,readOnly:a||O,disabled:a})),Object(v.jsx)(B,{children:k})]})]})}))}}V.propTypes={ColorPicker:o.a.oneOfType([h.a,o.a.oneOf(["native"])]).isRequired,color:f.b,colorValidator:o.a.func.isRequired,disabled:o.a.bool,inputClassName:o.a.string,inputProps:o.a.object,onColorChange:o.a.func,onOpenChange:o.a.func,open:o.a.bool,readOnly:o.a.bool,showInput:o.a.bool,swatchClassName:o.a.string,swatchProps:Object(m.a)(p.a),opacity:o.a.number,onOpacityChange:o.a.func,colorInputLabel:o.a.string,opacityInputClassName:o.a.string,opacityInputLabel:o.a.string,opacityInputProps:o.a.object,use:u.a.propTypes.use};V.defaultProps={color:w,colorValidator:f.a,open:!1,ColorPicker:P,readOnly:!1,showInput:!0,use:u.a.defaultProps.use};V.displayName="UIColorInput";t.a=Object(g.a)(V,["color","open","opacity"])},function(e,t,n){"use strict";var r=n(2),i=n(288),o=n.n(i),a=n(62),s=n(41),c=n.n(s),l=n(40),u=n(287),d=n.n(u),p=n(2743),h=n(497),m=n(499),f=n(357),g=n(302),b=n(307),O=n(2682),y=n(298),j=n(47),v=n(285),C=n(45);const x=["children","className","onOpenChange","open","shrinkOnHide","style"],E=e=>Object(b.b)(e,"TABLE"),T=e=>Object(b.b)(e,"TR"),S=e=>{const t=E(e._el),n=T(e._el);if(n&&t){t.addEventListener("mouseleave",e.handleRowOrTableMouseLeave);n.addEventListener("mouseleave",e.handleRowOrTableMouseLeave);n.addEventListener("mouseenter",e.handleRowMouseEnter);n.addEventListener("focus",e.handleRowFocus,!0);n.addEventListener("blur",e.handleRowBlur,!0);n.addEventListener("mouseup",e.handleRowBlur)}},I=e=>{const t=E(e._el),n=T(e._el);if(n&&t){t.removeEventListener("mouseleave",e.handleRowOrTableMouseLeave);n.removeEventListener("mouseenter",e.handleRowMouseEnter);n.removeEventListener("mouseleave",e.handleRowOrTableMouseLeave);n.removeEventListener("focus",e.handleRowFocus,!0);n.removeEventListener("blur",e.handleRowBlur,!0);n.removeEventListener("mouseup",e.handleRowBlur)}},w=(e,t,n)=>Object.assign({},e,{top:t,left:n}),_=d.a.span.withConfig({displayName:"UITableHoverContent__Span",componentId:"sc-1tr2crb-0"})(["@media only screen and (max-width:","){white-space:nowrap;}opacity:",";position:",";&.private-table-hover-content--abs-pos{left:0 !important;position:absolute !important;top:0 !important;}"],g.G,({open:e})=>!e&&0,({shrinkOnHide:e,open:t})=>e&&!t&&"absolute");class N extends l.PureComponent{constructor(e){super(e);this.checkForOpenDropdown=()=>{if(!this._el)return;const e=!!this._el.querySelector('[data-dropdown-open="true"]');this.state.rowHasOpenDropdown!==e&&this.setState({rowHasOpenDropdown:e})};this.handleRowMouseEnter=()=>{this.setState({rowHasMouse:!0})};this.handleRowOrTableMouseLeave=()=>{this.state.rowHasMouse&&this.setState({rowHasMouse:!1})};this.handleRowFocus=()=>{this.setState(()=>Object(v.a)()?{rowHasFocus:!0}:null)};this.handleRowBlur=()=>{this.setState({rowHasFocus:!1})};this.state={top:null,left:null,rowHasFocus:!1,rowHasMouse:!1,rowHasOpenDropdown:!1};this._getStyle=Object(j.a)(w)}componentDidMount(){requestAnimationFrame(()=>{S(this);this.checkForOpenDropdown();if(this._el){this._observer=new MutationObserver(this.checkForOpenDropdown);this._observer.observe(this._el,{attributes:!0,childList:!0,subtree:!0})}})}componentDidUpdate(e,t){if(this.props.shrinkOnHide&&e.open&&!this.props.open){const{top:e,left:n}=this.computeAbsolutePosition();e===t.top&&n===t.left||this.setState({top:e,left:n})}const{onOpenChange:n}=this.props,{rowHasFocus:r,rowHasMouse:i,rowHasOpenDropdown:o}=this.state;if(r!==t.rowHasFocus||i!==t.rowHasMouse||o!==t.rowHasOpenDropdown){const e=r||i||o;n(Object(y.a)(e))}}componentWillUnmount(){I(this);this._observer&&this._observer.disconnect()}computeAbsolutePosition(){this._el.classList.add("display-block");const{left:e,top:t}=this._el.getBoundingClientRect();this._el.classList.remove("display-block");this._el.classList.add("private-table-hover-content--abs-pos");const{left:n,top:r}=this._el.getBoundingClientRect();this._el.classList.remove("private-table-hover-content--abs-pos");return{left:e-n,top:t-r}}render(){const e=this.props,{children:t,className:n,open:i,shrinkOnHide:a,style:s}=e,c=Object(r.a)(e,x),{top:l,left:u}=this.state,d=o()("table-hover-content",n);return Object(C.jsx)(_,Object.assign({open:i,shrinkOnHide:a,className:d,ref:e=>{this._el=e},style:i||!a?s:this._getStyle(s,l,u)},c,{children:t}))}}N.propTypes={children:c.a.node.isRequired,onOpenChange:c.a.func,open:c.a.bool,shrinkOnHide:c.a.bool.isRequired};N.defaultProps={open:!1,shrinkOnHide:!1};N.displayName="UITableHoverContent";var A=Object(O.a)(N,["open"]);n.d(t,"a",(function(){return R}));const D=["children","hoverContent","hoverContentProps","tooltip","truncateStringProps"],k=parseInt(a.k,10),P=d()(p.a).withConfig({displayName:"UITableHoverCell__StyledMedia",componentId:"sc-1lwxdzt-0"})(["height:100%;"]);class R extends l.Component{constructor(e){super(e);this.handleHoverContentOpenChange=e=>{const t=e.target.value;!t!==this.state.hoverContentIsClosing&&this.setState({hoverContentIsClosing:!t});this.setState({rowIsHovered:t});if(t){clearTimeout(this._hideTimeout);this.setState({hoverContentIsClosed:!1})}else this._hideTimeout=setTimeout(()=>{this.setState({hoverContentIsClosed:!0})},k)};this.handleTooltipOpenChange=e=>{this.setState({tooltipIsOpen:!!e.target.value})};const{hoverContentProps:t}=e,n=!!t&&!!t.open;this.state={rowIsHovered:n,hoverContentIsClosed:!n,hoverContentIsClosing:!1,tooltipIsOpen:!1}}componentWillUnmount(){clearTimeout(this._hideTimeout)}render(){const e=this,{props:{children:t,hoverContent:n,hoverContentProps:i,tooltip:a,truncateStringProps:s},state:{hoverContentIsClosed:c,hoverContentIsClosing:l,rowIsHovered:u,tooltipIsOpen:d}}=e,p=Object(r.a)(e.props,D),g=i&&i.open||u||d;return Object(C.jsx)("td",Object.assign({},p,{children:Object(C.jsxs)(P,{align:"center",children:[Object(C.jsx)(h.a,{children:Object(C.jsx)(f.a,Object.assign({open:d},s,{"data-content-hovered":u,tooltip:a,onOpenChange:this.handleTooltipOpenChange,children:t}))}),n&&Object(C.jsx)(m.a,{className:o()(!g&&[l&&"m-left-0",c&&"sr-only"]),children:Object(C.jsx)(A,Object.assign({open:g,onOpenChange:this.handleHoverContentOpenChange,shrinkOnHide:!0},i,{children:n}))})]})}))}}R.propTypes={children:c.a.node.isRequired,hoverContent:c.a.node,tooltip:c.a.oneOfType([c.a.bool,c.a.node,c.a.string]).isRequired,hoverContentProps:c.a.object,truncateStringProps:c.a.object};R.defaultProps={tooltip:!0};R.displayName="UITableHoverCell"},function(e,t,n){"use strict";var r=n(2),i=n(40),o=n(4),a=n(73),s=n(59),c=n(287),l=n.n(c),u=n(2628),d=n(2634),p=n(66),h=n(1132),m=n(1143),f=n(65);const g=e=>e.resources.pantone&&e.resources.pantone.pantone,b=Object(f.a)([g],e=>e&&e.pantoneColors||[]);Object(f.a)([g],e=>e&&e.error);var O=n(67),y=n(45);const j=["favorites","onChange","useImportedColors","importedColors","limitedOptions"],v=e=>"ContentComponents.cmv2.fields.color."+e,C=l.a.div.withConfig({displayName:"ColorPickerPopover__ColorPickerPopoverContainer",componentId:"sc-3dfqzy-0"})(["width:300px;"]),x=Object.freeze({ADVANCED:"advanced",SIMPLE:"simple"}),E=(e,t)=>({businessUnitId:Object(h.g)(e,t),favorites:Object(h.a)(e),importedColors:b(e),favoritesFetchStatus:Object(h.b)(e)}),T={fetchBrandColors:m.a,fetchBusinessUnit:m.e},S=Object(s.connect)(E,T);class I extends i.Component{constructor(e){super(e);this.handleColorChange=this.handleColorChange.bind(this);this.debouncedColorChange=Object(a.debounce)(e.onChange,200);this.handlePickerModeChange=this.handlePickerModeChange.bind(this);this.state={colorPickerMode:x.SIMPLE}}get shouldFetchFavorites(){const{favorites:e,favoritesFetchStatus:t,useFavorites:n}=this.props;return n&&t!==p.SUCCEEDED&&!e.length}componentDidMount(){const{businessUnitId:e,contentId:t,fetchBrandColors:n,fetchBusinessUnit:r,contentCategoryName:i}=this.props;this.shouldFetchFavorites&&(Object(O.c)(e)&&i&&t?r(i,t):n(e))}componentDidUpdate(e){const{businessUnitId:t,fetchBrandColors:n}=this.props,{businessUnitId:r}=e;this.shouldFetchFavorites&&t!==r&&n(t)}handleColorChange({color:e,alpha:t}){const{onChange:n,useDebounce:r}=this.props,{colorPickerMode:i}=this.state;i===x.ADVANCED&&r?this.debouncedColorChange({color:e,alpha:t}):n({color:e,alpha:t})}handlePickerModeChange({target:{value:e}}){this.setState({colorPickerMode:e})}render(){const e=this.props,{favorites:t,useImportedColors:n,importedColors:i,limitedOptions:a}=e,s=Object(r.a)(e,j),c=i.map(e=>e.hex),l=n?[...t,...c]:t;return Object(y.jsx)(C,{children:Object(y.jsx)(u.a,Object.assign({editFavoritesLink:d.b.accountDefaults("branding/colors"),editFavoritesLabel:o.a.text(v("favoritesLabel")),favorites:l,onChange:this.handleColorChange,onPickerModeChange:this.handlePickerModeChange,showFavoritesLink:!!t.length,showResetToDefault:!1,useFavorites:!!l.length,colorGrid:a&&a.length?a:void 0},s))})}}I.defaultProps={useDebounce:!0,useFavorites:!0,useImportedColors:!1};t.a=S(I)},function(e,t,n){"use strict";var r=n(1248),i=n(1249);n(1235);var o=n(1250);n.d(t,"g",(function(){return a}));n.d(t,"f",(function(){return d}));n.d(t,"i",(function(){return h}));n.d(t,"c",(function(){return m}));n.d(t,"e",(function(){return f}));n.d(t,"b",(function(){return g}));n.d(t,"h",(function(){return y}));n.d(t,"a",(function(){return j}));n.d(t,"d",(function(){return v}));const a=e=>{if(!e)return"";e=e.toLowerCase();const t=Object.keys(i.o).find(t=>-1!==e.indexOf("."+t));return t?i.o[t]:""};const s=/^(?:http(?:s)?:)?\/\/[^\s/$.?#].[^\s]*$/,c=/^((<!--.+-->)|(<!(--)?\[if.+\]>))?\s*<([a-zA-Z1-6]+)[\w\W]+((\/>)|(<\/([a-zA-Z1-6]+)>)|(<!--.+-->)|(<!\[endif\](--)?>))$/,l=/^<(\s|\S)+>$/,u=/^{{(\s)?script_embed\([\w\W]+\)(\s)?}}$/;function d(e){if(s.exec(e))return i.b.URL;let t=c.exec(e);if(t)return i.b.EMBED;t=l.exec(e);return t?i.b.GENERIC_EMBED:null}function p(e){return s.test(e)}function h(e){return c.test(e)||u.test(e)}function m({url:e,embed:t}){return e?p(e):!!t&&h(t)}function f(e){const t=e.allowFullscreen?'allowFullscreen="1"':"";return`<iframe class="hs-responsive-embed-iframe" src="${e.url}" width="${e.width}" height="${e.height}" ${t} data-service="${e.service}"></iframe>`}const g=(e="")=>{const t=e.trim();return s.exec(t)&&{url:t}},b=/[\u2018\u2019]/g,O=/[\u201C\u201D]/g,y=(e="")=>e.replace(b,"'").replace(O,'"').trim(),j=(e,t)=>{let n=e;const r=o.c[t],a=r?` loading="${r}"`:"",s=e.match(i.k),c=s&&s[1];if(c)n=e.replace(c,a);else{const t=e.indexOf("<iframe")+7;n=e.slice(0,t)+a+e.slice(t)}return n},v=e=>{if(Object(r.a)(e)||!e.includes("<iframe"))return;const t=e.match(i.k),n=t&&t[2];return Object.keys(o.c).find(e=>o.c[e]===n)||"default"}},,function(e,t,n){"use strict";var r=n(40),i=n(41),o=n.n(i),a=n(288),s=n.n(a),c=n(73),l=n(485),u=n(456),d=n(615),p=n(659),h=n(1009),m=n(2743),f=n(497),g=n(499),b=n(357),O=n(58),y=n(45);const j=Object(d.DragSource)(p.SORTABLE_LIST_ITEM,{beginDrag:e=>Object(c.pick)(e,"item","index"),canDrag:e=>!e.isReadOnly,endDrag(e,t){if(!t.didDrop()){e.onResetOrder();return}const{index:n}=t.getItem(),{index:r}=t.getDropResult();e.onMoveItem(n,r,!0)}},(e,t)=>({connectDragSource:e.dragSource(),isDragging:t.isDragging()})),v=Object(d.DropTarget)(p.SORTABLE_LIST_ITEM,{drop:e=>Object(c.pick)(e,"item","index"),hover:Object(c.throttle)((e,t)=>{const{item:n,index:r}=t.getItem()||{};if(!n)return;const{id:i}=n;if(i!==e.item.id){e.onMoveItem(r,e.index,!1);t.getItem().index=e.index}},250)},(e,t)=>({connectDropTarget:e.dropTarget(),isOver:t.isOver()}));class C extends r.Component{constructor(e){super(e);this.onRemoveItem=this.onRemoveItem.bind(this)}onRemoveItem(){this.props.onRemoveItem(this.props.item.id)}renderActions(){const{actionsComponent:e,item:t}=this.props;return e?Object(y.jsx)(g.a,{children:Object(y.jsx)(e,{item:t})}):null}renderLabel(){const{labelComponent:e,item:t}=this.props,n=e?Object(y.jsx)(e,{item:t}):Object(y.jsx)(b.a,{tooltip:t.tooltip,children:t.label});return Object(y.jsx)(f.a,{children:n})}render(){const{className:e,connectDragSource:t,connectDropTarget:n,isDragging:r,isReadOnly:i,item:{tooltip:o}}=this.props,a=s()("sortable-list-item m-bottom-1",e,r&&"is--dragging"),c=Object(y.jsx)("div",{children:Object(y.jsx)(h.a,{className:a,closeable:!i,draggable:!i,isDragging:r,onClose:this.onRemoveItem,title:o,children:Object(y.jsxs)(m.a,{children:[this.renderLabel(),this.renderActions()]})})});return i?c:n(t(c))}}C.propTypes={actionsComponent:o.a.func,className:o.a.string,connectDragSource:o.a.func.isRequired,connectDropTarget:o.a.func.isRequired,isDragging:o.a.bool.isRequired,isOver:o.a.bool.isRequired,isReadOnly:o.a.bool,item:o.a.shape({id:o.a.oneOfType([o.a.number,o.a.string]).isRequired,label:o.a.string.isRequired,tooltip:o.a.string}).isRequired,labelComponent:o.a.func,onMoveItem:o.a.func.isRequired,onRemoveItem:o.a.func.isRequired,onResetOrder:o.a.func.isRequired};C.defaultProps={actionsComponent:null,className:null,isReadOnly:!1,labelComponent:null};var x=Object(O.compose)(j,v)(C);class E extends r.Component{constructor(e){super(e);this.onChange=this.onChange.bind(this);this.debouncedOnChange=Object(c.debounce)(e.onChange,1e3);this.onMoveItem=this.onMoveItem.bind(this);this.onRemoveItem=this.onRemoveItem.bind(this);this.onResetOrder=this.onResetOrder.bind(this);this.state={items:e.items}}componentDidUpdate(e){const{items:t}=this.props;Object(c.isEqual)(t,this.state.items)||Object(c.isEqual)(t,e.items)||this.setState({items:t})}onChange(e,t=!0){this.setState({items:e});t&&this.debouncedOnChange(e)}onMoveItem(e,t,n=!1){const{items:r}=this.state,i=r[e];let o=r.slice(0,e).concat(r.slice(e+1));o=o.slice(0,t).concat(i,o.slice(t));this.onChange(o,n)}onRemoveItem(e){const t=this.state.items.filter(t=>t.id!==e);this.onChange(t)}onResetOrder(){this.setState({items:this.props.items})}render(){const{items:e}=this.state,{actionsComponent:t,labelComponent:n,isReadOnly:r,className:i,itemClassName:o}=this.props,a=s()(i,"sortable-list");if(!e.length)return Object(y.jsx)(l.a,{className:a,use:"help",children:this.props.emptyText});const c=e.map((e,i)=>Object(y.jsx)(x,{actionsComponent:t,className:s()(o,e.itemClassName),index:i,isReadOnly:r,item:e,labelComponent:n,onMoveItem:this.onMoveItem,onRemoveItem:this.onRemoveItem,onResetOrder:this.onResetOrder},e.id));return Object(y.jsx)(u.a,{className:a,children:c})}}E.propTypes={actionsComponent:o.a.func,className:o.a.string,emptyText:o.a.node.isRequired,isReadOnly:o.a.bool,itemClassName:o.a.string,items:o.a.arrayOf(o.a.shape({id:o.a.oneOfType([o.a.number,o.a.string]).isRequired,label:o.a.string.isRequired,tooltip:o.a.string})).isRequired,labelComponent:o.a.func,onChange:o.a.func.isRequired};E.defaultProps={actionsComponent:null,className:null,isReadOnly:!1,itemClassName:null,labelComponent:null};t.a=E},function(e,t,n){"use strict";var r=n(68),i=n(64),o=n(1049);function a(e,...t){return Object(o.a)(t).get("content/api/v4/contents/linkable-pages/"+e)}function s(e,...t){return Object(o.a)(t).get("content/api/v4/contents/linkable-pages",{query:Object.assign({},e,{includeBlogs:!1})})}var c=n(1057);n.d(t,"b",(function(){return d}));n.d(t,"c",(function(){return p}));n.d(t,"d",(function(){return h}));n.d(t,"a",(function(){return m}));const l=Object(i.b)(r.PAGES_FETCH_PAGE,a),u=Object(i.b)(r.PAGES_FETCH_PAGES,s);function d(e){return l(e)}function p(e){return u(e)}function h(e){return(t,n)=>{const i=Object(c.c)(n(),{id:e});t({type:r.PAGES_SAVE_PAGE_CACHE,page:i})}}function m(){return{type:r.PAGES_CLEAR_CACHE}}},function(e,t,n){"use strict";var r=n(65),i=n(64);function o(e){const t=[];if(!e)return t;e.forEach(e=>{t.push(e);e.children&&t.push(...o(e.children))});return t}var a=n(1057),s=n(66);n.d(t,"d",(function(){return d}));n.d(t,"e",(function(){return p}));n.d(t,"h",(function(){return m}));n.d(t,"f",(function(){return g}));n.d(t,"b",(function(){return b}));n.d(t,"g",(function(){return O}));n.d(t,"a",(function(){return j}));n.d(t,"i",(function(){return v}));n.d(t,"c",(function(){return C}));const c="DRAFT",l=e=>e.resources.menus.menus,u=e=>e.resources.menus.menusByName,d=(e,t)=>{const n=l(e),r=u(e),{id:i}=t;return n[i]||r[i]},p=(e,t)=>e.resources.menus.menusCache.menus[t.id],h=e=>e.resources.menus.menusCache.menus,m=e=>e.resources.menus.menusCacheRequestStatus,f=e=>e.resources.menus.menusCache.order,g=(e,t)=>e.resources.menus.requestStatus[t.id],b=Object(i.c)(l),O=Object(r.a)([h,f],(e,t)=>t.map(t=>{const n=e[t];return{value:n.id,text:n.name}})),y=(e,t)=>{const{id:n}=t;return n},j=Object(r.a)([l,u,y,a.g],(e,t,n,r)=>{const i=e[n]||t[n];if(i&&i.pagesTree){const e=o(i.pagesTree.children);e.forEach(e=>{e.page_id&&r[e.page_id]&&(e.state=r[e.page_id].state)});return e}return[]}),v=Object(r.a)([a.h],e=>e===s.SUCCEEDED),C=Object(r.a)([j],e=>e?e.filter(e=>e.state===c):[])},function(e,t,n){"use strict";var r=n(64),i=n(1049);function o(e,...t){return Object(i.a)(t).get("designmanager/v1/menus/"+e)}function a(e,...t){return Object(i.a)(t).get("designmanager/v1/menus/by-name/"+e)}function s(e,...t){return Object(i.a)(t).get("designmanager/v1/menus",{query:e})}function c(e,...t){return Object(i.a)(t).post("designmanager/v1/menus?casing=snake_r",{data:{name:e}})}var l=n(2801),u=n(68);n.d(t,"b",(function(){return f}));n.d(t,"c",(function(){return g}));n.d(t,"d",(function(){return b}));n.d(t,"e",(function(){return O}));n.d(t,"a",(function(){return y}));const d=Object(r.b)(u.MENUS_FETCH_MENU,o),p=Object(r.b)(u.MENUS_FETCH_MENU,a),h=Object(r.b)(u.MENUS_FETCH_MENUS,s),m=Object(r.a)(u.MENUS_CREATE_MENU,c);function f(e){return m(e)}const g=e=>e&&"string"==typeof e?p(e):d(e),b=e=>h(e),O=e=>(t,n)=>{const r=Object(l.e)(n(),{id:e});t({type:u.MENUS_SAVE_MENU_CACHE,menu:r})},y=()=>({type:u.MENUS_CLEAR_CACHE})},function(e,t,n){"use strict";var r=n(64),i=n(1049);function o(e,...t){return Object(i.a)(t).get("blogs/v3/tags/"+e)}function a(e,...t){return Object(i.a)(t).get("blogs/v3/tags",{query:{slug__eq:e}})}function s(e,...t){return Object(i.a)(t).get("blogs/v3/tags",{query:{name__eq:e}})}function c(e,...t){return Object(i.a)(t).get("blogs/v3/tags/search",{query:e})}var l=n(1061),u=n(68),d=n(174);n.d(t,"b",(function(){return g}));n.d(t,"c",(function(){return b}));n.d(t,"d",(function(){return O}));n.d(t,"a",(function(){return y}));const p=Object(r.b)(u.TAGS_FETCH_TAG,o),h=Object(r.b)(u.TAGS_FETCH_TAG_BY_SLUG,a),m=Object(r.b)(u.TAGS_FETCH_TAG_BY_NAME,s),f=Object(r.b)(u.TAGS_FETCH_TAGS,c);function g(e,t){return t===d.ID?p(e):t===d.NAME?m(e):e&&t===d.ALL?p(e.id):h(e)}function b(e){return f(e)}function O(e,t){return(n,r)=>{const i=Object(l.b)(r(),{value:e,tagValue:t});n({type:u.TAGS_SAVE_TAG_CACHE,tag:i})}}function y(){return{type:u.TAGS_CLEAR_CACHE}}},function(e,t,n){"use strict";var r=n(65),i=n(66);function o(e,t){return e?null!=e[t]||void 0!==e[t]?e[t]:"function"==typeof e.get?e.get(t):null:null}n.d(t,"c",(function(){return a}));n.d(t,"b",(function(){return s}));n.d(t,"a",(function(){return c}));n.d(t,"d",(function(){return l}));const a=e=>o(e,"resources").users.users,s=Object(r.a)([a],e=>Object.values(e).map(e=>Object.assign({value:e.email,text:e.email,canNotify:e.canNotify},!e.canNotify&&{tagUse:"error"}),[])),c=e=>o(e,"resources").users.userFetchStatus===i.PENDING,l=e=>o(e,"resources").users.usersForTeams.data},function(e,t,n){"use strict";var r=n(64),i=n(1049),o=n(1051);const a=(e,...t)=>Object(i.a)(t).get("meetings/v1/link/slug/"+e),s=(e={},...t)=>Object(i.a)(t).get("meetings/v2/link/portal",{query:Object.assign({},o.c.meetings.query,e)});var c=n(1075),l=n(159),u=n(68);n.d(t,"b",(function(){return f}));n.d(t,"c",(function(){return g}));n.d(t,"a",(function(){return b}));n.d(t,"d",(function(){return O}));const d=e=>{const t=e.length-1;return"/"===e.charAt(t)?e.substring(0,t):e},p=e=>{if(e.indexOf("/meetings/")>-1)return d(e).split("/meetings/")[1];const t=Object.values(l);for(let n=0;n<t.length;n++){const r=t[n],i=r===l.na1?"":"-"+r,o=`meetings${i}.hubspotqa.com`;if(e.indexOf(o)>-1)return d(e).split(o+"/")[1];const a=`meetings${i}.hubspot.com`;if(e.indexOf(a)>-1)return d(e).split(a+"/")[1]}return d(e).slice(1)},h=Object(r.b)(u.MEETINGS_FETCH_MEETING,a),m=Object(r.b)(u.MEETINGS_FETCH_MEETINGS,s),f=e=>h(encodeURIComponent(p(e))),g=(e={})=>m(e);function b(){return{type:u.MEETINGS_CLEAR_MEETINGS}}const O=e=>(t,n)=>{const r=Object(c.c)(n(),{link:e});t({type:u.MEETINGS_SAVE_MEETING_CACHE,meeting:r})}},function(e,t,n){"use strict";var r=n(64),i=n(1),o=n.n(i),a=n(1049);const s=(e,...t)=>Object(a.a)(t).get(`sfdc/v1/campaigns/${o.a.get({preserveGlobalId:!0})}/${e}`),c=(...e)=>Object(a.a)(e).get("sfdc/v1/campaigns/"+o.a.get({preserveGlobalId:!0})),l=(...e)=>Object(a.a)(e).get("sfdc/v1/connection-status");var u=n(68);n.d(t,"a",(function(){return m}));n.d(t,"b",(function(){return f}));n.d(t,"c",(function(){return g}));const d=Object(r.b)(u.SALESFORCE_FETCH_CAMPAIGN,s),p=Object(r.b)(u.SALESFORCE_FETCH_CAMPAIGNS,c),h=Object(r.b)(u.SALESFORCE_FETCH_INTEGRATION_STATUS,l),m=e=>d(e),f=(...e)=>p(e),g=(...e)=>h(e)},function(e,t,n){"use strict";var r=n(1078),i=n(64),o=n(68),a=n(30),s=n.n(a),c=n(1049);function l({surveyType:e,id:t},...n){return Object(c.a)(n).get(`feedback/v1/${e.toLowerCase()}/${t}`)}function u(e={pageSize:15,pageNumber:1},...t){return Object(c.a)(t).get("feedback/v1/survey/page",{query:e})}function d({surveyType:e,surveyId:t},...n){return Object(c.a)(n).put(`feedback/v1/${e.toLowerCase()}/enable/${t}`)}function p({surveyType:e,surveyId:t},...n){return Object(c.a)(n).put(`feedback/v1/${e.toLowerCase()}/disable/${t}`)}var h=n(66);n.d(t,"b",(function(){return O}));n.d(t,"c",(function(){return y}));n.d(t,"d",(function(){return j}));n.d(t,"a",(function(){return v}));n.d(t,"e",(function(){return C}));const m=(e,t)=>Object(r.c)(e,t)===h.SUCCEEDED,f=Object(i.b)(o.SURVEYS_FETCH_SURVEY,l,m),g=Object(i.a)(o.SURVEYS_UPDATE_SURVEY_STATE,d),b=Object(i.a)(o.SURVEYS_UPDATE_SURVEY_STATE,p);function O(e,t){return f({surveyType:e,id:t})}function y(e){const{request:t,receive:n,error:r}=O;return(i,o,{httpClient:a=s.a}={})=>{i(t());return u(e,a).then(t=>{const r={limit:e.pageSize,objects:t.results,total:t.totalCount,offset:(e.pageNumber-1)*e.pageSize};i(n(r));return r}).catch(e=>{i(r(e));return e})}}O.request=()=>({type:o.SURVEYS_FETCH});O.receive=e=>({type:o.SURVEYS_FETCH,response:e});O.error=e=>({type:o.SURVEYS_FETCH,error:e});function j(e,t){return(n,i)=>{const a=Object(r.b)(i(),{surveyType:e,id:t});n({type:o.SURVEYS_SAVE_SURVEY_CACHE,survey:a})}}function v(){return{type:o.SURVEYS_CLEAR_CACHE}}function C(e,t,n){const r={surveyType:t,surveyId:n};return e?g(r):b(r)}C.request=()=>({type:o.SURVEYS_UPDATE_SURVEY_STATE});C.receive=e=>({type:o.SURVEYS_UPDATE_SURVEY_STATE,response:e});C.error=e=>({type:o.SURVEYS_UPDATE_SURVEY_STATE,error:e})},function(e,t,n){"use strict";var r=n(64),i=n(1049);function o(e,...t){return Object(i.a)(t).get("sales-checkout/v2/session-templates/"+e)}function a(e,...t){return Object(i.a)(t).get("sales-checkout/v2/session-templates",{query:e})}function s(...e){return Object(i.a)(e).get("payments/v1/payment-accounts/eligibility")}var c=n(68);n.d(t,"a",(function(){return p}));n.d(t,"c",(function(){return h}));n.d(t,"b",(function(){return m}));const l=Object(r.b)(c.PAYMENTS_FETCH_PAYMENT,o),u=Object(r.b)(c.PAYMENTS_FETCH_PAYMENTS,a),d=Object(r.b)(c.PAYMENTS_FETCH_PAYMENT_ELIGIBILITY,s);function p(e){return l(e)}function h(e){return u(e)}function m(){return d()}},,function(e,t,n){"use strict";var r=n(1003),i=n(1004);var o=new RegExp(`^(?:.+)@${i.a.domain}$`);t.a=Object(r.a)({name:"EmailAddress",validator:e=>o.test(e)})},,function(e,t,n){"use strict";var r=n(4);const i="us",o={de:"de",en:"us",es:"es",fi:"fi",fr:"fr",it:"it",ja:"jp",nl:"nl",sv:"se",pl:"pl"};var a=()=>{const[e,t]=r.a.locale.split("-");return t||(o[e]?o[e]:i)},s=n(1113);const c={dialCode:"",priority:10001,iso2:null};t.a=e=>{const t=s.a,n=s.b,r=s.c;let i;const o=t[r[a()]]||t[r.us],l=e.substr(0,4);if(""!==e.trim()){let r=c;t.every(t=>{if(4===r.dialCode.length)return!1;if(n[l]&&n[l][0]===t.iso2){r=t;return!0}if(n[l]&&n[l][0]===r.iso2)return!0;if(0===e.indexOf(t.dialCode)&&(t.dialCode.length>r.dialCode.length||t.dialCode.length===r.dialCode.length&&t.priority<r.priority)){r=t;return!0}return!0});i=r}return i&&i.iso2?i:o}},function(e,t,n){"use strict";var r=n(4),i=n(1113),o=e=>{const t=i.a,n=e=>r.a.text("SharedI18nStrings.countryCodes."+e.toUpperCase());if(r.a.text("SharedI18nStrings.countryCodes")[e.toUpperCase()])return n(e);const o=t.find(t=>t.iso2===e.toLowerCase());return o?o.name:r.a.text("i18nAddon.countryInfo.invalidCountryOption")},a=n(1114),s=n(1115),c=n(45);n.d(t,"a",(function(){return p}));n.d(t,"b",(function(){return h}));let l=[];const u=()=>r.a.text("SharedI18nStrings.countryCodes"),d=e=>{const t=e.toLowerCase();return{text:o(t),value:t,avatar:Object(c.jsx)(s.a,{countryCode:t})}},p=({optionsFilter:e}={})=>{if(!e&&l.length)return l;if(e&&l.length)return l.filter(e);l=Object.keys(u()).map(e=>d(e)).sort(a.a);return e?l.filter(e):l},h=({validCountries:e,optionsFilter:t})=>{let n=[];const r=u();e.forEach(e=>{r[e.toUpperCase()]&&n.push(d(e))});t&&(n=n.filter(t));return n.sort(a.a)}},function(e,t,n){"use strict";var r=n(2),i=n(41),o=n.n(i),a=n(2655),s=n(4),c=n(1114);let l=[];const u=()=>s.a.text("SharedI18nStrings.languageNames"),d=({optionsFilter:e})=>{if(!e&&l.length)return l;if(e&&l.length)return l.filter(e);const t=u();l=Object.keys(t).map(e=>({text:s.a.text("SharedI18nStrings.languageNames."+e),value:e})).sort(c.a);return e?l.filter(e):l},p=({validLanguages:e,optionsFilter:t})=>{let n=[];const r=u();e.forEach(e=>{r[e]&&n.push({text:s.a.text("SharedI18nStrings.languageNames."+e),value:e})});t&&(n=n.filter(t));return n.sort(c.a)};var h=n(45);const m=["validLanguages","optionsFilter","multi","enableSelectAll"],f=e=>{const{validLanguages:t,optionsFilter:n,multi:i,enableSelectAll:o}=e,c=Object(r.a)(e,m),l=t?p({validLanguages:t,optionsFilter:n}):d({optionsFilter:n}),u=[{text:s.a.text("i18nAddon.selectAllOptions"),selectAll:!0,options:l}];return Object(h.jsx)(a.a,Object.assign({},c,{multi:o||i,anchorType:"button",options:o?u:l}))};f.propTypes={optionsFilter:o.a.func,validLanguages:o.a.array,enableSelectAll:o.a.bool};t.a=f},function(e,t,n){"use strict";var r=n(2),i=n(181),o=n(30),a=n.n(o);n(2825),n(1192),n(1);var s=n(1193),c=n(754);n.d(t,"a",(function(){return f}));const l=["folderId","folderPath","fileName"],u="filemanager/api/v3/files",d=e=>{e.category=s.e.FILE;return Object(i.fromJS)(e)},p=e=>Object(i.Map)(Object.assign({},e,{objects:Object(i.List)(e.objects.map(d))}));const h=e=>e.replace(/\./gm,"-"),m={timeout:0,headers:{"content-type":!1}},f=(e,t,n={},{updateProgress:i,xhrCallback:o,httpClient:s=a.a}={})=>{if(!e)throw new Error("`file` arg is required and must be a local File");if(!Object.keys(c.a).includes(t))throw new Error("[FileManagerCore/uploadFile(V3)] Missing or invalid uploadedFileAccess param. Visit https://product.hubteam.com/docs/file-manager-manual/Frontend/index.html for details.");const{folderId:d,folderPath:f,fileName:g}=n,b=Object(r.a)(n,l);b.access=t;let O;g?O=g:e instanceof File&&e.name&&(O=e.name);const y=new FormData;if(O&&!g){const t=O.normalize("NFKC");y.append("file",e,t)}else y.append("file",e);d&&y.append("folderId",d.toString());f&&y.append("folderPath",f);g&&y.append("fileName",n.preserveExtension?g:h(g));y.append("options",JSON.stringify(b));return s.post(u+"/upload",Object.assign({},m,{data:y,withXhr:e=>{e.upload.addEventListener("progress",i,!1);o&&o(e)}})).then(p)}},function(e,t,n){"use strict";var r=n(1234),i=n(2617),o=n(1235);const a=(e,t)=>n=>{const r=Object(o.a)(n);Array.from(r.getElementsByTagName("EM")).forEach(n=>{n.textContent&&n.textContent.startsWith(e)&&n.parentNode&&n.parentNode.replaceChild(t(n),n)});return r.outerHTML},s=e=>{const t=document.createElement("IMG");if(e.dataset.imgAttributes){const n=JSON.parse(e.dataset.imgAttributes);t.setAttribute("src",n.src);t.setAttribute("width",n.width);t.setAttribute("height",n.height)}return t},c=e=>JSON.stringify({src:e.src,width:e.width,height:e.height}),l=(e,t)=>{t.innerHTML=r.b;t.dataset.imgAttributes=c(e)},u=(e,t)=>{t.innerHTML=r.a},d=(e,t)=>n=>{Array.from(n.getElementsByTagName(e)).forEach(e=>{const n=document.createElement("EM");t(e,n);e.parentNode&&e.parentNode.replaceChild(n,e)})},p=e=>{Array.from(e.getElementsByTagName("span")).forEach(e=>{const t=e.style.background;if(t){e.style.removeProperty("background");e.style.backgroundColor=t}})},h=e=>{Array.from(e.getElementsByTagName("span")).forEach(e=>{e.hasAttribute("style")&&e.getAttribute("style").includes("mso-comment-continuation")&&e.removeAttribute("style")})},m=e=>{const t=[],n=[];switch(e){case i.a.CONVERT_GOOGLE_TO_HTML:t.push(d("img",l),d("hr",u));n.push(a(r.b,s),a(r.a,()=>document.createElement("HR")));break;case i.a.CONVERT_MSWORD_TO_HTML:t.push(p);t.push(h)}return{transformers:t,converters:n}},f=(e,t)=>{const n=Object(o.a)(e);t.forEach(e=>{e(n)});return n.innerHTML};var g=n(2797),b=n(1215),O=n(1241),y=n(1251);n.d(t,"c",(function(){return j}));n.d(t,"b",(function(){return C}));n.d(t,"a",(function(){return x}));const j=e=>{const{pasteSource:t,type:n,pasteContent:r,converter:i}=e;let o=!1,a=r;const s=[];if("html"===n){const{transformers:e,converters:n}=m(t);if(e.length){a=f(r,e);o=!0}if(n.length){s.push(...n);o=!0}}return{didTransform:o,transformedContent:a,composedTransformConverter:Object(b.a)(...s,i)}},v=/<img/,C=(e,t)=>{const n=e.clipboardData,o=Object(i.b)(t);let a="unknown",s=void 0,c=void 0;if(n&&n.getData){if(t.allowEmbedUrlPasting){const e=Object(g.b)(n.getData("text/plain"));if(e)return{type:"plaintext",embedData:e}}if(n.getData("text/html")){a="html";s=n.getData("text/html");c=v.test(s)}else if(n.getData("text/plain")){a="plaintext";s=n.getData("text/plain")}else n.types.includes("Files")&&(a="file");n.getData("x-tinymce/html")&&(s=`${r.c}${s}`)}const{converter:l,converterName:u}=o(s);return{type:a,converter:l,pasteSource:u,pasteContent:s,hasImages:c}},x=e=>{let t={};const n=Object(O.f)(e,y.a);if(n){const{[y.b.EMBED_URL_PASTING]:e,[y.b.CLEAR_ALL_STYLES]:r,[y.b.DEFAULT_ATTRIBUTES_MAP]:i,[y.b.DEFAULT_STYLES_MAP]:o,[y.b.FORMAT_TRANSFORM_MAP]:a,[y.b.IMAGES_UPLOAD_FILE_ACCESS]:s}=n;t={allowEmbedUrlPasting:e,clearAllStyles:r,defaultStylesMap:o,defaultAttributesMap:i,formatTransformMap:a,uploadedFileAccess:s}}return t}},function(e,t,n){"use strict";var r=n(1212),i=n.n(r),o=n(324),a=n(330),s=n(1278),c=n(1215),l=n(1277),u=n(1275),d=n(1232),p=n(1245),h=n(1283),m=n(1233),f=n(1239),g=n(1237),b=n(1241),O=n(1284);const y=()=>a.n;n.d(t,"k",(function(){return S}));n.d(t,"f",(function(){return I}));n.d(t,"d",(function(){return _}));n.d(t,"b",(function(){return A}));n.d(t,"i",(function(){return P}));n.d(t,"h",(function(){return R}));n.d(t,"l",(function(){return F}));n.d(t,"e",(function(){return L}));n.d(t,"c",(function(){return M}));n.d(t,"g",(function(){return V}));n.d(t,"j",(function(){return H}));n.d(t,"a",(function(){return $}));const j=Object(p.a)("TinymcePlugins.hspersonalize.propertyOnlyTokens"),v=new i.a.html.Styles,C=({color:e,backgroundColor:t})=>({color:e+" !important",display:"inline-block",padding:"4px 7px","background-color":t,"border-radius":"2px","box-shadow":"0 0 1px 0 rgba(0, 0, 0, 0.3)","vertical-align":"middle","user-select":"text","line-height":1}),x=e=>{let t="",n="";switch(e){case"sorbet":t=o.SORBET;n=o.SORBET_LIGHT;break;case"calypso":t=o.CALYPSO;n=o.CALYPSO_LIGHT;break;case"default":t=o.OBSIDIAN;n=o.KOALA;break;case"success":case"oz":t=o.OZ;n=o.OZ_LIGHT;break;case"warning":t=o.MARIGOLD;n=o.MARIGOLD_LIGHT;break;case"thunderdome":default:t=o.THUNDERDOME;n=o.THUNDERDOME_LIGHT}return{color:t,backgroundColor:n}},E=Object(c.a)(x,s.f),T=(e="")=>{switch(e.toLowerCase()){case l.m.CONTACT:return"contacts";case l.m.COMPANY:return"companies";case l.m.DEAL:return"deals";case l.m.QUOTE:case l.m.LINE_ITEM:return"salesQuote";case l.m.TICKET:return"ticket";case l.m.INVOICE:return"invoice";case l.m.CART:return"cart";default:return"hubDB"}},S=e=>{const t=e.split(".");return t.length?1===t.length?{property:t[0]}:{category:t[0],property:t[1],subProperty:t[2]}:null},I=e=>{const t=Object(h.a)(e);return t?S(t):null},w=(e=!0)=>{const t=document.createElement("span");if(e){t.setAttribute("contenteditable",!0);t.style.pointerEvents="none"}else t.dataset.hsMceToken=!0;return t},_=(e,t)=>{const{category:n,property:r,subProperty:i}=e;let o,a;if(Object(s.e)(n,r)){o=r;a=j(o)}else if(n){o=`${n}.${r}`;a=(Object(u.h)(t)||{})[o]||"";if(a&&"hubspot_owner_id"===r){const e=l.u.find(({value:e})=>e===i);a=e?`${a} > ${e.text}`:a}}else a=r;return a},N=e=>{const t=e.querySelector("[contenteditable=true]"),n=t&&t.firstElementChild?t.firstElementChild.cloneNode(!0):null;if(!n)return n;n.dataset.hsTokenStyleRoot="true";const r=Object(m.f)(n);r&&r.parentElement&&r.parentElement.removeChild(r);return n},A=(e,t)=>{const n=N(e);n&&Object(m.g)(n,t);return n||t},D=e=>{const t=E(e),n=document.createElement("span"),r=v.serialize(C(t));n.setAttribute("contenteditable",!1);n.setAttribute("style",r);n.className="mce-token mceNonEditable";n.dataset.mcePlaceholder=!0;return n},k=(e,t,n)=>{const{category:r,property:i,subProperty:o,defaultValue:a}=e,c=Object(s.f)(r),l=Object(s.e)(r,i);n.setAttribute("data-mce-hubspot-object","true");n.setAttribute("data-mce-property-category",l?"property-only":r);n.setAttribute("data-mce-property-name",i);o&&n.setAttribute("data-mce-subproperty",o);t&&n.setAttribute("data-mce-property-label",t);null!=a&&n.setAttribute("data-mce-property-default-value",a);n.classList.add(c)},P=(e,t)=>e.dom.is(t,"span[data-mce-hubspot-object=true][data-mce-placeholder=true][data-mce-property-category!=post], img[data-mce-hubspot-object=true][data-mce-placeholder=true][data-mce-property-category!=post]"),R=(e,t)=>{const n=e.dom.is(t,"span[data-mce-hubspot-object=true][data-mce-placeholder=true][data-mce-property-category=post], img[data-mce-hubspot-object=true][data-mce-placeholder=true][data-mce-property-category=post]"),r=e.dom.getParent(t,"a",e.getBody()),i=r&&r.hasAttribute("data-mce-rss-link");return n||i};function F(e,t){if(P(e,t))return!0;const n=[...t.childNodes];return 1===n.length&&F(e,n[0])}const L=e=>{const t=e.dataset.mcePropertyDefaultValue,n=t&&i.a.html.Entities.decode(t);return{category:e.dataset.mcePropertyCategory,property:e.dataset.mcePropertyName,fallback:t&&""!==n?Object(O.e)(n):n,subCategory:e.dataset.mceSubproperty}},M=(e,t)=>{const n=t.dataset.mcePropertyDefaultValue,r=n&&i.a.html.Entities.decode(n),o=(Object(u.f)(e)||{})[t.dataset.mceTokenPath||""]||{};return{category:o.category,field:o.field,fallback:r,hasDataSensitivity:o.hasDataSensitivity}},B=4,U=e=>Math.floor(e/B)*B,V=()=>{const e=y().match(/^var\((--[^,^)]*)(?:,(.*))?\)$/);if(!Array.isArray(e))return y();const t=e[1],n=e[2];return getComputedStyle(document.documentElement).getPropertyValue(t).trim()||n.trim()},H=(e,t,n,r)=>{const i=26*B,s=7*B,c=16*B,l=8*B,u=16*B,d=`${u}px ${V()}`,p=`${u}px ${a.g}`,h=document.createElement("canvas"),m=h.getContext("2d"),f={color:o.PANTERA,backgroundColor:o.OLAF},g=T(t);try{m.font=d}catch(e){console.error("Could not set font on context",e)}const b=m.measureText(e).width;try{m.font=p}catch(e){console.error("Could not set font on context",e)}const O=m.measureText(g).width+b+c+l;h.setAttribute("width",U(O)+"px");h.setAttribute("height",U(i)+"px");m.fillStyle=f.color;m.textAlign="left";try{m.font=p}catch(e){console.error("Could not set font on context",e)}let y=c/2,j=i-s;m.fillText(g,U(y),U(j));try{m.font=d}catch(e){console.error("Could not set font on context",e)}y=O-b-c/2;j=i-s;m.fillText(e,U(y),U(j));const v=document.createElement("img");v.setAttribute("data-mce-placeholder",!0);v.setAttribute("data-mce-resize",!1);v.classList.add("mce-token");v.setAttribute("style",`width: ${Math.floor(parseInt(h.getAttribute("width"),10)/B+2)}px !important; height: ${Math.floor(parseInt(h.getAttribute("height"),10)/B+2)}px !important; background: ${r?o.CANDY_APPLE_LIGHT:f.backgroundColor}; border: 1px solid ${r?o.CANDY_APPLE_DARK:o.FLINT}; border-radius: 2px; vertical-align: middle; box-sizing: border-box;`);v.setAttribute("src",h.toDataURL());n(v);return v},q=(e,t)=>{if(!e||"object"!=typeof e)return t;let n=t;Object.keys(e).forEach(r=>{e[r]===t&&(n=r)});return n},G=(e,t,n)=>{const r=t.find(e=>n===e.toLowerCase()&&n!==e);r&&Object(f.b)(e,"tinymcePersonalize",g.fb,{category:n,fqn:r});return!!r},W=(e,t,n,r,i,o)=>{let a=r;i.forEach(({TOKEN_PATTERN:r,USES_DEFAULT:i,PROPERTY_ONLY:s})=>{a=s?a.replace(r,(e,t)=>{const r=q(n,t);return o({property:r})}):i?a.replace(r,(r,i,a,s,c,l)=>{const u=q(n,i);return G(e,t,u)?r:o(Object.assign({property:a,category:u,subProperty:s,defaultValue:c},"string"==typeof l&&{filter:l}))}):a.replace(r,(r,i,a,s,c)=>{const l=q(n,i);return G(e,t,l)?r:o(Object.assign({property:a,category:l,subProperty:s},"string"==typeof c&&{filter:c}))})});return a},z=i.a.html.Entities.getEncodeFunc("named"),$=(e,t,n,r,i,o)=>{const a=o=>{const a=W(e,t,n,z(o.textContent),r,i),s=Object(d.f)(`<div>${a}</div>`);return s.body&&s.body.firstChild?s.body.firstChild.childNodes:o},s=i=>{const o=t=>{const n=Object(b.c)(e),r=_(t,n),o=document.createTextNode(r),a=i.cloneNode(!0);a.removeAttribute("data-hs-token-style-root");const s=D(t.category),c=w();k(t,r,s);Object(m.j)(a,o);c.appendChild(a);s.appendChild(c);return s.outerHTML},a=W(e,t,n,i.textContent||"",r,o);return Object(d.f)(a).body.childNodes};Object(d.b)(e,e=>{const t=e.querySelectorAll("[data-hs-token-style-root=true]");Object(d.g)(t,s)});Object(d.b)(e,e=>{const t=e.createNodeIterator(e.body,NodeFilter.SHOW_TEXT,e=>{r.forEach(({TOKEN_PATTERN:e})=>{e.lastIndex=0});const t=e.textContent;return r.some(({TOKEN_PATTERN:e})=>e.test(t||""))?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}),n=[];let i=t.nextNode();for(;i;){n.push(i);i=t.nextNode()}Object(d.g)(n,a)});Object(d.a)(e,e=>{const t=e.querySelectorAll("[data-mce-property-name]:not([data-mce-rss-link])");Object(d.g)(t,o)})}},function(e,t,n){"use strict";var r=n(2748),i=n(553);function o(e){if("number"==typeof e&&e>=0)return e;throw new Error(`expected \`interval\` to be a positive number but got \`${e}\``)}function a(e,t){o(e);Object(i.a)(t);let n,r,a=null;function s(){clearTimeout(a);a=null}function c(){s();r=t(...n)}function l(...t){n=t;s();a=setTimeout(c,e);return r}l.cancel=s;return l}t.a=Object(r.a)(a)},function(e,t,n){"use strict";var r=n(181),i=n(1348),o=n(1346),a=n(1347);const s=Object(r.Record)({description:null,disabled:!1,displayOrder:-1,doubleData:null,hidden:!1,hubspotDefined:!1,icon:null,label:"",readOnly:!1,value:"",originalValue:""},"PropertyOptionRecord");s.fromJS=e=>e&&"object"==typeof e?s(Object.assign({},e,{originalValue:e.value})):e;var c=s;const l=Object(r.Record)({accessLevel:void 0,calculated:!1,canArchive:void 0,createdAt:null,createdUserId:null,currencyPropertyName:null,dataSensitivity:"none",dateDisplayHint:void 0,defaultValue:void 0,deleted:!1,description:"",displayMode:"current_value",displayOrder:0,expression:null,externalOptions:!1,externalOptionsReferenceType:null,favorited:!1,favoritedOrder:0,fieldType:o.f,filterName:"",formField:!0,fromUserId:null,groupName:null,hasUniqueValue:!1,hidden:!1,hubspotDefined:!1,isBidenProperty:!1,isCustomizedDefault:!1,isMultiValued:!1,label:"",mutableDefinitionNotDeletable:!0,name:"",numberDisplayHint:i.b,objectType:void 0,objectTypeId:void 0,options:Object(r.List)(),optionsAreMutable:null,optionSortStrategy:null,placeholder:"",prospectType:null,readOnlyDefinition:!1,readOnlyValue:!1,referencedObjectType:null,searchableInGlobalSearch:!1,sensitiveDataCategories:void 0,showCurrencySymbol:!1,sortable:!0,textDisplayHint:void 0,type:a.f,updatedAt:null,updatedUserId:null},"PropertyRecord");l.fromJS=e=>{if(!e||"object"!=typeof e)return e;const t=l(e),n=Object(r.Seq)(t.options||Object(r.List)()).map(c.fromJS).toList();return t.set("options",n)};t.a=l},function(e,t,n){"use strict";var r=n(1),i=n.n(r),o=n(1193);n(754);n.d(t,"a",(function(){return l}));n.d(t,"c",(function(){return d}));n.d(t,"b",(function(){return p}));const a="form-uploads";function s(e){const t=e.getIn(o.g);return null==t||Boolean(t)}function c(e){return(e.get("cloud_key")||"").indexOf(`hubfs/${i.a.get()}/${a}`)>-1}function l(e){return!s(e)&&c(e)}const u=e=>e.get("is_indexable"),d=e=>e.getIn(["meta","sensitive"])&&!s(e)&&!u(e);function p(e){return!s(e)&&!c(e)&&!d(e)}},function(e,t,n){"use strict";var r=n(2),i=n(41),o=n.n(i),a=n(40),s=n(539),c=n(297),l=n(287),u=n.n(l),d=n(1266),p=n(1262),h=n(327),m=n(298),f=n(2682),g=n(447),b=n(1263),O=n(2654),y=n(1118),j=n(45);const v=["currentColor","opacity"],C=["color","icon","menuWidth","onColorChange","onOpenChange","onPickerModeChange","onResetClick","open","tooltipPlacement","tooltip","DropdownContent","disabled"],x=u()(e=>{const t=Object(r.a)(e,v);return Object(j.jsx)(b.a,Object.assign({},t,{size:13}))}).withConfig({displayName:"UITextToolbarColorDropdown__StyledTextToolbarIcon",componentId:"sc-4t3ifm-0"})(["border-bottom:2px solid ",";line-height:1;padding-bottom:1px;position:relative;transform:translateY(-2px);"],({currentColor:e,opacity:t})=>Object(h.b)(e,t)),E="simple";class T extends a.Component{constructor(e){super(e);this.handleOpenChange=e=>{const{onOpenChange:t}=this.props;!0===e.target.value&&this.setState({pickerMode:E});t(e)};this.handleColorChange=e=>{const{onColorChange:t,onOpenChange:n}=this.props,{pickerMode:r}=this.state;t(Object(m.a)(e));r===E&&n(Object(m.a)(!1))};this.handlePickerModeChange=e=>{const{onPickerModeChange:t}=this.props;this.setState({pickerMode:e.target.value});Object(c.a)(t,e)};this.state={pickerMode:E}}render(){const e=this.props,{color:t,icon:n,menuWidth:i,onResetClick:o,open:a,tooltipPlacement:s,tooltip:c,DropdownContent:l,disabled:u}=e,h=Object(r.a)(e,C),{pickerMode:m}=this.state,{color:f,alpha:b}=t,y=null!=b?b/100:1,v=Object(j.jsx)(x,{currentColor:f,opacity:y,name:n,disabled:u});return Object(j.jsx)(O.a,{open:!a&&void 0,placement:s,title:c,disabled:u,children:Object(j.jsx)(g.a,Object.assign({Button:p.a,buttonText:v,caretRenderer:Object(j.jsx)(d.a,{className:"m-x-1"}),menuWidth:i,onOpenChange:this.handleOpenChange,open:a,disabled:u},h,{children:Object(j.jsx)(l,{alpha:b,color:f,pickerMode:m,onChange:this.handleColorChange,onOpenChange:this.handleOpenChange,onPickerModeChange:this.handlePickerModeChange,onResetClick:o})}))})}}T.propTypes={color:o.a.shape({color:y.b,alpha:o.a.number}),DropdownContent:o.a.elementType.isRequired,icon:b.a.propTypes.name,menuWidth:g.a.propTypes.menuWidth,onColorChange:o.a.func,onOpenChange:o.a.func,onPickerModeChange:o.a.func,onResetClick:o.a.func,open:o.a.bool.isRequired,tooltipPlacement:O.a.propTypes.placement,tooltip:O.a.propTypes.title,disabled:o.a.bool};T.defaultProps={menuWidth:g.a.defaultProps.menuWidth,open:!1,tooltipPlacement:"bottom"};T.displayName="UITextToolbarColorDropdownCore";const S=Object(f.a)(T,["open","color"]);S.displayName="UITextToolbarColorDropdown";var I=S,w=n(1269);const _=["color","defaultAlpha","defaultColor","onColorChange","onPickerModeChange","onOpenChange","renderColorPicker"],N={color:o.a.object,defaultAlpha:o.a.number,defaultColor:o.a.string,onColorChange:o.a.func.isRequired,onPickerModeChange:o.a.func,onOpenChange:o.a.func,renderColorPicker:o.a.func.isRequired};function A(e){const{color:t,defaultAlpha:n,defaultColor:i,onColorChange:o,onPickerModeChange:l,onOpenChange:u,renderColorPicker:d}=e,p=Object(r.a)(e,_),h=t||{color:i,alpha:n},[m,f]=Object(a.useState)(null),[g,b]=Object(a.useState)(w.a.SIMPLE),O=Object(a.useCallback)(e=>{f(null);o(e)},[o]),y=Object(a.useCallback)(Object(s.a)(O,400),[O]),v=e=>{const{value:t}=e.currentTarget,n=Object.assign({},t,{mode:g});if(g===w.a.SIMPLE){f(null);o(n)}else{f(t);y(n)}},C=e=>{const{value:t}=e.target;b(t);Object(c.a)(l,t)},x=e=>{const{value:t}=e.target;t||b(w.a.SIMPLE);Object(c.a)(u,t)},E=()=>{f(null);o({color:null,alpha:null,mode:g})};return Object(j.jsx)(I,Object.assign({},p,{color:m||h,onColorChange:v,onOpenChange:x,onPickerModeChange:C,onResetClick:E,DropdownContent:d,menuWidth:300,autoPlacement:"horiz",pinToConstraint:["left","right"]}))}A.propTypes=N;A.displayName="ColorPickerToolbarButton";t.a=A},function(e,t,n){"use strict";var r=n(287),i=n.n(r),o=n(2628),a=n(2),s=n(41),c=n.n(s),l=n(40),u=n(345),d=n(45);const p=["favorites","fetchFavoriteColors"];var h=e=>{function t(t){const{favorites:n,fetchFavoriteColors:r}=t,i=Object(a.a)(t,p),[o,s]=Object(l.useState)(n),c=Object(l.useCallback)(()=>{r().then(e=>{s(e)}).catch(e=>{console.error(e);s([])})},[r]);Object(l.useEffect)(()=>{o||c()},[o,c]);return Object(d.jsx)(e,Object.assign({},i,{favorites:o||[]}))}t.propTypes={fetchFavoriteColors:c.a.func.isRequired,favorites:c.a.arrayOf(c.a.string)};t.displayName=`WithFavoriteColors(${Object(u.a)(e)})`;return t},m=n(1241),f=n(1270),g=n(1271);n.d(t,"a",(function(){return y}));const b=h(o.a),O=i.a.div.withConfig({displayName:"ColorPicker__ColorPickerWrapper",componentId:"hrxa8j-0"})(["width:300px;"]),y=(e,t)=>{const{scopes:n,apiClient:r,custom_colors:i}=e.settings,o=Object.assign({favorites:i,includeAlpha:!Object(m.f)(e,"isEmail"),editFavoritesLink:Object(f.c)(e),showFavoritesLink:n&&n.includes("settings-access"),showResetToDefault:!0,fetchFavoriteColors:Object(g.a)(r)},t);function a(e){return Object(d.jsx)(O,{children:Object(d.jsx)(b,Object.assign({},o,e,{className:"mce-hubspot-popover",onMouseDown:e=>e.preventDefault()}))})}return a}},function(e,t,n){"use strict";var r=n(4);const i={};var o=e=>{if(i[e])return i[e];let t=0;if(0===e.length)return t;e.split("").forEach(e=>{t=(t<<5)-t+e.charCodeAt(0);t&=t});const n="desc_"+t.toString().replace("-","n");i[e]=n;return n},a=n(201);n.d(t,"a",(function(){return O}));n.d(t,"b",(function(){return g}));n.d(t,"c",(function(){return b}));const s=/[\()\/\.\:\?\,\s\-\–\'&]/gi,c="recordProperties",l=c+".propertyDescriptions",u=e=>Object(a.a)(e)?r.a.text(e):void 0,d=(e,t)=>u(e)||t,p=e=>"string"!=typeof e||0===e.length,h=e=>p(e)?"":e.replace(s,"_").toLowerCase(),m=(e,t)=>`${l}.${o(t)}`,f=(e,t)=>{let n=h(e);p(t)||(n=`${t}.${n}`);return d(n,e)},g=(e,t=c)=>e&&e===e.toUpperCase()?e:f(e,t),b=({label:e,nameSpaceLookupKey:t,isHubSpotDefined:n})=>n?g(e,t||c):e,O=(e,t)=>{if(p(t)||"object"!=typeof r.a.lookup(l))return t;const n=m(e,t);return d(n,t)}},function(e,t,n){"use strict";var r=n(40),i=n(1259),o=n(1241),a=n(1233);function s(e,t,n){const r=e.getBody(),o=e.hasFocus()||n;if(t&&t.hasAttribute(i.a)&&r&&r.contains(t)){let n;o&&(n=e.selection.getBookmark());if(t.hasAttribute(i.b)){e.selection.select(t);e.formatter.remove(i.c)}else e.dom.remove(t);o&&n&&e.selection.moveToBookmark(n)}}function c(e){let t;if(!e.selection)return null;const n=e.selection.getNode(),r=e.selection.getContent({format:"text"}),s=e.selection.getRng(),c="SPAN"===n.nodeName&&n.hasAttribute(i.a),l=c&&n.hasAttribute(i.b),u="#text"===n.nodeName&&Object(o.h)(r)&&r.length<1;if(e.selection.isCollapsed()||u||c&&!l){t=e.dom.create("span",{[i.a]:"true",[a.b]:"1"});s.insertNode(t)}else if(l&&n.parentNode){t=n.cloneNode(!0);n.parentNode.replaceChild(t,n)}else{if(s.startContainer!==s.endContainer){s.setEndAfter(s.startContainer);e.selection.setRng(s)}e.formatter.apply(i.c);t=e.dom.getParent(e.selection.getRng().startContainer,`span[${i.b}]`)}return t}function l(e,t){const[n,o]=Object(r.useState)(t),[,a]=Object(r.useReducer)(e=>!e,!1),l=Object(r.useRef)(n);Object(r.useEffect)(()=>{l.current=n});Object(r.useEffect)(()=>{const t=({element:t})=>{t===l.current&&t.hasAttribute(i.a)&&e.selection.select(t)};e.on("NodeChange",t);return()=>{e.off("NodeChange",t)}},[e]);const u=Object(r.useCallback)((t,{removeTargets:n=!1,restoreSelection:r=!1}={})=>{n&&e.fire("hsRemoveInlineTargets",{curTarget:t});s(e,l.current,r);o(t)},[e]),d=Object(r.useCallback)(({fireNodeChange:t=!1,removeTargets:n=!0}={})=>{const r=c(e);t&&e.nodeChanged();u(r,{removeTargets:n})},[e,u]),p=Object(r.useCallback)(t=>{const n=l.current;if(n&&n.hasAttribute(i.a))if(n.hasAttribute(i.b)){t();d({fireNodeChange:!0,removeTargets:!1})}else{if(!n.parentNode){o(null);return}const r=Array.prototype.indexOf.call(n.parentNode.childNodes,n);e.selection.setCursorLocation(n.parentNode,r);if(e.undoManager.ignore){e.undoManager.ignore(()=>{t()});e.selection.select(n);e.undoManager.add()}else t();a()}},[e,d]);Object(r.useEffect)(()=>{const t=({curTarget:e})=>{l.current&&l.current!==e&&u(null)};e.on("hsRemoveInlineTargets",t);return()=>{e.off("hsRemoveInlineTargets",t)}},[e,u]);return{inlineTarget:n,setInlineTarget:u,initInlineTarget:d,insertAtInlineTarget:p}}t.a=l},function(e,t,n){"use strict";var r=n(9),i=n.n(r);const o={hubapi:["api","email","etsu","feedback","internal","onboarding","nav","private","users","zorse"],hubspot:["app","developers","cms2","cta","forms","library","login","marketplace","onboarding","payment","services","signup","sites","spitfire","uploads"],hubteam:["graph","mesos","rodan2","tools","bootstrap","test"]},a=["sidekick","sidekickapp","hs-sites","mktg-grader","inbound","signals","private-hubteam","app-api"],s={hubapi:"api",hubspot:"app",hubteam:"tools"},c={sidekick:{true:{true:"local.getsidekick.com",false:"api.getsidekick.com"},false:{true:"local.getsidekickqa.com",false:"api.getsidekickqa.com"}},sidekickapp:{true:{true:"local.getsidekick.com",false:"app.getsidekick.com"},false:{true:"local.getsidekickqa.com",false:"app.getsidekickqa.com"}},"hs-sites":{true:{true:"local.hs-sites.com",false:"hs-sites.com"},false:{true:"local.qa.hs-sites.com",false:"qa.hs-sites.com"}},"mktg-grader":{true:{true:"local.grader.com",false:"marketing.grader.com"},false:{true:"local.graderqa.com",false:"marketing.graderqa.com"}},inbound:{true:{true:"local.inbound.org",false:"inbound.org"},false:{true:"local.dev.inbound.org",false:"dev.inbound.org"}},signals:{true:{true:"local.getsignals.com",false:"api.getsignals.com"},false:{true:"local.getsignalsqa.com",false:"api.getsignalsqa.com"}},"private-hubteam":{true:{true:"local.hubteam.com",false:"private.hubteam.com"},false:{true:"local.hubteamqa.com",false:"private.hubteamqa.com"}},"app-api":{true:{true:"local.hubspot.com",false:"api.hubspot.com"},false:{true:"local.hubspotqa.com",false:"api.hubspotqa.com"}}};class l{constructor(){this.lbDomainMap=l._buildLbDomainMap();this.domainLbMap=l._buildDomainLbMap(this.lbDomainMap)}static _buildLbDomainMap(){const e={};Object.keys(o).forEach(t=>o[t].forEach(n=>e[n]={true:{true:`local.${t}.com`,false:`${n}.${t}.com`},false:{true:`local.${t}qa.com`,false:`${n}.${t}qa.com`}}));a.forEach(t=>e[t]=c[t]);return e}static _buildDomainLbMap(e){const t=[!0,!1],n={};Object.keys(e).forEach(r=>t.forEach(i=>t.forEach(t=>{let o=e[r][i][t],a=n[o];if(a){a.lbs[r]=!0;a.multiple=!0}else n[o]={defaultLb:r,lbs:{[r]:!0},production:i,local:t}})));Object.keys(s).forEach(e=>{let t=s[e];n[`local.${e}qa.com`].defaultLb=t;n[`local.${e}.com`].defaultLb=t});return n}getDomain(e,t=!1,n=!1){let r=this.lbDomainMap[e];if(r)return r[t][n]}getLbInfo(e,t){let n=this.domainLbMap[e];if(!n)return;let r=n.defaultLb;t&&n.multiple&&n.lbs[t]&&(r=t);return{lb:r,production:n.production,local:n.local}}getLb(e,t){let n=this.getLbInfo(e,t);if(n)return n.lb}getProduction(e){let t=this.getLbInfo(e);if(t)return t.production}getLocal(e){let t=this.getLbInfo(e);if(t)return t.local}}const u=new l;u.STANDARD_LBS=o;u.NONSTANDARD_LBS=a;var d=u;const p=e=>"boolean"==typeof e||null!=e&&e.valueOf&&"boolean"==typeof e.valueOf();class h{constructor(e,t,n){this._paramIndex={};this._lonelyQMark=!1;this.encodedParamTuples=[];if(null===e||"object"!=typeof e||e instanceof h)(n=n||{}).url=e;else if(e===window.location){(n=n||{}).protocol=e.protocol.slice(0,-1);n.hostname=e.hostname;n.pathname=e.pathname;n.search=e.search;n.hash=e.hash}else n=e;if(n.url instanceof h){this._cloneFrom(n.url);this.upsertParams(n.params||{})}else{n.protocol=n.protocol||window.location.protocol.slice(0,-1);this._set(n,t)}this.update(t)}_set(e={},t={}){let n=e.url||"",r=n.indexOf("#");t.hash||(this.hash=r>=0?n.substr(r):e.hash||"");n=r>=0?n.substr(0,r):n;let i=n.indexOf("?");if(!t.params&&!t.search){this.search=i>=0?n.substr(i):e.search||"";this.upsertParams(e.params||{})}n=i>=0?n.substr(0,i):n;i=n.indexOf("//");i>0&&":"!=n[i-1]&&(i=-1);t.protocol||(this.protocol=i>0?n.substr(0,i-1):e.protocol);let o=i<0?0:i+2,a=n.indexOf("/",o);void 0===t.pathname&&(this.pathname=(a<0?"":n.substr(a))||e.pathname||"");if(void 0===t.hostname){let t=(a<0?n.substr(o):n.substr(o,a-o))||e.hostname;if(t){this._lb=e.lb;this.hostname=t}else e.lb&&this.setLb(e.lb,e)}}update(e={}){e.protocol&&(this.protocol=e.protocol);void 0!==e.hostname&&(this.hostname=e.hostname);void 0!==e.pathname&&(this.pathname=e.pathname);void 0!==e.hash&&(this.hash=e.hash);if(e.lb||void 0!==e.production||void 0!==e.local){let t={production:void 0!==e.production?e.production:this.production,local:void 0!==e.local?e.local:this.local};this.setLb(e.lb||this._lb,t)}if(e.search)this.search=e.search;else if(e.params)this.params=e.params;else if(e.paramTuples)this.paramTuples=e.paramTuples;else if(e.encodedParamTuples){this._lonelyQMark=!1;this.encodedParamTuples=e.encodedParamTuples.slice(0);this._rebuildParamInfo()}}setLb(e,t={}){let n=this.segments[0],r=this._getProduction(t.production,n),i=this._getLocal(t.local,n);this._hostname=d.getDomain(e,r,i);this._lb=this._hostname&&e;this._production=this._hostname&&r;this._local=this._hostname&&i}get href(){return this.protocol+"://"+(this.hostname||"")+this.pathname+this.search+this.hash}set href(e){this._set({url:e})}get search(){let e=this.encodedParamTuples.map(e=>e.join("=")).join("&");return e.length>0||this._lonelyQMark?"?"+e:e}set search(e){this.encodedParamTuples=[];this._lonelyQMark=!1;e.length>1?e.substr(1).split("&").forEach(e=>this.encodedParamTuples.push(e.split("="))):"?"===e[0]&&(this._lonelyQMark=!0);this._rebuildParamInfo()}normalize(){this._lonelyQMark=!1}set hostname(e){this._hostname=e;let t=d.getLbInfo(e,this._lb);this._lb=t&&t.lb;this._production=t&&t.production;this._local=t&&t.local}get hostname(){return this._hostname}get lb(){return this._lb}set lb(e){this.setLb(e)}get production(){return this._production}set production(e){if(this._lb){this._production=!!e;this._hostname=d.getDomain(this._lb,this._production,this._local)}}get local(){return this._local}set local(e){if(this._lb){this._local=!!e;this._hostname=d.getDomain(this._lb,this._production,this._local)}}get env(){return void 0===this._production?"unknown":this._production?"prod":"qa"}get lbInfo(){return{lb:this._lb,production:this._production,local:this._local}}get segments(){let e=this.pathname.replace(/(^\/)|\/$/g,"");return(e?e.split("/"):[]).map(e=>decodeURIComponent(e))}_rebuildParamInfo(){this._paramIndex={};this.validParams=!0;this.encodedParamTuples.forEach((e,t)=>{this.validParams=this.validParams&&2==e.length;let n=decodeURIComponent(e[0]);this._paramIndex[n]?this._paramIndex[n].push(t):this._paramIndex[n]=[t]})}get paramTuples(){return this.encodedParamTuples.map(e=>[decodeURIComponent(e[0]),decodeURIComponent(e[1])])}set paramTuples(e){this.encodedParamTuples=[];this._lonelyQMark=!1;e.forEach(e=>this.encodedParamTuples.push([e[0],e[1]]));this._rebuildParamInfo()}get params(){const e={};Object.keys(this._paramIndex).forEach(t=>e[t]=this.paramValue(t));return e}set params(e){this.encodedParamTuples=[];this._lonelyQMark=!1;Object.keys(e).forEach(t=>this.encodedParamTuples.push([t,encodeURIComponent(e[t])]));this._rebuildParamInfo()}paramValues(e){return(this._paramIndex[e]||[]).map(e=>decodeURIComponent(this.encodedParamTuples[e][1]))}paramValue(e){let t=this.paramValues(e);return t[t.length-1]}encodedParamValues(e){return(this._paramIndex[decodeURIComponent(e)]||[]).map(e=>this.encodedParamTuples[e][1])}encodedParamValue(e){let t=this.encodedParamValues(e);return t[t.length-1]}insertParamAt(e,t,n){this.insertEncodedParamAt(e,encodeURIComponent(t),encodeURIComponent(n))}insertEncodedParamAt(e,t,n){this.encodedParamTuples.splice(e,0,[t,n]);this._rebuildParamInfo()}pushParam(e,t){this.insertParamAt(this.encodedParamTuples.length,e,t)}pushEncodedParam(e,t){this.insertEncodedParamAt(this.encodedParamTuples.length,e,t)}upsertParam(e,t){let n=this._paramIndex[e]||[];n.length>0?n.forEach(n=>this.updateParamAt(n,e,t)):this.pushParam(e,t)}upsertParams(e){Object.keys(e).forEach(t=>this.upsertParam(t,e[t]))}updateParamAt(e,t,n){this.updateEncodedParamAt(e,encodeURIComponent(t),encodeURIComponent(n))}updateEncodedParamAt(e,t,n){this.encodedParamTuples.splice(e,1,[t,n]);this._rebuildParamInfo()}removeParam(e){let t=this._paramIndex[e]||[];if(t.length>0){t.reverse().forEach(e=>this.encodedParamTuples.splice(e,1));this._rebuildParamInfo()}}removeParamAt(e){this.encodedParamTuples.splice(e,1);this._rebuildParamInfo()}clearParams(){this.encodedParamTuples=[];this.validParams=!0;this._paramIndex={};this._lonelyQMark=!1}get valid(){return!(!this.protocol||!this._hostname||!this.pathname&&""!==this.pathname||!this.validParams)}get hostplus(){return(this.hostname||"")+this.pathname+this.search+this.hash}get pathplus(){return this.pathname+this.search+this.hash}clone(){return new h(this)}_cloneFrom(e){this.protocol=e.protocol;this._hostname=e._hostname;this._lb=e._lb;this._production=e._production;this._local=e._local;this.pathname=e.pathname;this.hash=e.hash;this.encodedParamTuples=e.encodedParamTuples.slice(0);this.validParams=e.validParams;this._paramIndex={};Object.keys(e._paramIndex).forEach(t=>{this._paramIndex[t]=e._paramIndex[t].slice(0)});this._lonelyQMark=e._lonelyQMark;return this}_getProduction(e,t){return p(e)?e:p(this._production)?this._production:"production"==i.a.get(t)}_getLocal(e,t){return p(e)?e:p(this._local)?this._local:!!t&&("local"==i.a.get(t)||h.localService(t))}static localService(e){try{if(window.localStorage){let t=e.toUpperCase()+"_LOCAL";return"true"==window.localStorage.getItem(t)}}catch(e){}return!1}}h.loaded=new h(window.location);t.a=h},function(e,t,n){"use strict";var r=n(673),i=n(1342);const o="CRM_OBJECT";n.d(t,"b",(function(){return a}));n.d(t,"a",(function(){return s}));n.d(t,"c",(function(){return c}));n.d(t,"d",(function(){return l}));n.d(t,"e",(function(){return u}));function a(e){return e&&e.constructor._idKey}function s(e){return e&&Object(i.a)(a(e)||[],e)}function c(e){const t=e&&e.constructor._objectType;return t===o?Object(r.a)("objectTypeId",e):t}function l(e,t){if(void 0===t)return;if(!e)return;const n=Object(i.a)(["properties",t,"value"],e);return void 0!==n?n:void 0}function u(e,t){if(void 0!==t)return e&&Object(i.a)(["properties",t],e)}},function(e,t,n){"use strict";var r=n(2),i=n(41),o=n.n(i),a=n(40),s=n(2679),c=n(2654),l=n(1222),u=n(287),d=n.n(u),p=n(324),h=n(2675),m=d()(h.a).withConfig({displayName:"StyleProtectedUIMultiLevelDropdown",componentId:"sc-5xzle5-0"})(["display:block !important;& button{color:"," !important;background-color:"," !important;&:hover{background-color:"," !important;}}"],p.OBSIDIAN,p.OLAF,p.CALYPSO_LIGHT),f=n(1220),g=n(1218),b=n(45);const O=["menuItems","className"],y="mce-sub-menu";class j extends a.Component{constructor(...e){super(...e);this.shouldCloseOnClick=({target:e})=>{let t=e;for(;t;){if(t.classList.contains(y)||t.classList.contains(this.props.dropdownClassName)||t.classList.contains(g.b))return!0;if(t.classList.contains(g.c))return!1;t=t.parentElement}return!0};this.getOptionForMenuItem=e=>{let{child:t}=e;if(!t)return this.renderMenuItem(e);"function"==typeof t&&(t=t());return{label:e.text,options:[t],iconName:e.icon,dropdownClassName:y,"data-test-id":e.name}}}renderMenuItem({name:e,onClick:t,text:n,render:r,icon:i,disabled:o,tooltip:a}){if("function"==typeof r)return r({key:e});const u=Object(b.jsxs)(l.a,{disabled:o,"data-test-id":e,onClick:t,children:[i&&Object(b.jsx)(s.a,{name:i}),n]},e);if("object"==typeof a){const{title:e,placement:t="bottom"}=a;return Object(b.jsx)(c.a,{className:"mce-toolbar-menu-tooltip",title:e,placement:t,children:u})}return u}render(){const e=this.props,{menuItems:t,className:n}=e,i=Object(r.a)(e,O);return Object(b.jsx)(m,Object.assign({buttonClassName:n,buttonUse:"transparent",animateOnToggle:!1,options:t.map(this.getOptionForMenuItem),shouldCloseOnClick:this.shouldCloseOnClick},i))}}j.propTypes={menuItems:o.a.array.isRequired,className:o.a.string,dropdownClassName:o.a.string};t.a=Object(f.a)(j)},function(e,t,n){"use strict";var r=n(40),i=n(1414),o=n(29),a=n(47);const s=Object(a.a)(e=>{const{gated:t,ungated:n}=Object(o.parse)(e.substring(1)),r={};n&&(Array.isArray(n)?n:[n]).reduce((e,t)=>{e[t]=!0;return e},r);t&&(Array.isArray(t)?t:[t]).reduce((e,t)=>{e[t]=!1;return e},r);return r});var c=(e,t,n=s(window.location.search))=>Object.prototype.hasOwnProperty.call(n,e)?n[e]:t;n.d(t,"a",(function(){return d}));const l=new Set,u=Object(a.a)(e=>new Set(e)),d=()=>{const e=Object(i.a)(),t=e?u(e.gates):l;return Object(r.useCallback)(e=>c(e,t.has(e)),[t])}},function(e,t,n){"use strict";var r=n(4),i=n(99);const o={years:12,days:2.4,hours:2.4,minutes:2.4,seconds:0,milliseconds:0},a=(e,t)=>Math.round(e/t*10)/10,s=()=>{const e=r.a.moment.duration(1,"second").valueOf(),t=r.a.moment.duration(1,"minute").valueOf(),n=r.a.moment.duration(1,"hour").valueOf(),i=r.a.moment.duration(1,"day").valueOf(),o=r.a.moment.duration(1,"year").valueOf();return{years:e=>a(e,o),days:e=>a(e,i),hours:e=>a(e,n),minutes:e=>a(e,t),seconds:t=>a(t,e),milliseconds:e=>Math.round(e)}},c=(e,t)=>{if(null==e||""===e||isNaN(+e))return{label:void 0,duration:void 0,unit:void 0};const n=Number(e),a=r.a.moment.userTz(n),c=r.a.moment.userTz(),l="time_since"===t?r.a.moment.duration(c.diff(a)):r.a.moment.duration(a.diff(c)),u=s();return Object.keys(u).reduce((e,t)=>{const{label:n}=e,r=Math.round(u[t](l));return n?e:Math.abs(r)>o[t]||0===r&&"milliseconds"===t?"milliseconds"!==t?{duration:r,label:Object(i.a)("customerDataPropertyUtils.dateDisplayHintLabel.durations.label."+t,{count:r}),unit:t}:{duration:r,label:Object(i.a)("customerDataPropertyUtils.dateDisplayHintLabel.durations.label.seconds",{count:0===r?r/1e3:"< "+(r>0?"1":"-1")}),unit:"milliseconds"}:{label:"",duration:0,unit:"milliseconds"}},{label:"",duration:0,unit:"milliseconds"})};n.d(t,"a",(function(){return d}));const l=({numberValue:e,dateDisplayHint:t})=>{const n=r.a.moment.utc(e),o=r.a.moment.utc([r.a.moment.portalTz().year(),r.a.moment.portalTz().month(),r.a.moment.portalTz().date()]),a="time_since"===t?o.diff(n,"days"):n.diff(o,"days");return"absolute_with_relative"===t?0===a?Object(i.a)("customerDataPropertyUtils.dateDisplayHintLabel.date.today"):a>0?Object(i.a)("customerDataPropertyUtils.dateDisplayHintLabel.date.absolute_with_relative.future",{count:Math.abs(a)}):Object(i.a)("customerDataPropertyUtils.dateDisplayHintLabel.date.absolute_with_relative.past",{count:Math.abs(a)}):"time_since"===t||"time_until"===t?Object(i.a)("customerDataPropertyUtils.dateDisplayHintLabel.date."+t,{count:a}):""},u=({value:e,dateDisplayHint:t})=>{const{duration:n,unit:r}=c(e,t);return void 0===n?"":"absolute_with_relative"===t?0===n?Object(i.a)("customerDataPropertyUtils.dateDisplayHintLabel.dateTime.now"):n>0?Object(i.a)("customerDataPropertyUtils.dateDisplayHintLabel.dateTime.absolute_with_relative.future."+r,{duration:Math.abs(n)}):Object(i.a)("customerDataPropertyUtils.dateDisplayHintLabel.dateTime.absolute_with_relative.past."+r,{duration:Math.abs(n)}):"time_until"===t||"time_since"===t?Object(i.a)(`customerDataPropertyUtils.dateDisplayHintLabel.dateTime.${t}.${r}`,{duration:n}):""},d=({value:e,type:t,dateDisplayHint:n})=>{if("date"!==t&&"datetime"!==t)return"";if(!e||!n||"absolute"===n)return"";const r=Number(e);return isNaN(r)?"":"datetime"===t?u({value:e,dateDisplayHint:n}):l({numberValue:r,dateDisplayHint:n})}},function(e,t,n){"use strict";n.r(t);var r=n(40),i=n(475),o=n(513),a=n(45);class s extends r.Component{render(){return Object(a.jsx)(o.a,Object.assign({},this.props,{formatStyle:"percentage"}))}}s.displayName="UIPercentageInput";s.propTypes=Object.assign({},Object(i.a)(o.a.propTypes,["formatStyle","currency"]));s.defaultProps=Object.assign({},o.a.defaultProps);var c=s,l=n(298),u=n(1423),d=n(1426),p=n(2672);const h=10,m=e=>{const t=(Number(e)/100).toFixed(h+2),n=Number(t);return String(n)},f={min:0,max:100},g=e=>{const{value:t,onChange:n,inputRef:i,property:o}=e,s=Object(r.useCallback)(e=>{"function"==typeof n&&n(null==e.target.value?e:Object(l.a)(m(e.target.value)))},[n]),g=Object(d.a)(t),b=null===g?null:Number((100*g).toFixed(h)),O=Object(p.E)(o)?f:void 0;return Object(a.jsx)(c,Object.assign({},Object(u.a)(e),{onChange:s,inputRef:i,value:b},O,{precision:h}))};t.default=Object(r.memo)(g)},function(e,t,n){"use strict";n.r(t);var r=n(40),i=n(695),o=n(298),a=n(1320),s=n(2779),c=n(571),l=n(99),u=n(2823),d=n(55),p=n(28),h=n(1),m=n.n(h),f=n(1396),g=n(678),b=n(1344),O=n(2616),y=n(1437),j=n(2),v=n(287),C=n.n(v),x=n(2764),E=n(1216),T=n(771),S=n(302),I=n(45);const w=["type"],_=Object(v.keyframes)(["from{opacity:0}to{opacity:1}"]),N=C.a.div.withConfig({displayName:"ModalIFrameLayer__FullScreenOverlay",componentId:"ymtzfm-0"})(["position:fixed;top:0;left:0;bottom:0;right:0;z-index:",";opacity:0;animation-name:",";animation-duration:100ms;animation-fill-mode:forwards;",";",";& > iframe{width:100%;height:100%;}"],S.Ob,_,({$show:e})=>!e&&"display: none",({$loading:e})=>e&&"background-color: rgba(45,62,80,0.79)");var A=({actionButtons:e,embeddedPassthruProps:t,height:n,iframePassthruProps:i,onClose:o,onInitError:a,onMessage:s,onReady:c,onReadyError:l,show:u,showProgressIndicator:d,src:p,title:h,width:m})=>{const[f,g]=Object(r.useState)(!0),[b,v]=Object(r.useState)(!1),C=Object(r.useCallback)(e=>{const{payload:{type:t}}=e,n=Object(j.a)(e.payload,w);switch(t){case y.a:o(Object.assign({},n));break;case"ON_OPEN_START":v(!0);break;case"ON_CLOSE_COMPLETE":v(!1);break;default:s&&s(e)}},[o,s]),S=Object(r.useCallback)(()=>{g(!1);c&&c()},[c]);return Object(I.jsx)(x.a,{children:Object(I.jsxs)(N,{$loading:f,$show:u||b,children:[d&&f&&Object(I.jsx)(E.a,{render:({value:e,done:t})=>Object(I.jsx)(T.a,{value:e,animateOnComplete:t})}),Object(I.jsx)(O.a,{width:"100%",height:"100%",iframePassthruProps:i,embeddedPassthruProps:Object.assign({},t,{title:h,actionButtons:e,height:n,width:m,show:u}),onInitError:a,onMessage:C,onReady:S,onReadyError:l,src:p})]})})},D=n(1438),k=n(1400);const P=({formControlUse:e,objectId:t,enablePopovers:n})=>"default"===e&&!Object(D.a)({enablePopovers:n,objectId:t}),R=(e,t)=>`${Object(p.getFullUrl)("app")}/customer-data-properties-ui/${m.a.get()}/${encodeURIComponent(e)}/${encodeURIComponent(t)}/inline`,F=(e,t)=>`${Object(p.getFullUrl)("app")}/customer-data-properties-ui/${m.a.get()}/${encodeURIComponent(e)}/${encodeURIComponent(t)}/layer`,L={id:"property-input-html","data-test-id":"property-input-html"},M=Object(f.a)(()=>[{name:y.a,label:Object(l.a)("customerDataProperties.PropertyInputHtml.modal.actionButtons.close"),props:{use:"tertiary-light"}}]),B=Object(f.a)(()=>[{name:"UPDATE",label:Object(l.a)("customerDataProperties.PropertyInputHtml.modal.actionButtons.update"),props:{use:"primary",disabled:!0}},{name:y.a,label:Object(l.a)("customerDataProperties.PropertyInputHtml.modal.actionButtons.cancel"),props:{use:"secondary"}}]),U=Object(f.a)(()=>[{name:"UPDATE",label:Object(l.a)("customerDataProperties.PropertyInputHtml.modal.actionButtons.update"),props:{use:"primary"}},{name:y.a,label:Object(l.a)("customerDataProperties.PropertyInputHtml.modal.actionButtons.cancel"),props:{use:"secondary"}}]),V=({property:e,objectType:t,className:n,autoFocus:p,disabled:h=!1,readOnly:m=!1,value:f,onChange:O,inputRef:y})=>{const[j,v]=Object(r.useState)(!1),[C,x]=Object(r.useState)(!1),E=Object(r.useCallback)(()=>{v(!0);x(!0)},[]),T=Object(r.useCallback)(({value:e}={})=>{void 0!==e&&O(Object(o.a)(e));x(!1)},[O]),S=Object(r.useCallback)(()=>{i.a.addAlert({message:Object(l.a)("customerDataProperties.PropertyInputHtml.modal.error"),type:"warning"});v(!1);x(!1)},[]),w=e.hubspotDefined?Object(u.b)(e.label):e.label;let _,N;_=h||m?Object(l.a)("customerDataProperties.PropertyInputHtml.modal.title.view",{propertyLabel:w}):Object(l.a)("customerDataProperties.PropertyInputHtml.modal.title.edit",{propertyLabel:w});N=m?M():h?B():U();return Object(I.jsxs)(r.Fragment,{children:[Object(I.jsx)(a.a,{buttonAlign:"left",hideButtonCaret:!0,children:Object(I.jsx)(s.a,{className:n,autoFocus:p,disabled:h,readOnly:m,onChange:d.a,value:Object(c.a)(f),onFocus:E,inputRef:y,shrink:!0})}),j&&Object(I.jsx)(A,{actionButtons:N,embeddedPassthruProps:{property:Object(g.a)(e),defaultValue:f,autoFocus:p,readOnly:m,disabled:h},height:500,iframePassthruProps:L,onClose:T,onInitError:S,onMessage:d.a,onReady:d.a,onReadyError:S,show:C,showProgressIndicator:!0,src:F(Object(b.x)(t),e.name),title:_,width:800})]})};V.displayName="PropertyInputHtmlModal";const H=({property:e,objectType:t,className:n,autoFocus:a,disabled:s=!1,readOnly:c=!1,value:u,onChange:p})=>{const h=Object(r.useCallback)(()=>{i.a.addAlert({message:Object(l.a)("customerDataProperties.PropertyInputHtml.modal.error"),type:"warning"})},[]),m=Object(r.useCallback)(e=>{const{payload:t}=e;t&&"CHANGE"===t.type&&void 0!==t.value&&p(Object(o.a)(t.value))},[p]);return Object(I.jsx)(O.a,{className:n,embeddedPassthruProps:{property:Object(g.a)(e),defaultValue:u,autoFocus:a,readOnly:c,disabled:s},height:400,iframePassthruProps:L,onInitError:h,onMessage:m,onReady:d.a,onReadyError:h,showProgressIndicator:!0,src:R(Object(b.x)(t),e.name),width:"100%"})};H.displayName="PropertyInputHtmlEmbedded";const q=e=>{const{formControlUse:t,enablePopovers:n}=e,r=Object(k.a)(),i=P({formControlUse:t,objectId:r,enablePopovers:n})?H:V;return Object(I.jsx)(i,Object.assign({},e))};q.displayName="PropertyInputHtml";t.default=Object(r.memo)(q)},function(e,t,n){"use strict";n.r(t);var r=n(2),i=n(40),o=n(99),a=n(2644),s=n(2655),c=n(1423),l=n(731),u=n(1451),d=n(45);const p=({property:e,objectTypeId:t,value:n})=>{switch(n?n.toUpperCase():""){case"LOW":case"COLD":return"active";case"MEDIUM":case"WARM":return"warning";case"HIGH":case"HOT":return"danger";case"NONE":return;default:return e&&Object(u.b)(e,t)?"default":void 0}},h=({property:e,objectTypeId:t,value:n})=>{const r=p({property:e,objectTypeId:t,value:n});return r?Object(d.jsx)("span",{"data-status":r,children:Object(d.jsx)(l.a,{role:"status","data-test-id":"priority-status-dot-"+(n?n.toLowerCase():""),use:r})}):null},m=["children","option","property","objectTypeId"],f=e=>{let{children:t,option:n,property:i,objectTypeId:o}=e,a=Object(r.a)(e,m);return n.value?Object(d.jsxs)("li",Object.assign({style:{padding:"8px 20px"}},a,{children:[Object(d.jsx)(h,{property:i,objectTypeId:o,value:n.value}),n.text]})):Object(d.jsx)("li",Object.assign({},a,{children:t}))},g=({value:e,text:t,buttonText:n},r,i)=>e?Object(d.jsxs)("div",{children:[Object(d.jsx)(h,{property:r,objectTypeId:i,value:e}),t]}):n,b=e=>{const{defaultValue:t,inputRef:n,isRequired:r,placeholder:l,property:u,value:p,objectTypeId:h}=e,m=Object(i.useMemo)(()=>void 0!==l?l||"":u.placeholder||Object(o.a)("customerDataProperties.PropertyInput.selectPlaceholder"),[u,l]),b=String(p||t||""),O=Object(i.useMemo)(()=>r?Object(a.c)(u):Object(a.b)(u),[u,r]),y=Object(i.useMemo)(()=>e=>Object(d.jsx)(f,Object.assign({},e,{property:u,objectTypeId:h})),[u,h]),j=Object(i.useMemo)(()=>e=>g(e,u,h),[u,h]);return Object(d.jsx)(s.a,Object.assign({},Object(c.a)(e,["onFocus","onKeyUp"]),{options:O,placeholder:m,ref:n,value:b,itemComponent:y,valueRenderer:j}))};t.default=Object(i.memo)(b)},function(e,t,n){"use strict";n.r(t);var r=n(508),i=n(40),o=n(1423);const a=e=>null===e?"":e;var s=n(45);const c=e=>{const{autoFocus:t,disabled:n,inputRef:i,onChange:c,readOnly:l,value:u}=e;return Object(s.jsx)(r.a,Object.assign({},Object(o.a)(e),{autoFocus:t,disabled:n,value:a(u),onChange:c,readOnly:l,inputRef:i,type:"email"}))};t.default=Object(i.memo)(c)},function(e,t,n){"use strict";n.r(t);var r=n(673),i=n(2644),o=n(731),a=n(45);const s=e=>{switch(e){case"active":return Object(a.jsx)(o.a,{use:"active","data-test-id":"subscription-status-active"});case"paused":case"past_due":return Object(a.jsx)(o.a,{use:"warning","data-test-id":"subscription-status-warning"});case"unpaid":return Object(a.jsx)(o.a,{use:"danger","data-test-id":"subscription-status-unpaid"});case"canceled":case"expired":return Object(a.jsx)(o.a,{use:"default","data-test-id":"subscription-status-canceled-expired"});case"scheduled":return Object(a.jsx)(o.a,{use:"thunderdome","data-test-id":"subscription-status-scheduled"});default:return}};var c=n(1423),l=n(2655),u=n(40);const d=e=>{const{autoFocus:t,buttonUse:n,className:o,disabled:u,inputRef:d,onChange:p,property:h,readOnly:m,value:f,placeholder:g}=e,b=Object(i.c)(h).map(e=>Object.assign({},e,{avatar:s(e.value)}));return Object(a.jsx)(l.a,Object.assign({},Object(c.a)(e),{autoFocus:t,buttonUse:n,className:o,disabled:u,onChange:p,options:b,readOnly:void 0!==m?m:Object(r.a)("readOnlyValue",h),ref:d,value:f,placeholder:null==g?"":g}))};d.defaultProps={buttonUse:"form"};t.default=Object(u.memo)(d)},function(e,t,n){"use strict";n.r(t);var r=n(2644),i=n(2655),o=n(1457),a=n(41),s=n.n(a),c=n(731),l=n(2710),u=n(45);const d=e=>{switch(e){case"succeeded":return Object(u.jsx)(c.a,{use:"success","data-test-id":"status-dot-"+e});case"failed":return Object(u.jsx)(c.a,{use:"error","data-test-id":"status-dot-"+e});case"processing":case"processing_refund":return Object(u.jsx)(c.a,{use:"inReview","data-test-id":"status-dot-"+e});case"refunded":case"partially_refunded":return Object(u.jsx)(c.a,{use:"thunderdome","data-test-id":"status-dot-"+e});default:return}},p=({property:e,value:t,objectTypeId:n})=>null==t?Object(u.jsx)("span",{children:o.a}):Object(u.jsxs)("span",{children:[d(t),Object(r.a)(e,t,void 0,void 0,n)]});p.propTypes={property:l.a.isRequired,value:s.a.string};var h=n(40);const m=({autoFocus:e,buttonUse:t,className:n,inputRef:a,onChange:s,property:c,readOnly:l,value:p,disabled:h})=>{if(null==p)return Object(u.jsx)(u.Fragment,{children:o.a});const m=Object(r.c)(c).map(e=>Object.assign({},e,{avatar:d(e.value)}));return Object(u.jsx)(i.a,{autoFocus:e,buttonUse:t,className:n,onChange:s,options:m,readOnly:l,ref:a,value:p,disabled:h})};m.defaultProps={buttonUse:"form"};t.default=Object(h.memo)(m)},function(e,t,n){"use strict";n.r(t);var r=n(41),i=n.n(r),o=n(40),a=n(288),s=n.n(a),c=n(1458),l=n(2712),u=n(456),d=i.a.string,p=n(45);n.d(t,"default",(function(){return h}));class h extends o.PureComponent{getValue(){return(this.props.value?this.props.value.split(/[;,]+/):[]).filter(e=>Object(c.e)(e.trim()))}render(){const e=s()("p-left-0",this.props.className);return Object(p.jsx)(u.a,{className:e,children:this.getValue().map(e=>{const t=e.match(/\/([^/]*)$/),n=t?t[1]:"";return Object(p.jsxs)(l.a,{href:e,external:!0,children:[" ",n," "]},e)})})}}h.propTypes={value:d,className:i.a.string}},function(e,t,n){"use strict";n.r(t);var r=n(1465),i=n(40),o=n(434),a=n(453),s=n(335),c=n(337),l=n(357),u=n(2735),d=n(1037),p=n(1423),h=n(45);var m=e=>{const{property:t,value:n,inputRef:r,onChange:m,popoverProps:f}=e,[g,b]=Object(i.useState)(!0),O=e=>m(e),y=()=>Object(h.jsxs)(s.a,{className:"p-bottom-5",children:[Object(h.jsxs)(o.a,{justify:"between",children:[Object(h.jsx)("b",{children:t.label}),Object(h.jsx)(c.a,{onClick:()=>b(!1)})]}),Object(h.jsx)(u.a,{className:"m-top-2",children:Object(h.jsx)(d.a,Object.assign({},Object(p.a)(e),{value:null===n?"":n,inputRef:r,onChange:O,styled:!0,rows:6}))})]}),j=Object(i.useCallback)(e=>{b(e.target.value)},[]),v=Object(i.useCallback)(()=>{b(e=>!e)},[]);return Object(h.jsx)(a.a,Object.assign({width:400,placement:"right"},f,{open:g,renderContent:y,onOpenChange:j,"data-test-id":"property-input-text-area-popover",children:Object(h.jsx)(u.a,{onClick:v,children:Object(h.jsx)(l.a,{tooltip:!g,children:n})})}))};n.d(t,"PropertyInputTextArea",(function(){return f}));const f=e=>{const{formControlUse:t}=e;return"table-cell"===t?Object(h.jsx)(m,Object.assign({},e)):Object(h.jsx)(r.default,Object.assign({},e))};t.default=f},function(e,t,n){"use strict";var r=n(1003),i=n(1004);var o=new RegExp(`^${i.a.domain}$`,"i");t.a=Object(r.a)({name:"Domain",validator:e=>o.test(e)})},function(e,t,n){"use strict";var r=n(1445),i=n(40),o=n(1420),a=n(1403);const s={count:100,offset:0};var c=n(1446);n.d(t,"a",(function(){return u}));n.d(t,"b",(function(){return d}));function l(e){return"fulfilled"===e.status}const u=(e,t)=>{const{api:{byId:n}}=e,s=Object(i.useRef)(),u=Array.isArray(t),d=t?r.c:r.b,[p,h]=Object(i.useState)({error:void 0,references:void 0,status:d});t&&Object(r.f)(p.status)&&h({error:void 0,references:void 0,status:r.c});Object(i.useEffect)(()=>{if(!t){h({error:void 0,references:void 0,status:r.b});s.current=void 0;return}if(s.current&&t.toString()===s.current.toString()){s.current=t;return}s.current=t;if(0===t.length){h({error:void 0,references:[],status:r.d});return}const e=e=>h({error:void 0,references:e,status:r.d}),i=e=>h({error:e,references:void 0,status:r.a});Object(a.a)(Object(o.a)(t.map(e=>n(e))).then(n=>{const r=n.filter(l).map(({value:e})=>e);0===r.length?i(Object(c.a)(t)):e(r)}))},[u,t,n]);return p},d=(e,t)=>{t=Object.assign({},s,t);const{query:n,count:o,offset:c}=t,{api:{search:l}}=e,u=null==n?r.b:r.c,[d,p]=Object(i.useState)({error:void 0,results:void 0,status:u});null!=n&&Object(r.f)(d.status)&&p({error:void 0,results:void 0,status:r.c});Object(i.useEffect)(()=>{if(null==n)return;const e=e=>p({error:void 0,results:e,status:r.d}),t=e=>p({error:e,results:void 0,status:r.a});Object(a.a)(l({query:n,offset:c,count:o}).then(e,t))},[n,c,o,l]);return d}}])]);
//# sourceMappingURL=//static.hsappstatic.net/DesignManagerIde/static-2.61259/custom-widget-editor~layout-editor.js.map