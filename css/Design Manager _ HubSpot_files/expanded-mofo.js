(window.webpackJsonp=window.webpackJsonp||[]).push([["expanded-mofo"],{1561:function(e,t,n){"use strict";n.r(t);var o=n(2607),r=n(1146);t.default=Object(r.a)(o.a)},1562:function(e,t,n){n(1563)},1563:function(e,t){!function(){"use strict";var e,t,n=tinymce.util.Tools.resolve("tinymce.PluginManager"),o=function(e,t,n){var o="UL"===t?"InsertUnorderedList":"InsertOrderedList";e.execCommand(o,!1,!1===n?null:{"list-style-type":n})},r=function(e){e.addCommand("ApplyUnorderedListStyle",(function(t,n){o(e,"UL",n["list-style-type"])}));e.addCommand("ApplyOrderedListStyle",(function(t,n){o(e,"OL",n["list-style-type"])}))},i=tinymce.util.Tools.resolve("tinymce.util.Tools"),a=function(e){var t=e.getParam("advlist_number_styles","default,lower-alpha,lower-greek,lower-roman,upper-alpha,upper-roman");return t?t.split(/[ ,]/):[]},s=function(e){var t=e.getParam("advlist_bullet_styles","default,circle,square");return t?t.split(/[ ,]/):[]},l=function(){},c=function(e){return function(){return e}},u=function(e){return e},d=c(!1),f=c(!0),p=function(){return m},m={fold:function(e,t){return e()},isSome:d,isNone:f,getOr:t=u,getOrThunk:e=function(e){return e()},getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:c(null),getOrUndefined:c(void 0),or:t,orThunk:e,map:p,each:l,bind:p,exists:d,forall:f,filter:function(){return p()},toArray:function(){return[]},toString:c("none()")},h=function(e){var t=c(e),n=function(){return r},o=function(t){return t(e)},r={fold:function(t,n){return n(e)},isSome:f,isNone:d,getOr:t,getOrThunk:t,getOrDie:t,getOrNull:t,getOrUndefined:t,or:n,orThunk:n,map:function(t){return h(t(e))},each:function(t){t(e)},bind:o,exists:o,forall:o,filter:function(t){return t(e)?r:m},toArray:function(){return[e]},toString:function(){return"some("+e+")"}};return r},g=function(e){return null==e?m:h(e)},b={some:h,none:p,from:g},v=function(e,t){return e.$.contains(e.getBody(),t)},y=function(e){return e&&/^(TH|TD)$/.test(e.nodeName)},C=function(e){return function(t){return t&&/^(OL|UL|DL)$/.test(t.nodeName)&&v(e,t)}},O=function(e){var t=e.dom.getParent(e.selection.getNode(),"ol,ul"),n=e.dom.getStyle(t,"listStyleType");return b.from(n)},x=function(e,t){for(var n=0;n<e.length;n++){if(t(e[n]))return n}return-1},j=function(e){return e.replace(/\-/g," ").replace(/\b\w/g,(function(e){return e.toUpperCase()}))},S=function(e,t,n){var o=x(t.parents,y),r=-1!==o?t.parents.slice(0,o):t.parents,a=i.grep(r,C(e));return a.length>0&&a[0].nodeName===n},w=function(e,t){return function(n){var o=function(o){n.setActive(S(e,o,t))};e.on("NodeChange",o);return function(){return e.off("NodeChange",o)}}},T=function(e,t,n,r,a,s){e.ui.registry.addSplitButton(t,{tooltip:n,icon:"OL"===a?"ordered-list":"unordered-list",presets:"listpreview",columns:3,fetch:function(e){e(i.map(s,(function(e){return{type:"choiceitem",value:"default"===e?"":e,icon:"list-"+("OL"===a?"num":"bull")+"-"+("disc"===e||"decimal"===e?"default":e),text:j(e)}})))},onAction:function(){return e.execCommand(r)},onItemAction:function(t,n){o(e,a,n)},select:function(t){return O(e).map((function(e){return t===e})).getOr(!1)},onSetup:w(e,a)})},k=function(e,t,n,o,r,i){e.ui.registry.addToggleButton(t,{active:!1,tooltip:n,icon:"OL"===r?"ordered-list":"unordered-list",onSetup:w(e,r),onAction:function(){return e.execCommand(o)}})},N=function(e,t,n,o,r,i){i.length>1?T(e,t,n,o,r,i):k(e,t,n,o,r)},E=function(e){N(e,"numlist","Numbered list","InsertOrderedList","OL",a(e));N(e,"bullist","Bullet list","InsertUnorderedList","UL",s(e))};function A(){n.add("advlist",(function(e){if(e.hasPlugin("lists")){E(e);r(e)}else console.error("Please use the Lists plugin together with the Advanced List plugin.")}))}A()}()},1564:function(e,t,n){n(1565)},1565:function(e,t){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),n=tinymce.util.Tools.resolve("tinymce.util.Tools"),o=function(e){return e.getParam("allow_html_in_named_anchor",!1,"boolean")},r="a:not([href])",i=function(e){return!e},a=function(e){return e.getAttribute("id")||e.getAttribute("name")||""},s=function(e){return e&&"a"===e.nodeName.toLowerCase()},l=function(e){return s(e)&&!e.getAttribute("href")&&""!==a(e)},c=function(e){return l(e)&&!e.firstChild},u=function(e){var o=e.dom;t(o).walk(e.selection.getRng(),(function(e){n.each(e,(function(e){c(e)&&o.remove(e,!1)}))}))},d=function(e){return/^[A-Za-z][A-Za-z0-9\-:._]*$/.test(e)},f=function(e){return e.dom.getParent(e.selection.getStart(),r)},p=function(e){var t=f(e);return t?a(t):""},m=function(e,t){e.undoManager.transact((function(){o(e)||e.selection.collapse(!0);if(e.selection.isCollapsed())e.insertContent(e.dom.createHTML("a",{id:t}));else{u(e);e.formatter.remove("namedAnchor",null,null,!0);e.formatter.apply("namedAnchor",{value:t});e.addVisual()}}))},h=function(e,t,n){n.removeAttribute("name");n.id=t;e.addVisual();e.undoManager.add()},g=function(e,t){var n=f(e);n?h(e,t,n):m(e,t);e.focus()},b=function(e,t){if(d(t)){g(e,t);return!0}e.windowManager.alert("Id should start with a letter, followed only by letters, numbers, dashes, dots, colons or underscores.");return!1},v=function(e){var t=p(e);e.windowManager.open({title:"Anchor",size:"normal",body:{type:"panel",items:[{name:"id",type:"input",label:"ID",placeholder:"example"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:{id:t},onSubmit:function(t){b(e,t.getData().id)&&t.close()}})},y=function(e){e.addCommand("mceAnchor",(function(){v(e)}))},C=function(e){return e&&i(e.attr("href"))&&!i(e.attr("id")||e.attr("name"))},O=function(e){return C(e)&&!e.firstChild},x=function(e){return function(t){for(var n=0;n<t.length;n++){var o=t[n];O(o)&&o.attr("contenteditable",e)}}},j=function(e){e.on("PreInit",(function(){e.parser.addNodeFilter("a",x("false"));e.serializer.addNodeFilter("a",x(null))}))},S=function(e){e.formatter.register("namedAnchor",{inline:"a",selector:r,remove:"all",split:!0,deep:!0,attributes:{id:"%value"},onmatch:function(e,t,n){return l(e)}})},w=function(e){e.ui.registry.addToggleButton("anchor",{icon:"bookmark",tooltip:"Anchor",onAction:function(){return e.execCommand("mceAnchor")},onSetup:function(t){return e.selection.selectorChangedWithUnbind("a:not([href])",t.setActive).unbind}});e.ui.registry.addMenuItem("anchor",{icon:"bookmark",text:"Anchor...",onAction:function(){return e.execCommand("mceAnchor")}})};function T(){e.add("anchor",(function(e){j(e);y(e);w(e);e.on("PreInit",(function(){S(e)}))}))}T()}()},1566:function(e,t,n){n(1567)},1567:function(e,t){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=function(e,t,n){return""===t||e.length>=t.length&&e.substr(n,n+t.length)===t},n=function(e,t){return-1!==e.indexOf(t)},o=function(e,n){return t(e,n,0)},r=tinymce.util.Tools.resolve("tinymce.Env"),i=new RegExp("^"+function(){return/(?:[A-Za-z][A-Za-z\d.+-]{0,14}:\/\/(?:[-.~*+=!&;:'%@?^${}(),\w]+@)?|www\.|[-;:&=+$,.\w]+@)[A-Za-z\d-]+(?:\.[A-Za-z\d-]+)*(?::\d+)?(?:\/(?:[-.~*+=!;:'%@$(),\/\w]*[-~*+=%@$()\/\w])?)?(?:\?(?:[-.~*+=!&;:'%@?^${}(),\/\w]+))?(?:#(?:[-.~*+=!&;:'%@?^${}(),\/\w]+))?/g}().source+"$","i"),a=function(e){return e.getParam("autolink_pattern",i)},s=function(e){return e.getParam("default_link_target",!1)},l=function(e){return e.getParam("link_default_protocol","http","string")},c=function(e){return/^[(\[{ \u00a0]$/.test(e)},u=function(e){return 3===e.nodeType},d=function(e){return 1===e.nodeType},f=function(e){return C(e,-1)},p=function(e){return C(e,0)},m=function(e){return C(e,-1)},h=function(e,t){t<0&&(t=0);if(u(e)){var n=e.data.length;t>n&&(t=n)}return t},g=function(e,t,n){!d(t)||t.hasChildNodes()?e.setStart(t,h(t,n)):e.setStartBefore(t)},b=function(e,t,n){!d(t)||t.hasChildNodes()?e.setEnd(t,h(t,n)):e.setEndAfter(t)},v=function(e){return/^([A-Za-z][A-Za-z\d.+-]*:\/\/)|mailto:/.test(e)},y=function(e){return/[?!,.;:]/.test(e)},C=function(e,t){var r,i,d,f,p,m,h,C=a(e),O=s(e);if(null===e.dom.getParent(e.selection.getNode(),"a[href]")){var x=e.selection.getRng().cloneRange();if(x.startOffset<5){if(!(p=x.endContainer.previousSibling)){if(!x.endContainer.firstChild||!x.endContainer.firstChild.nextSibling)return;p=x.endContainer.firstChild.nextSibling}m=p.length;g(x,p,m);b(x,p,m);if(x.endOffset<5)return;r=x.endOffset;i=p}else{i=x.endContainer;if(!u(i)&&i.firstChild){for(;!u(i)&&i.firstChild;)i=i.firstChild;if(u(i)){g(x,i,0);b(x,i,i.nodeValue.length)}}r=1===x.endOffset?2:x.endOffset-1-t}var j=r;do{g(x,i,r>=2?r-2:0);b(x,i,r>=1?r-1:0);r-=1;h=x.toString()}while(!c(h)&&r-2>=0);if(c(x.toString())){g(x,i,r);b(x,i,j);r+=1}else if(0===x.startOffset){g(x,i,0);b(x,i,j)}else{g(x,i,r);b(x,i,j)}f=x.toString();y(f.charAt(f.length-1))&&b(x,i,j-1);var S=(f=x.toString().trim()).match(C),w=l(e);if(S){var T=S[0];o(T,"www.")?T=w+"://"+T:n(T,"@")&&!v(T)&&(T="mailto:"+T);d=e.selection.getBookmark();e.selection.setRng(x);e.execCommand("createlink",!1,T);!1!==O&&e.dom.setAttrib(e.selection.getNode(),"target",O);e.selection.moveToBookmark(d);e.nodeChanged()}}},O=function(e){var t;e.on("keydown",(function(t){if(13===t.keyCode)return m(e)}));if(r.browser.isIE())e.on("focus",(function(){if(!t){t=!0;try{e.execCommand("AutoUrlDetect",!1,!0)}catch(e){}}}));else{e.on("keypress",(function(t){if(41===t.keyCode||93===t.keyCode||125===t.keyCode)return f(e)}));e.on("keyup",(function(t){if(32===t.keyCode)return p(e)}))}};function x(){e.add("autolink",(function(e){O(e)}))}x()}()},1568:function(e,t,n){n(1569)},1569:function(e,t){!function(){"use strict";var e,t,n=tinymce.util.Tools.resolve("tinymce.PluginManager"),o=function(e,t){return e.fire("insertCustomChar",{chr:t})},r=function(e,t){var n=o(e,t).chr;e.execCommand("mceInsertContent",!1,n)},i=function(e){var t=typeof e;return null===e?"null":"object"===t&&(Array.prototype.isPrototypeOf(e)||e.constructor&&"Array"===e.constructor.name)?"array":"object"===t&&(String.prototype.isPrototypeOf(e)||e.constructor&&"String"===e.constructor.name)?"string":t},a=function(e){return function(t){return e===t}},s=function(e){return function(t){return i(t)===e}}("array"),l=a(null),c=function(){},u=function(e){return function(){return e}},d=function(e){return e},f=u(!1),p=u(!0),m=function(){return h},h={fold:function(e,t){return e()},isSome:f,isNone:p,getOr:t=d,getOrThunk:e=function(e){return e()},getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:u(null),getOrUndefined:u(void 0),or:t,orThunk:e,map:m,each:c,bind:m,exists:f,forall:p,filter:function(){return m()},toArray:function(){return[]},toString:u("none()")},g=function(e){var t=u(e),n=function(){return r},o=function(t){return t(e)},r={fold:function(t,n){return n(e)},isSome:p,isNone:f,getOr:t,getOrThunk:t,getOrDie:t,getOrNull:t,getOrUndefined:t,or:n,orThunk:n,map:function(t){return g(t(e))},each:function(t){t(e)},bind:o,exists:o,forall:o,filter:function(t){return t(e)?r:h},toArray:function(){return[e]},toString:function(){return"some("+e+")"}};return r},b=function(e){return null==e?h:g(e)},v={some:g,none:m,from:b},y=Array.prototype.push,C=function(e,t){for(var n=e.length,o=new Array(n),r=0;r<n;r++){var i=e[r];o[r]=t(i,r)}return o},O=function(e,t){for(var n=0,o=e.length;n<o;n++){t(e[n],n)}},x=function(e,t,n){for(var o=0,r=e.length;o<r;o++){var i=e[o];if(t(i,o))return v.some(i);if(n(i,o))break}return v.none()},j=function(e,t){return x(e,t,f)},S=function(e){for(var t=[],n=0,o=e.length;n<o;++n){if(!s(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);y.apply(t,e[n])}return t},w=function(e,t){return S(C(e,t))},T=tinymce.util.Tools.resolve("tinymce.util.Tools"),k=function(e){return e.getParam("charmap")},N=function(e){return e.getParam("charmap_append")},E=T.isArray,A="User Defined",I=function(){return[{name:"Currency",characters:[[36,"dollar sign"],[162,"cent sign"],[8364,"euro sign"],[163,"pound sign"],[165,"yen sign"],[164,"currency sign"],[8352,"euro-currency sign"],[8353,"colon sign"],[8354,"cruzeiro sign"],[8355,"french franc sign"],[8356,"lira sign"],[8357,"mill sign"],[8358,"naira sign"],[8359,"peseta sign"],[8360,"rupee sign"],[8361,"won sign"],[8362,"new sheqel sign"],[8363,"dong sign"],[8365,"kip sign"],[8366,"tugrik sign"],[8367,"drachma sign"],[8368,"german penny symbol"],[8369,"peso sign"],[8370,"guarani sign"],[8371,"austral sign"],[8372,"hryvnia sign"],[8373,"cedi sign"],[8374,"livre tournois sign"],[8375,"spesmilo sign"],[8376,"tenge sign"],[8377,"indian rupee sign"],[8378,"turkish lira sign"],[8379,"nordic mark sign"],[8380,"manat sign"],[8381,"ruble sign"],[20870,"yen character"],[20803,"yuan character"],[22291,"yuan character, in hong kong and taiwan"],[22278,"yen/yuan character variant one"]]},{name:"Text",characters:[[169,"copyright sign"],[174,"registered sign"],[8482,"trade mark sign"],[8240,"per mille sign"],[181,"micro sign"],[183,"middle dot"],[8226,"bullet"],[8230,"three dot leader"],[8242,"minutes / feet"],[8243,"seconds / inches"],[167,"section sign"],[182,"paragraph sign"],[223,"sharp s / ess-zed"]]},{name:"Quotations",characters:[[8249,"single left-pointing angle quotation mark"],[8250,"single right-pointing angle quotation mark"],[171,"left pointing guillemet"],[187,"right pointing guillemet"],[8216,"left single quotation mark"],[8217,"right single quotation mark"],[8220,"left double quotation mark"],[8221,"right double quotation mark"],[8218,"single low-9 quotation mark"],[8222,"double low-9 quotation mark"],[60,"less-than sign"],[62,"greater-than sign"],[8804,"less-than or equal to"],[8805,"greater-than or equal to"],[8211,"en dash"],[8212,"em dash"],[175,"macron"],[8254,"overline"],[164,"currency sign"],[166,"broken bar"],[168,"diaeresis"],[161,"inverted exclamation mark"],[191,"turned question mark"],[710,"circumflex accent"],[732,"small tilde"],[176,"degree sign"],[8722,"minus sign"],[177,"plus-minus sign"],[247,"division sign"],[8260,"fraction slash"],[215,"multiplication sign"],[185,"superscript one"],[178,"superscript two"],[179,"superscript three"],[188,"fraction one quarter"],[189,"fraction one half"],[190,"fraction three quarters"]]},{name:"Mathematical",characters:[[402,"function / florin"],[8747,"integral"],[8721,"n-ary sumation"],[8734,"infinity"],[8730,"square root"],[8764,"similar to"],[8773,"approximately equal to"],[8776,"almost equal to"],[8800,"not equal to"],[8801,"identical to"],[8712,"element of"],[8713,"not an element of"],[8715,"contains as member"],[8719,"n-ary product"],[8743,"logical and"],[8744,"logical or"],[172,"not sign"],[8745,"intersection"],[8746,"union"],[8706,"partial differential"],[8704,"for all"],[8707,"there exists"],[8709,"diameter"],[8711,"backward difference"],[8727,"asterisk operator"],[8733,"proportional to"],[8736,"angle"]]},{name:"Extended Latin",characters:[[192,"A - grave"],[193,"A - acute"],[194,"A - circumflex"],[195,"A - tilde"],[196,"A - diaeresis"],[197,"A - ring above"],[256,"A - macron"],[198,"ligature AE"],[199,"C - cedilla"],[200,"E - grave"],[201,"E - acute"],[202,"E - circumflex"],[203,"E - diaeresis"],[274,"E - macron"],[204,"I - grave"],[205,"I - acute"],[206,"I - circumflex"],[207,"I - diaeresis"],[298,"I - macron"],[208,"ETH"],[209,"N - tilde"],[210,"O - grave"],[211,"O - acute"],[212,"O - circumflex"],[213,"O - tilde"],[214,"O - diaeresis"],[216,"O - slash"],[332,"O - macron"],[338,"ligature OE"],[352,"S - caron"],[217,"U - grave"],[218,"U - acute"],[219,"U - circumflex"],[220,"U - diaeresis"],[362,"U - macron"],[221,"Y - acute"],[376,"Y - diaeresis"],[562,"Y - macron"],[222,"THORN"],[224,"a - grave"],[225,"a - acute"],[226,"a - circumflex"],[227,"a - tilde"],[228,"a - diaeresis"],[229,"a - ring above"],[257,"a - macron"],[230,"ligature ae"],[231,"c - cedilla"],[232,"e - grave"],[233,"e - acute"],[234,"e - circumflex"],[235,"e - diaeresis"],[275,"e - macron"],[236,"i - grave"],[237,"i - acute"],[238,"i - circumflex"],[239,"i - diaeresis"],[299,"i - macron"],[240,"eth"],[241,"n - tilde"],[242,"o - grave"],[243,"o - acute"],[244,"o - circumflex"],[245,"o - tilde"],[246,"o - diaeresis"],[248,"o slash"],[333,"o macron"],[339,"ligature oe"],[353,"s - caron"],[249,"u - grave"],[250,"u - acute"],[251,"u - circumflex"],[252,"u - diaeresis"],[363,"u - macron"],[253,"y - acute"],[254,"thorn"],[255,"y - diaeresis"],[563,"y - macron"],[913,"Alpha"],[914,"Beta"],[915,"Gamma"],[916,"Delta"],[917,"Epsilon"],[918,"Zeta"],[919,"Eta"],[920,"Theta"],[921,"Iota"],[922,"Kappa"],[923,"Lambda"],[924,"Mu"],[925,"Nu"],[926,"Xi"],[927,"Omicron"],[928,"Pi"],[929,"Rho"],[931,"Sigma"],[932,"Tau"],[933,"Upsilon"],[934,"Phi"],[935,"Chi"],[936,"Psi"],[937,"Omega"],[945,"alpha"],[946,"beta"],[947,"gamma"],[948,"delta"],[949,"epsilon"],[950,"zeta"],[951,"eta"],[952,"theta"],[953,"iota"],[954,"kappa"],[955,"lambda"],[956,"mu"],[957,"nu"],[958,"xi"],[959,"omicron"],[960,"pi"],[961,"rho"],[962,"final sigma"],[963,"sigma"],[964,"tau"],[965,"upsilon"],[966,"phi"],[967,"chi"],[968,"psi"],[969,"omega"]]},{name:"Symbols",characters:[[8501,"alef symbol"],[982,"pi symbol"],[8476,"real part symbol"],[978,"upsilon - hook symbol"],[8472,"Weierstrass p"],[8465,"imaginary part"]]},{name:"Arrows",characters:[[8592,"leftwards arrow"],[8593,"upwards arrow"],[8594,"rightwards arrow"],[8595,"downwards arrow"],[8596,"left right arrow"],[8629,"carriage return"],[8656,"leftwards double arrow"],[8657,"upwards double arrow"],[8658,"rightwards double arrow"],[8659,"downwards double arrow"],[8660,"left right double arrow"],[8756,"therefore"],[8834,"subset of"],[8835,"superset of"],[8836,"not a subset of"],[8838,"subset of or equal to"],[8839,"superset of or equal to"],[8853,"circled plus"],[8855,"circled times"],[8869,"perpendicular"],[8901,"dot operator"],[8968,"left ceiling"],[8969,"right ceiling"],[8970,"left floor"],[8971,"right floor"],[9001,"left-pointing angle bracket"],[9002,"right-pointing angle bracket"],[9674,"lozenge"],[9824,"black spade suit"],[9827,"black club suit"],[9829,"black heart suit"],[9830,"black diamond suit"],[8194,"en space"],[8195,"em space"],[8201,"thin space"],[8204,"zero width non-joiner"],[8205,"zero width joiner"],[8206,"left-to-right mark"],[8207,"right-to-left mark"]]}]},R=function(e){return T.grep(e,(function(e){return E(e)&&2===e.length}))},L=function(e){return E(e)?R(e):"function"==typeof e?e():[]},_=function(e,t){var n=k(e);n&&(t=[{name:A,characters:L(n)}]);var o=N(e);if(o){var r=T.grep(t,(function(e){return e.name===A}));if(r.length){r[0].characters=[].concat(r[0].characters).concat(L(o));return t}return t.concat({name:A,characters:L(o)})}return t},P=function(e){var t=_(e,I());return t.length>1?[{name:"All",characters:w(t,(function(e){return e.characters}))}].concat(t):t},M=function(e){return{getCharMap:function(){return P(e)},insertChar:function(t){r(e,t)}}},D=function(e){var t=e;return{get:function(){return t},set:function(e){t=e}}},B=function(e,t){var n=null,o=function(){if(!l(n)){clearTimeout(n);n=null}},r=function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];o();n=setTimeout((function(){n=null;e.apply(null,r)}),t)};return{cancel:o,throttle:r}},F=String.fromCodePoint,U=function(e,t){return-1!==e.indexOf(t)},V=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(F)return F.apply(void 0,e);for(var n=[],o=0,r="",i=0,a=e.length;i!==a;++i){var s=+e[i];if(!(s<1114111&&s>>>0===s))throw RangeError("Invalid code point: "+s);if(s<=65535)o=n.push(s);else{s-=65536;o=n.push(55296+(s>>10),s%1024+56320)}if(o>=16383){r+=String.fromCharCode.apply(null,n);n.length=0}}return r+String.fromCharCode.apply(null,n)},H=function(e,t,n){return!!U(V(e).toLowerCase(),n)||(U(t.toLowerCase(),n)||U(t.toLowerCase().replace(/\s+/g,""),n))},q=function(e,t){var n=[],o=t.toLowerCase();O(e.characters,(function(e){H(e[0],e[1],o)&&n.push(e)}));return C(n,(function(e){return{text:e[1],value:V(e[0]),icon:V(e[0])}}))},$="pattern",z=function(e,t){var n=function(){return[{label:"Search",type:"input",name:$},{type:"collection",name:"results"}]},o=function(){return C(t,(function(e){return{title:e.name,name:e.name,items:n()}}))},i=function(){return{type:"panel",items:n()}},a=function(){return{type:"tabpanel",tabs:o()}},s=1===t.length?D(A):D("All"),l=function(e,n){j(t,(function(e){return e.name===s.get()})).each((function(t){var o=q(t,n);e.setData({results:o})}))},c=B((function(e){var t=e.getData().pattern;l(e,t)}),40),u={title:"Special Character",size:"normal",body:1===t.length?i():a(),buttons:[{type:"cancel",name:"close",text:"Close",primary:!0}],initialData:{pattern:"",results:q(t[0],"")},onAction:function(t,n){if("results"===n.name){r(e,n.value);t.close()}},onTabChange:function(e,t){s.set(t.newTabName);c.throttle(e)},onChange:function(e,t){t.name===$&&c.throttle(e)}};e.windowManager.open(u).focus($)},W=function(e,t){e.addCommand("mceShowCharmap",(function(){z(e,t)}))},G=tinymce.util.Tools.resolve("tinymce.util.Promise"),K=function(e,t){e.ui.registry.addAutocompleter("charmap",{ch:":",columns:"auto",minChars:2,fetch:function(e,n){return new G((function(n,o){n(q(t,e))}))},onAction:function(t,n,o){e.selection.setRng(n);e.insertContent(o);t.hide()}})},Y=function(e){e.ui.registry.addButton("charmap",{icon:"insert-character",tooltip:"Special character",onAction:function(){return e.execCommand("mceShowCharmap")}});e.ui.registry.addMenuItem("charmap",{icon:"insert-character",text:"Special character...",onAction:function(){return e.execCommand("mceShowCharmap")}})};function X(){n.add("charmap",(function(e){var t=P(e);W(e,t);Y(e);K(e,t[0]);return M(e)}))}X()}()},1570:function(e,t,n){n(1571)},1571:function(e,t){!function(){"use strict";var e,t,n=tinymce.util.Tools.resolve("tinymce.PluginManager"),o=function(e){var t=typeof e;return null===e?"null":"object"===t&&(Array.prototype.isPrototypeOf(e)||e.constructor&&"Array"===e.constructor.name)?"array":"object"===t&&(String.prototype.isPrototypeOf(e)||e.constructor&&"String"===e.constructor.name)?"string":t},r=function(e){return function(t){return o(t)===e}},i=function(e){return function(t){return typeof t===e}},a=r("string"),s=r("object"),l=r("array"),c=i("boolean"),u=i("function"),d=i("number"),f=function(){},p=function(e){return function(){return e}},m=function(e){return e},h=function(e,t){return e===t},g=function(e){return function(t){return!e(t)}},b=p(!1),v=p(!0),y=function(){return C},C={fold:function(e,t){return e()},isSome:b,isNone:v,getOr:t=m,getOrThunk:e=function(e){return e()},getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:p(null),getOrUndefined:p(void 0),or:t,orThunk:e,map:y,each:f,bind:y,exists:b,forall:v,filter:function(){return y()},toArray:function(){return[]},toString:p("none()")},O=function(e){var t=p(e),n=function(){return r},o=function(t){return t(e)},r={fold:function(t,n){return n(e)},isSome:v,isNone:b,getOr:t,getOrThunk:t,getOrDie:t,getOrNull:t,getOrUndefined:t,or:n,orThunk:n,map:function(t){return O(t(e))},each:function(t){t(e)},bind:o,exists:o,forall:o,filter:function(t){return t(e)?r:C},toArray:function(){return[e]},toString:function(){return"some("+e+")"}};return r},x=function(e){return null==e?C:O(e)},j={some:O,none:y,from:x},S=Array.prototype.slice,w=Array.prototype.push,T=function(e,t){for(var n=e.length,o=new Array(n),r=0;r<n;r++){var i=e[r];o[r]=t(i,r)}return o},k=function(e,t){for(var n=0,o=e.length;n<o;n++){t(e[n],n)}},N=function(e,t){for(var n=[],o=0,r=e.length;o<r;o++){var i=e[o];t(i,o)&&n.push(i)}return n},E=function(e,t){if(0===e.length)return[];for(var n=t(e[0]),o=[],r=[],i=0,a=e.length;i<a;i++){var s=e[i],l=t(s);if(l!==n){o.push(r);r=[]}n=l;r.push(s)}0!==r.length&&o.push(r);return o},A=function(e,t,n){k(e,(function(e,o){n=t(n,e,o)}));return n},I=function(e,t,n){for(var o=0,r=e.length;o<r;o++){var i=e[o];if(t(i,o))return j.some(i);if(n(i,o))break}return j.none()},R=function(e,t){return I(e,t,b)},L=function(e){for(var t=[],n=0,o=e.length;n<o;++n){if(!l(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);w.apply(t,e[n])}return t},_=function(e,t){return L(T(e,t))},P=function(e){var t=S.call(e,0);t.reverse();return t},M=function(e,t){return t>=0&&t<e.length?j.some(e[t]):j.none()},D=function(e){return M(e,0)},B=function(e){return M(e,e.length-1)},F=function(e,t){for(var n=0;n<e.length;n++){var o=t(e[n],n);if(o.isSome())return o}return j.none()},U=function(){return(U=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)};function V(e,t,n){if(n||2===arguments.length)for(var o,r=0,i=t.length;r<i;r++)if(o||!(r in t)){o||(o=Array.prototype.slice.call(t,0,r));o[r]=t[r]}return e.concat(o||Array.prototype.slice.call(t))}var H=function(e){var t,n=!1;return function(){for(var o=[],r=0;r<arguments.length;r++)o[r]=arguments[r];if(!n){n=!0;t=e.apply(null,o)}return t}},q=function(e,t,n,o){var r=e.isiOS()&&!0===/ipad/i.test(n),i=e.isiOS()&&!r,a=e.isiOS()||e.isAndroid(),s=a||o("(pointer:coarse)"),l=r||!i&&a&&o("(min-device-width:768px)"),c=i||a&&!l,u=t.isSafari()&&e.isiOS()&&!1===/safari/i.test(n),d=!c&&!l&&!u;return{isiPad:p(r),isiPhone:p(i),isTablet:p(l),isPhone:p(c),isTouch:p(s),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:p(u),isDesktop:p(d)}},$=function(e,t){for(var n=0;n<e.length;n++){var o=e[n];if(o.test(t))return o}},z=function(e,t){var n=$(e,t);if(!n)return{major:0,minor:0};var o=function(e){return Number(t.replace(n,"$"+e))};return K(o(1),o(2))},W=function(e,t){var n=String(t).toLowerCase();return 0===e.length?G():z(e,n)},G=function(){return K(0,0)},K=function(e,t){return{major:e,minor:t}},Y={nu:K,detect:W,unknown:G},X=function(e,t){return F(t.brands,(function(t){var n=t.brand.toLowerCase();return R(e,(function(e){var t;return n===(null===(t=e.brand)||void 0===t?void 0:t.toLowerCase())})).map((function(e){return{current:e.name,version:Y.nu(parseInt(t.version,10),0)}}))}))},Z=function(e,t){var n=String(t).toLowerCase();return R(e,(function(e){return e.search(n)}))},Q=function(e,t){return Z(e,t).map((function(e){var n=Y.detect(e.versionRegexes,t);return{current:e.name,version:n}}))},J=function(e,t){return Z(e,t).map((function(e){var n=Y.detect(e.versionRegexes,t);return{current:e.name,version:n}}))},ee=function(e,t){return-1!==e.indexOf(t)},te=function(e){return function(t){return t.replace(e,"")}}(/^\s+|\s+$/g),ne=function(e){return e.length>0},oe=function(e){return!ne(e)},re=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,ie=function(e){return function(t){return ee(t,e)}},ae=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(e){return ee(e,"edge/")&&ee(e,"chrome")&&ee(e,"safari")&&ee(e,"applewebkit")}},{name:"Chrome",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,re],search:function(e){return ee(e,"chrome")&&!ee(e,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(e){return ee(e,"msie")||ee(e,"trident")}},{name:"Opera",versionRegexes:[re,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:ie("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:ie("firefox")},{name:"Safari",versionRegexes:[re,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(e){return(ee(e,"safari")||ee(e,"mobile/"))&&ee(e,"applewebkit")}}],se=[{name:"Windows",search:ie("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(e){return ee(e,"iphone")||ee(e,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:ie("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:ie("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:ie("linux"),versionRegexes:[]},{name:"Solaris",search:ie("sunos"),versionRegexes:[]},{name:"FreeBSD",search:ie("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:ie("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],le={browsers:p(ae),oses:p(se)},ce="Edge",ue="Chrome",de="IE",fe="Opera",pe="Firefox",me="Safari",he=function(){return ge({current:void 0,version:Y.unknown()})},ge=function(e){var t=e.current,n=e.version,o=function(e){return function(){return t===e}};return{current:t,version:n,isEdge:o(ce),isChrome:o(ue),isIE:o(de),isOpera:o(fe),isFirefox:o(pe),isSafari:o(me)}},be={unknown:he,nu:ge,edge:p(ce),chrome:p(ue),ie:p(de),opera:p(fe),firefox:p(pe),safari:p(me)},ve="Windows",ye="iOS",Ce="Android",Oe="Linux",xe="OSX",je="Solaris",Se="FreeBSD",we="ChromeOS",Te=function(){return ke({current:void 0,version:Y.unknown()})},ke=function(e){var t=e.current,n=e.version,o=function(e){return function(){return t===e}};return{current:t,version:n,isWindows:o(ve),isiOS:o(ye),isAndroid:o(Ce),isOSX:o(xe),isLinux:o(Oe),isSolaris:o(je),isFreeBSD:o(Se),isChromeOS:o(we)}},Ne={unknown:Te,nu:ke,windows:p(ve),ios:p(ye),android:p(Ce),linux:p(Oe),osx:p(xe),solaris:p(je),freebsd:p(Se),chromeos:p(we)},Ee={detect:function(e,t,n){var o=le.browsers(),r=le.oses(),i=t.bind((function(e){return X(o,e)})).orThunk((function(){return Q(o,e)})).fold(be.unknown,be.nu),a=J(r,e).fold(Ne.unknown,Ne.nu);return{browser:i,os:a,deviceType:q(a,i,e,n)}}},Ae=function(e){return window.matchMedia(e).matches},Ie=H((function(){return Ee.detect(navigator.userAgent,j.from(navigator.userAgentData),Ae)})),Re=function(){return Ie()},Le=function(e,t,n){return 0!=(e.compareDocumentPosition(t)&n)},_e=function(e,t){return Le(e,t,Node.DOCUMENT_POSITION_CONTAINED_BY)},Pe=1,Me=function(e,t){var n=(t||document).createElement("div");n.innerHTML=e;if(!n.hasChildNodes()||n.childNodes.length>1){console.error("HTML does not have a single root node",e);throw new Error("HTML must have a single root node")}return Fe(n.childNodes[0])},De=function(e,t){var n=(t||document).createElement(e);return Fe(n)},Be=function(e,t){var n=(t||document).createTextNode(e);return Fe(n)},Fe=function(e){if(null==e)throw new Error("Node cannot be null or undefined");return{dom:e}},Ue={fromHtml:Me,fromTag:De,fromText:Be,fromDom:Fe,fromPoint:function(e,t,n){return j.from(e.dom.elementFromPoint(t,n)).map(Fe)}},Ve=function(e,t){return e.dom===t.dom},He=function(e,t){var n=e.dom,o=t.dom;return n!==o&&n.contains(o)},qe=function(e,t){return _e(e.dom,t.dom)},$e=function(e,t){return Re().browser.isIE()?qe(e,t):He(e,t)},ze=function(e,t){var n=e.dom;if(n.nodeType!==Pe)return!1;var o=n;if(void 0!==o.matches)return o.matches(t);if(void 0!==o.msMatchesSelector)return o.msMatchesSelector(t);if(void 0!==o.webkitMatchesSelector)return o.webkitMatchesSelector(t);if(void 0!==o.mozMatchesSelector)return o.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")},We=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),Ge=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),Ke=tinymce.util.Tools.resolve("tinymce.util.VK"),Ye=Object.keys,Xe=function(e,t){for(var n=Ye(e),o=0,r=n.length;o<r;o++){var i=n[o];t(e[i],i)}},Ze=function(e){return function(t,n){e[n]=t}},Qe=function(e,t,n,o){var r={};Xe(e,(function(e,r){(t(e,r)?n:o)(e,r)}));return r},Je=function(e,t){var n={};Qe(e,t,Ze(n),f);return n};"undefined"!=typeof window?window:Function("return this;")();var et=function(e){return e.dom.nodeName.toLowerCase()},tt=function(e){return e.dom.nodeType},nt=function(e){return function(t){return tt(t)===e}}(Pe),ot=function(e){return function(t){return nt(t)&&et(t)===e}},rt=function(e,t,n){if(!(a(n)||c(n)||d(n))){console.error("Invalid call to Attribute.set. Key ",t,":: Value ",n,":: Element ",e);throw new Error("Attribute value was not simple")}e.setAttribute(t,n+"")},it=function(e,t){var n=e.dom;Xe(t,(function(e,t){rt(n,t,e)}))},at=function(e){return A(e.dom.attributes,(function(e,t){e[t.name]=t.value;return e}),{})},st=function(e){return j.from(e.dom.parentNode).map(Ue.fromDom)},lt=function(e){return T(e.dom.childNodes,Ue.fromDom)},ct=function(e,t){var n=e.dom.childNodes;return j.from(n[t]).map(Ue.fromDom)},ut=function(e){return ct(e,0)},dt=function(e){return ct(e,e.dom.childNodes.length-1)},ft=function(e,t){st(e).each((function(n){n.dom.insertBefore(t.dom,e.dom)}))},pt=function(e,t){e.dom.appendChild(t.dom)},mt=function(e,t){k(t,(function(t){ft(e,t)}))},ht=function(e,t){k(t,(function(t){pt(e,t)}))},gt=function(e){var t=e.dom;null!==t.parentNode&&t.parentNode.removeChild(t)},bt=function(e,t){return Ue.fromDom(e.dom.cloneNode(t))},vt=function(e){return bt(e,!0)},yt=function(e,t){var n=Ue.fromTag(t),o=at(e);it(n,o);return n},Ct=function(e,t){var n=yt(e,t);ft(e,n);var o=lt(e);ht(n,o);gt(e);return n},Ot=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),xt=tinymce.util.Tools.resolve("tinymce.util.Tools"),jt=function(e){return function(t){return t&&t.nodeName.toLowerCase()===e}},St=function(e){return function(t){return t&&e.test(t.nodeName)}},wt=function(e){return e&&3===e.nodeType},Tt=St(/^(OL|UL|DL)$/),kt=St(/^(OL|UL)$/),Nt=jt("ol"),Et=St(/^(LI|DT|DD)$/),At=St(/^(DT|DD)$/),It=St(/^(TH|TD)$/),Rt=jt("br"),Lt=function(e){return e.parentNode.firstChild===e},_t=function(e,t){return t&&!!e.schema.getTextBlockElements()[t.nodeName]},Pt=function(e,t){return e&&e.nodeName in t},Mt=function(e,t){return!!Rt(t)&&(e.isBlock(t.nextSibling)&&!Rt(t.previousSibling))},Dt=function(e,t,n){var o=e.isEmpty(t);return!(n&&e.select("span[data-mce-type=bookmark]",t).length>0)&&o},Bt=function(e,t){return e.isChildOf(t,e.getRoot())},Ft=function(e){return e.getParam("lists_indent_on_tab",!0)},Ut=function(e){var t=e.getParam("forced_root_block","p");return!1===t?"":!0===t?"p":t},Vt=function(e){return e.getParam("forced_root_block_attrs",{})},Ht=function(e,t){var n,o,r,i=e.dom,a=e.schema.getBlockElements(),s=i.createFragment(),l=Ut(e);if(l){(o=i.create(l)).tagName===l.toUpperCase()&&i.setAttribs(o,Vt(e));Pt(t.firstChild,a)||s.appendChild(o)}if(t)for(;n=t.firstChild;){var c=n.nodeName;r||"SPAN"===c&&"bookmark"===n.getAttribute("data-mce-type")||(r=!0);if(Pt(n,a)){s.appendChild(n);o=null}else if(l){if(!o){o=i.create(l);s.appendChild(o)}o.appendChild(n)}else s.appendChild(n)}l?r||o.appendChild(i.create("br",{"data-mce-bogus":"1"})):s.appendChild(i.create("br"));return s},qt=Ot.DOM,$t=function(e,t,n){var o=function(e){xt.each(r,(function(t){e.parentNode.insertBefore(t,n.parentNode)}));qt.remove(e)},r=qt.select('span[data-mce-type="bookmark"]',t),i=Ht(e,n),a=qt.createRng();a.setStartAfter(n);a.setEndAfter(t);for(var s=a.extractContents(),l=s.firstChild;l;l=l.firstChild)if("LI"===l.nodeName&&e.dom.isEmpty(l)){qt.remove(l);break}e.dom.isEmpty(s)||qt.insertAfter(s,t);qt.insertAfter(i,t);Dt(e.dom,n.parentNode)&&o(n.parentNode);qt.remove(n);Dt(e.dom,t)&&qt.remove(t)},zt=ot("dd"),Wt=ot("dt"),Gt=function(e,t){zt(t)?Ct(t,"dt"):Wt(t)&&st(t).each((function(n){return $t(e,n.dom,t.dom)}))},Kt=function(e){Wt(e)&&Ct(e,"dd")},Yt=function(e,t,n){k(n,"Indent"===t?Kt:function(t){return Gt(e,t)})},Xt=function(e,t){if(wt(e))return{container:e,offset:t};var n=We.getNode(e,t);return wt(n)?{container:n,offset:t>=e.childNodes.length?n.data.length:0}:n.previousSibling&&wt(n.previousSibling)?{container:n.previousSibling,offset:n.previousSibling.data.length}:n.nextSibling&&wt(n.nextSibling)?{container:n.nextSibling,offset:0}:{container:e,offset:t}},Zt=function(e){var t=e.cloneRange(),n=Xt(e.startContainer,e.startOffset);t.setStart(n.container,n.offset);var o=Xt(e.endContainer,e.endOffset);t.setEnd(o.container,o.offset);return t},Qt=tinymce.util.Tools.resolve("tinymce.dom.DomQuery"),Jt=function(e,t){var n=t||e.selection.getStart(!0);return e.dom.getParent(n,"OL,UL,DL",sn(e,n))},en=function(e,t){return e&&1===t.length&&t[0]===e},tn=function(e){return N(e.querySelectorAll("ol,ul,dl"),Tt)},nn=function(e){var t=Jt(e),n=e.selection.getSelectedBlocks();return en(t,n)?tn(t):N(n,(function(e){return Tt(e)&&t!==e}))},on=function(e,t){var n=xt.map(t,(function(t){var n=e.dom.getParent(t,"li,dd,dt",sn(e,t));return n||t}));return Qt.unique(n)},rn=function(e){var t=e.selection.getSelectedBlocks();return N(on(e,t),Et)},an=function(e){return N(rn(e),At)},sn=function(e,t){var n=e.dom.getParents(t,"TD,TH");return n.length>0?n[0]:e.getBody()},ln=function(e,t){var n=e.dom.getParents(t,"ol,ul",sn(e,t));return B(n)},cn=function(e){var t=ln(e,e.selection.getStart()),n=N(e.selection.getSelectedBlocks(),kt);return t.toArray().concat(n)},un=function(e){var t=cn(e);return dn(e,t)},dn=function(e,t){var n=T(t,(function(t){return ln(e,t).getOr(t)}));return Qt.unique(n)},fn=function(e,t,n){void 0===n&&(n=h);return e.exists((function(e){return n(e,t)}))},pn=function(e,t,n){return e.isSome()&&t.isSome()?j.some(n(e.getOrDie(),t.getOrDie())):j.none()},mn=function(e,t){var n=(t||document).createDocumentFragment();k(e,(function(e){n.appendChild(e.dom)}));return Ue.fromDom(n)},hn=function(e,t,n){return e.fire("ListMutation",{action:t,element:n})},gn=function(e){return void 0!==e.style&&u(e.style.getPropertyValue)},bn=function(e,t,n){if(!a(n)){console.error("Invalid call to CSS.set. Property ",t,":: Value ",n,":: Element ",e);throw new Error("CSS value must be a string: "+n)}gn(e)&&e.style.setProperty(t,n)},vn=function(e,t,n){var o=e.dom;bn(o,t,n)},yn=function(e,t){pt(e.item,t.list)},Cn=function(e){for(var t=1;t<e.length;t++)yn(e[t-1],e[t])},On=function(e,t){pn(B(e),D(t),yn)},xn=function(e,t){var n={list:Ue.fromTag(t,e),item:Ue.fromTag("li",e)};pt(n.list,n.item);return n},jn=function(e,t,n){for(var o=[],r=0;r<n;r++)o.push(xn(e,t.listType));return o},Sn=function(e,t){for(var n=0;n<e.length-1;n++)vn(e[n].item,"list-style-type","none");B(e).each((function(e){it(e.list,t.listAttributes);it(e.item,t.itemAttributes);ht(e.item,t.content)}))},wn=function(e,t){et(e.list)!==t.listType&&(e.list=Ct(e.list,t.listType));it(e.list,t.listAttributes)},Tn=function(e,t,n){var o=Ue.fromTag("li",e);it(o,t);ht(o,n);return o},kn=function(e,t){pt(e.list,t);e.item=t},Nn=function(e,t,n){var o=t.slice(0,n.depth);B(o).each((function(t){var o=Tn(e,n.itemAttributes,n.content);kn(t,o);wn(t,n)}));return o},En=function(e,t,n){var o=jn(e,n,n.depth-t.length);Cn(o);Sn(o,n);On(t,o);return t.concat(o)},An=function(e,t){var n=A(t,(function(t,n){return n.depth>t.length?En(e,t,n):Nn(e,t,n)}),[]);return D(n).map((function(e){return e.list}))},In=function(e){return ze(e,"OL,UL")},Rn=function(e){return ut(e).exists(In)},Ln=function(e){return dt(e).exists(In)},_n=function(e){return e.depth>0},Pn=function(e){return e.isSelected},Mn=function(e){var t=lt(e),n=Ln(e)?t.slice(0,-1):t;return T(n,vt)},Dn=function(e,t,n){return st(e).filter(nt).map((function(o){return{depth:t,dirty:!1,isSelected:n,content:Mn(e),itemAttributes:at(e),listAttributes:at(o),listType:et(o)}}))},Bn=function(e,t){switch(e){case"Indent":t.depth++;break;case"Outdent":t.depth--;break;case"Flatten":t.depth=0}t.dirty=!0},Fn=function(e,t){e.listType=t.listType;e.listAttributes=U({},t.listAttributes)},Un=function(e){e.listAttributes=Je(e.listAttributes,(function(e,t){return"start"!==t}))},Vn=function(e,t){var n=e[t].depth,o=function(e){return e.depth===n&&!e.dirty},r=function(e){return e.depth<n};return I(P(e.slice(0,t)),o,r).orThunk((function(){return I(e.slice(t+1),o,r)}))},Hn=function(e){k(e,(function(t,n){Vn(e,n).fold((function(){t.dirty&&Un(t)}),(function(e){return Fn(t,e)}))}));return e},qn=function(e){var t=e;return{get:function(){return t},set:function(e){t=e}}},$n=function(e,t,n,o){return ut(o).filter(In).fold((function(){t.each((function(e){Ve(e.start,o)&&n.set(!0)}));var r=Dn(o,e,n.get());t.each((function(e){Ve(e.end,o)&&n.set(!1)}));var i=dt(o).filter(In).map((function(o){return zn(e,t,n,o)})).getOr([]);return r.toArray().concat(i)}),(function(o){return zn(e,t,n,o)}))},zn=function(e,t,n,o){return _(lt(o),(function(o){return(In(o)?zn:$n)(e+1,t,n,o)}))},Wn=function(e,t){var n=qn(!1),o=0;return T(e,(function(e){return{sourceList:e,entries:zn(o,t,n,e)}}))},Gn=function(e,t){var n=Hn(t);return T(n,(function(t){var n=mn(t.content);return Ue.fromDom(Ht(e,n.dom))}))},Kn=function(e,t){var n=Hn(t);return An(e.contentDocument,n).toArray()},Yn=function(e,t){return _(E(t,_n),(function(t){return D(t).exists(_n)?Kn(e,t):Gn(e,t)}))},Xn=function(e,t){k(N(e,Pn),(function(e){return Bn(t,e)}))},Zn=function(e){var t=T(rn(e),Ue.fromDom);return pn(R(t,g(Rn)),R(P(t),g(Rn)),(function(e,t){return{start:e,end:t}}))},Qn=function(e,t,n){var o=Wn(t,Zn(e));k(o,(function(t){Xn(t.entries,n);var o=Yn(e,t.entries);k(o,(function(t){hn(e,"Indent"===n?"IndentList":"OutdentList",t.dom)}));mt(t.sourceList,o);gt(t.sourceList)}))},Jn=function(e,t){var n=T(un(e),Ue.fromDom),o=T(an(e),Ue.fromDom),r=!1;if(n.length||o.length){var i=e.selection.getBookmark();Qn(e,n,t);Yt(e,t,o);e.selection.moveToBookmark(i);e.selection.setRng(Zt(e.selection.getRng()));e.nodeChanged();r=!0}return r},eo=function(e){return Jn(e,"Indent")},to=function(e){return Jn(e,"Outdent")},no=function(e){return Jn(e,"Flatten")},oo=tinymce.util.Tools.resolve("tinymce.dom.BookmarkManager"),ro=Ot.DOM,io=function(e){var t={},n=function(n){var o=e[n?"startContainer":"endContainer"],r=e[n?"startOffset":"endOffset"];if(1===o.nodeType){var i=ro.create("span",{"data-mce-type":"bookmark"});if(o.hasChildNodes()){r=Math.min(r,o.childNodes.length-1);n?o.insertBefore(i,o.childNodes[r]):ro.insertAfter(i,o.childNodes[r])}else o.appendChild(i);o=i;r=0}t[n?"startContainer":"endContainer"]=o;t[n?"startOffset":"endOffset"]=r};n(!0);e.collapsed||n();return t},ao=function(e){var t=function(t){var n,o=function(e){for(var t=e.parentNode.firstChild,n=0;t;){if(t===e)return n;1===t.nodeType&&"bookmark"===t.getAttribute("data-mce-type")||n++;t=t.nextSibling}return-1},r=n=e[t?"startContainer":"endContainer"],i=e[t?"startOffset":"endOffset"];if(r){if(1===r.nodeType){i=o(r);r=r.parentNode;ro.remove(n);!r.hasChildNodes()&&ro.isBlock(r)&&r.appendChild(ro.create("br"))}e[t?"startContainer":"endContainer"]=r;e[t?"startOffset":"endOffset"]=i}};t(!0);t();var n=ro.createRng();n.setStart(e.startContainer,e.startOffset);e.endContainer&&n.setEnd(e.endContainer,e.endOffset);return Zt(n)},so=function(e){switch(e){case"UL":return"ToggleUlList";case"OL":return"ToggleOlList";case"DL":return"ToggleDLList"}},lo=function(e){return/\btox\-/.test(e.className)},co=function(e,t,n){var o=function(e){var o=I(e.parents,Tt,It).filter((function(e){return e.nodeName===t&&!lo(e)})).isSome();n(o)},r=e.dom.getParents(e.selection.getNode());o({parents:r});e.on("NodeChange",o);return function(){return e.off("NodeChange",o)}},uo=function(e,t,n){var o=n["list-style-type"]?n["list-style-type"]:null;e.setStyle(t,"list-style-type",o)},fo=function(e,t){xt.each(t,(function(t,n){e.setAttribute(n,t)}))},po=function(e,t,n){fo(t,n["list-attributes"]);xt.each(e.select("li",t),(function(e){fo(e,n["list-item-attributes"])}))},mo=function(e,t,n){uo(e,t,n);po(e,t,n)},ho=function(e,t,n){xt.each(n,(function(n){var o;return e.setStyle(t,((o={})[n]="",o))}))},go=function(e,t,n,o){var r=t[n?"startContainer":"endContainer"],i=t[n?"startOffset":"endOffset"];1===r.nodeType&&(r=r.childNodes[Math.min(i,r.childNodes.length-1)]||r);!n&&Rt(r.nextSibling)&&(r=r.nextSibling);for(;r.parentNode!==o;){if(_t(e,r))return r;if(/^(TD|TH)$/.test(r.parentNode.nodeName))return r;r=r.parentNode}return r},bo=function(e,t,n){for(var o,r=[],i=e.dom,a=go(e,t,!0,n),s=go(e,t,!1,n),l=[],c=a;c;c=c.nextSibling){l.push(c);if(c===s)break}xt.each(l,(function(t){if(_t(e,t)){r.push(t);o=null}else if(i.isBlock(t)||Rt(t)){Rt(t)&&i.remove(t);o=null}else{var a=t.nextSibling;if(oo.isBookmarkNode(t)&&(Tt(a)||_t(e,a)||!a&&t.parentNode===n))o=null;else{if(!o){o=i.create("p");t.parentNode.insertBefore(o,t);r.push(o)}o.appendChild(t)}}}));return r},vo=function(e,t,n){var o=e.getStyle(t,"list-style-type"),r=n?n["list-style-type"]:"";return o===(r=null===r?"":r)},yo=function(e,t,n){var o=e.selection.getRng(),r="LI",i=sn(e,e.selection.getStart(!0)),a=e.dom;if("false"!==a.getContentEditable(e.selection.getNode())){"DL"===(t=t.toUpperCase())&&(r="DT");var s=io(o),l=bo(e,o,i);xt.each(l,(function(o){var i,s=o.previousSibling,l=o.parentNode;if(!Et(l)){if(s&&Tt(s)&&s.nodeName===t&&vo(a,s,n)){i=s;o=a.rename(o,r);s.appendChild(o)}else{i=a.create(t);o.parentNode.insertBefore(i,o);i.appendChild(o);o=a.rename(o,r)}ho(a,o,["margin","margin-right","margin-bottom","margin-left","margin-top","padding","padding-right","padding-bottom","padding-left","padding-top"]);mo(a,i,n);So(e.dom,i)}}));e.selection.setRng(ao(s))}},Co=function(e,t){return e&&t&&Tt(e)&&e.nodeName===t.nodeName},Oo=function(e,t,n){return e.getStyle(t,"list-style-type",!0)===e.getStyle(n,"list-style-type",!0)},xo=function(e,t){return e.className===t.className},jo=function(e,t,n){return Co(t,n)&&Oo(e,t,n)&&xo(t,n)},So=function(e,t){var n,o;n=t.nextSibling;if(jo(e,t,n)){for(;o=n.firstChild;)t.appendChild(o);e.remove(n)}n=t.previousSibling;if(jo(e,t,n)){for(;o=n.lastChild;)t.insertBefore(o,t.firstChild);e.remove(n)}},wo=function(e,t,n,o){if(t.nodeName!==n){var r=e.dom.rename(t,n);mo(e.dom,r,o);hn(e,so(n),r)}else{mo(e.dom,t,o);hn(e,so(n),t)}},To=function(e,t,n,o,r){var i=Tt(t);if(i&&t.nodeName===o&&!ko(r))no(e);else{yo(e,o,r);var a=io(e.selection.getRng()),s=i?V([t],n,!0):n;xt.each(s,(function(t){wo(e,t,o,r)}));e.selection.setRng(ao(a))}},ko=function(e){return"list-style-type"in e},No=function(e,t,n,o){if(t!==e.getBody())if(t)if(t.nodeName!==n||ko(o)||lo(t)){var r=io(e.selection.getRng());mo(e.dom,t,o);var i=e.dom.rename(t,n);So(e.dom,i);e.selection.setRng(ao(r));yo(e,n,o);hn(e,so(n),i)}else no(e);else{yo(e,n,o);hn(e,so(n),t)}},Eo=function(e,t,n){var o=Jt(e),r=nn(e),i=s(n)?n:{};r.length>0?To(e,o,r,t,i):No(e,o,t,i)},Ao=Ot.DOM,Io=function(e,t){var n=t.parentNode;if("LI"===n.nodeName&&n.firstChild===t){if((o=n.previousSibling)&&"LI"===o.nodeName){o.appendChild(t);Dt(e,n)&&Ao.remove(n)}else Ao.setStyle(n,"listStyleType","none")}if(Tt(n)){var o;(o=n.previousSibling)&&"LI"===o.nodeName&&o.appendChild(t)}},Ro=function(e,t){var n=xt.grep(e.select("ol,ul",t));xt.each(n,(function(t){Io(e,t)}))},Lo=function(e,t,n,o){var r=t.startContainer,i=t.startOffset;if(wt(r)&&(n?i<r.data.length:i>0))return r;var a=e.schema.getNonEmptyElements();1===r.nodeType&&(r=We.getNode(r,i));var s=new Ge(r,o);n&&Mt(e.dom,r)&&s.next();for(;r=s[n?"next":"prev2"]();){if("LI"===r.nodeName&&!r.hasChildNodes())return r;if(a[r.nodeName])return r;if(wt(r)&&r.data.length>0)return r}},_o=function(e,t){var n=t.childNodes;return 1===n.length&&!Tt(n[0])&&e.isBlock(n[0])},Po=function(e,t){_o(e,t)&&e.remove(t.firstChild,!0)},Mo=function(e,t,n){var o,r=_o(e,n)?n.firstChild:n;Po(e,t);if(!Dt(e,t,!0))for(;o=t.firstChild;)r.appendChild(o)},Do=function(e,t,n){var o,r=t.parentNode;if(Bt(e,t)&&Bt(e,n)){Tt(n.lastChild)&&(o=n.lastChild);r===n.lastChild&&Rt(r.previousSibling)&&e.remove(r.previousSibling);var i=n.lastChild;i&&Rt(i)&&t.hasChildNodes()&&e.remove(i);Dt(e,n,!0)&&e.$(n).empty();Mo(e,t,n);o&&n.appendChild(o);var a=$e(Ue.fromDom(n),Ue.fromDom(t))?e.getParents(t,Tt,n):[];e.remove(t);k(a,(function(t){Dt(e,t)&&t!==e.getRoot()&&e.remove(t)}))}},Bo=function(e,t,n){e.dom.$(n).empty();Do(e.dom,t,n);e.selection.setCursorLocation(n,0)},Fo=function(e,t,n,o){var r=e.dom;if(r.isEmpty(o))Bo(e,n,o);else{var i=io(t);Do(r,n,o);e.selection.setRng(ao(i))}},Uo=function(e,t,n,o){var r=io(t);Do(e.dom,n,o);var i=ao(r);e.selection.setRng(i)},Vo=function(e,t){var n=e.dom,o=e.selection,r=o.getStart(),i=sn(e,r),a=n.getParent(o.getStart(),"LI",i);if(a){var s=a.parentNode;if(s===e.getBody()&&Dt(n,s))return!0;var l=Zt(o.getRng()),c=n.getParent(Lo(e,l,t,i),"LI",i);if(c&&c!==a){e.undoManager.transact((function(){t?Fo(e,l,c,a):Lt(a)?to(e):Uo(e,l,a,c)}));return!0}if(!c&&!t&&0===l.startOffset&&0===l.endOffset){e.undoManager.transact((function(){no(e)}));return!0}}return!1},Ho=function(e,t,n){var o=e.getParent(t.parentNode,e.isBlock,n);e.remove(t);o&&e.isEmpty(o)&&e.remove(o)},qo=function(e,t){var n=e.dom,o=e.selection.getStart(),r=sn(e,o),i=n.getParent(o,n.isBlock,r);if(i&&n.isEmpty(i)){var a=Zt(e.selection.getRng()),s=n.getParent(Lo(e,a,t,r),"LI",r);if(s){e.undoManager.transact((function(){Ho(n,i,r);So(n,s.parentNode);e.selection.select(s,!0);e.selection.collapse(t)}));return!0}}return!1},$o=function(e,t){return Vo(e,t)||qo(e,t)},zo=function(e){var t=e.selection.getStart(),n=sn(e,t);if(e.dom.getParent(t,"LI,DT,DD",n)||rn(e).length>0){e.undoManager.transact((function(){e.execCommand("Delete");Ro(e.dom,e.getBody())}));return!0}return!1},Wo=function(e,t){return e.selection.isCollapsed()?$o(e,t):zo(e)},Go=function(e){e.on("keydown",(function(t){t.keyCode===Ke.BACKSPACE?Wo(e,!1)&&t.preventDefault():t.keyCode===Ke.DELETE&&Wo(e,!0)&&t.preventDefault()}))},Ko=function(e){return{backspaceDelete:function(t){Wo(e,t)}}},Yo=function(e,t){var n=Jt(e);e.undoManager.transact((function(){s(t.styles)&&e.dom.setStyles(n,t.styles);s(t.attrs)&&Xe(t.attrs,(function(t,o){return e.dom.setAttrib(n,o,t)}))}))},Xo=function(e){var t=P(te(e).split("")),n=T(t,(function(e,t){var n=e.toUpperCase().charCodeAt(0)-"A".charCodeAt(0)+1;return Math.pow(26,t)*n}));return A(n,(function(e,t){return e+t}),0)},Zo=function(e){if(--e<0)return"";var t=e%26,n=Math.floor(e/26);return Zo(n)+String.fromCharCode("A".charCodeAt(0)+t)},Qo=function(e){return/^[A-Z]+$/.test(e)},Jo=function(e){return/^[a-z]+$/.test(e)},er=function(e){return/^[0-9]+$/.test(e)},tr=function(e){return er(e)?2:Qo(e)?0:Jo(e)?1:oe(e)?3:4},nr=function(e){switch(tr(e)){case 2:return j.some({listStyleType:j.none(),start:e});case 0:return j.some({listStyleType:j.some("upper-alpha"),start:Xo(e).toString()});case 1:return j.some({listStyleType:j.some("lower-alpha"),start:Xo(e).toString()});case 3:return j.some({listStyleType:j.none(),start:""});case 4:return j.none()}},or=function(e){var t=parseInt(e.start,10);return fn(e.listStyleType,"upper-alpha")?Zo(t):fn(e.listStyleType,"lower-alpha")?Zo(t).toLowerCase():e.start},rr=function(e){var t=Jt(e);Nt(t)&&e.windowManager.open({title:"List Properties",body:{type:"panel",items:[{type:"input",name:"start",label:"Start list at number",inputMode:"numeric"}]},initialData:{start:or({start:e.dom.getAttrib(t,"start","1"),listStyleType:j.some(e.dom.getStyle(t,"list-style-type"))})},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:function(t){var n=t.getData();nr(n.start).each((function(t){e.execCommand("mceListUpdate",!1,{attrs:{start:"1"===t.start?"":t.start},styles:{"list-style-type":t.listStyleType.getOr("")}})}));t.close()}})},ir=function(e,t){return function(){var n=Jt(e);return n&&n.nodeName===t}},ar=function(e){e.addCommand("mceListProps",(function(){rr(e)}))},sr=function(e){e.on("BeforeExecCommand",(function(t){var n=t.command.toLowerCase();"indent"===n?eo(e):"outdent"===n&&to(e)}));e.addCommand("InsertUnorderedList",(function(t,n){Eo(e,"UL",n)}));e.addCommand("InsertOrderedList",(function(t,n){Eo(e,"OL",n)}));e.addCommand("InsertDefinitionList",(function(t,n){Eo(e,"DL",n)}));e.addCommand("RemoveList",(function(){no(e)}));ar(e);e.addCommand("mceListUpdate",(function(t,n){s(n)&&Yo(e,n)}));e.addQueryStateHandler("InsertUnorderedList",ir(e,"UL"));e.addQueryStateHandler("InsertOrderedList",ir(e,"OL"));e.addQueryStateHandler("InsertDefinitionList",ir(e,"DL"))},lr=function(e){e.on("keydown",(function(t){t.keyCode!==Ke.TAB||Ke.metaKeyPressed(t)||e.undoManager.transact((function(){(t.shiftKey?to(e):eo(e))&&t.preventDefault()}))}))},cr=function(e){Ft(e)&&lr(e);Go(e)},ur=function(e){var t=function(t){return function(){return e.execCommand(t)}};if(!e.hasPlugin("advlist")){e.ui.registry.addToggleButton("numlist",{icon:"ordered-list",active:!1,tooltip:"Numbered list",onAction:t("InsertOrderedList"),onSetup:function(t){return co(e,"OL",t.setActive)}});e.ui.registry.addToggleButton("bullist",{icon:"unordered-list",active:!1,tooltip:"Bullet list",onAction:t("InsertUnorderedList"),onSetup:function(t){return co(e,"UL",t.setActive)}})}},dr=function(e){var t={text:"List properties...",icon:"ordered-list",onAction:function(){return e.execCommand("mceListProps")},onSetup:function(t){return co(e,"OL",(function(e){return t.setDisabled(!e)}))}};e.ui.registry.addMenuItem("listprops",t);e.ui.registry.addContextMenu("lists",{update:function(t){var n=Jt(e,t);return Nt(n)?["listprops"]:[]}})};function fr(){n.add("lists",(function(e){if(!1===e.hasPlugin("rtc",!0)){cr(e);sr(e)}else ar(e);ur(e);dr(e);return Ko(e)}))}fr()}()},1572:function(e,t,n){n(1573)},1573:function(e,t){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=tinymce.util.Tools.resolve("tinymce.util.Tools"),n=function(e){return e.getParam("noneditable_noneditable_class","mceNonEditable")},o=function(e){return e.getParam("noneditable_editable_class","mceEditable")},r=function(e){var t=e.getParam("noneditable_regexp",[]);return t&&t.constructor===RegExp?[t]:t},i=function(e){return function(t){return-1!==(" "+t.attr("class")+" ").indexOf(e)}},a=function(e,t,n){return function(o){var r=arguments,i=r[r.length-2],a=i>0?t.charAt(i-1):"";if('"'===a)return o;if(">"===a){var s=t.lastIndexOf("<",i);if(-1!==s){if(-1!==t.substring(s,i).indexOf('contenteditable="false"'))return o}}return'<span class="'+n+'" data-mce-content="'+e.dom.encode(r[0])+'">'+e.dom.encode("string"==typeof r[1]?r[1]:r[0])+"</span>"}},s=function(e,t,o){var r=t.length,i=o.content;if("raw"!==o.format){for(;r--;)i=i.replace(t[r],a(e,i,n(e)));o.content=i}},l=function(e){var a="contenteditable",l=" "+t.trim(o(e))+" ",c=" "+t.trim(n(e))+" ",u=i(l),d=i(c),f=r(e);e.on("PreInit",(function(){f.length>0&&e.on("BeforeSetContent",(function(t){s(e,f,t)}));e.parser.addAttributeFilter("class",(function(e){for(var t,n=e.length;n--;){t=e[n];u(t)?t.attr(a,"true"):d(t)&&t.attr(a,"false")}}));e.serializer.addAttributeFilter(a,(function(e){for(var t,n=e.length;n--;){t=e[n];if(u(t)||d(t))if(f.length>0&&t.attr("data-mce-content")){t.name="#text";t.type=3;t.raw=!0;t.value=t.attr("data-mce-content")}else t.attr(a,null)}}))}))};function c(){e.add("noneditable",(function(e){l(e)}))}c()}()},1574:function(e,t,n){n(1575)},1575:function(e,t){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=tinymce.util.Tools.resolve("tinymce.Env"),n=function(e){e.addCommand("mcePrint",(function(){t.browser.isIE()?e.getDoc().execCommand("print",!1,null):e.getWin().print()}))},o=function(e){var t=function(){return e.execCommand("mcePrint")};e.ui.registry.addButton("print",{icon:"print",tooltip:"Print",onAction:t});e.ui.registry.addMenuItem("print",{text:"Print...",icon:"print",onAction:t})};function r(){e.add("print",(function(e){n(e);o(e);e.addShortcut("Meta+P","","mcePrint")}))}r()}()},1576:function(e,t,n){n(1577)},1577:function(e,t){!function(){"use strict";var e,t,n=function(e){var t=e;return{get:function(){return t},set:function(e){t=e}}},o=tinymce.util.Tools.resolve("tinymce.PluginManager"),r=function(){return(r=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)},i=function(e){var t=typeof e;return null===e?"null":"object"===t&&(Array.prototype.isPrototypeOf(e)||e.constructor&&"Array"===e.constructor.name)?"array":"object"===t&&(String.prototype.isPrototypeOf(e)||e.constructor&&"String"===e.constructor.name)?"string":t},a=function(e){return function(t){return i(t)===e}},s=function(e){return function(t){return typeof t===e}},l=a("string"),c=a("array"),u=s("boolean"),d=s("number"),f=function(){},p=function(e){return function(){return e}},m=function(e){return e},h=p(!1),g=p(!0),b=p("[!-#%-*,-\\/:;?@\\[-\\]_{};----------------------------------------------]"),v=function(){return y},y={fold:function(e,t){return e()},isSome:h,isNone:g,getOr:t=m,getOrThunk:e=function(e){return e()},getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:p(null),getOrUndefined:p(void 0),or:t,orThunk:e,map:v,each:f,bind:v,exists:h,forall:g,filter:function(){return v()},toArray:function(){return[]},toString:p("none()")},C=function(e){var t=p(e),n=function(){return r},o=function(t){return t(e)},r={fold:function(t,n){return n(e)},isSome:g,isNone:h,getOr:t,getOrThunk:t,getOrDie:t,getOrNull:t,getOrUndefined:t,or:n,orThunk:n,map:function(t){return C(t(e))},each:function(t){t(e)},bind:o,exists:o,forall:o,filter:function(t){return t(e)?r:y},toArray:function(){return[e]},toString:function(){return"some("+e+")"}};return r},O=function(e){return null==e?y:C(e)},x={some:C,none:v,from:O},j=b,S=tinymce.util.Tools.resolve("tinymce.Env"),w=tinymce.util.Tools.resolve("tinymce.util.Tools"),T=Array.prototype.slice,k=Array.prototype.push,N=function(e,t){for(var n=e.length,o=new Array(n),r=0;r<n;r++){var i=e[r];o[r]=t(i,r)}return o},E=function(e,t){for(var n=0,o=e.length;n<o;n++){t(e[n],n)}},A=function(e,t){for(var n=e.length-1;n>=0;n--){t(e[n],n)}},I=function(e,t){if(0===e.length)return[];for(var n=t(e[0]),o=[],r=[],i=0,a=e.length;i<a;i++){var s=e[i],l=t(s);if(l!==n){o.push(r);r=[]}n=l;r.push(s)}0!==r.length&&o.push(r);return o},R=function(e,t,n){E(e,(function(e,o){n=t(n,e,o)}));return n},L=function(e){for(var t=[],n=0,o=e.length;n<o;++n){if(!c(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);k.apply(t,e[n])}return t},_=function(e,t){return L(N(e,t))},P=function(e,t){var n=T.call(e,0);n.sort(t);return n},M=Object.hasOwnProperty,D=function(e,t){return M.call(e,t)};"undefined"!=typeof window?window:Function("return this;")();var B=9,F=11,U=1,V=function(e){return e.dom.nodeType},H=function(e){return function(t){return V(t)===e}}(3),q=function(e,t,n){if(!(l(n)||u(n)||d(n))){console.error("Invalid call to Attribute.set. Key ",t,":: Value ",n,":: Element ",e);throw new Error("Attribute value was not simple")}e.setAttribute(t,n+"")},$=function(e,t,n){q(e.dom,t,n)},z=function(e,t,n){return 0!=(e.compareDocumentPosition(t)&n)},W=function(e,t){return z(e,t,Node.DOCUMENT_POSITION_PRECEDING)},G=function(e,t){var n=(t||document).createElement("div");n.innerHTML=e;if(!n.hasChildNodes()||n.childNodes.length>1){console.error("HTML does not have a single root node",e);throw new Error("HTML must have a single root node")}return X(n.childNodes[0])},K=function(e,t){var n=(t||document).createElement(e);return X(n)},Y=function(e,t){var n=(t||document).createTextNode(e);return X(n)},X=function(e){if(null==e)throw new Error("Node cannot be null or undefined");return{dom:e}},Z={fromHtml:G,fromTag:K,fromText:Y,fromDom:X,fromPoint:function(e,t,n){return x.from(e.dom.elementFromPoint(t,n)).map(X)}},Q=function(e){return e.nodeType!==U&&e.nodeType!==B&&e.nodeType!==F||0===e.childElementCount},J=function(e,t){var n=void 0===t?document:t.dom;return Q(n)?[]:N(n.querySelectorAll(e),Z.fromDom)},ee=function(e){return x.from(e.dom.parentNode).map(Z.fromDom)},te=function(e){return N(e.dom.childNodes,Z.fromDom)},ne=function(e,t){return{element:e,offset:t}},oe=function(e,t){var n=te(e);return n.length>0&&t<n.length?ne(n[t],0):ne(e,t)},re=function(e,t){ee(e).each((function(n){n.dom.insertBefore(t.dom,e.dom)}))},ie=function(e,t){e.dom.appendChild(t.dom)},ae=function(e,t){re(e,t);ie(t,e)},se=function(e,t){var n=function(n){if(!e(n))throw new Error("Can only get "+t+" value of a "+t+" node");return o(n).getOr("")},o=function(t){return e(t)?x.from(t.dom.nodeValue):x.none()};return{get:n,getOption:o,set:function(n,o){if(!e(n))throw new Error("Can only set raw "+t+" value of a "+t+" node");n.dom.nodeValue=o}}}(H,"text"),le=function(e){return se.get(e)},ce=function(e,t){return J(t,e)},ue=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),de=function(e,t){return e.isBlock(t)||D(e.schema.getShortEndedElements(),t.nodeName)},fe=function(e,t){return"false"===e.getContentEditable(t)},pe=function(e,t){return"true"===e.getContentEditable(t)&&"false"===e.getContentEditableParent(t.parentNode)},me=function(e,t){return!e.isBlock(t)&&D(e.schema.getWhiteSpaceElements(),t.nodeName)},he=function(e,t){return de(e,t)||fe(e,t)||me(e,t)||pe(e,t)},ge=function(e){return 3===e.nodeType},be=function(){return{sOffset:0,fOffset:0,elements:[]}},ve=function(e,t){return oe(Z.fromDom(e),t)},ye=function(e,t,n,o,r,i){void 0===i&&(i=!0);for(var a=i?t(!1):n;a;){var s=fe(e,a);if(s||me(e,a)){if(s?o.cef(a):o.boundary(a))break;a=t(!0)}else{if(de(e,a)){if(o.boundary(a))break}else ge(a)&&o.text(a);if(a===r)break;a=t(!1)}}},Ce=function(e,t,n,o,r){if(!he(e,n)){var i=e.getParent(o,e.isBlock),a=new ue(n,i),s=r?a.next.bind(a):a.prev.bind(a);ye(e,s,n,{boundary:g,cef:g,text:function(e){r?t.fOffset+=e.length:t.sOffset+=e.length;t.elements.push(Z.fromDom(e))}})}},Oe=function(e,t,n,o,r,i){void 0===i&&(i=!0);var a=new ue(n,t),s=[],l=be();Ce(e,l,n,t,!1);var c=function(){if(l.elements.length>0){s.push(l);l=be()}return!1};ye(e,a.next.bind(a),n,{boundary:c,cef:function(e){c();r&&s.push.apply(s,r.cef(e));return!1},text:function(e){l.elements.push(Z.fromDom(e));r&&r.text(e,l)}},o,i);o&&Ce(e,l,o,t,!0);c();return s},xe=function(e,t){var n=ve(t.startContainer,t.startOffset),o=n.element.dom,r=ve(t.endContainer,t.endOffset),i=r.element.dom;return Oe(e,t.commonAncestorContainer,o,i,{text:function(e,t){e===i?t.fOffset+=e.length-r.offset:e===o&&(t.sOffset+=n.offset)},cef:function(t){var n=_(ce(Z.fromDom(t),"*[contenteditable=true]"),(function(t){var n=t.dom;return Oe(e,n,n)}));return P(n,(function(e,t){return W(e.elements[0].dom,t.elements[0].dom)?1:-1}))}},!1)},je=function(e,t){return t.collapsed?[]:xe(e,t)},Se=function(e,t){var n=e.createRng();n.selectNode(t);return je(e,n)},we=function(e,t){return _(t,(function(t){return Se(e,t)}))},Te=function(e,t,n,o){void 0===n&&(n=0);void 0===o&&(o=e.length);var r=t.regex;r.lastIndex=n;for(var i,a=[];i=r.exec(e);){var s=i[t.matchIndex],l=i.index+i[0].indexOf(s),c=l+s.length;if(c>o)break;a.push({start:l,finish:c});r.lastIndex=c}return a},ke=function(e,t){var n=R(e,(function(e,n){var o=le(n),r=e.last,i=r+o.length,a=_(t,(function(e,t){return e.start<i&&e.finish>r?[{element:n,start:Math.max(r,e.start)-r,finish:Math.min(i,e.finish)-r,matchId:t}]:[]}));return{results:e.results.concat(a),last:i}}),{results:[],last:0}).results;return I(n,(function(e){return e.matchId}))},Ne=function(e,t){return _(t,(function(t){var n=t.elements,o=N(n,le).join(""),r=Te(o,e,t.sOffset,o.length-t.fOffset);return ke(n,r)}))},Ee=function(e,t){A(e,(function(e,n){A(e,(function(e){var o=Z.fromDom(t.cloneNode(!1));$(o,"data-mce-index",n);var r=e.element.dom;if(r.length===e.finish&&0===e.start)ae(e.element,o);else{r.length!==e.finish&&r.splitText(e.finish);var i=r.splitText(e.start);ae(Z.fromDom(i),o)}}))}))},Ae=function(e,t,n,o){var r=Se(e,n),i=Ne(t,r);Ee(i,o);return i.length},Ie=function(e,t,n,o){var r=n.getBookmark(),i=e.select("td[data-mce-selected],th[data-mce-selected]"),a=i.length>0?we(e,i):je(e,n.getRng()),s=Ne(t,a);Ee(s,o);n.moveToBookmark(r);return s.length},Re=function(e){var t=e.getAttribute("data-mce-index");return"number"==typeof t?""+t:t},Le=function(e,t,n,o){var r=e.dom.create("span",{"data-mce-bogus":1});r.className="mce-match-marker";var i=e.getBody();$e(e,t,!1);return o?Ie(e.dom,n,e.selection,r):Ae(e.dom,n,i,r)},_e=function(e){var t=e.parentNode;e.firstChild&&t.insertBefore(e.firstChild,e);e.parentNode.removeChild(e)},Pe=function(e,t){var n=[],o=w.toArray(e.getBody().getElementsByTagName("span"));if(o.length)for(var r=0;r<o.length;r++){var i=Re(o[r]);null!==i&&i.length&&(i===t.toString()&&n.push(o[r]))}return n},Me=function(e,t,n){var o=t.get(),r=o.index,i=e.dom;(n=!1!==n)?r+1===o.count?r=0:r++:r-1==-1?r=o.count-1:r--;i.removeClass(Pe(e,o.index),"mce-match-marker-selected");var a=Pe(e,r);if(a.length){i.addClass(Pe(e,r),"mce-match-marker-selected");e.selection.scrollIntoView(a[0]);return r}return-1},De=function(e,t){var n=t.parentNode;e.remove(t);e.isEmpty(n)&&e.remove(n)},Be=function(e,t){var n="("+e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&").replace(/\s/g,"[^\\S\\r\\n\\uFEFF]")+")";return t?"(?:^|\\s|"+j()+")"+n+"(?=$|\\s|"+j()+")":n},Fe=function(e,t,n,o,r,i){var a=e.selection,s=Be(n,r),l=a.isForward(),c={regex:new RegExp(s,o?"g":"gi"),matchIndex:1},u=Le(e,t,c,i);S.browser.isSafari()&&a.setRng(a.getRng(),l);if(u){var d=Me(e,t,!0);t.set({index:d,count:u,text:n,matchCase:o,wholeWord:r,inSelection:i})}return u},Ue=function(e,t){var n=Me(e,t,!0);t.set(r(r({},t.get()),{index:n}))},Ve=function(e,t){var n=Me(e,t,!1);t.set(r(r({},t.get()),{index:n}))},He=function(e){var t=Re(e);return null!==t&&t.length>0},qe=function(e,t,n,o,i){var a,s=t.get(),l=s.index,c=l;o=!1!==o;for(var u=e.getBody(),d=w.grep(w.toArray(u.getElementsByTagName("span")),He),f=0;f<d.length;f++){var p=Re(d[f]),m=a=parseInt(p,10);if(i||m===s.index){if(n.length){d[f].firstChild.nodeValue=n;_e(d[f])}else De(e.dom,d[f]);for(;d[++f];){if((m=parseInt(Re(d[f]),10))!==a){f--;break}De(e.dom,d[f])}o&&c--}else a>l&&d[f].setAttribute("data-mce-index",String(a-1))}t.set(r(r({},s),{count:i?0:s.count-1,index:c}));o?Ue(e,t):Ve(e,t);return!i&&t.get().count>0},$e=function(e,t,n){for(var o,i,a=t.get(),s=w.toArray(e.getBody().getElementsByTagName("span")),l=0;l<s.length;l++){var c=Re(s[l]);if(null!==c&&c.length){if(c===a.index.toString()){o||(o=s[l].firstChild);i=s[l].firstChild}_e(s[l])}}t.set(r(r({},a),{index:-1,count:0,text:""}));if(o&&i){var u=e.dom.createRng();u.setStart(o,0);u.setEnd(i,i.data.length);!1!==n&&e.selection.setRng(u);return u}},ze=function(e,t){return t.get().count>1},We=function(e,t){return t.get().count>1},Ge=function(e,t){return{done:function(n){return $e(e,t,n)},find:function(n,o,r,i){void 0===i&&(i=!1);return Fe(e,t,n,o,r,i)},next:function(){return Ue(e,t)},prev:function(){return Ve(e,t)},replace:function(n,o,r){return qe(e,t,n,o,r)}}},Ke=function(e){var t=n(x.none()),o=function(){return t.get().each(e)};return{clear:function(){o();t.set(x.none())},isSet:function(){return t.get().isSome()},get:function(){return t.get()},set:function(e){o();t.set(x.some(e))}}},Ye=function(){var e=Ke(f),t=function(t){return e.get().each(t)};return r(r({},e),{on:t})},Xe=function(e,t){var n=Ye();e.undoManager.add();var o=w.trim(e.selection.getContent({format:"text"})),i=function(n){(ze(e,t)?n.enable:n.disable)("next");(We(e,t)?n.enable:n.disable)("prev")},a=function(e){var n=e.getData(),o=t.get();t.set(r(r({},o),{matchCase:n.matchcase,wholeWord:n.wholewords,inSelection:n.inselection}))},s=function(e,t){var n=["replace","replaceall","prev","next"],o=t?e.disable:e.enable;E(n,o)},l=function(t){e.windowManager.alert("Could not find the specified string.",(function(){t.focus("findtext")}))},c=function(e,t){S.browser.isSafari()&&S.deviceType.isTouch()&&("find"===t||"replace"===t||"replaceall"===t)&&e.focus(t)},u=function(n){$e(e,t,!1);s(n,!0);i(n)},d=function(n){var o=n.getData(),r=t.get();if(o.findtext.length){if(r.text===o.findtext&&r.matchCase===o.matchcase&&r.wholeWord===o.wholewords)Ue(e,t);else{var a=Fe(e,t,o.findtext,o.matchcase,o.wholewords,o.inselection);a<=0&&l(n);s(n,0===a)}i(n)}else u(n)},f=t.get(),p={title:"Find and Replace",size:"normal",body:{type:"panel",items:[{type:"bar",items:[{type:"input",name:"findtext",placeholder:"Find",maximized:!0,inputMode:"search"},{type:"button",name:"prev",text:"Previous",icon:"action-prev",disabled:!0,borderless:!0},{type:"button",name:"next",text:"Next",icon:"action-next",disabled:!0,borderless:!0}]},{type:"input",name:"replacetext",placeholder:"Replace with",inputMode:"search"}]},buttons:[{type:"menu",name:"options",icon:"preferences",tooltip:"Preferences",align:"start",items:[{type:"togglemenuitem",name:"matchcase",text:"Match case"},{type:"togglemenuitem",name:"wholewords",text:"Find whole words only"},{type:"togglemenuitem",name:"inselection",text:"Find in selection"}]},{type:"custom",name:"find",text:"Find",primary:!0},{type:"custom",name:"replace",text:"Replace",disabled:!0},{type:"custom",name:"replaceall",text:"Replace all",disabled:!0}],initialData:{findtext:o,replacetext:"",wholewords:f.wholeWord,matchcase:f.matchCase,inselection:f.inSelection},onChange:function(e,n){"findtext"===n.name&&t.get().count>0&&u(e)},onAction:function(n,o){var r=n.getData();switch(o.name){case"find":d(n);break;case"replace":qe(e,t,r.replacetext)?i(n):u(n);break;case"replaceall":qe(e,t,r.replacetext,!0,!0);u(n);break;case"prev":Ve(e,t);i(n);break;case"next":Ue(e,t);i(n);break;case"matchcase":case"wholewords":case"inselection":a(n);u(n)}c(n,o.name)},onSubmit:function(e){d(e);c(e,"find")},onClose:function(){e.focus();$e(e,t);e.undoManager.add()}};n.set(e.windowManager.open(p,{inline:"toolbar"}))},Ze=function(e,t){e.addCommand("SearchReplace",(function(){Xe(e,t)}))},Qe=function(e,t){return function(){Xe(e,t)}},Je=function(e,t){e.ui.registry.addMenuItem("searchreplace",{text:"Find and replace...",shortcut:"Meta+F",onAction:Qe(e,t),icon:"search"});e.ui.registry.addButton("searchreplace",{tooltip:"Find and replace",onAction:Qe(e,t),icon:"search"});e.shortcuts.add("Meta+F","",Qe(e,t))};function et(){o.add("searchreplace",(function(e){var t=n({index:-1,count:0,text:"",matchCase:!1,wholeWord:!1,inSelection:!1});Ze(e,t);Je(e,t);return Ge(e,t)}))}et()}()},1578:function(e,t,n){n(1579)},1579:function(e,t){!function(){"use strict";var e=function(e){var t=typeof e;return null===e?"null":"object"===t&&(Array.prototype.isPrototypeOf(e)||e.constructor&&"Array"===e.constructor.name)?"array":"object"===t&&(String.prototype.isPrototypeOf(e)||e.constructor&&"String"===e.constructor.name)?"string":t},t=function(t){return function(n){return e(n)===t}},n=function(e){return function(t){return typeof t===e}},o=function(e){return function(t){return e===t}},r=t("string"),i=t("object"),a=t("array"),s=o(null),l=n("boolean"),c=o(void 0),u=function(e){return null==e},d=function(e){return!u(e)},f=n("function"),p=n("number"),m=function(){},h=function(e,t){return function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];return e(t.apply(null,n))}},g=function(e,t){return function(n){return e(t(n))}},b=function(e){return function(){return e}},v=function(e){return e},y=function(e,t){return e===t};function C(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];var r=t.concat(n);return e.apply(null,r)}}var O,x,j=function(e){return function(t){return!e(t)}},S=function(e){return function(){throw new Error(e)}},w=b(!1),T=b(!0),k=function(){return N},N={fold:function(e,t){return e()},isSome:w,isNone:T,getOr:x=v,getOrThunk:O=function(e){return e()},getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:b(null),getOrUndefined:b(void 0),or:x,orThunk:O,map:k,each:m,bind:k,exists:w,forall:T,filter:function(){return k()},toArray:function(){return[]},toString:b("none()")},E=function(e){var t=b(e),n=function(){return r},o=function(t){return t(e)},r={fold:function(t,n){return n(e)},isSome:T,isNone:w,getOr:t,getOrThunk:t,getOrDie:t,getOrNull:t,getOrUndefined:t,or:n,orThunk:n,map:function(t){return E(t(e))},each:function(t){t(e)},bind:o,exists:o,forall:o,filter:function(t){return t(e)?r:N},toArray:function(){return[e]},toString:function(){return"some("+e+")"}};return r},A=function(e){return null==e?N:E(e)},I={some:E,none:k,from:A},R=Array.prototype.slice,L=Array.prototype.indexOf,_=Array.prototype.push,P=function(e,t){return L.call(e,t)},M=function(e,t){return P(e,t)>-1},D=function(e,t){for(var n=0,o=e.length;n<o;n++){if(t(e[n],n))return!0}return!1},B=function(e,t){for(var n=[],o=0;o<e;o++)n.push(t(o));return n},F=function(e,t){for(var n=e.length,o=new Array(n),r=0;r<n;r++){var i=e[r];o[r]=t(i,r)}return o},U=function(e,t){for(var n=0,o=e.length;n<o;n++){t(e[n],n)}},V=function(e,t){for(var n=e.length-1;n>=0;n--){t(e[n],n)}},H=function(e,t){for(var n=[],o=[],r=0,i=e.length;r<i;r++){var a=e[r];(t(a,r)?n:o).push(a)}return{pass:n,fail:o}},q=function(e,t){for(var n=[],o=0,r=e.length;o<r;o++){var i=e[o];t(i,o)&&n.push(i)}return n},$=function(e,t,n){V(e,(function(e,o){n=t(n,e,o)}));return n},z=function(e,t,n){U(e,(function(e,o){n=t(n,e,o)}));return n},W=function(e,t,n){for(var o=0,r=e.length;o<r;o++){var i=e[o];if(t(i,o))return I.some(i);if(n(i,o))break}return I.none()},G=function(e,t){return W(e,t,w)},K=function(e,t){for(var n=0,o=e.length;n<o;n++){if(t(e[n],n))return I.some(n)}return I.none()},Y=function(e){for(var t=[],n=0,o=e.length;n<o;++n){if(!a(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);_.apply(t,e[n])}return t},X=function(e,t){return Y(F(e,t))},Z=function(e,t){for(var n=0,o=e.length;n<o;++n){if(!0!==t(e[n],n))return!1}return!0},Q=function(e){var t=R.call(e,0);t.reverse();return t},J=function(e,t){for(var n={},o=0,r=e.length;o<r;o++){var i=e[o];n[String(i)]=t(i,o)}return n},ee=function(e){return[e]},te=function(e,t){var n=R.call(e,0);n.sort(t);return n},ne=function(e,t){return t>=0&&t<e.length?I.some(e[t]):I.none()},oe=function(e){return ne(e,0)},re=function(e){return ne(e,e.length-1)},ie=function(e,t){for(var n=0;n<e.length;n++){var o=t(e[n],n);if(o.isSome())return o}return I.none()},ae=function(){return(ae=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)};function se(e,t,n){if(n||2===arguments.length)for(var o,r=0,i=t.length;r<i;r++)if(o||!(r in t)){o||(o=Array.prototype.slice.call(t,0,r));o[r]=t[r]}return e.concat(o||Array.prototype.slice.call(t))}var le=function(e){var t,n=!1;return function(){for(var o=[],r=0;r<arguments.length;r++)o[r]=arguments[r];if(!n){n=!0;t=e.apply(null,o)}return t}},ce=function(e,t,n,o){var r=e.isiOS()&&!0===/ipad/i.test(n),i=e.isiOS()&&!r,a=e.isiOS()||e.isAndroid(),s=a||o("(pointer:coarse)"),l=r||!i&&a&&o("(min-device-width:768px)"),c=i||a&&!l,u=t.isSafari()&&e.isiOS()&&!1===/safari/i.test(n),d=!c&&!l&&!u;return{isiPad:b(r),isiPhone:b(i),isTablet:b(l),isPhone:b(c),isTouch:b(s),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:b(u),isDesktop:b(d)}},ue=function(e,t){for(var n=0;n<e.length;n++){var o=e[n];if(o.test(t))return o}},de=function(e,t){var n=ue(e,t);if(!n)return{major:0,minor:0};var o=function(e){return Number(t.replace(n,"$"+e))};return me(o(1),o(2))},fe=function(e,t){var n=String(t).toLowerCase();return 0===e.length?pe():de(e,n)},pe=function(){return me(0,0)},me=function(e,t){return{major:e,minor:t}},he={nu:me,detect:fe,unknown:pe},ge=function(e,t){return ie(t.brands,(function(t){var n=t.brand.toLowerCase();return G(e,(function(e){var t;return n===(null===(t=e.brand)||void 0===t?void 0:t.toLowerCase())})).map((function(e){return{current:e.name,version:he.nu(parseInt(t.version,10),0)}}))}))},be=function(e,t){var n=String(t).toLowerCase();return G(e,(function(e){return e.search(n)}))},ve=function(e,t){return be(e,t).map((function(e){var n=he.detect(e.versionRegexes,t);return{current:e.name,version:n}}))},ye=function(e,t){return be(e,t).map((function(e){var n=he.detect(e.versionRegexes,t);return{current:e.name,version:n}}))},Ce=function(e,t){return e.substring(t)},Oe=function(e,t,n){return""===t||e.length>=t.length&&e.substr(n,n+t.length)===t},xe=function(e,t){return Se(e,t)?Ce(e,t.length):e},je=function(e,t){return-1!==e.indexOf(t)},Se=function(e,t){return Oe(e,t,0)},we=function(e,t){return Oe(e,t,e.length-t.length)},Te=function(e){return function(t){return t.replace(e,"")}}(/^\s+|\s+$/g),ke=function(e){return e.length>0},Ne=function(e){return!ke(e)},Ee=function(e){var t=parseFloat(e);return isNaN(t)?I.none():I.some(t)},Ae=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Ie=function(e){return function(t){return je(t,e)}},Re=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(e){return je(e,"edge/")&&je(e,"chrome")&&je(e,"safari")&&je(e,"applewebkit")}},{name:"Chrome",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Ae],search:function(e){return je(e,"chrome")&&!je(e,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(e){return je(e,"msie")||je(e,"trident")}},{name:"Opera",versionRegexes:[Ae,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Ie("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Ie("firefox")},{name:"Safari",versionRegexes:[Ae,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(e){return(je(e,"safari")||je(e,"mobile/"))&&je(e,"applewebkit")}}],Le=[{name:"Windows",search:Ie("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(e){return je(e,"iphone")||je(e,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Ie("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:Ie("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Ie("linux"),versionRegexes:[]},{name:"Solaris",search:Ie("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Ie("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Ie("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],_e={browsers:b(Re),oses:b(Le)},Pe="Edge",Me="Chrome",De="IE",Be="Opera",Fe="Firefox",Ue="Safari",Ve=function(){return He({current:void 0,version:he.unknown()})},He=function(e){var t=e.current,n=e.version,o=function(e){return function(){return t===e}};return{current:t,version:n,isEdge:o(Pe),isChrome:o(Me),isIE:o(De),isOpera:o(Be),isFirefox:o(Fe),isSafari:o(Ue)}},qe={unknown:Ve,nu:He,edge:b(Pe),chrome:b(Me),ie:b(De),opera:b(Be),firefox:b(Fe),safari:b(Ue)},$e="Windows",ze="iOS",We="Android",Ge="Linux",Ke="OSX",Ye="Solaris",Xe="FreeBSD",Ze="ChromeOS",Qe=function(){return Je({current:void 0,version:he.unknown()})},Je=function(e){var t=e.current,n=e.version,o=function(e){return function(){return t===e}};return{current:t,version:n,isWindows:o($e),isiOS:o(ze),isAndroid:o(We),isOSX:o(Ke),isLinux:o(Ge),isSolaris:o(Ye),isFreeBSD:o(Xe),isChromeOS:o(Ze)}},et={unknown:Qe,nu:Je,windows:b($e),ios:b(ze),android:b(We),linux:b(Ge),osx:b(Ke),solaris:b(Ye),freebsd:b(Xe),chromeos:b(Ze)},tt={detect:function(e,t,n){var o=_e.browsers(),r=_e.oses(),i=t.bind((function(e){return ge(o,e)})).orThunk((function(){return ve(o,e)})).fold(qe.unknown,qe.nu),a=ye(r,e).fold(et.unknown,et.nu);return{browser:i,os:a,deviceType:ce(a,i,e,n)}}},nt=function(e){return window.matchMedia(e).matches},ot=le((function(){return tt.detect(navigator.userAgent,I.from(navigator.userAgentData),nt)})),rt=function(){return ot()},it=function(e,t,n){return 0!=(e.compareDocumentPosition(t)&n)},at=function(e,t){return it(e,t,Node.DOCUMENT_POSITION_CONTAINED_BY)},st=8,lt=9,ct=11,ut=1,dt=3,ft=function(e,t){var n=(t||document).createElement("div");n.innerHTML=e;if(!n.hasChildNodes()||n.childNodes.length>1){console.error("HTML does not have a single root node",e);throw new Error("HTML must have a single root node")}return ht(n.childNodes[0])},pt=function(e,t){var n=(t||document).createElement(e);return ht(n)},mt=function(e,t){var n=(t||document).createTextNode(e);return ht(n)},ht=function(e){if(null==e)throw new Error("Node cannot be null or undefined");return{dom:e}},gt={fromHtml:ft,fromTag:pt,fromText:mt,fromDom:ht,fromPoint:function(e,t,n){return I.from(e.dom.elementFromPoint(t,n)).map(ht)}},bt=function(e,t){var n=e.dom;if(n.nodeType!==ut)return!1;var o=n;if(void 0!==o.matches)return o.matches(t);if(void 0!==o.msMatchesSelector)return o.msMatchesSelector(t);if(void 0!==o.webkitMatchesSelector)return o.webkitMatchesSelector(t);if(void 0!==o.mozMatchesSelector)return o.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")},vt=function(e){return e.nodeType!==ut&&e.nodeType!==lt&&e.nodeType!==ct||0===e.childElementCount},yt=function(e,t){var n=void 0===t?document:t.dom;return vt(n)?[]:F(n.querySelectorAll(e),gt.fromDom)},Ct=function(e,t){var n=void 0===t?document:t.dom;return vt(n)?I.none():I.from(n.querySelector(e)).map(gt.fromDom)},Ot=function(e,t){return e.dom===t.dom},xt=function(e,t){var n=e.dom,o=t.dom;return n!==o&&n.contains(o)},jt=function(e,t){return at(e.dom,t.dom)},St=function(e,t){return rt().browser.isIE()?jt(e,t):xt(e,t)},wt=bt,Tt=Object.keys,kt=Object.hasOwnProperty,Nt=function(e,t){for(var n=Tt(e),o=0,r=n.length;o<r;o++){var i=n[o];t(e[i],i)}},Et=function(e,t){return At(e,(function(e,n){return{k:n,v:t(e,n)}}))},At=function(e,t){var n={};Nt(e,(function(e,o){var r=t(e,o);n[r.k]=r.v}));return n},It=function(e){return function(t,n){e[n]=t}},Rt=function(e,t,n,o){var r={};Nt(e,(function(e,r){(t(e,r)?n:o)(e,r)}));return r},Lt=function(e,t){var n={};Rt(e,t,It(n),m);return n},_t=function(e,t){var n=[];Nt(e,(function(e,o){n.push(t(e,o))}));return n},Pt=function(e){return _t(e,v)},Mt=function(e){return Tt(e).length},Dt=function(e,t){return Bt(e,t)?I.from(e[t]):I.none()},Bt=function(e,t){return kt.call(e,t)},Ft=function(e,t){return Bt(e,t)&&void 0!==e[t]&&null!==e[t]},Ut=function(e){for(var t in e)if(kt.call(e,t))return!1;return!0},Vt=["tfoot","thead","tbody","colgroup"],Ht=function(e){return M(Vt,e)},qt=function(e,t){return{rows:e,columns:t}},$t=function(e,t){return{row:e,column:t}},zt=function(e,t,n){return{element:e,rowspan:t,colspan:n}},Wt=function(e,t,n,o){return{element:e,rowspan:t,colspan:n,isNew:o}},Gt=function(e,t,n,o,r,i){return{element:e,rowspan:t,colspan:n,row:o,column:r,isLocked:i}},Kt=function(e,t,n){return{element:e,cells:t,section:n}},Yt=function(e,t,n,o){return{element:e,cells:t,section:n,isNew:o}},Xt=function(e,t,n){return{element:e,isNew:t,isLocked:n}},Zt=function(e,t,n,o){return{element:e,cells:t,section:n,isNew:o}},Qt=function(e,t,n,o){return{startRow:e,startCol:t,finishRow:n,finishCol:o}},Jt=function(e,t,n){return{element:e,colspan:t,column:n}},en=function(e,t){return{element:e,columns:t}};"undefined"!=typeof window?window:Function("return this;")();var tn=function(e){return e.dom.nodeName.toLowerCase()},nn=function(e){return e.dom.nodeType},on=function(e){return function(t){return nn(t)===e}},rn=function(e){return nn(e)===st||"#comment"===tn(e)},an=on(ut),sn=on(dt),ln=on(lt),cn=on(ct),un=function(e){return function(t){return an(t)&&tn(t)===e}},dn=function(e){return gt.fromDom(e.dom.ownerDocument)},fn=function(e){return ln(e)?e:dn(e)},pn=function(e){return gt.fromDom(fn(e).dom.defaultView)},mn=function(e){return I.from(e.dom.parentNode).map(gt.fromDom)},hn=function(e){return I.from(e.dom.parentElement).map(gt.fromDom)},gn=function(e,t){for(var n=f(t)?t:w,o=e.dom,r=[];null!==o.parentNode&&void 0!==o.parentNode;){var i=o.parentNode,a=gt.fromDom(i);r.push(a);if(!0===n(a))break;o=i}return r},bn=function(e){return I.from(e.dom.previousSibling).map(gt.fromDom)},vn=function(e){return I.from(e.dom.nextSibling).map(gt.fromDom)},yn=function(e){return F(e.dom.childNodes,gt.fromDom)},Cn=function(e,t){var n=e.dom.childNodes;return I.from(n[t]).map(gt.fromDom)},On=function(e){return Cn(e,0)},xn=function(e){return cn(e)&&d(e.dom.host)},jn=f(Element.prototype.attachShadow)&&f(Node.prototype.getRootNode),Sn=b(jn),wn=jn?function(e){return gt.fromDom(e.dom.getRootNode())}:fn,Tn=function(e){var t=wn(e);return xn(t)?I.some(t):I.none()},kn=function(e){return gt.fromDom(e.dom.host)},Nn=function(e){if(Sn()&&d(e.target)){var t=gt.fromDom(e.target);if(an(t)&&En(t)&&e.composed&&e.composedPath){var n=e.composedPath();if(n)return oe(n)}}return I.from(e.target)},En=function(e){return d(e.dom.shadowRoot)},An=function(e){var t=sn(e)?e.dom.parentNode:e.dom;if(null==t||null===t.ownerDocument)return!1;var n=t.ownerDocument;return Tn(gt.fromDom(t)).fold((function(){return n.body.contains(t)}),g(An,kn))},In=function(){return Rn(gt.fromDom(document))},Rn=function(e){var t=e.dom.body;if(null==t)throw new Error("Body is not available yet");return gt.fromDom(t)},Ln=function(e,t,n){return q(gn(e,n),t)},_n=function(e,t){return q(yn(e),t)},Pn=function(e,t){var n=[];U(yn(e),(function(e){t(e)&&(n=n.concat([e]));n=n.concat(Pn(e,t))}));return n},Mn=function(e,t,n){return Ln(e,(function(e){return bt(e,t)}),n)},Dn=function(e,t){return _n(e,(function(e){return bt(e,t)}))},Bn=function(e,t){return yt(t,e)};function Fn(e,t,n,o,r){return e(n,o)?I.some(n):f(r)&&r(n)?I.none():t(n,o,r)}var Un=function(e,t,n){for(var o=e.dom,r=f(n)?n:w;o.parentNode;){o=o.parentNode;var i=gt.fromDom(o);if(t(i))return I.some(i);if(r(i))break}return I.none()},Vn=function(e,t,n){return Fn((function(e,t){return t(e)}),Un,e,t,n)},Hn=function(e,t){var n=function(e){return t(gt.fromDom(e))};return G(e.dom.childNodes,n).map(gt.fromDom)},qn=function(e,t){var n=function(e){for(var o=0;o<e.childNodes.length;o++){var r=gt.fromDom(e.childNodes[o]);if(t(r))return I.some(r);var i=n(e.childNodes[o]);if(i.isSome())return i}return I.none()};return n(e.dom)},$n=function(e,t,n){return Un(e,(function(e){return bt(e,t)}),n)},zn=function(e,t){return Hn(e,(function(e){return bt(e,t)}))},Wn=function(e,t){return Ct(t,e)},Gn=function(e,t,n){return Fn((function(e,t){return bt(e,t)}),$n,e,t,n)},Kn=function(e,t,n){if(!(r(n)||l(n)||p(n))){console.error("Invalid call to Attribute.set. Key ",t,":: Value ",n,":: Element ",e);throw new Error("Attribute value was not simple")}e.setAttribute(t,n+"")},Yn=function(e,t,n){Kn(e.dom,t,n)},Xn=function(e,t){var n=e.dom;Nt(t,(function(e,t){Kn(n,t,e)}))},Zn=function(e,t){Nt(t,(function(t,n){t.fold((function(){eo(e,n)}),(function(t){Kn(e.dom,n,t)}))}))},Qn=function(e,t){var n=e.dom.getAttribute(t);return null===n?void 0:n},Jn=function(e,t){return I.from(Qn(e,t))},eo=function(e,t){e.dom.removeAttribute(t)},to=function(e){return z(e.dom.attributes,(function(e,t){e[t.name]=t.value;return e}),{})},no=function(e,t,n){void 0===n&&(n=y);return e.exists((function(e){return n(e,t)}))},oo=function(e){for(var t=[],n=function(e){t.push(e)},o=0;o<e.length;o++)e[o].each(n);return t},ro=function(e,t,n){return e.isSome()&&t.isSome()?I.some(n(e.getOrDie(),t.getOrDie())):I.none()},io=function(e,t){return null!=e?t(e):I.none()},ao=function(e){return e.bind(v)},so=function(e,t){return e?I.some(t):I.none()},lo=function(e){return void 0!==e.style&&f(e.style.getPropertyValue)},co=function(e,t,n){if(!r(n)){console.error("Invalid call to CSS.set. Property ",t,":: Value ",n,":: Element ",e);throw new Error("CSS value must be a string: "+n)}lo(e)&&e.style.setProperty(t,n)},uo=function(e,t){lo(e)&&e.style.removeProperty(t)},fo=function(e,t,n){var o=e.dom;co(o,t,n)},po=function(e,t){var n=e.dom;Nt(t,(function(e,t){co(n,t,e)}))},mo=function(e,t){var n=e.dom,o=window.getComputedStyle(n).getPropertyValue(t);return""!==o||An(e)?o:ho(n,t)},ho=function(e,t){return lo(e)?e.style.getPropertyValue(t):""},go=function(e,t){var n=e.dom,o=ho(n,t);return I.from(o).filter((function(e){return e.length>0}))},bo=function(e,t){var n=e.dom;uo(n,t);no(Jn(e,"style").map(Te),"")&&eo(e,"style")},vo=function(e,t){var n=e.dom,o=t.dom;lo(n)&&lo(o)&&(o.style.cssText=n.style.cssText)},yo=function(e,t,n){void 0===n&&(n=0);return Jn(e,t).map((function(e){return parseInt(e,10)})).getOr(n)},Co=function(e,t){return yo(e,t,1)},Oo=function(e){return un("col")(e)?yo(e,"span",1)>1:Co(e,"colspan")>1},xo=function(e){return Co(e,"rowspan")>1},jo=function(e,t){return parseInt(mo(e,t),10)},So=b(10),wo=b(10),To=function(e,t){return ko(e,t,T)},ko=function(e,t,n){return X(yn(e),(function(e){return bt(e,t)?n(e)?[e]:[]:ko(e,t,n)}))},No=function(e,t,n){void 0===n&&(n=w);if(n(t))return I.none();if(M(e,tn(t)))return I.some(t);var o=function(e){return bt(e,"table")||n(e)};return $n(t,e.join(","),o)},Eo=function(e,t){return No(["td","th"],e,t)},Ao=function(e){return To(e,"th,td")},Io=function(e){return bt(e,"colgroup")?Dn(e,"col"):X(_o(e),(function(e){return Dn(e,"col")}))},Ro=function(e,t){return Gn(e,"table",t)},Lo=function(e){return To(e,"tr")},_o=function(e){return Ro(e).fold(b([]),(function(e){return Dn(e,"colgroup")}))},Po=function(e,t){return F(e,(function(e){if("colgroup"===tn(e)){var n=F(Io(e),(function(e){var t=yo(e,"span",1);return zt(e,1,t)}));return Kt(e,n,"colgroup")}n=F(Ao(e),(function(e){var t=yo(e,"rowspan",1),n=yo(e,"colspan",1);return zt(e,t,n)}));return Kt(e,n,t(e))}))},Mo=function(e){return mn(e).map((function(e){var t=tn(e);return Ht(t)?t:"tbody"})).getOr("tbody")},Do=function(e){var t=Lo(e),n=se(se([],_o(e),!0),t,!0);return Po(n,Mo)},Bo=function(e,t){return Po(e,(function(){return t}))},Fo=function(e,t,n){var o=e.cells,r=o.slice(0,t),i=o.slice(t),a=r.concat(n).concat(i);return Ho(e,a)},Uo=function(e,t,n){return Fo(e,t,[n])},Vo=function(e,t,n){e.cells[t]=n},Ho=function(e,t){return Zt(e.element,t,e.section,e.isNew)},qo=function(e,t){var n=e.cells,o=F(n,t);return Zt(e.element,o,e.section,e.isNew)},$o=function(e,t){return e.cells[t]},zo=function(e,t){return $o(e,t).element},Wo=function(e){return e.cells.length},Go=function(e){var t=H(e,(function(e){return"colgroup"===e.section}));return{rows:t.fail,cols:t.pass}},Ko=function(e,t,n){var o=F(e.cells,n);return Zt(t(e.element),o,e.section,!0)},Yo="data-snooker-locked-cols",Xo=function(e){return Jn(e,Yo).bind((function(e){return I.from(e.match(/\d+/g))})).map((function(e){return J(e,T)}))},Zo=function(e){var t=z(Go(e).rows,(function(e,t){U(t.cells,(function(t,n){t.isLocked&&(e[n]=!0)}));return e}),{}),n=_t(t,(function(e,t){return parseInt(t,10)}));return te(n)},Qo=function(e,t){return e+","+t},Jo=function(e,t,n){var o=er(e,(function(e){return n(t,e.element)}));return o.length>0?I.some(o[0]):I.none()},er=function(e,t){var n=X(e.all,(function(e){return e.cells}));return q(n,t)},tr=function(e){var t={},n=0;U(e.cells,(function(e){var o=e.colspan;B(o,(function(r){var i=n+r;t[i]=Jt(e.element,o,i)}));n+=o}));return t},nr=function(e){var t={},n=[],o=oe(e).map((function(e){return e.element})).bind(Ro).bind(Xo).getOr({}),r=0,i=0,a=0,s=H(e,(function(e){return"colgroup"===e.section})),l=s.pass,c=s.fail;U(c,(function(e){var s=[];U(e.cells,(function(e){for(var n=0;void 0!==t[Qo(a,n)];)n++;for(var r=Ft(o,n.toString()),l=Gt(e.element,e.rowspan,e.colspan,a,n,r),c=0;c<e.colspan;c++)for(var u=0;u<e.rowspan;u++){var d=n+c,f=Qo(a+u,d);t[f]=l;i=Math.max(i,d+1)}s.push(l)}));r++;n.push(Kt(e.element,s,e.section));a++}));var u=re(l).map((function(e){var t=tr(e);return{colgroups:[en(e.element,Pt(t))],columns:t}})).getOrThunk((function(){return{colgroups:[],columns:{}}})),d=u.columns,f=u.colgroups;return{grid:qt(r,i),access:t,all:n,columns:d,colgroups:f}},or={fromTable:function(e){var t=Do(e);return nr(t)},generate:nr,getAt:function(e,t,n){return I.from(e.access[Qo(t,n)])},findItem:Jo,filterItems:er,justCells:function(e){return X(e.all,(function(e){return e.cells}))},justColumns:function(e){return Pt(e.columns)},hasColumns:function(e){return Tt(e.columns).length>0},getColumnAt:function(e,t){return I.from(e.columns[t])}},rr=function(e,t){var n=t.column,o=t.column+t.colspan-1,r=t.row,i=t.row+t.rowspan-1;return n<=e.finishCol&&o>=e.startCol&&r<=e.finishRow&&i>=e.startRow},ir=function(e,t){return t.column>=e.startCol&&t.column+t.colspan-1<=e.finishCol&&t.row>=e.startRow&&t.row+t.rowspan-1<=e.finishRow},ar=function(e,t){for(var n=!0,o=C(ir,t),r=t.startRow;r<=t.finishRow;r++)for(var i=t.startCol;i<=t.finishCol;i++)n=n&&or.getAt(e,r,i).exists(o);return n?I.some(t):I.none()},sr=function(e,t){return Qt(Math.min(e.row,t.row),Math.min(e.column,t.column),Math.max(e.row+e.rowspan-1,t.row+t.rowspan-1),Math.max(e.column+e.colspan-1,t.column+t.colspan-1))},lr=function(e,t,n){var o=or.findItem(e,t,Ot),r=or.findItem(e,n,Ot);return o.bind((function(e){return r.map((function(t){return sr(e,t)}))}))},cr=function(e,t,n){return lr(e,t,n).bind((function(t){return ar(e,t)}))},ur=function(e,t,n,o){return or.findItem(e,t,Ot).bind((function(t){var r=n>0?t.row+t.rowspan-1:t.row,i=o>0?t.column+t.colspan-1:t.column;return or.getAt(e,r+n,i+o).map((function(e){return e.element}))}))},dr=function(e,t,n){return lr(e,t,n).map((function(t){var n=or.filterItems(e,C(rr,t));return F(n,(function(e){return e.element}))}))},fr=function(e,t){var n=function(e,t){return St(t,e)};return or.findItem(e,t,n).map((function(e){return e.element}))},pr=function(e,t,n){return Ro(e).bind((function(o){var r=br(o);return ur(r,e,t,n)}))},mr=function(e,t,n){var o=br(e);return dr(o,t,n)},hr=function(e,t,n,o,r){var i=br(e),a=Ot(e,n)?I.some(t):fr(i,t),s=Ot(e,r)?I.some(o):fr(i,o);return a.bind((function(e){return s.bind((function(t){return dr(i,e,t)}))}))},gr=function(e,t,n){var o=br(e);return cr(o,t,n)},br=or.fromTable,vr=function(e,t){mn(e).each((function(n){n.dom.insertBefore(t.dom,e.dom)}))},yr=function(e,t){vn(e).fold((function(){mn(e).each((function(e){Or(e,t)}))}),(function(e){vr(e,t)}))},Cr=function(e,t){On(e).fold((function(){Or(e,t)}),(function(n){e.dom.insertBefore(t.dom,n.dom)}))},Or=function(e,t){e.dom.appendChild(t.dom)},xr=function(e,t,n){Cn(e,n).fold((function(){Or(e,t)}),(function(e){vr(e,t)}))},jr=function(e,t){vr(e,t);Or(t,e)},Sr=function(e,t){U(t,(function(t){vr(e,t)}))},wr=function(e,t){U(t,(function(n,o){var r=0===o?e:t[o-1];yr(r,n)}))},Tr=function(e,t){U(t,(function(t){Or(e,t)}))},kr=function(e){e.dom.textContent="";U(yn(e),(function(e){Nr(e)}))},Nr=function(e){var t=e.dom;null!==t.parentNode&&t.parentNode.removeChild(t)},Er=function(e){var t=yn(e);t.length>0&&Sr(e,t);Nr(e)},Ar=function(e,t){var n=function(n){if(!e(n))throw new Error("Can only get "+t+" value of a "+t+" node");return o(n).getOr("")},o=function(t){return e(t)?I.from(t.dom.nodeValue):I.none()};return{get:n,getOption:o,set:function(n,o){if(!e(n))throw new Error("Can only set raw "+t+" value of a "+t+" node");n.dom.nodeValue=o}}}(sn,"text"),Ir=function(e){return Ar.get(e)},Rr=function(e){return Ar.getOption(e)},Lr=function(e,t){return Ar.set(e,t)},_r=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"];function Pr(){var e=function(e){return gt.fromDom(e.dom.cloneNode(!1))},t=function(e){return fn(e).dom},n=function(e){return!!an(e)&&("body"===tn(e)||M(_r,tn(e)))},o=function(e){return!!an(e)&&M(["br","img","hr","input"],tn(e))},r=function(e){return an(e)&&"false"===Qn(e,"contenteditable")},i=function(e,t){return e.dom.compareDocumentPosition(t.dom)},a=function(e,t){var n=to(e);Xn(t,n)},s=function(e){var t=tn(e);return M(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],t)},l=function(e){return an(e)?Jn(e,"lang"):I.none()};return{up:b({selector:$n,closest:Gn,predicate:Un,all:gn}),down:b({selector:Bn,predicate:Pn}),styles:b({get:mo,getRaw:go,set:fo,remove:bo}),attrs:b({get:Qn,set:Yn,remove:eo,copyTo:a}),insert:b({before:vr,after:yr,afterAll:wr,append:Or,appendAll:Tr,prepend:Cr,wrap:jr}),remove:b({unwrap:Er,remove:Nr}),create:b({nu:gt.fromTag,clone:e,text:gt.fromText}),query:b({comparePosition:i,prevSibling:bn,nextSibling:vn}),property:b({children:yn,name:tn,parent:mn,document:t,isText:sn,isComment:rn,isElement:an,isSpecial:s,getLanguage:l,getText:Ir,setText:Lr,isBoundary:n,isEmptyTag:o,isNonEditable:r}),eq:Ot,is:wt}}var Mr,Dr,Br,Fr,Ur,Vr=function(e,t,n,o){return o(e,t,n[0],n.slice(1))},Hr=function(e,t,n){return n.length>0?Vr(e,t,n,qr):I.none()},qr=function(e,t,n,o){var r=t(e,n);return $(o,(function(n,o){var r=t(e,o);return $r(e,n,r)}),r)},$r=function(e,t,n){return t.bind((function(t){return n.filter(C(e.eq,t))}))},zr=function(e,t){return C(e.eq,t)},Wr=function(e,t,n,o){void 0===o&&(o=w);var r=[t].concat(e.up().all(t)),i=[n].concat(e.up().all(n)),a=function(e){return K(e,o).fold((function(){return e}),(function(t){return e.slice(0,t+1)}))},s=a(r),l=a(i),c=G(s,(function(t){return D(l,zr(e,t))}));return{firstpath:s,secondpath:l,shared:c}},Gr=Hr,Kr=Wr,Yr=Pr(),Xr=function(e,t){return Gr(Yr,(function(t,n){return e(n)}),t)},Zr=function(e,t,n){return Kr(Yr,e,t,n)},Qr=function(e){return $n(e,"table")},Jr=function(e,t,n){var o=function(e){return function(t){return void 0!==n&&n(t)||Ot(t,e)}};return Ot(e,t)?I.some({boxes:I.some([e]),start:e,finish:t}):Qr(e).bind((function(r){return Qr(t).bind((function(i){if(Ot(r,i))return I.some({boxes:mr(r,e,t),start:e,finish:t});if(St(r,i)){var a=(s=Mn(t,"td,th",o(r))).length>0?s[s.length-1]:t;return I.some({boxes:hr(r,e,r,t,i),start:e,finish:a})}if(St(i,r)){var s,l=(s=Mn(e,"td,th",o(i))).length>0?s[s.length-1]:e;return I.some({boxes:hr(i,e,r,t,i),start:e,finish:l})}return Zr(e,t).shared.bind((function(a){return Gn(a,"table",n).bind((function(n){var a=Mn(t,"td,th",o(n)),s=a.length>0?a[a.length-1]:t,l=Mn(e,"td,th",o(n)),c=l.length>0?l[l.length-1]:e;return I.some({boxes:hr(n,e,r,t,i),start:c,finish:s})}))}))}))}))},ei=function(e,t){var n=Bn(e,t);return n.length>0?I.some(n):I.none()},ti=function(e,t){return G(e,(function(e){return bt(e,t)}))},ni=function(e,t,n){return Wn(e,t).bind((function(t){return Wn(e,n).bind((function(e){return Xr(Qr,[t,e]).map((function(n){return{first:t,last:e,table:n}}))}))}))},oi=function(e,t){return $n(e,"table").bind((function(n){return Wn(n,t).bind((function(t){return Jr(t,e).bind((function(e){return e.boxes.map((function(t){return{boxes:t,start:e.start,finish:e.finish}}))}))}))}))},ri=function(e,t,n,o,r){return ti(e,r).bind((function(e){return pr(e,t,n).bind((function(e){return oi(e,o)}))}))},ii=function(e,t){return ei(e,t)},ai=function(e,t,n){return ni(e,t,n).bind((function(t){var n=function(t){return Ot(e,t)},o="thead,tfoot,tbody,table",r=$n(t.first,o,n),i=$n(t.last,o,n);return r.bind((function(e){return i.bind((function(n){return Ot(e,n)?gr(t.table,t.first,t.last):I.none()}))}))}))},si=function(e){if(!a(e))throw new Error("cases must be an array");if(0===e.length)throw new Error("there must be at least one case");var t=[],n={};U(e,(function(o,r){var i=Tt(o);if(1!==i.length)throw new Error("one and only one name per case");var s=i[0],l=o[s];if(void 0!==n[s])throw new Error("duplicate key detected:"+s);if("cata"===s)throw new Error("cannot have a case named cata (sorry)");if(!a(l))throw new Error("case arguments must be an array");t.push(s);n[s]=function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];var i=n.length;if(i!==l.length)throw new Error("Wrong number of arguments to case "+s+". Expected "+l.length+" ("+l+"), got "+i);return{fold:function(){for(var t=[],o=0;o<arguments.length;o++)t[o]=arguments[o];if(t.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+t.length);return t[r].apply(null,n)},match:function(e){var o=Tt(e);if(t.length!==o.length)throw new Error("Wrong number of arguments to match. Expected: "+t.join(",")+"\nActual: "+o.join(","));if(!Z(t,(function(e){return M(o,e)})))throw new Error("Not all branches were specified when using match. Specified: "+o.join(", ")+"\nRequired: "+t.join(", "));return e[s].apply(null,n)},log:function(e){console.log(e,{constructors:t,constructor:s,params:n})}}}}));return n},li={generate:si},ci=li.generate([{none:[]},{multiple:["elements"]},{single:["element"]}]),ui=function(e,t,n,o){return e.fold(t,n,o)},di=ci.none,fi=ci.multiple,pi=ci.single,mi=function(e,t,n){return{get:function(){return ii(e(),n).fold((function(){return t().fold(di,pi)}),(function(e){return fi(e)}))}}},hi=tinymce.util.Tools.resolve("tinymce.PluginManager"),gi=function(e,t){return gt.fromDom(e.dom.cloneNode(t))},bi=function(e){return gi(e,!1)},vi=function(e){return gi(e,!0)},yi=function(e,t){var n=gt.fromTag(t),o=to(e);Xn(n,o);return n},Ci=function(e,t){var n=yi(e,t),o=yn(vi(e));Tr(n,o);return n},Oi=function(e,t){var n=yi(e,t);vr(e,n);var o=yn(e);Tr(n,o);Nr(e);return n},xi=function(e,t){var n=function(n){var o=t(n);if(o<=0||null===o){var r=mo(n,e);return parseFloat(r)||0}return o},o=function(e,t){return z(t,(function(t,n){var o=mo(e,n),r=void 0===o?0:parseInt(o,10);return isNaN(r)?t:t+r}),0)},r=function(e,t,n){var r=o(e,n);return t>r?t-r:0};return{set:function(t,n){if(!p(n)&&!n.match(/^[0-9]+$/))throw new Error(e+".set accepts only positive integer values. Value was "+n);var o=t.dom;lo(o)&&(o.style[e]=n+"px")},get:n,getOuter:n,aggregate:o,max:r}},ji=function(){var e=rt().browser;return e.isIE()||e.isEdge()},Si=function(e,t){return Ee(e).getOr(t)},wi=function(e,t,n){return Si(mo(e,t),n)},Ti=function(e){return mo(e,"box-sizing")},ki=function(e,t,n,o){return t-wi(e,"padding-"+n,0)-wi(e,"padding-"+o,0)-wi(e,"border-"+n+"-width",0)-wi(e,"border-"+o+"-width",0)},Ni=function(e,t){var n=e.dom,o=n.getBoundingClientRect().height||n.offsetHeight;return"border-box"===t?o:ki(e,o,"top","bottom")},Ei=function(e,t){var n=e.dom,o=n.getBoundingClientRect().width||n.offsetWidth;return"border-box"===t?o:ki(e,o,"left","right")},Ai=function(e){return ji()?Ni(e,Ti(e)):wi(e,"height",e.dom.offsetHeight)},Ii=function(e){return ji()?Ei(e,Ti(e)):wi(e,"width",e.dom.offsetWidth)},Ri=function(e){return Ei(e,"content-box")},Li=xi("width",(function(e){return e.dom.offsetWidth})),_i=function(e){return Li.get(e)},Pi=function(e){return Li.getOuter(e)},Mi=Ri,Di=Ii,Bi=function(e,t){void 0===t&&(t=T);var n=e.grid,o=B(n.columns,v),r=B(n.rows,v);return F(o,(function(n){return Fi((function(){return X(r,(function(t){return or.getAt(e,t,n).filter((function(e){return e.column===n})).toArray()}))}),(function(e){return 1===e.colspan&&t(e.element)}),(function(){return or.getAt(e,0,n)}))}))},Fi=function(e,t,n){var o=e();return G(o,t).orThunk((function(){return I.from(o[0]).orThunk(n)})).map((function(e){return e.element}))},Ui=function(e){var t=e.grid,n=B(t.rows,v),o=B(t.columns,v);return F(n,(function(t){return Fi((function(){return X(o,(function(n){return or.getAt(e,t,n).filter((function(e){return e.row===t})).fold(b([]),(function(e){return[e]}))}))}),(function(e){return 1===e.rowspan}),(function(){return or.getAt(e,t,0)}))}))},Vi=function(e,t){if(t<0||t>=e.length-1)return I.none();var n=e[t].fold((function(){var n=Q(e.slice(0,t));return ie(n,(function(e,t){return e.map((function(e){return{value:e,delta:t+1}}))}))}),(function(e){return I.some({value:e,delta:0})})),o=e[t+1].fold((function(){var n=e.slice(t+1);return ie(n,(function(e,t){return e.map((function(e){return{value:e,delta:t+1}}))}))}),(function(e){return I.some({value:e,delta:1})}));return n.bind((function(e){return o.map((function(t){var n=t.delta+e.delta;return Math.abs(t.value-e.value)/n}))}))},Hi=function(e,t){return function(n){return"rtl"===qi(n)?t:e}},qi=function(e){return"rtl"===mo(e,"direction")?"rtl":"ltr"},$i=xi("height",(function(e){var t=e.dom;return An(e)?t.getBoundingClientRect().height:t.offsetHeight})),zi=function(e){return $i.get(e)},Wi=function(e){return $i.getOuter(e)},Gi=Ai,Ki=function(e,t){return{left:e,top:t,translate:function(n,o){return Ki(e+n,t+o)}}},Yi=Ki,Xi=function(e){var t=e.getBoundingClientRect();return Yi(t.left,t.top)},Zi=function(e,t){return void 0!==e?e:void 0!==t?t:0},Qi=function(e){var t=e.dom.ownerDocument,n=t.body,o=t.defaultView,r=t.documentElement;if(n===e.dom)return Yi(n.offsetLeft,n.offsetTop);var i=Zi(null==o?void 0:o.pageYOffset,r.scrollTop),a=Zi(null==o?void 0:o.pageXOffset,r.scrollLeft),s=Zi(r.clientTop,n.clientTop),l=Zi(r.clientLeft,n.clientLeft);return Ji(e).translate(a-l,i-s)},Ji=function(e){var t=e.dom,n=t.ownerDocument.body;return n===t?Yi(n.offsetLeft,n.offsetTop):An(e)?Xi(t):Yi(0,0)},ea=function(e,t){return{row:e,y:t}},ta=function(e,t){return{col:e,x:t}},na=function(e){return Qi(e).left+Pi(e)},oa=function(e){return Qi(e).left},ra=function(e,t){return ta(e,oa(t))},ia=function(e,t){return ta(e,na(t))},aa=function(e){return Qi(e).top},sa=function(e,t){return ea(e,aa(t))},la=function(e,t){return ea(e,aa(t)+Wi(t))},ca=function(e,t,n){if(0===n.length)return[];var o=F(n.slice(1),(function(t,n){return t.map((function(t){return e(n,t)}))})),r=n[n.length-1].map((function(e){return t(n.length-1,e)}));return o.concat([r])},ua=function(e){return-e},da={delta:v,positions:function(e){return ca(sa,la,e)},edge:aa},fa={delta:v,edge:oa,positions:function(e){return ca(ra,ia,e)}},pa={delta:ua,edge:na,positions:function(e){return ca(ia,ra,e)}},ma=Hi(fa,pa),ha={delta:function(e,t){return ma(t).delta(e,t)},positions:function(e,t){return ma(t).positions(e,t)},edge:function(e){return ma(e).edge(e)}},ga={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},ba=(Mr="[0-9]+",Dr="[eE][+-]?"+Mr,Br="\\.",Fr=function(e){return"(?:"+e+")?"},Ur=["Infinity",Mr+Br+Fr(Mr)+Fr(Dr),Br+Mr+Fr(Dr),Mr+Fr(Dr)].join("|"),new RegExp("^([+-]?(?:"+Ur+"))(.*)$")),va=function(e,t){return D(t,(function(t){return D(ga[t],(function(t){return e===t}))}))},ya=function(e,t){return I.from(ba.exec(e)).bind((function(e){var n=Number(e[1]),o=e[2];return va(o,t)?I.some({value:n,unit:o}):I.none()}))},Ca=/(\d+(\.\d+)?)%/,Oa=/(\d+(\.\d+)?)px|em/,xa=un("col"),ja=function(e,t,n){var o=hn(e).getOrThunk((function(){return Rn(dn(e))}));return t(e)/n(o)*100},Sa=function(e,t){fo(e,"width",t+"px")},wa=function(e,t){fo(e,"width",t+"%")},Ta=function(e,t){fo(e,"height",t+"px")},ka=function(e){return Gi(e)+"px"},Na=function(e,t,n,o){var r=Ro(e).map((function(e){var o=n(e);return Math.floor(t/100*o)})).getOr(t);o(e,r);return r},Ea=function(e,t,n,o){var r=parseFloat(e);return we(e,"%")&&"table"!==tn(t)?Na(t,r,n,o):r},Aa=function(e){var t=ka(e);return t?Ea(t,e,zi,Ta):zi(e)},Ia=function(e,t,n){return n(e)/Co(e,t)},Ra=function(e,t){return go(e,t).orThunk((function(){return Jn(e,t).map((function(e){return e+"px"}))}))},La=function(e){return Ra(e,"width")},_a=function(e){return Ra(e,"height")},Pa=function(e){return ja(e,_i,Mi)},Ma=function(e){return xa(e)?_i(e):Di(e)},Da=function(e){return Ia(e,"rowspan",Aa)},Ba=function(e){return La(e).bind((function(e){return ya(e,["fixed","relative","empty"])}))},Fa=function(e,t,n){fo(e,"width",t+n)},Ua=function(e){return _i(e)+"px"},Va=function(e){return ja(e,_i,Mi)+"%"},Ha=function(e){return La(e).exists((function(e){return Ca.test(e)}))},qa=function(e){return La(e).exists((function(e){return Oa.test(e)}))},$a=function(e){return La(e).isNone()},za=b(Ca),Wa=un("col"),Ga=function(e){return La(e).getOrThunk((function(){return Ma(e)+"px"}))},Ka=function(e){return _a(e).getOrThunk((function(){return Da(e)+"px"}))},Ya=function(e){return F(or.justColumns(e),(function(e){return I.from(e.element)}))},Xa=function(e){var t=rt().browser,n=t.isChrome()||t.isFirefox();return!Wa(e)||n},Za=function(e,t,n,o,r,i){return e.filter(o).fold((function(){return i(Vi(n,t))}),(function(e){return r(e)}))},Qa=function(e,t,n,o){var r=Bi(e),i=or.hasColumns(e)?Ya(e):r,a=[I.some(ha.edge(t))].concat(F(ha.positions(r,t),(function(e){return e.map((function(e){return e.x}))}))),s=j(Oo);return F(i,(function(e,t){return Za(e,t,a,s,(function(e){if(Xa(e))return n(e);var i=io(r[t],v);return Za(i,t,a,s,(function(e){return o(I.some(_i(e)))}),o)}),o)}))},Ja=function(e){return e.map((function(e){return e+"px"})).getOr("")},es=function(e,t){return Qa(e,t,Ga,Ja)},ts=function(e,t,n){return Qa(e,t,Pa,(function(e){return e.fold((function(){return n.minCellWidth()}),(function(e){return e/n.pixelWidth()*100}))}))},ns=function(e,t,n){return Qa(e,t,Ma,(function(e){return e.getOrThunk(n.minCellWidth)}))},os=function(e,t,n,o,r){var i=Ui(e),a=[I.some(n.edge(t))].concat(F(n.positions(i,t),(function(e){return e.map((function(e){return e.y}))})));return F(i,(function(e,t){return Za(e,t,a,j(xo),o,r)}))},rs=function(e,t,n){return os(e,t,n,Da,(function(e){return e.getOrThunk(wo)}))},is=function(e,t,n){return os(e,t,n,Ka,Ja)},as=function(e,t){return function(){return An(e)?t(e):parseFloat(go(e,"width").getOr("0"))}},ss=function(e){var t=as(e,_i),n=b(0);return{width:t,pixelWidth:t,getWidths:function(t,n){return ns(t,e,n)},getCellDelta:n,singleColumnWidth:b([0]),minCellWidth:n,setElementWidth:m,adjustTableWidth:m,isRelative:!0,label:"none"}},ls=function(e){var t=as(e,(function(e){return parseFloat(Va(e))})),n=as(e,_i),o=function(e){return e/n()*100},r=function(){return So()/n()*100},i=function(n){var o=t();wa(e,o+n/100*o)};return{width:t,pixelWidth:n,getWidths:function(t,n){return ts(t,e,n)},getCellDelta:o,singleColumnWidth:function(e,t){return[100-e]},minCellWidth:r,setElementWidth:wa,adjustTableWidth:i,isRelative:!0,label:"percent"}},cs=function(e){var t=as(e,_i),n=function(n){var o=t()+n;Sa(e,o)};return{width:t,pixelWidth:t,getWidths:function(t,n){return ns(t,e,n)},getCellDelta:v,singleColumnWidth:function(e,t){return[Math.max(So(),e+t)-e]},minCellWidth:So,setElementWidth:Sa,adjustTableWidth:n,isRelative:!1,label:"pixel"}},us=function(e,t){return null!==za().exec(t)?ls(e):cs(e)},ds=function(e){return La(e).fold((function(){return ss(e)}),(function(t){return us(e,t)}))},fs={getTableSize:ds,pixelSize:cs,percentageSize:ls,noneSize:ss},ps=function(e,t,n,o,r,i){return{minRow:e,minCol:t,maxRow:n,maxCol:o,allCells:r,selectedCells:i}},ms=function(e,t){var n=e.grid.columns,o=e.grid.rows,r=n,i=0,a=0,s=[],l=[];Nt(e.access,(function(e){s.push(e);if(t(e)){l.push(e);var n=e.row,c=n+e.rowspan-1,u=e.column,d=u+e.colspan-1;n<o?o=n:c>i&&(i=c);u<r?r=u:d>a&&(a=d)}}));return ps(o,r,i,a,s,l)},hs=function(e,t,n){var o=e[n].element,r=gt.fromTag("td");Or(r,gt.fromTag("br"));(t?Or:Cr)(o,r)},gs=function(e,t,n,o){for(var r=t.grid.columns,i=t.grid.rows,a=0;a<i;a++)for(var s=!1,l=0;l<r;l++)if(!(a<n.minRow||a>n.maxRow||l<n.minCol||l>n.maxCol)){or.getAt(t,a,l).filter(o).isNone()?hs(e,s,a):s=!0}},bs=function(e,t,n,o){Nt(n.columns,(function(e){(e.column<t.minCol||e.column>t.maxCol)&&Nr(e.element)}));var r=q(To(e,"tr"),(function(e){return 0===e.dom.childElementCount}));U(r,Nr);t.minCol!==t.maxCol&&t.minRow!==t.maxRow||U(To(e,"th,td"),(function(e){eo(e,"rowspan");eo(e,"colspan")}));eo(e,Yo);eo(e,"data-snooker-col-series");fs.getTableSize(e).adjustTableWidth(o)},vs=function(e,t,n,o){if(0===o.minCol&&t.grid.columns===o.maxCol+1)return 0;var r=ns(t,e,n),i=z(r,(function(e,t){return e+t}),0),a=z(r.slice(o.minCol,o.maxCol+1),(function(e,t){return e+t}),0)/i*n.pixelWidth()-n.pixelWidth();return n.getCellDelta(a)},ys=function(e,t){var n=function(e){return bt(e.element,t)},o=vi(e),r=Do(o),i=fs.getTableSize(e),a=or.generate(r),s=ms(a,n),l="th:not("+t+"),td:not("+t+")",c=ko(o,"th,td",(function(e){return bt(e,l)}));U(c,Nr);gs(r,a,s,n);var u=or.fromTable(e),d=vs(e,u,i,s);bs(o,s,a,d);return o},Cs="",Os=function(e){return"img"===tn(e)?1:Rr(e).fold((function(){return yn(e).length}),(function(e){return e.length}))},xs=function(e){return Rr(e).filter((function(e){return 0!==e.trim().length||e.indexOf(Cs)>-1})).isSome()},js=["img","br"],Ss=function(e){return xs(e)||M(js,tn(e))},ws=function(e){return qn(e,Ss)},Ts=function(e){return ks(e,Ss)},ks=function(e,t){var n=function(e){for(var o=yn(e),r=o.length-1;r>=0;r--){var i=o[r];if(t(i))return I.some(i);var a=n(i);if(a.isSome())return a}return I.none()};return n(e)},Ns={scope:["row","col"]},Es=function(e){return function(){var t=gt.fromTag("td",e.dom);Or(t,gt.fromTag("br",e.dom));return t}},As=function(e){return function(){return gt.fromTag("col",e.dom)}},Is=function(e){return function(){return gt.fromTag("colgroup",e.dom)}},Rs=function(e){return function(){return gt.fromTag("tr",e.dom)}},Ls=function(e,t,n){var o=Ci(e,t);Nt(n,(function(e,t){null===e?eo(o,t):Yn(o,t,e)}));return o},_s=function(e){return e},Ps=function(e,t,n){return ws(e).map((function(o){var r=n.join(","),i=Mn(o,r,(function(t){return Ot(t,e)}));return $(i,(function(e,t){var n=bi(t);eo(n,"contenteditable");Or(e,n);return n}),t)})).getOr(t)},Ms=function(e,t){Nt(Ns,(function(n,o){return Jn(e,o).filter((function(e){return M(n,e)})).each((function(e){return Yn(t,o,e)}))}))},Ds=function(e,t,n){var o=function(e,t){vo(e.element,t);bo(t,"height");1!==e.colspan&&bo(t,"width")},r=function(r){var i=gt.fromTag(tn(r.element),t.dom),a=n.getOr(["strong","em","b","i","span","font","h1","h2","h3","h4","h5","h6","p","div"]),s=a.length>0?Ps(r.element,i,a):i;Or(s,gt.fromTag("br"));o(r,i);Ms(r.element,i);e(r.element,i);return i};return{col:function(n){var r=gt.fromTag(tn(n.element),t.dom);o(n,r);e(n.element,r);return r},colgroup:Is(t),row:Rs(t),cell:r,replace:Ls,colGap:As(t),gap:Es(t)}},Bs=function(e){return{col:As(e),colgroup:Is(e),row:Rs(e),cell:Es(e),replace:_s,colGap:As(e),gap:Es(e)}},Fs=function(e,t){var n=(t||document).createElement("div");n.innerHTML=e;return yn(gt.fromDom(n))},Us=function(e){return F(e,gt.fromDom)},Vs=function(e){return e.nodeName.toLowerCase()},Hs=function(e){return gt.fromDom(e.getBody())},qs=function(e){return e.getBoundingClientRect().width},$s=function(e){return e.getBoundingClientRect().height},zs=function(e){return function(t){return Ot(t,Hs(e))}},Ws=function(e){return e?e.replace(/px$/,""):""},Gs=function(e){return/^\d+(\.\d+)?$/.test(e)?e+"px":e},Ks=function(e){eo(e,"data-mce-style");var t=function(e){return eo(e,"data-mce-style")};U(Ao(e),t);U(Io(e),t);U(Lo(e),t)},Ys=function(e,t){var n=e.dom.getStyle(t,"width")||e.dom.getAttrib(t,"width");return I.from(n).filter(ke)},Xs=function(e){return/^(\d+(\.\d+)?)%$/.test(e)},Zs=function(e){return/^(\d+(\.\d+)?)px$/.test(e)},Qs=function(e){return gt.fromDom(e.selection.getStart())},Js=function(e){return gt.fromDom(e.selection.getEnd())},el=function(e){return ui(e.get(),b([]),v,ee)},tl=function(e){var t=function(e,t){return Jn(e,t).exists((function(e){return parseInt(e,10)>1}))},n=function(e){return t(e,"rowspan")||t(e,"colspan")},o=el(e);return o.length>0&&Z(o,n)?I.some(o):I.none()},nl=function(e,t,n){return ui(t.get(),I.none,(function(t){return t.length<=1?I.none():ai(e,n.firstSelectedSelector,n.lastSelectedSelector).map((function(e){return{bounds:e,cells:t}}))}),I.none)},ol="data-mce-selected",rl="td["+ol+"],th["+ol+"]",il="["+ol+"]",al="data-mce-first-selected",sl="td["+al+"],th["+al+"]",ll="data-mce-last-selected",cl="td["+ll+"],th["+ll+"]",ul=il,dl={selected:ol,selectedSelector:rl,firstSelected:al,firstSelectedSelector:sl,lastSelected:ll,lastSelectedSelector:cl},fl=function(e){return{element:e,mergable:I.none(),unmergable:I.none(),selection:[e]}},pl=function(e,t,n){return{element:n,mergable:nl(t,e,dl),unmergable:tl(e),selection:el(e)}},ml=function(e,t,n){return{element:e,clipboard:t,generators:n}},hl=function(e,t,n,o){return{selection:el(e),clipboard:n,generators:o}},gl=function(e){return Ro(e).bind((function(e){return ii(e,dl.firstSelectedSelector)})).fold(b(e),(function(e){return e[0]}))},bl=function(e){return function(t,n){var o=tn(t),r="col"===o||"colgroup"===o?gl(t):t;return Gn(r,e,n)}},vl=bl("th,td,caption"),yl=bl("th,td"),Cl=function(e){return el(e)},Ol=function(e,t){var n=yl(e),o=n.bind((function(e){return Ro(e)})).map((function(e){return Lo(e)}));return ro(n,o,(function(e,n){return q(n,(function(n){return D(Us(n.dom.cells),(function(n){return"1"===Qn(n,t)||Ot(n,e)}))}))})).getOr([])},xl=function(e){return Ro(e[0]).map((function(e){var t=ys(e,ul);Ks(t);return[t]}))},jl=function(e,t){return F(t,(function(t){return e.selection.serializer.serialize(t.dom,{})})).join("")},Sl=function(e){return F(e,(function(e){return e.dom.innerText})).join("")},wl=function(e,t,n){e.on("BeforeGetContent",(function(n){var o=function(t){n.preventDefault();xl(t).each((function(t){n.content="text"===n.format?Sl(t):jl(e,t)}))};!0===n.selection&&ui(t.get(),m,o,m)}));e.on("BeforeSetContent",(function(o){if(!0===o.selection&&!0===o.paste){var r=Cl(t);oe(r).each((function(t){Ro(t).each((function(r){var i=q(Fs(o.content),(function(e){return"meta"!==tn(e)})),a=un("table");if(1===i.length&&a(i[0])){o.preventDefault();var s=gt.fromDom(e.getDoc()),l=Bs(s),c=ml(t,i[0],l);n.pasteCells(r,c).each((function(){e.focus()}))}}))}))}}))},Tl=li.generate([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}]),kl=ae({},Tl),Nl=function(e,t){return 0===e.length?kl.none():1===e.length?kl.only(0):0===t?kl.left(0,1):t===e.length-1?kl.right(t-1,t):t>0&&t<e.length-1?kl.middle(t-1,t,t+1):kl.none()},El=function(e,t,n,o,r){var i=e.slice(0),a=Nl(e,t),s=b(F(i,b(0))),l=function(e){return o.singleColumnWidth(i[e],n)},c=function(e,t){return r.calcLeftEdgeDeltas(i,e,t,n,o.minCellWidth(),o.isRelative)},u=function(e,t,a){return r.calcMiddleDeltas(i,e,t,a,n,o.minCellWidth(),o.isRelative)},d=function(e,t){return r.calcRightEdgeDeltas(i,e,t,n,o.minCellWidth(),o.isRelative)};return a.fold(s,l,c,u,d)},Al=function(e,t,n){for(var o=0,r=e;r<t;r++)o+=void 0!==n[r]?n[r]:0;return o},Il=function(e,t){var n=or.justCells(e);return F(n,(function(e){var n=Al(e.column,e.column+e.colspan,t);return{element:e.element,width:n,colspan:e.colspan}}))},Rl=function(e,t){var n=or.justColumns(e);return F(n,(function(e,n){return{element:e.element,width:t[n],colspan:e.colspan}}))},Ll=function(e,t){var n=or.justCells(e);return F(n,(function(e){var n=Al(e.row,e.row+e.rowspan,t);return{element:e.element,height:n,rowspan:e.rowspan}}))},_l=function(e,t){return F(e.all,(function(e,n){return{element:e.element,height:t[n]}}))},Pl=function(e){return $(e,(function(e,t){return e+t}),0)},Ml=function(e,t){return or.hasColumns(e)?Rl(e,t):Il(e,t)},Dl=function(e,t,n){var o=Ml(e,t);U(o,(function(e){n.setElementWidth(e.element,e.width)}))},Bl=function(e,t,n,o,r){var i=or.fromTable(e),a=r.getCellDelta(t),s=r.getWidths(i,r),l=n===i.grid.columns-1,c=o.clampTableDelta(s,n,a,r.minCellWidth(),l),u=El(s,n,c,r,o),d=F(u,(function(e,t){return e+s[t]}));Dl(i,d,r);o.resizeTable(r.adjustTableWidth,c,l)},Fl=function(e,t,n,o){var r=or.fromTable(e),i=rs(r,e,o),a=F(i,(function(e,o){return n===o?Math.max(t+e,wo()):e})),s=Ll(r,a),l=_l(r,a);U(l,(function(e){Ta(e.element,e.height)}));U(s,(function(e){Ta(e.element,e.height)}));var c=Pl(a);Ta(e,c)},Ul=function(e,t,n,o,r){var i=or.generate(t),a=o.getWidths(i,o),s=o.pixelWidth(),l=r.calcRedestributedWidths(a,s,n.pixelDelta,o.isRelative),c=l.newSizes,u=l.delta;Dl(i,c,o);o.adjustTableWidth(u)},Vl=function(e,t,n,o){var r=or.generate(t),i=o.getWidths(r,o);Dl(r,i,o)},Hl=function(e){return F(e,b(0))},ql=function(e,t,n,o,r){return r(e.slice(0,t)).concat(o).concat(r(e.slice(n)))},$l=function(e){return function(t,n,o,r){if(e(o)){var i=Math.max(r,t[n]-Math.abs(o)),a=Math.abs(i-t[n]);return o>=0?a:-a}return o}},zl=$l((function(e){return e<0})),Wl=$l(T),Gl=function(){var e=function(e,t,n,o,r){var i=zl(e,t,o,r);return ql(e,t,n+1,[i,0],Hl)},t=function(e,t,n,o){var r=(100+n)/100,i=Math.max(o,(e[t]+n)/r);return F(e,(function(e,n){return(n===t?i:e/r)-e}))},n=function(n,o,r,i,a,s){return s?t(n,o,i,a):e(n,o,r,i,a)},o=function(e,t,o,r,i,a,s){return n(e,o,r,i,a,s)},r=function(e,n,o,r,i,a){if(a)return t(e,o,r,i);var s=zl(e,o,r,i);return Hl(e.slice(0,o)).concat([s])};return{resizeTable:function(e,t){return e(t)},clampTableDelta:zl,calcLeftEdgeDeltas:n,calcMiddleDeltas:o,calcRightEdgeDeltas:r,calcRedestributedWidths:function(e,t,n,o){if(o){var r=(t+n)/t,i=F(e,(function(e){return e/r}));return{delta:100*r-100,newSizes:i}}return{delta:n,newSizes:e}}}},Kl=function(){var e=function(e,t,n,o,r){var i=Wl(e,o>=0?n:t,o,r);return ql(e,t,n+1,[i,-i],Hl)},t=function(t,n,o,r,i,a){return e(t,o,r,i,a)};return{resizeTable:function(e,t,n){n&&e(t)},clampTableDelta:function(e,t,n,o,r){if(r){if(n>=0)return n;var i=z(e,(function(e,t){return e+t-o}),0);return Math.max(-i,n)}return zl(e,t,n,o)},calcLeftEdgeDeltas:e,calcMiddleDeltas:t,calcRightEdgeDeltas:function(e,t,n,o,r,i){if(i)return Hl(e);var a=o/e.length;return F(e,b(a))},calcRedestributedWidths:function(e,t,n,o){return{delta:0,newSizes:e}}}},Yl=function(e,t){var n=I.from(e.dom.documentElement).map(gt.fromDom).getOr(e);return{parent:b(n),view:b(e),origin:b(Yi(0,0)),isResizable:t}},Xl=function(e,t,n){var o=function(){return Qi(t)};return{parent:b(t),view:b(e),origin:o,isResizable:n}},Zl=function(e,t,n){return{parent:b(t),view:b(e),origin:b(Yi(0,0)),isResizable:n}},Ql={only:Yl,detached:Xl,body:Zl},Jl=li.generate([{invalid:["raw"]},{pixels:["value"]},{percent:["value"]}]),ec=function(e,t,n){var o=n.substring(0,n.length-e.length),r=parseFloat(o);return o===r.toString()?t(r):Jl.invalid(n)},tc=function(e){return we(e,"%")?ec("%",Jl.percent,e):we(e,"px")?ec("px",Jl.pixels,e):Jl.invalid(e)},nc=ae(ae({},Jl),{from:tc}),oc=function(e,t){return F(e,(function(e){return nc.from(e).fold((function(){return e}),(function(e){return e/t*100+"%"}),(function(e){return e+"%"}))}))},rc=function(e,t,n){var o=n/t;return F(e,(function(e){return nc.from(e).fold((function(){return e}),(function(e){return e*o+"px"}),(function(e){return e/100*n+"px"}))}))},ic=function(e,t){var n=e.fold((function(){return b("")}),(function(e){return b(e/t+"px")}),(function(){return b(100/t+"%")}));return B(t,n)},ac=function(e,t,n){return e.fold((function(){return t}),(function(e){return rc(t,n,e)}),(function(e){return oc(t,n)}))},sc=function(e,t,n){var o=nc.from(n),r=Z(e,(function(e){return"0px"===e}))?ic(o,e.length):ac(o,e,t);return dc(r)},lc=function(e,t){return 0===e.length?t:$(e,(function(e,t){return nc.from(t).fold(b(0),v,v)+e}),0)},cc=function(e,t){var n=Math.floor(e);return{value:n+t,remainder:e-n}},uc=function(e,t){return nc.from(e).fold(b(e),(function(e){return e+t+"px"}),(function(e){return e+t+"%"}))},dc=function(e){if(0===e.length)return e;var t=$(e,(function(e,t){var n=nc.from(t).fold((function(){return{value:t,remainder:0}}),(function(e){return cc(e,"px")}),(function(e){return{value:e+"%",remainder:0}}));return{output:[n.value].concat(e.output),remainder:e.remainder+n.remainder}}),{output:[],remainder:0}),n=t.output;return n.slice(0,n.length-1).concat([uc(n[n.length-1],Math.round(t.remainder))])},fc=nc.from,pc=function(e,t,n){U(t,(function(t){var o=e.slice(t.column,t.colspan+t.column),r=lc(o,So());fo(t.element,"width",r+n)}))},mc=function(e,t,n){U(t,(function(t,o){var r=lc([e[o]],So());fo(t.element,"width",r+n)}))},hc=function(e,t,n,o){U(n,(function(t){var n=e.slice(t.row,t.rowspan+t.row),r=lc(n,wo());fo(t.element,"height",r+o)}));U(t,(function(t,n){fo(t.element,"height",e[n])}))},gc=function(e){return fc(e).fold(b("px"),b("px"),b("%"))},bc=function(e,t,n){var o=or.fromTable(e),r=o.all,i=or.justCells(o),a=or.justColumns(o);t.each((function(t){var n=gc(t),r=_i(e),s=es(o,e),l=sc(s,r,t);or.hasColumns(o)?mc(l,a,n):pc(l,i,n);fo(e,"width",t)}));n.each((function(t){var n=gc(t),a=zi(e),s=is(o,e,da),l=sc(s,a,t);hc(l,r,i,n);fo(e,"height",t)}))},vc=Ha,yc=qa,Cc=$a,Oc=function(e){return or.fromTable(e).grid},xc=function(e){var t=[];return{bind:function(e){if(void 0===e)throw new Error("Event bind error: undefined handler");t.push(e)},unbind:function(e){t=q(t,(function(t){return t!==e}))},trigger:function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];var r={};U(e,(function(e,t){r[e]=n[t]}));U(t,(function(e){e(r)}))}}},jc=function(e){return{registry:Et(e,(function(e){return{bind:e.bind,unbind:e.unbind}})),trigger:Et(e,(function(e){return e.trigger}))}},Sc=function(e,t){var n=null,o=function(){if(!s(n)){clearTimeout(n);n=null}},r=function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];o();n=setTimeout((function(){n=null;e.apply(null,r)}),t)};return{cancel:o,throttle:r}},wc=function(e){return e.slice(0).sort()},Tc=function(e,t){throw new Error("All required keys ("+wc(e).join(", ")+") were not specified. Specified keys were: "+wc(t).join(", ")+".")},kc=function(e){throw new Error("Unsupported keys for object: "+wc(e).join(", "))},Nc=function(e,t){if(!a(t))throw new Error("The "+e+" fields must be an array. Was: "+t+".");U(t,(function(t){if(!r(t))throw new Error("The value "+t+" in the "+e+" fields was not a string.")}))},Ec=function(e,t){throw new Error("All values need to be of type: "+t+". Keys ("+wc(e).join(", ")+") were not.")},Ac=function(e){var t=wc(e);G(t,(function(e,n){return n<t.length-1&&e===t[n+1]})).each((function(e){throw new Error("The field: "+e+" occurs more than once in the combined fields: ["+t.join(", ")+"].")}))},Ic=function(e,t){return Rc(e,t,{validate:f,label:"function"})},Rc=function(e,t,n){if(0===t.length)throw new Error("You must specify at least one required field.");Nc("required",t);Ac(t);return function(o){var r=Tt(o);Z(t,(function(e){return M(r,e)}))||Tc(t,r);e(t,r);var i=q(t,(function(e){return!n.validate(o[e],e)}));i.length>0&&Ec(i,n.label);return o}},Lc=function(e,t){var n=q(t,(function(t){return!M(e,t)}));n.length>0&&kc(n)},_c=function(e){return Ic(Lc,e)},Pc=_c(["compare","extract","mutate","sink"]),Mc=_c(["element","start","stop","destroy"]),Dc=_c(["forceDrop","drop","move","delayDrop"]),Bc=function(){var e=I.none(),t=function(){e=I.none()},n=function(t,n){var o=e.map((function(e){return t.compare(e,n)}));e=I.some(n);return o},o=function(e,t){t.extract(e).each((function(e){n(t,e).each((function(e){r.trigger.move(e)}))}))},r=jc({move:xc(["info"])});return{onEvent:o,reset:t,events:r.registry}},Fc=function(){var e=jc({move:xc(["info"])});return{onEvent:m,reset:m,events:e.registry}},Uc=function(){var e=Fc(),t=Bc(),n=e;return{on:function(){n.reset();n=t},off:function(){n.reset();n=e},isOn:function(){return n===t},onEvent:function(e,t){n.onEvent(e,t)},events:t.events}},Vc=function(e,t,n){var o=!1,r=jc({start:xc([]),stop:xc([])}),i=Uc(),a=function(){p.stop();if(i.isOn()){i.off();r.trigger.stop()}},s=Sc(a,200),l=function(e){p.start(e);i.on();r.trigger.start()},c=function(e){s.cancel();i.onEvent(e,t)};i.events.move.bind((function(n){t.mutate(e,n.info)}));var u=function(){o=!0},d=function(){o=!1},f=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];o&&e.apply(null,t)}},p=t.sink(Dc({forceDrop:a,drop:f(a),move:f(c),delayDrop:f(s.throttle)}),n),m=function(){p.destroy()};return{element:p.element,go:l,on:u,off:d,destroy:m,events:r.registry}},Hc=function(e,t,n,o,r,i,a){return{target:e,x:t,y:n,stop:o,prevent:r,kill:i,raw:a}},qc=function(e){var t=gt.fromDom(Nn(e).getOr(e.target)),n=function(){return e.stopPropagation()},o=function(){return e.preventDefault()},r=h(o,n);return Hc(t,e.clientX,e.clientY,n,o,r,e)},$c=function(e,t){return function(n){e(n)&&t(qc(n))}},zc=function(e,t,n,o,r){var i=$c(n,o);e.dom.addEventListener(t,i,r);return{unbind:C(Gc,e,t,i,r)}},Wc=function(e,t,n,o){return zc(e,t,n,o,!1)},Gc=function(e,t,n,o){e.dom.removeEventListener(t,n,o)},Kc=T,Yc=function(e,t,n){return Wc(e,t,Kc,n)},Xc=qc,Zc=function(e,t){var n=Qn(e,t);return void 0===n||""===n?[]:n.split(" ")},Qc=function(e,t,n){var o=Zc(e,t).concat([n]);Yn(e,t,o.join(" "));return!0},Jc=function(e,t,n){var o=q(Zc(e,t),(function(e){return e!==n}));o.length>0?Yn(e,t,o.join(" ")):eo(e,t);return!1},eu=function(e){return void 0!==e.dom.classList},tu=function(e){return Zc(e,"class")},nu=function(e,t){return Qc(e,"class",t)},ou=function(e,t){return Jc(e,"class",t)},ru=function(e,t){eu(e)?e.dom.classList.add(t):nu(e,t)},iu=function(e){0===(eu(e)?e.dom.classList:tu(e)).length&&eo(e,"class")},au=function(e,t){if(eu(e)){e.dom.classList.remove(t)}else ou(e,t);iu(e)},su=function(e,t){return eu(e)&&e.dom.classList.contains(t)},lu=function(e){var t=e.replace(/\./g,"-");return{resolve:function(e){return t+"-"+e}}},cu=lu("ephox-dragster"),uu=cu.resolve,du=function(e){var t=ae({layerClass:uu("blocker")},e),n=gt.fromTag("div");Yn(n,"role","presentation");po(n,{position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%"});ru(n,uu("blocker"));ru(n,t.layerClass);return{element:b(n),destroy:function(){Nr(n)}}},fu=function(e,t){return Yi(t.left-e.left,t.top-e.top)},pu=function(e){return I.some(Yi(e.x,e.y))},mu=function(e,t){e.mutate(t.left,t.top)},hu=function(e,t){var n=du(t),o=Yc(n.element(),"mousedown",e.forceDrop),r=Yc(n.element(),"mouseup",e.drop),i=Yc(n.element(),"mousemove",e.move),a=Yc(n.element(),"mouseout",e.delayDrop),s=function(){n.destroy();r.unbind();i.unbind();a.unbind();o.unbind()},l=function(e){Or(e,n.element())},c=function(){Nr(n.element())};return Mc({element:n.element,start:l,stop:c,destroy:s})},gu=Pc({compare:fu,extract:pu,sink:hu,mutate:mu}),bu=function(e,t){void 0===t&&(t={});var n=void 0!==t.mode?t.mode:gu;return Vc(e,n,t)},vu=function(e){return Gn(e,"[contenteditable]")},yu=function(e,t){void 0===t&&(t=!1);return!rt().browser.isIE()&&An(e)?e.dom.isContentEditable:vu(e).fold(b(t),(function(e){return"true"===Cu(e)}))},Cu=function(e){return e.dom.contentEditable},Ou=lu("ephox-snooker"),xu=Ou.resolve,ju=function(){var e=jc({drag:xc(["xDelta","yDelta"])});return{mutate:function(t,n){e.trigger.drag(t,n)},events:e.registry}},Su=function(){var e=jc({drag:xc(["xDelta","yDelta","target"])}),t=I.none(),n=ju();n.events.drag.bind((function(n){t.each((function(t){e.trigger.drag(n.xDelta,n.yDelta,t)}))}));return{assign:function(e){t=I.some(e)},get:function(){return t},mutate:n.mutate,events:e.registry}},wu=function(e,t,n,o,r){var i=gt.fromTag("div");po(i,{position:"absolute",left:t-o/2+"px",top:n+"px",height:r+"px",width:o+"px"});Xn(i,{"data-column":e,role:"presentation"});return i},Tu=function(e,t,n,o,r){var i=gt.fromTag("div");po(i,{position:"absolute",left:t+"px",top:n-r/2+"px",height:r+"px",width:o+"px"});Xn(i,{"data-row":e,role:"presentation"});return i},ku=xu("resizer-bar"),Nu=xu("resizer-rows"),Eu=xu("resizer-cols"),Au=7,Iu=function(e,t){return X(e.all,(function(e,n){return t(e.element)?[n]:[]}))},Ru=function(e,t){var n=[];B(e.grid.columns,(function(o){or.getColumnAt(e,o).map((function(e){return e.element})).forall(t)&&n.push(o)}));return q(n,(function(n){var o=or.filterItems(e,(function(e){return e.column===n}));return Z(o,(function(e){return t(e.element)}))}))},Lu=function(e){var t=Bn(e.parent(),"."+ku);U(t,Nr)},_u=function(e,t,n){var o=e.origin();U(t,(function(t){t.each((function(t){var r=n(o,t);ru(r,ku);Or(e.parent(),r)}))}))},Pu=function(e,t,n,o){_u(e,t,(function(e,t){var r=wu(t.col,t.x-e.left,n.top-e.top,Au,o);ru(r,Eu);return r}))},Mu=function(e,t,n,o){_u(e,t,(function(e,t){var r=Tu(t.row,n.left-e.left,t.y-e.top,o,Au);ru(r,Nu);return r}))},Du=function(e,t,n,o,r){var i=Qi(n),a=t.isResizable,s=o.length>0?da.positions(o,n):[],l=s.length>0?Iu(e,a):[],c=q(s,(function(e,t){return D(l,(function(e){return t===e}))}));Mu(t,c,i,Pi(n));var u=r.length>0?ha.positions(r,n):[],d=u.length>0?Ru(e,a):[],f=q(u,(function(e,t){return D(d,(function(e){return t===e}))}));Pu(t,f,i,Wi(n))},Bu=function(e,t){Lu(e);if(e.isResizable(t)){var n=or.fromTable(t),o=Ui(n),r=Bi(n);Du(n,e,t,o,r)}},Fu=function(e,t){var n=Bn(e.parent(),"."+ku);U(n,t)},Uu=function(e){Fu(e,(function(e){fo(e,"display","none")}))},Vu=function(e){Fu(e,(function(e){fo(e,"display","block")}))},Hu=function(e){return su(e,Nu)},qu=function(e){return su(e,Eu)},$u=xu("resizer-bar-dragging"),zu=function(e){var t=Su(),n=bu(t,{}),o=I.none(),r=function(e,t){return I.from(Qn(e,t))};t.events.drag.bind((function(e){r(e.target,"data-row").each((function(t){var n=jo(e.target,"top");fo(e.target,"top",n+e.yDelta+"px")}));r(e.target,"data-column").each((function(t){var n=jo(e.target,"left");fo(e.target,"left",n+e.xDelta+"px")}))}));var i=function(e,t){return jo(e,t)-yo(e,"data-initial-"+t,0)};n.events.stop.bind((function(){t.get().each((function(t){o.each((function(n){r(t,"data-row").each((function(e){var o=i(t,"top");eo(t,"data-initial-top");p.trigger.adjustHeight(n,o,parseInt(e,10))}));r(t,"data-column").each((function(e){var o=i(t,"left");eo(t,"data-initial-left");p.trigger.adjustWidth(n,o,parseInt(e,10))}));Bu(e,n)}))}))}));var a=function(o,r){p.trigger.startAdjust();t.assign(o);Yn(o,"data-initial-"+r,jo(o,r));ru(o,$u);fo(o,"opacity","0.2");n.go(e.parent())},s=Yc(e.parent(),"mousedown",(function(e){Hu(e.target)&&a(e.target,"top");qu(e.target)&&a(e.target,"left")})),l=function(t){return Ot(t,e.view())},c=function(e){return Gn(e,"table",l).filter(yu)},u=Yc(e.view(),"mouseover",(function(t){c(t.target).fold((function(){An(t.target)&&Lu(e)}),(function(t){o=I.some(t);Bu(e,t)}))})),d=function(){s.unbind();u.unbind();n.destroy();Lu(e)},f=function(t){Bu(e,t)},p=jc({adjustHeight:xc(["table","delta","row"]),adjustWidth:xc(["table","delta","column"]),startAdjust:xc([])});return{destroy:d,refresh:f,on:n.on,off:n.off,hideBars:C(Uu,e),showBars:C(Vu,e),events:p.registry}},Wu=function(e,t,n){var o=da,r=ha,i=zu(e),a=jc({beforeResize:xc(["table","type"]),afterResize:xc(["table","type"]),startDrag:xc([])});i.events.adjustHeight.bind((function(e){var t=e.table;a.trigger.beforeResize(t,"row");var n=o.delta(e.delta,t);Fl(t,n,e.row,o);a.trigger.afterResize(t,"row")}));i.events.startAdjust.bind((function(e){a.trigger.startDrag()}));i.events.adjustWidth.bind((function(e){var o=e.table;a.trigger.beforeResize(o,"col");var i=r.delta(e.delta,o),s=n(o);Bl(o,i,e.column,t,s);a.trigger.afterResize(o,"col")}));return{on:i.on,off:i.off,hideBars:i.hideBars,showBars:i.showBars,destroy:i.destroy,events:a.registry}},Gu={create:Wu},Ku=function(e,t){return e.fire("newrow",{node:t})},Yu=function(e,t){return e.fire("newcell",{node:t})},Xu=function(e,t,n,o,r){e.fire("ObjectResizeStart",{target:t,width:n,height:o,origin:r})},Zu=function(e,t,n,o,r){e.fire("ObjectResized",{target:t,width:n,height:o,origin:r})},Qu=function(e,t,n,o,r){e.fire("TableSelectionChange",{cells:t,start:n,finish:o,otherCells:r})},Ju=function(e){e.fire("TableSelectionClear")},ed=function(e,t,n){e.fire("TableModified",ae(ae({},n),{table:t}))},td={structure:!1,style:!0},nd={structure:!0,style:!1},od={structure:!0,style:!0},rd="tableprops tabledelete | tableinsertrowbefore tableinsertrowafter tabledeleterow | tableinsertcolbefore tableinsertcolafter tabledeletecol",id={"border-collapse":"collapse",width:"100%"},ad=B(5,(function(e){var t=e+1+"px";return{title:t,value:t}})),sd=F(["Solid","Dotted","Dashed","Double","Groove","Ridge","Inset","Outset","None","Hidden"],(function(e){return{title:e,value:e.toLowerCase()}})),ld=function(e){var t;if(Ed(e)){var n=e.dom,o=null!==(t=n.getParent(e.selection.getStart(),n.isBlock))&&void 0!==t?t:e.getBody(),r=Mi(gt.fromDom(o));return ae(ae({},id),{width:r+"px"})}return Ad(e)?Lt(id,(function(e,t){return"width"!==t})):id},cd={border:"1"},ud="preservetable",dd=function(e){return e.getParam("table_sizing_mode","auto")},fd=function(e){return e.getParam("table_responsive_width")},pd=function(e){return e.getParam("table_border_widths",ad,"array")},md=function(e){return e.getParam("table_border_styles",sd,"array")},hd=function(e){return e.getParam("table_default_attributes",cd,"object")},gd=function(e){return e.getParam("table_default_styles",ld(e),"object")},bd=function(e){return e.getParam("table_resize_bars",!0,"boolean")},vd=function(e){return e.getParam("table_tab_navigation",!0,"boolean")},yd=function(e){return e.getParam("table_cell_advtab",!0,"boolean")},Cd=function(e){return e.getParam("table_row_advtab",!0,"boolean")},Od=function(e){return e.getParam("table_advtab",!0,"boolean")},xd=function(e){return e.getParam("table_appearance_options",!0,"boolean")},jd=function(e){return e.getParam("table_grid",!0,"boolean")},Sd=function(e){return e.getParam("table_style_by_css",!1,"boolean")},wd=function(e){return e.getParam("table_cell_class_list",[],"array")},Td=function(e){return e.getParam("table_row_class_list",[],"array")},kd=function(e){return e.getParam("table_class_list",[],"array")},Nd=function(e){return"relative"===dd(e)||!0===fd(e)},Ed=function(e){return"fixed"===dd(e)||!1===fd(e)},Ad=function(e){return"responsive"===dd(e)},Id=function(e){return e.getParam("table_toolbar",rd)},Rd=function(e){return e.getParam("table_use_colgroups",!1,"boolean")},Ld=function(e){var t="section",n=e.getParam("table_header_type",t,"string");return M(["section","cells","sectionCells","auto"],n)?n:t},_d=function(e){var t=["preservetable","resizetable"],n=e.getParam("table_column_resizing",ud,"string");return G(t,(function(e){return e===n})).getOr(ud)},Pd=function(e){return"preservetable"===_d(e)},Md=function(e){return"resizetable"===_d(e)},Dd=function(e){var t=e.getParam("table_clone_elements");return r(t)?I.some(t.split(/[ ,]/)):Array.isArray(t)?I.some(t):I.none()},Bd=function(e){var t=e.getParam("object_resizing",!0);return r(t)?"table"===t:t},Fd=function(e){return e.getParam("table_background_color_map",[],"array")},Ud=function(e){return e.getParam("table_border_color_map",[],"array")},Vd=function(e,t){return Nd(e)?fs.percentageSize(t):Ed(e)?fs.pixelSize(t):fs.getTableSize(t)},Hd=function(e){eo(e,"width")},qd=function(e){var t=Va(e);bc(e,I.some(t),I.none());Hd(e)},$d=function(e){var t=Ua(e);bc(e,I.some(t),I.none());Hd(e)},zd=function(e){bo(e,"width");var t=Io(e),n=t.length>0?t:Ao(e);U(n,(function(e){bo(e,"width");Hd(e)}));Hd(e)},Wd=qd,Gd=$d,Kd=zd,Yd=function(e){var t=or.fromTable(e);or.hasColumns(t)||U(Ao(e),(function(e){var t=mo(e,"width");fo(e,"width",t);eo(e,"width")}))},Xd=function(){var e=gt.fromTag("div");po(e,{position:"static",height:"0",width:"0",padding:"0",margin:"0",border:"0"});Or(In(),e);return e},Zd=function(e,t){return e.inline?Ql.body(Hs(e),Xd(),t):Ql.only(gt.fromDom(e.getDoc()),t)},Qd=function(e,t){e.inline&&Nr(t.parent())},Jd="bar-",ef=function(e){return"false"!==Qn(e,"data-mce-resize")},tf=function(e){var t,n,o=I.none(),r=I.none(),i=I.none(),a=function(e){return"TABLE"===e.nodeName},s=function(){return r},l=function(){return i.getOr(Ql.only(gt.fromDom(e.getBody()),ef))},c=function(t){return Vd(e,t)},u=function(){return Pd(e)?Kl():Gl()},d=function(e){return Oc(e).columns},f=function(o,r,i){var a=we(r,"e");""===n&&Wd(o);if(i!==t&&""!==n){fo(o,"width",n);var s=u(),l=c(o),f=Pd(e)||a?d(o)-1:0;Bl(o,i-t,f,s,l)}else if(Xs(n)){var p=parseFloat(n.replace("%",""));fo(o,"width",i*p/t+"%")}Zs(n)&&Yd(o)},p=function(){r.each((function(e){e.destroy()}));i.each((function(t){Qd(e,t)}))};e.on("init",(function(){var t=Zd(e,ef);i=I.some(t);if(Bd(e)&&bd(e)){var n=u(),a=Gu.create(t,n,c);a.on();a.events.startDrag.bind((function(t){o=I.some(e.selection.getRng())}));a.events.beforeResize.bind((function(t){var n=t.table.dom;Xu(e,n,qs(n),$s(n),Jd+t.type)}));a.events.afterResize.bind((function(t){var n=t.table,r=n.dom;Ks(n);o.each((function(t){e.selection.setRng(t);e.focus()}));Zu(e,r,qs(r),$s(r),Jd+t.type);e.undoManager.add()}));r=I.some(a)}}));e.on("ObjectResizeStart",(function(o){var r=o.target;if(a(r)){var i=gt.fromDom(r);U(e.dom.select(".mce-clonedresizable"),(function(t){e.dom.addClass(t,"mce-"+_d(e)+"-columns")}));!yc(i)&&Ed(e)?Gd(i):!vc(i)&&Nd(e)&&Wd(i);Cc(i)&&Se(o.origin,Jd)&&Wd(i);t=o.width;n=Ad(e)?"":Ys(e,r).getOr("")}}));e.on("ObjectResized",(function(t){var n=t.target;if(a(n)){var o=gt.fromDom(n),r=t.origin;Se(r,"corner-")&&f(o,r,t.width);Ks(o);ed(e,o.dom,td)}}));e.on("SwitchMode",(function(){s().each((function(t){e.mode.isReadOnly()?t.hideBars():t.showBars()}))}));return{lazyResize:s,lazyWire:l,destroy:p}},nf=function(e,t){return{element:e,offset:t}},of=function(e,t,n){return e.property().isText(t)&&0===e.property().getText(t).trim().length||e.property().isComment(t)?n(t).bind((function(t){return of(e,t,n).orThunk((function(){return I.some(t)}))})):I.none()},rf=function(e,t){return e.property().isText(t)?e.property().getText(t).length:e.property().children(t).length},af=function(e,t){var n=of(e,t,e.query().prevSibling).getOr(t);if(e.property().isText(n))return nf(n,rf(e,n));var o=e.property().children(n);return o.length>0?af(e,o[o.length-1]):nf(n,rf(e,n))},sf=af,lf=Pr(),cf=function(e){return sf(lf,e)},uf=function(e,t){if(1===Co(e,"colspan")){Ba(e).each((function(n){var o=n.value/2;Fa(e,o,n.unit);Fa(t,o,n.unit)}))}},df=un("th"),ff=function(e){return Z(e,(function(e){return df(e.element)}))},pf=function(e,t){return e&&t?"sectionCells":e?"section":"cells"},mf=function(e){var t="thead"===e.section,n=no(hf(e.cells),"th");return t||n?{type:"header",subType:pf(t,n)}:"tfoot"===e.section?{type:"footer"}:{type:"body"}},hf=function(e){var t=q(e,(function(e){return df(e.element)}));return 0===t.length?I.some("td"):t.length===e.length?I.some("th"):I.none()},gf=function(e){var t=F(e,(function(e){return mf(e).type})),n=M(t,"header"),o=M(t,"footer");if(n||o){var r=M(t,"body");return!n||r||o?n||r||!o?I.none():I.some("footer"):I.some("header")}return I.some("body")},bf=function(e){return ie(e.all,(function(e){var t=mf(e);return"header"===t.type?I.from(t.subType):I.none()}))},vf=function(e,t,n){return Xt(n(e.element,t),!0,e.isLocked)},yf=function(e,t){return e.section!==t?Zt(e.element,e.cells,t,e.isNew):e},Cf=function(){return{transformRow:yf,transformCell:function(e,t,n){var o=n(e.element,t),r="td"!==tn(o)?Oi(o,"td"):o;return Xt(r,e.isNew,e.isLocked)}}},Of=function(){return{transformRow:yf,transformCell:vf}},xf=function(){return{transformRow:function(e,t){return yf(e,"thead"===t?"tbody":t)},transformCell:vf}},jf=function(){return{transformRow:v,transformCell:vf}},Sf=function(e,t){var n=or.fromTable(e);switch(bf(n).getOr(t)){case"section":return Cf();case"sectionCells":return Of();case"cells":return xf()}},wf={getTableSectionType:Sf,section:Cf,sectionCells:Of,cells:xf,fallback:jf},Tf=function(e,t,n,o){n===o?eo(e,t):Yn(e,t,n)},kf=function(e,t,n){re(Dn(e,t)).fold((function(){return Cr(e,n)}),(function(e){return yr(e,n)}))},Nf=function(e,t){var n=zn(e,t).getOrThunk((function(){var n=gt.fromTag(t,dn(e).dom);"thead"===t?kf(e,"caption,colgroup",n):"colgroup"===t?kf(e,"caption",n):Or(e,n);return n}));kr(n);return n},Ef=function(e,t){var n=[],o=[],r=function(e){return F(e,(function(e){e.isNew&&n.push(e.element);var t=e.element;kr(t);U(e.cells,(function(e){e.isNew&&o.push(e.element);Tf(e.element,"colspan",e.colspan,1);Tf(e.element,"rowspan",e.rowspan,1);Or(t,e.element)}));return t}))},i=function(e){return X(e,(function(e){return F(e.cells,(function(e){Tf(e.element,"span",e.colspan,1);return e.element}))}))},a=function(t,n){var o=Nf(e,n),a=("colgroup"===n?i:r)(t);Tr(o,a)},s=function(t){zn(e,t).each(Nr)},l=function(e,t){e.length>0?a(e,t):s(t)},c=[],u=[],d=[],f=[];U(t,(function(e){switch(e.section){case"thead":c.push(e);break;case"tbody":u.push(e);break;case"tfoot":d.push(e);break;case"colgroup":f.push(e)}}));l(f,"colgroup");l(c,"thead");l(u,"tbody");l(d,"tfoot");return{newRows:n,newCells:o}},Af=function(e){return F(e,(function(e){var t=bi(e.element);U(e.cells,(function(e){var n=vi(e.element);Tf(n,"colspan",e.colspan,1);Tf(n,"rowspan",e.rowspan,1);Or(t,n)}));return t}))},If=function(e,t){return F(e,(function(e){return $o(e,t)}))},Rf=function(e,t){return e[t]},Lf=function(e,t){if(0===e.length)return 0;var n=e[0];return K(e,(function(e){return!t(n.element,e.element)})).getOr(e.length)},_f=function(e,t,n,o){var r=Rf(e,t),i="colgroup"===r.section;return{colspan:Lf(r.cells.slice(n),o),rowspan:i?1:Lf(If(e.slice(t),n),o)}},Pf=function(e,t){var n=F(e,(function(e){return F(e.cells,w)})),o=function(e,t,o,r){for(var i=e;i<e+o;i++)for(var a=t;a<t+r;a++)n[i][a]=!0};return F(e,(function(r,i){var a=X(r.cells,(function(r,a){if(!1===n[i][a]){var s=_f(e,i,a,t);o(i,a,s.rowspan,s.colspan);return[Wt(r.element,s.rowspan,s.colspan,r.isNew)]}return[]}));return Yt(r.element,a,r.section,r.isNew)}))},Mf=function(e,t,n){var o=[];U(e.colgroups,(function(r){for(var i=[],a=0;a<e.grid.columns;a++){var s=or.getColumnAt(e,a).map((function(e){return Xt(e.element,n,!1)})).getOrThunk((function(){return Xt(t.colGap(),!0,!1)}));i.push(s)}o.push(Zt(r.element,i,"colgroup",n))}));for(var r=0;r<e.grid.rows;r++){for(var i=[],a=0;a<e.grid.columns;a++){var s=or.getAt(e,r,a).map((function(e){return Xt(e.element,n,e.isLocked)})).getOrThunk((function(){return Xt(t.gap(),!0,!1)}));i.push(s)}var l=e.all[r],c=Zt(l.element,i,l.section,n);o.push(c)}return o},Df=function(e,t){return Mf(e,t,!1)},Bf=function(e){return Pf(e,Ot)},Ff=function(e,t){return ie(e.all,(function(e){return G(e.cells,(function(e){return Ot(t,e.element)}))}))},Uf=function(e,t,n){var o=F(t.selection,(function(t){return Eo(t).bind((function(t){return Ff(e,t)})).filter(n)})),r=oo(o);return so(r.length>0,r)},Vf=function(e,t,n,o,r){return function(i,a,s,l,c){var u=or.fromTable(a),d=I.from(null==c?void 0:c.section).getOrThunk(wf.fallback);return t(u,s).map((function(t){var n=Df(u,l),o=e(n,t,Ot,r(l),d),i=Zo(o.grid);return{info:t,grid:Bf(o.grid),cursor:o.cursor,lockedColumns:i}})).bind((function(e){var t=Ef(a,e.grid),r=I.from(null==c?void 0:c.sizing).getOrThunk((function(){return fs.getTableSize(a)})),s=I.from(null==c?void 0:c.resize).getOrThunk(Kl);n(a,e.grid,e.info,{sizing:r,resize:s,section:d});o(a);Bu(i,a);eo(a,Yo);e.lockedColumns.length>0&&Yn(a,Yo,e.lockedColumns.join(","));return I.some({cursor:e.cursor,newRows:t.newRows,newCells:t.newCells})}))}},Hf=function(e,t){return Eo(t.element).bind((function(n){return Ff(e,n).map((function(e){return ae(ae({},e),{generators:t.generators,clipboard:t.clipboard})}))}))},qf=function(e,t){return Uf(e,t,T).map((function(e){return{cells:e,generators:t.generators,clipboard:t.clipboard}}))},$f=function(e,t){return t.mergable},zf=function(e,t){return t.unmergable},Wf=function(e,t){return Uf(e,t,T)},Gf=function(e,t){return Uf(e,t,(function(e){return!e.isLocked}))},Kf=function(e,t){return Ff(e,t).exists((function(e){return!e.isLocked}))},Yf=function(e,t){return Z(t,(function(t){return Kf(e,t)}))},Xf=function(e,t){return $f(e,t).filter((function(t){return Yf(e,t.cells)}))},Zf=function(e,t){return zf(e,t).filter((function(t){return Yf(e,t)}))},Qf=function(e,t,n,o){var r=Go(e).rows;if(0===r.length)return e;for(var i=t.startRow;i<=t.finishRow;i++)for(var a=t.startCol;a<=t.finishCol;a++){var s=r[i],l=$o(s,a).isLocked;Vo(s,a,Xt(o(),!1,l))}return e},Jf=function(e,t,n,o){for(var r=Go(e).rows,i=!0,a=0;a<r.length;a++)for(var s=0;s<Wo(r[0]);s++){var l=r[a],c=$o(l,s),u=n(c.element,t);!0===u&&!1===i?Vo(l,s,Xt(o(),!0,c.isLocked)):!0===u&&(i=!1)}return e},ep=function(e,t){return z(e,(function(e,n){return D(e,(function(e){return t(e.element,n.element)}))?e:e.concat([n])}),[])},tp=function(e,t,n,o){t>0&&t<e[0].cells.length&&U(e,(function(e){var r=e.cells[t-1],i=e.cells[t];n(i.element,r.element)&&Vo(e,t,Xt(o(),!0,i.isLocked))}));return e},np=function(e,t,n,o){var r=Go(e).rows;if(t>0&&t<r.length){var i=r[t-1].cells,a=ep(i,n);U(a,(function(e){for(var i=I.none(),a=t;a<r.length;a++)for(var s=function(t){var s=r[a],l=$o(s,t);if(n(l.element,e.element)){i.isNone()&&(i=I.some(o()));i.each((function(e){Vo(s,t,Xt(e,!0,l.isLocked))}))}},l=0;l<Wo(r[0]);l++)s(l)}))}return e},op=function(e){var t=function(t){return op(e)},n=function(t){return op(e)},o=function(t){return op(t(e))},r=function(t){return op(e)},i=function(t){t(e)},a=function(t){return t(e)},s=function(t,n){return n(e)},l=function(t){return t(e)},c=function(t){return t(e)},u=function(){return I.some(e)};return{isValue:T,isError:w,getOr:b(e),getOrThunk:b(e),getOrDie:b(e),or:t,orThunk:n,fold:s,map:o,mapError:r,each:i,bind:a,exists:l,forall:c,toOptional:u}},rp=function(e){return{isValue:w,isError:T,getOr:v,getOrThunk:function(e){return e()},getOrDie:function(){return S(String(e))()},or:v,orThunk:function(e){return e()},fold:function(t,n){return t(e)},map:function(t){return rp(e)},mapError:function(t){return rp(t(e))},each:m,bind:function(t){return rp(e)},exists:w,forall:T,toOptional:I.none}},ip=function(e,t){return e.fold((function(){return rp(t)}),op)},ap={value:op,error:rp,fromOption:ip},sp=function(e,t,n){if(e.row>=t.length||e.column>Wo(t[0]))return ap.error("invalid start address out of table bounds, row: "+e.row+", column: "+e.column);var o=t.slice(e.row),r=o[0].cells.slice(e.column),i=Wo(n[0]),a=n.length;return ap.value({rowDelta:o.length-a,colDelta:r.length-i})},lp=function(e,t){return{rowDelta:0,colDelta:Wo(e[0])-Wo(t[0])}},cp=function(e,t){return{rowDelta:e.length-t.length,colDelta:0}},up=function(e,t,n,o){var r="colgroup"===t.section?n.col:n.cell;return B(e,(function(e){return Xt(r(),!0,o(e))}))},dp=function(e,t,n,o){var r=e[e.length-1];return e.concat(B(t,(function(){var e="colgroup"===r.section?n.colgroup:n.row,t=Ko(r,e,v),i=up(t.cells.length,t,n,(function(e){return Bt(o,e.toString())}));return Ho(t,i)})))},fp=function(e,t,n,o){return F(e,(function(e){var r=up(t,e,n,w);return Fo(e,o,r)}))},pp=function(e,t,n){return F(e,(function(e){return z(n,(function(n,o){var r=up(1,e,t,T)[0];return Uo(n,o,r)}),e)}))},mp=function(e,t,n){var o=t.colDelta<0?fp:v,r=t.rowDelta<0?dp:v,i=Zo(e),a=Wo(e[0]),s=D(i,(function(e){return e===a-1})),l=o(e,Math.abs(t.colDelta),n,s?a-1:a),c=Zo(l);return r(l,Math.abs(t.rowDelta),n,J(c,T))},hp=function(e,t,n,o){var r=C(o,$o(e[t],n).element),i=e[t];return e.length>1&&Wo(i)>1&&(n>0&&r(zo(i,n-1))||n<i.cells.length-1&&r(zo(i,n+1))||t>0&&r(zo(e[t-1],n))||t<e.length-1&&r(zo(e[t+1],n)))},gp=function(e,t,n,o,r,i){for(var a=e.row,s=e.column,l=a+n.length,c=s+Wo(n[0])+i.length,u=J(i,T),d=a;d<l;d++)for(var f=0,p=s;p<c;p++)if(u[p])f++;else{hp(t,d,p,r)&&Jf(t,zo(t[d],p),r,o.cell);var m=p-s-f,h=$o(n[d-a],m),g=h.element,b=o.replace(g);Vo(t[d],p,Xt(b,!0,h.isLocked))}return t},bp=function(e,t,n){var o=Wo(t[0]),r=Go(t).cols.length+e.row,i=B(o-e.column,(function(t){return t+e.column}));return{row:r,column:G(i,(function(e){return Z(n,(function(t){return t!==e}))})).getOr(o-1)}},vp=function(e,t,n){return q(n,(function(n){return n>=e.column&&n<=Wo(t[0])+e.column}))},yp=function(e,t,n,o,r){var i=Zo(t),a=bp(e,t,i),s=Go(n).rows,l=vp(a,s,i);return sp(a,t,s).map((function(e){var n=ae(ae({},e),{colDelta:e.colDelta-l.length}),i=mp(t,n,o),c=Zo(i),u=vp(a,s,c);return gp(a,i,s,o,r,u)}))},Cp=function(e,t,n,o,r){tp(t,e,r,o.cell);var i=cp(n,t),a=mp(n,i,o),s=cp(t,a),l=mp(t,s,o);return F(l,(function(t,n){return Fo(t,e,a[n].cells)}))},Op=function(e,t,n,o,r){np(t,e,r,o.cell);var i=Zo(t),a=lp(t,n),s=ae(ae({},a),{colDelta:a.colDelta-i.length}),l=mp(t,s,o),c=Go(l),u=c.cols,d=c.rows,f=Zo(l),p=lp(n,t),m=ae(ae({},p),{colDelta:p.colDelta+f.length}),h=pp(n,o,f),g=mp(h,m,o);return u.concat(d.slice(0,e)).concat(g).concat(d.slice(e,d.length))},xp=function(e,t,n,o){return Ko(e,(function(e){return o(e,n)}),t)},jp=function(e,t,n,o,r){var i=Go(e),a=i.rows,s=i.cols,l=a.slice(0,t),c=a.slice(t),u=xp(a[n],(function(e,n){return t>0&&t<a.length&&o(zo(a[t-1],n),zo(a[t],n))?$o(a[t],n):Xt(r(e.element,o),!0,e.isLocked)}),o,r);return s.concat(l).concat([u]).concat(c)},Sp=function(e,t,n,o,r,i,a){if("colgroup"!==n&&o)return $o(e,t);var s=$o(e,r);return Xt(a(s.element,i),!0,!1)},wp=function(e,t,n,o,r){return F(e,(function(e){var i=t>0&&t<Wo(e)&&o(zo(e,t-1),zo(e,t)),a=Sp(e,t,e.section,i,n,o,r);return Uo(e,t,a)}))},Tp=function(e,t){return X(e,(function(e){var n=e.cells,o=$(t,(function(e,t){return t>=0&&t<e.length?e.slice(0,t).concat(e.slice(t+1)):e}),n);return o.length>0?[Zt(e.element,o,e.section,e.isNew)]:[]}))},kp=function(e,t,n){var o=Go(e),r=o.rows;return o.cols.concat(r.slice(0,t)).concat(r.slice(n+1))},Np=function(e,t,n,o){return void 0!==zo(e[t],n)&&t>0&&o(zo(e[t-1],n),zo(e[t],n))},Ep=function(e,t,n){return t>0&&n(zo(e,t-1),zo(e,t))},Ap=function(e,t,n,o){return Np(e,t,n,o)||Ep(e[t],n,o)},Ip=function(e,t){return Z(t,v)&&ff(e.cells)?T:function(e,n,o){return!("th"===tn(e.element)&&t[o])}},Rp=function(e,t){return Z(t,v)&&ff(e)?T:function(e,n,o){return!("th"===tn(e.element)&&t[n])}},Lp=function(e,t,n,o){var r=function(e){return"row"===e?xo(t):Oo(t)},i=function(e){return r(e)?e+"group":e};if(e)return df(t)?i(n):null;if(o&&df(t)){return i("row"===n?"col":"row")}return null},_p=function(e,t){return function(n,o,r){return I.some(Lp(e,n.element,"col",t[r]))}},Pp=function(e,t){return function(n,o){return I.some(Lp(e,n.element,"row",t[o]))}},Mp=function(e,t,n){return Xt(n(e.element,t),!0,e.isLocked)},Dp=function(e,t,n,o,r,i,a){var s=function(e){return D(t,(function(t){return n(e.element,t.element)}))};return F(e,(function(e,t){return qo(e,(function(e,l){if(s(e)){var c=a(e,t,l)?r(e,n,o):e;i(c,t,l).each((function(e){Zn(c.element,{scope:I.from(e)})}));return c}return e}))}))},Bp=function(e,t,n){return X(e,(function(o,r){return Ap(e,r,t,n)?[]:[$o(o,t)]}))},Fp=function(e,t,n){var o=e[t];return X(o.cells,(function(o,r){return Ap(e,t,r,n)?[]:[o]}))},Up=function(e,t,n,o,r){var i=Go(e).rows,a=X(t,(function(e){return Bp(i,e,o)})),s=F(e,(function(e){return ff(e.cells)})),l=Rp(a,s),c=Pp(n,s);return Dp(e,a,o,r,Mp,c,l)},Vp=function(e,t,n,o,r,i,a){var s=Go(e),l=s.cols,c=s.rows,u=c[t[0]],d=X(t,(function(e){return Fp(c,e,r)})),f=F(u.cells,(function(e,t){return ff(Bp(c,t,r))})),p=se([],c,!0);U(t,(function(e){p[e]=a.transformRow(c[e],n)}));var m=l.concat(p),h=Ip(u,f),g=_p(o,f);return Dp(m,d,r,i,a.transformCell,g,h)},Hp=function(e,t,n,o){var r=Go(e).rows,i=F(t,(function(e){return $o(r[e.row],e.column)}));return Dp(e,i,n,o,Mp,I.none,T)},qp=function(e){return z(e,(function(e,t){return D(e,(function(e){return e.column===t.column}))?e:e.concat([t])}),[]).sort((function(e,t){return e.column-t.column}))},$p=un("col"),zp=un("colgroup"),Wp=function(e){return"tr"===tn(e)||zp(e)},Gp=function(e){return{element:e,colspan:yo(e,"colspan",1),rowspan:yo(e,"rowspan",1)}},Kp=function(e,t){void 0===t&&(t=Gp);var n=function(t){return $p(t.element)?e.col(t):e.cell(t)},o=function(t){return zp(t.element)?e.colgroup(t):e.row(t)},r=function(e){if(Wp(e))return o({element:e});var r=n(t(e));i=I.some({item:e,replacement:r});return r},i=I.none();return{getOrInit:function(e,t){return i.fold((function(){return r(e)}),(function(n){return t(e,n.item)?n.replacement:r(e)}))}}},Yp=function(e){return function(t){var n=[],o=function(e,t){return G(n,(function(n){return t(n.item,e)}))},r=function(o){var r="td"===e?{scope:null}:{},i=t.replace(o,e,r);n.push({item:o,sub:i});return i};return{replaceOrInit:function(e,t){return Wp(e)||$p(e)?e:o(e,t).fold((function(){return r(e)}),(function(n){return t(e,n.item)?n.sub:r(e)}))}}}},Xp=function(e){return Jn(e,"scope").map((function(e){return e.substr(0,3)}))},Zp=function(e){return{unmerge:function(t){var n=Xp(t);n.each((function(e){return Yn(t,"scope",e)}));return function(){var o=e.cell({element:t,colspan:1,rowspan:1});bo(o,"width");bo(t,"width");n.each((function(e){return Yn(o,"scope",e)}));return o}},merge:function(e){var t=function(){var t=oo(F(e,Xp));if(0===t.length)return I.none();var n=t[0],o=["row","col"];return D(t,(function(e){return e!==n&&M(o,e)}))?I.none():I.from(n)};bo(e[0],"width");t().fold((function(){return eo(e[0],"scope")}),(function(t){return Yn(e[0],"scope",t+"group")}));return b(e[0])}}},Qp={modification:Kp,transform:Yp,merging:Zp},Jp=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","table","thead","tfoot","tbody","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],em=function(e,t){var n=e.property().name(t);return M(["ol","ul"],n)},tm=function(e,t){var n=e.property().name(t);return M(Jp,n)},nm=function(e,t){return M(["br","img","hr","input"],e.property().name(t))},om=Pr(),rm=function(e){return tm(om,e)},im=function(e){return em(om,e)},am=function(e){return nm(om,e)},sm=function(e){var t=function(e){return"br"===tn(e)},n=function(e){return Z(e,(function(e){return t(e)||sn(e)&&0===Ir(e).trim().length}))},o=function(e){return"li"===tn(e)||Un(e,im).isSome()},r=function(e){return vn(e).map((function(e){return!!rm(e)||!!am(e)&&"img"!==tn(e)})).getOr(!1)},i=function(e){return Ts(e).bind((function(n){var i=r(n);return mn(n).map((function(r){return!0===i||o(r)||t(n)||rm(r)&&!Ot(e,r)?[]:[gt.fromTag("br")]}))})).getOr([])},a=function(){var t=X(e,(function(e){var t=yn(e);return n(t)?[]:t.concat(i(e))}));return 0===t.length?[gt.fromTag("br")]:t}();kr(e[0]);Tr(e[0],a)},lm=function(e){return yu(e,!0)},cm=function(e){0===Ao(e).length&&Nr(e)},um=function(e,t){return{grid:e,cursor:t}},dm=function(e){return ie(e,(function(e){return ie(e.cells,(function(e){var t=e.element;return so(lm(t),t)}))}))},fm=function(e,t,n){var o,r,i=Go(e).rows;return I.from(null===(r=null===(o=i[t])||void 0===o?void 0:o.cells[n])||void 0===r?void 0:r.element).filter(lm).orThunk((function(){return dm(i)}))},pm=function(e,t,n){var o=fm(e,t,n);return um(e,o)},mm=function(e){return z(e,(function(e,t){return D(e,(function(e){return e.row===t.row}))?e:e.concat([t])}),[]).sort((function(e,t){return e.row-t.row}))},hm=function(e,t,n,o){var r=t[0].row,i=mm(t),a=$(i,(function(e,t){return{grid:jp(e.grid,r,t.row+e.delta,n,o.getOrInit),delta:e.delta+1}}),{grid:e,delta:0}).grid;return pm(a,r,t[0].column)},gm=function(e,t,n,o){var r=mm(t),i=r[r.length-1],a=i.row+i.rowspan,s=$(r,(function(e,t){return jp(e,a,t.row,n,o.getOrInit)}),e);return pm(s,a,t[0].column)},bm=function(e,t,n,o){var r=t.details,i=qp(r),a=i[0].column,s=$(i,(function(e,t){return{grid:wp(e.grid,a,t.column+e.delta,n,o.getOrInit),delta:e.delta+1}}),{grid:e,delta:0}).grid;return pm(s,r[0].row,a)},vm=function(e,t,n,o){var r=t.details,i=r[r.length-1],a=i.column+i.colspan,s=qp(r),l=$(s,(function(e,t){return wp(e,a,t.column,n,o.getOrInit)}),e);return pm(l,r[0].row,a)},ym=function(e,t,n,o){var r=qp(t),i=F(r,(function(e){return e.column})),a=Up(e,i,!0,n,o.replaceOrInit);return pm(a,t[0].row,t[0].column)},Cm=function(e,t,n,o){var r=Hp(e,t,n,o.replaceOrInit);return pm(r,t[0].row,t[0].column)},Om=function(e,t,n,o){var r=qp(t),i=F(r,(function(e){return e.column})),a=Up(e,i,!1,n,o.replaceOrInit);return pm(a,t[0].row,t[0].column)},xm=function(e,t,n,o){var r=Hp(e,t,n,o.replaceOrInit);return pm(r,t[0].row,t[0].column)},jm=function(e,t){return function(n,o,r,i,a){var s=mm(o),l=F(s,(function(e){return e.row})),c=Vp(n,l,e,t,r,i.replaceOrInit,a);return pm(c,o[0].row,o[0].column)}},Sm=jm("thead",!0),wm=jm("tbody",!1),Tm=jm("tfoot",!1),km=function(e,t,n,o){var r=qp(t.details),i=Tp(e,F(r,(function(e){return e.column}))),a=i.length>0?i[0].cells.length-1:0;return pm(i,r[0].row,Math.min(r[0].column,a))},Nm=function(e,t,n,o){var r=mm(t),i=kp(e,r[0].row,r[r.length-1].row),a=i.length>0?i.length-1:0;return pm(i,Math.min(t[0].row,a),t[0].column)},Em=function(e,t,n,o){var r=t.cells;sm(r);var i=Qf(e,t.bounds,n,o.merge(r));return um(i,I.from(r[0]))},Am=function(e,t,n,o){var r=$(t,(function(e,t){return Jf(e,t,n,o.unmerge(t))}),e);return um(r,I.from(t[0]))},Im=function(e,t,n,o){var r=function(e,t){var n=or.fromTable(e);return Mf(n,t,!0)}(t.clipboard,t.generators),i=$t(t.row,t.column);return yp(i,e,r,t.generators,n).fold((function(){return um(e,I.some(t.element))}),(function(e){return pm(e,t.row,t.column)}))},Rm=function(e,t,n){var o=Bo(e,n.section),r=or.generate(o);return Mf(r,t,!0)},Lm=function(e,t,n,o){var r=Go(e).rows,i=t.cells[0].column,a=r[t.cells[0].row],s=Rm(t.clipboard,t.generators,a),l=Cp(i,e,s,t.generators,n);return pm(l,t.cells[0].row,t.cells[0].column)},_m=function(e,t,n,o){var r=Go(e).rows,i=t.cells[t.cells.length-1].column+t.cells[t.cells.length-1].colspan,a=r[t.cells[0].row],s=Rm(t.clipboard,t.generators,a),l=Cp(i,e,s,t.generators,n);return pm(l,t.cells[0].row,t.cells[0].column)},Pm=function(e,t,n,o){var r=Go(e).rows,i=t.cells[0].row,a=r[i],s=Rm(t.clipboard,t.generators,a),l=Op(i,e,s,t.generators,n);return pm(l,t.cells[0].row,t.cells[0].column)},Mm=function(e,t,n,o){var r=Go(e).rows,i=t.cells[t.cells.length-1].row+t.cells[t.cells.length-1].rowspan,a=r[t.cells[0].row],s=Rm(t.clipboard,t.generators,a),l=Op(i,e,s,t.generators,n);return pm(l,t.cells[0].row,t.cells[0].column)},Dm=function(e,t){var n=or.fromTable(e);return Wf(n,t).bind((function(e){var t=e[e.length-1],o=e[0].column,r=t.column+t.colspan,i=Y(F(n.all,(function(e){return q(e.cells,(function(e){return e.column>=o&&e.column<r}))})));return hf(i)})).getOr("")},Bm=function(e,t){var n=or.fromTable(e);return Wf(n,t).bind(hf).getOr("")},Fm=function(e,t){var n=or.fromTable(e);return Wf(n,t).bind((function(e){var t=e[e.length-1],o=e[0].row,r=t.row+t.rowspan,i=n.all.slice(o,r);return gf(i)})).getOr("")},Um=function(e,t,n,o){return Vl(e,t,n,o.sizing)},Vm=function(e,t,n,o){return Ul(e,t,n,o.sizing,o.resize)},Hm=function(e,t){return D(t,(function(e){return 0===e.column&&e.isLocked}))},qm=function(e,t){return D(t,(function(t){return t.column+t.colspan>=e.grid.columns&&t.isLocked}))},$m=function(e,t){var n=Bi(e),o=qp(t);return z(o,(function(e,t){return e+n[t.column].map(Pi).getOr(0)}),0)},zm=function(e){return function(t,n){return Wf(t,n).filter((function(n){return!(e?Hm:qm)(t,n)})).map((function(e){return{details:e,pixelDelta:$m(t,e)}}))}},Wm=function(e,t){return Gf(e,t).map((function(t){return{details:t,pixelDelta:-$m(e,t)}}))},Gm=function(e){return function(t,n){return qf(t,n).filter((function(n){return!(e?Hm:qm)(t,n.cells)}))}},Km=Qp.transform("th"),Ym=Qp.transform("td"),Xm=Vf(hm,Wf,m,m,Qp.modification),Zm=Vf(gm,Wf,m,m,Qp.modification),Qm=Vf(bm,zm(!0),Vm,m,Qp.modification),Jm=Vf(vm,zm(!1),Vm,m,Qp.modification),eh=Vf(km,Wm,Vm,cm,Qp.modification),th=Vf(Nm,Wf,m,cm,Qp.modification),nh=Vf(ym,Gf,m,m,Km),oh=Vf(Om,Gf,m,m,Ym),rh=Vf(Sm,Gf,m,m,Km),ih=Vf(wm,Gf,m,m,Ym),ah=Vf(Tm,Gf,m,m,Ym),sh=Vf(Cm,Gf,m,m,Km),lh=Vf(xm,Gf,m,m,Ym),ch=Vf(Em,Xf,Um,m,Qp.merging),uh=Vf(Am,Zf,Um,m,Qp.merging),dh=Vf(Im,Hf,Um,m,Qp.modification),fh=Vf(Lm,Gm(!0),m,m,Qp.modification),ph=Vf(_m,Gm(!1),m,m,Qp.modification),mh=Vf(Pm,qf,m,m,Qp.modification),hh=Vf(Mm,qf,m,m,Qp.modification),gh=Dm,bh=Bm,vh=Fm,yh=function(e,t,n){var o=function(e){return"table"===tn(Hs(e))},r=function(t){return!1===o(e)||Oc(t).rows>1},i=function(t){return!1===o(e)||Oc(t).columns>1},a=Dd(e),s=Md(e)?m:uf,l=function(t){switch(Ld(e)){case"section":return wf.section();case"sectionCells":return wf.sectionCells();case"cells":return wf.cells();default:return wf.getTableSectionType(t,"section")}},c=function(n,o){return o.cursor.fold((function(){var o=Ao(n);return oe(o).filter(An).map((function(o){t.clear(n);var r=e.dom.createRng();r.selectNode(o.dom);e.selection.setRng(r);Yn(o,"data-mce-selected","1");return r}))}),(function(o){var r=cf(o),i=e.dom.createRng();i.setStart(r.element.dom,r.offset);i.setEnd(r.element.dom,r.offset);e.selection.setRng(i);t.clear(n);return I.some(i)}))},u=function(t,n,o,r,i){return function(s,u,d){void 0===d&&(d=!1);Ks(s);var f=r(),p=gt.fromDom(e.getDoc()),m=Ds(o,p,a),h={sizing:Vd(e,s),resize:Md(e)?Gl():Kl(),section:l(s)};return n(s)?t(f,s,u,m,h).bind((function(t){U(t.newRows,(function(t){Ku(e,t.dom)}));U(t.newCells,(function(t){Yu(e,t.dom)}));var n=c(s,t);if(An(s)){Ks(s);d||ed(e,s.dom,i)}return n.map((function(e){return{rng:e,effect:i}}))})):I.none()}};return{deleteRow:u(th,r,m,n,nd),deleteColumn:u(eh,i,m,n,nd),insertRowsBefore:u(Xm,T,m,n,nd),insertRowsAfter:u(Zm,T,m,n,nd),insertColumnsBefore:u(Qm,T,s,n,nd),insertColumnsAfter:u(Jm,T,s,n,nd),mergeCells:u(ch,T,m,n,nd),unmergeCells:u(uh,T,m,n,nd),pasteColsBefore:u(fh,T,m,n,nd),pasteColsAfter:u(ph,T,m,n,nd),pasteRowsBefore:u(mh,T,m,n,nd),pasteRowsAfter:u(hh,T,m,n,nd),pasteCells:u(dh,T,m,n,od),makeCellsHeader:u(sh,T,m,n,nd),unmakeCellsHeader:u(lh,T,m,n,nd),makeColumnsHeader:u(nh,T,m,n,nd),unmakeColumnsHeader:u(oh,T,m,n,nd),makeRowsHeader:u(rh,T,m,n,nd),makeRowsBody:u(ih,T,m,n,nd),makeRowsFooter:u(ah,T,m,n,nd),getTableRowType:vh,getTableCellType:bh,getTableColType:gh}},Ch={styles:{"border-collapse":"collapse",width:"100%"},attributes:{border:"1"},colGroups:!1},Oh=function(){return gt.fromTag("th")},xh=function(){return gt.fromTag("td")},jh=function(){return gt.fromTag("col")},Sh=function(e,t,n,o){for(var r=gt.fromTag("tr"),i=0;i<e;i++){var a=o<t||i<n?Oh():xh();i<n&&Yn(a,"scope","row");o<t&&Yn(a,"scope","col");Or(a,gt.fromTag("br"));Or(r,a)}return r},wh=function(e){var t=gt.fromTag("colgroup");B(e,(function(){return Or(t,jh())}));return t},Th=function(e,t,n,o){return B(e,(function(e){return Sh(t,n,o,e)}))},kh=function(e,t,n,o,r,i){void 0===i&&(i=Ch);var a=gt.fromTag("table"),s="cells"!==r;po(a,i.styles);Xn(a,i.attributes);i.colGroups&&Or(a,wh(t));var l=Math.min(e,n);if(s&&n>0){var c=gt.fromTag("thead");Or(a,c);var u=Th(n,t,"sectionCells"===r?l:0,o);Tr(c,u)}var d=gt.fromTag("tbody");Or(a,d);var f=Th(s?e-l:e,t,s?0:n,o);Tr(d,f);return a},Nh=function(e){return e.dom.innerHTML},Eh=function(e){var t=gt.fromTag("div"),n=gt.fromDom(e.dom.cloneNode(!0));Or(t,n);return Nh(t)},Ah=function(e,t){e.selection.select(t.dom,!0);e.selection.collapse(!0)},Ih=function(e,t){Wn(t,"td,th").each(C(Ah,e))},Rh=function(e,t){U(Bn(t,"tr"),(function(t){Ku(e,t.dom);U(Bn(t,"th,td"),(function(t){Yu(e,t.dom)}))}))},Lh=function(e){return r(e)&&-1!==e.indexOf("%")},_h=function(e,t,n,o,r){var i=gd(e),a={styles:i,attributes:hd(e),colGroups:Rd(e)};e.undoManager.ignore((function(){var i=kh(n,t,r,o,Ld(e),a);Yn(i,"data-mce-id","__mce");var s=Eh(i);e.insertContent(s);e.addVisual()}));return Wn(Hs(e),'table[data-mce-id="__mce"]').map((function(t){Ed(e)?Gd(t):Ad(e)?Kd(t):(Nd(e)||Lh(i.width))&&Wd(t);Ks(t);eo(t,"data-mce-id");Rh(e,t);Ih(e,t);return t.dom})).getOr(null)},Ph=function(e,t,n,o,r){void 0===o&&(o={});var i=function(e){return p(e)&&e>0};if(i(t)&&i(n)){var a=o.headerRows||0,s=o.headerColumns||0;return _h(e,n,t,s,a)}console.error(r);return null},Mh=function(e){return function(){return e().fold((function(){return[]}),(function(e){return F(e,(function(e){return e.dom}))}))}},Dh=function(e){return function(t){var n=t.length>0?I.some(Us(t)):I.none();e(n)}},Bh=function(e){return function(t,n,o){void 0===o&&(o={});var r=Ph(e,n,t,o,"Invalid values for insertTable - rows and columns values are required to insert a table.");e.undoManager.add();return r}},Fh=function(e,t,n,o){return{insertTable:Bh(e),setClipboardRows:Dh(t.setRows),getClipboardRows:Mh(t.getRows),setClipboardCols:Dh(t.setColumns),getClipboardCols:Mh(t.getColumns),resizeHandler:n,selectionTargets:o}},Uh=function(e,t,n){var o=yo(e,t,1);1===n||o<=1?eo(e,t):Yn(e,t,Math.min(n,o))},Vh=function(e,t,n){if(or.hasColumns(e)){var o=q(or.justColumns(e),(function(e){return e.column>=t&&e.column<n})),r=F(o,(function(e){var o=vi(e.element);Uh(o,"span",n-t);return o})),i=gt.fromTag("colgroup");Tr(i,r);return[i]}return[]},Hh=function(e,t,n){return F(e.all,(function(e){var o=q(e.cells,(function(e){return e.column>=t&&e.column<n})),r=F(o,(function(e){var o=vi(e.element);Uh(o,"colspan",n-t);return o})),i=gt.fromTag("tr");Tr(i,r);return i}))},qh=function(e,t){var n=or.fromTable(e);return Gf(n,t).map((function(e){var t=e[e.length-1],o=e[0].column,r=t.column+t.colspan,i=Vh(n,o,r),a=Hh(n,o,r);return se(se([],i,!0),a,!0)}))},$h=function(e,t,n){var o=or.fromTable(e);return Wf(o,t).bind((function(e){var t=Mf(o,n,!1),r=Go(t).rows.slice(e[0].row,e[e.length-1].row+e[e.length-1].rowspan),i=X(r,(function(e){var t=q(e.cells,(function(e){return!e.isLocked}));return t.length>0?[ae(ae({},e),{cells:t})]:[]})),a=Bf(i);return so(a.length>0,a)})).map((function(e){return Af(e)}))},zh=tinymce.util.Tools.resolve("tinymce.util.Tools"),Wh=function(e,t,n){var o;return function(t,o){for(var r=0;r<o.length;r++){var i=e.getStyle(o[r],n);void 0===t&&(t=i);if(t!==i)return""}return t}(o,e.select("td,th",t))},Gh=function(e,t,n){n&&e.formatter.apply("align"+n,{},t)},Kh=function(e,t,n){n&&e.formatter.apply("valign"+n,{},t)},Yh=function(e,t){zh.each("left center right".split(" "),(function(n){e.formatter.remove("align"+n,{},t)}))},Xh=function(e,t){zh.each("top middle bottom".split(" "),(function(n){e.formatter.remove("valign"+n,{},t)}))},Zh=[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}],Qh=function(e){return{value:e}},Jh=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,eg=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,tg=function(e){return Jh.test(e)||eg.test(e)},ng=function(e){return xe(e,"#").toUpperCase()},og=function(e){return tg(e)?I.some({value:ng(e)}):I.none()},rg=function(e){var t=e.toString(16);return(1===t.length?"0"+t:t).toUpperCase()},ig=function(e){var t=rg(e.red)+rg(e.green)+rg(e.blue);return Qh(t)},ag=/^rgb\((\d+),\s*(\d+),\s*(\d+)\)/,sg=/^rgba\((\d+),\s*(\d+),\s*(\d+),\s*(\d?(?:\.\d+)?)\)/,lg=function(e,t,n,o){return{red:e,green:t,blue:n,alpha:o}},cg=function(e,t,n,o){var r=parseInt(e,10),i=parseInt(t,10),a=parseInt(n,10),s=parseFloat(o);return lg(r,i,a,s)},ug=function(e){if("transparent"===e)return I.some(lg(0,0,0,0));var t=ag.exec(e);if(null!==t)return I.some(cg(t[1],t[2],t[3],"1"));var n=sg.exec(e);return null!==n?I.some(cg(n[1],n[2],n[3],n[4])):I.none()},dg=function(e){return og(e).orThunk((function(){return ug(e).map(ig)})).getOrThunk((function(){var t=document.createElement("canvas");t.height=1;t.width=1;var n=t.getContext("2d");n.clearRect(0,0,t.width,t.height);n.fillStyle="#FFFFFF";n.fillStyle=e;n.fillRect(0,0,1,1);var o=n.getImageData(0,0,1,1).data,r=o[0],i=o[1],a=o[2],s=o[3];return ig(lg(r,i,a,s))}))},fg=function(e){var t=e;return{get:function(){return t},set:function(e){t=e}}},pg=function(e){var t=fg(I.none()),n=function(){return t.get().each(e)};return{clear:function(){n();t.set(I.none())},isSet:function(){return t.get().isSome()},get:function(){return t.get()},set:function(e){n();t.set(I.some(e))}}},mg=function(){return pg((function(e){return e.unbind()}))},hg=function(){var e=pg(m),t=function(t){return e.get().each(t)};return ae(ae({},e),{on:t})},gg=function(e,t,n,o){return function(r){var i=mg(),a=Ne(o),s=function(){var s=Cl(t),l=function(t){return e.formatter.match(n,{value:o},t.dom,a)};if(a){r.setActive(!D(s,l));i.set(e.formatter.formatChanged(n,(function(e){return r.setActive(!e)}),!0))}else{r.setActive(Z(s,l));i.set(e.formatter.formatChanged(n,r.setActive,!1,{value:o}))}};e.initialized?s():e.on("init",s);return i.clear}},bg=function(e){return Ft(e,"menu")},vg=function(e){return F(e,(function(e){var t=e.text||e.title;return bg(e)?{text:t,items:vg(e.menu)}:{text:t,value:e.value}}))},yg=function(e,t,n,o,r){return F(n,(function(n){var i=n.text||n.title;return bg(n)?{type:"nestedmenuitem",text:i,getSubmenuItems:function(){return yg(e,t,n.menu,o,r)}}:{text:i,type:"togglemenuitem",onAction:function(){return r(n.value)},onSetup:gg(e,t,o,n.value)}}))},Cg=function(e,t){return function(n){var o;e.execCommand("mceTableApplyCellStyle",!1,((o={})[t]=n,o))}},Og=function(e){return X(e,(function(e){return bg(e)?[ae(ae({},e),{menu:Og(e.menu)})]:ke(e.value)?[e]:[]}))},xg=function(e,t,n,o,r){return function(i){return i(yg(e,t,n,o,r))}},jg=function(e,t,n){var o=F(t,(function(e){return{text:e.title,value:"#"+dg(e.value).value,type:"choiceitem"}}));return[{type:"fancymenuitem",fancytype:"colorswatch",initData:{colors:o.length>0?o:void 0,allowCustomColors:!1},onAction:function(t){var o,r="remove"===t.value?"":t.value;e.execCommand("mceTableApplyCellStyle",!1,((o={})[n]=r,o))}}]},Sg=function(e){return function(){var t="header"===e.queryCommandValue("mceTableRowType")?"body":"header";e.execCommand("mceTableRowType",!1,{type:t})}},wg=function(e){return function(){var t="th"===e.queryCommandValue("mceTableColType")?"td":"th";e.execCommand("mceTableColType",!1,{type:t})}},Tg=function(e){var t=vg(wd(e));return t.length>0?I.some({name:"class",type:"listbox",label:"Class",items:t}):I.none()},kg=[{name:"width",type:"input",label:"Width"},{name:"height",type:"input",label:"Height"},{name:"celltype",type:"listbox",label:"Cell type",items:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{name:"scope",type:"listbox",label:"Scope",items:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{name:"halign",type:"listbox",label:"Horizontal align",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{name:"valign",type:"listbox",label:"Vertical align",items:Zh}],Ng=function(e){return kg.concat(Tg(e).toArray())},Eg=function(e,t){var n=[{name:"borderstyle",type:"listbox",label:"Border style",items:[{text:"Select...",value:""}].concat(vg(md(e)))},{name:"bordercolor",type:"colorinput",label:"Border color"},{name:"backgroundcolor",type:"colorinput",label:"Background color"}];return{title:"Advanced",name:"advanced",items:"cell"===t?[{name:"borderwidth",type:"input",label:"Border width"}].concat(n):n}},Ag=function(e){return function(t,n){var o=t.dom;return{setAttrib:function(t,r){e&&!r||o.setAttrib(n,t,r)},setStyle:function(t,r){e&&!r||o.setStyle(n,t,r)},setFormat:function(o,r){e&&!r||(""===r?t.formatter.remove(o,{value:null},n,!0):t.formatter.apply(o,{value:r},n))}}}},Ig={normal:Ag(!1),ifTruthy:Ag(!0)},Rg=function(e){return function(t){return Se(t,"rgb")?e.toHex(t):t}},Lg=function(e,t){var n=gt.fromDom(t);return{borderwidth:go(n,"border-width").getOr(""),borderstyle:go(n,"border-style").getOr(""),bordercolor:go(n,"border-color").map(Rg(e)).getOr(""),backgroundcolor:go(n,"background-color").map(Rg(e)).getOr("")}},_g=function(e){var t=e[0],n=e.slice(1);U(n,(function(e){U(Tt(t),(function(n){Nt(e,(function(e,o){var r=t[n];""!==r&&n===o&&r!==e&&(t[n]="")}))}))}));return t},Pg=function(e,t,n,o){return G(e,(function(e){return!c(n.formatter.matchNode(o,t+e))})).getOr("")},Mg=C(Pg,["left","center","right"],"align"),Dg=C(Pg,["top","middle","bottom"],"valign"),Bg=function(e,t){var n=gd(e),o=hd(e),r={height:"",width:"100%",cellspacing:"",cellpadding:"",caption:!1,class:"",align:"",border:""},i=function(){var t=n["border-width"];return Sd(e)&&t?{border:t}:Dt(o,"border").fold((function(){return{}}),(function(e){return{border:e}}))},a=t?function(e){return{borderstyle:Dt(n,"border-style").getOr(""),bordercolor:Rg(e)(Dt(n,"border-color").getOr("")),backgroundcolor:Rg(e)(Dt(n,"background-color").getOr(""))}}(e.dom):{},s=function(){var e=Dt(n,"border-spacing").or(Dt(o,"cellspacing")).fold((function(){return{}}),(function(e){return{cellspacing:e}})),t=Dt(n,"border-padding").or(Dt(o,"cellpadding")).fold((function(){return{}}),(function(e){return{cellpadding:e}}));return ae(ae({},e),t)};return ae(ae(ae(ae(ae(ae({},r),n),o),a),i()),s())},Fg=function(e){return Ro(gt.fromDom(e)).map((function(t){var n={selection:Us(e.cells)};return vh(t,n)})).getOr("")},Ug=function(e,t,n){var o=function(t,n){var o=go(gt.fromDom(n),"border-width");return Sd(e)&&o.isSome()?o.getOr(""):t.getAttrib(n,"border")||Wh(e.dom,n,"border-width")||Wh(e.dom,n,"border")},r=e.dom,i=Sd(e)?r.getStyle(t,"border-spacing")||r.getAttrib(t,"cellspacing"):r.getAttrib(t,"cellspacing")||r.getStyle(t,"border-spacing"),a=Sd(e)?Wh(r,t,"padding")||r.getAttrib(t,"cellpadding"):r.getAttrib(t,"cellpadding")||Wh(r,t,"padding");return ae({width:r.getStyle(t,"width")||r.getAttrib(t,"width"),height:r.getStyle(t,"height")||r.getAttrib(t,"height"),cellspacing:i,cellpadding:a,border:o(r,t),caption:!!r.select("caption",t)[0],class:r.getAttrib(t,"class",""),align:Mg(e,t)},n?Lg(r,t):{})},Vg=function(e,t,n){var o=e.dom;return ae({height:o.getStyle(t,"height")||o.getAttrib(t,"height"),class:o.getAttrib(t,"class",""),type:Fg(t),align:Mg(e,t)},n?Lg(o,t):{})},Hg=function(e,t,n,o){var r=e.dom,i=o.getOr(t),a=function(e,t){return r.getStyle(e,t)||r.getAttrib(e,t)};return ae({width:a(i,"width"),height:a(t,"height"),scope:r.getAttrib(t,"scope"),celltype:Vs(t),class:r.getAttrib(t,"class",""),halign:Mg(e,t),valign:Dg(e,t)},n?Lg(r,t):{})},qg=function(e,t){var n=or.fromTable(e),o=or.justCells(n),r=q(o,(function(e){return D(t,(function(t){return Ot(e.element,t)}))}));return F(r,(function(e){return{element:e.element.dom,column:or.getColumnAt(n,e.column).map((function(e){return e.element.dom}))}}))},$g=function(e,t,n){e.setAttrib("scope",n.scope);e.setAttrib("class",n.class);e.setStyle("height",Gs(n.height));t.setStyle("width",Gs(n.width))},zg=function(e,t){e.setFormat("tablecellbackgroundcolor",t.backgroundcolor);e.setFormat("tablecellbordercolor",t.bordercolor);e.setFormat("tablecellborderstyle",t.borderstyle);e.setFormat("tablecellborderwidth",Gs(t.borderwidth))},Wg=function(e,t,n){var o=1===t.length;U(t,(function(t){var r=t.element,i=o?Ig.normal(e,r):Ig.ifTruthy(e,r),a=t.column.map((function(t){return o?Ig.normal(e,t):Ig.ifTruthy(e,t)})).getOr(i);$g(i,a,n);yd(e)&&zg(i,n);if(o){Yh(e,r);Xh(e,r)}n.halign&&Gh(e,r,n.halign);n.valign&&Kh(e,r,n.valign)}))},Gg=function(e,t){e.execCommand("mceTableCellType",!1,{type:t.celltype,no_events:!0})},Kg=function(e,t,n,o){var r=Lt(o,(function(e,t){return n[t]!==e}));Mt(r)>0&&t.length>=1&&Ro(t[0]).each((function(n){var i=qg(n,t),a=Mt(Lt(r,(function(e,t){return"scope"!==t&&"celltype"!==t})))>0,s=Bt(r,"celltype");(a||Bt(r,"scope"))&&Wg(e,i,o);s&&Gg(e,o);ed(e,n.dom,{structure:s,style:a})}))},Yg=function(e,t,n,o){var r=o.getData();o.close();e.undoManager.transact((function(){Kg(e,t,n,r);e.focus()}))},Xg=function(e,t){var n=Ro(t[0]).map((function(n){return F(qg(n,t),(function(t){return Hg(e,t.element,yd(e),t.column)}))}));return _g(n.getOrDie())},Zg=function(e,t){var n=Cl(t);if(0!==n.length){var o=Xg(e,n),r={type:"tabpanel",tabs:[{title:"General",name:"general",items:Ng(e)},Eg(e,"cell")]},i={type:"panel",items:[{type:"grid",columns:2,items:Ng(e)}]};e.windowManager.open({title:"Cell Properties",size:"normal",body:yd(e)?r:i,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:o,onSubmit:C(Yg,e,n,o)})}},Qg=function(e){var t=vg(Td(e));return t.length>0?I.some({name:"class",type:"listbox",label:"Class",items:t}):I.none()},Jg=[{type:"listbox",name:"type",label:"Row type",items:[{text:"Header",value:"header"},{text:"Body",value:"body"},{text:"Footer",value:"footer"}]},{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height",type:"input"}],eb=function(e){return Jg.concat(Qg(e).toArray())},tb=function(e,t){e.setAttrib("class",t.class);e.setStyle("height",Gs(t.height))},nb=function(e,t){e.setStyle("background-color",t.backgroundcolor);e.setStyle("border-color",t.bordercolor);e.setStyle("border-style",t.borderstyle)},ob=function(e,t,n,o){var r=1===t.length;U(t,(function(t){var i=r?Ig.normal(e,t):Ig.ifTruthy(e,t);tb(i,n);Cd(e)&&nb(i,n);if(n.align!==o.align){Yh(e,t);Gh(e,t,n.align)}}))},rb=function(e,t){e.execCommand("mceTableRowType",!1,{type:t.type,no_events:!0})},ib=function(e,t,n,o){var r=Lt(o,(function(e,t){return n[t]!==e}));if(Mt(r)>0){var i=Bt(r,"type"),a=!i||Mt(r)>1;a&&ob(e,t,o,n);i&&rb(e,o);Ro(gt.fromDom(t[0])).each((function(t){return ed(e,t.dom,{structure:i,style:a})}))}},ab=function(e,t,n,o){var r=o.getData();o.close();e.undoManager.transact((function(){ib(e,t,n,r);e.focus()}))},sb=function(e){var t=Ol(Qs(e),dl.selected);if(0!==t.length){var n=F(t,(function(t){return Vg(e,t.dom,Cd(e))})),o=_g(n),r={type:"tabpanel",tabs:[{title:"General",name:"general",items:eb(e)},Eg(e,"row")]},i={type:"panel",items:[{type:"grid",columns:2,items:eb(e)}]};e.windowManager.open({title:"Row Properties",size:"normal",body:Cd(e)?r:i,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:o,onSubmit:C(ab,e,F(t,(function(e){return e.dom})),o)})}},lb=function(e,t,n){var o=n?[{type:"input",name:"cols",label:"Cols",inputMode:"numeric"},{type:"input",name:"rows",label:"Rows",inputMode:"numeric"}]:[],r=[{type:"input",name:"width",label:"Width"},{type:"input",name:"height",label:"Height"}],i=xd(e)?[{type:"input",name:"cellspacing",label:"Cell spacing",inputMode:"numeric"},{type:"input",name:"cellpadding",label:"Cell padding",inputMode:"numeric"},{type:"input",name:"border",label:"Border width"},{type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]}]:[],a=[{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]}],s=t.length>0?[{type:"listbox",name:"class",label:"Class",items:t}]:[];return o.concat(r).concat(i).concat(a).concat(s)},cb=function(e,t,n,o){if("TD"===t.tagName||"TH"===t.tagName)r(n)?e.setStyle(t,n,o):e.setStyle(t,n);else if(t.children)for(var i=0;i<t.children.length;i++)cb(e,t.children[i],n,o)},ub=function(e,t,n){var o=e.dom,r={},i={};r.class=n.class;i.height=Gs(n.height);o.getAttrib(t,"width")&&!Sd(e)?r.width=Ws(n.width):i.width=Gs(n.width);if(Sd(e)){i["border-width"]=Gs(n.border);i["border-spacing"]=Gs(n.cellspacing)}else{r.border=n.border;r.cellpadding=n.cellpadding;r.cellspacing=n.cellspacing}if(Sd(e)&&t.children)for(var a=0;a<t.children.length;a++){cb(o,t.children[a],{"border-width":Gs(n.border),padding:Gs(n.cellpadding)});Od(e)&&cb(o,t.children[a],{"border-color":n.bordercolor})}if(Od(e)){i["background-color"]=n.backgroundcolor;i["border-color"]=n.bordercolor;i["border-style"]=n.borderstyle}r.style=o.serializeStyle(ae(ae({},gd(e)),i));o.setAttribs(t,ae(ae({},hd(e)),r))},db=function(e,t,n,o){var r=e.dom,i=o.getData(),a=Lt(i,(function(e,t){return n[t]!==e}));o.close();""===i.class&&delete i.class;e.undoManager.transact((function(){if(!t){var n=parseInt(i.cols,10)||1,o=parseInt(i.rows,10)||1;t=_h(e,n,o,0,0)}if(Mt(a)>0){ub(e,t,i);var s=r.select("caption",t)[0];(s&&!i.caption||!s&&i.caption)&&e.execCommand("mceTableToggleCaption");""===i.align?Yh(e,t):Gh(e,t,i.align)}e.focus();e.addVisual();if(Mt(a)>0){var l=Bt(a,"caption"),c=!l||Mt(a)>1;ed(e,t,{structure:l,style:c})}}))},fb=function(e,t){var n,o=e.dom,r=Bg(e,Od(e));if(!1===t){if(n=o.getParent(e.selection.getStart(),"table",e.getBody()))r=Ug(e,n,Od(e));else if(Od(e)){r.borderstyle="";r.bordercolor="";r.backgroundcolor=""}}else{r.cols="1";r.rows="1";if(Od(e)){r.borderstyle="";r.bordercolor="";r.backgroundcolor=""}}var i=vg(kd(e));i.length>0&&r.class&&(r.class=r.class.replace(/\s*mce\-item\-table\s*/g,""));var a={type:"grid",columns:2,items:lb(e,i,t)},s=function(){return{type:"panel",items:[a]}},l=function(){return{type:"tabpanel",tabs:[{title:"General",name:"general",items:[a]},Eg(e,"table")]}},c=Od(e)?l():s();e.windowManager.open({title:"Table Properties",size:"normal",body:c,onSubmit:C(db,e,n,r),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:r})},pb=function(e){return vl(Qs(e),zs(e))},mb=function(e){return yl(Qs(e),zs(e))},hb=function(e,t,n,o,a){var s=zs(e),l=function(t){return pb(e).each((function(n){Ad(e)||Ed(e)||Nd(e)||Ro(n,s).each((function(n){"relative"!==t||vc(n)?"fixed"!==t||yc(n)?"responsive"!==t||Cc(n)||Kd(n):Gd(n):Wd(n);Ks(n);ed(e,n.dom,nd)}))}))},c=function(e){return Ro(e,s)},u=function(t){return mb(e).bind((function(e){return c(e).map((function(n){return t(n,e)}))}))},d=function(t){e.focus()},f=function(e,t){void 0===t&&(t=!1);return u((function(n,r){var i=pl(o,n,r);e(n,i,t).each(d)}))},p=function(){return u((function(t,n){var r=pl(o,t,n),i=Ds(m,gt.fromDom(e.getDoc()),I.none());return $h(t,r,i)}))},h=function(){return u((function(e,t){var n=pl(o,e,t);return qh(e,n)}))},g=function(t,n){return n().each((function(n){var r=F(n,(function(e){return vi(e)}));u((function(n,i){var a=Bs(gt.fromDom(e.getDoc())),s=hl(o,i,r,a);t(n,s).each(d)}))}))},b=function(e){return function(t,n){return Dt(n,"type").each((function(t){f(e(t),n.no_events)}))}};Nt({mceTableSplitCells:function(){return f(t.unmergeCells)},mceTableMergeCells:function(){return f(t.mergeCells)},mceTableInsertRowBefore:function(){return f(t.insertRowsBefore)},mceTableInsertRowAfter:function(){return f(t.insertRowsAfter)},mceTableInsertColBefore:function(){return f(t.insertColumnsBefore)},mceTableInsertColAfter:function(){return f(t.insertColumnsAfter)},mceTableDeleteCol:function(){return f(t.deleteColumn)},mceTableDeleteRow:function(){return f(t.deleteRow)},mceTableCutCol:function(){return h().each((function(e){a.setColumns(e);f(t.deleteColumn)}))},mceTableCutRow:function(){return p().each((function(e){a.setRows(e);f(t.deleteRow)}))},mceTableCopyCol:function(){return h().each((function(e){return a.setColumns(e)}))},mceTableCopyRow:function(){return p().each((function(e){return a.setRows(e)}))},mceTablePasteColBefore:function(){return g(t.pasteColsBefore,a.getColumns)},mceTablePasteColAfter:function(){return g(t.pasteColsAfter,a.getColumns)},mceTablePasteRowBefore:function(){return g(t.pasteRowsBefore,a.getRows)},mceTablePasteRowAfter:function(){return g(t.pasteRowsAfter,a.getRows)},mceTableDelete:function(){return pb(e).each((function(t){Ro(t,s).filter(j(s)).each((function(t){var n=gt.fromText("");yr(t,n);Nr(t);if(e.dom.isEmpty(e.getBody())){e.setContent("");e.selection.setCursorLocation()}else{var o=e.dom.createRng();o.setStart(n.dom,0);o.setEnd(n.dom,0);e.selection.setRng(o);e.nodeChanged()}}))}))},mceTableCellToggleClass:function(t,n){u((function(t){var r=Cl(o),i=Z(r,(function(t){return e.formatter.match("tablecellclass",{value:n},t.dom)}))?e.formatter.remove:e.formatter.apply;U(r,(function(e){return i("tablecellclass",{value:n},e.dom)}));ed(e,t.dom,td)}))},mceTableToggleClass:function(t,n){u((function(t){e.formatter.toggle("tableclass",{value:n},t.dom);ed(e,t.dom,td)}))},mceTableToggleCaption:function(){pb(e).each((function(t){Ro(t,s).each((function(n){zn(n,"caption").fold((function(){var t=gt.fromTag("caption");Or(t,gt.fromText("Caption"));xr(n,t,0);e.selection.setCursorLocation(t.dom,0)}),(function(o){un("caption")(t)&&Ct("td",n).each((function(t){return e.selection.setCursorLocation(t.dom,0)}));Nr(o)}));ed(e,n.dom,nd)}))}))},mceTableSizingMode:function(e,t){return l(t)},mceTableCellType:b((function(e){return"th"===e?t.makeCellsHeader:t.unmakeCellsHeader})),mceTableColType:b((function(e){return"th"===e?t.makeColumnsHeader:t.unmakeColumnsHeader})),mceTableRowType:b((function(e){switch(e){case"header":return t.makeRowsHeader;case"footer":return t.makeRowsFooter;default:return t.makeRowsBody}}))},(function(t,n){return e.addCommand(n,t)}));Nt({mceTableProps:C(fb,e,!1),mceTableRowProps:C(sb,e),mceTableCellProps:C(Zg,e,o)},(function(t,n){return e.addCommand(n,(function(){return t()}))}));e.addCommand("mceInsertTable",(function(t,n){i(n)&&Tt(n).length>0?Ph(e,n.rows,n.columns,n.options,"Invalid values for mceInsertTable - rows and columns values are required to insert a table."):fb(e,!0)}));e.addCommand("mceTableApplyCellStyle",(function(t,n){var a=function(e){return"tablecell"+e.toLowerCase().replace("-","")};if(i(n)){var s=Cl(o);if(0!==s.length){var l=Lt(n,(function(t,n){return e.formatter.has(a(n))&&r(t)}));if(!Ut(l)){Nt(l,(function(t,n){U(s,(function(o){Ig.normal(e,o.dom).setFormat(a(n),t)}))}));c(s[0]).each((function(t){return ed(e,t.dom,td)}))}}}}))},gb=function(e,t,n){var o=zs(e),r=function(t){return yl(Qs(e)).bind((function(e){return Ro(e,o).map((function(o){var r=pl(n,o,e);return t(o,r)}))})).getOr("")};Nt({mceTableRowType:function(){return r(t.getTableRowType)},mceTableCellType:function(){return r(t.getTableCellType)},mceTableColType:function(){return r(t.getTableColType)}},(function(t,n){return e.addQueryValueHandler(n,t)}))},bb=function(){var e=hg(),t=hg();return{getRows:e.get,setRows:function(n){n.fold(e.clear,e.set);t.clear()},clearRows:e.clear,getColumns:t.get,setColumns:function(n){n.fold(t.clear,t.set);e.clear()},clearColumns:t.clear}},vb={remove_similar:!0,inherit:!1},yb=ae({selector:"td,th"},vb),Cb={tablecellbackgroundcolor:ae({styles:{backgroundColor:"%value"}},yb),tablecellverticalalign:ae({styles:{"vertical-align":"%value"}},yb),tablecellbordercolor:ae({styles:{borderColor:"%value"}},yb),tablecellclass:ae({classes:["%value"]},yb),tableclass:ae({selector:"table",classes:["%value"]},vb),tablecellborderstyle:ae({styles:{borderStyle:"%value"}},yb),tablecellborderwidth:ae({styles:{borderWidth:"%value"}},yb)},Ob=function(e){e.formatter.register(Cb)},xb=li.generate([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),jb=function(e){void 0===e&&(e=void 0);return xb.none(e)},Sb=ae(ae({},xb),{none:jb}),wb=function(e,t,n,o,r){void 0===r&&(r=T);var i=1===o;if(!i&&n<=0)return Sb.first(e[0]);if(i&&n>=e.length-1)return Sb.last(e[e.length-1]);var a=n+o,s=e[a];return r(s)?Sb.middle(t,s):wb(e,t,a,o,r)},Tb=function(e,t){return Ro(e,t).bind((function(t){var n=Ao(t);return K(n,(function(t){return Ot(e,t)})).map((function(e){return{index:e,all:n}}))}))},kb=function(e,t,n){return Tb(e,n).fold((function(){return Sb.none(e)}),(function(n){return wb(n.all,e,n.index,1,t)}))},Nb=function(e,t,n){return Tb(e,n).fold((function(){return Sb.none()}),(function(n){return wb(n.all,e,n.index,-1,t)}))},Eb={create:function(e,t,n,o){return{start:e,soffset:t,finish:n,foffset:o}}},Ab=li.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),Ib=function(e,t,n,o){return e.fold(t,n,o)},Rb=function(e){return e.fold(v,v,v)},Lb={before:Ab.before,on:Ab.on,after:Ab.after,cata:Ib,getStart:Rb},_b=li.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),Pb=function(e){return _b.exact(e.start,e.soffset,e.finish,e.foffset)},Mb=function(e){return e.match({domRange:function(e){return gt.fromDom(e.startContainer)},relative:function(e,t){return Lb.getStart(e)},exact:function(e,t,n,o){return e}})},Db={domRange:_b.domRange,relative:_b.relative,exact:_b.exact,exactFromRange:Pb,getWin:function(e){var t=Mb(e);return pn(t)},range:Eb.create},Bb=function(e,t){var n=e.document.createRange();n.selectNode(t.dom);return n},Fb=function(e,t){var n=e.document.createRange();Ub(n,t);return n},Ub=function(e,t){return e.selectNodeContents(t.dom)},Vb=function(e,t){t.fold((function(t){e.setStartBefore(t.dom)}),(function(t,n){e.setStart(t.dom,n)}),(function(t){e.setStartAfter(t.dom)}))},Hb=function(e,t){t.fold((function(t){e.setEndBefore(t.dom)}),(function(t,n){e.setEnd(t.dom,n)}),(function(t){e.setEndAfter(t.dom)}))},qb=function(e,t,n){var o=e.document.createRange();Vb(o,t);Hb(o,n);return o},$b=function(e,t,n,o,r){var i=e.document.createRange();i.setStart(t.dom,n);i.setEnd(o.dom,r);return i},zb=function(e){return{left:e.left,top:e.top,right:e.right,bottom:e.bottom,width:e.width,height:e.height}},Wb=function(e){var t=e.getClientRects(),n=t.length>0?t[0]:e.getBoundingClientRect();return n.width>0||n.height>0?I.some(n).map(zb):I.none()},Gb=li.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),Kb=function(e,t,n){return t(gt.fromDom(n.startContainer),n.startOffset,gt.fromDom(n.endContainer),n.endOffset)},Yb=function(e,t){return t.match({domRange:function(e){return{ltr:b(e),rtl:I.none}},relative:function(t,n){return{ltr:le((function(){return qb(e,t,n)})),rtl:le((function(){return I.some(qb(e,n,t))}))}},exact:function(t,n,o,r){return{ltr:le((function(){return $b(e,t,n,o,r)})),rtl:le((function(){return I.some($b(e,o,r,t,n))}))}}})},Xb=function(e,t){var n=t.ltr();if(n.collapsed){return t.rtl().filter((function(e){return!1===e.collapsed})).map((function(e){return Gb.rtl(gt.fromDom(e.endContainer),e.endOffset,gt.fromDom(e.startContainer),e.startOffset)})).getOrThunk((function(){return Kb(e,Gb.ltr,n)}))}return Kb(e,Gb.ltr,n)},Zb=function(e,t){var n=Yb(e,t);return Xb(e,n)},Qb=function(e,t){return Zb(e,t).match({ltr:function(t,n,o,r){var i=e.document.createRange();i.setStart(t.dom,n);i.setEnd(o.dom,r);return i},rtl:function(t,n,o,r){var i=e.document.createRange();i.setStart(o.dom,r);i.setEnd(t.dom,n);return i}})};Gb.ltr;Gb.rtl;var Jb=function(e,t,n,o,r){if(0===r)return 0;if(t===o)return r-1;for(var i=o,a=1;a<r;a++){var s=e(a),l=Math.abs(t-s.left);if(n<=s.bottom){if(n<s.top||l>i)return a-1;i=l}}return 0},ev=function(e,t,n){return t>=e.left&&t<=e.right&&n>=e.top&&n<=e.bottom},tv=function(e,t,n,o,r){var i=function(n){var o=e.dom.createRange();o.setStart(t.dom,n);o.collapse(!0);return o},a=function(e){return i(e).getBoundingClientRect()},s=Ir(t).length,l=Jb(a,n,o,r.right,s);return i(l)},nv=function(e,t,n,o){var r=e.dom.createRange();r.selectNode(t.dom);var i=r.getClientRects();return ie(i,(function(e){return ev(e,n,o)?I.some(e):I.none()})).map((function(r){return tv(e,t,n,o,r)}))},ov=function(e,t,n,o){var r=e.dom.createRange(),i=yn(t);return ie(i,(function(t){r.selectNode(t.dom);return ev(r.getBoundingClientRect(),n,o)?rv(e,t,n,o):I.none()}))},rv=function(e,t,n,o){return sn(t)?nv(e,t,n,o):ov(e,t,n,o)},iv=function(e,t,n,o){var r=e.dom.createRange();r.selectNode(t.dom);var i=r.getBoundingClientRect(),a=Math.max(i.left,Math.min(i.right,n)),s=Math.max(i.top,Math.min(i.bottom,o));return rv(e,t,a,s)},av=!0,sv=!1,lv=function(e,t){return t-e.left<e.right-t?av:sv},cv=function(e,t,n){var o=e.dom.createRange();o.selectNode(t.dom);o.collapse(n);return o},uv=function(e,t,n){var o=e.dom.createRange();o.selectNode(t.dom);var r=o.getBoundingClientRect(),i=lv(r,n);return(i===av?ws:Ts)(t).map((function(t){return cv(e,t,i)}))},dv=function(e,t,n){var o=t.dom.getBoundingClientRect(),r=lv(o,n);return I.some(cv(e,t,r))},fv=function(e,t,n){return(0===yn(t).length?dv:uv)(e,t,n)},pv=function(e,t,n){var o,r;return I.from(null===(r=(o=e.dom).caretPositionFromPoint)||void 0===r?void 0:r.call(o,t,n)).bind((function(t){if(null===t.offsetNode)return I.none();var n=e.dom.createRange();n.setStart(t.offsetNode,t.offset);n.collapse();return I.some(n)}))},mv=function(e,t,n){var o,r;return I.from(null===(r=(o=e.dom).caretRangeFromPoint)||void 0===r?void 0:r.call(o,t,n))},hv=function(e,t,n,o){var r=e.dom.createRange();r.selectNode(t.dom);var i=r.getBoundingClientRect(),a=Math.max(i.left,Math.min(i.right,n)),s=Math.max(i.top,Math.min(i.bottom,o));return iv(e,t,a,s)},gv=function(e,t,n){return gt.fromPoint(e,t,n).bind((function(o){var r=function(){return fv(e,o,t)};return 0===yn(o).length?r():hv(e,o,t,n).orThunk(r)}))},bv=document.caretPositionFromPoint?pv:document.caretRangeFromPoint?mv:gv,vv=function(e,t,n){var o=gt.fromDom(e.document);return bv(o,t,n).map((function(e){return Eb.create(gt.fromDom(e.startContainer),e.startOffset,gt.fromDom(e.endContainer),e.endOffset)}))},yv=function(e,t){var n=tn(e);return"input"===n?Lb.after(e):M(["br","img"],n)?0===t?Lb.before(e):Lb.after(e):Lb.on(e,t)},Cv=function(e,t){var n=e.fold(Lb.before,yv,Lb.after),o=t.fold(Lb.before,yv,Lb.after);return Db.relative(n,o)},Ov=function(e,t,n,o){var r=yv(e,t),i=yv(n,o);return Db.relative(r,i)},xv=function(e){return e.match({domRange:function(e){var t=gt.fromDom(e.startContainer),n=gt.fromDom(e.endContainer);return Ov(t,e.startOffset,n,e.endOffset)},relative:Cv,exact:Ov})},jv=function(e,t,n,o){var r=dn(e).dom.createRange();r.setStart(e.dom,t);r.setEnd(n.dom,o);return r},Sv=function(e,t,n,o){var r=jv(e,t,n,o),i=Ot(e,n)&&t===o;return r.collapsed&&!i},wv=function(e){return I.from(e.getSelection())},Tv=function(e,t){wv(e).each((function(e){e.removeAllRanges();e.addRange(t)}))},kv=function(e,t,n,o,r){var i=$b(e,t,n,o,r);Tv(e,i)},Nv=function(e,t,n,o,r,i){t.collapse(n.dom,o);t.extend(r.dom,i)},Ev=function(e,t){return Zb(e,t).match({ltr:function(t,n,o,r){kv(e,t,n,o,r)},rtl:function(t,n,o,r){wv(e).each((function(i){if(i.setBaseAndExtent)i.setBaseAndExtent(t.dom,n,o.dom,r);else if(i.extend)try{Nv(e,i,t,n,o,r)}catch(i){kv(e,o,r,t,n)}else kv(e,o,r,t,n)}))}})},Av=function(e,t,n,o,r){var i=Ov(t,n,o,r);Ev(e,i)},Iv=function(e,t,n){var o=Cv(t,n);Ev(e,o)},Rv=function(e){var t=Db.getWin(e).dom,n=function(e,n,o,r){return $b(t,e,n,o,r)},o=xv(e);return Zb(t,o).match({ltr:n,rtl:n})},Lv=function(e){if(e.rangeCount>0){var t=e.getRangeAt(0),n=e.getRangeAt(e.rangeCount-1);return I.some(Eb.create(gt.fromDom(t.startContainer),t.startOffset,gt.fromDom(n.endContainer),n.endOffset))}return I.none()},_v=function(e){if(null===e.anchorNode||null===e.focusNode)return Lv(e);var t=gt.fromDom(e.anchorNode),n=gt.fromDom(e.focusNode);return Sv(t,e.anchorOffset,n,e.focusOffset)?I.some(Eb.create(t,e.anchorOffset,n,e.focusOffset)):Lv(e)},Pv=function(e,t,n){void 0===n&&(n=!0);var o=(n?Fb:Bb)(e,t);Tv(e,o)},Mv=function(e){return wv(e).filter((function(e){return e.rangeCount>0})).bind(_v)},Dv=function(e){return Mv(e).map((function(e){return Db.exact(e.start,e.soffset,e.finish,e.foffset)}))},Bv=function(e,t){var n=Qb(e,t);return Wb(n)},Fv=function(e,t,n){return vv(e,t,n)},Uv=function(e){wv(e).each((function(e){return e.removeAllRanges()}))},Vv=tinymce.util.Tools.resolve("tinymce.util.VK"),Hv=function(e,t,n){return zv(e,t,kb(n,yu))},qv=function(e,t,n){return zv(e,t,Nb(n,yu))},$v=function(e,t){var n=Db.exact(t,0,t,0);return Rv(n)},zv=function(e,t,n){return n.fold(I.none,I.none,(function(t,n){return ws(n).map((function(t){return $v(e,t)}))}),(function(n){e.execCommand("mceTableInsertRowAfter");return Hv(e,t,n)}))},Wv=["table","li","dl"],Gv=function(e,t,n){if(e.keyCode===Vv.TAB){var o=Hs(t),r=function(e){var t=tn(e);return Ot(e,o)||M(Wv,t)},i=t.selection.getRng(),a=gt.fromDom(e.shiftKey?i.startContainer:i.endContainer);Eo(a,r).each((function(o){e.preventDefault();Ro(o,r).each(n.clear);t.selection.collapse(e.shiftKey);(e.shiftKey?qv:Hv)(t,r,o).each((function(e){t.selection.setRng(e)}))}))}},Kv={create:function(e,t){return{selection:e,kill:t}}},Yv={create:function(e,t,n,o){return{start:Lb.on(e,t),finish:Lb.on(n,o)}}},Xv=function(e,t){var n=Qb(e,t);return Eb.create(gt.fromDom(n.startContainer),n.startOffset,gt.fromDom(n.endContainer),n.endOffset)},Zv=Yv.create,Qv=function(e,t,n,o,r,i,a){return Ot(n,r)&&o===i?I.none():Gn(n,"td,th",t).bind((function(n){return Gn(r,"td,th",t).bind((function(o){return Jv(e,t,n,o,a)}))}))},Jv=function(e,t,n,o,r){return Ot(n,o)?I.none():Jr(n,o,t).bind((function(t){var o=t.boxes.getOr([]);if(o.length>1){r(e,o,t.start,t.finish);return I.some(Kv.create(I.some(Zv(n,0,n,Os(n))),!0))}return I.none()}))},ey=function(e,t,n,o,r){var i=function(e){r.clearBeforeUpdate(n);r.selectRange(n,e.boxes,e.start,e.finish);return e.boxes};return ri(o,e,t,r.firstSelectedSelector,r.lastSelectedSelector).map(i)},ty=function(e,t){return{item:e,mode:t}},ny=function(e,t,n,o){void 0===o&&(o=oy);return e.property().parent(t).map((function(e){return ty(e,o)}))},oy=function(e,t,n,o){void 0===o&&(o=ry);return n.sibling(e,t).map((function(e){return ty(e,o)}))},ry=function(e,t,n,o){void 0===o&&(o=ry);var r=e.property().children(t);return n.first(r).map((function(e){return ty(e,o)}))},iy=[{current:ny,next:oy,fallback:I.none()},{current:oy,next:ry,fallback:I.some(ny)},{current:ry,next:ry,fallback:I.some(oy)}],ay=function(e,t,n,o,r){void 0===r&&(r=iy);return G(r,(function(e){return e.current===n})).bind((function(n){return n.current(e,t,o,n.next).orThunk((function(){return n.fallback.bind((function(n){return ay(e,t,n,o)}))}))}))},sy={left:function(){return{sibling:function(e,t){return e.query().prevSibling(t)},first:function(e){return e.length>0?I.some(e[e.length-1]):I.none()}}},right:function(){return{sibling:function(e,t){return e.query().nextSibling(t)},first:function(e){return e.length>0?I.some(e[0]):I.none()}}}},ly=function(e,t,n,o,r,i){return ay(e,t,o,r).bind((function(t){return i(t.item)?I.none():n(t.item)?I.some(t.item):ly(e,t.item,n,t.mode,r,i)}))},cy=function(e){return function(t){return 0===e.property().children(t).length}},uy=function(e,t,n){return fy(e,t,cy(e),n)},dy=function(e,t,n){return py(e,t,cy(e),n)},fy=function(e,t,n,o){return ly(e,t,n,oy,sy.left(),o)},py=function(e,t,n,o){return ly(e,t,n,oy,sy.right(),o)},my=Pr(),hy=function(e,t){return uy(my,e,t)},gy=function(e,t){return dy(my,e,t)},by=function(e,t,n){return fy(my,e,t,n)},vy=function(e,t,n){return py(my,e,t,n)},yy=function(e,t,n){return Un(e,t,n).isSome()},Cy=li.generate([{none:["message"]},{success:[]},{failedUp:["cell"]},{failedDown:["cell"]}]),Oy=function(e,t,n){var o=e.getRect(t),r=e.getRect(n);return r.right>o.left&&r.left<o.right},xy=function(e){return Gn(e,"tr")},jy=function(e,t,n,o,r,i,a){return Gn(o,"td,th",a).bind((function(n){return Gn(t,"td,th",a).map((function(t){return Ot(n,t)?Ot(o,n)&&Os(n)===r?i(t):Cy.none("in same cell"):Xr(xy,[n,t]).fold((function(){return Oy(e,t,n)?Cy.success():i(t)}),(function(e){return i(t)}))}))})).getOr(Cy.none("default"))},Sy=function(e,t,n,o,r){return e.fold(t,n,o,r)},wy=ae(ae({},Cy),{verify:jy,cata:Sy}),Ty=function(e,t,n,o){return{parent:e,children:t,element:n,index:o}},ky=function(e){return mn(e).bind((function(t){var n=yn(t);return Ny(n,e).map((function(o){return Ty(t,n,e,o)}))}))},Ny=function(e,t){return K(e,C(Ot,t))},Ey=function(e){return"br"===tn(e)},Ay=function(e,t,n){return t(e,n).bind((function(e){return sn(e)&&0===Ir(e).trim().length?Ay(e,t,n):I.some(e)}))},Iy=function(e,t,n){return n.traverse(t).orThunk((function(){return Ay(t,n.gather,e)})).map(n.relative)},Ry=function(e,t){return Cn(e,t).filter(Ey).orThunk((function(){return Cn(e,t-1).filter(Ey)}))},Ly=function(e,t,n,o){return Ry(t,n).bind((function(t){return o.traverse(t).fold((function(){return Ay(t,o.gather,e).map(o.relative)}),(function(e){return ky(e).map((function(e){return Lb.on(e.parent,e.index)}))}))}))},_y=function(e,t,n,o){return(Ey(t)?Iy(e,t,o):Ly(e,t,n,o)).map((function(e){return{start:e,finish:e}}))},Py=function(e){return wy.cata(e,(function(e){return I.none()}),(function(){return I.none()}),(function(e){return I.some(nf(e,0))}),(function(e){return I.some(nf(e,Os(e)))}))},My=function(e,t){return{left:e.left,top:e.top+t,right:e.right,bottom:e.bottom+t}},Dy=function(e,t){return{left:e.left,top:e.top-t,right:e.right,bottom:e.bottom-t}},By=function(e,t,n){return{left:e.left+t,top:e.top+n,right:e.right+t,bottom:e.bottom+n}},Fy=function(e){return e.top},Uy=function(e){return e.bottom},Vy=function(e,t,n){return n>=0&&n<Os(t)?e.getRangedRect(t,n,t,n+1):n>0?e.getRangedRect(t,n-1,t,n):I.none()},Hy=function(e){return{left:e.left,top:e.top,right:e.right,bottom:e.bottom}},qy=function(e,t){return I.some(e.getRect(t))},$y=function(e,t,n){return an(t)?qy(e,t).map(Hy):sn(t)?Vy(e,t,n).map(Hy):I.none()},zy=function(e,t){return an(t)?qy(e,t).map(Hy):sn(t)?e.getRangedRect(t,0,t,Os(t)).map(Hy):I.none()},Wy=5,Gy=100,Ky=li.generate([{none:[]},{retry:["caret"]}]),Yy=function(e,t){return e.left<t.left||Math.abs(t.right-e.left)<1||e.left>t.right},Xy=function(e,t,n){return Vn(t,rm).fold(w,(function(t){return zy(e,t).exists((function(e){return Yy(n,e)}))}))},Zy={point:Uy,adjuster:function(e,t,n,o,r){var i=My(r,Wy);return Math.abs(n.bottom-o.bottom)<1||n.top>r.bottom?Ky.retry(i):n.top===r.bottom?Ky.retry(My(r,1)):Xy(e,t,r)?Ky.retry(By(i,Wy,0)):Ky.none()},move:My,gather:gy},Qy=function(e,t,n){return e.elementFromPoint(t,n).filter((function(e){return"table"===tn(e)})).isSome()},Jy=function(e,t,n,o,r){return eC(e,t,n,t.move(o,Wy),r)},eC=function(e,t,n,o,r){return 0===r?I.some(o):Qy(e,o.left,t.point(o))?Jy(e,t,n,o,r-1):e.situsFromPoint(o.left,t.point(o)).bind((function(i){return i.start.fold(I.none,(function(i){return zy(e,i).bind((function(a){return t.adjuster(e,i,a,n,o).fold(I.none,(function(o){return eC(e,t,n,o,r-1)}))})).orThunk((function(){return I.some(o)}))}),I.none)}))},tC=function(e,t){return e.situsFromPoint(t.left,t.bottom+Wy)},nC=function(e,t){return e.situsFromPoint(t.left,t.top-Wy)},oC=function(e,t,n){return e.point(t)>n.getInnerHeight()?I.some(e.point(t)-n.getInnerHeight()):e.point(t)<0?I.some(-e.point(t)):I.none()},rC=function(e,t,n){var o=e.move(n,Wy),r=eC(t,e,n,o,Gy).getOr(o);return oC(e,r,t).fold((function(){return t.situsFromPoint(r.left,e.point(r))}),(function(n){t.scrollBy(0,n);return t.situsFromPoint(r.left,e.point(r)-n)}))},iC={tryUp:C(rC,{point:Fy,adjuster:function(e,t,n,o,r){var i=Dy(r,Wy);return Math.abs(n.top-o.top)<1||n.bottom<r.top?Ky.retry(i):n.bottom===r.top?Ky.retry(Dy(r,1)):Xy(e,t,r)?Ky.retry(By(i,Wy,0)):Ky.none()},move:Dy,gather:hy}),tryDown:C(rC,Zy),ieTryUp:nC,ieTryDown:tC,getJumpSize:b(Wy)},aC=20,sC=function(e,t,n){return e.getSelection().bind((function(o){return _y(t,o.finish,o.foffset,n).fold((function(){return I.some(nf(o.finish,o.foffset))}),(function(r){var i=e.fromSitus(r),a=wy.verify(e,o.finish,o.foffset,i.finish,i.foffset,n.failure,t);return Py(a)}))}))},lC=function(e,t,n,o,r,i){return 0===i?I.none():dC(e,t,n,o,r).bind((function(a){var s=e.fromSitus(a),l=wy.verify(e,n,o,s.finish,s.foffset,r.failure,t);return wy.cata(l,(function(){return I.none()}),(function(){return I.some(a)}),(function(a){return Ot(n,a)&&0===o?cC(e,n,o,Dy,r):lC(e,t,a,0,r,i-1)}),(function(a){return Ot(n,a)&&o===Os(a)?cC(e,n,o,My,r):lC(e,t,a,Os(a),r,i-1)}))}))},cC=function(e,t,n,o,r){return $y(e,t,n).bind((function(t){return uC(e,r,o(t,iC.getJumpSize()))}))},uC=function(e,t,n){var o=rt().browser;return o.isChrome()||o.isSafari()||o.isFirefox()||o.isEdge()?t.otherRetry(e,n):o.isIE()?t.ieRetry(e,n):I.none()},dC=function(e,t,n,o,r){return $y(e,n,o).bind((function(t){return uC(e,r,t)}))},fC=function(e,t,n){return sC(e,t,n).bind((function(o){return lC(e,t,o.element,o.offset,n,aC).map(e.fromSitus)}))},pC=function(e,t){return yy(e,(function(e){return mn(e).exists((function(e){return Ot(e,t)}))}))},mC=function(e,t,n,o,r){return Gn(o,"td,th",t).bind((function(o){return Gn(o,"table",t).bind((function(i){return pC(r,i)?fC(e,t,n).bind((function(e){return Gn(e.finish,"td,th",t).map((function(t){return{start:o,finish:t,range:e}}))})):I.none()}))}))},hC=function(e,t,n,o,r,i){return rt().browser.isIE()?I.none():i(o,t).orThunk((function(){return mC(e,t,n,o,r).map((function(e){var t=e.range;return Kv.create(I.some(Zv(t.start,t.soffset,t.finish,t.foffset)),!0)}))}))},gC=function(e,t){return Gn(e,"tr",t).bind((function(e){return Gn(e,"table",t).bind((function(n){var o=Bn(n,"tr");return Ot(e,o[0])?by(n,(function(e){return Ts(e).isSome()}),t).map((function(e){var t=Os(e);return Kv.create(I.some(Zv(e,t,e,t)),!0)})):I.none()}))}))},bC=function(e,t){return Gn(e,"tr",t).bind((function(e){return Gn(e,"table",t).bind((function(n){var o=Bn(n,"tr");return Ot(e,o[o.length-1])?vy(n,(function(e){return ws(e).isSome()}),t).map((function(e){return Kv.create(I.some(Zv(e,0,e,0)),!0)})):I.none()}))}))},vC=function(e,t,n,o,r,i,a){return mC(e,n,o,r,i).bind((function(e){return Jv(t,n,e.start,e.finish,a)}))},yC=function(e,t){return Gn(e,"td,th",t)},CC=function(e,t,n,o){var r=hg(),i=r.clear,a=function(i){r.on((function(r){o.clearBeforeUpdate(t);yC(i.target,n).each((function(a){Jr(r,a,n).each((function(n){var r=n.boxes.getOr([]);if(1===r.length){var s=r[0],l="false"===Cu(s),c=no(vu(i.target),s,Ot);if(l&&c){o.selectRange(t,r,s,s);e.selectContents(s)}}else if(r.length>1){o.selectRange(t,r,n.start,n.finish);e.selectContents(a)}}))}))}))},s=function(e){a(e);i()};return{clearstate:i,mousedown:function(e){o.clear(t);yC(e.target,n).each(r.set)},mouseover:function(e){a(e)},mouseup:s}},OC={traverse:vn,gather:gy,relative:Lb.before,otherRetry:iC.tryDown,ieRetry:iC.ieTryDown,failure:wy.failedDown},xC={traverse:bn,gather:hy,relative:Lb.before,otherRetry:iC.tryUp,ieRetry:iC.ieTryUp,failure:wy.failedUp},jC=function(e){return function(t){return t===e}},SC=jC(38),wC=jC(40),TC=function(e){return e>=37&&e<=40},kC={isBackward:jC(37),isForward:jC(39)},NC={isBackward:jC(39),isForward:jC(37)},EC=function(e){var t=void 0!==e?e.dom:document,n=t.body.scrollLeft||t.documentElement.scrollLeft,o=t.body.scrollTop||t.documentElement.scrollTop;return Yi(n,o)},AC=function(e,t,n){var o=(void 0!==n?n.dom:document).defaultView;o&&o.scrollBy(e,t)},IC=function(e){return{elementFromPoint:function(t,n){return gt.fromPoint(gt.fromDom(e.document),t,n)},getRect:function(e){return e.dom.getBoundingClientRect()},getRangedRect:function(t,n,o,r){var i=Db.exact(t,n,o,r);return Bv(e,i)},getSelection:function(){return Dv(e).map((function(t){return Xv(e,t)}))},fromSitus:function(t){var n=Db.relative(t.start,t.finish);return Xv(e,n)},situsFromPoint:function(t,n){return Fv(e,t,n).map((function(e){return Yv.create(e.start,e.soffset,e.finish,e.foffset)}))},clearSelection:function(){Uv(e)},collapseSelection:function(t){void 0===t&&(t=!1);Dv(e).each((function(n){return n.fold((function(e){return e.collapse(t)}),(function(n,o){var r=t?n:o;Iv(e,r,r)}),(function(n,o,r,i){var a=t?n:r,s=t?o:i;Av(e,a,s,a,s)}))}))},setSelection:function(t){Av(e,t.start,t.soffset,t.finish,t.foffset)},setRelativeSelection:function(t,n){Iv(e,t,n)},selectNode:function(t){Pv(e,t,!1)},selectContents:function(t){Pv(e,t)},getInnerHeight:function(){return e.innerHeight},getScrollY:function(){return EC(gt.fromDom(e.document)).top},scrollBy:function(t,n){AC(t,n,gt.fromDom(e.document))}}},RC=function(e,t){return{rows:e,cols:t}},LC=function(e,t,n,o){var r=IC(e),i=CC(r,t,n,o);return{clearstate:i.clearstate,mousedown:i.mousedown,mouseover:i.mouseover,mouseup:i.mouseup}},_C=function(e,t,n,o){var r=IC(e),i=function(){o.clear(t);return I.none()};return{keydown:function(e,a,s,l,c,u){var d=e.raw,f=d.which,p=!0===d.shiftKey;return ei(t,o.selectedSelector).fold((function(){TC(f)&&!p&&o.clearBeforeUpdate(t);return wC(f)&&p?C(vC,r,t,n,OC,l,a,o.selectRange):SC(f)&&p?C(vC,r,t,n,xC,l,a,o.selectRange):wC(f)?C(hC,r,n,OC,l,a,bC):SC(f)?C(hC,r,n,xC,l,a,gC):I.none}),(function(e){var n=function(n){return function(){return ie(n,(function(n){return ey(n.rows,n.cols,t,e,o)})).fold((function(){return ni(t,o.firstSelectedSelector,o.lastSelectedSelector).map((function(e){var n=wC(f)||u.isForward(f)?Lb.after:Lb.before;r.setRelativeSelection(Lb.on(e.first,0),n(e.table));o.clear(t);return Kv.create(I.none(),!0)}))}),(function(e){return I.some(Kv.create(I.none(),!0))}))}};return wC(f)&&p?n([RC(1,0)]):SC(f)&&p?n([RC(-1,0)]):u.isBackward(f)&&p?n([RC(0,-1),RC(-1,0)]):u.isForward(f)&&p?n([RC(0,1),RC(1,0)]):TC(f)&&!p?i:I.none}))()},keyup:function(e,r,i,a,s){return ei(t,o.selectedSelector).fold((function(){var l=e.raw,c=l.which;return!0===l.shiftKey&&TC(c)?Qv(t,n,r,i,a,s,o.selectRange):I.none()}),I.none)}}},PC=function(e,t,n,o){var r=IC(e);return function(e,i){o.clearBeforeUpdate(t);Jr(e,i,n).each((function(e){var n=e.boxes.getOr([]);o.selectRange(t,n,e.start,e.finish);r.selectContents(i);r.collapseSelection()}))}},MC=function(e,t){U(t,(function(t){au(e,t)}))},DC=function(e){return function(t){ru(t,e)}},BC=function(e){return function(t){MC(t,e)}},FC={byClass:function(e){var t=DC(e.selected),n=BC([e.selected,e.lastSelected,e.firstSelected]),o=function(t){var o=Bn(t,e.selectedSelector);U(o,n)},r=function(n,r,i,a){o(n);U(r,t);ru(i,e.firstSelected);ru(a,e.lastSelected)};return{clearBeforeUpdate:o,clear:o,selectRange:r,selectedSelector:e.selectedSelector,firstSelectedSelector:e.firstSelectedSelector,lastSelectedSelector:e.lastSelectedSelector}},byAttr:function(e,t,n){var o=function(t){eo(t,e.selected);eo(t,e.firstSelected);eo(t,e.lastSelected)},r=function(t){Yn(t,e.selected,"1")},i=function(e){a(e);n()},a=function(t){var n=Bn(t,e.selectedSelector+","+e.firstSelectedSelector+","+e.lastSelectedSelector);U(n,o)},s=function(n,o,a,s){i(n);U(o,r);Yn(a,e.firstSelected,"1");Yn(s,e.lastSelected,"1");t(o,a,s)};return{clearBeforeUpdate:a,clear:i,selectRange:s,selectedSelector:e.selectedSelector,firstSelectedSelector:e.firstSelectedSelector,lastSelectedSelector:e.lastSelectedSelector}}},UC=function(e,t){var n=e.slice(0,t[t.length-1].row+1),o=Bf(n);return X(o,(function(e){var n=e.cells.slice(0,t[t.length-1].column+1);return F(n,(function(e){return e.element}))}))},VC=function(e,t){var n=e.slice(t[0].row+t[0].rowspan-1,e.length),o=Bf(n);return X(o,(function(e){var n=e.cells.slice(t[0].column+t[0].colspan-1,e.cells.length);return F(n,(function(e){return e.element}))}))},HC=function(e,t,n){var o=or.fromTable(e);return Wf(o,t).map((function(e){var t=Mf(o,n,!1);return{upOrLeftCells:UC(t,e),downOrRightCells:VC(t,e)}}))},qC=tinymce.util.Tools.resolve("tinymce.Env"),$C=function(e){return!1===su(gt.fromDom(e.target),"ephox-snooker-resizer-bar")};function zC(e,t,n){var o=function(t,o,r){n.targets().each((function(n){Ro(o).each((function(i){var a=Dd(e),s=Ds(m,gt.fromDom(e.getDoc()),a),l=HC(i,n,s);Qu(e,t,o,r,l)}))}))},r=function(){return Ju(e)},i=FC.byAttr(dl,o,r);e.on("init",(function(n){var o=e.getWin(),r=Hs(e),a=zs(e),s=function(){var t=e.selection,n=gt.fromDom(t.getStart()),o=gt.fromDom(t.getEnd());Xr(Ro,[n,o]).fold((function(){return i.clear(r)}),m)},l=LC(o,r,a,i),c=_C(o,r,a,i),u=PC(o,r,a,i),d=function(e){return!0===e.raw.shiftKey};e.on("TableSelectorChange",(function(e){return u(e.start,e.finish)}));var f=function(t,n){if(d(t)){n.kill&&t.kill();n.selection.each((function(t){var n=Db.relative(t.start,t.finish),r=Qb(o,n);e.selection.setRng(r)}))}},p=function(t){var n=Xc(t);if(n.raw.shiftKey&&TC(n.raw.which)){var o=e.selection.getRng(),r=gt.fromDom(o.startContainer),i=gt.fromDom(o.endContainer);c.keyup(n,r,o.startOffset,i,o.endOffset).each((function(e){f(n,e)}))}},h=function(n){var o=Xc(n);t().each((function(e){return e.hideBars()}));var r=e.selection.getRng(),i=gt.fromDom(r.startContainer),a=gt.fromDom(r.endContainer),s=Hi(kC,NC)(gt.fromDom(e.selection.getStart()));c.keydown(o,i,r.startOffset,a,r.endOffset,s).each((function(e){f(o,e)}));t().each((function(e){return e.showBars()}))},g=function(e){return 0===e.button},b=function(e){return void 0===e.buttons||(!(!qC.browser.isEdge()||0!==e.buttons)||0!=(1&e.buttons))},v=function(e){l.clearstate()},y=function(e){g(e)&&$C(e)&&l.mousedown(Xc(e))},C=function(e){b(e)&&$C(e)&&l.mouseover(Xc(e))},O=function(e){g(e)&&$C(e)&&l.mouseup(Xc(e))},x=function(){var e=fg(gt.fromDom(r)),t=fg(0);return{touchEnd:function(n){var o=gt.fromDom(n.target);if("td"===tn(o)||"th"===tn(o)){var r=e.get(),i=t.get();if(Ot(r,o)&&n.timeStamp-i<300){n.preventDefault();u(o,o)}}e.set(o);t.set(n.timeStamp)}}}();e.on("dragstart",v);e.on("mousedown",y);e.on("mouseover",C);e.on("mouseup",O);e.on("touchend",x.touchEnd);e.on("keyup",p);e.on("keydown",h);e.on("NodeChange",s)}));return{clear:i.clear}}var WC=function(e,t){return zn(e,t).isSome()},GC=function(e,t){var n=fg(I.none()),o=fg([]),r=I.none(),i=un("caption"),a=function(e){return r.forall((function(t){return!t[e]}))},s=function(){return vl(Qs(e),zs(e))},l=function(){return vl(Js(e),zs(e))},c=function(){return s().bind((function(e){return ao(ro(Ro(e),l().bind(Ro),(function(n,o){return Ot(n,o)?i(e)?I.some(fl(e)):I.some(pl(t,n,e)):I.none()})))}))},u=function(e){return Ro(e.element).map((function(t){var n=or.fromTable(t),o=Wf(n,e).getOr([]),r=z(o,(function(e,t){if(t.isLocked){e.onAny=!0;0===t.column?e.onFirst=!0:t.column+t.colspan>=n.grid.columns&&(e.onLast=!0)}return e}),{onAny:!1,onFirst:!1,onLast:!1});return{mergeable:Xf(n,e).isSome(),unmergeable:Zf(n,e).isSome(),locked:r}}))},d=function(){n.set(le(c)());r=n.get().bind(u);U(o.get(),(function(e){return e()}))},f=function(e){e();o.set(o.get().concat([e]));return function(){o.set(q(o.get(),(function(t){return t!==e})))}},p=function(e,t){return f((function(){return n.get().fold((function(){e.setDisabled(!0)}),(function(n){e.setDisabled(t(n))}))}))},m=function(e,t,o){return f((function(){return n.get().fold((function(){e.setDisabled(!0);e.setActive(!1)}),(function(n){e.setDisabled(t(n));e.setActive(o(n))}))}))},h=function(e){return r.exists((function(t){return t.locked[e]}))},g=function(e){return p(e,(function(e){return!1}))},b=function(e){return p(e,(function(e){return i(e.element)}))},v=function(e){return function(t){return p(t,(function(t){return i(t.element)||h(e)}))}},y=function(e){return function(t){return p(t,(function(t){return i(t.element)||e().isNone()}))}},C=function(e,t){return function(n){return p(n,(function(n){return i(n.element)||e().isNone()||h(t)}))}},O=function(e){return p(e,(function(e){return a("mergeable")}))},x=function(e){return p(e,(function(e){return a("unmergeable")}))},j=function(t){return m(t,w,(function(t){return Ro(t.element,zs(e)).exists((function(e){return WC(e,"caption")}))}))},S=function(t,n){return function(o){return m(o,(function(e){return i(e.element)}),(function(){return e.queryCommandValue(t)===n}))}},T=S("mceTableRowType","header"),k=S("mceTableColType","th");e.on("NodeChange ExecCommand TableSelectorChange",d);return{onSetupTable:g,onSetupCellOrRow:b,onSetupColumn:v,onSetupPasteable:y,onSetupPasteableColumn:C,onSetupMergeable:O,onSetupUnmergeable:x,resetTargets:d,onSetupTableWithCaption:j,onSetupTableRowHeaders:T,onSetupTableColumnHeaders:k,targets:n.get}},KC=function(e,t,n,o){e.ui.registry.addMenuButton("table",{tooltip:"Table",icon:"table",fetch:function(e){return e("inserttable | cell row column | advtablesort | tableprops deletetable")}});var r=function(t){return function(){return e.execCommand(t)}};e.ui.registry.addButton("tableprops",{tooltip:"Table properties",onAction:r("mceTableProps"),icon:"table",onSetup:n.onSetupTable});e.ui.registry.addButton("tabledelete",{tooltip:"Delete table",onAction:r("mceTableDelete"),icon:"table-delete-table",onSetup:n.onSetupTable});e.ui.registry.addButton("tablecellprops",{tooltip:"Cell properties",onAction:r("mceTableCellProps"),icon:"table-cell-properties",onSetup:n.onSetupCellOrRow});e.ui.registry.addButton("tablemergecells",{tooltip:"Merge cells",onAction:r("mceTableMergeCells"),icon:"table-merge-cells",onSetup:n.onSetupMergeable});e.ui.registry.addButton("tablesplitcells",{tooltip:"Split cell",onAction:r("mceTableSplitCells"),icon:"table-split-cells",onSetup:n.onSetupUnmergeable});e.ui.registry.addButton("tableinsertrowbefore",{tooltip:"Insert row before",onAction:r("mceTableInsertRowBefore"),icon:"table-insert-row-above",onSetup:n.onSetupCellOrRow});e.ui.registry.addButton("tableinsertrowafter",{tooltip:"Insert row after",onAction:r("mceTableInsertRowAfter"),icon:"table-insert-row-after",onSetup:n.onSetupCellOrRow});e.ui.registry.addButton("tabledeleterow",{tooltip:"Delete row",onAction:r("mceTableDeleteRow"),icon:"table-delete-row",onSetup:n.onSetupCellOrRow});e.ui.registry.addButton("tablerowprops",{tooltip:"Row properties",onAction:r("mceTableRowProps"),icon:"table-row-properties",onSetup:n.onSetupCellOrRow});e.ui.registry.addButton("tableinsertcolbefore",{tooltip:"Insert column before",onAction:r("mceTableInsertColBefore"),icon:"table-insert-column-before",onSetup:n.onSetupColumn("onFirst")});e.ui.registry.addButton("tableinsertcolafter",{tooltip:"Insert column after",onAction:r("mceTableInsertColAfter"),icon:"table-insert-column-after",onSetup:n.onSetupColumn("onLast")});e.ui.registry.addButton("tabledeletecol",{tooltip:"Delete column",onAction:r("mceTableDeleteCol"),icon:"table-delete-column",onSetup:n.onSetupColumn("onAny")});e.ui.registry.addButton("tablecutrow",{tooltip:"Cut row",icon:"cut-row",onAction:r("mceTableCutRow"),onSetup:n.onSetupCellOrRow});e.ui.registry.addButton("tablecopyrow",{tooltip:"Copy row",icon:"duplicate-row",onAction:r("mceTableCopyRow"),onSetup:n.onSetupCellOrRow});e.ui.registry.addButton("tablepasterowbefore",{tooltip:"Paste row before",icon:"paste-row-before",onAction:r("mceTablePasteRowBefore"),onSetup:n.onSetupPasteable(o.getRows)});e.ui.registry.addButton("tablepasterowafter",{tooltip:"Paste row after",icon:"paste-row-after",onAction:r("mceTablePasteRowAfter"),onSetup:n.onSetupPasteable(o.getRows)});e.ui.registry.addButton("tablecutcol",{tooltip:"Cut column",icon:"cut-column",onAction:r("mceTableCutCol"),onSetup:n.onSetupColumn("onAny")});e.ui.registry.addButton("tablecopycol",{tooltip:"Copy column",icon:"duplicate-column",onAction:r("mceTableCopyCol"),onSetup:n.onSetupColumn("onAny")});e.ui.registry.addButton("tablepastecolbefore",{tooltip:"Paste column before",icon:"paste-column-before",onAction:r("mceTablePasteColBefore"),onSetup:n.onSetupPasteableColumn(o.getColumns,"onFirst")});e.ui.registry.addButton("tablepastecolafter",{tooltip:"Paste column after",icon:"paste-column-after",onAction:r("mceTablePasteColAfter"),onSetup:n.onSetupPasteableColumn(o.getColumns,"onLast")});e.ui.registry.addButton("tableinsertdialog",{tooltip:"Insert table",onAction:r("mceInsertTable"),icon:"table"});var i=Og(kd(e));0!==i.length&&e.ui.registry.addMenuButton("tableclass",{icon:"table-classes",tooltip:"Table styles",fetch:xg(e,t,i,"tableclass",(function(t){return e.execCommand("mceTableToggleClass",!1,t)})),onSetup:n.onSetupTable});var a=Og(wd(e));0!==a.length&&e.ui.registry.addMenuButton("tablecellclass",{icon:"table-cell-classes",tooltip:"Cell styles",fetch:xg(e,t,a,"tablecellclass",(function(t){return e.execCommand("mceTableCellToggleClass",!1,t)})),onSetup:n.onSetupCellOrRow});e.ui.registry.addMenuButton("tablecellvalign",{icon:"vertical-align",tooltip:"Vertical align",fetch:xg(e,t,Zh,"tablecellverticalalign",Cg(e,"vertical-align")),onSetup:n.onSetupCellOrRow});e.ui.registry.addMenuButton("tablecellborderwidth",{icon:"border-width",tooltip:"Border width",fetch:xg(e,t,pd(e),"tablecellborderwidth",Cg(e,"border-width")),onSetup:n.onSetupCellOrRow});e.ui.registry.addMenuButton("tablecellborderstyle",{icon:"border-style",tooltip:"Border style",fetch:xg(e,t,md(e),"tablecellborderstyle",Cg(e,"border-style")),onSetup:n.onSetupCellOrRow});e.ui.registry.addToggleButton("tablecaption",{tooltip:"Table caption",onAction:r("mceTableToggleCaption"),icon:"table-caption",onSetup:n.onSetupTableWithCaption});e.ui.registry.addMenuButton("tablecellbackgroundcolor",{icon:"cell-background-color",tooltip:"Background color",fetch:function(t){return t(jg(e,Fd(e),"background-color"))},onSetup:n.onSetupCellOrRow});e.ui.registry.addMenuButton("tablecellbordercolor",{icon:"cell-border-color",tooltip:"Border color",fetch:function(t){return t(jg(e,Ud(e),"border-color"))},onSetup:n.onSetupCellOrRow});e.ui.registry.addToggleButton("tablerowheader",{tooltip:"Row header",icon:"table-top-header",onAction:Sg(e),onSetup:n.onSetupTableRowHeaders});e.ui.registry.addToggleButton("tablecolheader",{tooltip:"Column header",icon:"table-left-header",onAction:wg(e),onSetup:n.onSetupTableColumnHeaders})},YC=function(e){var t=function(t){return e.dom.is(t,"table")&&e.getBody().contains(t)},n=Id(e);n.length>0&&e.ui.registry.addContextToolbar("table",{predicate:t,items:n,scope:"node",position:"node"})},XC=function(e,t,n,o){var r=function(t){return function(){return e.execCommand(t)}},i=function(t){e.execCommand("mceInsertTable",!1,{rows:t.numRows,columns:t.numColumns})},a={text:"Table properties",onSetup:n.onSetupTable,onAction:r("mceTableProps")},s={text:"Delete table",icon:"table-delete-table",onSetup:n.onSetupTable,onAction:r("mceTableDelete")};e.ui.registry.addMenuItem("tableinsertrowbefore",{text:"Insert row before",icon:"table-insert-row-above",onAction:r("mceTableInsertRowBefore"),onSetup:n.onSetupCellOrRow});e.ui.registry.addMenuItem("tableinsertrowafter",{text:"Insert row after",icon:"table-insert-row-after",onAction:r("mceTableInsertRowAfter"),onSetup:n.onSetupCellOrRow});e.ui.registry.addMenuItem("tabledeleterow",{text:"Delete row",icon:"table-delete-row",onAction:r("mceTableDeleteRow"),onSetup:n.onSetupCellOrRow});e.ui.registry.addMenuItem("tablerowprops",{text:"Row properties",icon:"table-row-properties",onAction:r("mceTableRowProps"),onSetup:n.onSetupCellOrRow});e.ui.registry.addMenuItem("tablecutrow",{text:"Cut row",icon:"cut-row",onAction:r("mceTableCutRow"),onSetup:n.onSetupCellOrRow});e.ui.registry.addMenuItem("tablecopyrow",{text:"Copy row",icon:"duplicate-row",onAction:r("mceTableCopyRow"),onSetup:n.onSetupCellOrRow});e.ui.registry.addMenuItem("tablepasterowbefore",{text:"Paste row before",icon:"paste-row-before",onAction:r("mceTablePasteRowBefore"),onSetup:n.onSetupPasteable(o.getRows)});e.ui.registry.addMenuItem("tablepasterowafter",{text:"Paste row after",icon:"paste-row-after",onAction:r("mceTablePasteRowAfter"),onSetup:n.onSetupPasteable(o.getRows)});var l={type:"nestedmenuitem",text:"Row",getSubmenuItems:b("tableinsertrowbefore tableinsertrowafter tabledeleterow tablerowprops | tablecutrow tablecopyrow tablepasterowbefore tablepasterowafter")};e.ui.registry.addMenuItem("tableinsertcolumnbefore",{text:"Insert column before",icon:"table-insert-column-before",onAction:r("mceTableInsertColBefore"),onSetup:n.onSetupColumn("onFirst")});e.ui.registry.addMenuItem("tableinsertcolumnafter",{text:"Insert column after",icon:"table-insert-column-after",onAction:r("mceTableInsertColAfter"),onSetup:n.onSetupColumn("onLast")});e.ui.registry.addMenuItem("tabledeletecolumn",{text:"Delete column",icon:"table-delete-column",onAction:r("mceTableDeleteCol"),onSetup:n.onSetupColumn("onAny")});e.ui.registry.addMenuItem("tablecutcolumn",{text:"Cut column",icon:"cut-column",onAction:r("mceTableCutCol"),onSetup:n.onSetupColumn("onAny")});e.ui.registry.addMenuItem("tablecopycolumn",{text:"Copy column",icon:"duplicate-column",onAction:r("mceTableCopyCol"),onSetup:n.onSetupColumn("onAny")});e.ui.registry.addMenuItem("tablepastecolumnbefore",{text:"Paste column before",icon:"paste-column-before",onAction:r("mceTablePasteColBefore"),onSetup:n.onSetupPasteableColumn(o.getColumns,"onFirst")});e.ui.registry.addMenuItem("tablepastecolumnafter",{text:"Paste column after",icon:"paste-column-after",onAction:r("mceTablePasteColAfter"),onSetup:n.onSetupPasteableColumn(o.getColumns,"onLast")});var c={type:"nestedmenuitem",text:"Column",getSubmenuItems:b("tableinsertcolumnbefore tableinsertcolumnafter tabledeletecolumn | tablecutcolumn tablecopycolumn tablepastecolumnbefore tablepastecolumnafter")};e.ui.registry.addMenuItem("tablecellprops",{text:"Cell properties",icon:"table-cell-properties",onAction:r("mceTableCellProps"),onSetup:n.onSetupCellOrRow});e.ui.registry.addMenuItem("tablemergecells",{text:"Merge cells",icon:"table-merge-cells",onAction:r("mceTableMergeCells"),onSetup:n.onSetupMergeable});e.ui.registry.addMenuItem("tablesplitcells",{text:"Split cell",icon:"table-split-cells",onAction:r("mceTableSplitCells"),onSetup:n.onSetupUnmergeable});var u={type:"nestedmenuitem",text:"Cell",getSubmenuItems:b("tablecellprops tablemergecells tablesplitcells")};!1===jd(e)?e.ui.registry.addMenuItem("inserttable",{text:"Table",icon:"table",onAction:r("mceInsertTable")}):e.ui.registry.addNestedMenuItem("inserttable",{text:"Table",icon:"table",getSubmenuItems:function(){return[{type:"fancymenuitem",fancytype:"inserttable",onAction:i}]}});e.ui.registry.addMenuItem("inserttabledialog",{text:"Insert table",icon:"table",onAction:r("mceInsertTable")});e.ui.registry.addMenuItem("tableprops",a);e.ui.registry.addMenuItem("deletetable",s);e.ui.registry.addNestedMenuItem("row",l);e.ui.registry.addNestedMenuItem("column",c);e.ui.registry.addNestedMenuItem("cell",u);e.ui.registry.addContextMenu("table",{update:function(){n.resetTargets();return n.targets().fold(b(""),(function(e){return"caption"===tn(e.element)?"tableprops deletetable":"cell row column | advtablesort | tableprops deletetable"}))}});var d=Og(kd(e));0!==d.length&&e.ui.registry.addNestedMenuItem("tableclass",{icon:"table-classes",text:"Table styles",getSubmenuItems:function(){return yg(e,t,d,"tableclass",(function(t){return e.execCommand("mceTableToggleClass",!1,t)}))},onSetup:n.onSetupTable});var f=Og(wd(e));0!==f.length&&e.ui.registry.addNestedMenuItem("tablecellclass",{icon:"table-cell-classes",text:"Cell styles",getSubmenuItems:function(){return yg(e,t,f,"tablecellclass",(function(t){return e.execCommand("mceTableCellToggleClass",!1,t)}))},onSetup:n.onSetupCellOrRow});e.ui.registry.addNestedMenuItem("tablecellvalign",{icon:"vertical-align",text:"Vertical align",getSubmenuItems:function(){return yg(e,t,Zh,"tablecellverticalalign",Cg(e,"vertical-align"))},onSetup:n.onSetupCellOrRow});e.ui.registry.addNestedMenuItem("tablecellborderwidth",{icon:"border-width",text:"Border width",getSubmenuItems:function(){return yg(e,t,pd(e),"tablecellborderwidth",Cg(e,"border-width"))},onSetup:n.onSetupCellOrRow});e.ui.registry.addNestedMenuItem("tablecellborderstyle",{icon:"border-style",text:"Border style",getSubmenuItems:function(){return yg(e,t,md(e),"tablecellborderstyle",Cg(e,"border-style"))},onSetup:n.onSetupCellOrRow});e.ui.registry.addToggleMenuItem("tablecaption",{icon:"table-caption",text:"Table caption",onAction:r("mceTableToggleCaption"),onSetup:n.onSetupTableWithCaption});e.ui.registry.addNestedMenuItem("tablecellbackgroundcolor",{icon:"cell-background-color",text:"Background color",getSubmenuItems:function(){return jg(e,Fd(e),"background-color")},onSetup:n.onSetupCellOrRow});e.ui.registry.addNestedMenuItem("tablecellbordercolor",{icon:"cell-border-color",text:"Border color",getSubmenuItems:function(){return jg(e,Ud(e),"border-color")},onSetup:n.onSetupCellOrRow});e.ui.registry.addToggleMenuItem("tablerowheader",{text:"Row header",icon:"table-top-header",onAction:Sg(e),onSetup:n.onSetupTableRowHeaders});e.ui.registry.addToggleMenuItem("tablecolheader",{text:"Column header",icon:"table-left-header",onAction:wg(e),onSetup:n.onSetupTableColumnHeaders})},ZC=function(e){var t=mi((function(){return Hs(e)}),(function(){return yl(Qs(e),zs(e))}),dl.selectedSelector),n=GC(e,t),o=tf(e),r=zC(e,o.lazyResize,n),i=yh(e,r,o.lazyWire),a=bb();hb(e,i,r,t,a);gb(e,i,t);wl(e,t,i);XC(e,t,n,a);KC(e,t,n,a);YC(e);e.on("PreInit",(function(){e.serializer.addTempAttr(dl.firstSelected);e.serializer.addTempAttr(dl.lastSelected);Ob(e)}));vd(e)&&e.on("keydown",(function(t){Gv(t,e,r)}));e.on("remove",(function(){o.destroy()}));return Fh(e,a,o,n)};function QC(){hi.add("table",ZC)}QC()}()},1580:function(e,t,n){"use strict";var o,r;o=n(1581);r=n(1582);t.version=o.version;t.renderToString=o.renderToString;t.renderToStaticMarkup=o.renderToStaticMarkup;t.renderToNodeStream=o.renderToNodeStream;t.renderToStaticNodeStream=o.renderToStaticNodeStream;t.renderToReadableStream=r.renderToReadableStream},1581:function(e,t,n){"use strict";var o=n(40);function r(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=Object.prototype.hasOwnProperty,a=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,s={},l={};function c(e){if(i.call(l,e))return!0;if(i.call(s,e))return!1;if(a.test(e))return l[e]=!0;s[e]=!0;return!1}function u(e,t,n,o,r,i,a){this.acceptsBooleans=2===t||3===t||4===t;this.attributeName=o;this.attributeNamespace=r;this.mustUseProperty=n;this.propertyName=e;this.type=t;this.sanitizeURL=i;this.removeEmptyString=a}var d={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){d[e]=new u(e,0,!1,e,null,!1,!1)}));[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];d[t]=new u(t,1,!1,e[1],null,!1,!1)}));["contentEditable","draggable","spellCheck","value"].forEach((function(e){d[e]=new u(e,2,!1,e.toLowerCase(),null,!1,!1)}));["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){d[e]=new u(e,2,!1,e,null,!1,!1)}));"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){d[e]=new u(e,3,!1,e.toLowerCase(),null,!1,!1)}));["checked","multiple","muted","selected"].forEach((function(e){d[e]=new u(e,3,!0,e,null,!1,!1)}));["capture","download"].forEach((function(e){d[e]=new u(e,4,!1,e,null,!1,!1)}));["cols","rows","size","span"].forEach((function(e){d[e]=new u(e,6,!1,e,null,!1,!1)}));["rowSpan","start"].forEach((function(e){d[e]=new u(e,5,!1,e.toLowerCase(),null,!1,!1)}));var f=/[\-:]([a-z])/g;function p(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(f,p);d[t]=new u(t,1,!1,e,null,!1,!1)}));"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(f,p);d[t]=new u(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}));["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(f,p);d[t]=new u(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}));["tabIndex","crossOrigin"].forEach((function(e){d[e]=new u(e,1,!1,e.toLowerCase(),null,!1,!1)}));d.xlinkHref=new u("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach((function(e){d[e]=new u(e,1,!1,e.toLowerCase(),null,!0,!0)}));var m={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},h=["Webkit","ms","Moz","O"];Object.keys(m).forEach((function(e){h.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1);m[t]=m[e]}))}));var g=/["'&<>]/;function b(e){if("boolean"==typeof e||"number"==typeof e)return""+e;e=""+e;var t=g.exec(e);if(t){var n,o="",r=0;for(n=t.index;n<e.length;n++){switch(e.charCodeAt(n)){case 34:t="&quot;";break;case 38:t="&amp;";break;case 39:t="&#x27;";break;case 60:t="&lt;";break;case 62:t="&gt;";break;default:continue}r!==n&&(o+=e.substring(r,n));r=n+1;o+=t}e=r!==n?o+e.substring(r,n):o}return e}var v=/([A-Z])/g,y=/^ms-/,C=Array.isArray;function O(e,t){return{insertionMode:e,selectedValue:t}}function x(e,t,n){switch(t){case"select":return O(1,null!=n.value?n.value:n.defaultValue);case"svg":return O(2,null);case"math":return O(3,null);case"foreignObject":return O(1,null);case"table":return O(4,null);case"thead":case"tbody":case"tfoot":return O(5,null);case"colgroup":return O(7,null);case"tr":return O(6,null)}return 4<=e.insertionMode||0===e.insertionMode?O(1,null):e}var j=new Map;function S(e,t,n){if("object"!=typeof n)throw Error(r(62));t=!0;for(var o in n)if(i.call(n,o)){var a=n[o];if(null!=a&&"boolean"!=typeof a&&""!==a){if(0===o.indexOf("--")){var s=b(o);a=b((""+a).trim())}else{s=o;var l=j.get(s);void 0!==l||(l=b(s.replace(v,"-$1").toLowerCase().replace(y,"-ms-")),j.set(s,l)),s=l;a="number"==typeof a?0===a||i.call(m,o)?""+a:a+"px":b((""+a).trim())}t?(t=!1,e.push(' style="',s,":",a)):e.push(";",s,":",a)}}t||e.push('"')}function w(e,t,n,o){switch(n){case"style":S(e,t,o);return;case"defaultValue":case"defaultChecked":case"innerHTML":case"suppressContentEditableWarning":case"suppressHydrationWarning":return}if(!(2<n.length)||"o"!==n[0]&&"O"!==n[0]||"n"!==n[1]&&"N"!==n[1])if(null!==(t=d.hasOwnProperty(n)?d[n]:null)){switch(typeof o){case"function":case"symbol":return;case"boolean":if(!t.acceptsBooleans)return}n=t.attributeName;switch(t.type){case 3:o&&e.push(" ",n,'=""');break;case 4:!0===o?e.push(" ",n,'=""'):!1!==o&&e.push(" ",n,'="',b(o),'"');break;case 5:isNaN(o)||e.push(" ",n,'="',b(o),'"');break;case 6:!isNaN(o)&&1<=o&&e.push(" ",n,'="',b(o),'"');break;default:t.sanitizeURL&&(o=""+o),e.push(" ",n,'="',b(o),'"')}}else if(c(n)){switch(typeof o){case"function":case"symbol":return;case"boolean":if("data-"!==(t=n.toLowerCase().slice(0,5))&&"aria-"!==t)return}e.push(" ",n,'="',b(o),'"')}}function T(e,t,n){if(null!=t){if(null!=n)throw Error(r(60));if("object"!=typeof t||!("__html"in t))throw Error(r(61));null!=(t=t.__html)&&e.push(""+t)}}function k(e){var t="";o.Children.forEach(e,(function(e){null!=e&&(t+=e)}));return t}function N(e,t,n,o){e.push(I(n));var r,a=n=null;for(r in t)if(i.call(t,r)){var s=t[r];if(null!=s)switch(r){case"children":n=s;break;case"dangerouslySetInnerHTML":a=s;break;default:w(e,o,r,s)}}e.push(">");T(e,a,n);return"string"==typeof n?(e.push(b(n)),null):n}var E=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,A=new Map;function I(e){var t=A.get(e);if(void 0===t){if(!E.test(e))throw Error(r(65,e));t="<"+e;A.set(e,t)}return t}function R(e,t,n,o,a){switch(t){case"select":e.push(I("select"));var s=null,l=null;for(p in n)if(i.call(n,p)){var u=n[p];if(null!=u)switch(p){case"children":s=u;break;case"dangerouslySetInnerHTML":l=u;break;case"defaultValue":case"value":break;default:w(e,o,p,u)}}e.push(">");T(e,l,s);return s;case"option":l=a.selectedValue;e.push(I("option"));var d=u=null,f=null,p=null;for(s in n)if(i.call(n,s)){var m=n[s];if(null!=m)switch(s){case"children":u=m;break;case"selected":f=m;break;case"dangerouslySetInnerHTML":p=m;break;case"value":d=m;default:w(e,o,s,m)}}if(null!=l)if(n=null!==d?""+d:k(u),C(l)){for(o=0;o<l.length;o++)if(""+l[o]===n){e.push(' selected=""');break}}else""+l===n&&e.push(' selected=""');else f&&e.push(' selected=""');e.push(">");T(e,p,u);return u;case"textarea":e.push(I("textarea"));p=l=s=null;for(u in n)if(i.call(n,u)&&null!=(d=n[u]))switch(u){case"children":p=d;break;case"value":s=d;break;case"defaultValue":l=d;break;case"dangerouslySetInnerHTML":throw Error(r(91));default:w(e,o,u,d)}null===s&&null!==l&&(s=l);e.push(">");if(null!=p){if(null!=s)throw Error(r(92));if(C(p)&&1<p.length)throw Error(r(93));s=""+p}"string"==typeof s&&"\n"===s[0]&&e.push("\n");null!==s&&e.push(b(""+s));return null;case"input":e.push(I("input"));d=p=u=s=null;for(l in n)if(i.call(n,l)&&null!=(f=n[l]))switch(l){case"children":case"dangerouslySetInnerHTML":throw Error(r(399,"input"));case"defaultChecked":d=f;break;case"defaultValue":u=f;break;case"checked":p=f;break;case"value":s=f;break;default:w(e,o,l,f)}null!==p?w(e,o,"checked",p):null!==d&&w(e,o,"checked",d);null!==s?w(e,o,"value",s):null!==u&&w(e,o,"value",u);e.push("/>");return null;case"menuitem":e.push(I("menuitem"));for(var h in n)if(i.call(n,h)&&null!=(s=n[h]))switch(h){case"children":case"dangerouslySetInnerHTML":throw Error(r(400));default:w(e,o,h,s)}e.push(">");return null;case"title":e.push(I("title"));s=null;for(m in n)if(i.call(n,m)&&null!=(l=n[m]))switch(m){case"children":s=l;break;case"dangerouslySetInnerHTML":throw Error(r(434));default:w(e,o,m,l)}e.push(">");return s;case"listing":case"pre":e.push(I(t));l=s=null;for(d in n)if(i.call(n,d)&&null!=(u=n[d]))switch(d){case"children":s=u;break;case"dangerouslySetInnerHTML":l=u;break;default:w(e,o,d,u)}e.push(">");if(null!=l){if(null!=s)throw Error(r(60));if("object"!=typeof l||!("__html"in l))throw Error(r(61));null!=(n=l.__html)&&("string"==typeof n&&0<n.length&&"\n"===n[0]?e.push("\n",n):e.push(""+n))}"string"==typeof s&&"\n"===s[0]&&e.push("\n");return s;case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":e.push(I(t));for(var g in n)if(i.call(n,g)&&null!=(s=n[g]))switch(g){case"children":case"dangerouslySetInnerHTML":throw Error(r(399,t));default:w(e,o,g,s)}e.push("/>");return null;case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return N(e,n,t,o);case"html":return 0===a.insertionMode&&e.push("<!DOCTYPE html>"),N(e,n,t,o);default:if(-1===t.indexOf("-")&&"string"!=typeof n.is)return N(e,n,t,o);e.push(I(t));l=s=null;for(f in n)if(i.call(n,f)&&null!=(u=n[f]))switch(f){case"children":s=u;break;case"dangerouslySetInnerHTML":l=u;break;case"style":S(e,o,u);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":break;default:c(f)&&"function"!=typeof u&&"symbol"!=typeof u&&e.push(" ",f,'="',b(u),'"')}e.push(">");T(e,l,s);return s}}function L(e,t,n){e.push('\x3c!--$?--\x3e<template id="');if(null===n)throw Error(r(395));e.push(n);return e.push('"></template>')}function _(e,t,n,o){switch(n.insertionMode){case 0:case 1:return e.push('<div hidden id="'),e.push(t.segmentPrefix),t=o.toString(16),e.push(t),e.push('">');case 2:return e.push('<svg aria-hidden="true" style="display:none" id="'),e.push(t.segmentPrefix),t=o.toString(16),e.push(t),e.push('">');case 3:return e.push('<math aria-hidden="true" style="display:none" id="'),e.push(t.segmentPrefix),t=o.toString(16),e.push(t),e.push('">');case 4:return e.push('<table hidden id="'),e.push(t.segmentPrefix),t=o.toString(16),e.push(t),e.push('">');case 5:return e.push('<table hidden><tbody id="'),e.push(t.segmentPrefix),t=o.toString(16),e.push(t),e.push('">');case 6:return e.push('<table hidden><tr id="'),e.push(t.segmentPrefix),t=o.toString(16),e.push(t),e.push('">');case 7:return e.push('<table hidden><colgroup id="'),e.push(t.segmentPrefix),t=o.toString(16),e.push(t),e.push('">');default:throw Error(r(397))}}function P(e,t){switch(t.insertionMode){case 0:case 1:return e.push("</div>");case 2:return e.push("</svg>");case 3:return e.push("</math>");case 4:return e.push("</table>");case 5:return e.push("</tbody></table>");case 6:return e.push("</tr></table>");case 7:return e.push("</colgroup></table>");default:throw Error(r(397))}}var M=/[<\u2028\u2029]/g;function D(e){return JSON.stringify(e).replace(M,(function(e){switch(e){case"<":return"\\u003c";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw Error("escapeJSStringsForInstructionScripts encountered a match it does not know how to replace. this means the match regex and the replacement characters are no longer in sync. This is a bug in React")}}))}function B(e,t){return{bootstrapChunks:[],startInlineScript:"<script>",placeholderPrefix:(t=void 0===t?"":t)+"P:",segmentPrefix:t+"S:",boundaryPrefix:t+"B:",idPrefix:t,nextSuspenseID:0,sentCompleteSegmentFunction:!1,sentCompleteBoundaryFunction:!1,sentClientRenderFunction:!1,generateStaticMarkup:e}}function F(e,t,n,o){if(n.generateStaticMarkup)return e.push(b(t)),!1;""===t?e=o:(o&&e.push("\x3c!-- --\x3e"),e.push(b(t)),e=!0);return e}var U=Object.assign,V=Symbol.for("react.element"),H=Symbol.for("react.portal"),q=Symbol.for("react.fragment"),$=Symbol.for("react.strict_mode"),z=Symbol.for("react.profiler"),W=Symbol.for("react.provider"),G=Symbol.for("react.context"),K=Symbol.for("react.forward_ref"),Y=Symbol.for("react.suspense"),X=Symbol.for("react.suspense_list"),Z=Symbol.for("react.memo"),Q=Symbol.for("react.lazy"),J=Symbol.for("react.scope"),ee=Symbol.for("react.debug_trace_mode"),te=Symbol.for("react.legacy_hidden"),ne=Symbol.for("react.default_value"),oe=Symbol.iterator;function re(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case q:return"Fragment";case H:return"Portal";case z:return"Profiler";case $:return"StrictMode";case Y:return"Suspense";case X:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case G:return(e.displayName||"Context")+".Consumer";case W:return(e._context.displayName||"Context")+".Provider";case K:var t=e.render;(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef");return e;case Z:return null!==(t=e.displayName||null)?t:re(e.type)||"Memo";case Q:t=e._payload;e=e._init;try{return re(e(t))}catch(e){}}return null}var ie={};function ae(e,t){if(!(e=e.contextTypes))return ie;var n,o={};for(n in e)o[n]=t[n];return o}var se=null;function le(e,t){if(e!==t){e.context._currentValue2=e.parentValue;e=e.parent;var n=t.parent;if(null===e){if(null!==n)throw Error(r(401))}else{if(null===n)throw Error(r(401));le(e,n)}t.context._currentValue2=t.value}}function ce(e){e.context._currentValue2=e.parentValue;null!==(e=e.parent)&&ce(e)}function ue(e){var t=e.parent;null!==t&&ue(t);e.context._currentValue2=e.value}function de(e,t){e.context._currentValue2=e.parentValue;if(null===(e=e.parent))throw Error(r(402));e.depth===t.depth?le(e,t):de(e,t)}function fe(e,t){var n=t.parent;if(null===n)throw Error(r(402));e.depth===n.depth?le(e,n):fe(e,n);t.context._currentValue2=t.value}function pe(e){var t=se;t!==e&&(null===t?ue(e):null===e?ce(t):t.depth===e.depth?le(t,e):t.depth>e.depth?de(t,e):fe(t,e),se=e)}var me={isMounted:function(){return!1},enqueueSetState:function(e,t){null!==(e=e._reactInternals).queue&&e.queue.push(t)},enqueueReplaceState:function(e,t){(e=e._reactInternals).replace=!0;e.queue=[t]},enqueueForceUpdate:function(){}};function he(e,t,n,o){var r=void 0!==e.state?e.state:null;e.updater=me;e.props=n;e.state=r;var i={queue:[],replace:!1};e._reactInternals=i;var a=t.contextType;e.context="object"==typeof a&&null!==a?a._currentValue2:o;"function"==typeof(a=t.getDerivedStateFromProps)&&(r=null==(a=a(n,r))?r:U({},r,a),e.state=r);if("function"!=typeof t.getDerivedStateFromProps&&"function"!=typeof e.getSnapshotBeforeUpdate&&("function"==typeof e.UNSAFE_componentWillMount||"function"==typeof e.componentWillMount))if(t=e.state,"function"==typeof e.componentWillMount&&e.componentWillMount(),"function"==typeof e.UNSAFE_componentWillMount&&e.UNSAFE_componentWillMount(),t!==e.state&&me.enqueueReplaceState(e,e.state,null),null!==i.queue&&0<i.queue.length)if(t=i.queue,a=i.replace,i.queue=null,i.replace=!1,a&&1===t.length)e.state=t[0];else{i=a?t[0]:e.state;r=!0;for(a=a?1:0;a<t.length;a++){var s=t[a];null!=(s="function"==typeof s?s.call(e,i,n,o):s)&&(r?(r=!1,i=U({},i,s)):U(i,s))}e.state=i}else i.queue=null}var ge={id:1,overflow:""};function be(e,t,n){var o=e.id;e=e.overflow;var r=32-ve(o)-1;o&=~(1<<r);n+=1;var i=32-ve(t)+r;if(30<i){var a=r-r%5;i=(o&(1<<a)-1).toString(32);o>>=a;r-=a;return{id:1<<32-ve(t)+r|n<<r|o,overflow:i+e}}return{id:1<<i|n<<r|o,overflow:e}}var ve=Math.clz32?Math.clz32:Oe,ye=Math.log,Ce=Math.LN2;function Oe(e){return 0===(e>>>=0)?32:31-(ye(e)/Ce|0)|0}function xe(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t}var je="function"==typeof Object.is?Object.is:xe,Se=null,we=null,Te=null,ke=null,Ne=!1,Ee=!1,Ae=0,Ie=null,Re=0;function Le(){if(null===Se)throw Error(r(321));return Se}function _e(){if(0<Re)throw Error(r(312));return{memoizedState:null,queue:null,next:null}}function Pe(){null===ke?null===Te?(Ne=!1,Te=ke=_e()):(Ne=!0,ke=Te):null===ke.next?(Ne=!1,ke=ke.next=_e()):(Ne=!0,ke=ke.next);return ke}function Me(){we=Se=null;Ee=!1;Te=null;Re=0;ke=Ie=null}function De(e,t){return"function"==typeof t?t(e):t}function Be(e,t,n){Se=Le();ke=Pe();if(Ne){var o=ke.queue;t=o.dispatch;if(null!==Ie&&void 0!==(n=Ie.get(o))){Ie.delete(o);o=ke.memoizedState;do{o=e(o,n.action),n=n.next}while(null!==n);ke.memoizedState=o;return[o,t]}return[ke.memoizedState,t]}e=e===De?"function"==typeof t?t():t:void 0!==n?n(t):t;ke.memoizedState=e;e=(e=ke.queue={last:null,dispatch:null}).dispatch=Ue.bind(null,Se,e);return[ke.memoizedState,e]}function Fe(e,t){Se=Le();t=void 0===t?null:t;if(null!==(ke=Pe())){var n=ke.memoizedState;if(null!==n&&null!==t){var o=n[1];e:if(null===o)o=!1;else{for(var r=0;r<o.length&&r<t.length;r++)if(!je(t[r],o[r])){o=!1;break e}o=!0}if(o)return n[0]}}e=e();ke.memoizedState=[e,t];return e}function Ue(e,t,n){if(25<=Re)throw Error(r(301));if(e===Se)if(Ee=!0,e={action:n,next:null},null===Ie&&(Ie=new Map),void 0===(n=Ie.get(t)))Ie.set(t,e);else{for(t=n;null!==t.next;)t=t.next;t.next=e}}function Ve(){throw Error(r(394))}function He(){}var qe={readContext:function(e){return e._currentValue2},useContext:function(e){Le();return e._currentValue2},useMemo:Fe,useReducer:Be,useRef:function(e){Se=Le();var t=(ke=Pe()).memoizedState;return null===t?(e={current:e},ke.memoizedState=e):t},useState:function(e){return Be(De,e)},useInsertionEffect:He,useLayoutEffect:function(){},useCallback:function(e,t){return Fe((function(){return e}),t)},useImperativeHandle:He,useEffect:He,useDebugValue:He,useDeferredValue:function(e){Le();return e},useTransition:function(){Le();return[!1,Ve]},useId:function(){var e=we.treeContext,t=e.overflow;e=((e=e.id)&~(1<<32-ve(e)-1)).toString(32)+t;var n=$e;if(null===n)throw Error(r(404));t=Ae++;e=":"+n.idPrefix+"R"+e;0<t&&(e+="H"+t.toString(32));return e+":"},useMutableSource:function(e,t){Le();return t(e._source)},useSyncExternalStore:function(e,t,n){if(void 0===n)throw Error(r(407));return n()}},$e=null,ze=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentDispatcher;function We(e){console.error(e);return null}function Ge(){}function Ke(e,t,n,o,r,i,a,s,l){var c=[],u=new Set;(n=Xe(t={destination:null,responseState:t,progressiveChunkSize:void 0===o?12800:o,status:0,fatalError:null,nextSegmentId:0,allPendingTasks:0,pendingRootTasks:0,completedRootSegment:null,abortableTasks:u,pingedTasks:c,clientRenderedBoundaries:[],completedBoundaries:[],partialBoundaries:[],onError:void 0===r?We:r,onAllReady:void 0===i?Ge:i,onShellReady:void 0===a?Ge:a,onShellError:void 0===s?Ge:s,onFatalError:void 0===l?Ge:l},0,null,n,!1,!1)).parentFlushed=!0;e=Ye(t,e,null,n,u,ie,null,ge);c.push(e);return t}function Ye(e,t,n,o,r,i,a,s){e.allPendingTasks++;null===n?e.pendingRootTasks++:n.pendingTasks++;var l={node:t,ping:function(){var t=e.pingedTasks;t.push(l);1===t.length&&ut(e)},blockedBoundary:n,blockedSegment:o,abortSet:r,legacyContext:i,context:a,treeContext:s};r.add(l);return l}function Xe(e,t,n,o,r,i){return{status:0,id:-1,index:t,parentFlushed:!1,chunks:[],children:[],formatContext:o,boundary:n,lastPushedText:r,textEmbedded:i}}function Ze(e,t){if(null!=(e=e.onError(t))&&"string"!=typeof e)throw Error('onError returned something with a type other than "string". onError should return a string and may return null or undefined but must not return anything else. It received something of type "'+typeof e+'" instead');return e}function Qe(e,t){var n=e.onShellError;n(t);(n=e.onFatalError)(t);null!==e.destination?(e.status=2,e.destination.destroy(t)):(e.status=1,e.fatalError=t)}function Je(e,t,n,o,r){Se={};we=t;Ae=0;for(e=n(o,r);Ee;)Ee=!1,Ae=0,Re+=1,ke=null,e=n(o,r);Me();return e}function et(e,t,n,o){var i=n.render(),a=o.childContextTypes;if(null!=a){var s=t.legacyContext;if("function"!=typeof n.getChildContext)o=s;else{n=n.getChildContext();for(var l in n)if(!(l in a))throw Error(r(108,re(o)||"Unknown",l));o=U({},s,n)}t.legacyContext=o;ot(e,t,i);t.legacyContext=s}else ot(e,t,i)}function tt(e,t){if(e&&e.defaultProps){t=U({},t);e=e.defaultProps;for(var n in e)void 0===t[n]&&(t[n]=e[n]);return t}return t}function nt(e,t,n,o,i){if("function"==typeof n)if(n.prototype&&n.prototype.isReactComponent){i=ae(n,t.legacyContext);var a=n.contextType;he(a=new n(o,"object"==typeof a&&null!==a?a._currentValue2:i),n,o,i);et(e,t,a,n)}else{i=Je(e,t,n,o,a=ae(n,t.legacyContext));var s=0!==Ae;if("object"==typeof i&&null!==i&&"function"==typeof i.render&&void 0===i.$$typeof)he(i,n,o,a),et(e,t,i,n);else if(s){o=t.treeContext;t.treeContext=be(o,1,0);try{ot(e,t,i)}finally{t.treeContext=o}}else ot(e,t,i)}else{if("string"!=typeof n){switch(n){case te:case ee:case $:case z:case q:case X:ot(e,t,o.children);return;case J:throw Error(r(343));case Y:e:{n=t.blockedBoundary;i=t.blockedSegment;a=o.fallback;o=o.children;var l={id:null,rootSegmentID:-1,parentFlushed:!1,pendingTasks:0,forceClientRender:!1,completedSegments:[],byteSize:0,fallbackAbortableTasks:s=new Set,errorDigest:null},c=Xe(e,i.chunks.length,l,i.formatContext,!1,!1);i.children.push(c);i.lastPushedText=!1;var u=Xe(e,0,null,i.formatContext,!1,!1);u.parentFlushed=!0;t.blockedBoundary=l;t.blockedSegment=u;try{if(it(e,t,o),e.responseState.generateStaticMarkup||u.lastPushedText&&u.textEmbedded&&u.chunks.push("\x3c!-- --\x3e"),u.status=1,lt(l,u),0===l.pendingTasks)break e}catch(t){u.status=4,l.forceClientRender=!0,l.errorDigest=Ze(e,t)}finally{t.blockedBoundary=n,t.blockedSegment=i}t=Ye(e,a,n,c,s,t.legacyContext,t.context,t.treeContext);e.pingedTasks.push(t)}return}if("object"==typeof n&&null!==n)switch(n.$$typeof){case K:o=Je(e,t,n.render,o,i);if(0!==Ae){n=t.treeContext;t.treeContext=be(n,1,0);try{ot(e,t,o)}finally{t.treeContext=n}}else ot(e,t,o);return;case Z:nt(e,t,n=n.type,o=tt(n,o),i);return;case W:i=o.children;n=n._context;o=o.value;a=n._currentValue2;n._currentValue2=o;se=o={parent:s=se,depth:null===s?0:s.depth+1,context:n,parentValue:a,value:o};t.context=o;ot(e,t,i);if(null===(e=se))throw Error(r(403));o=e.parentValue;e.context._currentValue2=o===ne?e.context._defaultValue:o;e=se=e.parent;t.context=e;return;case G:ot(e,t,o=(o=o.children)(n._currentValue2));return;case Q:nt(e,t,n=(i=n._init)(n._payload),o=tt(n,o),void 0);return}throw Error(r(130,null==n?n:typeof n,""))}a=R((i=t.blockedSegment).chunks,n,o,e.responseState,i.formatContext);i.lastPushedText=!1;s=i.formatContext;i.formatContext=x(s,n,o);it(e,t,a);i.formatContext=s;switch(n){case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"input":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":break;default:i.chunks.push("</",n,">")}i.lastPushedText=!1}}function ot(e,t,n){t.node=n;if("object"==typeof n&&null!==n){switch(n.$$typeof){case V:nt(e,t,n.type,n.props,n.ref);return;case H:throw Error(r(257));case Q:var o=n._init;ot(e,t,n=o(n._payload));return}if(C(n)){rt(e,t,n);return}null===n||"object"!=typeof n?o=null:o="function"==typeof(o=oe&&n[oe]||n["@@iterator"])?o:null;if(o&&(o=o.call(n))){if(!(n=o.next()).done){var i=[];do{i.push(n.value),n=o.next()}while(!n.done);rt(e,t,i)}return}e=Object.prototype.toString.call(n);throw Error(r(31,"[object Object]"===e?"object with keys {"+Object.keys(n).join(", ")+"}":e))}"string"==typeof n?(o=t.blockedSegment).lastPushedText=F(t.blockedSegment.chunks,n,e.responseState,o.lastPushedText):"number"==typeof n&&((o=t.blockedSegment).lastPushedText=F(t.blockedSegment.chunks,""+n,e.responseState,o.lastPushedText))}function rt(e,t,n){for(var o=n.length,r=0;r<o;r++){var i=t.treeContext;t.treeContext=be(i,o,r);try{it(e,t,n[r])}finally{t.treeContext=i}}}function it(e,t,n){var o=t.blockedSegment.formatContext,r=t.legacyContext,i=t.context;try{return ot(e,t,n)}catch(l){if(Me(),"object"!=typeof l||null===l||"function"!=typeof l.then)throw t.blockedSegment.formatContext=o,t.legacyContext=r,t.context=i,pe(i),l;n=l;var a=t.blockedSegment,s=Xe(e,a.chunks.length,null,a.formatContext,a.lastPushedText,!0);a.children.push(s);a.lastPushedText=!1;e=Ye(e,t.node,t.blockedBoundary,s,t.abortSet,t.legacyContext,t.context,t.treeContext).ping;n.then(e,e);t.blockedSegment.formatContext=o;t.legacyContext=r;t.context=i;pe(i)}}function at(e){var t=e.blockedBoundary;(e=e.blockedSegment).status=3;ct(this,t,e)}function st(e,t,n){var o=e.blockedBoundary;e.blockedSegment.status=3;null===o?(t.allPendingTasks--,2!==t.status&&(t.status=2,null!==t.destination&&t.destination.push(null))):(o.pendingTasks--,o.forceClientRender||(o.forceClientRender=!0,e=void 0===n?Error(r(432)):n,o.errorDigest=t.onError(e),o.parentFlushed&&t.clientRenderedBoundaries.push(o)),o.fallbackAbortableTasks.forEach((function(e){return st(e,t,n)})),o.fallbackAbortableTasks.clear(),t.allPendingTasks--,0===t.allPendingTasks&&(o=t.onAllReady)())}function lt(e,t){if(0===t.chunks.length&&1===t.children.length&&null===t.children[0].boundary){var n=t.children[0];n.id=t.id;n.parentFlushed=!0;1===n.status&&lt(e,n)}else e.completedSegments.push(t)}function ct(e,t,n){if(null===t){if(n.parentFlushed){if(null!==e.completedRootSegment)throw Error(r(389));e.completedRootSegment=n}e.pendingRootTasks--;0===e.pendingRootTasks&&(e.onShellError=Ge,(t=e.onShellReady)())}else t.pendingTasks--,t.forceClientRender||(0===t.pendingTasks?(n.parentFlushed&&1===n.status&&lt(t,n),t.parentFlushed&&e.completedBoundaries.push(t),t.fallbackAbortableTasks.forEach(at,e),t.fallbackAbortableTasks.clear()):n.parentFlushed&&1===n.status&&(lt(t,n),1===t.completedSegments.length&&t.parentFlushed&&e.partialBoundaries.push(t)));e.allPendingTasks--;0===e.allPendingTasks&&(e=e.onAllReady)()}function ut(e){if(2!==e.status){var t=se,n=ze.current;ze.current=qe;var o=$e;$e=e.responseState;try{var r,i=e.pingedTasks;for(r=0;r<i.length;r++){var a=i[r],s=e,l=a.blockedSegment;if(0===l.status){pe(a.context);try{ot(s,a,a.node),s.responseState.generateStaticMarkup||l.lastPushedText&&l.textEmbedded&&l.chunks.push("\x3c!-- --\x3e"),a.abortSet.delete(a),l.status=1,ct(s,a.blockedBoundary,l)}catch(e){if(Me(),"object"==typeof e&&null!==e&&"function"==typeof e.then){var c=a.ping;e.then(c,c)}else{a.abortSet.delete(a);l.status=4;var u=a.blockedBoundary,d=e,f=Ze(s,d);null===u?Qe(s,d):(u.pendingTasks--,u.forceClientRender||(u.forceClientRender=!0,u.errorDigest=f,u.parentFlushed&&s.clientRenderedBoundaries.push(u)));s.allPendingTasks--;if(0===s.allPendingTasks){(0,s.onAllReady)()}}}}}i.splice(0,r);null!==e.destination&&gt(e,e.destination)}catch(t){Ze(e,t),Qe(e,t)}finally{$e=o,ze.current=n,n===qe&&pe(t)}}}function dt(e,t,n){n.parentFlushed=!0;switch(n.status){case 0:var o=n.id=e.nextSegmentId++;n.lastPushedText=!1;n.textEmbedded=!1;e=e.responseState;t.push('<template id="');t.push(e.placeholderPrefix);e=o.toString(16);t.push(e);return t.push('"></template>');case 1:n.status=2;var i=!0;o=n.chunks;var a=0;n=n.children;for(var s=0;s<n.length;s++){for(i=n[s];a<i.index;a++)t.push(o[a]);i=ft(e,t,i)}for(;a<o.length-1;a++)t.push(o[a]);a<o.length&&(i=t.push(o[a]));return i;default:throw Error(r(390))}}function ft(e,t,n){var o=n.boundary;if(null===o)return dt(e,t,n);o.parentFlushed=!0;if(o.forceClientRender)return e.responseState.generateStaticMarkup||(o=o.errorDigest,t.push("\x3c!--$!--\x3e"),t.push("<template"),o&&(t.push(' data-dgst="'),o=b(o),t.push(o),t.push('"')),t.push("></template>")),dt(e,t,n),e=!!e.responseState.generateStaticMarkup||t.push("\x3c!--/$--\x3e");if(0<o.pendingTasks){o.rootSegmentID=e.nextSegmentId++;0<o.completedSegments.length&&e.partialBoundaries.push(o);var i=e.responseState,a=i.nextSuspenseID++;i=i.boundaryPrefix+a.toString(16);o=o.id=i;L(t,e.responseState,o);dt(e,t,n);return t.push("\x3c!--/$--\x3e")}if(o.byteSize>e.progressiveChunkSize)return o.rootSegmentID=e.nextSegmentId++,e.completedBoundaries.push(o),L(t,e.responseState,o.id),dt(e,t,n),t.push("\x3c!--/$--\x3e");e.responseState.generateStaticMarkup||t.push("\x3c!--$--\x3e");if(1!==(n=o.completedSegments).length)throw Error(r(391));ft(e,t,n[0]);return e=!!e.responseState.generateStaticMarkup||t.push("\x3c!--/$--\x3e")}function pt(e,t,n){_(t,e.responseState,n.formatContext,n.id);ft(e,t,n);return P(t,n.formatContext)}function mt(e,t,n){for(var o=n.completedSegments,i=0;i<o.length;i++)ht(e,t,n,o[i]);o.length=0;e=e.responseState;o=n.id;n=n.rootSegmentID;t.push(e.startInlineScript);e.sentCompleteBoundaryFunction?t.push('$RC("'):(e.sentCompleteBoundaryFunction=!0,t.push('function $RC(a,b){a=document.getElementById(a);b=document.getElementById(b);b.parentNode.removeChild(b);if(a){a=a.previousSibling;var f=a.parentNode,c=a.nextSibling,e=0;do{if(c&&8===c.nodeType){var d=c.data;if("/$"===d)if(0===e)break;else e--;else"$"!==d&&"$?"!==d&&"$!"!==d||e++}d=c.nextSibling;f.removeChild(c);c=d}while(c);for(;b.firstChild;)f.insertBefore(b.firstChild,c);a.data="$";a._reactRetry&&a._reactRetry()}};$RC("'));if(null===o)throw Error(r(395));n=n.toString(16);t.push(o);t.push('","');t.push(e.segmentPrefix);t.push(n);return t.push('")<\/script>')}function ht(e,t,n,o){if(2===o.status)return!0;var i=o.id;if(-1===i){if(-1===(o.id=n.rootSegmentID))throw Error(r(392));return pt(e,t,o)}pt(e,t,o);e=e.responseState;t.push(e.startInlineScript);e.sentCompleteSegmentFunction?t.push('$RS("'):(e.sentCompleteSegmentFunction=!0,t.push('function $RS(a,b){a=document.getElementById(a);b=document.getElementById(b);for(a.parentNode.removeChild(a);a.firstChild;)b.parentNode.insertBefore(a.firstChild,b);b.parentNode.removeChild(b)};$RS("'));t.push(e.segmentPrefix);i=i.toString(16);t.push(i);t.push('","');t.push(e.placeholderPrefix);t.push(i);return t.push('")<\/script>')}function gt(e,t){try{var n=e.completedRootSegment;if(null!==n&&0===e.pendingRootTasks){ft(e,t,n);e.completedRootSegment=null;var o=e.responseState.bootstrapChunks;for(n=0;n<o.length-1;n++)t.push(o[n]);n<o.length&&t.push(o[n])}var i,a=e.clientRenderedBoundaries;for(i=0;i<a.length;i++){var s=a[i];o=t;var l=e.responseState,c=s.id,u=s.errorDigest,d=s.errorMessage,f=s.errorComponentStack;o.push(l.startInlineScript);l.sentClientRenderFunction?o.push('$RX("'):(l.sentClientRenderFunction=!0,o.push('function $RX(b,c,d,e){var a=document.getElementById(b);a&&(b=a.previousSibling,b.data="$!",a=a.dataset,c&&(a.dgst=c),d&&(a.msg=d),e&&(a.stck=e),b._reactRetry&&b._reactRetry())};$RX("'));if(null===c)throw Error(r(395));o.push(c);o.push('"');if(u||d||f){o.push(",");var p=D(u||"");o.push(p)}if(d||f){o.push(",");var m=D(d||"");o.push(m)}if(f){o.push(",");var h=D(f);o.push(h)}if(!o.push(")<\/script>")){e.destination=null;i++;a.splice(0,i);return}}a.splice(0,i);var g=e.completedBoundaries;for(i=0;i<g.length;i++)if(!mt(e,t,g[i])){e.destination=null;i++;g.splice(0,i);return}g.splice(0,i);var b=e.partialBoundaries;for(i=0;i<b.length;i++){var v=b[i];e:{a=e;s=t;var y=v.completedSegments;for(l=0;l<y.length;l++)if(!ht(a,s,v,y[l])){l++;y.splice(0,l);var C=!1;break e}y.splice(0,l);C=!0}if(!C){e.destination=null;i++;b.splice(0,i);return}}b.splice(0,i);var O=e.completedBoundaries;for(i=0;i<O.length;i++)if(!mt(e,t,O[i])){e.destination=null;i++;O.splice(0,i);return}O.splice(0,i)}finally{0===e.allPendingTasks&&0===e.pingedTasks.length&&0===e.clientRenderedBoundaries.length&&0===e.completedBoundaries.length&&t.push(null)}}function bt(e,t){try{var n=e.abortableTasks;n.forEach((function(n){return st(n,e,t)}));n.clear();null!==e.destination&&gt(e,e.destination)}catch(t){Ze(e,t),Qe(e,t)}}function vt(){}function yt(e,t,n,o){var i=!1,a=null,s="",l={push:function(e){null!==e&&(s+=e);return!0},destroy:function(e){i=!0;a=e}},c=!1;ut(e=Ke(e,B(n,t?t.identifierPrefix:void 0),{insertionMode:1,selectedValue:null},1/0,vt,void 0,(function(){c=!0}),void 0,void 0));bt(e,o);if(1===e.status)e.status=2,l.destroy(e.fatalError);else if(2!==e.status&&null===e.destination){e.destination=l;try{gt(e,l)}catch(t){Ze(e,t),Qe(e,t)}}if(i)throw a;if(!c)throw Error(r(426));return s}t.renderToNodeStream=function(){throw Error(r(207))};t.renderToStaticMarkup=function(e,t){return yt(e,t,!0,'The server used "renderToStaticMarkup" which does not support Suspense. If you intended to have the server wait for the suspended component please switch to "renderToReadableStream" which supports Suspense on the server')};t.renderToStaticNodeStream=function(){throw Error(r(208))};t.renderToString=function(e,t){return yt(e,t,!1,'The server used "renderToString" which does not support Suspense. If you intended for this Suspense boundary to render the fallback content on the server consider throwing an Error somewhere within the Suspense boundary. If you intended to have the server wait for the suspended component please switch to "renderToReadableStream" which supports Suspense on the server')};t.version="18.3.1"},1582:function(e,t,n){"use strict";var o=n(40);function r(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=null,a=0;function s(e,t){if(0!==t.length)if(512<t.length)0<a&&(e.enqueue(new Uint8Array(i.buffer,0,a)),i=new Uint8Array(512),a=0),e.enqueue(t);else{var n=i.length-a;n<t.length&&(0===n?e.enqueue(i):(i.set(t.subarray(0,n),a),e.enqueue(i),t=t.subarray(n)),i=new Uint8Array(512),a=0);i.set(t,a);a+=t.length}}function l(e,t){s(e,t);return!0}function c(e){i&&0<a&&(e.enqueue(new Uint8Array(i.buffer,0,a)),i=null,a=0)}var u=new TextEncoder;function d(e){return u.encode(e)}function f(e){return u.encode(e)}function p(e,t){"function"==typeof e.error?e.error(t):e.close()}var m=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,g={},b={};function v(e){if(m.call(b,e))return!0;if(m.call(g,e))return!1;if(h.test(e))return b[e]=!0;g[e]=!0;return!1}function y(e,t,n,o,r,i,a){this.acceptsBooleans=2===t||3===t||4===t;this.attributeName=o;this.attributeNamespace=r;this.mustUseProperty=n;this.propertyName=e;this.type=t;this.sanitizeURL=i;this.removeEmptyString=a}var C={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){C[e]=new y(e,0,!1,e,null,!1,!1)}));[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];C[t]=new y(t,1,!1,e[1],null,!1,!1)}));["contentEditable","draggable","spellCheck","value"].forEach((function(e){C[e]=new y(e,2,!1,e.toLowerCase(),null,!1,!1)}));["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){C[e]=new y(e,2,!1,e,null,!1,!1)}));"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){C[e]=new y(e,3,!1,e.toLowerCase(),null,!1,!1)}));["checked","multiple","muted","selected"].forEach((function(e){C[e]=new y(e,3,!0,e,null,!1,!1)}));["capture","download"].forEach((function(e){C[e]=new y(e,4,!1,e,null,!1,!1)}));["cols","rows","size","span"].forEach((function(e){C[e]=new y(e,6,!1,e,null,!1,!1)}));["rowSpan","start"].forEach((function(e){C[e]=new y(e,5,!1,e.toLowerCase(),null,!1,!1)}));var O=/[\-:]([a-z])/g;function x(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(O,x);C[t]=new y(t,1,!1,e,null,!1,!1)}));"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(O,x);C[t]=new y(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}));["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(O,x);C[t]=new y(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}));["tabIndex","crossOrigin"].forEach((function(e){C[e]=new y(e,1,!1,e.toLowerCase(),null,!1,!1)}));C.xlinkHref=new y("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach((function(e){C[e]=new y(e,1,!1,e.toLowerCase(),null,!0,!0)}));var j={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},S=["Webkit","ms","Moz","O"];Object.keys(j).forEach((function(e){S.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1);j[t]=j[e]}))}));var w=/["'&<>]/;function T(e){if("boolean"==typeof e||"number"==typeof e)return""+e;e=""+e;var t=w.exec(e);if(t){var n,o="",r=0;for(n=t.index;n<e.length;n++){switch(e.charCodeAt(n)){case 34:t="&quot;";break;case 38:t="&amp;";break;case 39:t="&#x27;";break;case 60:t="&lt;";break;case 62:t="&gt;";break;default:continue}r!==n&&(o+=e.substring(r,n));r=n+1;o+=t}e=r!==n?o+e.substring(r,n):o}return e}var k=/([A-Z])/g,N=/^ms-/,E=Array.isArray,A=f("<script>"),I=f("<\/script>"),R=f('<script src="'),L=f('<script type="module" src="'),_=f('" async=""><\/script>'),P=/(<\/|<)(s)(cript)/gi;function M(e,t,n,o){return t+("s"===n?"\\u0073":"\\u0053")+o}function D(e,t,n,o,r){e=void 0===e?"":e;t=void 0===t?A:f('<script nonce="'+T(t)+'">');var i=[];void 0!==n&&i.push(t,d((""+n).replace(P,M)),I);if(void 0!==o)for(n=0;n<o.length;n++)i.push(R,d(T(o[n])),_);if(void 0!==r)for(o=0;o<r.length;o++)i.push(L,d(T(r[o])),_);return{bootstrapChunks:i,startInlineScript:t,placeholderPrefix:f(e+"P:"),segmentPrefix:f(e+"S:"),boundaryPrefix:e+"B:",idPrefix:e,nextSuspenseID:0,sentCompleteSegmentFunction:!1,sentCompleteBoundaryFunction:!1,sentClientRenderFunction:!1}}function B(e,t){return{insertionMode:e,selectedValue:t}}function F(e){return B("http://www.w3.org/2000/svg"===e?2:"http://www.w3.org/1998/Math/MathML"===e?3:0,null)}function U(e,t,n){switch(t){case"select":return B(1,null!=n.value?n.value:n.defaultValue);case"svg":return B(2,null);case"math":return B(3,null);case"foreignObject":return B(1,null);case"table":return B(4,null);case"thead":case"tbody":case"tfoot":return B(5,null);case"colgroup":return B(7,null);case"tr":return B(6,null)}return 4<=e.insertionMode||0===e.insertionMode?B(1,null):e}var V=f("\x3c!-- --\x3e");function H(e,t,n,o){if(""===t)return o;o&&e.push(V);e.push(d(T(t)));return!0}var q=new Map,$=f(' style="'),z=f(":"),W=f(";");function G(e,t,n){if("object"!=typeof n)throw Error(r(62));t=!0;for(var o in n)if(m.call(n,o)){var i=n[o];if(null!=i&&"boolean"!=typeof i&&""!==i){if(0===o.indexOf("--")){var a=d(T(o));i=d(T((""+i).trim()))}else{a=o;var s=q.get(a);void 0!==s||(s=f(T(a.replace(k,"-$1").toLowerCase().replace(N,"-ms-"))),q.set(a,s)),a=s;i="number"==typeof i?0===i||m.call(j,o)?d(""+i):d(i+"px"):d(T((""+i).trim()))}t?(t=!1,e.push($,a,z,i)):e.push(W,a,z,i)}}t||e.push(X)}var K=f(" "),Y=f('="'),X=f('"'),Z=f('=""');function Q(e,t,n,o){switch(n){case"style":G(e,t,o);return;case"defaultValue":case"defaultChecked":case"innerHTML":case"suppressContentEditableWarning":case"suppressHydrationWarning":return}if(!(2<n.length)||"o"!==n[0]&&"O"!==n[0]||"n"!==n[1]&&"N"!==n[1])if(null!==(t=C.hasOwnProperty(n)?C[n]:null)){switch(typeof o){case"function":case"symbol":return;case"boolean":if(!t.acceptsBooleans)return}n=d(t.attributeName);switch(t.type){case 3:o&&e.push(K,n,Z);break;case 4:!0===o?e.push(K,n,Z):!1!==o&&e.push(K,n,Y,d(T(o)),X);break;case 5:isNaN(o)||e.push(K,n,Y,d(T(o)),X);break;case 6:!isNaN(o)&&1<=o&&e.push(K,n,Y,d(T(o)),X);break;default:t.sanitizeURL&&(o=""+o),e.push(K,n,Y,d(T(o)),X)}}else if(v(n)){switch(typeof o){case"function":case"symbol":return;case"boolean":if("data-"!==(t=n.toLowerCase().slice(0,5))&&"aria-"!==t)return}e.push(K,d(n),Y,d(T(o)),X)}}var J=f(">"),ee=f("/>");function te(e,t,n){if(null!=t){if(null!=n)throw Error(r(60));if("object"!=typeof t||!("__html"in t))throw Error(r(61));null!=(t=t.__html)&&e.push(d(""+t))}}function ne(e){var t="";o.Children.forEach(e,(function(e){null!=e&&(t+=e)}));return t}var oe=f(' selected=""');function re(e,t,n,o){e.push(le(n));var r,i=n=null;for(r in t)if(m.call(t,r)){var a=t[r];if(null!=a)switch(r){case"children":n=a;break;case"dangerouslySetInnerHTML":i=a;break;default:Q(e,o,r,a)}}e.push(J);te(e,i,n);return"string"==typeof n?(e.push(d(T(n))),null):n}var ie=f("\n"),ae=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,se=new Map;function le(e){var t=se.get(e);if(void 0===t){if(!ae.test(e))throw Error(r(65,e));t=f("<"+e);se.set(e,t)}return t}var ce=f("<!DOCTYPE html>");function ue(e,t,n,o,i){switch(t){case"select":e.push(le("select"));var a=null,s=null;for(f in n)if(m.call(n,f)){var l=n[f];if(null!=l)switch(f){case"children":a=l;break;case"dangerouslySetInnerHTML":s=l;break;case"defaultValue":case"value":break;default:Q(e,o,f,l)}}e.push(J);te(e,s,a);return a;case"option":s=i.selectedValue;e.push(le("option"));var c=l=null,u=null,f=null;for(a in n)if(m.call(n,a)){var p=n[a];if(null!=p)switch(a){case"children":l=p;break;case"selected":u=p;break;case"dangerouslySetInnerHTML":f=p;break;case"value":c=p;default:Q(e,o,a,p)}}if(null!=s)if(n=null!==c?""+c:ne(l),E(s)){for(o=0;o<s.length;o++)if(""+s[o]===n){e.push(oe);break}}else""+s===n&&e.push(oe);else u&&e.push(oe);e.push(J);te(e,f,l);return l;case"textarea":e.push(le("textarea"));f=s=a=null;for(l in n)if(m.call(n,l)&&null!=(c=n[l]))switch(l){case"children":f=c;break;case"value":a=c;break;case"defaultValue":s=c;break;case"dangerouslySetInnerHTML":throw Error(r(91));default:Q(e,o,l,c)}null===a&&null!==s&&(a=s);e.push(J);if(null!=f){if(null!=a)throw Error(r(92));if(E(f)&&1<f.length)throw Error(r(93));a=""+f}"string"==typeof a&&"\n"===a[0]&&e.push(ie);null!==a&&e.push(d(T(""+a)));return null;case"input":e.push(le("input"));c=f=l=a=null;for(s in n)if(m.call(n,s)&&null!=(u=n[s]))switch(s){case"children":case"dangerouslySetInnerHTML":throw Error(r(399,"input"));case"defaultChecked":c=u;break;case"defaultValue":l=u;break;case"checked":f=u;break;case"value":a=u;break;default:Q(e,o,s,u)}null!==f?Q(e,o,"checked",f):null!==c&&Q(e,o,"checked",c);null!==a?Q(e,o,"value",a):null!==l&&Q(e,o,"value",l);e.push(ee);return null;case"menuitem":e.push(le("menuitem"));for(var h in n)if(m.call(n,h)&&null!=(a=n[h]))switch(h){case"children":case"dangerouslySetInnerHTML":throw Error(r(400));default:Q(e,o,h,a)}e.push(J);return null;case"title":e.push(le("title"));a=null;for(p in n)if(m.call(n,p)&&null!=(s=n[p]))switch(p){case"children":a=s;break;case"dangerouslySetInnerHTML":throw Error(r(434));default:Q(e,o,p,s)}e.push(J);return a;case"listing":case"pre":e.push(le(t));s=a=null;for(c in n)if(m.call(n,c)&&null!=(l=n[c]))switch(c){case"children":a=l;break;case"dangerouslySetInnerHTML":s=l;break;default:Q(e,o,c,l)}e.push(J);if(null!=s){if(null!=a)throw Error(r(60));if("object"!=typeof s||!("__html"in s))throw Error(r(61));null!=(n=s.__html)&&("string"==typeof n&&0<n.length&&"\n"===n[0]?e.push(ie,d(n)):e.push(d(""+n)))}"string"==typeof a&&"\n"===a[0]&&e.push(ie);return a;case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":e.push(le(t));for(var g in n)if(m.call(n,g)&&null!=(a=n[g]))switch(g){case"children":case"dangerouslySetInnerHTML":throw Error(r(399,t));default:Q(e,o,g,a)}e.push(ee);return null;case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return re(e,n,t,o);case"html":return 0===i.insertionMode&&e.push(ce),re(e,n,t,o);default:if(-1===t.indexOf("-")&&"string"!=typeof n.is)return re(e,n,t,o);e.push(le(t));s=a=null;for(u in n)if(m.call(n,u)&&null!=(l=n[u]))switch(u){case"children":a=l;break;case"dangerouslySetInnerHTML":s=l;break;case"style":G(e,o,l);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":break;default:v(u)&&"function"!=typeof l&&"symbol"!=typeof l&&e.push(K,d(u),Y,d(T(l)),X)}e.push(J);te(e,s,a);return a}}var de=f("</"),fe=f(">"),pe=f('<template id="'),me=f('"></template>'),he=f("\x3c!--$--\x3e"),ge=f('\x3c!--$?--\x3e<template id="'),be=f('"></template>'),ve=f("\x3c!--$!--\x3e"),ye=f("\x3c!--/$--\x3e"),Ce=f("<template"),Oe=f('"'),xe=f(' data-dgst="');f(' data-msg="');f(' data-stck="');var je=f("></template>");function Se(e,t,n){s(e,ge);if(null===n)throw Error(r(395));s(e,n);return l(e,be)}var we=f('<div hidden id="'),Te=f('">'),ke=f("</div>"),Ne=f('<svg aria-hidden="true" style="display:none" id="'),Ee=f('">'),Ae=f("</svg>"),Ie=f('<math aria-hidden="true" style="display:none" id="'),Re=f('">'),Le=f("</math>"),_e=f('<table hidden id="'),Pe=f('">'),Me=f("</table>"),De=f('<table hidden><tbody id="'),Be=f('">'),Fe=f("</tbody></table>"),Ue=f('<table hidden><tr id="'),Ve=f('">'),He=f("</tr></table>"),qe=f('<table hidden><colgroup id="'),$e=f('">'),ze=f("</colgroup></table>");function We(e,t,n,o){switch(n.insertionMode){case 0:case 1:return s(e,we),s(e,t.segmentPrefix),s(e,d(o.toString(16))),l(e,Te);case 2:return s(e,Ne),s(e,t.segmentPrefix),s(e,d(o.toString(16))),l(e,Ee);case 3:return s(e,Ie),s(e,t.segmentPrefix),s(e,d(o.toString(16))),l(e,Re);case 4:return s(e,_e),s(e,t.segmentPrefix),s(e,d(o.toString(16))),l(e,Pe);case 5:return s(e,De),s(e,t.segmentPrefix),s(e,d(o.toString(16))),l(e,Be);case 6:return s(e,Ue),s(e,t.segmentPrefix),s(e,d(o.toString(16))),l(e,Ve);case 7:return s(e,qe),s(e,t.segmentPrefix),s(e,d(o.toString(16))),l(e,$e);default:throw Error(r(397))}}function Ge(e,t){switch(t.insertionMode){case 0:case 1:return l(e,ke);case 2:return l(e,Ae);case 3:return l(e,Le);case 4:return l(e,Me);case 5:return l(e,Fe);case 6:return l(e,He);case 7:return l(e,ze);default:throw Error(r(397))}}var Ke=f('function $RS(a,b){a=document.getElementById(a);b=document.getElementById(b);for(a.parentNode.removeChild(a);a.firstChild;)b.parentNode.insertBefore(a.firstChild,b);b.parentNode.removeChild(b)};$RS("'),Ye=f('$RS("'),Xe=f('","'),Ze=f('")<\/script>'),Qe=f('function $RC(a,b){a=document.getElementById(a);b=document.getElementById(b);b.parentNode.removeChild(b);if(a){a=a.previousSibling;var f=a.parentNode,c=a.nextSibling,e=0;do{if(c&&8===c.nodeType){var d=c.data;if("/$"===d)if(0===e)break;else e--;else"$"!==d&&"$?"!==d&&"$!"!==d||e++}d=c.nextSibling;f.removeChild(c);c=d}while(c);for(;b.firstChild;)f.insertBefore(b.firstChild,c);a.data="$";a._reactRetry&&a._reactRetry()}};$RC("'),Je=f('$RC("'),et=f('","'),tt=f('")<\/script>'),nt=f('function $RX(b,c,d,e){var a=document.getElementById(b);a&&(b=a.previousSibling,b.data="$!",a=a.dataset,c&&(a.dgst=c),d&&(a.msg=d),e&&(a.stck=e),b._reactRetry&&b._reactRetry())};$RX("'),ot=f('$RX("'),rt=f('"'),it=f(")<\/script>"),at=f(","),st=/[<\u2028\u2029]/g;function lt(e){return JSON.stringify(e).replace(st,(function(e){switch(e){case"<":return"\\u003c";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw Error("escapeJSStringsForInstructionScripts encountered a match it does not know how to replace. this means the match regex and the replacement characters are no longer in sync. This is a bug in React")}}))}var ct=Object.assign,ut=Symbol.for("react.element"),dt=Symbol.for("react.portal"),ft=Symbol.for("react.fragment"),pt=Symbol.for("react.strict_mode"),mt=Symbol.for("react.profiler"),ht=Symbol.for("react.provider"),gt=Symbol.for("react.context"),bt=Symbol.for("react.forward_ref"),vt=Symbol.for("react.suspense"),yt=Symbol.for("react.suspense_list"),Ct=Symbol.for("react.memo"),Ot=Symbol.for("react.lazy"),xt=Symbol.for("react.scope"),jt=Symbol.for("react.debug_trace_mode"),St=Symbol.for("react.legacy_hidden"),wt=Symbol.for("react.default_value"),Tt=Symbol.iterator;function kt(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case ft:return"Fragment";case dt:return"Portal";case mt:return"Profiler";case pt:return"StrictMode";case vt:return"Suspense";case yt:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case gt:return(e.displayName||"Context")+".Consumer";case ht:return(e._context.displayName||"Context")+".Provider";case bt:var t=e.render;(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef");return e;case Ct:return null!==(t=e.displayName||null)?t:kt(e.type)||"Memo";case Ot:t=e._payload;e=e._init;try{return kt(e(t))}catch(e){}}return null}var Nt={};function Et(e,t){if(!(e=e.contextTypes))return Nt;var n,o={};for(n in e)o[n]=t[n];return o}var At=null;function It(e,t){if(e!==t){e.context._currentValue=e.parentValue;e=e.parent;var n=t.parent;if(null===e){if(null!==n)throw Error(r(401))}else{if(null===n)throw Error(r(401));It(e,n)}t.context._currentValue=t.value}}function Rt(e){e.context._currentValue=e.parentValue;null!==(e=e.parent)&&Rt(e)}function Lt(e){var t=e.parent;null!==t&&Lt(t);e.context._currentValue=e.value}function _t(e,t){e.context._currentValue=e.parentValue;if(null===(e=e.parent))throw Error(r(402));e.depth===t.depth?It(e,t):_t(e,t)}function Pt(e,t){var n=t.parent;if(null===n)throw Error(r(402));e.depth===n.depth?It(e,n):Pt(e,n);t.context._currentValue=t.value}function Mt(e){var t=At;t!==e&&(null===t?Lt(e):null===e?Rt(t):t.depth===e.depth?It(t,e):t.depth>e.depth?_t(t,e):Pt(t,e),At=e)}var Dt={isMounted:function(){return!1},enqueueSetState:function(e,t){null!==(e=e._reactInternals).queue&&e.queue.push(t)},enqueueReplaceState:function(e,t){(e=e._reactInternals).replace=!0;e.queue=[t]},enqueueForceUpdate:function(){}};function Bt(e,t,n,o){var r=void 0!==e.state?e.state:null;e.updater=Dt;e.props=n;e.state=r;var i={queue:[],replace:!1};e._reactInternals=i;var a=t.contextType;e.context="object"==typeof a&&null!==a?a._currentValue:o;"function"==typeof(a=t.getDerivedStateFromProps)&&(r=null==(a=a(n,r))?r:ct({},r,a),e.state=r);if("function"!=typeof t.getDerivedStateFromProps&&"function"!=typeof e.getSnapshotBeforeUpdate&&("function"==typeof e.UNSAFE_componentWillMount||"function"==typeof e.componentWillMount))if(t=e.state,"function"==typeof e.componentWillMount&&e.componentWillMount(),"function"==typeof e.UNSAFE_componentWillMount&&e.UNSAFE_componentWillMount(),t!==e.state&&Dt.enqueueReplaceState(e,e.state,null),null!==i.queue&&0<i.queue.length)if(t=i.queue,a=i.replace,i.queue=null,i.replace=!1,a&&1===t.length)e.state=t[0];else{i=a?t[0]:e.state;r=!0;for(a=a?1:0;a<t.length;a++){var s=t[a];null!=(s="function"==typeof s?s.call(e,i,n,o):s)&&(r?(r=!1,i=ct({},i,s)):ct(i,s))}e.state=i}else i.queue=null}var Ft={id:1,overflow:""};function Ut(e,t,n){var o=e.id;e=e.overflow;var r=32-Vt(o)-1;o&=~(1<<r);n+=1;var i=32-Vt(t)+r;if(30<i){var a=r-r%5;i=(o&(1<<a)-1).toString(32);o>>=a;r-=a;return{id:1<<32-Vt(t)+r|n<<r|o,overflow:i+e}}return{id:1<<i|n<<r|o,overflow:e}}var Vt=Math.clz32?Math.clz32:$t,Ht=Math.log,qt=Math.LN2;function $t(e){return 0===(e>>>=0)?32:31-(Ht(e)/qt|0)|0}function zt(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t}var Wt="function"==typeof Object.is?Object.is:zt,Gt=null,Kt=null,Yt=null,Xt=null,Zt=!1,Qt=!1,Jt=0,en=null,tn=0;function nn(){if(null===Gt)throw Error(r(321));return Gt}function on(){if(0<tn)throw Error(r(312));return{memoizedState:null,queue:null,next:null}}function rn(){null===Xt?null===Yt?(Zt=!1,Yt=Xt=on()):(Zt=!0,Xt=Yt):null===Xt.next?(Zt=!1,Xt=Xt.next=on()):(Zt=!0,Xt=Xt.next);return Xt}function an(){Kt=Gt=null;Qt=!1;Yt=null;tn=0;Xt=en=null}function sn(e,t){return"function"==typeof t?t(e):t}function ln(e,t,n){Gt=nn();Xt=rn();if(Zt){var o=Xt.queue;t=o.dispatch;if(null!==en&&void 0!==(n=en.get(o))){en.delete(o);o=Xt.memoizedState;do{o=e(o,n.action),n=n.next}while(null!==n);Xt.memoizedState=o;return[o,t]}return[Xt.memoizedState,t]}e=e===sn?"function"==typeof t?t():t:void 0!==n?n(t):t;Xt.memoizedState=e;e=(e=Xt.queue={last:null,dispatch:null}).dispatch=un.bind(null,Gt,e);return[Xt.memoizedState,e]}function cn(e,t){Gt=nn();t=void 0===t?null:t;if(null!==(Xt=rn())){var n=Xt.memoizedState;if(null!==n&&null!==t){var o=n[1];e:if(null===o)o=!1;else{for(var r=0;r<o.length&&r<t.length;r++)if(!Wt(t[r],o[r])){o=!1;break e}o=!0}if(o)return n[0]}}e=e();Xt.memoizedState=[e,t];return e}function un(e,t,n){if(25<=tn)throw Error(r(301));if(e===Gt)if(Qt=!0,e={action:n,next:null},null===en&&(en=new Map),void 0===(n=en.get(t)))en.set(t,e);else{for(t=n;null!==t.next;)t=t.next;t.next=e}}function dn(){throw Error(r(394))}function fn(){}var pn={readContext:function(e){return e._currentValue},useContext:function(e){nn();return e._currentValue},useMemo:cn,useReducer:ln,useRef:function(e){Gt=nn();var t=(Xt=rn()).memoizedState;return null===t?(e={current:e},Xt.memoizedState=e):t},useState:function(e){return ln(sn,e)},useInsertionEffect:fn,useLayoutEffect:function(){},useCallback:function(e,t){return cn((function(){return e}),t)},useImperativeHandle:fn,useEffect:fn,useDebugValue:fn,useDeferredValue:function(e){nn();return e},useTransition:function(){nn();return[!1,dn]},useId:function(){var e=Kt.treeContext,t=e.overflow;e=((e=e.id)&~(1<<32-Vt(e)-1)).toString(32)+t;var n=mn;if(null===n)throw Error(r(404));t=Jt++;e=":"+n.idPrefix+"R"+e;0<t&&(e+="H"+t.toString(32));return e+":"},useMutableSource:function(e,t){nn();return t(e._source)},useSyncExternalStore:function(e,t,n){if(void 0===n)throw Error(r(407));return n()}},mn=null,hn=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentDispatcher;function gn(e){console.error(e);return null}function bn(){}function vn(e,t,n,o,r,i,a,s,l){var c=[],u=new Set;(n=Cn(t={destination:null,responseState:t,progressiveChunkSize:void 0===o?12800:o,status:0,fatalError:null,nextSegmentId:0,allPendingTasks:0,pendingRootTasks:0,completedRootSegment:null,abortableTasks:u,pingedTasks:c,clientRenderedBoundaries:[],completedBoundaries:[],partialBoundaries:[],onError:void 0===r?gn:r,onAllReady:void 0===i?bn:i,onShellReady:void 0===a?bn:a,onShellError:void 0===s?bn:s,onFatalError:void 0===l?bn:l},0,null,n,!1,!1)).parentFlushed=!0;e=yn(t,e,null,n,u,Nt,null,Ft);c.push(e);return t}function yn(e,t,n,o,r,i,a,s){e.allPendingTasks++;null===n?e.pendingRootTasks++:n.pendingTasks++;var l={node:t,ping:function(){var t=e.pingedTasks;t.push(l);1===t.length&&_n(e)},blockedBoundary:n,blockedSegment:o,abortSet:r,legacyContext:i,context:a,treeContext:s};r.add(l);return l}function Cn(e,t,n,o,r,i){return{status:0,id:-1,index:t,parentFlushed:!1,chunks:[],children:[],formatContext:o,boundary:n,lastPushedText:r,textEmbedded:i}}function On(e,t){if(null!=(e=e.onError(t))&&"string"!=typeof e)throw Error('onError returned something with a type other than "string". onError should return a string and may return null or undefined but must not return anything else. It received something of type "'+typeof e+'" instead');return e}function xn(e,t){var n=e.onShellError;n(t);(n=e.onFatalError)(t);null!==e.destination?(e.status=2,p(e.destination,t)):(e.status=1,e.fatalError=t)}function jn(e,t,n,o,r){Gt={};Kt=t;Jt=0;for(e=n(o,r);Qt;)Qt=!1,Jt=0,tn+=1,Xt=null,e=n(o,r);an();return e}function Sn(e,t,n,o){var i=n.render(),a=o.childContextTypes;if(null!=a){var s=t.legacyContext;if("function"!=typeof n.getChildContext)o=s;else{n=n.getChildContext();for(var l in n)if(!(l in a))throw Error(r(108,kt(o)||"Unknown",l));o=ct({},s,n)}t.legacyContext=o;kn(e,t,i);t.legacyContext=s}else kn(e,t,i)}function wn(e,t){if(e&&e.defaultProps){t=ct({},t);e=e.defaultProps;for(var n in e)void 0===t[n]&&(t[n]=e[n]);return t}return t}function Tn(e,t,n,o,i){if("function"==typeof n)if(n.prototype&&n.prototype.isReactComponent){i=Et(n,t.legacyContext);var a=n.contextType;Bt(a=new n(o,"object"==typeof a&&null!==a?a._currentValue:i),n,o,i);Sn(e,t,a,n)}else{i=jn(e,t,n,o,a=Et(n,t.legacyContext));var s=0!==Jt;if("object"==typeof i&&null!==i&&"function"==typeof i.render&&void 0===i.$$typeof)Bt(i,n,o,a),Sn(e,t,i,n);else if(s){o=t.treeContext;t.treeContext=Ut(o,1,0);try{kn(e,t,i)}finally{t.treeContext=o}}else kn(e,t,i)}else{if("string"!=typeof n){switch(n){case St:case jt:case pt:case mt:case ft:case yt:kn(e,t,o.children);return;case xt:throw Error(r(343));case vt:e:{n=t.blockedBoundary;i=t.blockedSegment;a=o.fallback;o=o.children;var l={id:null,rootSegmentID:-1,parentFlushed:!1,pendingTasks:0,forceClientRender:!1,completedSegments:[],byteSize:0,fallbackAbortableTasks:s=new Set,errorDigest:null},c=Cn(e,i.chunks.length,l,i.formatContext,!1,!1);i.children.push(c);i.lastPushedText=!1;var u=Cn(e,0,null,i.formatContext,!1,!1);u.parentFlushed=!0;t.blockedBoundary=l;t.blockedSegment=u;try{if(En(e,t,o),u.lastPushedText&&u.textEmbedded&&u.chunks.push(V),u.status=1,Rn(l,u),0===l.pendingTasks)break e}catch(t){u.status=4,l.forceClientRender=!0,l.errorDigest=On(e,t)}finally{t.blockedBoundary=n,t.blockedSegment=i}t=yn(e,a,n,c,s,t.legacyContext,t.context,t.treeContext);e.pingedTasks.push(t)}return}if("object"==typeof n&&null!==n)switch(n.$$typeof){case bt:o=jn(e,t,n.render,o,i);if(0!==Jt){n=t.treeContext;t.treeContext=Ut(n,1,0);try{kn(e,t,o)}finally{t.treeContext=n}}else kn(e,t,o);return;case Ct:Tn(e,t,n=n.type,o=wn(n,o),i);return;case ht:i=o.children;n=n._context;o=o.value;a=n._currentValue;n._currentValue=o;At=o={parent:s=At,depth:null===s?0:s.depth+1,context:n,parentValue:a,value:o};t.context=o;kn(e,t,i);if(null===(e=At))throw Error(r(403));o=e.parentValue;e.context._currentValue=o===wt?e.context._defaultValue:o;e=At=e.parent;t.context=e;return;case gt:kn(e,t,o=(o=o.children)(n._currentValue));return;case Ot:Tn(e,t,n=(i=n._init)(n._payload),o=wn(n,o),void 0);return}throw Error(r(130,null==n?n:typeof n,""))}a=ue((i=t.blockedSegment).chunks,n,o,e.responseState,i.formatContext);i.lastPushedText=!1;s=i.formatContext;i.formatContext=U(s,n,o);En(e,t,a);i.formatContext=s;switch(n){case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"input":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":break;default:i.chunks.push(de,d(n),fe)}i.lastPushedText=!1}}function kn(e,t,n){t.node=n;if("object"==typeof n&&null!==n){switch(n.$$typeof){case ut:Tn(e,t,n.type,n.props,n.ref);return;case dt:throw Error(r(257));case Ot:var o=n._init;kn(e,t,n=o(n._payload));return}if(E(n)){Nn(e,t,n);return}null===n||"object"!=typeof n?o=null:o="function"==typeof(o=Tt&&n[Tt]||n["@@iterator"])?o:null;if(o&&(o=o.call(n))){if(!(n=o.next()).done){var i=[];do{i.push(n.value),n=o.next()}while(!n.done);Nn(e,t,i)}return}e=Object.prototype.toString.call(n);throw Error(r(31,"[object Object]"===e?"object with keys {"+Object.keys(n).join(", ")+"}":e))}"string"==typeof n?(o=t.blockedSegment).lastPushedText=H(t.blockedSegment.chunks,n,e.responseState,o.lastPushedText):"number"==typeof n&&((o=t.blockedSegment).lastPushedText=H(t.blockedSegment.chunks,""+n,e.responseState,o.lastPushedText))}function Nn(e,t,n){for(var o=n.length,r=0;r<o;r++){var i=t.treeContext;t.treeContext=Ut(i,o,r);try{En(e,t,n[r])}finally{t.treeContext=i}}}function En(e,t,n){var o=t.blockedSegment.formatContext,r=t.legacyContext,i=t.context;try{return kn(e,t,n)}catch(l){if(an(),"object"!=typeof l||null===l||"function"!=typeof l.then)throw t.blockedSegment.formatContext=o,t.legacyContext=r,t.context=i,Mt(i),l;n=l;var a=t.blockedSegment,s=Cn(e,a.chunks.length,null,a.formatContext,a.lastPushedText,!0);a.children.push(s);a.lastPushedText=!1;e=yn(e,t.node,t.blockedBoundary,s,t.abortSet,t.legacyContext,t.context,t.treeContext).ping;n.then(e,e);t.blockedSegment.formatContext=o;t.legacyContext=r;t.context=i;Mt(i)}}function An(e){var t=e.blockedBoundary;(e=e.blockedSegment).status=3;Ln(this,t,e)}function In(e,t,n){var o=e.blockedBoundary;e.blockedSegment.status=3;null===o?(t.allPendingTasks--,2!==t.status&&(t.status=2,null!==t.destination&&t.destination.close())):(o.pendingTasks--,o.forceClientRender||(o.forceClientRender=!0,e=void 0===n?Error(r(432)):n,o.errorDigest=t.onError(e),o.parentFlushed&&t.clientRenderedBoundaries.push(o)),o.fallbackAbortableTasks.forEach((function(e){return In(e,t,n)})),o.fallbackAbortableTasks.clear(),t.allPendingTasks--,0===t.allPendingTasks&&(o=t.onAllReady)())}function Rn(e,t){if(0===t.chunks.length&&1===t.children.length&&null===t.children[0].boundary){var n=t.children[0];n.id=t.id;n.parentFlushed=!0;1===n.status&&Rn(e,n)}else e.completedSegments.push(t)}function Ln(e,t,n){if(null===t){if(n.parentFlushed){if(null!==e.completedRootSegment)throw Error(r(389));e.completedRootSegment=n}e.pendingRootTasks--;0===e.pendingRootTasks&&(e.onShellError=bn,(t=e.onShellReady)())}else t.pendingTasks--,t.forceClientRender||(0===t.pendingTasks?(n.parentFlushed&&1===n.status&&Rn(t,n),t.parentFlushed&&e.completedBoundaries.push(t),t.fallbackAbortableTasks.forEach(An,e),t.fallbackAbortableTasks.clear()):n.parentFlushed&&1===n.status&&(Rn(t,n),1===t.completedSegments.length&&t.parentFlushed&&e.partialBoundaries.push(t)));e.allPendingTasks--;0===e.allPendingTasks&&(e=e.onAllReady)()}function _n(e){if(2!==e.status){var t=At,n=hn.current;hn.current=pn;var o=mn;mn=e.responseState;try{var r,i=e.pingedTasks;for(r=0;r<i.length;r++){var a=i[r],s=e,l=a.blockedSegment;if(0===l.status){Mt(a.context);try{kn(s,a,a.node),l.lastPushedText&&l.textEmbedded&&l.chunks.push(V),a.abortSet.delete(a),l.status=1,Ln(s,a.blockedBoundary,l)}catch(e){if(an(),"object"==typeof e&&null!==e&&"function"==typeof e.then){var c=a.ping;e.then(c,c)}else{a.abortSet.delete(a);l.status=4;var u=a.blockedBoundary,d=e,f=On(s,d);null===u?xn(s,d):(u.pendingTasks--,u.forceClientRender||(u.forceClientRender=!0,u.errorDigest=f,u.parentFlushed&&s.clientRenderedBoundaries.push(u)));s.allPendingTasks--;if(0===s.allPendingTasks){(0,s.onAllReady)()}}}}}i.splice(0,r);null!==e.destination&&Un(e,e.destination)}catch(t){On(e,t),xn(e,t)}finally{mn=o,hn.current=n,n===pn&&Mt(t)}}}function Pn(e,t,n){n.parentFlushed=!0;switch(n.status){case 0:var o=n.id=e.nextSegmentId++;n.lastPushedText=!1;n.textEmbedded=!1;e=e.responseState;s(t,pe);s(t,e.placeholderPrefix);s(t,e=d(o.toString(16)));return l(t,me);case 1:n.status=2;var i=!0;o=n.chunks;var a=0;n=n.children;for(var c=0;c<n.length;c++){for(i=n[c];a<i.index;a++)s(t,o[a]);i=Mn(e,t,i)}for(;a<o.length-1;a++)s(t,o[a]);a<o.length&&(i=l(t,o[a]));return i;default:throw Error(r(390))}}function Mn(e,t,n){var o=n.boundary;if(null===o)return Pn(e,t,n);o.parentFlushed=!0;if(o.forceClientRender)o=o.errorDigest,l(t,ve),s(t,Ce),o&&(s(t,xe),s(t,d(T(o))),s(t,Oe)),l(t,je),Pn(e,t,n);else if(0<o.pendingTasks){o.rootSegmentID=e.nextSegmentId++;0<o.completedSegments.length&&e.partialBoundaries.push(o);var i=e.responseState,a=i.nextSuspenseID++;i=f(i.boundaryPrefix+a.toString(16));o=o.id=i;Se(t,e.responseState,o);Pn(e,t,n)}else if(o.byteSize>e.progressiveChunkSize)o.rootSegmentID=e.nextSegmentId++,e.completedBoundaries.push(o),Se(t,e.responseState,o.id),Pn(e,t,n);else{l(t,he);if(1!==(n=o.completedSegments).length)throw Error(r(391));Mn(e,t,n[0])}return l(t,ye)}function Dn(e,t,n){We(t,e.responseState,n.formatContext,n.id);Mn(e,t,n);return Ge(t,n.formatContext)}function Bn(e,t,n){for(var o=n.completedSegments,i=0;i<o.length;i++)Fn(e,t,n,o[i]);o.length=0;e=e.responseState;o=n.id;n=n.rootSegmentID;s(t,e.startInlineScript);e.sentCompleteBoundaryFunction?s(t,Je):(e.sentCompleteBoundaryFunction=!0,s(t,Qe));if(null===o)throw Error(r(395));n=d(n.toString(16));s(t,o);s(t,et);s(t,e.segmentPrefix);s(t,n);return l(t,tt)}function Fn(e,t,n,o){if(2===o.status)return!0;var i=o.id;if(-1===i){if(-1===(o.id=n.rootSegmentID))throw Error(r(392));return Dn(e,t,o)}Dn(e,t,o);s(t,(e=e.responseState).startInlineScript);e.sentCompleteSegmentFunction?s(t,Ye):(e.sentCompleteSegmentFunction=!0,s(t,Ke));s(t,e.segmentPrefix);s(t,i=d(i.toString(16)));s(t,Xe);s(t,e.placeholderPrefix);s(t,i);return l(t,Ze)}function Un(e,t){i=new Uint8Array(512);a=0;try{var n=e.completedRootSegment;if(null!==n&&0===e.pendingRootTasks){Mn(e,t,n);e.completedRootSegment=null;var o=e.responseState.bootstrapChunks;for(n=0;n<o.length-1;n++)s(t,o[n]);n<o.length&&l(t,o[n])}var u,f=e.clientRenderedBoundaries;for(u=0;u<f.length;u++){var p=f[u];o=t;var m=e.responseState,h=p.id,g=p.errorDigest,b=p.errorMessage,v=p.errorComponentStack;s(o,m.startInlineScript);m.sentClientRenderFunction?s(o,ot):(m.sentClientRenderFunction=!0,s(o,nt));if(null===h)throw Error(r(395));s(o,h);s(o,rt);(g||b||v)&&(s(o,at),s(o,d(lt(g||""))));(b||v)&&(s(o,at),s(o,d(lt(b||""))));v&&(s(o,at),s(o,d(lt(v))));if(!l(o,it)){e.destination=null;u++;f.splice(0,u);return}}f.splice(0,u);var y=e.completedBoundaries;for(u=0;u<y.length;u++)if(!Bn(e,t,y[u])){e.destination=null;u++;y.splice(0,u);return}y.splice(0,u);c(t);i=new Uint8Array(512);a=0;var C=e.partialBoundaries;for(u=0;u<C.length;u++){var O=C[u];e:{f=e;p=t;var x=O.completedSegments;for(m=0;m<x.length;m++)if(!Fn(f,p,O,x[m])){m++;x.splice(0,m);var j=!1;break e}x.splice(0,m);j=!0}if(!j){e.destination=null;u++;C.splice(0,u);return}}C.splice(0,u);var S=e.completedBoundaries;for(u=0;u<S.length;u++)if(!Bn(e,t,S[u])){e.destination=null;u++;S.splice(0,u);return}S.splice(0,u)}finally{c(t),0===e.allPendingTasks&&0===e.pingedTasks.length&&0===e.clientRenderedBoundaries.length&&0===e.completedBoundaries.length&&t.close()}}function Vn(e,t){try{var n=e.abortableTasks;n.forEach((function(n){return In(n,e,t)}));n.clear();null!==e.destination&&Un(e,e.destination)}catch(t){On(e,t),xn(e,t)}}t.renderToReadableStream=function(e,t){return new Promise((function(n,o){var r,i,a=new Promise((function(e,t){i=e;r=t})),s=vn(e,D(t?t.identifierPrefix:void 0,t?t.nonce:void 0,t?t.bootstrapScriptContent:void 0,t?t.bootstrapScripts:void 0,t?t.bootstrapModules:void 0),F(t?t.namespaceURI:void 0),t?t.progressiveChunkSize:void 0,t?t.onError:void 0,i,(function(){var e=new ReadableStream({type:"bytes",pull:function(e){if(1===s.status)s.status=2,p(e,s.fatalError);else if(2!==s.status&&null===s.destination){s.destination=e;try{Un(s,e)}catch(e){On(s,e),xn(s,e)}}},cancel:function(){Vn(s)}},{highWaterMark:0});e.allReady=a;n(e)}),(function(e){a.catch((function(){}));o(e)}),r);if(t&&t.signal){var l=t.signal,c=function(){Vn(s,l.reason);l.removeEventListener("abort",c)};l.addEventListener("abort",c)}_n(s)}))};t.version="18.3.1"},1583:function(e,t,n){var o=n(1584),r=n(125),i="Expected a function";function a(e,t,n){var a=!0,s=!0;if("function"!=typeof e)throw new TypeError(i);if(r(n)){a="leading"in n?!!n.leading:a;s="trailing"in n?!!n.trailing:s}return o(e,t,{leading:a,maxWait:t,trailing:s})}e.exports=a},1584:function(e,t,n){var o=n(125),r=n(1585),i=n(1586),a="Expected a function",s=Math.max,l=Math.min;function c(e,t,n){var c,u,d,f,p,m,h=0,g=!1,b=!1,v=!0;if("function"!=typeof e)throw new TypeError(a);t=i(t)||0;if(o(n)){g=!!n.leading;d=(b="maxWait"in n)?s(i(n.maxWait)||0,t):d;v="trailing"in n?!!n.trailing:v}function y(t){var n=c,o=u;c=u=void 0;h=t;return f=e.apply(o,n)}function C(e){h=e;p=setTimeout(j,t);return g?y(e):f}function O(e){var n=t-(e-m);return b?l(n,d-(e-h)):n}function x(e){var n=e-m;return void 0===m||n>=t||n<0||b&&e-h>=d}function j(){var e=r();if(x(e))return S(e);p=setTimeout(j,O(e))}function S(e){p=void 0;if(v&&c)return y(e);c=u=void 0;return f}function w(){void 0!==p&&clearTimeout(p);h=0;c=m=u=p=void 0}function T(){return void 0===p?f:S(r())}function k(){var e=r(),n=x(e);c=arguments;u=this;m=e;if(n){if(void 0===p)return C(m);if(b){p=setTimeout(j,t);return y(m)}}void 0===p&&(p=setTimeout(j,t));return f}k.cancel=w;k.flush=T;return k}e.exports=c},1585:function(e,t,n){var o=n(109),r=function(){return o.Date.now()};e.exports=r},1586:function(e,t,n){var o=n(125),r=n(106),i=NaN,a=/^\s+|\s+$/g,s=/^[-+]0x[0-9a-f]+$/i,l=/^0b[01]+$/i,c=/^0o[0-7]+$/i,u=parseInt;function d(e){if("number"==typeof e)return e;if(r(e))return i;if(o(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=o(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(a,"");var n=l.test(e);return n||c.test(e)?u(e.slice(2),n?2:8):s.test(e)?i:+e}e.exports=d},2580:function(e,t,n){"use strict";n.r(t);var o=n(41),r=n.n(o),i=n(40),a=n(59),s=n(287),l=n.n(s),c=n(434),u=n(2734),d=n(2),f=n(1212),p=n.n(f),m=n(1214);const h={PAGE:"page",EMAIL:"email",URL:"url",FILE:"file",EMAIL_SUBSCRIPTION:"email_subscription",VIEW_AS_WEBPAGE:"view_as_page_url",MEETING:"meeting",ANCHOR:"anchor",NONE:"no_link"},g=[h.FILE,h.MEETING],b=[h.ANCHOR,h.EMAIL,h.FILE];let v;!function(e){e.UNSUBSCRIBE="unsubscribe_link";e.SUBSCRIPTION_CONFIRMATION="subscription_confirmation_url";e.UNSUBSCRIBE_ALL="unsubscribe_link_all";e.VIEW_AS_WEBPAGE="view_as_page_url";e.MEMBERSHIP_REGISTRATION_LINK="membership_registration_link";e.MEMBERSHIP_PASSWORD_SAVED_LINK="membership_password_saved_link";e.MEMBERSHIP_PASSWORD_RESET_LINK="membership_password_reset_link"}(v||(v={}));v.MEMBERSHIP_REGISTRATION_LINK,v.MEMBERSHIP_PASSWORD_SAVED_LINK,v.MEMBERSHIP_PASSWORD_RESET_LINK;const y=[v.UNSUBSCRIBE,v.SUBSCRIPTION_CONFIRMATION,v.UNSUBSCRIBE_ALL,v.VIEW_AS_WEBPAGE],C=e=>"RichTextLib.links."+e,O=(h.PAGE,h.FILE,h.MEETING,["externalLink","linkType","isValidLink","relAttr"]),x="noopener";let j;!function(e){e.REGULAR="regular";e.NOFOLLOW="nofollow";e.SPONSORED="sponsored";e.UGC="ugc"}(j||(j={}));const S={[v.UNSUBSCRIBE]:{text:"emailSystemLinks.unsubscribe",help:"emailSystemLinks.unsubscribeHelpText",value:v.UNSUBSCRIBE},[v.SUBSCRIPTION_CONFIRMATION]:{text:"emailSystemLinks.subscriptionConfirmation",help:"emailSystemLinks.subscriptionConfirmationHelpText",value:v.SUBSCRIPTION_CONFIRMATION},[v.MEMBERSHIP_REGISTRATION_LINK]:{text:"emailSystemLinks.membershipRegistration",help:"emailSystemLinks.membershipRegistrationHelpText",value:v.MEMBERSHIP_REGISTRATION_LINK},[v.MEMBERSHIP_PASSWORD_SAVED_LINK]:{text:"emailSystemLinks.membershipPasswordSaved",help:"emailSystemLinks.membershipPasswordSavedHelpText",value:v.MEMBERSHIP_PASSWORD_SAVED_LINK},[v.MEMBERSHIP_PASSWORD_RESET_LINK]:{text:"emailSystemLinks.membershipPasswordReset",help:"emailSystemLinks.membershipPasswordResetHelpText",value:v.MEMBERSHIP_PASSWORD_RESET_LINK},[v.UNSUBSCRIBE_ALL]:{text:"emailSystemLinks.unsubscribeAll",help:"emailSystemLinks.unsubscribeAllHelpText",value:v.UNSUBSCRIBE_ALL},[v.VIEW_AS_WEBPAGE]:{text:"emailSystemLinks.viewAsWebpage",help:"emailSystemLinks.viewAsWebpageHelpText",value:v.VIEW_AS_WEBPAGE}},w={[h.VIEW_AS_WEBPAGE]:{text:"emailSystemLinks.webVersionUrl",value:h.VIEW_AS_WEBPAGE}};var T=n(1227),k=n(1226);function N(e){return{renderUI:()=>{const t=document.createElement("div"),n=document.createElement("div");t.id=e.id+"__editor-container";const o=e.getParam("height",e.getParam("min_height",100));t.style.height=o+"px";n.style.height="100%";const r=e.getElement();t.appendChild(n);r.parentNode.appendChild(t);Object(T.b)(e);return{iframeContainer:n,editorContainer:t}}}}p.a.ThemeManager.add(k.a,N);const E="hsprotect",A=["align","allow","alt","autocapitalize","autocomplete","autofocus","autoplay","background","bgcolor","border","buffered","cellpadding","challenge","checked","cite","class","code","codebase","color","cols","colspan","content","contenteditable","contextmenu","controls","coords","crossorigin","datetime","decoding","default","dir","disabled","draggable","dropzone","headers","height","hidden","high","href","hreflang","icon","id","importance","integrity","intrinsicsize","inputmode","ismap","itemprop","keytype","kind","label","lang","language","loading","list","loop","low","manifest","max","maxlength","minlength","media","method","min","multiple","muted","name","novalidate","open","optimum","pattern","ping","placeholder","poster","preload","radiogroup","readonly","referrerpolicy","rel","required","reversed","rows","rowspan","sandbox","scope","scoped","selected","shape","size","sizes","slot","span","spellcheck","src","srcdoc","srclang","srcset","start","step","style","summary","tabindex","target","title","translate","type","usemap","value","width","wrap","accent-height","accumulate","additive","alignment-baseline","allowReorder","alphabetic","amplitude","arabic-form","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baseline-shift","baseProfile","bbox","begin","bias","by","calcMode","cap-height","clip","clipPathUnits","clip-path","clip-rule","color-interpolation","color-interpolation-filters","color-profile","color-rendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominant-baseline","dur","dx","dy","edgeMode","elevation","enable-background","end","exponent","externalResourcesRequired","fill","fill-opacity","fill-rule","filter","filterRes","filterUnits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","format","from","fr","fx","fy","g1","g2","glyph-name","glyph-orientation-horizontal","glyph-orientation-vertical","glyphRef","gradientTransform","gradientUnits","hanging","horiz-adv-x","horiz-origin-x","ideographic","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letter-spacing","lighting-color","limitingConeAngle","local","marker-end","marker-mid","marker-start","markerHeight","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overline-position","overline-thickness","panose-1","paint-order","path","pathLength","patternContentUnits","patternTransform","patternUnits","pointer-events","points","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","referrerPolicy","refX","refY","rendering-intent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","scale","seed","shape-rendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stop-color","stop-opacity","strikethrough-position","strikethrough-thickness","string","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","surfaceScale","systemLanguage","tableValues","targetX","targetY","text-anchor","text-decoration","text-rendering","textLength","to","transform","u1","u2","underline-position","underline-thickness","unicode","unicode-bidi","unicode-range","units-per-em","v-alphabetic","v-hanging","v-ideographic","v-mathematical","values","vector-effect","version","vert-adv-y","vert-origin-x","vert-origin-y","viewBox","viewTarget","visibility","widths","word-spacing","writing-mode","x","x-height","x1","x2","xChannelSelector","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xmlns","xml:base","xml:lang","xml:space","y","y1","y2","yChannelSelector","z","zoomAndPan","aria-autocomplete","aria-checked","aria-current","aria-disabled","aria-errormessage","aria-expanded","aria-haspopup","aria-hidden","aria-invalid","aria-label","aria-level","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-placeholder","aria-pressed","aria-readonly","aria-required","aria-selected","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","aria-live","aria-relevant","aria-atomic","aria-busy","aria-dropeffect","aria-dragged","aria-activedescendant","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-describedby","aria-details","aria-errormessage","aria-flowto","aria-labelledby","aria-owns","aria-posinset","aria-rowcount","aria-rowindex","aria-rowspan","aria-setsize"],I=e=>e.replace(/-([a-z])/g,e=>e[1].toUpperCase()),R=e=>e.replace(/([a-z][A-Z])/g,e=>`${e[0]}-${e[1].toLowerCase()}`),L=document.createElement("div"),_=e=>{const t=e.match(/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()|~`]+)*)?;base64,([a-zA-Z0-9!$&',()*+;=\-._~:@/?%\s<>]*?)$/);return t&&t[3]?t[3]:null},P=new Set(A),M=(e,t=!0)=>{const n=Array.from(e.querySelectorAll("*")),o=/^([a-zA-Z0-9-_]+)?data([a-zA-Z0-9-_]+)?$/;n.forEach(e=>{const n=Array.from(e.attributes);for(let r=0;r<n.length;r++){const i=n[r].name,a=n[r].value;let s=!P.has(i)&&!o.test(i);if("IFRAME"===e.nodeName&&"src"===i)if(a.indexOf("script")>=0)s=!0;else{const t=_(a);if(t){let n;try{n=atob(encodeURI(t));s=n.indexOf("script")>=0}catch(t){console.info(`${E}: ${i} is not a valid data URL.`);e.removeAttribute(i);console.log(t)}}}if(s){try{L.setAttribute(i,a)}catch(t){console.info(`${E}: ${i} is not a valid attribute, removing.`);e.removeAttribute(i);console.error(t);continue}try{t&&(e.dataset[`${E}${I(i)}`]=a);e.removeAttribute(i)}catch(e){console.info(`${E}: Failed to set ${i} on element dataset`);console.error(e)}}}})},D=e=>{Array.from(e.querySelectorAll("*")).forEach(e=>{const t=e.dataset;Object.keys(t).forEach(n=>{if(n.startsWith(E)){const o=t[n]||String(t[n]),r=R(n.replace(E,""));""!==r&&e.setAttribute(r,o);delete t[n]}})})};var B=n(1242),F=n(1232);function U(e){Object(F.b)(e,e=>M(e.body));Object(F.a)(e,e=>D(e.body))}const V=B.K;p.a.PluginManager.add(V,U);var H=n(1255),q=n(1253),$=n(710),z=n(2679),W=n(319),G=n(1237),K=n(2751);function Y(e){const[t,n]=Object(i.useState)(Object(K.b)(e));Object(i.useEffect)(()=>{const t=e=>{n(e)};Object(K.h)(e,t);return()=>{Object(K.g)(e,t)}},[e]);return t}function X(e){return Object(K.b)(e)}const Z=Object(K.a)(!1),Q=Object(K.a)(null),J=Object(K.a)(null),ee=Object(K.a)(!1),te=Object(K.a)(null),ne=Object(K.a)(!1),oe=Object(K.a)(0),re=Object(K.a)(!1);function ie(e){Object(K.f)(Z,()=>e)}function ae(e){Object(K.f)(Q,()=>e)}function se(e){Object(K.f)(te,()=>e)}function le(e){Object(K.f)(ne,()=>e)}function ce(){Object(K.f)(oe,e=>e+1)}function ue(){Object(K.f)(oe,e=>e-1)}function de(){Object(K.f)(oe,()=>0)}function fe(){Object(K.f)(re,()=>!0)}function pe(){Object(K.f)(re,()=>!1)}function me(e){Object(K.f)(J,()=>e)}function he(e){Object(K.f)(ee,()=>e)}function ge(){const e=Y(Z),t=Y(ne);return e||t}function be(){return Y(Q)}function ve(){return Y(J)}function ye(e){"Backspace"!==e?ce():ue()}function Ce(e){const t=e.id===p.a.activeEditor.id,n=Y(re);return t&&n}const Oe=Object(K.a)(null);function xe(e){Object(K.f)(Oe,()=>e)}function je(){xe(null);ie(!1);ae(null);se(null);de();le(!1);pe()}var Se=n(1290);const we=e=>e.length>0,Te=e=>{const t=e.trim().split("\n");return t.length>1?t.filter(we).map(e=>`<p>${e}</p>`).join(""):e.trim()};function ke(e,t){const n=e.selection.getBookmark().id;e.dom.get(n+"_end").replaceWith(t);const o=e.dom.get(n+"_start");o&&e.dom.remove(o)}function Ne(e){return e.selection&&!e.selection.isCollapsed()}var Ee=n(1241),Ae=n(1233),Ie=n(1239),Re=n(1289),Le=n(443);const _e="#ffffff",Pe={NEUTRAL:"#33475b",HOVER:"#516f90",ACTIVE:"#33475b"},Me={600:"#800051",500:"#a5016a",400:"#d20688",300:"#ff9fcc",200:"#fbdbe9",100:"#fcebf2"},De={LIGHT:"linear-gradient(99deg, #fbddd2, #fbdbe9)",MEDIUM:"linear-gradient(135deg, #fb31a7, #ff4800, #fbddd2)",DARK:"linear-gradient(114deg, #fc0849, #d20688)"},Be="breeze-special",Fe=Object(s.css)([".uiDropdown__buttonContents{display:inline-block;.uiDropdown__buttonLabel{margin-right:0.5rem;}}"]),Ue=Object(s.css)([".ai-icon{position:relative;bottom:1px;}"]),Ve=l()(Le.a).withConfig({displayName:"StyledAIBaseButton__BreezePrimaryAIBaseButton",componentId:"eynonx-0"})(["border-radius:2rem !important;color:"," !important;border:none !important;background:"," !important;&:hover{background-color:"," !important;}&:active{background-color:"," !important;}"," ",""],_e,Me[400],Me[500],Me[600],Fe,Ue),He=l()(Le.a).withConfig({displayName:"StyledAIBaseButton__BreezeSecondaryAIBaseButton",componentId:"eynonx-1"})(["border-radius:2rem !important;color:"," !important;border-color:"," !important;background:"," !important;&:hover{color:"," !important;border-color:"," !important;background:"," !important;}&:active{color:"," !important;border-color:"," !important;background:"," !important;}"," ",""],Me[400],Me[400],_e,Me[500],Me[500],Me[100],Me[600],Me[600],Me[200],Fe,Ue),qe=l()(Le.a).withConfig({displayName:"StyledAIBaseButton__BreezeTertiaryAIBaseButton",componentId:"eynonx-2"})(["border-radius:2rem !important;color:"," !important;border-color:"," !important;background:"," !important;&:hover{color:"," !important;border-color:"," !important;}&:active{color:"," !important;border-color:"," !important;}"," ",""],Pe.NEUTRAL,Pe.NEUTRAL,_e,Pe.HOVER,Pe.HOVER,Pe.ACTIVE,Pe.ACTIVE,Fe,Ue),$e=l()(Le.a).withConfig({displayName:"StyledAIBaseButton__BreezeSpecialAIBaseButton",componentId:"eynonx-3"})(["border-radius:2rem !important;&:not(.disabled){background:",";color:"," !important;border:none !important;&:hover{background:",";}&:active{background:",";}&.disabled{background:none;}}"," ",""],De.DARK,_e,Me[500],Me[600],Fe,Ue),ze=l()(Le.a).withConfig({displayName:"StyledAIBaseButton__BreezeTransparentAIBaseButton",componentId:"eynonx-4"})(["border-radius:2rem !important;border:none !important;color:"," !important;&:not(.disabled) .ai-icon,&:not(.disabled) span{color:"," !important;}&:hover{color:"," !important;}&:active{color:"," !important;}"," ",""],Me[400],Me[400],Me[500],Me[600],Fe,Ue),We=e=>{switch(e){case Be:return $e;case"primary":return Ve;case"secondary":return He;case"tertiary":case"tertiary-light":return qe;case"transparent":case"link":return ze;default:return Ve}};var Ge=n(188),Ke=n(27),Ye=n(45);const Xe=Object(i.createContext)(null),Ze=({gates:e,children:t})=>Object(Ye.jsx)(Xe.Provider,{value:e,children:t}),Qe=(e,t)=>t.includes(e),Je=()=>{try{return Object(Ke.userInfoSync)().gates}catch(e){return[]}},et=e=>{const t=Object(i.useContext)(Xe)||Je();return Qe(e,t)},tt=()=>et(Object(Ge.a)("BreezeAI:Rebranding")),nt=["isLocked","children","showBreezeIcon"],ot=l()(Le.a).withConfig({displayName:"AIBaseButton__StyledUIButton",componentId:"sc-1nzs7h5-0"})([".uiDropdown__buttonContents{display:inline-block;}"]);function rt(e){let{isLocked:t=!1,children:n,showBreezeIcon:o=!0}=e,r=Object(d.a)(e,nt);const i=r.use===Be?void 0:r.use;if(!tt())return Object(Ye.jsxs)(ot,Object.assign({},r,{use:i,children:[!t&&o?Object(Ye.jsx)(z.a,{name:"artificialIntelligence"}):null,n,t&&Object(Ye.jsx)(z.a,{name:"locked"})]}));const a=We(r.use);return Object(Ye.jsxs)(a,Object.assign({},r,{use:i,children:[o&&Object(Ye.jsx)(z.a,{name:"breezeSingleStar",className:"ai-icon"}),n]}))}const it=(e,t)=>e.clone({preserveTrackerEvents:!0,preserveTrackerProperties:!1,trackerName:"ai-components-ui-library",properties:{screen:t}}),at="WE HAVE CUSTOM TRACKING IN PLACE AND AI-EXTENSIBILITY TEAM IS AWARE",st=(e,t)=>({aiTracker:Object(i.useMemo)(()=>{if(e!==at)return it(e,t)},[e,t])}),lt=["children","use","usageTracker","usageTrackerAppLocationKey"],ct=l.a.span.withConfig({displayName:"CopilotDropdownButton__StyledButtonText",componentId:"sc-3lfbcx-0"})(["margin-left:0.5em;"]);var ut=e=>{let{children:t=Object(Ye.jsx)(Ye.Fragment,{}),use:n="tertiary",usageTracker:o,usageTrackerAppLocationKey:r}=e,i=Object(d.a)(e,lt);st(o,r);const a=n===Be?void 0:n;return tt()?Object(Ye.jsx)(rt,Object.assign({},i,{use:a,children:t})):Object(Ye.jsx)(Le.a,Object.assign({"data-test-id":"copilot-dropdown-button",use:a},i,{children:Object(Ye.jsxs)("div",{className:"display-flex",children:[Object(Ye.jsx)(z.a,{name:"chatspot",size:"1.2em",className:"display-flex align-center"}),Object(Ye.jsx)(ct,{children:t})]})}))},dt=n(451),ft=n(279);const pt=Object(Se.a)(W.a),mt=e=>{if(!e||!e.selection)return null;const t=e.selection.getSel(),n=t.anchorNode!==t.focusNode&&0===t.focusOffset;if(!t||0===t.rangeCount)return null;const o=t.getRangeAt(0).getClientRects();let r=o.length-1;if(n){const e=t.focusNode;if(e.getBoundingClientRect){const t=e.getBoundingClientRect(),n=o[o.length-1];t&&n&&t.bottom===n.bottom&&r--}}r=Math.max(r,0);return o[r]},ht=e=>Object(i.useCallback)(({contentDimensions:t})=>{const n=mt(e),o={top:0,left:0,right:0,bottom:0};if(!n)return o;const r=10;o.right=n.right+r+t.width;o.left=o.right-t.width;const i=n.top+n.height/2;o.top=i-t.height/2;o.bottom=i+t.height/2;const a=e.getWin();if(a&&a.document!==document){const t=e.getContainer();if(!t)return{};const n=t.getBoundingClientRect();o.top+=n.top;o.bottom+=n.bottom;o.left+=n.left;o.right+=n.right}const s=document.body.getBoundingClientRect(),l=s.top+document.documentElement.scrollTop;o.top=o.top-s.top+l;o.bottom=o.bottom-s.top+l;o.left=o.left-s.left;o.right=o.right-s.left;return o},[e]),gt=({onMouseDown:e,onClick:t})=>Object(Ye.jsx)($.a,{onMouseDown:e,className:"mce-content-gen-toolbar",onClick:t,size:"small",shape:"circle",children:Object(Ye.jsx)(z.a,{name:"artificialIntelligence",style:{transform:"translateY(-1px)"}})}),bt=({onMouseDown:e,onClick:t})=>Object(Ye.jsxs)(ut,{onMouseDown:e,className:"mce-content-gen-toolbar",onClick:t,use:"secondary",usageTracker:at,size:"xs",children:[Object(Ye.jsx)(ft.a,{message:"TinymcePlugins.hscopilotcollaboration.refine"}),Object(Ye.jsx)(dt.a,{})]}),vt=({onClick:e,editor:t,onRemove:n})=>{const o=ht(t),r=tt(),a=Object(i.useCallback)(e=>{e.preventDefault()},[]);return Object(Ye.jsx)(pt,{editor:t,target:document.body,computePosition:o,"data-test-id":"content-assistance-selection",onRemove:n,content:r?Object(Ye.jsx)(bt,{onMouseDown:a,onClick:e}):Object(Ye.jsx)(gt,{onMouseDown:a,onClick:e})})};function yt(e){const[t,n]=Object(i.useState)(null),o=Object(i.useCallback)(()=>{const t=e.selection.getBookmark();n(t.id)},[e]);return{bookmarkEndNode:Object(i.useMemo)(()=>t?e.dom.get(t+"_end"):null,[t,e]),createBookmark:o,cleanupBookmark:Object(i.useCallback)(()=>{if(!t)return;const o=e.dom.get(t+"_start"),r=e.dom.get(t+"_end");o&&e.dom.remove(o);r&&e.dom.remove(r);n(null)},[t,e])}}const Ct=({editor:e,selectionCommands:t,onInsert:n,selectedText:o,editorContext:r,ContentAssistanceToolbar:a,onClosePopover:s,setEditorContext:l,bookmarkEndNode:c,createBookmark:u,cleanupBookmark:d,brandVoiceOptions:f})=>{var p;const[m,h]=Object(i.useState)(!1),g=Object(i.useCallback)(()=>e.fire("hsRemoveInlineTargets"),[e]),b=null!==(p=e.settings.gates)&&void 0!==p?p:[],v=Object(i.useCallback)((t,n={},o=G.k)=>{const r=Object.assign({actionType:G.n},n);Object(Ie.b)(e,o,t,r)},[e]);Object(i.useEffect)(()=>{v(G.p)},[v]);const y=Object(i.useCallback)(()=>{u();h(!0);l();g();v(G.l)},[l,g,v,u]),C=Object(i.useCallback)(e=>{if(!e.target.value){h(!1);d()}},[d]),O=Object(i.useCallback)(e=>{e.preventDefault()},[]),x=Object(i.useCallback)(()=>{d();s()},[d,s]);Object(i.useEffect)(()=>{const t=()=>{y()};e.on("hscontentgeneration:openSelectionPopover",t);return()=>{e.off("hscontentgeneration:openSelectionPopover",t)}},[e,y]);return Object(Ye.jsxs)(Ze,{gates:b,children:[m?null:Object(Ye.jsx)(vt,{editor:e,onRemove:s,onClick:y}),Object(Ye.jsx)(Re.a,{editor:e,onRemove:x,placement:"bottom right",use:"unstyled",autoPlacement:!0,content:Object(Ye.jsx)("div",{onMouseDown:O,style:{minWidth:120,minHeight:165},children:Object(Ye.jsx)(a,{brandVoiceOptions:f,selectedText:o,selectionCommands:t,editorContext:r,onTextChange:n,onClosePopover:x,trackInteraction:v,tooltipClassName:"mce-content-assistance-inline-toolbar-tooltip"})}),target:c,onOpenChange:C,open:m})]})},Ot=e=>{const[t,n]=Object(i.useState)("false"),o=Object(i.useCallback)(()=>{n(!0)},[]),r=Object(i.useCallback)(()=>{n(!1)},[]);Object(i.useEffect)(()=>{e.on("activate",o);e.on("deactivate",r);return()=>{e.off("activate",o);e.off("deactivate",r)}},[e,o,r]);return{isActive:t}},xt=e=>{const[t,n]=Object(i.useState)(""),[o,r]=Object(i.useState)(""),[a,s]=Object(i.useState)(!1),l=Object(i.useCallback)(()=>{const t=e.selection.getRng(),n=Object(Ae.c)(e,t);r(n);e.selection.setRng(t)},[e]),{onMouseDown:c,onMouseUp:u,handleSelectionChange:d}=Object(i.useMemo)(()=>{let t=!1;function o(){t=!0;s(!0)}function i(){t=!1;const o=e.selection.getContent({format:"text"}),i=e.selection.isCollapsed();if(Object(Ee.h)(o)||i){n("");r("")}else n(o)}function a(){s(!1);if(t){t=!1;i()}}return{onMouseDown:o,onMouseUp:a,handleSelectionChange:i}},[e]),f=Object(i.useCallback)(()=>{n("");r("")},[]);Object(i.useEffect)(()=>{e.on("NodeChange",d);e.on("mousedown",c);e.on("mouseup",u);window.addEventListener("mouseup",u);return()=>{e.off("NodeChange",d);e.off("mousedown",c);e.off("mouseup",u);window.removeEventListener("mouseup",u)}},[c,u,d,e]);return{selectionText:t,editorContext:o,setEditorContext:l,resetSelection:f,isUpdatingSelectionByMouse:a}},jt=({editor:e,selectionCommands:t,ContentAssistanceToolbar:n,brandVoiceOptions:o})=>{const{selectionText:r,resetSelection:a,editorContext:s,setEditorContext:l,isUpdatingSelectionByMouse:c}=xt(e),{bookmarkEndNode:u,createBookmark:d,cleanupBookmark:f}=yt(e),m=Object(i.useCallback)(t=>{f();e.undoManager.transact(()=>{const n=Te(t);e.insertContent(n)})},[e,f]);Object(i.useEffect)(()=>{r||f()},[r,f]);return!r||e.id!==p.a.activeEditor.id||c?null:Object(Ye.jsx)(Ct,{editor:e,editorContext:s,selectionCommands:t,onInsert:m,selectedText:r,onClosePopover:a,ContentAssistanceToolbar:n,setEditorContext:l,bookmarkEndNode:u,createBookmark:d,cleanupBookmark:f,brandVoiceOptions:o})};var St=({editor:e,ContentAssistanceToolbar:t,selectionCommands:n,brandVoiceOptions:o})=>{const{isActive:r}=Ot(e),i=Y(te);return!r||i?null:Object(Ye.jsx)(jt,{editor:e,ContentAssistanceToolbar:t,selectionCommands:n,brandVoiceOptions:o})},wt=n(1293);const Tt=(e,t,n)=>{const o=Object(wt.a)(e,"ContentAssistanceToolbar","`ContentAssistanceToolbar` picker component is required for the content generation plugin");p.a.canvas.addPopover(e,B.c,{renderPopover:r=>Object(Ye.jsx)(St,Object.assign({brandVoiceOptions:n,"data-test-id":"content-assistance-selection-popover",editor:e,selectionCommands:t,ContentAssistanceToolbar:o},r))})};function kt(e,t,n){t.length&&Tt(e,t,n)}var Nt=n(4);const Et="hsContentAssistant",At={IS_DISABLED:"isDisabled",SLASH_COMMANDS:"slashCommands",SELECTION_COMMANDS:"selectionCommands",BRAND_VOICE_OPTIONS:"brandVoiceOptions",COPILOT_COLLAB_CONTEXT_VALUE:"copilotCollabContextValue",IS_COPILOT_COLLABORATION_ENABLED:"isCopilotCollaborationEnabled"},It="super-admin",Rt="/",Lt={id:"generateimage",labelKey:"TinymcePlugins.hsimage.slashCommands.ADD_AI_IMAGE.label"},_t=Object(K.a)(null);function Pt(e){Object(K.f)(_t,()=>e)}const Mt=document.createElement("span");Mt.setAttribute("data-mce-hs-autocomplete",1);Mt.setAttribute(Ae.b,1);const Dt={COMMAND:"COMMAND",QUICK_INSERT:"QUICK_INSERT"};function Bt(e){e.dom.remove(Mt)}function Ft(){return Mt}function Ut(e,t){if(0===e)return!0;const n=t.charAt(e-1);return Object(Ee.h)(n)}function Vt(e,t,n,o){let r;const i=o===Dt.COMMAND;for(r=t-1;r>=0;r--){const o=n.charAt(r);if(Object(Ee.h)(o)&&!i)return t;if(o===e&&Ut(r,n))return r}return-1}function Ht(e,t,n=Dt.QUICK_INSERT){const o=e.selection.getRng(),r=p.a.dom.TextSeeker(e.dom);let i;const a=t.find(e=>{const t=r.backwards(o.startContainer,o.startOffset,(t,o,r)=>Vt(e,o,r,n));if(!t)return!1;const a=o.cloneRange();a.setStart(t.container,t.offset);a.setEnd(o.endContainer,o.endOffset);if(a.collapsed)return!1;i=a;return 0===a.toString().lastIndexOf(e)});a||(i=null);return{activeTrigger:a,activeAutocompleteRange:i}}function qt(e,t){return e.reduce((e,n)=>{const o=n(t);return e.concat(o)},[])}function $t(e,t){const n=Math.min(e,t-1);return Math.max(0,n)}function zt(e,t){const n=X(te),o=!n.endContainer.textContent;n?e.undoManager.transact(()=>{o||e.selection.setRng(n);e.selection.setContent(t)}):console.warn("No autocomplete range found, aborting content insertion");je();Bt(e)}function Wt(e,t=!1){const n=e.toString().substring(1);return t?n.replaceAll(String.fromCharCode(160)," "):n}const Gt=(e,t)=>{const n=!t.endContainer.textContent;t.insertNode(Ft());t.setStartAfter(Ft());se(t);n||e.selection.setCursorLocation(t.endContainer,t.endOffset)},Kt=(e,t,n)=>{const o=X(ne);me($t(X(J),t.length));ae(t);if(!o){Gt(e,n);le(!0);me(0)}};function Yt(e){const t=e.autoCompleteCommands;return Object.keys(t)}function Xt(e){Bt(e);je()}function Zt(e){const t=Mt.nextSibling,n=null==t?void 0:t.textContent;if(null!=n&&n.startsWith("/")){Mt.parentElement.textContent===n?e.dom.replace(document.createElement("br"),t):t.textContent=""}Xt(e)}function Qt({brandVoiceOptions:e,editor:t,insertContent:n,InlineAutocompleteMenu:o}){const r=Y(_t),a=Ce(t),s=t.selection&&!t.selection.isCollapsed(),l=Object(i.useCallback)((e,n={},o=G.k)=>{const r=Object.assign({actionType:G.o},n);Object(Ie.b)(t,o,e,r)},[t]),c=()=>{Pt(null);Bt(t);pe()},u=e=>{n(e);c()},d=Boolean(r)&&a;let f="";const p=X(te);d&&(f=s?Object(Ae.c)(t,p):Object(Ae.d)(t,p));return Object(Ye.jsx)(Re.a,{placement:"bottom right",editor:t,open:d,animateOnToggle:!1,use:"unstyled",onRemove:c,target:Ft(),renderContent:()=>Object(Ye.jsx)(o,{brandVoiceOptions:e,currentCommand:r,editorContext:f,onPromptComplete:u,trackInteraction:l,onClose:c})})}const Jt=(e,t)=>{function n(t){const n=Te(t);zt(e,n)}const o=Object(wt.a)(e,"ContentAssistantAutocompleteMenu","`ContentAssistantAutocompleteMenu` picker component is required for the content generation plugin");p.a.canvas.addPopover(e,B.b+"generative",{renderPopover:r=>Object(Ye.jsx)(Qt,Object.assign({brandVoiceOptions:t,"data-test-id":"hs-content-generation-autocomplete-command",editor:e,insertContent:n,InlineAutocompleteMenu:o},r))})},en=()=>{ie(!1);ae(null);de();le(!1)},tn=(e,t)=>{Pt(t);fe()};function nn(e,t){return t.map(t=>({label:Object(Ye.jsx)(ft.a,{message:t.labelKey}),commandFilterPrompt:Nt.a.text(t.labelKey),id:t.id,onSelect:()=>{en();t.id===Lt.id?e.fire("hsimage:openGeneratePanel"):tn(e,t);Object(Ie.b)(e,G.k,G.m,{actionType:G.o,selected:t.id})}}))}function on(e,t,n){if(!t.length)return;const o=nn(e,t),r={trigger:Rt,getFilteredCommands:e=>o.filter(t=>t.commandFilterPrompt.toLowerCase().includes(e.toLowerCase()))};p.a.canvas.addAutocompleteCommand(e,r);Jt(e,n)}var rn=n(1267),an=n(324),sn=n(283),ln=n(1),cn=n.n(ln),un=n(2827),dn=n(701),fn=n(479),pn=n(2712),mn=n(2654),hn=n(1261);const gn=["subMenu"],bn=e=>`${e.settings.appUrl}/settings/${cn.a.get()}/ai-assistants`,vn=(e,t)=>`${e.settings.appUrl}/settings/${cn.a.get()}/account-defaults/branding/brand-kit/${t||"primary"}/brand-voice`,yn=e=>{const{scopes:t}=e.settings;return Object(wt.b)(It,t)},Cn=({editor:e,isDisabled:t,isSuperAdmin:n})=>t?n?Object(Ye.jsx)(sn.a,{message:"TinymcePlugins.hscontentgeneration.toolbar.buttonDisabled.superAdmin_jsx",elements:{UILink:pn.a},options:{onClick:()=>{Object(Ie.b)(e,G.k,G.j);window.open(bn(e))},external:!0}}):Object(Ye.jsx)(ft.a,{message:"TinymcePlugins.hscontentgeneration.toolbar.buttonDisabled.default"}):Object(Ye.jsx)(ft.a,{message:"TinymcePlugins.hscontentgeneration.menuItem"}),On=l.a.div.withConfig({displayName:"ContentAssistantSlashAndSelectionCommandsToolbarManager__GenerateLabel",componentId:"sc-1tdoenm-0"})(["background-color:",";padding:8px 20px;font-weight:500;pointer-events:none;border-radius:3px 3px 0;"],an.GYPSUM);function xn(e,t,n){return[{render:()=>Object(Ye.jsxs)(On,{children:[n?Object(Ye.jsx)(z.a,{name:"breezeSingleStar",className:"m-right-2",style:{marginLeft:-4,transform:"translateY(-1px)"}}):Object(Ye.jsx)(z.a,{name:"artificialIntelligence",className:"m-right-1",style:{marginLeft:-4}}),Object(Ye.jsx)(ft.a,{message:"TinymcePlugins.hscontentgeneration.toolbar.generateLabel"})]})},...t.map(t=>({name:t.commandId||t.id,onClick:()=>{t.id===Lt.id?e.fire("hsimage:openGeneratePanel"):tn(e,t);Object(Ie.b)(e,G.k,G.q,{actionType:G.o,selected:t.commandId||t.id})},text:Object(Ye.jsx)(ft.a,{message:t.labelKey})}))]}function jn(e,t,n){if(!e.disabled||"baseContentGenerationModal.inlineToolbar.options.brandVoice"!==e.labelKey)return;const{brandKitId:o,isSetUp:r=!1,isEnabledForApp:i=!1}=n||{};return Object(Ye.jsx)(sn.a,{message:r&&!i?"TinymcePlugins.hscontentgeneration.brandVoiceDisabledForAppTooltip_jsx":"TinymcePlugins.hscontentgeneration.brandVoiceNotSetUpTooltip_jsx",elements:{UILink:pn.a},options:{onClick:()=>window.open(vn(t,o),"_blank"),external:!0}})}function Sn(e,t,n){return t.map(t=>{const{subMenu:o}=t,r=Object(d.a)(t,gn),i=Object.assign({},r,{shouldFetchContentOnModalOpen:!0});if(o)return{text:Object(Ye.jsx)(ft.a,{message:i.labelKey}),name:i.commandId,child:o.map(t=>{i.parameters=t.parameters;const n=t.parameters.toneOfVoice;return{label:Object(Ye.jsx)(ft.a,{message:t.labelKey}),name:n,onClick:()=>{tn(e,i);Object(Ie.b)(e,G.k,G.q,{actionType:G.n,selected:i.commandId,choice:n})}}})};const a=jn(i,e,n),s=i.disabled&&a?Object(Ye.jsxs)("div",{children:[Object(Ye.jsx)(ft.a,{message:i.labelKey}),Object(Ye.jsx)(fn.a,{className:"m-left-1",title:a,tooltipPlacement:"right"})]}):Object(Ye.jsx)(ft.a,{message:i.labelKey}),{isSetUp:l=!1,isEnabledForApp:c=!1}=n||{};return{disabled:i.disabled,text:s,name:i.commandId,onClick:()=>{tn(e,i);Object(Ie.b)(e,G.k,G.q,{actionType:G.n,selected:i.commandId,usingBrandVoice:l&&c})}}})}const wn=({brandVoiceOptions:e,editor:t,slashCommands:n,selectionCommands:o,isHighlightingText:r,isSuperAdmin:i,isUngatedForBreeze:a})=>{let s;s=r?Sn(t,o,e):xn(t,n,a);if(!i)return s;s.push({render:dn.a});const l=()=>{Object(Ie.b)(t,G.k,G.j,{actionType:r?G.n:G.o})};s.push({name:"settings",icon:"settings",text:Object(Ye.jsx)(pn.a,{external:!0,onClick:l,href:bn(t),children:Object(Ye.jsx)(ft.a,{message:"TinymcePlugins.hscontentgeneration.toolbar.settings"})})});return s},Tn=({brandVoiceOptions:e,editor:t,isDisabled:n,slashCommands:o,selectionCommands:r})=>{const[a,s]=Object(i.useState)(!1),[l,c]=Object(i.useState)([]),u=Ce(t),d=yn(t),f=tt(),p=Object(i.useCallback)(()=>{const n=Ne(t),i=t.selection.getRng().cloneRange(),l=X(_t);if(!a){c(wn({brandVoiceOptions:e,editor:t,slashCommands:o,selectionCommands:r,isHighlightingText:n,isSuperAdmin:d,isUngatedForBreeze:f}));u&&je();if(n){ke(t,Ft());se(i)}else Gt(t,i)}a&&!l&&je();s(!a)},[e,t,u,a,d,r,o,f]),m=Ne(t);return Object(Ye.jsx)(mn.a,{placement:"bottom",disabled:a,title:Object(Ye.jsx)(Cn,{editor:t,isDisabled:n,isSuperAdmin:d}),children:Object(Ye.jsx)(hn.a,{selected:a,children:Object(Ye.jsx)(un.a,{buttonClassName:"mce-content-assistant-button","data-test-id":"content-assistant-button",iconName:"artificialIntelligence",onOpenChange:p,dropdownClassName:"mce-hubspot-menu mce-content-assistant-menu "+(m?"mce-ca-select":"mce-ca-slash"),menuItems:l,disabled:n,style:{margin:0,padding:0},popoverProps:{arrowColor:m?an.OLAF:an.GYPSUM}})})})},kn=(e,t,n,o,r={})=>{p.a.canvas.addMenuItem(e,rn.s,{text:Nt.a.text("TinymcePlugins.hscontentgeneration.menuItem"),disabled:o,onClick:()=>{if(e.selection&&!e.selection.isCollapsed())e.fire("hscontentgeneration:openSelectionPopover");else{const n=nn(e,t);e.fire("hscontentgeneration:openSlashPopover",{filteredCommands:n})}}});p.a.canvas.addButton(e,rn.s,{renderControl:()=>Object(Ye.jsx)(Tn,{brandVoiceOptions:r,editor:e,isDisabled:o,slashCommands:t,selectionCommands:n})})};function Nn(e){const{[At.IS_DISABLED]:t,[At.SELECTION_COMMANDS]:n=[],[At.BRAND_VOICE_OPTIONS]:o={}}=Object(Ee.f)(e,Et,{});let{[At.SLASH_COMMANDS]:r=[]}=Object(Ee.f)(e,Et,{});Object(q.e)(e,H.d.USE_IMAGE_GENERATION_SLASH_COMMAND)?r.find(e=>e.id===Lt.id)||(r=[...r,Lt]):r=r.filter(e=>e.id!==Lt.id);kn(e,r,n,t,o);if(!t){kt(e,n,o);on(e,r,o)}}p.a.PluginManager.add(B.b,Nn);const En="<<hstemp<<",An=">>hstemp>>";function In(e,t){let n="";e.undoManager.ignore(()=>{const o=t.cloneRange(),r=document.createTextNode(En),i=document.createTextNode(An);o.insertNode(r);o.collapse(!1);o.insertNode(i);n=e.getContent({format:"text"});r.remove();i.remove();t.commonAncestorContainer.normalize()});return n}function Rn(e,t){return In(e,t).replace(En,"<<").replace(An,">>")}function Ln(e){return e.selection&&!e.selection.isCollapsed()}function _n(e,t){return`${e.settings.appUrl}/settings/${cn.a.get()}/account-defaults/branding/brand-kit/${t||"primary"}/brand-voice`}function Pn(e){return"baseContentGenerationModal.inlineToolbar.options.brandVoice"===e.labelKey}function Mn({command:e,brandVoiceOptions:t,brandVoiceSettingsLink:n}){const{isSetUp:o=!1,isEnabledForApp:r=!1}=t;return e.disabled?Object(Ye.jsxs)("div",{children:[Object(Ye.jsx)(ft.a,{message:e.labelKey}),Object(Ye.jsx)(fn.a,{className:"m-left-1",title:Object(Ye.jsx)(sn.a,{"data-mce-hs-tooltip":"true",message:o&&!r?"TinymcePlugins.hscontentgeneration.brandVoiceDisabledForAppTooltip_jsx":"TinymcePlugins.hscontentgeneration.brandVoiceNotSetUpTooltip_jsx",elements:{UILink:pn.a},options:{onClick:()=>{window.open(n,"_blank")},external:!0}}),tooltipProps:{innerClassName:"mce-prevent-tinymce-blur"},tooltipPlacement:"right"})]}):Object(Ye.jsx)(ft.a,{message:e.labelKey})}const Dn=["editor","isDisabled","menuItems"],Bn=["contextualNodeAttributes"],Fn=e=>`${e.settings.appUrl}/settings/${cn.a.get()}/ai-assistants`,Un=e=>{const{scopes:t}=e.settings;return Object(wt.b)(It,t)},Vn=({editor:e,isDisabled:t,isSuperAdmin:n})=>{const o=tt();return t?n?Object(Ye.jsx)(sn.a,{message:"TinymcePlugins.hscopilotcollaboration.toolbar.buttonDisabled.superAdmin_jsx",elements:{UILink:pn.a},options:{onClick:()=>{window.open(Fn(e))},external:!0}}):Object(Ye.jsx)(ft.a,{message:"TinymcePlugins.hscopilotcollaboration.toolbar.buttonDisabled.default"}):Object(Ye.jsx)(ft.a,{message:o?"TinymcePlugins.hscopilotcollaboration.menuItemBreeze":"TinymcePlugins.hscopilotcollaboration.menuItem"})};function Hn(e){let{editor:t,isDisabled:n,menuItems:o}=e,r=Object(d.a)(e,Dn);const[a,s]=Object(i.useState)(!1),l=Object(i.useCallback)(()=>{s(e=>!e)},[]),c=Un(t),u=tt();return Object(Ye.jsx)(mn.a,{placement:"bottom",disabled:a,title:Object(Ye.jsx)(Vn,{editor:t,isDisabled:n,isSuperAdmin:c}),children:Object(Ye.jsx)(hn.a,{selected:a,children:Object(Ye.jsx)(un.a,Object.assign({editor:t,"data-test-id":"insert-gen-select-button",iconName:u?"breezeSingleStar":"artificialIntelligence",buttonClassName:"mce-content-assistant-button",dropdownClassName:"mce-hubspot-menu",onOpenChange:l,style:{margin:0,padding:0}},r,{menuItems:o,disabled:n}))})})}function qn(e,t,n,o=""){return e.subMenu.map(r=>({id:"commandId"in e?e.commandId:e.id,label:`${o}${Nt.a.text(r.labelKey)}`,text:`${o}${Nt.a.text(r.labelKey)}`,onClick:()=>e.onClick(t,r,n)}))}function $n(e,t,n,o,r=!1){const i=Pn(e),a={id:"commandId"in e?e.commandId:e.id,text:i?Object(Ye.jsx)(Mn,{command:e,brandVoiceOptions:o,brandVoiceSettingsLink:_n(t,o.brandKitId)}):Nt.a.text(e.labelKey),label:i?Object(Ye.jsx)(Mn,{command:e,brandVoiceOptions:o,brandVoiceSettingsLink:_n(t,o.brandKitId)}):Nt.a.text(e.labelKey),child:void 0,onClick:()=>e.onClick(t,e,n),disabled:e.disabled};if(r&&"subMenu"in e&&e.subMenu)return qn(e,t,n,a.text+": ");if("subMenu"in e&&e.subMenu){a.onClick=()=>{};a.child=()=>qn(e,t,n)}return a}const zn=l.a.div.withConfig({displayName:"controls__GenerateLabelWrapper",componentId:"d4hwmc-0"})(["font-weight:500;padding:8px 20px;pointer-events:none;border-radius:3px 3px 0;"]);function Wn(){return Object(Ye.jsx)(zn,{children:Object(Ye.jsx)(ft.a,{message:"TinymcePlugins.hscopilotcollaboration.toolbar.generateLabel"})})}const Gn={name:"generate",disabled:!0,render:Wn,label:Object(Ye.jsx)(Wn,{}),use:"unstyled",id:"__hs-tinymce-ai-assistant-settings",className:"mce-generate-divider"},Kn=(e,t,n,o,r,i)=>{const a=n.flatMap(t=>$n(t,e,"highlight",r,!0)),s=o.flatMap(t=>$n(t,e,"slash",r));Object(wt.c)(e,Object(Ge.a)("BreezeAI:Rebranding"))&&s.unshift(Gn);const l=n.flatMap(t=>$n(t,e,"highlight",r));if(i){const t={render:dn.a},n={name:"settings",icon:"settings",text:Object(Ye.jsx)(pn.a,{external:!0,href:Fn(e),children:Object(Ye.jsx)(ft.a,{message:"TinymcePlugins.hscontentgeneration.toolbar.settings"})}),label:Object(Ye.jsx)(pn.a,{external:!0,href:Fn(e),children:Object(Ye.jsx)(ft.a,{message:"TinymcePlugins.hscontentgeneration.toolbar.settings"})}),id:"__hs-tinymce-ai-assistant-settings"},o=Object.assign({},n,{className:"mce-copilot-settings"});a.push(o);s.push(t,n);l.push(t,n)}const c=()=>Ln(e)?a:s;p.a.canvas.addMenuItem(e,rn.t,{text:Nt.a.text("TinymcePlugins.hscopilotcollaboration.menuItem"),disabled:t,child:t?void 0:c});p.a.canvas.addButton(e,rn.t,{renderControl:n=>{var o;const r=Object(d.a)(n,Bn),i=Ln(e)?l:s,a=null!==(o=e.settings.gates)&&void 0!==o?o:[];return Object(Ye.jsx)(Ze,{gates:a,children:Object(Ye.jsx)(Hn,Object.assign({},r,{editor:e,menuItems:i,isDisabled:t}))})}})};var Yn=n(2675);const Xn=Object(Se.a)(W.a),Zn=e=>{const t=e.selection.getSel(),n=t.anchorNode!==t.focusNode&&0===t.focusOffset;if(!t||0===t.rangeCount)return null;const o=t.getRangeAt(0).getClientRects();let r=o.length-1;if(n){const e=t.focusNode;if(e.getBoundingClientRect){const t=e.getBoundingClientRect(),n=o[o.length-1];t.bottom===n.bottom&&r--}}r=Math.max(r,0);return o[r]},Qn=e=>Object(i.useCallback)(({contentDimensions:t})=>{const n=Zn(e),o={top:0,left:0,right:0,bottom:0};if(!n)return o;const r=10;o.right=n.right+r+t.width;o.left=o.right-t.width;const i=n.top+n.height/2;o.top=i-t.height/2;o.bottom=i+t.height/2;const a=e.getWin();if(a&&a.document!==document){const t=e.getContainer();if(!t)return{};const n=t.getBoundingClientRect();o.top+=n.top;o.bottom+=n.bottom;o.left+=n.left;o.right+=n.right}const s=document.body.getBoundingClientRect(),l=s.top+document.documentElement.scrollTop;o.top=o.top-s.top+l;o.bottom=o.bottom-s.top+l;o.left=o.left-s.left;o.right=o.right-s.left;return o},[e]);function Jn({onMouseDown:e,onClick:t,visible:n}){return tt()?Object(Ye.jsxs)(ut,{onMouseDown:e,className:"mce-content-gen-toolbar",onClick:t,use:"secondary",usageTracker:at,size:"xs",children:[Object(Ye.jsx)(ft.a,{message:"TinymcePlugins.hscopilotcollaboration.refine"}),Object(Ye.jsx)(dt.a,{})]}):Object(Ye.jsx)($.a,{onMouseDown:e,className:"mce-content-gen-toolbar",onClick:t,size:"small",shape:"circle",style:n?{visibility:"visible"}:{visibility:"hidden",position:"relative",top:"-0.75em",left:"-2em"},children:Object(Ye.jsx)(z.a,{name:"artificialIntelligence",style:{position:"relative",top:-1}})})}const eo=({onClick:e,editor:t,onRemove:n,visible:o=!0})=>{const r=Qn(t),a=Object(i.useCallback)(e=>{e.preventDefault()},[]),s=t.getBody();return Object(Ye.jsx)(Xn,{editor:t,target:s,computePosition:r,"data-test-id":"content-assistance-selection",onRemove:n,content:Object(Ye.jsx)(Jn,{onClick:e,onMouseDown:a,visible:o})})};function to(e,t,n,o){const r=Pn(e),i={id:e.id,label:r?Object(Ye.jsx)(Mn,{command:e,brandVoiceOptions:o,brandVoiceSettingsLink:_n(t,o.brandKitId)}):Nt.a.text(e.labelKey),onClick:()=>{e.onClick(t,e,"highlight");n()},disabled:e.disabled};if(e.subMenu){delete i.onClick;i.options=e.subMenu.map(o=>({id:o.id,label:Nt.a.text(o.labelKey),onClick:()=>{e.onClick(t,o,"highlight");n()}}));i.dropdownClassName="mce-prevent-tinymce-blur"}return i}const no=({editor:e,commands:t,onClosePopover:n,setEditorContext:o,brandVoiceOptions:r})=>{const[a,s]=Object(i.useState)(!1),l=Object(i.useCallback)(()=>e.fire("hsRemoveInlineTargets"),[e]),c=tt(),u=Object(i.useCallback)((t,n={},o=G.k)=>{const r=Object.assign({actionType:G.n},n);Object(Ie.b)(e,o,t,r)},[e]);Object(i.useEffect)(()=>{u(G.p)},[u]);const d=Object(i.useCallback)(()=>{if(a)s(!1);else{s(!0);o();l();u(G.l)}},[a,o,l,u]);Object(i.useEffect)(()=>{const t=()=>{d()};e.on("hscontentgeneration:openSelectionPopover",t);return()=>{e.off("hscontentgeneration:openSelectionPopover",t)}},[e,d]);const f=Object(i.useCallback)(()=>Object(Ye.jsx)(eo,{editor:e,onRemove:n,onClick:d,visible:!a}),[e,d,n,a]),p=Object(i.useMemo)(()=>t.map(t=>to(t,e,()=>s(!1),r)),[r,t,e]);return Object(Ye.jsx)(i.Fragment,{children:Object(Ye.jsx)(Yn.a,{Button:f,buttonSize:"xs",arrowSize:c?"none":"medium",buttonUse:"unstyled",open:a,use:"unstyled",dropdownClassName:"mce-prevent-tinymce-blur private-dropdown--list",options:p})})},oo=e=>{const[t,n]=Object(i.useState)("false"),o=Object(i.useCallback)(()=>{n(!0)},[]),r=Object(i.useCallback)(()=>{n(!1)},[]);Object(i.useEffect)(()=>{e.on("activate",o);e.on("deactivate",r);return()=>{e.off("activate",o);e.off("deactivate",r)}},[e,o,r]);return{isActive:t}},ro=e=>{const[t,n]=Object(i.useState)(""),[o,r]=Object(i.useState)(""),[a,s]=Object(i.useState)(!1),l=Object(i.useCallback)(()=>{const t=e.selection.getRng(),n=Rn(e,t);r(n);e.selection.setRng(t)},[e]),{onMouseDown:c,onMouseUp:u,handleSelectionChange:d}=Object(i.useMemo)(()=>{let t=!1;function o(){t=!0;s(!0)}function i(){t=!1;const o=e.selection.getContent({format:"text"}),i=e.selection.isCollapsed();if(Object(Ee.h)(o)||i){n("");r("")}else n(o)}function a(){s(!1);if(t){t=!1;i()}}return{onMouseDown:o,onMouseUp:a,handleSelectionChange:i}},[e]),f=Object(i.useCallback)(()=>{n("");r("")},[]);Object(i.useEffect)(()=>{e.on("NodeChange",d);e.on("mousedown",c);e.on("mouseup",u);window.addEventListener("mouseup",u);return()=>{e.off("NodeChange",d);e.off("mousedown",c);e.off("mouseup",u);window.removeEventListener("mouseup",u)}},[c,u,d,e]);return{selectionText:t,editorContext:o,setEditorContext:l,resetSelection:f,isUpdatingSelectionByMouse:a}},io=({commands:e,editor:t,brandVoiceOptions:n})=>{const{selectionText:o,resetSelection:r,editorContext:i,setEditorContext:a,isUpdatingSelectionByMouse:s}=ro(t);return e&&0!==e.length?!o||t.id!==p.a.activeEditor.id||s?null:Object(Ye.jsx)(no,{editor:t,editorContext:i,commands:e,selectedText:o,onClosePopover:r,setEditorContext:a,brandVoiceOptions:n}):null};var ao=({editor:e,brandVoiceOptions:t,commands:n})=>{var o;const{isActive:r}=oo(e),i=Y(te);if(!r||i)return null;const a=null!==(o=e.settings.gates)&&void 0!==o?o:[];return Object(Ye.jsx)(Ze,{gates:a,children:Object(Ye.jsx)(io,{commands:n,editor:e,brandVoiceOptions:t})})};const so=(e,t,n)=>{p.a.canvas.addPopover(e,B.d,{renderPopover:o=>Object(Ye.jsx)(ao,Object.assign({brandVoiceOptions:n,"data-test-id":"highlight-commands-popover",commands:t,editor:e},o))})};function lo(e,t,n){so(e,t,n)}function co(e,t){const n=t.map(t=>Object.assign({},t,{label:Nt.a.text(t.labelKey),onSelect:()=>t.onClick(e,t,"slash")})),o={trigger:Rt,getFilteredCommands:e=>n.filter(t=>t.label.toLowerCase().includes(e.toLowerCase()))};p.a.canvas.addAutocompleteCommand(e,o)}var uo=n(539);const fo="clearInternalActiveEditorAtom",po=(new CustomEvent(fo),Object(K.a)(null));function mo(){return X(po)}function ho(e){Object(K.f)(po,()=>e)}function go(e){Object(K.h)(po,e);return()=>{Object(K.g)(po,e)}}const bo=Object(K.a)(!1);function vo(){p.a.focusedEditor||Object(K.f)(po,()=>null)}function yo(){if(!X(bo)){document.addEventListener(fo,vo);Object(K.f)(bo,()=>!0)}}function Co(e,t,n,o){var r,i;n=null!==(r=n)&&void 0!==r?r:"focusin";o=null!==(i=o)&&void 0!==i?i:"focusout remove";const a=Object(uo.a)(()=>{Oo(t)},100);for(const t of n.split(" ")){e.on(t,a);e.on(t,()=>{ho(e)})}for(const t of o.split(" "))e.on(t,a);e.on("NodeChange",a);yo();const s=go(a);e.on("remove",s)}function Oo(e){const t=mo(),n=!!t;e({hasFocus:n,hasSelection:n&&Ln(t)})}function xo(e,t,n){const o=(e,o)=>{wo(e,n);t(e,o,n)};return e.map(e=>Object.assign({},e,{onClick:o}))}function jo(e,t){return xo(e,t,"slash")}function So(e,t){return xo(e,t,"highlight")}function wo(e,t){"slash"===t&&Zt(e)}function To(e){const t=Object(Ee.f)(e,Et),{[At.IS_DISABLED]:n,[At.SELECTION_COMMANDS]:o=[],[At.SLASH_COMMANDS]:r=[],[At.COPILOT_COLLAB_CONTEXT_VALUE]:i,[At.BRAND_VOICE_OPTIONS]:a={}}=t,{scopes:s}=e.settings,l=Object(wt.b)(It,s);if(n)Kn(e,n,[],[],a,l);else{if(!i)throw new Error("No copilotCollabContextValue passed to hsCopilotCollaborationPlugin");const{commandHandler:t,focusHandler:s}=i;if(!t)throw new Error("No commandHandler passed to copilotCollabContextValue");if(!s)throw new Error("No focusHandler passed to copilotCollabContextValue");const c=So(o,t),u=jo(r,t);Kn(e,n,c,u,a,l);lo(e,c,a);co(e,u);Co(e,s,e.settings.focusEvents,e.settings.blurEvents)}}p.a.PluginManager.add(B.d,To);const ko="/do-not-load/";var No=n(1282),Eo=n(1294),Ao=n(2815),Io=n(753),Ro=n(1257),Lo=n(1258);const _o={};function Po(e){const t=Object(Lo.b)(e.get,Ro.a.FILE_RESOLVE.getUrl,_o);return function(e){return t("",{query:{url:e,allowRedirects:!0}})}}const Mo=(e,t)=>{let n="";try{n=atob(e)}catch(e){return new Blob([])}const o=new Uint8Array(n.length);for(let e=0;e<o.length;e++)o[e]=n.charCodeAt(e);return new Blob([o],{type:t})},Do=(e,t=!1)=>{const{file:n,base64:o}=e;return{fileData:n.size&&!t?n:Mo(o,n.type),fileName:n.name}};function Bo(e,t,n,o=Io.a.VISIBLE_IN_APP_PUBLIC_TO_ALL_INDEXABLE){const{fileData:r,fileName:i}=e;let a;a=File?new File([r],i):r;return Object(Ao.a)(a,o,{fileName:i},{updateProgress:t,httpClient:n}).then(e=>e.toJSON())}const Fo=(e,t,n,o)=>Bo(Do(n),o,e,t),Uo=(e,t,n="",o)=>Promise.all(Array.from(e.getElementsByTagName("img")).filter(e=>!e.src.includes("hubspotusercontent")).map(e=>{const r=e.src,i={folderPath:"Rich Text Pasting",name:`${n}-${Date.now()}`,overwrite:!1,url:r,access:o};return t.post(Ro.a.FILE_UPLOAD_URL.getUrl(),{data:i}).then(e=>({originalUrl:r,fileManagerUrl:e.url}))}));function Vo({uploadFile:e,trackInteraction:t,usageTracker:n,appName:o,inpage:r,stripImageBlobs:i}){const a=Object(Ie.a)({usageTracker:n,trackInteraction:t,appName:o,inpage:r});return function(t,n,o,r){const s=e=>{const r=e.objects[0];o(r.url);const i=`img[src="${n.blobUri()}"]`,a=t.dom.select(i)[0];if(a){a.setAttribute("width",r.width);a.setAttribute("height",r.height)}t.fire("change");t.fire("uploadComplete")},l=e=>{console.error(e);r(e);t.fire("uploadFailure")},c=e=>{const n=Math.round(e.loaded/e.total*90);t.fire("uploadProgress",{percentLoaded:n})},u=n.blob();if("image/svg+xml"!==u.type)if(i){const e=`img[src="${n.blobUri()}"][data-mce-paste]`,o=t.dom.select(e);if(o.length>0){t.dom.remove(o);t.fire("change");t.editorUpload.blobCache.removeByUri(n.blobUri());t.fire("openDisallowedImageUploadAlert");l(new Error("Image upload failed due to missing `file-manager-write` scope"))}}else{e({file:u,base64:n.base64()},c).then(s).catch(l);a("tinymceEdit",G.b)}}}var Ho=n(30),qo=n.n(Ho),$o=n(1240),zo=n(1247);const Wo={[zo.b.LEFT]:{float:"left","margin-left":"0px","margin-right":"10px",display:"block"},[zo.b.CENTER]:{float:null,"margin-left":"auto","margin-right":"auto",display:"block"},[zo.b.RIGHT]:{float:"right","margin-left":"10px","margin-right":"0px",display:"block"},[zo.b.NONE]:{float:null,"margin-left":"0px","margin-right":"0px",display:"inline-block"}},Go="hsMedia",Ko={DISABLE_ALIGNMENT:"mediaDisableAlignment",DISABLE_SPACING:"mediaDisableSpacing",DEFAULT_STYLES:"mediaDefaultStyles",MAX_DIMENSION_WIDTH:"mediaMaxDimensionWidth"},Yo={WIDTH:560,HEIGHT:315},Xo=540,Zo=256,Qo="hs-responsive-embed",Jo="hs-responsive-embed-iframe",er="hs-responsive-embed-wrapper",tr="hs-responsive-embed-inner-wrapper",nr="hs-fullwidth-embed",or="hs-embed-wrapper",rr="hs-embed-inner-wrapper",ir="hs-embed-content-wrapper",ar="hsCode",sr={USE_DYNAMIC_CSS_LOADING:"useDynamicCssLoading",DISABLED_TOOLTIP:"disabledTooltip"};var lr=n(1246),cr=n(1243),ur=n(1244);const dr={[zo.b.LEFT]:{float:"left","margin-right":"20px"},[zo.b.CENTER]:{margin:"0 auto",display:"block","margin-top":"20px","margin-bottom":"20px"},[zo.b.RIGHT]:{float:"right","margin-left":"20px"},[zo.b.NONE]:{float:null,margin:"0"}},fr={[zo.b.LEFT]:"justifyleft",[zo.b.CENTER]:"justifycenter",[zo.b.RIGHT]:"justifyright"},pr=/\{\{\s*cta\(([^)]+)\)\s*\}\}/gi,mr=()=>new RegExp(pr),hr="hsCta";var gr=n(1251);const br="marketing-video",vr="cta-access",yr="forms-read",Cr="hsVideo",Or={DISABLE_SPACING:"videoDisableSpacing",DISABLE_ALIGNMENT:"videoDisableAlignment",MAX_DIMENSION_WIDTH:"videoMaxDimensionWidth",USE_EMBED:"videoUseEmbed",ENABLE_FULL_WIDTH:"videoEnableFullWidth",USE_CONVERSION_ASSET_OPTIONS_PANEL:"useConversionAssetOptionsPanel"},xr={VIDYARD:"scriptV4",HSVIDEO2:"hsvideo2"},jr={[zo.b.LEFT]:"hs-table-align-left",[zo.b.RIGHT]:"hs-table-align-right",[zo.b.CENTER]:"hs-table-align-center",[zo.b.NONE]:"hs-table-align-none"},Sr=["top","middle","bottom"],wr=["left","center","right"],Tr="hsTableV2",kr={MAX_DIMENSION_WIDTH:"maxTableWidth",HIDE_CELL_COLOR_OPTIONS:"hideCellColorOptions",DEFAULT_CELL_STYLES:"defaultCellStyles",USE_ALIGNMENT_CLASSES:"useAlignmentClasses",USE_RESPONSIVE_TABLES:"useResponsiveTables",DISABLE_SPACING:"tableDisableSpacing"},Nr={[zo.b.LEFT]:{float:"left","margin-left":"0px","margin-right":"10px",display:null},[zo.b.CENTER]:{float:null,"margin-left":"auto","margin-right":"auto",display:null},[zo.b.RIGHT]:{float:"right","margin-left":"10px","margin-right":"0px",display:null},[zo.b.NONE]:{float:null,"margin-left":null,"margin-right":null,display:null}},Er={alignleft:zo.b.LEFT,alignright:zo.b.RIGHT,aligncenter:zo.b.CENTER,alignfull:zo.b.NONE};n(1562),n(1564),n(1566),n(1568),n(1570),n(1572),n(1228),n(1574),n(1576),n(1578);var Ar=n(2591),Ir=n(1215);const Rr={Advanced:"Advanced",Alignment:"Alignment",Anchor:"Anchor",Anchors:"Anchors",Author:"Author","Background color":"Background color",Blockquote:"Blockquote",Blocks:"Blocks",Body:"Body",Bold:"Bold",Border:"Border","Bullet list":"Bullet list",Cancel:"Cancel",Caption:"Caption",Cell:"Cell","Cell padding":"Cell padding","Cell properties":"Cell properties","Cell spacing":"Cell spacing","Cell type":"Cell type",Center:"Center",Circle:"Circle","Clear formatting":"Clear formatting",Close:"Close",Code:"Code",Cols:"Cols",Column:"Column","Column group":"Column group","Constrain proportions":"Constrain proportions",Copy:"Copy","Copy row":"Copy row","Could not find the specified string.":"noStringMatch",Cut:"Cut","Cut row":"Cut row","Decrease indent":"Decrease indent",Default:"Default","Delete column":"Delete column","Delete row":"Delete row","Delete table":"Delete table",Description:"Description",Dimensions:"Dimensions",Disc:"Disc",Div:"Div","Document properties":"Document properties",Edit:"Edit",Embed:"Embed",Emoticons:"Emoticons",Encoding:"Encoding",File:"File",Find:"Find","Find and replace":"Find and replace",Finish:"Finish","Font Family":"Font Family","Font Sizes":"Font Sizes",Footer:"Footer",Format:"Format",Formats:"Formats",Fullscreen:"Fullscreen",General:"General",Header:"Header","Header cell":"Header cell",Headers:"Headers",Height:"Height","Horizontal line":"Horizontal line","Horizontal space":"Horizontal space",Ignore:"Ignore","Ignore all":"Ignore all","Image description":"Image description","Increase indent":"Increase indent",Inline:"Inline",Insert:"Insert","Insert column after":"Insert column after","Insert column before":"Insert column before","Insert row after":"Insert row after","Insert row before":"Insert row before","Insert table":"Insert table","Insert template":"Insert template",Keywords:"Keywords",Left:"Left","Left to right":"Left to right","Match case":"Match case","Merge cells":"Merge cells",Name:"Name","New document":"New document","New window":"New window",Next:"Next","Nonbreaking space":"Nonbreaking space",None:"None","Numbered list":"Numbered list",OK:"OK",Ok:"Ok","Page break":"Page break",Paragraph:"Paragraph",Paste:"Paste","Paste as text":"Paste as text","Paste row after":"Paste row after","Paste row before":"Paste row before","Paste your embed code below:":"Paste your embed code below",Poster:"Poster",Pre:"Pre",Prev:"Prev",Preview:"Preview",Print:"Print",Redo:"Redo",Replace:"Replace","Replace all":"Replace all","Replace with":"Replace with",Right:"Right","Right to left":"Right to left",Robots:"Robots",Row:"Row","Row group":"Row group","Row properties":"Row properties","Row type":"Row type",Rows:"Rows",Save:"Save",Scope:"Scope","Select all":"Select all","Show blocks":"Show blocks","Show invisible characters":"Show invisible characters",Source:"Source","Source code":"Source code","Special character":"Special character",Spellcheck:"Spellcheck","Split cell":"Split cell",Square:"Square",Style:"Style",Table:"Table","Table properties":"Table properties",Target:"Target",Templates:"Templates","Text color":"Text color","Text to display":"Text to display",Title:"Title",Tools:"Tools",Underline:"Underline",Undo:"Undo","Upper Alpha":"Upper Alpha","Upper Roman":"Upper Roman",Url:"Url","Vertical space":"Vertical space",View:"View","Visual aids":"Visual aids","Whole words":"Whole words",Width:"Width","Words: {0}":"Words: {0}"};p.a.ScriptLoader.markDone(ko);const Lr="TinymceUI";function _r(e){const{directionality:t="ltr",language:n="en"}=e.settings,o=()=>{const e=Object(Ir.f)(e=>Nt.a.text(`${Lr}.${e}`),Rr);p.a.addI18n(n,Object.assign({_dir:t},e))};!!Nt.a.Info?Nt.a.Info.then(o):o()}const Pr=B.w;p.a.PluginManager.add(Pr,_r);var Mr=n(1245),Dr=n(1223);const Br="hsHR",Fr={DISABLE_INSERTION:"disableInsertion"},Ur={tip:{accentColor:an.CALYPSO_MEDIUM,backgroundColor:an.CALYPSO_LIGHT},note:{accentColor:an.OZ_MEDIUM,backgroundColor:an.OZ_LIGHT},caution:{accentColor:an.CANDY_APPLE_MEDIUM,backgroundColor:an.CANDY_APPLE_LIGHT},warning:{accentColor:an.SORBET_DARK,backgroundColor:an.BUTTON_SECONDARY_ACTIVE_FILL}},Vr="data-hs-callout-type",Hr=`${"div"}[${Vr}]`,qr="hs-callout-type";Object.keys(Ur).map(e=>`${qr}-${e}`).join(" ");function $r(e,t){return e.dom.getParent(t,Hr,e.getBody())}function zr(e,t){const n=Object(Ee.f)(e,Br);return n?n[t]:null}function Wr(e,t,n){return!!e.dom.getParent(t,e=>e.nodeName===n,e.getBody())}function Gr(e){if(zr(e,Fr.DISABLE_INSERTION)){const t=()=>{const t=e.selection.getNode(),n=!!$r(e,t),o=Wr(e,t,"PRE"),r=Wr(e,t,"BLOCKQUOTE");e.fire(Dr.c,{name:"hshr",disabled:n||o||r})};e.on("NodeChange",t)}}const Kr=Object(Mr.a)("TinymcePlugins.hshr");function Yr(e){const t=()=>{e.execCommand("mceInsertContent",!1,"<hr />");Object(Ie.b)(e,"tinymceCommand",G.H)};p.a.canvas.addMenuItem(e,rn.B,{text:Kr("menuItem"),onClick:t});Gr(e)}const Xr=B.v;p.a.PluginManager.add(Xr,Yr);const Zr="&nbsp;",Qr=Object(Mr.a)("TinymcePlugins.hsnonbreaking");function Jr(e){const t=()=>{e.execCommand("mceInsertContent",!1,Zr);Object(Ie.b)(e,"tinymceCommand",G.O)};p.a.canvas.addMenuItem(e,rn.L,{text:Qr("menuItem"),onClick:t})}const ei=B.H;p.a.PluginManager.add(ei,Jr);var ti=n(180),ni=n(695),oi=n(0),ri=n.n(oi);const ii="mce-layer-root";let ai;const si=()=>{if(!ai){ai=document.createElement("div");ai.className=ii}document.body.appendChild(ai);return ai};let li=null;function ci(e,t,n,o){if(!li){const t=Object(Ee.a)(e,"filemanager-modal-container");if(!t){console.error("Could not append div to editor. Failed to open file manager.");return}li=t}const r=Object(wt.a)(e,"FilePicker","`FilePicker` picker component is required for file access"),i=()=>{ri.a.unmountComponentAtNode(li);je()},a=()=>{p.a.util.Delay.setEditorTimeout(e,()=>{e.focus()})},s=e=>{e=e.toJS?e.toJS():e;n(e);i()};ri.a.render(Object(Ye.jsx)(r,{pickerType:"SIDE_MODAL",type:t,initialPanel:o,userInfo:Object(Ke.userInfoSync)(),onSelect:s,onClose:i,onCloseComplete:a,rootNode:si(),className:"mce-file-picker",dropdownClassName:"mce-file-picker-uploader",renderContext:"tinymce-plugins"}),li)}const ui=(e,t)=>n=>{t(n);e.focus();Object(Ie.b)(e,"tinymceEdit",G.M)};function di(e){return t=>{const n=ui(e,t);ci(e,ti.a.FILE,n)}}var fi=n(1268);function pi(e){const[t,n]=Object(i.useState)(!1),o=o=>{const r=e.isActiveHandler(o);r!==t&&n(r)},r=()=>{e.onClick({isActive:t})};Object(i.useEffect)(()=>{const{editor:t,onClickShortcut:n}=e;t.on("NodeChange",o);n&&t.shortcuts.add(n,"",r);return()=>{t.off("NodeChange",o);n&&t.shortcuts.remove(n)}},[]);const a=Object(Ir.g)(Object.keys(pi.propTypes),e),{ButtonComponent:s,tooltip:l,i18nKey:c}=e;return Object(Ye.jsx)(s,Object.assign({onClick:r,selected:t,tooltip:l||c("tooltip."+(t?"edit":"insert"))},a))}pi.propTypes={ButtonComponent:r.a.func.isRequired,editor:r.a.object.isRequired,isActiveHandler:r.a.func.isRequired,tooltip:r.a.string,i18nKey:r.a.func,onClick:r.a.func.isRequired,onClickShortcut:r.a.string};pi.defaultProps={isActiveHandler:()=>!1};var mi=n(1260),hi=n(1269),gi=n(1291),bi=n(1254),vi=n(282);const yi=(()=>{let e,t;return(n,o)=>{if(e!==o){e=o;try{t=n.getComputedStyle(o)}catch(e){console.warn(e);return}}return t}})(),Ci=/['"]/g,Oi=/(, )/g,xi=Object(Ir.b)((e,t)=>t.split(e)),ji=e=>e.replace(Ci,"").replace(Oi,",").toLowerCase().trim(),Si=Object(Ir.a)(xi(","),ji),wi=(e,t)=>{const n=Si(e)[0];return t.find(e=>{const t=ji(e.value).split(",")[0];return n===t})},Ti=e=>e.map(e=>{const t=e.family||e.name;return Object.assign({},e,{value:t+(e.fallback?", "+e.fallback:""),family:t})}),ki=e=>{if(!e)return[];const t=Object(Ye.jsx)(pn.a,{external:!0,href:"https://blog.hubspot.com/website/web-safe-html-css-fonts",children:Object(Ye.jsx)(ft.a,{message:lr.k+".fontFamily.unsupportedFontLink"})}),n=e=>Object(Ye.jsx)(vi.a,{message:lr.k+".fontFamily.unsupportedFontErrorText",options:{fontName:e,unsupportedFontLink:t}});return Object.keys(e).sort().map(t=>{const o=lr.i.includes(e[t]);return Object.assign({text:t,value:e[t],disabled:o},o?{help:n(t)}:{})})},Ni=(e,t,n)=>{const o=[],r=[],i=e.settings.inline?e.getElement():e.getBody(),a=t.reduce((e,t)=>[...e,...Si(t)],[]),s=new p.a.dom.TreeWalker(i);do{const e=s.current();if(1!==e.nodeType)continue;const t=getComputedStyle(e).fontFamily,i=Si(t)[0];lr.i.includes(i)?r.push(i):o.includes(t)||a.includes(i)||n&&o.push(t)}while(i.contains(s.next()));return{unknownFonts:o,usedUnsupportedFonts:r}},Ei=(e,t,n,o)=>{const{unknownFonts:r=[],usedUnsupportedFonts:i}=Ni(e,[...n.map(({value:e})=>e),...o.map(({value:e})=>e)],t),a=n.filter(({value:e})=>!lr.i.includes(e)||i.includes(e));return{parsedFonts:r.map(e=>({value:e,text:e.split(",")[0].replace(/['"]/g,"")})),fontsWithUsedUnsupportedFonts:a}},Ai=e=>({help:Nt.a.text(`${lr.k}.fontFamily.${e?"email":"pages"}.templateFontTooltip`),text:Nt.a.text(lr.k+".fontFamily.templateFontGroupName")}),Ii=e=>({target:{value:t}},n)=>{const o=!!n,r=o?n:t,i=o&&n.fontValue&&n.fontValue.font_set;e.execCommand("hsfontselect",!1,{value:r,isCustomFont:o});Object(Ie.b)(e,"tinymceFormatting",G.f,{method:"button",value:t,isCustomFont:o,customFontType:i})},Ri=(e,t=!1)=>n=>{const{element:o,target:r,parents:i}=n,a=r.getWin();let s=yi(a,o)||{};const l=e(s);return!l&&t?!!i.find(t=>{s=yi(a,t)||{};return e(s)}):l},Li=(e,t)=>{const n=yi(e,t);if(!n)return null;const o=n.getPropertyValue("line-height"),r=n.getPropertyValue("font-size"),i=parseFloat(o),a=parseFloat(r);return isNaN(i)||isNaN(a)?null:i/a},_i={bold:Ri(e=>"bold"===e.fontWeight||Number(e.fontWeight)>=600),underline:Ri(e=>e.textDecoration.includes("underline"),!0),italic:Ri(e=>e.fontStyle.includes("italic"))},Pi={bold:{on:"bold",off:"normal",affectedStyles:["font-weight"],inlineElements:["b","strong"],tinyMCECommand:"bold"},italic:{on:"italic",off:"normal",affectedStyles:["font-style"],inlineElements:["i","em"],tinyMCECommand:"italic"},underline:{on:"underline",off:"none",affectedStyles:["text-decoration"],inlineElements:["u"],tinyMCECommand:"underline"}},Mi=(e,t,n)=>o=>{const{parents:r,element:i}=o,{formatter:a}=e;let s;for(let e=0;e<r.length;e++){const o=n.find(n=>a.matchNode(r[e],t,{value:n.value}));if(o){s=o.value;break}}if(!s){const t=Li(e.getWin(),i),o=n.find(e=>e.value===t);s=o?o.value:null}return s},Di=(e,t)=>t?e.dom.getParent(t,"li",e.getBody()):null,Bi=e=>e?["OL","UL"].includes(e.nodeName):null,Fi=new RegExp(/{{\s+include_custom_fonts((.*?))\s+}}/g),Ui=(e,t)=>{const n={};if(!t.length)return"";t.forEach(t=>{const o=e.find(e=>t===e.family);if(!o)return;const{variants:r}=o;r&&r.length&&("string"==typeof r[0]?n[t]=o.variants:r[0].name&&(n[t]=r.map(e=>e.name)))});return`{{ include_custom_fonts(${JSON.stringify(n)}) }}`},Vi=(e,t)=>{const n={},o=e.settings.inline?e.getElement():e.getBody(),r=new p.a.dom.TreeWalker(o);do{const e=r.current();if(1!==e.nodeType)continue;const o=getComputedStyle(e).fontFamily,i=wi(o,t);i&&(n[i.family]=!0)}while(o.contains(r.next()));return Object.keys(n)},Hi=e=>{const{[lr.j.FONT_FORMATS]:t}=Object(Ee.f)(e,lr.f);return Ti(t.customFonts||[])},qi=e=>{if(!e.plugins.hsformatting)return[];const{combinedCustomFonts:t}=e.plugins.hsformatting;return Ti(t||[])},$i=e=>{if(!e.plugins.hsformatting)return[];const{brandingFonts:t}=e.plugins.hsformatting;return Ti(t||[])},zi=(e,t,n)=>{const o=Vi(e,n);return t+Ui(n,o)},Wi=e=>{let t=e,n=Fi.exec(t);for(;null!==n;){n.length&&(t=t.replace(n[0],""));n=Fi.exec(t)}return t},Gi=e=>{Object(F.b)(e,e=>{e.body.innerHTML=Wi(e.body.innerHTML)})},Ki=(e,t)=>{const n=t||qi(e);Object(F.a)(e,t=>{t.body.innerHTML=zi(e,t.body.innerHTML,n)})},Yi=(e,t)=>{const n=t||e.parentNode;return n&&e===n.firstChild},Xi=(e,t)=>{const n=t||e.parentNode;return n&&e===n.lastChild},Zi=(e,t)=>e===t||!!Yi(e)&&Zi(e.parentNode,t),Qi=(e,t)=>e===t||!!Xi(e)&&Qi(e.parentNode,t),Ji=(e,t)=>e===t||!(!Yi(e)||!Xi(e))&&Ji(e.parentNode,t),ea=e=>"BR"===e.nodeName||1===e.childNodes.length&&ea(e.childNodes[0]);function ta(e,t,n){const o=new(0,p.a.dom.RangeUtils)(e.dom),r=[],i=t=>{1===t.attributes.length&&t.hasAttribute("style")&&!t.getAttribute("style")&&e.dom.remove(t,!0)},a=t=>{"SPAN"===t.nodeName&&e.dom.getStyle(t,n)&&r.push(t)};o.walk(t,e=>{e.forEach(e=>{a(e);if(e.hasChildNodes()){const t=e.querySelectorAll("span[style]");t.length&&Array.from(t).forEach(a)}})});if(r.length){e.dom.setStyle(r,n,null);r.forEach(i)}}function na(e){return isNaN(e)?e:Math.round(100*Number(e))+"%"}function oa(e,t,n){if(0!==t.startOffset&&!t.collapsed)return null;let o=t.startContainer;if(o.nodeType===Node.TEXT_NODE){if(o.parentNode===e.getBody())return null;if(!o.parentNode)return null;if(o.parentNode.firstChild!==o)return null;o=o.parentNode}else if(o.nodeType!==Node.ELEMENT_NODE)return null;if(n.includes(o.nodeName.toLowerCase()))return o;const r=e.$(o).parentsUntil(e.getBody());if(!r||0===r.length)return null;let i=o,a=null;r.each((e,t)=>{if(n.includes(t.nodeName.toLowerCase())&&t.firstChild===i){a=t;return!1}i=t;return!0});return a}function ra(e,t,n){let o=t.endContainer;if(o.nodeType===Node.ELEMENT_NODE){if(t.endOffset<o.childNodes.length)return null}else{if(o.nodeType!==Node.TEXT_NODE)return null;if(t.endOffset!==o.length)return null;if(o.parentNode===e.getBody())return null;if(o.parentNode.childNodes[o.parentNode.childNodes.length-1]!==o)return null;o=o.parentNode}if(n.includes(o.nodeName.toLowerCase()))return o;const r=e.$(o).parentsUntil(e.getBody());if(!r||0===r.length)return null;let i=o,a=null;r.each((e,t)=>{if(n.includes(t.nodeName.toLowerCase())&&t.childNodes[t.childNodes.length-1]===i){a=t;return!1}i=t;return!0});return a}function ia(e,t){const n=e.selection.getRng(),o=oa(e,n,t);return!!(e.selection.isCollapsed()&&o||o&&ra(e,n,t))}function aa(e,t){Object(Ee.d)(e.settings,lr.j.APPLY_LINE_HEIGHT_PERCENTAGE,!1)&&(t=na(t));e.undoManager.transact(()=>{ta(e,e.selection.getRng(),"line-height");const n=e.selection.getNode(),o="UL"===n.nodeName||"OL"===n.nodeName;e.formatter.apply(lr.h,{value:t},o?n:void 0)});return t}function sa(e,t){const n=Object(Ee.d)(e.settings,lr.j.APPLY_LINE_HEIGHT_PERCENTAGE,!1);if(ia(e,lr.e)){let o=1.25;if(n){const t=e.selection.getNode();if(t){const n=yi(e.getWin(),t);if(n){const e=parseFloat(n["line-height"]),t=parseFloat(n["font-size"]);isNaN(e)||isNaN(t)||(o=e/t)}}}const r=oa(e,e.selection.getRng(),lr.e),i=ra(e,e.selection.getRng(),lr.e)||r,a=e.getDoc().createRange();a.setStart(r,0);a.setEnd(i,i.childNodes.length);ta(e,a,"font-size");e.formatter.apply(lr.b,{value:t});if(n){a.setEnd(i,i.childNodes.length);ta(e,a,"line-height");e.formatter.apply(lr.h,{value:na(o)})}}else e.formatter.apply("fontsize",{value:t})}const la=(e,t)=>{e.formatter.remove(Pi.bold.tinyMCECommand);e.formatter.remove(Pi.italic.tinyMCECommand);if(Object.keys(t).length){const n=e.selection.getStart();e.dom.setStyles(n,t)}},ca=(e,t=[])=>{if(0===t.length)return!1;if(ia(e,t)||t.includes(e.selection.getNode().nodeName.toLowerCase()))return!0;const n=e.selection.getSelectedBlocks(),o=t.join(",");return!!n.find(e=>t.includes(e.nodeName.toLowerCase())||!!e.querySelector(o))};function ua(e,t,n,o){n.length>0&&ca(e,n)?e.undoManager.transact(()=>{e.formatter.remove(Pi[t].tinyMCECommand);e.formatter.remove(lr.g[t].on);let n=e.selection.getNode();const r="A"===n.parentNode.tagName&&n.parentNode;r&&r.firstChild===n&&r.lastChild===n&&(n=r);e.formatter.apply(lr.g[t].on,{value:Pi[t][o?"on":"off"]},"A"===n.tagName?n:void 0);o||e.formatter.remove(lr.g[t].off)}):e.execCommand("mceToggleFormat",!1,t)}const da=(e,t,n)=>{const o=yi(t.getWin(),e);if(o){if(wi(o.fontFamily,n))return!0}return!1},fa=(e,t)=>{if(!t.length)return!1;const n=e.selection.getRng(),o=document.createNodeIterator(n.commonAncestorContainer,NodeFilter.SHOW_ALL);let r=!0;for(;o.nextNode();){let i=o.referenceNode;if(!r||i===n.startContainer){r=!1;i.nodeType===Node.TEXT_NODE&&(i=i.parentElement);if(da(i,e,t))return!0;if(o.referenceNode===n.endContainer)break}}return!1},pa=(e,t,n,o)=>{t.setStartBefore(n);t.setEndAfter(o);e.selection.setRng(t);e.selection.setContent("")},ma=(e,t,n,o)=>{t.setStartBefore(n);t.setEndAfter(o);e.selection.setRng(t);return e.selection.getContent()},ha=e=>null!=e&&!isNaN(Number(e)),ga=(e,t,n)=>{if(ha(e)&&ha(t)&&t>e){if(ha(n)){const o=n/t;n=Math.round(o*e)}t=e}return{width:t,height:n}},ba=(e,t,n)=>{let o,r;if(ha(e)&&ha(t)&&ha(n)){const i=n/t;r=Math.round(i*e);o=e}return{width:o,height:r}},va=e=>{let t=zo.b.NONE;const n=e.getAttribute("style"),o=e.style;n&&("left"===o.float?t=zo.b.LEFT:"right"===o.float?t=zo.b.RIGHT:"block"!==o.display&&"auto"!==o.margin||(t=zo.b.CENTER));return t},ya=(e,t,n,o)=>{const r=e.dom.getStyle(t,n);return"auto"===r?r:parseInt(o,10)},Ca=(e,t)=>{const{marginLeft:n,marginRight:o,marginTop:r,marginBottom:i}=getComputedStyle(t);return{left:ya(e,t,"margin-left",n),right:ya(e,t,"margin-right",o),top:parseInt(r,10),bottom:parseInt(i,10)}};function Oa(e,t,n){let o,r,i;const a=t.attributes;i=a.length;for(;i--;){o=a[i].name;r=a[i].value;if("width"!==o&&"height"!==o&&"style"!==o&&o.indexOf("data-mce-")<0){"data"!==o&&"src"!==o||(r=e.convertURL(r,o));n.attr("data-mce-p-"+o,r)}}const s="iframe"!==t.name&&t.firstChild&&t.firstChild.value.trim();if(s){n.attr("data-mce-html",encodeURI(s));n.firstChild=null}}const xa=new RegExp(`^[0-9]+(?:${["px","pt","cm","mm","in","em","rem","vh","vw","%","ex","ch","pc","vmin","vmax"].join("|")})$`),ja=(e,t=!0)=>/^[0-9]+$/.test(e)?`${e}${t?"px":""}`:xa.test(e)&&t?e:void 0;zo.b.CENTER,zo.b.LEFT,zo.b.RIGHT,zo.b.NONE,zo.b.JUSTIFY,zo.b.LEFT,zo.b.CENTER,zo.b.RIGHT,zo.b.NONE;function Sa(e,t,{fileSource:n}={}){Object(Ie.b)(e,"tinymceImage",t?G.gb:G.K,{fileSource:n,version:"contextualToolbar",replacedImgSrc:t?t.src:void 0})}function wa(e,t,n){Object(Ie.b)(e,"tinymceEditImage",G.x,{editType:t,imgSrc:n,version:"contextualToolbar"})}const Ta=Object(uo.a)(wa,500);function ka(e,t){if(!t)return{};const n=e.dom,o=e.getWin().getComputedStyle(t),r=n.getAttrib(t,"alt")||"",i=n.getAttrib(t,"loading","default"),a=parseInt(n.getAttrib(t,"width"),10)||t.width,s=parseInt(n.getAttrib(t,"height"),10)||Math.round(t.height/t.width*a),l=Object(q.e)(e,H.d.DISABLE_RESIZING_PREDICATE),c=!l||!l(e,t),u=!Object(q.e)(e,H.d.DISABLE_SPACING),d=Object(q.e)(e,H.d.MAX_DIMENSION_WIDTH);return{alignment:Object(q.c)(e,t),altText:r,loadingValue:i,naturalWidth:t.naturalWidth,naturalHeight:t.naturalHeight,showDimensionsControls:c,showMarginControls:u,dimensions:{width:a,height:s},maxDimensions:ba(d,a,s),margin:{top:Object(q.g)(t,o,"margin-top"),left:Object(q.g)(t,o,"margin-left"),right:Object(q.g)(t,o,"margin-right"),bottom:Object(q.g)(t,o,"margin-bottom")}}}function Na(e){const t=Po(e.getParam("apiClient"));return e=>new Promise(n=>{const o=e.src;t(o).then(e=>{const{name:t,size:o,extension:r,url:i}=e;n({name:`${t}.${r}`,size:o,src:i})}).catch(e=>{console.error(e);n({name:o,src:o})})})}function Ea(e){return t=>{const n=e.dom,o=t.parentNode,r=Ji(t,t.parentNode);e.undoManager.transact(()=>{e.selection.collapse();if(o&&r&&["P","H1","H2","H3","H4","H5","H6","DIV","PRE","A"].includes(t.parentNode.nodeName))n.remove(o);else{const o=e.selection.getBookmark();n.remove(t);e.selection.moveToBookmark(o)}e.nodeChanged()});Ta(e,"removeImage",t.src)}}function Aa(e,t,n){const o=!!Object(q.e)(e,H.d.AUTO_MAX_WIDTH),r=!!Object(q.e)(e,H.d.USE_ALIGNMENT_CLASSES),i=Object(q.d)(e),a=Object(q.e)(e,"useCustomAltText");return s=>{let l;e.undoManager.transact(()=>{const c=e.dom,{width:u,height:d,url:f}=s,{width:p,height:m,styles:h,className:g,loading:b}=Object(q.j)(e,t,u,d),v={id:"__hsnew",src:f,width:p,height:m,loading:b,alt:Object(q.a)(s,a),"data-gai":Object(q.f)(s)||null};if(m){h.height="auto";r||(h["max-width"]="100%")}if(p){h.width=p+"px";o&&(h["max-width"]=u+"px")}const y=c.serializeStyle(h);y&&(v.style=y);r&&(v.class=g||bi.a[zo.b.NONE]);v.loading=t&&b||i;e.focus();const C=c.createHTML("img",v);"IMAGE_GENERATION"===n&&X(te)?zt(e,C):e.selection.setContent(C);l=c.get("__hsnew");e.execCommand("hsInsertNewline",!1,{target:l});c.setAttrib(l,"id",null);e.selection.select(l)});Sa(e,t,{fileSource:Object(q.b)(s)})}}function Ia(e){return(t,n)=>{const{top:o,left:r,right:i,bottom:a}=n;e.undoManager.transact(()=>{e.dom.setStyle(t,{"margin-top":o,"margin-left":r,"margin-right":i,"margin-bottom":a})});Ta(e,"margin")}}function Ra(e){return(t,n)=>{e.undoManager.transact(()=>{t.setAttribute("alt",n)});Ta(e,"altText")}}function La(e){return(t,n)=>{e.undoManager.transact(()=>{e.dom.setAttrib(t,"loading",n)});Ta(e,"loadingValue")}}function _a(e){const t=!!Object(q.e)(e,H.d.AUTO_MAX_WIDTH),n=Object(q.e)(e,H.d.MAX_DIMENSION_WIDTH),o=!!Object(q.e)(e,H.d.USE_ALIGNMENT_CLASSES);return r=>{const{target:i,constrained:a}=r;if(!Object(q.i)(e,r.target))return;const{dom:s}=e;let{width:l,height:c}=ga(n,r.width,r.height);e.undoManager.transact(()=>{if(l){l=Math.round(l);c=Math.round(c);s.setAttrib(i,"width",l);s.setStyle(i,"width",l+"px");s.setAttrib(i,"height",c);s.setStyle(i,"height","auto");t?s.setStyle(i,"max-width",l+"px"):o||s.setStyle(i,"max-width","100%")}if(!1===a){c=Math.round(c);s.setStyle(i,"height",c+"px");s.setAttrib(i,"height",c)}});Ta(e,"dimensions")}}const Pa=(e,t,n)=>{const o=e.$(t),r=(t,o)=>{const r=t.parent().is("center");"center"!==n||r?r&&t.parent().replaceWith(t):t.wrap("<center></center>");t.attr("align")!==n&&["left","center","right"].includes(n)?t.attr("align",n):t.attr("align",null);o&&e.selection.select(t[0])};if(Object(q.i)(e,t))r(o,!0);else{const t=o.find("img");t.each((n,o)=>{r(e.$(n),o===t.length-1)})}};function Ma(e){const t=!!Object(q.e)(e,H.d.USE_ALIGNMENT_CLASSES);return(n,o)=>{e.undoManager.transact(()=>{if(t){let t=bi.a[o];if(n.classList.contains(t)){o=zo.b.NONE;t=bi.a[o]}Object(q.k)(e,n,t)}else{const t=va(n);o===t&&(o=zo.b.NONE);const r=H.c[o];r&&e.dom.setStyles(n,r)}Object(Ee.f)(e,"isEmail")&&Pa(e,n,o)});Ta(e,"alignment")}}var Da=n(345),Ba=n(2615).a;const Fa=/^{{\s*([a-zA-Z0-9_.]+)\s*}}$/,Ua=e=>/{{.*}}/.test(e),Va=e=>{if("string"!=typeof e)return null;const t=e.trim().match(Fa);return t?t[1]:null},Ha=e=>{const t=Va(e);return Object.values(v).includes(t)?t:null},qa=e=>{const t=S[e];return t?Nt.a.text(C(t.text)):e},$a=Object(Ir.a)(qa,Ha),za=e=>{const t=Va(e);return t?w[t]:null},Wa=e=>{let t=!1;return{promise:new Promise((n,o)=>{e.then(e=>t?o({isCanceled:!0}):n(e),e=>o(t?{isCanceled:!0}:e))}),cancel(){t=!0}}};var Ga=n(1004),Ka=n(1213);const Ya="([^\\s?=&]+)",Xa=`${Ya}=${Ya}`,Za=`\\?${Xa}(&${Xa})*`,Qa=new RegExp(`^(.+)@${Ga.a.domain}(${Za})?$`),Ja=new RegExp(/^#\S/),es=new RegExp(/^[t|T][e|E][l|L]:[\d+-]*$/),ts=new RegExp(/^\/\S/),ns=new RegExp(`^${Ga.a.protocol}${Ga.a.domain}(${Ga.a.path}(${Ga.a.file})?)?${Ga.a.search}?$`,"i"),os=new RegExp(/^(\S*{{.+}}\S*)+$/),rs=Object.values(j).filter(e=>e!==j.REGULAR);function is(e){return e.split("/").splice(1).join("/")}function as(e){const t=document.createElement("a");t.href=e;return{domain:t.hostname,protocol:t.protocol,slug:is(t.pathname)}}function ss(e){let{slug:t}=as(e);const n=/^meetings\/(.+)/.exec(t);n&&n[1]&&(t=encodeURIComponent(n[1]));return t}function ls(e){const{firstName:t,lastName:n,email:o}=e;return t||n?`${t||""} ${n||""}`.trim():o}function cs(e){const t=e.replace(/^mailto:/,"");return Qa.test(t)||os.test(t)}function us(e){return Ja.test(e)||es.test(e)||ts.test(e)||ns.test(e.replaceAll(/\s+/g,""))||os.test(e)}function ds(e,t){switch(e){case h.EMAIL:return cs(t);case h.URL:return us(t);default:return!0}}const fs=()=>`${Object(Ka.a)()}/meetings/${cn.a.get()}/link/new`,ps=e=>{const{slug:t,domain:n}=as(e);return t.startsWith("meetings/")||n.startsWith("meetings.hubspot")},ms=(e,t)=>e.text<t.text?-1:e.text>t.text?1:0,hs=e=>(t,n)=>t.userId===e?-1:n.userId===e?1:ms(t,n),gs=(e=[])=>e.reduce((e,t)=>{if(t===x||!rs.includes(t))return e;e[t]=!0;return e},{});var bs=n(1238);const vs=()=>"https://knowledge.hubspot.com/articles/kcs_article/cos-pages-editor/insert-and-manage-anchor-links-to-your-blog-posts-pages-and-knowledge-base-articles",ys=e=>e.length>0&&/^[A-Za-z][A-Za-z0-9\-:._]*$/.test(e),Cs=e=>"#"+e,Os=e=>e.startsWith("#")?e.substring(1):e,xs=["href","relAttr"],js=["fileMeta"];var Ss=e=>{class t extends i.Component{constructor(e){super(e);this.handleUpdate=e=>{this.setState(Object.assign({},e),()=>{this.initialLinkInfo||(this.initialLinkInfo=this.state);(this.state.href||this.state.fileMeta)&&(this.lastCompleteLinkState=this.state)})};this.handleSave=(...e)=>{this.props.onSave(this.state,...e);this.lastSavedLinkState=Object.assign({},this.state,{isValidLink:!0});this.trackLinkUsage()};this.handleLinkTypeChange=e=>{const t=e===h.VIEW_AS_WEBPAGE?"{{ view_as_page_url }}":"";this.setState({linkType:e,href:t,fileMeta:null,externalLink:g.includes(e),isValidLink:!0})};this.handleUnlink=()=>{this.setState({linkType:h.NONE,href:"",fileMeta:null,isValidLink:!0},this.handleSave)};this.handleClose=()=>{const{onClose:e}=this.props;this.setState(Object.assign({},this.lastSavedLinkState||this.initialLinkInfo));e&&e()};const{linkText:t,href:n,relAttr:o,externalLink:r}=e;this.state={linkText:t,href:n,relAttr:o,externalLink:r,linkType:h.URL,linkDisplayName:n,isValidLink:!0}}componentDidMount(){this.fetchLinkType()}componentDidUpdate({mode:e,target:t}){const{allowRawLinksOnly:n,mode:o,linkText:r,target:i}=this.props;if(t!==i){const{href:e,relAttr:t,externalLink:n}=this.props;this.initialLinkInfo=null;this.lastSavedLinkState=null;this.setState({linkText:r,href:e,relAttr:t,externalLink:n,linkType:e?h.URL:h.NONE,linkDisplayName:e,isValidLink:!0});this.fetchLinkType()}else e!==o&&o===hi.d.PREVIEW?this.setState(Object.assign({},this.lastSavedLinkState||this.initialLinkInfo,{linkText:r})):!n||r===this.state.linkText&&r===this.state.href||o!==hi.d.PREVIEW||this.setState({href:r,linkDisplayName:r,linkText:r})}componentWillUnmount(){this.linkTypePromise.cancel()}trackLinkUsage(){if(!this.props.trackLinkUsage)return;const e=Object(Ir.i)([...O,"href"]),t=e(this.initialLinkInfo||{}),n=e(this.state);if(!Object(Ir.c)(n,t)){const e=t.linkType===h.NONE?bs.E:bs.gb,{relAttr:o}=n,r=Object(d.a)(n,xs);this.props.trackLinkUsage(e,Object.assign({},r,gs(o)))}}checkForFileLink(e){const{fetchFileFromUrl:t,fetchFileByUrl:n}=this.props,o=e=>({linkType:h.FILE,linkDisplayName:`${e.name}.${e.extension}`,fileMeta:{fileName:`${e.name}.${e.extension}`,size:e.size,type:e.type}});return new Promise(n?(t,r)=>{n(e).then(e=>t(o(e))).catch(r)}:(n,r)=>{t(encodeURIComponent(e)).then(e=>n(o(e))).catch(r)})}checkForPageUrl(e){const{fetchPageBySlug:t}=this.props,{domain:n,slug:o}=as(e);return new Promise((r,i)=>{t(o,n).then(({objects:t})=>{if(t&&t.length){const e=t.find(({path:e})=>e==="/"+o)||t[0];r({linkType:h.PAGE,linkDisplayName:e.name})}else r(this.getExternalUrl(e))}).catch(i)})}checkForMeetingLink(e){const{fetchMeetingBySlug:t}=this.props,n=ss(e);return new Promise((o,r)=>{t(n).then(t=>{t&&t.link===e?o({linkType:h.MEETING,linkDisplayName:t.name||t.link}):o(this.getExternalUrl(e))}).catch(r)})}checkForAnchorLink(e){const t=Os(e);return new Promise((n,o)=>{this.props.fetchAnchors(t,!0).then(o=>{o&&o.length?n({linkType:h.ANCHOR,linkDisplayName:t}):n(this.getExternalUrl(e))}).catch(o)})}getExternalUrl(e){return{linkType:h.URL,linkDisplayName:e}}fetchLinkType(){const{href:e,useNoLinkOption:t,insertLink:n,allowMeetingLink:o,allowAnchorLinks:r,allowFileDownload:i,allowEmailWebVersionLink:a}=this.props;this.linkTypePromise=Wa(new Promise((s,l)=>{if(e)if(e.startsWith("mailto:"))s({linkType:h.EMAIL,linkDisplayName:e.split("mailto:")[1]});else if(e.toLocaleLowerCase().startsWith("tel:"))s(this.getExternalUrl(e));else if(r&&e.startsWith("#"))this.checkForAnchorLink(e).then(s).catch(l);else if(Va(e)){const t=za(e);t&&a?s({linkType:Va(e),linkDisplayName:Nt.a.text(C(t.text))}):Ha(e)?s({linkType:h.EMAIL_SUBSCRIPTION,linkDisplayName:$a(e)}):s(this.getExternalUrl(e))}else Ua(e)?s(this.getExternalUrl(e)):i&&Ba(e)?this.checkForFileLink(e).then(s).catch(()=>{this.checkForPageUrl(e).then(s).catch(l)}):o&&ps(e)?this.checkForMeetingLink(e).then(s).catch(l):this.checkForPageUrl(e).then(s).catch(l);else s(t&&!n?{linkType:h.NONE,linkDisplayName:""}:this.getExternalUrl(e))}));this.linkTypePromise.promise.then(e=>{this.handleUpdate(e,!1)}).catch(e=>{if(!e.isCanceled)throw new Error(e.message);console.warn("linkType fetch cancelled in `withLinkState`")})}render(){const t=this.state,{fileMeta:n}=t,o=Object(d.a)(t,js);return Object(Ye.jsx)(e,Object.assign({},this.props,{onLinkTypeChange:this.handleLinkTypeChange,onUpdate:this.handleUpdate,onSave:this.handleSave,onUnlink:this.handleUnlink,dropdownClassName:this.props.dropdownClassName,showRefAndTargetControls:this.props.showRefAndTargetControls,fetchPages:this.props.fetchPages,onSelectFile:this.props.onSelectFile,onClose:this.handleClose,currentFileMeta:n},o))}}t.propTypes={fetchPageBySlug:r.a.func.isRequired,fetchMeetingBySlug:r.a.func.isRequired,trackLinkUsage:r.a.func,onUpdate:r.a.func,onSave:r.a.func,onClose:r.a.func,onLinkTypeChange:r.a.func,linkText:r.a.string,href:r.a.string,relAttr:r.a.array,externalLink:r.a.bool,showRefAndTargetControls:r.a.bool,fetchFileFromUrl:r.a.func,fetchFileByUrl:r.a.func,fetchPages:r.a.func,fetchAnchors:r.a.func,onSelectFile:r.a.func,dropdownClassName:r.a.string,useNoLinkOption:r.a.bool,insertLink:r.a.bool,mode:r.a.string,allowMeetingLink:r.a.bool,allowAnchorLinks:r.a.bool,allowFileDownload:r.a.bool,allowRawLinksOnly:r.a.bool,allowEmailWebVersionLink:r.a.bool,target:r.a.any};t.displayName=`withLinkState(${Object(Da.a)(e)})`;return t},ws=n(1288),Ts=n(2735),ks=n(490),Ns=n(357);const Es=["href","linkType","linkDisplayName","onAnchorPreviewClick"],As=["href","linkType","linkDisplayName","onAnchorPreviewClick"],Is=["href","linkType","linkDisplayName","onAnchorPreviewClick"],Rs=e=>"RichTextLib.links."+e,Ls=175,_s=l()(pn.a).withConfig({displayName:"LinkPreview__PreviewLink",componentId:"sc-1347ka1-0"})(["display:inline-block;vertical-align:middle;"]);class Ps extends i.Component{constructor(...e){super(...e);this.handlePreviewLinkClick=e=>{const{href:t,linkType:n,onAnchorPreviewClick:o}=this.props;if(n===h.ANCHOR&&o){o(t);e.preventDefault()}}}renderEmailSubscriptionLink(){const e=this.props,{linkDisplayName:t}=e,n=Object(d.a)(e,Es);return Object(Ye.jsx)(Ts.a,Object.assign({},n,{children:Object(Ye.jsxs)(ks.a,{className:"p-y-0 p-x-0",children:[Object(Ye.jsx)(ft.a,{message:Rs("previewLabel.email_subscription")})," ",Object(Ye.jsx)("span",{children:t})]})}))}renderHublLink(){const e=this.props,{href:t}=e,n=Object(d.a)(e,As);return Object(Ye.jsxs)(Ts.a,Object.assign({},n,{children:[Object(Ye.jsx)(ks.a,{className:"p-y-0 p-x-0 link-preview-form-label",children:Object(Ye.jsx)(ft.a,{message:Rs("previewLabel.url")})})," ",Object(Ye.jsx)("span",{style:{display:"inline-block",verticalAlign:"middle"},children:Object(Ye.jsx)(Ns.a,{useFlex:!0,maxWidth:Ls,tooltip:!1,children:t})})]}))}render(){const e=this.props,{href:t,linkType:n,linkDisplayName:o}=e,r=Object(d.a)(e,Is);return n===h.EMAIL_SUBSCRIPTION||n===h.VIEW_AS_WEBPAGE?this.renderEmailSubscriptionLink():Ua(t)?this.renderHublLink():t&&n!==h.NONE?Object(Ye.jsxs)(Ts.a,Object.assign({},r,{children:[Object(Ye.jsx)(ks.a,{className:"p-y-0 p-x-0 p-right-2 link-preview-form-label",children:Object(Ye.jsx)(ft.a,{message:Rs("previewLabel."+n)})}),Object(Ye.jsx)(_s,{external:n!==h.ANCHOR,href:t,truncate:!0,truncateStringProps:{maxWidth:Ls,tooltip:!1},onClick:this.handlePreviewLinkClick,"data-test-id":"preview-link",children:o})]})):null}}Ps.propTypes={href:r.a.string.isRequired,linkDisplayName:r.a.string.isRequired,linkType:r.a.string.isRequired,className:r.a.string,onAnchorPreviewClick:r.a.func};const Ms=["onEdit","onReplace","onRemove","onUnlink"],Ds=e=>"RichTextLib.image.lite."+e;function Bs(e){const{onEdit:t,onReplace:n,onRemove:o,onUnlink:r}=e,i=Object(d.a)(e,Ms),a=[{iconName:hi.c.EDIT,onClick:t},{iconName:hi.c.REPLACE,onClick:n},{iconName:hi.c.REMOVE,onClick:o}];e.href&&a.push({iconName:hi.c.UNLINK,onClick:r});return Object(Ye.jsx)(ws.a,{"data-test-id":"image-popover-body-lite",iconButtons:a,i18nKey:Ds,children:e.href&&Object(Ye.jsx)(Ps,Object.assign({},Object(Ir.i)(Object.keys(Ps.propTypes),i),{className:"p-left-3 "+(e.linkType===h.ANCHOR?"p-right-2":"p-right-1"),alignSelf:"center"}))})}Bs.displayName="ImagePopoverBodyLite";var Fs=Bs,Us=n(486),Vs=n(477),Hs=n(2741),qs=n(508),$s=n(1190),zs=n(506);const Ws=({linkType:e,href:t,isValidLink:n,onLinkTypeChange:o,onUpdate:r,onSubmit:a})=>{const[s,l]=Object(i.useState)(!1),c=Object(uo.a)((e,t)=>{r({isValidLink:ds(e,t)})},300);return[e=>{l(!1);o(e)},t=>{t.href&&s&&c(e,t.href);r(t)},o=>{let i=n;s||(i=ds(e,t));if(s||i){a(o);return!0}r({isValidLink:i});l(!0);return!1}]},Gs=e=>{const t=e.split(/([/?].*)/),n=t[0],o=t[1]||"",r=/^\/([^\s/]+?\/{0,1})*(\?[^\s/]*?)*?$|^$|^\?[^\s]*?$/;return/^([a-zA-Z0-9-]{1,61}\.){0,126}[a-zA-Z0-9-]{1,61}\.[a-zA-Z]{2,}(\.[a-zA-Z]{2,})?\/{0,1}$/.test(n)&&r.test(o)},Ks=(e="")=>!e.trim();var Ys=n(1250),Xs=n(605),Zs=n(773);function Qs(e,t){return(n,o,r,i,a)=>n[e]&&void 0===n[o]?new TypeError(`${r}: when ${e} is defined, prop ${o} must also be defined`):t(n,o,r,i,a)}const Js=e=>"RichTextLib.morphing."+e,el=l()(Le.a).withConfig({displayName:"MorphingPopoverBody__MorphButton",componentId:"sc-1wc93sb-0"})(["padding-right:0 !important;"]),tl={title:r.a.string.isRequired,titleClassName:r.a.string,children:r.a.node.isRequired,morphButtonTitle:r.a.string,morphedContentTitle:Qs("morphButtonTitle",r.a.string),renderMorphedContent:Qs("morphButtonTitle",r.a.func)};function nl(e){const{title:t,titleClassName:n,morphButtonTitle:o,morphedContentTitle:r,renderMorphedContent:a,children:s}=e,[l,u]=Object(i.useState)(!1);if(l){const e=()=>{u(!1)},t=t=>{t.key===hi.b.ESCAPE&&e()},o=n?n+" m-bottom-2":"m-bottom-2";return Object(Ye.jsxs)("div",{"data-test-id":"morphed-content",onKeyDown:t,tabIndex:-1,children:[Object(Ye.jsxs)(c.a,{className:o,direction:"column",children:[Object(Ye.jsx)(Zs.a,{className:"m-top-0",flush:!0,children:Object(Ye.jsx)(pn.a,{"data-test-id":"morphed-content-back-button",onClick:e,onMouseDown:e=>e.preventDefault(),children:Object(Ye.jsx)(ft.a,{message:Js("back")})})}),Object(Ye.jsx)(Xs.a,{className:"m-bottom-0",children:Object(Ye.jsx)(ft.a,{message:r})})]}),a({onCloseMorphedContent:e})]})}return Object(Ye.jsxs)("div",{children:[Object(Ye.jsxs)(c.a,{className:n||"",align:"baseline",justify:"between",children:[Object(Ye.jsx)(Xs.a,{className:"m-bottom-0",children:Object(Ye.jsx)(ft.a,{message:t})}),o&&Object(Ye.jsx)(el,{"data-test-id":"morph-content-button",use:"transparent",onClick:()=>u(!0),onMouseDown:e=>e.preventDefault(),children:Object(Ye.jsx)(ft.a,{message:o})})]}),s]})}nl.propTypes=tl;nl.displayName="MorphingPopoverBody";var ol=nl;const rl=e=>"RichTextLib.explicitSave."+e,il=l()(Le.a).withConfig({displayName:"ExplicitSaveControls__CancelButton",componentId:"sc-1hwrfaq-0"})(["color:"," !important;"],an.OBSIDIAN),al={className:r.a.string,popoverType:r.a.oneOf(Object.values(hi.e)),isSubmitDisabled:r.a.bool,linkType:r.a.string,onSubmit:r.a.func.isRequired,onCancel:r.a.func.isRequired,renderLinkPopoverAlert:r.a.func};function sl(e){const{className:t,popoverType:n,isSubmitDisabled:o,linkType:r,onSubmit:i,onCancel:a,renderLinkPopoverAlert:s}=e;return Object(Ye.jsxs)("div",{className:t,children:["function"==typeof s?s(r):null,Object(Ye.jsx)(Le.a,{use:"tertiary","data-test-id":"submit-link-confirm-button",onClick:i,disabled:o,size:"small",children:Object(Ye.jsx)(ft.a,{message:rl("submit."+n)})}),Object(Ye.jsx)(il,{use:"tertiary-light","data-test-id":"explicit-save-cancel-button",onClick:a,size:"small",children:Object(Ye.jsx)(ft.a,{message:rl("cancel")})})]})}sl.propTypes=al;sl.displayName="ExplicitSaveControls";var ll=sl,cl=n(485);class ul extends i.Component{render(){const{primaryText:e,linkText:t,onLinkClick:n,required:o}=this.props;return Object(Ye.jsxs)(c.a,{direction:"row",align:"baseline",justify:"between",children:[Object(Ye.jsx)(ks.a,{required:o,children:Object(Ye.jsx)(ft.a,{message:e})}),t?Object(Ye.jsx)(cl.a,{children:Object(Ye.jsx)(pn.a,{onClick:n,"data-test-id":this.props["data-test-id"],children:Object(Ye.jsx)(ft.a,{message:t})})}):null]})}}ul.propTypes={primaryText:r.a.string.isRequired,linkText:r.a.string,onLinkClick:r.a.func,required:r.a.bool,"data-test-id":r.a.string};ul.defaultProps={onLinkClick:()=>{}};var dl=n(1272),fl=n(2742);const pl=e=>C("advanced."+e),ml=(e,t=[],n,o)=>{let r=t.includes(e);e===j.REGULAR&&(r=0===t.length||1===t.length&&t[0]===x);return Object(Ye.jsx)(fl.a,{disabled:o,checked:!o&&r,onChange:()=>n(e,!r),children:Object(Ye.jsx)(ft.a,{message:pl("rel."+e)})},"rel-type-"+e)},hl={className:r.a.string,tooltipClassName:r.a.string,relAttr:r.a.array.isRequired,onRelAttrChange:r.a.func.isRequired,disabled:r.a.bool};function gl(e){const{className:t,tooltipClassName:n,relAttr:o,onRelAttrChange:r,disabled:i}=e,a=(e,t)=>{let n;n=e===j.REGULAR?[]:t?[...o,e]:o.filter(t=>t!==e);r(n)};let s;s=i?Object(Ye.jsx)(ft.a,{message:pl("disabledTooltip")}):Object(Ye.jsxs)("span",{children:[Object(Ye.jsx)(ft.a,{message:pl("help")})," ",Object(Ye.jsx)(pn.a,{href:Ys.b,external:!0,onMouseDown:e=>e.preventDefault(),children:Object(Ye.jsx)(ft.a,{message:Object(Ys.d)("learnMore")})})]});return Object(Ye.jsx)(Vs.a,{className:t,_size:"small",children:Object(Ye.jsx)(Hs.a,{label:Nt.a.text(pl("label")),tooltip:s,tooltipPlacement:"top right",tooltipProps:{innerClassName:n},children:Object(Ye.jsx)(dl.a,{name:"rel-type",children:Object.values(j).map(e=>ml(e,o,a,i))})})})}gl.propTypes=hl;gl.displayName="LinkAdvancedPopoverControls";var bl=gl,vl=n(2655),yl=n(495);const Cl=e=>Object(Ye.jsx)(Le.a,Object.assign({use:"unstyled"},e));var Ol=l()(Cl).withConfig({displayName:"StyleProtectedSelectItem",componentId:"sc-1ge5are-0"})(["color:"," !important;background-color:"," !important;.is-focused > &{background-color:"," !important;}"],an.OBSIDIAN,an.OLAF,an.CALYPSO_LIGHT);const xl=e=>"RichTextLib.links."+e;class jl extends i.Component{constructor(e){super(e);this.fetchPublishedContent=Object(uo.a)(this.fetchPublishedContent.bind(this),200)}componentDidMount(){this.mounted=!0}componentWillUnmount(){this.mounted=!1}fetchPublishedContent(e,t,n={offset:0}){const{fetchPages:o}=this.props;o({term:e,offset:n.offset}).then(e=>{if(!this.mounted)return;const o=e.objects.map(e=>({text:e.name,value:e.url,help:e.url})),r=e.offset?this.state.fetchedPages.concat(o):o;this.setState({fetchedPages:r});t(null,{options:r,pagination:{hasMore:e.offset+e.limit<e.totalCount,length:e.totalCount,offset:n.offset+10}})},()=>{if(this.mounted){this.setState({fetchError:!0});t(null)}})}render(){const{url:e,onChange:t,dropdownClassName:n}=this.props;return Object(Ye.jsx)(Hs.a,{label:Nt.a.text(xl(`linkTypes.${h.PAGE}.label`)),className:"m-top-0",children:Object(Ye.jsx)(vl.a,{dropdownClassName:n,searchable:!0,cache:!1,loadOptions:this.fetchPublishedContent,filterOptions:!1,value:e,onSelectedOptionChange:({target:{value:e}})=>{t({url:e.value,pageName:e.text})},placeholder:Nt.a.text(xl(`linkTypes.${h.PAGE}.placeholder`))})})}}jl.propTypes={url:r.a.string.isRequired,onChange:r.a.func.isRequired,fetchPages:r.a.func.isRequired,dropdownClassName:r.a.string};const Sl=e=>`RichTextLib.links.linkTypes.${h.MEETING}.${e}`,wl=(e,t)=>e.name||Nt.a.text(Sl("defaultName"),{user:t});class Tl extends i.PureComponent{constructor(...e){super(...e);this.handleChange=({target:{value:e}})=>{this.props.onChange({url:e.options.url,meetingName:e.options.label})};this.fetchMeetingLinks=(e,t)=>{this.props.fetchMeetingsByUsers().then(e=>{const n=e.map(e=>({text:ls(e),userId:e.id,options:e.meetings.map(t=>({help:t.link,value:t.link,userId:t.userId,text:wl(t,ls(e)),options:{label:wl(t,ls(e)),url:t.link},id:t.id}))}));n.length?n.sort(hs(this.userId)):n.push({text:Nt.a.text(Sl("noMeetingsTitle")),disabled:!0,help:Object(Ye.jsx)(pn.a,{href:fs(),external:!0,children:Nt.a.text(Sl("noMeetingsHelp"))})});t(null,{options:n})})}}componentDidMount(){if(this.props.userId)this.userId=this.props.userId;else try{const{user:e}=Object(Ke.userInfoSync)();this.userId=e.user_id}catch(e){}this.mounted=!0}componentWillUnmount(){this.mounted=!1}render(){const{url:e,dropdownClassName:t}=this.props;return Object(Ye.jsx)(Hs.a,{label:Nt.a.text(Sl("label")),className:"m-top-0",children:Object(Ye.jsx)(vl.a,{dropdownClassName:t,searchable:!0,filterOptions:!0,value:e,loadOptions:this.fetchMeetingLinks,onSelectedOptionChange:this.handleChange,placeholder:Nt.a.text(Sl("placeholder"))})})}}Tl.propTypes={userId:r.a.number,fetchMeetingsByUsers:r.a.func.isRequired,onChange:r.a.func.isRequired,url:r.a.string,dropdownClassName:r.a.string};const kl=e=>`RichTextLib.links.linkTypes.${h.ANCHOR}.${e}`;class Nl extends i.PureComponent{constructor(e){super(e);this.handleChange=({target:{value:e}})=>{this.props.onChange({anchorName:e.value})};this.fetchAnchorLinks=(e,t)=>{this.mounted&&this.props.fetchAnchors(e).then(n=>{const o=[];let r;if(n.length){n.forEach(e=>{o.push({text:e.id,value:e.id})});o.sort(ms);r=!0}else if(e)r=!0;else{o.push({text:Nt.a.text(kl("noAnchorsTitle")),disabled:!0,help:Object(Ye.jsxs)(i.Fragment,{children:[Object(Ye.jsx)(ft.a,{message:kl("noAnchorsHelp")})," ",Object(Ye.jsx)(pn.a,{href:vs(),external:!0,children:Nt.a.text(kl("learnMore"))})]})});r=!1}this.setState({searchable:r},()=>{t(null,{options:o})})})};this.state={searchable:!0}}componentDidMount(){this.mounted=!0}componentWillUnmount(){this.mounted=!1}render(){const{anchor:e,dropdownClassName:t}=this.props;return Object(Ye.jsx)(Hs.a,{label:Nt.a.text(kl("label")),className:"m-top-0",children:Object(Ye.jsx)(vl.a,{dropdownClassName:t,"data-test-id":"anchor-link-dropdown",searchable:this.state.searchable,value:e,loadOptions:this.fetchAnchorLinks,onSelectedOptionChange:this.handleChange,placeholder:Nt.a.text(kl("placeholder"))})})}}Nl.propTypes={fetchAnchors:r.a.func.isRequired,onChange:r.a.func.isRequired,anchor:r.a.string,dropdownClassName:r.a.string};const El=e=>e.map(e=>{const{text:t,help:n,value:o}=S[e];return{text:Nt.a.text(C(t)),help:Nt.a.text(C(n)),value:o}});function Al(e){const{href:t,onUpdate:n,dropdownClassName:o,emailSubscriptionLinkTypes:r}=e;return Object(Ye.jsx)(Hs.a,{label:Nt.a.text(C(`linkTypes.${h.EMAIL_SUBSCRIPTION}.label`)),className:"m-top-0",children:Object(Ye.jsx)(vl.a,{dropdownClassName:o,searchable:!0,value:Va(t),onSelectedOptionChange:({target:{value:e}})=>{n({href:`{{ ${e.value} }}`,linkDisplayName:e.text})},options:El(r),placeholder:Nt.a.text(C(`linkTypes.${h.EMAIL_SUBSCRIPTION}.placeholder`))})})}Al.propTypes={onUpdate:r.a.func.isRequired,dropdownClassName:r.a.string,emailSubscriptionLinkTypes:r.a.array.isRequired,href:r.a.string};const Il=e=>"RichTextLib.links."+e,Rl=l()(cl.a).withConfig({displayName:"LinkFields__UrlPreview",componentId:"aizg97-0"})(["float:right;padding-top:12px;"]);class Ll extends i.Component{constructor(...e){super(...e);this.handleLinkTypeChange=({target:{value:e}})=>{this.props.onLinkTypeChange(e)};this.handleFileSelection=()=>{const{onSelectFile:e,onUpdate:t}=this.props;e(e=>{t({href:e.url,linkDisplayName:`${e.name}.${e.extension}`,fileMeta:{fileName:`${e.name}.${e.extension}`,size:e.size,type:e.type}})})}}renderUrlSearchInput(){const{href:e,onUpdate:t,linkType:n,shouldAutoFocus:o,isValidLink:r}=this.props,i=Object(Ye.jsx)(Hs.a,{label:Nt.a.text(Il(`linkTypes.${h.URL}.label`)),className:"m-top-0",error:!r,validationMessage:r?"":Nt.a.text(Il("invalidLinkMessage")),children:Object(Ye.jsx)(qs.a,{autoFocus:o,"data-test-id":"url-search-input",value:n===h.URL?e:"",onKeyDown:this.props.onUrlKeyDown,onChange:({target:{value:e}})=>{const n=Gs(e)?"http://"+e:e;t({href:n,linkDisplayName:n})}})});return Object(Ye.jsxs)("div",{children:[Object(Ye.jsx)(Rl,{children:Object(Ye.jsx)(pn.a,{external:!0,href:e,disabled:!e,children:Object(Ye.jsx)(ft.a,{message:Il(`linkTypes.${h.URL}.preview`)})})}),i]})}renderEmailInput(){const{href:e,onUpdate:t,shouldAutoFocus:n,isValidLink:o}=this.props;return Object(Ye.jsx)(Hs.a,{label:Nt.a.text(Il(`linkTypes.${h.EMAIL}.label`)),className:"m-top-0",error:!o,validationMessage:o?"":Nt.a.text(Il("invalidLinkMessage")),children:Object(Ye.jsx)(yl.a,{text:"mailto:",position:"start",children:Object(Ye.jsx)(qs.a,{autoFocus:n,onKeyDown:this.props.onUrlKeyDown,"data-test-id":"email-address-input",value:e.replace(/^mailto:/,""),onChange:({target:{value:e}})=>{const n=e.replace(/^mailto:/,"");t({href:"mailto:"+n,linkDisplayName:n})}})})})}renderPageSelection(){const{href:e,onUpdate:t,linkType:n,dropdownClassName:o,fetchPages:r,shouldAutoFocus:i}=this.props;return Object(Ye.jsx)(jl,{autoFocus:i,url:n===h.PAGE?e:"",fetchPages:r,dropdownClassName:o,onChange:({url:e,pageName:n})=>{t({href:e,linkDisplayName:n})}})}renderFileSelection(){const{currentFileMeta:e}=this.props;return Object(Ye.jsxs)("div",{children:[Object(Ye.jsx)(ul,{primaryText:Il(`linkTypes.${h.FILE}.label`),linkText:e?Il(`linkTypes.${h.FILE}.replace`):null,onLinkClick:this.handleFileSelection,"data-test-id":"link-file-replace"}),e?Object(Ye.jsx)($s.a,{className:"hs-link-field--file-attachment",size:"small",onCloseClick:()=>this.props.onUpdate({fileMeta:null,href:""}),fileName:e.fileName,fileInfo:Nt.a.formatSize(e.size),fileType:e.type,closeable:!0}):Object(Ye.jsx)(Le.a,{use:"tertiary-light",onClick:this.handleFileSelection,size:"small","data-test-id":"link-select-file",children:Nt.a.text(Il("selectFile"))})]})}renderEmailSubscriptionSelection(){const{href:e,onUpdate:t,linkType:n,dropdownClassName:o,emailSubscriptionLinkTypes:r}=this.props;return Object(Ye.jsx)(Al,{onUpdate:t,href:e,linkType:n,dropdownClassName:o,emailSubscriptionLinkTypes:r})}renderMeetingSelection(){const{userId:e,href:t,fetchMeetingsByUsers:n,dropdownClassName:o,onUpdate:r}=this.props;return Object(Ye.jsx)(Tl,{userId:e,url:t,fetchMeetingsByUsers:n,dropdownClassName:o,onChange:({url:e,meetingName:t})=>r({href:e,linkDisplayName:t})})}renderAnchorInput(){const{href:e,fetchAnchors:t,onUpdate:n,dropdownClassName:o}=this.props;return Object(Ye.jsx)(Nl,{anchor:Os(e),fetchAnchors:t,dropdownClassName:o,onChange:({anchorName:e})=>{n({href:Cs(e),linkDisplayName:e})}})}renderNoLinkInput(){return Object(Ye.jsx)(Hs.a,{label:Nt.a.text(Il("linkTypes.no_link.label")),className:"m-top-0",children:Object(Ye.jsx)(qs.a,{disabled:!0,value:Nt.a.text(Il("linkTypes.no_link.placeholder"))})})}renderUrlField(){const{linkType:e}=this.props;switch(e){case h.URL:return this.renderUrlSearchInput();case h.PAGE:return this.renderPageSelection();case h.EMAIL:return this.renderEmailInput();case h.FILE:return this.renderFileSelection();case h.EMAIL_SUBSCRIPTION:return this.renderEmailSubscriptionSelection();case h.MEETING:return this.renderMeetingSelection();case h.ANCHOR:return this.renderAnchorInput();case h.NONE:return this.renderNoLinkInput();default:return null}}renderLinkSelection(){const{linkType:e,useEmailSubscription:t,allowFileDownload:n,allowMeetingLink:o,allowAnchorLinks:r,useNoLinkOption:i,dropdownClassName:a,allowEmailWebVersionLink:s}=this.props,l=[{text:Nt.a.text(Il(`linkTypes.${h.EMAIL}.option`)),value:h.EMAIL},{text:Nt.a.text(Il(`linkTypes.${h.URL}.option`)),value:h.URL},{text:Nt.a.text(Il(`linkTypes.${h.PAGE}.option`)),value:h.PAGE}];s&&l.push({text:Nt.a.text(Il(`linkTypes.${h.VIEW_AS_WEBPAGE}.option`)),value:h.VIEW_AS_WEBPAGE});n&&l.push({text:Nt.a.text(Il(`linkTypes.${h.FILE}.option`)),value:h.FILE});t&&l.push({text:Nt.a.text(Il(`linkTypes.${h.EMAIL_SUBSCRIPTION}.option`)),value:h.EMAIL_SUBSCRIPTION});o&&l.push({text:Nt.a.text(Il(`linkTypes.${h.MEETING}.option`)),value:h.MEETING});r&&l.push({text:Nt.a.text(Il(`linkTypes.${h.ANCHOR}.option`)),value:h.ANCHOR});l.sort(ms);i&&l.unshift({text:Nt.a.text(Il(`linkTypes.${h.NONE}.option`)),value:h.NONE});return Object(Ye.jsxs)("div",{children:[Object(Ye.jsx)(Hs.a,{className:"m-bottom-1",label:Object(Ye.jsx)(ft.a,{message:Il("linkTo")}),children:Object(Ye.jsx)(vl.a,{dropdownClassName:a,menuStyle:{maxHeight:300},value:e,placeholder:Object(Ye.jsx)(ft.a,{message:Il("linkTypes.placeholder")}),options:l,defaultValue:"url",searchable:!1,"data-test-id":"link-type-select",onChange:this.handleLinkTypeChange,optionRenderer:e=>Object(Ye.jsx)(Ol,{title:e.text,children:Object(Ye.jsx)("span",{children:e.text})})})}),this.renderUrlField()]})}renderCheckboxes(){const{externalLink:e,linkType:t,showRefAndTargetControls:n,onUpdate:o,tooltipClassName:r}=this.props;if(n){const n=({target:{checked:e}})=>{o({externalLink:e})};let i=b.includes(t);const a=g.includes(t);i&&a!==e&&(i=!1);return Object(Ye.jsx)(fl.a,{className:"m-top-3",size:"small",checked:e||t===h.EMAIL,readOnly:i,disabled:t===h.NONE,onChange:n,children:Object(Ye.jsx)(mn.a,{className:r,title:Nt.a.text(Il("openNewWindowReadOnly"),{linkType:t}),placement:"top",disabled:!i,children:Object(Ye.jsx)(ft.a,{message:Il("openNewWindow")})})})}return null}render(){return Object(Ye.jsxs)("div",{children:[this.renderLinkSelection(),this.renderCheckboxes()]})}}Ll.propTypes={externalLink:r.a.bool.isRequired,href:r.a.string.isRequired,onUpdate:r.a.func.isRequired,onLinkTypeChange:r.a.func.isRequired,fetchPages:r.a.func.isRequired,fetchMeetingsByUsers:Qs("allowMeetingLink",r.a.func),fetchAnchors:Qs("allowAnchorLinks",r.a.func),linkType:r.a.oneOf(Object.values(h)),onSelectFile:Qs("allowFileDownload",r.a.func),onUrlKeyDown:r.a.func.isRequired,currentFileMeta:r.a.object,dropdownClassName:r.a.string,showRefAndTargetControls:r.a.bool,useEmailSubscription:r.a.bool,allowFileDownload:r.a.bool,allowMeetingLink:r.a.bool,emailSubscriptionLinkTypes:r.a.array,allowAnchorLinks:r.a.bool,useNoLinkOption:r.a.bool,shouldAutoFocus:r.a.bool,userId:r.a.number,isValidLink:r.a.bool,allowEmailWebVersionLink:r.a.bool,tooltipClassName:r.a.string};Ll.defaultProps={useEmailSubscription:!1,allowFileDownload:!0,allowAnchorLinks:!1,useNoLinkOption:!1,shouldAutoFocus:!0,isValidLink:!0,allowEmailWebVersionLink:!1};const _l=["className","canModifyLinkText","linkText"],Pl=e=>"RichTextLib.links."+e,Ml=(e,t,n)=>{if(!e)return null;const o=e=>{n({linkText:e.target.value})};return Object(Ye.jsx)(Hs.a,{className:"m-bottom-1",label:Nt.a.text(Pl("linkText.label")),children:Object(Ye.jsx)(qs.a,{"data-test-id":"link-text-input",autoFocus:e,value:t,onChange:o})})};function Dl(e){const{className:t,canModifyLinkText:n,linkText:o}=e,r=Object(d.a)(e,_l),i=t=>{if(t.key===hi.b.ENTER){e.onSubmit();t.preventDefault()}};return Object(Ye.jsxs)(Vs.a,{className:t,children:[Ml(n,o,e.onUpdate),Object(Ye.jsx)(Ll,Object.assign({},r,{shouldAutoFocus:!n,onUrlKeyDown:i}))]})}const Bl=Object.assign({},Object(Ir.g)(["onUrlKeyDown","shouldAutoFocus"],Ll.propTypes),{className:r.a.string,canModifyLinkText:r.a.bool,linkText:r.a.string});Dl.propTypes=Bl;Dl.displayName="LinkPopoverControlsV2";var Fl=Dl;const Ul=["help","tooltipClassName","label"],Vl="RichTextLib",Hl=e=>`${Vl}.lazyLoading.${e}`;function ql(e){const{help:t,tooltipClassName:n,label:o}=e,r=Object(d.a)(e,Ul),i=Object.keys(Ys.c).map(e=>({text:Nt.a.text(Hl("values."+e)),value:e}));return Object(Ye.jsx)(Hs.a,{label:Object(Ye.jsx)(ft.a,{message:Hl(o)}),help:t,tooltip:Object(Ye.jsx)(vi.a,{message:Hl("help"),options:{learnMoreLink:Object(Ye.jsx)(pn.a,{href:Ys.a,external:!0,onMouseDown:e=>e.preventDefault(),children:Object(Ye.jsx)(ft.a,{message:Vl+".shared.learnMore"})})}}),tooltipPlacement:"top",tooltipProps:{innerClassName:n},children:Object(Ye.jsx)(vl.a,Object.assign({options:i},r))})}var $l=ql;const zl=["relAttr","onLinkTypeChange","altText","loadingValue","onUpdate","onSave","onClose","imageFileInfo","onReplace","showRefAndTargetControls"],Wl="RichTextLib",Gl=e=>`${Wl}.image.${e}`,Kl=e=>`${Wl}.links.advanced.${e}`,Yl=l()($s.a).withConfig({displayName:"ImagePopoverBodyEdit__ImageFileAttachment",componentId:"sc-1pq43w8-0"})(["width:100%;"]),Xl=l()(zs.a).withConfig({displayName:"ImagePopoverBodyEdit__StyledImage",componentId:"sc-1pq43w8-1"})(["font-size:0;"]),Zl=({relAttr:e,onRelAttrChange:t,linkType:n,loadingValue:o,onLoadingValueChange:r,dropdownClassName:i,tooltipClassName:a,isSubmitDisabled:s,onSubmit:l,onCancel:c})=>({onCloseMorphedContent:u})=>Object(Ye.jsxs)(Ye.Fragment,{children:[Object(Ye.jsx)(bl,{className:"p-x-5 p-bottom-1",relAttr:e,onRelAttrChange:t,disabled:n===h.NONE,tooltipClassName:a}),Object(Ye.jsx)(Us.a,{distance:"xs"}),Object(Ye.jsx)(Vs.a,{className:"p-x-5 p-bottom-5",_size:"small",children:Object(Ye.jsx)($l,{tooltipClassName:a,dropdownClassName:i,onChange:r,value:o,label:"imageLabel"})}),Object(Ye.jsx)(ll,{className:"p-x-5 p-bottom-5",popoverType:hi.e.EDIT,isSubmitDisabled:s,onSubmit:()=>{l()||u()},onCancel:c})]}),Ql=({altText:e,imageFileInfo:t,onReplace:n})=>{const{name:o,size:r,src:i}=t;return Object(Ye.jsxs)(Ye.Fragment,{children:[Object(Ye.jsx)(ul,{primaryText:Gl("imagePreviewLabel"),linkText:Gl("replace"),onLinkClick:n}),Object(Ye.jsx)(Yl,{fileName:o,fileInfo:r?Nt.a.formatSize(r):void 0,renderPreview:()=>Object(Ye.jsx)(Xl,{alt:e,shape:"thumbnail",src:i})})]})},Jl=Object.assign({},Fl.propTypes,{relAttr:r.a.array,altText:r.a.string,imageFileInfo:r.a.object,onSave:r.a.func.isRequired,onReplace:r.a.func.isRequired,onClose:r.a.func.isRequired});function ec(e){const{relAttr:t,onLinkTypeChange:n,altText:o,loadingValue:r,onUpdate:a,onSave:s,onClose:l,imageFileInfo:c,onReplace:u,showRefAndTargetControls:f}=e,p=Object(d.a)(e,zl),[m,g]=Object(i.useState)(o),[b,v]=Object(i.useState)(r),[y,C,O]=Ws({linkType:e.linkType,href:e.href,isValidLink:e.isValidLink,onLinkTypeChange:n,onUpdate:a,onSubmit:s}),x=e=>{e.key===hi.b.ESCAPE&&l()},j=()=>O({altText:m,loadingValue:Ys.c[b]}),S=e=>{C({relAttr:e})},w=e=>{const{value:t}=e.target;g(t)},T=e=>{const{value:t}=e.target;v(t)},k="m-top-"+(e.showRefAndTargetControls?2:4),N=e.linkType!==h.NONE&&Ks(e.href);let E={};f&&(E={morphButtonTitle:Kl("title"),morphedContentTitle:Kl("title"),renderMorphedContent:Zl({relAttr:t,onRelAttrChange:S,linkType:e.linkType,loadingValue:b,onLoadingValueChange:T,dropdownClassName:e.dropdownClassName,tooltipClassName:e.tooltipClassName,isSubmitDisabled:N,onSubmit:j,onCancel:l})});return Object(Ye.jsx)("div",{className:"small-popover-body",tabIndex:"-1",children:Object(Ye.jsx)(ol,Object.assign({title:Gl("popoverTitle"),titleClassName:"p-x-5 p-top-5"},E,{children:Object(Ye.jsxs)("div",{onKeyDown:x,children:[Object(Ye.jsx)(Fl,Object.assign({},p,{className:"p-x-5 p-bottom-1",onLinkTypeChange:y,onUpdate:C,onSubmit:j,onClose:l,showRefAndTargetControls:f})),Object(Ye.jsx)(Us.a,{distance:"xs",className:k}),Object(Ye.jsxs)(Vs.a,{className:"p-x-5 p-bottom-2",_size:"small",children:[Ql({altText:m,imageFileInfo:c,onReplace:u}),Object(Ye.jsx)(Hs.a,{className:"",label:Object(Ye.jsx)(ft.a,{message:Gl("altTextLabel")}),tooltip:Object(Ye.jsx)(ft.a,{message:Gl("altTextHelp")}),tooltipPlacement:"top right",tooltipProps:{innerClassName:e.tooltipClassName},children:Object(Ye.jsx)(qs.a,{autoFocus:!0,name:"alt-text",value:m,onChange:w})})]}),Object(Ye.jsx)(ll,{className:"m-top-3 p-x-5 p-bottom-5",popoverType:hi.e.EDIT,isSubmitDisabled:N,onSubmit:j,onCancel:l})]})}))})}ec.propTypes=Jl;ec.displayName="ImagePopoverBodyEdit";var tc=ec;const nc=["mode","onModeChange","onSave","onImageRemove"];function oc(e){const{mode:t=hi.d.PREVIEW,onModeChange:n,onSave:o,onImageRemove:r}=e,i=Object(d.a)(e,nc);if(t===hi.d.PREVIEW){const e=()=>{n(hi.d.EDIT)};return Object(Ye.jsx)(Fs,Object.assign({},i,{onEdit:e,onRemove:r}))}const a=e=>{n(hi.d.PREVIEW);o(e)},s=()=>{n(hi.d.PREVIEW)};return Object(Ye.jsx)(tc,Object.assign({},i,{onSave:a,onClose:s}))}oc.displayName="ImagePopoverBodyBranch";var rc=Ss(oc);const ic="@@tinymce-plugins/",ac=e=>`${ic}${e}`,sc=ac("CLOSE_MODAL_COMPLETE"),lc=(ac("OPEN_LINK_MODAL"),ac("CLOSE_LINK_MODAL"),ac("CLOSE_LINK_MODAL_COMPLETE"),ac("SAVE_LINK"),ac("OPEN_CODE_EDITOR_MODAL")),cc=(ac("CLOSE_CODE_EDITOR_MODAL"),ac("SAVE_SOURCE_CODE")),uc=ac("OPEN_FILE_MANAGER_MODAL"),dc=(ac("CLOSE_FILE_MANAGER_MODAL"),ac("CLOSE_FILE_MANAGER_MODAL_COMPLETE"),ac("OPEN_EDIT_VIDEO_2_MODAL")),fc=(ac("CLOSE_EDIT_VIDEO_MODAL"),ac("SAVE_EDIT_VIDEO_MODAL")),pc=ac("OPEN_VIDEO_PICKER"),mc=(ac("CLOSE_VIDEO_PICKER"),ac("INSERT_VIDEO")),hc=(ac("OPEN_DISALLOWED_HTML_WARNING"),ac("SHOW_FLOATING_ALERT")),gc=(ac("CLOSE_ANY_MODAL"),ac("OPEN_VIDEO_CONVERSION_ASSET_OPTIONS")),bc=(ac("CLOSE_VIDEO_CONVERSION_ASSET_OPTIONS"),ac("SAVE_VIDEO_CONVERSION_ASSET_OPTIONS")),vc=ac("INSERT_IMAGE"),yc=ac("INSERT_FILE"),Cc=ac("OPEN_CTA_PICKER"),Oc=(ac("CLOSE_CTA_PICKER"),ac("INSERT_CTA")),xc=(ac("CLOSE_FORM_PICKER"),ac("MEDIA_MODAL_OPEN")),jc=(ac("MEDIA_MODAL_CLOSE"),ac("MEDIA_MODAL_SUBMIT"));ac("GOOGLE_MODAL_OPEN"),ac("GOOGLE_MODAL_CLOSE"),ac("GOOGLE_MODAL_SUBMIT");function Sc({type:e,modalId:t,initialPanel:n}){return{type:uc,fileType:e,initialPanel:n,modalId:t}}function wc(){return{type:pc}}function Tc(e){return{type:dc,videoId:e}}function kc(e,t){return{type:gc,conversionAsset:t,video:e}}const Nc=e=>{e.stopImmediatePropagation();e.preventDefault()},Ec=(e,{onOpen:t,onClose:n=(()=>{}),restoreSelection:o})=>{e.on("focusout",Nc,!0);let r;o&&(r=e.selection.getBookmark(1));const i=()=>{p.a.util.Delay.setEditorTimeout(e,()=>{e.focus();r&&e.selection.moveToBookmark(r);e.nodeChanged();n()});e.off("focusout",Nc)};t();e.once(sc,i)},Ac=({editor:e,callback:t,restoreSelection:n,onInsertEvent:o,fileType:r,initialPanel:i})=>{const a=e=>{t(e.action.file)};Ec(e,{restoreSelection:n,onOpen(){e.settings.bus.dispatchAction(Sc({type:r,initialPanel:i}));e.once(o,a)},onClose(){e.off(o,a);je()}})},Ic=e=>t=>{Ac({editor:e,callback:t,restoreSelection:!1,onInsertEvent:yc,fileType:"FILE"})},Rc=({editor:e,callback:t,restoreSelection:n})=>{const o=e=>{t(e.action.video)};Ec(e,{restoreSelection:n,onOpen(){e.settings.bus.dispatchAction(wc());e.once(mc,o)},onClose(){e.off(mc,o)}})};var Lc=n(1236);n(1283);function _c(e){return 0===e.indexOf("mailto:")||0===e.indexOf("tel:")}function Pc(e){return 0===e.indexOf("http:")||0===e.indexOf("https:")}function Mc(e){return Pc(e)||_c(e)}const Dc=Object(Ir.b)((e,t,n)=>!!n.id&&(t?n.id===e:n.id.toLowerCase().indexOf(e.toLowerCase())>=0)),Bc=e=>!!e&&("A"===e.nodeName&&!e.hasAttribute("href")&&!e.hasAttribute("onclick")&&(e.id||e.name||e.hasAttribute(ur.d))),Fc=e=>!(!e||e.nodeType!==Node.ELEMENT_NODE||e.hasAttribute("data-insert"))&&("A"===e.nodeName&&(e.hasAttribute(ur.e)||e.hasAttribute(ur.d))),Uc=(e,t="",n=!1)=>[...e.getDoc().querySelectorAll(`a[${ur.d}]`)].filter(Dc(t,n)),Vc=(e,t)=>{const n=t.getBoundingClientRect();if(e.settings.inline){const o=document.querySelector(e.settings.fixed_toolbar_container||""),r=o&&o.getBoundingClientRect();(r&&n.y<r.y||n.y>window.innerHeight)&&t.scrollIntoView()}else{const o=e.iframeElement.getBoundingClientRect();(n.y<=0||n.y>o.height)&&t.scrollIntoView()}},Hc=e=>{const t=Object(Ee.b)(e,ur.f.GET_ALL_CONTENT_ANCHORS);return(n="",o=!1)=>t?t().then(e=>e.filter(Dc(n,o))):Promise.resolve(Uc(e,n,o))},qc=(e,t)=>e?e.matches(ur.c.tier1)||e.matches(ur.c.tier2)?qc(e.parentElement,e):qc(e.parentElement,t):t,$c=(e,t)=>e?t.includes(e.nodeName)?e:$c(e.parentElement,t):null,zc=e=>{if(!e)return null;const t=$c(e,["LI","TD"]),n=$c(e,["TABLE"]),o=$c(e,["UL","OL"]);if(!t)return n||(o||null);const r=qc(t,null);return r||(o&&t===o.querySelector("li")?o:t.firstElementChild&&t.firstElementChild.tagName&&t.firstElementChild.getAttribute("data-hs-anchor")?t.childNodes[1]:t.firstChild)};var Wc=n(1284);const Gc=["linkText"],Kc=["href"],Yc=Object.assign({},hi.e),Xc=["SPAN","STRONG","EM","SUP","SUB","#text"],Zc=e=>""===e||"mailto:"===e;function Qc(e){if(!e||"A"!==e.nodeName)return!1;return Object(Ae.e)(e).reduce((e,t)=>e&&Xc.includes(t.nodeName),!0)}function Jc(e){return!!e&&(e.nodeType===Node.ELEMENT_NODE&&"A"===e.tagName&&!Fc(e))}function eu(e,t){if(!t)return!1;const n=e.dom.getParent(t,"a",e.getBody()),o=n&&n.hasAttribute("href"),r=n&&n.hasAttribute("data-mce-rss-link");return o&&!r}function tu(e,t){if(!t)return!1;const n=e.dom.getParent(t,"a",e.getBody());return n&&n.hasAttribute("data-insert")}function nu(e){return e.is("a")?e:e.parents("a").first()}function ou(e,t){if(!e.settings.contentDomain)return t;return`${e.settings.domainIsSsl?"https":"http"}://${e.settings.contentDomain}${t}`}function ru(e,t){return e.settings.absoluteUrl?`${e.settings.absoluteUrl}${t}`:t}function iu(e,t){return e.settings.absoluteUrl?`${e.settings.absoluteUrl}/${t}`:t}function au(e,t){return Mc(t)||Ua(t)||"#"===t[0]?t:"/"===t[0]?ou(e,t):iu(e,t)}const su=(e,t,n,o)=>{e.undoManager.transact(()=>{t.removeAttribute("data-insert");e.dom.setAttribs(t,o);if(n&&n.trim()&&t.innerText!==n){t.textContent=n;e.selection.select(t)}})};function lu(e,t){return t&&"#"===t[0]?ru(e,t):t}function cu(e,t,n,o){const{dom:r}=e,{linkText:i}=n,a=Object(d.a)(n,Gc);if(o===Yc.EDIT){if(!t||"A"!==t.nodeName)return;i&&i.trim()&&t.innerText!==i?Object(Lc.e)(()=>{su(e,t,i,a)}):su(e,t,i,a)}else o===Yc.INSERT&&e.undoManager.transact(()=>{const n=Object.assign({},a,{id:"__hsNewLink"});if(t&&"A"===t.nodeName)e.execCommand("mceInsertLink",!1,n);else{const t=r.createHTML("a",n,r.encode(i));e.insertContent(t)}const o=e.dom.get("__hsNewLink");e.dom.setAttrib(o,"id",null);e.selection.select(o)})}const uu=e=>()=>{const t=e.dom.select("a[data-insert]");Array.from(t).forEach(t=>{t.getAttribute("href")?e.dom.setAttrib(t,"data-insert",null):e.formatter.remove("link",{},t)})},du=(e,t)=>{e.undoManager.transact(()=>{e.formatter.remove("link",{},t);e.selection.select(t)})},fu=(e,t,n)=>{e.undoManager.transact(()=>{e.formatter.apply("link",n);e.selection.select(t)})},pu=(e,t,n)=>{const o=e.dom.getParent(t,"a");o?Zc(n.href)?du(e,t):e.undoManager.transact(()=>{e.dom.setAttribs(o,n)}):Zc(n.href)||fu(e,t,n)},mu=(e,t,n)=>{const o=t.attr("href")&&au(e,t.attr("href"));let r;if(n){const e=t.clone();Object(F.g)(e.children().filter("img[data-mce-property-name]:not([data-mce-rss-link])"),Object(Wc.d)());r=e.text()}else r=t.text();return{href:o,previewHref:lu(e,o),externalLink:t.attr("target")===cr.c,linkText:r,relAttr:t.attr("rel")?t.attr("rel").trim().split(" "):[]}},hu=e=>{const{href:t,relAttr:n,externalLink:o,linkText:r,allowRawLinksOnly:i}=e;n.includes("noopener")||n.push("noopener");const a=n.join(" ");let s=i?t:r;i&&s.startsWith("mailto:")&&(s=s.replace("mailto:",""));return{[cr.e.HREF]:t,[cr.e.REL]:a,[cr.e.TARGET]:o?cr.c:null,[cr.e.TEXT]:s}},gu=e=>{const{href:t}=e,n=Object(d.a)(e,Kc);return Object.assign({href:t||""},n)},bu=e=>{let t="";const n=e.getAttribute("href");n&&n.startsWith("mailto:")&&(t="mailto:");const o=e.cloneNode(!0);Object(F.g)(o.querySelectorAll("img[data-mce-property-name]:not([data-mce-rss-link])"),Object(Wc.d)());const r=`${t}${o.innerHTML}`;e.setAttribute("href",r);e.dataset.mceHref=r},vu=e=>{const{textContainsValidLink:t}=e.settings,n=e.dom.getParent(e.selection.getNode(),"a[href]");n&&"function"==typeof t&&!t(n.innerText)&&e.undoManager.ignore(()=>{const t=e.selection.getBookmark();e.execCommand("unlink");e.selection.moveToBookmark(t)})};var yu=n(1256);const Cu=["BLOG_POST","LISTING_PAGE","LANDING_PAGE","SITE_PAGE","KNOWLEDGE_ARTICLE"],Ou={},xu={};function ju(e){const t=Object(Lo.b)(e.get,Ro.a.PAGES_SEARCH.getUrl,Ou);return function(e){const n={query:Object.assign({type:Cu,restrictByPermissions:!0},e)};return t("",n)}}function Su(e){return function(t,n){let o={};n&&(o={redirectDomain:n,domain:n});return ju(e)(Object.assign({path:decodeURIComponent(t),offset:0},o))}}function wu(e){const t=Object(Lo.b)(e.get,Ro.a.MEETINGS.getUrl,xu);return function(){return t()}}function Tu(e){const t=Object(Lo.b)(e.get,Ro.a.MEETINGS_SEARCH.getUrl,xu);return function(e){const n=encodeURIComponent(e);return t(n)}}function ku(e){const t=Object(yu.a)(e),n=wu(e);return function(){return Promise.all([t(),n()]).then(([e,{results:t}])=>e.reduce((e,n)=>{const o=t.filter(e=>e.userId===n.id);return o.length?[...e,Object.assign({},n,{meetings:o})]:e},[]))}}const Nu=["editor","target","onUpdate","onLinkTypeChange","trackLinkUsageProps"],Eu=()=>{};var Au=e=>{function t(t){const{editor:n,target:o,onUpdate:r,onLinkTypeChange:i,trackLinkUsageProps:a}=t,s=Object(d.a)(t,Nu),{apiClient:l,scopes:c,userId:u}=n.settings,f=e=>{const t=hu(e);pu(n,o,t);r(e)},p=e=>{e===h.NONE&&du(n,o);i(e)},m=(e,t)=>{Object(Ie.b)(n,"tinymceLink",e,Object.assign({},t,a))},g=gu(mu(n,nu(n.$(o))));return Object(Ye.jsx)(e,Object.assign({scopes:c,userId:u,onUpdate:f,onLinkTypeChange:p,fetchFileByUrl:Po(l),fetchPageBySlug:Su(l),fetchMeetingsByUsers:ku(l),fetchMeetingBySlug:Tu(l),fetchAnchors:Hc(n),fetchPages:ju(l),onSelectFile:n.settings[$o.a]?Ic(n):di(n),trackLinkUsage:m,target:o},g,s))}t.propTypes={editor:r.a.object.isRequired,target:r.a.any,useNoLinkOption:r.a.bool,allowAnchorLinks:r.a.bool,allowFileDownload:r.a.bool,allowMeetingLink:r.a.bool,onUpdate:r.a.func,onLinkTypeChange:r.a.func,showRefAndTargetControls:r.a.bool,fetchPageBySlug:r.a.func,fetchMeetings:r.a.func,fetchMeetingBySlug:r.a.func,fetchAnchors:r.a.func,fetchPages:r.a.func,trackLinkUsage:r.a.func,trackLinkUsageProps:r.a.object,dropdownClassName:r.a.string};t.defaultProps={useNoLinkOption:!0,allowAnchorLinks:!0,allowFileDownload:!0,allowMeetingLink:!0,onUpdate:Eu,onLinkTypeChange:Eu,dropdownClassName:"mce-ui-select"};t.displayName=`WithLinkControl(${Object(Da.a)(e)})`;return t};const Iu=["editor","target","onSrcChange","onAltTextChange","onLoadingValueChange","onImageRemove"],Ru=Au(rc),Lu={editor:r.a.object.isRequired,target:r.a.exact(HTMLImageElement),altText:r.a.string,loadingValue:r.a.string,onSrcChange:r.a.func.isRequired,onAltTextChange:r.a.func.isRequired,onLoadingValueChange:r.a.func.isRequired,onImageRemove:r.a.func.isRequired};function _u(e){const{editor:t,target:n,onSrcChange:o,onAltTextChange:r,onLoadingValueChange:i,onImageRemove:a}=e,s=Object(d.a)(e,Iu),l=(o,a={})=>{const s=hu(o);pu(t,n,s);const{altText:l,loadingValue:c}=a;"string"==typeof l&&l!==e.altText&&r(n,l);c!==e.loadingValue&&i(n,c)};return Object(Ye.jsx)(Ru,Object.assign({},s,{editor:t,target:n,onSave:l,onReplace:o.bind(null,n),onImageRemove:a.bind(null,n),dropdownClassName:"mce-ui-select",tooltipClassName:"mce-image-tooltip",useNoLinkOption:!0}))}_u.propTypes=Lu;_u.displayName="ImagePopover";var Pu=_u;const Mu=["editor","mode","onModeChange","eventKey","fetchImageFileInfo"];function Du(e){const{editor:t,mode:n,onModeChange:o,eventKey:r,fetchImageFileInfo:a}=e,s=Object(d.a)(e,Mu),[l,c]=Object(i.useState)(null),[u,f]=Object(i.useState)(1),[p,m]=Object(i.useState)({}),[h,g]=Object(i.useState)({}),b=Object(i.useRef)(l);Object(i.useEffect)(()=>{b.current=l});const v=Object(i.useCallback)(()=>{if(b.current){c(null);m({})}},[]),y=Object(i.useCallback)(e=>{e===hi.d.EDIT&&m(ka(t,b.current));o(e)},[t,o]);Object(i.useEffect)(()=>{const e=()=>{y(hi.d.EDIT)};t.on("InsertLinkOnImage",e);return()=>t.off("InsertLinkOnImage",e)},[t,y]);Object(i.useEffect)(()=>{const e=({element:e})=>{if(e)if(e!==b.current){a(e).then(g);o(hi.d.PREVIEW);c(e);m({altText:t.dom.getAttrib(e,"alt")||"",loadingValue:t.dom.getAttrib(e,"loading","default")})}else f(e.outerHTML);else v()};t.on("hsNodeChange:"+r,e);return()=>t.off("hsNodeChange:"+r,e)},[t,v,o,r,a]);return Object(Ye.jsx)(Re.a,{"data-test-id":"image-popover-manager",editor:t,open:!!l,target:l,onRemove:v,arrowSize:"medium",placement:n===hi.d.EDIT?"right":"bottom",renderContent:e=>Object(Ye.jsx)(Pu,Object.assign({},s,p,{imageFileInfo:h,refreshKey:u,editor:t,target:l,mode:n,onModeChange:y,trackLinkUsageProps:{isImage:!0}},e))})}var Bu=Object(gi.a)(Du);const Fu={type:"DIVIDER"},Uu=[{type:"BUTTON",control:rn.O,priority:3},{type:"BUTTON",control:rn.G,priority:3}],Vu=[{type:"BUTTON",control:rn.e,priority:1},{type:"BUTTON",control:rn.f,priority:1},{type:"BUTTON",control:rn.b,priority:1},{type:"BUTTON",control:rn.g,priority:1},{type:"BUTTON",control:rn.d,priority:1}],Hu={type:"BUTTON",control:rn.c,menuItems:[]},qu=[{type:"BUTTON",control:rn.fb,priority:1},{type:"BUTTON",control:rn.hb,priority:1},{type:"BUTTON",control:rn.ib,priority:1}],$u={type:"BUTTON",control:rn.gb,menuItems:[]},zu=[{type:"BUTTON",control:rn.v}],Wu=[{type:"BUTTON",control:rn.K}],Gu={type:"BUTTON",control:rn.y},Ku=()=>[{controls:[{type:"BUTTON",control:rn.m},{type:"BUTTON",control:rn.M},...Uu]},{controls:[Fu]},{controls:Vu.slice(0,Vu.length-1)}],Yu=({useListButtons:e=!1,showLineHeight:t=!0,showMarginControls:n=!0}={})=>{const o=[{type:"BUTTON",control:e?rn.n:rn.m,priority:1},{type:"BUTTON",control:e?rn.N:rn.M,priority:1}];t&&o.push({type:"BUTTON",control:rn.I,priority:2});o.push(...Uu);o.push({type:"MORE_MENU",menuItems:[]});const r=[{controls:o,responsivePriority:0,boundary:0},{controls:[Fu]},{controls:[...Vu.slice(0,Vu.length-1),Hu],responsivePriority:1,boundary:0},{controls:[Fu]},{controls:[{type:"BUTTON",control:rn.J}]}],i=[{controls:zu}];n&&i.push({controls:[Fu],multiRowResponsive:!0},{controls:Wu,multiRowResponsive:!0});return[r,i]},Xu=({showAlignmentControls:e=!0,showFullWidthControl:t=!0,showMarginControls:n=!0}={})=>{let o=[];const r=e?0:Vu.length-1,i=Vu.length-(t?0:1);o=Vu.slice(r,i);const a=[{controls:[Gu]}];o.length&&a.push({controls:[Fu]},{controls:[...o,Hu],responsivePriority:0,boundary:0});const s=[{controls:zu}];n&&s.push({controls:[Fu],multiRowResponsive:!0},{controls:Wu,multiRowResponsive:!0});return[a,s]},Zu=({showAlignmentControls:e=!0,showMarginControls:t=!0}={})=>{let n=[];const o=e?0:Vu.length-1;n=Vu.slice(o);const r=[{controls:[...n,Hu],responsivePriority:0,boundary:0}],i=[{controls:zu}];t&&i.push({controls:[Fu],multiRowResponsive:!0},{controls:Wu,multiRowResponsive:!0});return[r,i]},Qu=()=>[[{controls:[Gu,...Uu]},{controls:[Fu]},{controls:[...qu,$u],responsivePriority:0,boundary:0},{controls:[Fu]},{controls:[{type:"BUTTON",control:rn.J}]}],[{controls:zu},{controls:[Fu],multiRowResponsive:!0},{controls:[{type:"BUTTON",control:rn.S,priority:1},{type:"BUTTON",control:rn.D,priority:2},{type:"MORE_MENU",menuItems:[]}],responsivePriority:1,boundary:0,multiRowResponsive:!0}]],Ju=({showMarginControls:e=!0}={})=>{const t=[{controls:[...Vu.slice(0,Vu.length-1),Hu],responsivePriority:0,boundary:0}];let n;n=e?[{controls:[{type:"BUTTON",control:rn.l},...Wu],multiRowResponsive:!0},{controls:[Fu],multiRowResponsive:!0},{controls:[{type:"BUTTON",control:rn.cb}],multiRowResponsive:!0}]:[{controls:[{type:"BUTTON",control:rn.l},{type:"BUTTON",control:rn.cb}],multiRowResponsive:!0}];return[t,[{controls:zu},{controls:[Fu],multiRowResponsive:!0},...n]]},ed=({canvasToolbar:e,showCellColorControls:t=!0})=>{const n=[];t&&n.push({type:"BUTTON",control:rn.y},{type:"BUTTON",control:rn.l});const o=[{controls:[...n,Object.assign({},$u,{menuItems:[rn.ib,rn.hb,rn.fb]}),{type:"BUTTON",control:rn.bb}]}];if(Array.isArray(e[0])){return[e[0],[...e[1],{controls:[Fu]},...o]]}return[...e,{controls:[Fu]},...o]},td=["contextualNodeAttributes"],nd=Object(Mr.a)("TinymcePlugins.hsimage");function od(e,t,n,o,r){const i=!Object(q.e)(e,H.d.DISABLE_SPACING),{[cr.d.ALLOW_FILE_DOWNLOAD]:a=!0,[cr.d.ALLOW_MEETING_LINKS]:s,[cr.d.ALLOW_ANCHOR_LINKS]:l,[cr.d.EMAIL_SUBSCRIPTION_LINK_TYPES]:c=[],[cr.d.HIDE_TARGET_BLANK_AND_NO_FOLLOW]:u}=Object(Ee.f)(e,cr.a,{}),f=({isActive:t})=>{if(t)e.fire("OpenImageEditPopover");else{n();Object(Ie.b)(e,"tinymceImage",G.ab,{method:"toolbar"})}},m=({element:t})=>!!t&&(!!Object(q.i)(e,t)&&t),h=t=>Object.assign({},ka(e,t),{marginIconType:fi.a.IMAGE,useFullWidth:!1}),g={showMarginControls:i};if("knowledge-base"===e.getParam($o.b).appName){g.useListButtons=!0;g.showLineHeight=!1}p.a.canvas.addNodeChangeHandler(e,{eventKey:t,isActiveNodeHandler:m,getActiveNodeAttributes:h,contextualToolbar:Yu(g)});const b={eventKey:t,fetchImageFileInfo:Na(e),allowFileDownload:a,useEmailSubscription:c.length>0,emailSubscriptionLinkTypes:c};e.on("mousedown",({target:t})=>{m({element:t})&&e.selection.select(t)});p.a.canvas.addButton(e,rn.E,{renderControl:t=>{const n=Object(d.a)(t,td);return Object(Ye.jsx)(pi,Object.assign({"data-test-id":"insert-image-button",ButtonComponent:mi.a,editor:e,iconName:"insertImage",i18nKey:nd,onClick:f,isActiveHandler:m},n))}});p.a.canvas.addMenuItem(e,rn.E,{text:nd("menuItem"),onClick:f});p.a.canvas.addPopover(e,t,{renderPopover:t=>Object(Ye.jsx)(Bu,Object.assign({editor:e,onSrcChange:n,onSelectFile:r,onImageRemove:Ea(e),onAltTextChange:Ra(e),onLoadingValueChange:La(e),allowMeetingLink:s,allowAnchorLinks:l,showRefAndTargetControls:!u},b,t))})}const rd=(e,t)=>{const n=t.body.querySelectorAll("img"),o=!!Object(q.e)(e,H.d.USE_ALIGNMENT_CLASSES),r=Object(q.e)(e,H.d.MAX_DIMENSION_WIDTH),i=!!Object(q.e)(e,H.d.AUTO_MAX_WIDTH),a=Object(q.d)(e);Array.from(n).forEach(e=>{o&&e.className.indexOf("hs-image-align-")<0&&e.classList.add(bi.a[zo.b.NONE]);if(r){const{width:t,height:n}=ga(r,e.width,e.height);if(t){e.setAttribute("width",""+t);e.style.width=""+t;i&&(e.style["max-width"]=""+t)}if(n){e.setAttribute("height",""+n);e.style.height="auto"}e.style.height||(e.style.height="auto")}a&&e.getAttribute("data-mce-paste")&&(e.loading=a)})},id=(e,t)=>{const n=t.body.querySelectorAll('img[data-mce-paste]:not([src*="blob:"])'),o=e.dom.select('img[data-mce-paste]:not([src*="blob:"])');Array.from(n).forEach((e,t)=>{e.removeAttribute("data-mce-paste");const n=o[t];!e.hasAttribute("width")&&n.naturalWidth&&e.setAttribute("width",n.naturalWidth);!e.hasAttribute("height")&&n.naturalHeight&&e.setAttribute("height",n.naturalHeight)})},ad=e=>{Object(F.b)(e,t=>{rd(e,t)});Object(F.a)(e,t=>{id(e,t)})};function sd(e,t){const n=_a(e);e.on("ObjectResized ObjectResizeStart",n);let o,r;e.on("dragStart",e=>{const{target:t}=e;if("IMG"===t.nodeName&&"A"===t.parentNode.nodeName&&1===t.parentNode.children.length){o=t.parentNode;r=t}});e.on("dragEnd",t=>{if(!r||!o)return;const n=e.selection.getNode();"A"!==n.parentNode.nodeName&&e.undoManager.transact(()=>{const i=e.selection.getBookmark();o.innerHTML=r.outerHTML;e.dom.replace(o,n);e.selection.moveToBookmark(i);t.preventDefault();t.stopPropagation()});r=null;o=null});const i=Ma(e);e.on("hsAlignmentChange",({target:t,alignment:n})=>{Object(q.i)(e,t)&&i(t,n)});const a=Ia(e);e.on("hsMarginChange",({target:t,margin:n})=>{Object(q.i)(e,t)&&a(t,n)});e.on("hsDimensionChange",({target:t,dimensions:o={}})=>{Object(q.i)(e,t)&&n(Object.assign({target:t,constrained:!0},o))});"knowledge-base"===Object(Ee.f)(e,"appName")&&e.on("ObjectSelected",e=>{const{classList:t,tagName:n}=e.target;(t.contains(bi.a[zo.b.LEFT])||t.contains(bi.a[zo.b.RIGHT]))&&"IMG"===n&&e.preventDefault()});const s=Object(uo.a)(()=>{t();Object(Ie.b)(e,"tinymceEdit",G.c)},200);e.on("openDisallowedImageUploadAlert",s)}const ld=B.y;function cd(){return()=>{ni.a.addAlert({titleText:Nt.a.text("TinymcePlugins.hsimage.disallowedImageUploadAlert.heading"),message:Nt.a.text("TinymcePlugins.hsimage.disallowedImageUploadAlert.message"),type:"warning"})}}function ud(e,t){return n=>{const o=Aa(e,n,t);ci(e,ti.a.IMAGE,o,t)}}function dd(e){Object(wt.a)(e,"FilePicker","FilePicker picker component is required for the image plugin");e.settings.images_upload_handler&&(e.settings.images_upload_handler=e.settings.images_upload_handler.bind(null,e));const t=ud(e),n=ud(e,"IMAGE_GENERATION");e.on("hsimage:openGeneratePanel",()=>n());od(e,ld,t,n,di(e));ad(e);sd(e,cd(e))}p.a.PluginManager.add(ld,dd);function fd({id:e,titleText:t,message:n,type:o,timeout:r=6e3}){return{type:hc,meta:{notification:{id:e,titleText:t,message:n,type:o,timeout:r}}}}const pd=B.z;function md(e,t){return n=>{Ac({editor:e,callback:Aa(e,n,t),restoreSelection:!1,onInsertEvent:vc,fileType:"IMAGE",initialPanel:t})}}function hd(e){return()=>{e.settings.bus.dispatchAction(fd({id:e.id+"-image-upload-failure",titleText:Nt.a.text("TinymcePlugins.hsimage.disallowedImageUploadAlert.heading"),message:Nt.a.text("TinymcePlugins.hsimage.disallowedImageUploadAlert.message"),type:"warning"}))}}function gd(e){e.settings.images_upload_handler&&(e.settings.images_upload_handler=e.settings.images_upload_handler.bind(null,e));const t=md(e),n=md(e,"IMAGE_GENERATION");e.on("hsimage:openGeneratePanel",()=>n());od(e,pd,t,n,Ic(e));ad(e);sd(e,hd(e))}p.a.PluginManager.add(pd,gd);function bd(e){return e[cr.e.HREF]}function vd(e){return Object(Ee.f)(e,cr.a)}function yd(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Cd(e,t){if(!t||!e)return t;const n=new RegExp("^https?://"+yd(e));return t.replace(/(^\w+:|^)\/\//,"").split("/")[0]===e?t.replace(n,"")||"/":t}function Od(e,t,n,o){if(!n[cr.e.HREF]){e.execCommand("unlink");return}n[cr.e.TEXT]||!e.selection.isCollapsed()||eu(e,t)||(n[cr.e.TEXT]=n[cr.e.HREF]);Object(Ee.e)(e,cr.d.ALLOW_RELATIVE_LINKS)&&(n[cr.e.HREF]=Cd(e.settings.contentDomain,bd(n)));cu(e,t,n,o)}const xd=(e,t,n,o)=>{Od(e,t,hu(n),o)},jd=e=>t=>{if(!t.startsWith("#"))return;const n=e.$(t)[0];n&&n.scrollIntoView({behavior:"smooth"})},Sd=e=>t=>{eu(e,t.target)&&t.preventDefault()};var wd=n(1287);const Td=["onEdit","onUnlink","href"],kd=e=>"RichTextLib.links.lite."+e,Nd=Object.assign({onEdit:r.a.func.isRequired,onUnlink:r.a.func.isRequired},Ps.propTypes);function Ed(e){const{onEdit:t,onUnlink:n,href:o}=e,r=Object(d.a)(e,Td),[a]=Object(i.useState)([{iconName:hi.c.EDIT,onClick:t},{iconName:hi.c.UNLINK,onClick:n}]),s=o?Object(Ye.jsx)(Ps,Object.assign({},r,{href:o,className:"p-left-3 "+(e.linkType===h.ANCHOR?"p-right-2":"p-right-1"),alignSelf:"center"})):null;return Object(Ye.jsx)(ws.a,{"data-test-id":"edit-link-popover-body-lite",iconButtons:a,i18nKey:kd,children:s})}Ed.propTypes=Nd;Ed.displayName="EditLinkPopoverBodyLite";var Ad=Ed;const Id=["allowRawLinksOnly","popoverType","relAttr","linkType","onLinkTypeChange","onUpdate","onSubmit","onClose","renderLinkPopoverAlert"],Rd=e=>"RichTextLib.links."+e,Ld=Object.assign({},Fl.propTypes,{popoverType:r.a.oneOf(Object.values(hi.e)),relAttr:r.a.array,onSubmit:r.a.func.isRequired,onClose:r.a.func.isRequired,renderLinkPopoverAlert:r.a.func});function _d(e){const{allowRawLinksOnly:t,popoverType:n,relAttr:o,linkType:r,onLinkTypeChange:a,onUpdate:s,onSubmit:l,onClose:c,renderLinkPopoverAlert:u}=e,f=Object(d.a)(e,Id),[p,m,h]=Ws({linkType:e.linkType,href:e.href,isValidLink:e.isValidLink,onLinkTypeChange:a,onUpdate:s,onSubmit:l}),g=e=>{e.key===hi.b.ESCAPE&&c()},b=e=>{m({relAttr:e})},v=Ks(e.href)||Ks(e.linkText)&&!t;let y={};e.showRefAndTargetControls&&(y={morphButtonTitle:Rd("advanced.title"),morphedContentTitle:Rd("advanced.title"),renderMorphedContent:({onCloseMorphedContent:t})=>Object(Ye.jsxs)(i.Fragment,{children:[Object(Ye.jsx)(bl,{relAttr:o,onRelAttrChange:b,tooltipClassName:e.tooltipClassName}),Object(Ye.jsx)(ll,{className:"m-top-3",popoverType:n,isSubmitDisabled:v,linkType:r,onSubmit:()=>{h()||t()},onCancel:c})]})});return Object(Ye.jsx)(ol,Object.assign({title:Rd(n+"Title")},y,{children:Object(Ye.jsxs)("div",{onKeyDown:g,children:[Object(Ye.jsx)(Fl,Object.assign({},f,{linkType:r,onLinkTypeChange:p,onUpdate:m,onSubmit:h,onClose:c})),Object(Ye.jsx)(ll,{className:e.showRefAndTargetControls?"m-top-3":"m-top-5",popoverType:n,isSubmitDisabled:v,linkType:r,onSubmit:h,onCancel:c,renderLinkPopoverAlert:u})]})}))}_d.propTypes=Ld;_d.displayName="MorphingLinkPopoverBody";var Pd=_d;const Md=["onSave"],Dd=Object.assign({onSave:r.a.func.isRequired},Object(Ir.g)(["onSubmit"],Pd.propTypes));function Bd(e){const{onSave:t}=e,n=Object(d.a)(e,Md);return Object(Ye.jsx)("div",{className:"animated-popover-edit small-popover-body p-all-5",children:Object(Ye.jsx)(Pd,Object.assign({},n,{popoverType:hi.e.EDIT,onSubmit:t}))})}Bd.propTypes=Dd;Bd.displayName="EditLinkPopoverBodyExpanded";var Fd=Bd;const Ud=["mode","onModeChange","onSave","onClose"],Vd={mode:r.a.oneOf(Object.values(hi.d)),onModeChange:r.a.func.isRequired,onSave:r.a.func.isRequired,onClose:r.a.func.isRequired,renderLinkPopoverAlert:r.a.func},Hd=(e,t)=>{const n=Object(Ir.i)(Object.keys(Ad.propTypes),e);return Object(Ye.jsx)(Ad,Object.assign({},n,{onEdit:t}))},qd=(e,t,n)=>{const o=Object(Ir.i)(Object.keys(Fd.propTypes),e);return Object(Ye.jsx)(Fd,Object.assign({},o,{onSave:t,onClose:n}))};function $d(e){const{mode:t,onModeChange:n,onSave:o,onClose:r}=e,i=Object(d.a)(e,Ud),a=()=>{n();o()},s=()=>{n();r()};return Object(Ye.jsx)("div",{className:"animated-popover-body",tabIndex:"-1",children:Object(Ye.jsx)(wd.CSSTransitionGroup,{className:"animated-transition",transitionName:"animated-popover",transitionEnterTimeout:100,transitionLeaveTimeout:100,children:t===hi.d.PREVIEW?Object(Ye.jsx)("div",{children:Hd(i,()=>n())},0):Object(Ye.jsx)("div",{children:qd(i,a,s)},1)})})}$d.propTypes=Vd;$d.displayName="EditLinkPopoverBodyV2";var zd=Ss($d);class Wd extends i.Component{constructor(...e){super(...e);this.handleTogglePopover=({shouldOpen:e=!0})=>{this.props.onModeChange(e?hi.d.EDIT:hi.d.PREVIEW)};this.handleUpdate=e=>{""!==e.href&&this.props.open&&this.props.onUpdate(e)};this.handleSave=e=>{this.props.onUpdate(e);this.handleClose()};this.handleClose=()=>{this.props.onClose();this.props.onModeChange(hi.d.PREVIEW)};this.trackLinkUsage=(e,t)=>{Object(Ie.b)(this.props.editor,"tinymceLink",e,t)}}componentDidMount(){this.props.editor.on("ToggleLinkEditPopover",this.handleTogglePopover)}componentWillUnmount(){this.props.editor.off("ToggleLinkEditPopover",this.handleTogglePopover)}render(){const{children:e,editor:t,target:n,onSelectFile:o,onRemove:r,fetchPages:i,fetchMeetingsByUsers:a,fetchAnchors:s,fetchMeetingBySlug:l,fetchFileByUrl:c,showRefAndTargetControls:u,useEmailSubscription:d,allowFileDownload:f,allowMeetingLink:p,allowRawLinksOnly:m,emailSubscriptionLinkTypes:h,allowAnchorLinks:g,fetchPageBySlug:b,mode:v,onModeChange:y,open:C,externalLink:O,linkText:x,href:j,relAttr:S,onAnchorPreviewClick:w,allowEmailWebVersionLink:T}=this.props,k=!m&&Qc(n);return Object(Ye.jsx)(Re.a,{placement:"bottom",editor:t,target:n,onRemove:r,open:!!n&&C,animateOnToggle:!1,renderContent:()=>Object(Ye.jsx)(zd,{dropdownClassName:"mce-ui-select",tooltipClassName:"mce-link-tooltip",externalLink:O,linkText:x,canModifyLinkText:k,href:j,relAttr:S,fetchPages:i,fetchMeetingsByUsers:a,fetchAnchors:s,fetchMeetingBySlug:l,onSelectFile:o,showRefAndTargetControls:u,useEmailSubscription:d,allowFileDownload:f,allowMeetingLink:p,allowRawLinksOnly:m,emailSubscriptionLinkTypes:h,allowAnchorLinks:g,fetchPageBySlug:b,fetchFileByUrl:c,mode:v,onModeChange:y,scopes:t.settings.scopes,userId:t.settings.userId,trackLinkUsage:this.trackLinkUsage,onAnchorPreviewClick:w,onSave:this.handleSave,onClose:this.handleClose,renderLinkPopoverAlert:t.settings.renderLinkPopoverAlert,allowEmailWebVersionLink:T}),children:e})}}Wd.propTypes={children:r.a.object,editor:r.a.object.isRequired,open:r.a.bool.isRequired,onRemove:r.a.func.isRequired,target:r.a.instanceOf(HTMLAnchorElement),linkText:r.a.string.isRequired,href:r.a.string.isRequired,onSelectFile:r.a.func.isRequired,externalLink:r.a.bool.isRequired,relAttr:r.a.array,onClose:r.a.func.isRequired,onUpdate:r.a.func.isRequired,showRefAndTargetControls:r.a.bool.isRequired,fetchPageBySlug:r.a.func.isRequired,fetchPages:r.a.func.isRequired,fetchMeetingsByUsers:r.a.func.isRequired,fetchAnchors:r.a.func.isRequired,fetchMeetingBySlug:r.a.func.isRequired,fetchFileByUrl:r.a.func.isRequired,useEmailSubscription:r.a.bool,allowFileDownload:r.a.bool,allowMeetingLink:r.a.bool,allowRawLinksOnly:r.a.bool,emailSubscriptionLinkTypes:r.a.array,allowAnchorLinks:r.a.bool,mode:r.a.oneOf(Object.values(hi.d)),onModeChange:r.a.func,onAnchorPreviewClick:r.a.func,allowEmailWebVersionLink:r.a.bool};var Gd=Object(gi.a)(Wd);const Kd=["onInsert"],Yd=Object.assign({onInsert:r.a.func.isRequired},Object(Ir.g)(["onSubmit"],Pd.propTypes));function Xd(e){const{onInsert:t}=e,n=Object(d.a)(e,Kd);return Object(Ye.jsx)("div",{className:"small-popover-body p-all-5",children:Object(Ye.jsx)(Pd,Object.assign({},n,{popoverType:hi.e.INSERT,onSubmit:t}))})}Xd.propTypes=Yd;Xd.displayName="InsertLinkPopoverBodyV2";var Zd=Xd;const Qd=["relAttr"];class Jd extends i.Component{constructor(e){super(e);this.handleInsert=()=>{const{linkType:e,href:t}=this.state,{fetchMeetingBySlug:n,fetchPageBySlug:o,fetchFileByUrl:r}=this.props;switch(e){case h.PAGE:{const{domain:e,slug:n}=as(t);o(n,e).catch(e=>console.error(e));break}case h.FILE:r(t).catch(e=>console.error(e));break;case h.MEETING:n(ss(t)).catch(e=>console.error(e));break}this.setState({didInsert:!0},()=>{this.props.onRemove()})};this.handleUpdate=e=>{this.setState(e)};this.handleCloseComplete=()=>{if(this.state.didInsert){this.props.onInsert(this.state);this.trackLinkInsertion()}this.props.removeUnInsertedLinks()};this.handleRemove=()=>{this._mounted&&this.props.onRemove();this.props.removeUnInsertedLinks()};this.handleLinkTypeChange=e=>{const t=e===h.VIEW_AS_WEBPAGE?"{{ view_as_page_url }}":"";this.setState({linkType:e,externalLink:g.includes(e),href:t,fileMeta:null,isValidLink:!0})};this.state=Object.assign({},this._getInitialState(),{linkText:e.selectedText})}componentDidMount(){this._mounted=!0}componentDidUpdate({open:e}){const{open:t,selectedText:n}=this.props;t&&!e&&this.setState(Object.assign({},this._getInitialState(),{linkText:n}))}componentWillUnmount(){this._mounted=!1}_getInitialState(){return{href:"",externalLink:!1,relAttr:[],linkText:"",fetchedPages:[],likelyUrlMatches:!1,fileMeta:null,linkType:h.URL,isValidLink:!0}}trackLinkInsertion(){const e=Object(Ir.i)(O,this.state),{relAttr:t}=e,n=Object(d.a)(e,Qd);Object(Ie.b)(this.props.editor,"tinymceLink",G.L,Object.assign({},n,gs(t)))}render(){const{children:e,editor:t,target:n,fetchPages:o,fetchMeetingsByUsers:r,fetchAnchors:i,mountedToText:a,onSelectFile:s,showRefAndTargetControls:l,useEmailSubscription:c,allowFileDownload:u,allowMeetingLink:d,emailSubscriptionLinkTypes:f,allowAnchorLinks:p,allowRawLinksOnly:m,canModifyLinkText:h,open:g,allowEmailWebVersionLink:b}=this.props,{href:v,externalLink:y,relAttr:C,linkType:O,fileMeta:x,linkText:j,isValidLink:S}=this.state,w=Zd;return Object(Ye.jsx)(Re.a,{open:g,target:n,editor:t,arrowSize:a?"medium":"none",placement:a?"bottom":"bottom right",onRemove:this.handleRemove,closeOnOutsideClick:!a,onOpenChange:a?null:this.handleRemove,onCloseComplete:this.handleCloseComplete,animateOnToggle:!1,renderContent:()=>Object(Ye.jsx)(w,{dropdownClassName:"mce-ui-select",tooltipClassName:"mce-link-tooltip",href:v,isValidLink:S,externalLink:y,relAttr:C,linkText:j,linkType:O,currentFileMeta:x,fetchPages:o,fetchMeetingsByUsers:r,fetchAnchors:i,onClose:this.handleRemove,onLinkTypeChange:this.handleLinkTypeChange,onUpdate:this.handleUpdate,onInsert:this.handleInsert,onSelectFile:s,showRefAndTargetControls:l,useEmailSubscription:c,allowFileDownload:u,allowMeetingLink:d,emailSubscriptionLinkTypes:f,allowAnchorLinks:p,allowRawLinksOnly:m,canModifyLinkText:h,scopes:t.settings.scopes,userId:t.settings.userId,renderLinkPopoverAlert:t.settings.renderLinkPopoverAlert,allowEmailWebVersionLink:b}),children:e})}}Jd.propTypes={children:r.a.object,open:r.a.bool.isRequired,editor:r.a.object.isRequired,onRemove:r.a.func.isRequired,target:r.a.oneOfType([r.a.exact(HTMLAnchorElement),r.a.exact(HTMLSpanElement)]),selectedText:r.a.string,fetchPages:r.a.func.isRequired,fetchMeetingsByUsers:r.a.func.isRequired,fetchMeetingBySlug:r.a.func.isRequired,fetchPageBySlug:r.a.func.isRequired,fetchFileByUrl:r.a.func.isRequired,fetchAnchors:r.a.func.isRequired,onInsert:r.a.func.isRequired,mountedToText:r.a.bool.isRequired,onSelectFile:r.a.func.isRequired,showRefAndTargetControls:r.a.bool.isRequired,useEmailSubscription:r.a.bool,allowFileDownload:r.a.bool,allowMeetingLink:r.a.bool,emailSubscriptionLinkTypes:r.a.array,allowAnchorLinks:r.a.bool,canModifyLinkText:r.a.bool,allowRawLinksOnly:r.a.bool,removeUnInsertedLinks:r.a.func,allowEmailWebVersionLink:r.a.bool};var ef=n(2824);function tf(e){const{editor:t,onChangeLink:n,onSelectFile:o,fetchPages:r,fetchMeetingsByUsers:a,fetchAnchors:s,fetchMeetingBySlug:l,fetchPageBySlug:c,fetchFileByUrl:u,showRefAndTargetControls:d,useEmailSubscription:f,allowFileDownload:p,allowMeetingLink:m,allowRawLinksOnly:h,emailSubscriptionLinkTypes:g,allowAnchorLinks:b,removeUnInsertedLinks:v,eventKey:y,allowEmailWebVersionLink:C}=e,{inlineTarget:O,setInlineTarget:x,initInlineTarget:j}=Object(ef.a)(t,null),[S,w]=Object(i.useState)(""),[T,k]=Object(i.useState)(hi.e.INSERT),[N,E]=Object(i.useState)(null),A=Object(i.useRef)(O),I=Object(i.useCallback)(({fullRemove:e,restoreSelection:t}={})=>{if(A.current||e){x(null,{restoreSelection:t});E(null)}},[x]),R=e=>{n(A.current,Object.assign({},e,{allowRawLinksOnly:h}),hi.e.INSERT)},L=e=>{n(A.current,Object.assign({},e,{allowRawLinksOnly:h}),hi.e.EDIT)};Object(i.useEffect)(()=>{A.current=O});Object(i.useEffect)(()=>{const e=()=>{const e=t.selection.getContent({format:"text"});if(A.current)I({restoreSelection:!0});else{k(hi.e.INSERT);if(Object(Ee.h)(e)||h){w("");j()}else{t.formatter.apply("link",{href:null,"data-insert":!0});w(e);const n=t.dom.getParent(t.selection.getSel().anchorNode,"a");x(n,{removeTargets:!0})}}};t.on("OpenLinkPopover",e);return()=>t.off("OpenLinkPopover",e)},[t,h,x,j,I]);Object(i.useEffect)(()=>{const e=({element:e})=>{if(!e){I();return}if(e.hasAttribute("data-mce-inline-target"))return;if(e.hasAttribute("data-insert"))return;const n=Object(Ae.h)(e,A.current);if(e!==A.current){I({fullRemove:!0});k(hi.e.EDIT);x(e)}else n&&A.current&&t.fire("ToggleLinkEditPopover",{shouldOpen:!1});const o=mu(t,t.$(e),h);E(o)};t.on("hsNodeChange:"+y,e);return()=>t.off("hsNodeChange:"+y,e)},[t,y,h,x,I]);Object(i.useEffect)(()=>{if(h){const e=()=>{if(A.current){const e=mu(t,t.$(A.current),h);E(e)}};t.on("KeyUp",e);return()=>t.off("KeyUp",e)}},[t,h]);return T===hi.e.INSERT?Object(Ye.jsx)(Jd,{editor:t,open:!!O,target:O,onRemove:I,fetchPages:r,fetchPageBySlug:c,fetchFileByUrl:u,fetchMeetingsByUsers:a,fetchMeetingBySlug:l,fetchAnchors:s,onSelectFile:o,showRefAndTargetControls:d,useEmailSubscription:f,allowFileDownload:p,allowMeetingLink:m,allowRawLinksOnly:h,emailSubscriptionLinkTypes:g,allowAnchorLinks:b,selectedText:S,mountedToText:!0,canModifyLinkText:Object(Ee.h)(S)&&!h,onInsert:R,removeUnInsertedLinks:v,allowEmailWebVersionLink:C}):T===hi.e.EDIT&&null!==N?Object(Ye.jsx)(Gd,Object.assign({editor:t,open:!!O,target:O,onRemove:I,fetchPages:r,fetchMeetingsByUsers:a,fetchAnchors:s,fetchMeetingBySlug:l,onSelectFile:o,showRefAndTargetControls:d,useEmailSubscription:f,allowFileDownload:p,allowMeetingLink:m,allowRawLinksOnly:h,emailSubscriptionLinkTypes:g,allowAnchorLinks:b,fetchPageBySlug:c,fetchFileByUrl:u,onUpdate:L,onAnchorPreviewClick:jd(t),onClose:()=>t.focus(),allowEmailWebVersionLink:C},N)):null}var nf=tf,of=n(1273);const rf=Object(Mr.a)("TinymcePlugins.hsicon"),af="data-hs-icon-image",sf="data-hs-icon-hubl",lf="data-hs-icon-info",cf="data:image/svg+xml;base64,",uf={setName:"fontawesome-6.4.2",name:"Gear",type:of.d.SOLID,size:"16",color:an.OBSIDIAN,purpose:of.e.DECORATIVE,title:""},df="M 16 25.04 a 9.2 9.2 0 0 0 9.14 -8.36 L 8.88 21.6 A 9.17 9.17 0 0 0 16 25.04 Z M 16 6.59 a 9.2 9.2 0 0 0 -9.13 8.36 L 23.12 10.03 A 9.17 9.17 0 0 0 16 6.59 Z M 30.11 18 a 3.75 3.75 0 0 0 0.94 -2.18 a 3.75 3.75 0 0 0 -0.94 -2.18 a 3.3 3.3 0 0 1 -0.54 -0.91 a 3.37 3.37 0 0 1 0.09 -1.11 a 3.7 3.7 0 0 0 -0.09 -2.33 a 3.72 3.72 0 0 0 -1.78 -1.54 a 3.34 3.34 0 0 1 -0.91 -0.6 a 3.36 3.36 0 0 1 -0.39 -1 a 3.72 3.72 0 0 0 -1.1 -2.07 a 3.71 3.71 0 0 0 -2.25 -0.61 A 3.37 3.37 0 0 1 22 3.28 A 3.34 3.34 0 0 1 21.26 2.5 a 3.73 3.73 0 0 0 -1.91 -1.4 a 3.68 3.68 0 0 0 -2.27 0.43 A 3.4 3.4 0 0 1 16 1.9 a 3.4 3.4 0 0 1 -1.08 -0.34 a 3.68 3.68 0 0 0 -2.27 -0.43 A 3.74 3.74 0 0 0 10.74 2.5 a 3.33 3.33 0 0 1 -0.78 0.74 a 3.36 3.36 0 0 1 -1.09 0.16 a 3.71 3.71 0 0 0 -2.25 0.61 a 3.72 3.72 0 0 0 -1.1 2.07 a 3.35 3.35 0 0 1 -0.39 1 a 3.34 3.34 0 0 1 -0.91 0.6 A 3.73 3.73 0 0 0 2.43 9.28 a 3.7 3.7 0 0 0 -0.09 2.33 a 3.39 3.39 0 0 1 0.09 1.11 a 3.31 3.31 0 0 1 -0.54 0.92 a 3.75 3.75 0 0 0 -0.94 2.18 a 3.75 3.75 0 0 0 0.94 2.18 a 3.3 3.3 0 0 1 0.54 0.91 a 3.37 3.37 0 0 1 -0.09 1.11 a 3.7 3.7 0 0 0 0.09 2.33 a 3.72 3.72 0 0 0 1.78 1.54 a 3.34 3.34 0 0 1 0.91 0.6 a 3.36 3.36 0 0 1 0.39 1 a 3.72 3.72 0 0 0 1.1 2.07 a 3.71 3.71 0 0 0 2.25 0.61 a 3.37 3.37 0 0 1 1.09 0.16 a 3.34 3.34 0 0 1 0.78 0.74 A 3.73 3.73 0 0 0 12.65 30.5 a 3.67 3.67 0 0 0 2.27 -0.43 A 3.4 3.4 0 0 1 16 29.73 a 3.4 3.4 0 0 1 1.08 0.34 a 4.59 4.59 0 0 0 1.77 0.48 a 2.24 2.24 0 0 0 0.5 -0.06 a 3.74 3.74 0 0 0 1.91 -1.4 a 3.33 3.33 0 0 1 0.78 -0.74 a 3.36 3.36 0 0 1 1.09 -0.16 a 3.71 3.71 0 0 0 2.25 -0.61 A 3.72 3.72 0 0 0 26.49 25.5 a 3.35 3.35 0 0 1 0.39 -1 a 3.34 3.34 0 0 1 0.91 -0.6 a 3.73 3.73 0 0 0 1.78 -1.54 a 3.7 3.7 0 0 0 0.09 -2.33 a 3.39 3.39 0 0 1 -0.09 -1.11 A 3.31 3.31 0 0 1 30.11 18 Z M 16 27.29 A 11.47 11.47 0 1 1 27.47 15.82 A 11.48 11.48 0 0 1 16 27.29 Z",ff={viewPort:[0,0,32,32],viewPortDimensions:{width:32,height:32},svgPathMap:{REGULAR:df,SOLID:df},types:Object.values(of.d)},pf=(e,t)=>e.dom.is(t,`img[${af}]`);function mf(e,t){if(!t)return!1;if(pf(e,t))return!0;const n=Array.from(t.childNodes).filter(e=>3!==e.nodeType||!e.textContent||""!==e.textContent.trim());return 1===n.length&&mf(e,n[0])}var hf=n(2817),gf=n(1259);const bf=["contextualNodeAttributes"],vf=Object(Mr.a)("TinymcePlugins.hslink"),yf=e=>{e.addCommand("mceInsertLink",(t,n)=>{const{dom:o,formatter:r,selection:i}=e;"string"==typeof n&&(n={href:n});const a=o.getParent(i.getNode(),"a");a&&n.href||r.remove("link");n.href&&r.apply("link",n,a)})},Cf=({editor:e,pluginName:t,onSelectFile:n,onChangeLink:o,fetchPages:r,fetchPageBySlug:i,fetchMeetingsByUsers:a,fetchMeetingBySlug:s,fetchAnchors:l,fetchFileByUrl:c,[cr.d.ALLOW_FILE_DOWNLOAD]:u=!0,[cr.d.ALLOW_MEETING_LINKS]:f,[cr.d.ALLOW_ANCHOR_LINKS]:m,[cr.d.ALLOW_RAW_LINKS_ONLY]:h=!1,[cr.d.EMAIL_SUBSCRIPTION_LINK_TYPES]:g=[],[cr.d.HIDE_TARGET_BLANK_AND_NO_FOLLOW]:b,[cr.d.ALLOW_EMAIL_WEB_VERSION_LINK]:v})=>{const y=({isActive:t})=>{const n=e.selection.getNode();if(pf(e,n))e.fire("InsertLinkOnIcon");else if(Object(q.h)(e,n)){const t="IMG"===n.nodeName?n:n.querySelector("img");e.fire("InsertLinkOnImage",{element:t})}else t?e.fire("ToggleLinkEditPopover"):e.fire("OpenLinkPopover")},C=({element:t})=>!!t&&eu(e,t),O=({element:t})=>{if(!t)return null;const n=eu(e,t)||tu(e,t);return t.hasAttribute(gf.a)?t:!n||Object(q.h)(e,t)||Object(hf.l)(e,t)||mf(e,t)?null:Jc(t)?t:e.dom.getParent(t,"a",e.getBody())};p.a.canvas.addNodeChangeHandler(e,{eventKey:t,isActiveNodeHandler:O});p.a.canvas.addButton(e,rn.J,{renderControl:t=>{const n=Object(d.a)(t,bf);return Object(Ye.jsx)(pi,Object.assign({ButtonComponent:mi.a,"data-test-id":"insert-link-button",editor:e,iconName:"link",i18nKey:vf,onClick:y,onClickShortcut:cr.b,isActiveHandler:C},n))}});p.a.canvas.addMenuItem(e,rn.J,{text:vf("menuItem"),onClick:y});p.a.canvas.addPopover(e,t,{renderPopover:d=>Object(Ye.jsx)(nf,Object.assign({editor:e,removeUnInsertedLinks:uu(e),onSelectFile:n,onChangeLink:o,fetchPages:r,showRefAndTargetControls:!b,useEmailSubscription:g.length>0,allowFileDownload:u,allowMeetingLink:f,allowAnchorLinks:m,allowRawLinksOnly:h,emailSubscriptionLinkTypes:g,fetchPageBySlug:i,fetchFileByUrl:c,fetchMeetingsByUsers:a,fetchAnchors:l,fetchMeetingBySlug:s,eventKey:t,allowEmailWebVersionLink:v},d))});yf(e);e.on("click",Sd(e),!0)},Of=B.A;function xf(e){const{apiClient:t}=e.settings,n=vd(e);Cf(Object.assign({editor:e,pluginName:Of,onSelectFile:di(e),fetchPages:ju(t),onChangeLink:(t,n,o)=>{xd(e,t,n,o)},fetchPageBySlug:Su(t),fetchFileByUrl:Po(t),fetchMeetingsByUsers:ku(t),fetchMeetingBySlug:Tu(t),fetchAnchors:Hc(e)},n));n[cr.d.ALLOW_RAW_LINKS_ONLY]&&Object(F.a)(e,()=>{const t=e.selection.getNode();if("A"===t.tagName){bu(t);vu(e)}})}p.a.PluginManager.add(Of,xf);const jf=B.B;function Sf(e){const{apiClient:t}=e.settings;Cf(Object.assign({editor:e,pluginName:jf,onSelectFile:Ic(e),fetchPages:ju(t),onChangeLink:(t,n,o)=>{xd(e,t,n,o)},fetchPageBySlug:Su(t),fetchFileByUrl:Po(t),fetchMeetingsByUsers:ku(t),fetchMeetingBySlug:Tu(t),fetchAnchors:Hc(e)},vd(e)))}p.a.PluginManager.add(jf,Sf);var wf=n(1296);const Tf="emoji-mart",kf=["frequently","last","skin"];var Nf=n(2702);const Ef=B.s;let Af;function If(e){return{init:t=>{Af={};function n(e){Object.keys(e).forEach(t=>{Af[t]=e[t]});t&&t()}e.settings.bus.postMessage({action:"getStoreValues",payload:{storeKeys:kf,storeNamespace:Tf}}).then(e=>{n(e)})},getter:e=>Af?Af[e]:null,setter:(t,n)=>{if(Af){Af[t]=n;e.settings.bus.postMessage({action:"setStoreValue",payload:{key:t,value:n,storeKeys:kf,storeNamespace:Tf}})}}}}function Rf(e){Object(Nf.a)(e,Ef,If)}p.a.PluginManager.add(Ef,Rf);var Lf=n(2602),_f=n(2596),Pf=n(1326),Mf=n(2701);const Df={},Bf=(e,t)=>{Df[e]=t},Ff={};function Uf(e){const t=Object(Lo.b)(e.get,Ro.a.VIDEO.getUrl,Ff,Lo.a);return e=>{const n=!!Df[e];Bf(e,!1);return t(e,{},{clearCache:n})}}var Vf=n(2670),Hf=n(2634);const qf=new RegExp(/{%\s+video_player\s+("[a-zA-Z0-9,_]+"|'[a-zA-Z0-9,_]+').*?\s+player_id=("(?:[a-zA-Z0-9]+)".*?|'(?:[a-zA-Z0-9]+)'.*?)\s+%}/),$f="data-hs-video-",zf="data-mce-p-"+$f,Wf={WIDTH:800,HEIGHT:450};function Gf(e,t){const n=Object(Ee.f)(e,Cr);return n?n[t]:null}const Kf=e=>isNaN(parseInt(e,10))||parseInt(e,10).toString()!==e?"true"===e||"false"===e?"true"===e:e:parseInt(e,10),Yf={COLOR:`data-mce-p-${$f}color`,PLAY_BUTTON_COLOR:`data-mce-p-${$f}play_button_color`,CONVERSION_ASSET:`data-mce-p-${$f}conversion_asset`},Xf=(e,t)=>{const n=e.dom.getAttrib(t,Yf.COLOR);return n?"#"+n:null},Zf=e=>{const t=p.a.DOM.parseStyle(e),n=["height","max-height","overflow"];t.float||"inline-block"===t.display||n.push("width","max-width","margin-left","margin-right","display");n.forEach(e=>{delete t[e]});return p.a.DOM.serializeStyle(t)},Qf=e=>{if("string"!=typeof e)return null;try{return JSON.parse(e)}catch(e){return null}},Jf=e=>e?JSON.stringify(e):"",ep=(e,t)=>{switch(e){case"type":return t===xr.HSVIDEO2?t:xr.VIDYARD;case"conversion_asset":return Qf(t);case"style":return p.a.DOM.parseStyle(t);case"width":case"height":case"player_id":return parseInt(t,10);case"embed_button":case"viral_sharing":case"hide_playlist":case"overrideable":case"autoplay":case"hidden_controls":case"loop":case"muted":case"full_width":return"True"===t;case"color":case"playlist_color":case"play_button_color":default:return t}},tp=(e,t=$f)=>{const n={};ti.b.forEach(o=>{const r=e.getAttribute(`${t}${o}`);switch(o){case"conversion_asset":n[o]=Qf(r);break;case"style":n[o]=Zf(e.getAttribute(""+o));break;case"width":case"height":n[o]=Kf(r);break;default:null!==r&&(n[o]=Kf(r))}});return n},np=(e,t)=>{switch(e){case"conversion_asset":return Jf(t);case"style":return p.a.DOM.serializeStyle(t);default:return""+t}},op=["hide_playlist","viral_sharing","embed_button","full_width"],rp=["autoplay","hidden_controls","loop","muted"],ip=e=>{const{player_id:t}=e,n={portalId:cn.a.get(),full_width:!0};Object.keys(Object(Ir.g)(["player_id","style","type","overrideable","full_width"],e)).forEach(t=>{n[t]=np(t,e[t])});const o=Object.assign({},Object(Ir.g)(op.concat(rp),n),{playerType:"richTextPreview",renderContext:"rich-text-preview"});rp.forEach(t=>{e[t]&&(o[t]=!0)});return Hf.b.getVideo2PreviewUrl(t,o,{usePublicDomain:!0})},ap=e=>{const t={};ti.b.forEach(n=>{let o=new RegExp(`\\s${n}=(".*?"|'.*?'|True|False)(?:,|\\s)`).exec(e);if(null!==o&&2===o.length){o=o[1].trim();(o.startsWith("'")||o.startsWith('"'))&&(o=o.slice(1,-1));o.length>0&&(t[n]=ep(n,o))}});return t},sp=(e,t)=>{const n=Gf(e,Or.MAX_DIMENSION_WIDTH),{width:o,height:r}=ga(n,t.width||Wf.WIDTH,t.height||Wf.HEIGHT);return Object.assign({},t,{width:o,height:r})},lp=(e,t)=>{const n=Gf(e,Or.MAX_DIMENSION_WIDTH),{dom:o}=e,r=parseInt(o.getAttrib(t,zf+"width"),10),i=parseInt(o.getAttrib(t,zf+"height"),10),a="true"===o.getAttrib(t,zf+"full_width");return{alignment:a?zo.b.JUSTIFY:va(t),dimensions:{width:r,height:i},maxDimensions:ba(n,r,i),margin:Ca(e,t),playerColor:Xf(e,t),sizeOption:a?Pf.g.FULL:Pf.g.CUSTOM,showDimensionsControls:!a}},cp=e=>{const{apiClient:t}=e.settings,n=Uf(t);return e=>new Promise(t=>{n(e).then(e=>t(Object.assign({},e,{name:e.title}))).catch(e=>{console.error(e);t({})})})};function up(e,t){const n={contentEditable:"false","data-mce-hubl-video":"true",class:"mce-preview-object"+(t.attr("class")?" "+t.attr("class"):"")},o={},r={},i=t.attr($f+"width"),a=t.attr($f+"height"),s=t.attr($f+"full_width");if(!Gf(e,Or.ENABLE_FULL_WIDTH)||"true"!==s){i&&(o["max-width"]=ja(i));a&&(o["max-height"]=ja(a))}const l=new p.a.html.Node("div",1),c=e.dom.parseStyle(t.attr("style"));if(c.margin)o.margin=c.margin;else{o["margin-top"]=c["margin-top"]||0;o["margin-bottom"]=c["margin-bottom"]||0;o["margin-left"]=c["margin-left"]||"auto";o["margin-right"]=c["margin-right"]||"auto"}o.width="100%";o.height="auto";o.overflow="hidden";o.display=c.display||"block";const u=new p.a.html.Node("div",1);r["max-width"]="100%";a&&i&&(r["padding-bottom"]=ja(a,!1)/ja(i,!1)*100+"%");r.height=0;r.overflow="hidden";r.position="relative";u.attr({style:e.dom.serializeStyle(Object.assign({},r))});l.append(u);n.style=e.dom.serializeStyle(Object.assign({},c,o));l.attr(n);Oa(e,t,l);const d=new p.a.html.Node("iframe",1);d.attr({src:t.attr("src"),allowfullscreen:t.attr("allowfullscreen"),width:"100%",height:"100%",frameborder:"0",controls:t.attr("controls")});const f=new p.a.html.Node("span",1);f.attr("class","mce-shim");d.attr({style:"position: absolute; top: 0px; left: 0px; border: none;"});u.append(d);l.append(f);return l}function dp(e,t){const n=new p.a.html.Node("iframe",1),o=t.attr("style");o&&n.attr({style:o});t.attributes.forEach(({name:e,value:t})=>{0===e.indexOf("data-mce-p-")&&n.attr(e.substr(11),t)});return n}const fp=(e,t,n)=>{const o=tp(e,zf),r=n/t,i=Math.min(o.width,t),a=Math.round(r*i);return Object.assign({},Object(Ir.g)(["player_id","type"],o),{width:i,height:a})},pp=e=>t=>Object(Ie.b)(e,"tinymceVideo",t,{type:"video"});function mp(e,t,n=!1){Object(Ie.b)(e,"tinymceInsertVideo",G.I,{type:t,replaced:n,version:"contextualToolbar"})}function hp(e,t){Object(Ie.b)(e,"tinymceEditVideo",G.v,{editType:t,type:"hubspot-video-2",version:"contextualToolbar"})}const gp=Object(uo.a)(hp,400),bp=(e,t)=>{const{dom:n,undoManager:o}=e,{width:r,height:i}=t,a=600;let s=r,l=i;if(r>a){s=a;l=Math.round(i*(a/r))}const c={src:t.url,width:s,height:l,controls:!0,style:`width: ${s}px; height: ${l}px;`};e.focus();const u=n.createHTML("video",c);o.transact(()=>{e.insertContent(u);e.execCommand("hsInsertNewline",!1,{target:u})});mp(e,"html-video-tag")},vp=(e,t,n)=>{const o=Object(Vf.d)(t);e.focus();e.undoManager.transact(()=>{let r=Object(Vf.b)(t);if(n){const e=fp(n,r.width,r.height);r=Object.assign({},r,e)}o&&(r.type=xr.HSVIDEO2);const i=Object(Vf.a)(r);if(n){const t=e.selection.getBookmark();e.selection.setContent("");e.insertContent(i);e.selection.moveToBookmark(t)}else{e.insertContent(i);e.execCommand("hsInsertNewline",!1,{target:e.selection.getNode()})}});mp(e,o?"hubspot-video-2":"hubspot-video-player",!!n)},yp=(e,t)=>n=>{Object(Vf.c)(n)?vp(e,n,t):bp(e,n)},Cp=e=>(t,n)=>{e.undoManager.transact(()=>{const o=Object.keys(n).reduce((e,t)=>{e[`${zf}${t}`]=n[t];return e},{});e.dom.setAttribs(t,o);const r=Object.assign({},tp(t,zf),n);e.$("iframe",t).attr("src",ip(r,e))});gp(e,"videoParams")},Op=e=>(t,n)=>{e.undoManager.transact(()=>{let o=tp(t,zf),r=null;if(n){const{conversion_asset:e}=o;r=e?Object.assign({},e,n):n;r.position||(r.position=Pf.d.AFTER)}o=Object.assign({},o,{conversion_asset:r});e.dom.setAttrib(t,Yf.CONVERSION_ASSET,Jf(r));e.$("iframe",t).attr("src",ip(o,e))});gp(e,"conversionAsset")},xp=e=>t=>{e.undoManager.transact(()=>{e.dom.remove(t);e.selection.collapse();e.nodeChanged()});gp(e,"removeVideo")},jp=e=>(t,n)=>{const o=e.dom,r=n&&n.substr(1),i=Object.assign({},tp(t,zf),{color:r,play_button_color:r});e.undoManager.transact(()=>{o.setAttrib(t,Yf.COLOR,r);o.setAttrib(t,Yf.PLAY_BUTTON_COLOR,r);e.$("iframe",t).attr("src",ip(i,e))});gp(e,"playerColor")},Sp=e=>(t,n=zo.b.NONE,o)=>{if(t.classList.contains("mce-preview-object")||t.classList.contains("hs-video")||t.classList.contains("mce-object")){e.undoManager.transact(()=>{n===o&&(n=zo.b.NONE);const r=Wo[n];r&&e.dom.setStyles(t,r)});gp(e,"alignment")}},wp=(e,t)=>(n,o)=>{const{width:r,height:i}=ga(t,o.width,o.height);e.undoManager.transact(()=>{if(r&&i){e.dom.setStyles(n,{"max-width":r+"px","max-height":i+"px"});e.dom.setAttribs(n,{[zf+"width"]:r,[zf+"height"]:i})}e.selection.select(n)});gp(e,"dimensions")},Tp=e=>(t,n)=>{const{top:o,left:r,right:i,bottom:a}=n;e.undoManager.transact(()=>{e.dom.setStyles(t,{"margin-top":o,"margin-left":r,"margin-right":i,"margin-bottom":a})});gp(e,"margin")},kp=e=>(t,n)=>{e.undoManager.transact(()=>{let o,r;if(n===Pf.g.FULL){o={"max-width":null,"max-height":null,"margin-left":"auto","margin-right":"auto",display:"block",float:null};r=!0}else{o={"max-width":t.getAttribute(zf+"width")+"px","max-height":t.getAttribute(zf+"height")+"px"};r=!1}e.dom.setStyles(t,o);e.dom.setAttrib(t,zf+"full_width",r)});n===Pf.g.FULL&&gp(e,"fullwidth")};function Np(e){const t=Sp(e),n=kp(e);return(o,r)=>{const i="true"===e.dom.getAttrib(o,zf+"full_width"),a=i?null:va(o);if(r===zo.b.JUSTIFY)n(o,i?Pf.g.CUSTOM:Pf.g.FULL);else{i&&n(o,Pf.g.CUSTOM);t(o,r,a)}}}const Ep={};function Ap(e){const t=Object(Lo.b)(e.get,Ro.a.CTAS.getUrl,Ep);return function(e){return t(e,{query:{includeCtaInfo:!0}})}}const Ip={};function Rp(e){const t=Object(Lo.b)(e.get,Ro.a.FORMS.getUrl,Ip);return function(e){return t(e)}}function Lp(e,t,n){return e.name__contains&&n[e.name__contains]?Promise.resolve(n[e.name__contains]):t.get(Ro.a.FORMS_LIST.getUrl(),{query:e}).then(t=>{e.name__contains&&(n[e.name__contains]=t);return t})}function _p(e){const t={};return n=>Lp(n,e,t)}var Pp=e=>{class t extends i.Component{constructor(e){super(e);this.updateFormInfo=e=>{this.setState({formInfo:e})};this.clearFormInfo=()=>{this.setState({formInfo:void 0})};this.fetchFormInfo=(e,t=(()=>{}))=>{this.props.fetchFormInfo(e).then(n=>{n||console.warn("Could not fetch Form with guid: "+e);t(n);this.mounted&&this.updateFormInfo(n)}).catch(e=>{console.warn(e.message);t({error:e});this.mounted&&this.setState({formInfo:{error:e}})})};this.mounted=!1;this.state={formInfo:void 0}}componentDidMount(){this.mounted=!0;const{fetchOnMount:e,formGuid:t}=this.props;e&&t&&this.fetchFormInfo(t)}componentWillUnmount(){this.mounted=!1}render(){return Object(Ye.jsx)(e,Object.assign({},this.props,{fetchFormInfo:this.fetchFormInfo,updateFormInfo:this.updateFormInfo,clearFormInfo:this.clearFormInfo,formInfo:this.state.formInfo}))}}t.displayName=`FormInfo(${Object(Da.a)(e)})`;t.propTypes={fetchFormInfo:r.a.func.isRequired,fetchOnMount:r.a.bool,formGuid:r.a.string};t.defaultProps={fetchOnMount:!1,formGuid:""};return t};const Mp=()=>({ctaName:"",ctaGuid:void 0,ctaUrl:"",ctaError:void 0});var Dp=e=>{class t extends i.Component{constructor(e){super(e);this.clearCtaInfo=()=>{this.setState(Mp())};this.updateCtaInfo=e=>{const{name:t,guid:n,ctaInfo:o=[]}=e,r=o.find(e=>!!e.isDefault)||o.find(e=>e.variantLabel&&!e.disabled);r||setTimeout(()=>{throw new Error(`CTA with guid '${n}' has no ctaInfo`)});this.setState({ctaName:t,ctaGuid:n,ctaUrl:Object(Ir.h)(["url"],r),ctaError:null})};this.fetchCtaInfo=(e,t=(()=>{}))=>{this.props.fetchCtaInfo(e).then(n=>{n||console.warn("Could not fetch CTA with guid: "+e);t(n);this.mounted&&this.updateCtaInfo(n)}).catch(e=>{console.warn(e.message);t(e);this.mounted&&this.setState(Object.assign({},Mp(),{ctaError:e}))})};this.mounted=!1;this.state=Mp()}componentDidMount(){this.mounted=!0;const{fetchOnMount:e,ctaGuid:t}=this.props;e&&t&&this.fetchCtaInfo(t)}componentWillUnmount(){this.mounted=!1}render(){const{ctaName:t,ctaGuid:n,ctaUrl:o,ctaError:r}=this.state;return Object(Ye.jsx)(e,Object.assign({},this.props,{fetchCtaInfo:this.fetchCtaInfo,updateCtaInfo:this.updateCtaInfo,clearCtaInfo:this.clearCtaInfo,ctaName:t,ctaGuid:n,ctaUrl:o,ctaError:r}))}}t.displayName=`CtaInfo(${Object(Da.a)(e)})`;t.propTypes={fetchCtaInfo:r.a.func.isRequired,fetchOnMount:r.a.bool,ctaGuid:r.a.string};t.defaultProps={fetchOnMount:!1,ctaGuid:""};return t};const Bp=e=>"RichTextLib.video.lite."+e,Fp={onEdit:r.a.func.isRequired,onReplace:r.a.func.isRequired,onRemove:r.a.func.isRequired};function Up(e){const{onEdit:t,onReplace:n,onRemove:o}=e,r=[{iconName:hi.c.EDIT,onClick:t},{iconName:hi.c.REPLACE,onClick:n},{iconName:hi.c.REMOVE,onClick:o}];return Object(Ye.jsx)(ws.a,{"data-test-id":"video-popover-body-lite",iconButtons:r,i18nKey:Bp})}Up.propTypes=Fp;Up.displayName="VideoPopoverBodyLite";var Vp=Up,Hp=n(28),qp=n(1149),$p=n(1325);const zp={HUBSPOT:"HUBSPOT",VIDEO_FORM:"VIDEO_FORM"},Wp=100,Gp="-updatedAt";var Kp=({formInfo:e,selectedGuid:t,readOnly:n,fetchForms:o,onChange:r,trackVideoInteraction:a})=>{const[s,l]=Object(i.useState)(""),c=(e="",t,n={offset:0})=>{let r=n.offset;if(e!==s){l(e);r=0}const i={name__contains:e,limit:Wp,offset:r,formTypes:[zp.HUBSPOT,zp.VIDEO_FORM],order:Gp};o(i).then(e=>{const n=e.map(e=>({text:e.name,value:e.guid}));t(null,{options:n})}).catch(e=>{console.error("VideoFormSelect failed to fetch forms",e);t(e)})},u=e=>{r(e.target.value);a("select-video-form")};let d=[];e&&e.name?d=[{text:e.name,value:e.guid}]:e&&e.error?d=[{text:Nt.a.text("RichTextLib.video.overlay.cannotFindForm"),value:t}]:t&&(d=[{text:Nt.a.text("RichTextLib.video.overlay.loadingOptions"),value:t}]);return Object(Ye.jsx)(vl.a,{buttonSize:"small",clearable:!0,dropdownClassName:"mce-ui-select",disabled:n,loadOptions:c,options:d,onChange:u,value:t,"data-test-id":"video-form-select"})};const Yp=["position"],Xp=Pf.d.AFTER,Zp=({overlayType:e,overlayGuid:t,disabled:n,onOpenPicker:o,onUpdateConversionAsset:r,formInfo:a,fetchFormInfo:s,fetchForms:l,trackVideoInteraction:c})=>{const u=()=>{e===Pf.e.FORM?window.open(`${Object(Hp.getFullUrl)("app")}/forms/${cn.a.get()}`):o()};return e===Pf.e.FORM?Object(Ye.jsxs)(i.Fragment,{children:[Object(Ye.jsx)(ul,{primaryText:`RichTextLib.video.overlay.${e}.label`,linkText:"RichTextLib.video.overlay.createOrEditForm",onLinkClick:u,required:!0}),Object(Ye.jsx)(Kp,{formInfo:a,selectedGuid:t,fetchForms:l,readOnly:!1,onChange:e=>{s(e);r({type:Pf.e.FORM,id:e,position:Xp})},trackVideoInteraction:c})]}):Object(Ye.jsx)(Hs.a,{className:"m-top-1",label:Nt.a.text(`RichTextLib.video.overlay.${e}.label`),required:!0,children:Object(Ye.jsx)(Le.a,{"data-test-id":"insert-overlay-button",use:"tertiary-light",disabled:n,size:"small",onClick:u,children:Object(Ye.jsx)(ft.a,{message:`RichTextLib.video.overlay.${e}.button`})})})},Qp=e=>{const{position:t}=e,n=Object(d.a)(e,Yp);return Object(Ye.jsx)(qp.a,Object.assign({},n,{"data-test-id":"overlay-position-"+t,name:"display"+t,value:t,size:"small",children:Object(Ye.jsx)(ft.a,{message:"RichTextLib.video.overlay.display."+t})}))},Jp={className:r.a.string,dropdownClassName:r.a.string,conversionAsset:r.a.shape({type:r.a.string,id:r.a.string,position:r.a.string}),ctaName:r.a.string,formInfo:r.a.object,onUpdateConversionAsset:r.a.func.isRequired,onOpenConversionAssetPanel:r.a.func,onOpenCtaPicker:r.a.func.isRequired,updateCtaInfo:r.a.func.isRequired,updateFormInfo:r.a.func.isRequired,clearCtaInfo:r.a.func.isRequired,clearFormInfo:r.a.func.isRequired,fetchFormInfo:r.a.func.isRequired,fetchForms:r.a.func.isRequired,trackVideoInteraction:r.a.func,useConversionAssetOptionsPanel:r.a.bool,video:r.a.shape({videoId:r.a.number,duration:r.a.number})};function em(e){const{className:t,dropdownClassName:n,conversionAsset:o,onUpdateConversionAsset:r,onOpenCtaPicker:a,onOpenConversionAssetPanel:s,updateCtaInfo:l,clearCtaInfo:c,clearFormInfo:u,ctaName:d,formInfo:f={},fetchFormInfo:p,fetchForms:m,useConversionAssetOptionsPanel:h,trackVideoInteraction:g=(()=>{}),video:b}=e,[v,y]=Object(i.useState)(!1),{type:C=Pf.e.NONE,id:O,position:x}=o||{};let j;C===Pf.e.CTA?j=d:C===Pf.e.FORM&&(j=f.name);const S=Object.values(Pf.e).map(e=>({text:Nt.a.text(`RichTextLib.video.overlay.${e}.option`),value:e})),w=e=>{C===Pf.e.CTA&&a(e,(e,t)=>{l(t);r({type:C,id:e,position:Xp})})},T=e=>{const{value:t}=e.target;let n=null;t!==Pf.e.NONE&&(n={type:t});r(n);c();u();g("select-overlay-type-"+t.toLowerCase())},k=e=>{const{value:t}=e.target;r(Object.assign({},o,{position:t}))},N=()=>{r({type:C});c();u()},E=()=>{s?s(b,o,e=>{r(e)}):y(!0)},A=()=>h?o&&o.type&&o.id?Object(Ye.jsxs)("div",{className:"m-top-2",children:[Object(Ye.jsx)(ul,{primaryText:"RichTextLib.video.overlay.display.labelWithOptionsPanel",linkText:"RichTextLib.video.conversionAssetSummary.edit",onLinkClick:E,"data-test-id":"edit-conversion-asset-options"}),Object(Ye.jsx)(cl.a,{children:Object(Ye.jsx)($p.a,{className:"m-bottom-0 p-left-6",conversionAsset:o})})]}):null:Object(Ye.jsx)(Hs.a,{className:"m-top-1",label:Nt.a.text("RichTextLib.video.overlay.display.label"),children:Object(Ye.jsx)(dl.a,{name:"videoOverlayDisplayOptions",children:Object.values(Pf.d).map(e=>Qp({key:e,position:e,checked:x===e,disabled:!O,onClick:k}))})});return Object(Ye.jsxs)(i.Fragment,{children:[Object(Ye.jsxs)(Vs.a,{className:t,_size:"small",children:[Object(Ye.jsx)(Hs.a,{label:Nt.a.text(h?"RichTextLib.video.overlay.labelWithOptionsPanel":"RichTextLib.video.overlay.label"),children:Object(Ye.jsx)(vl.a,{"data-test-id":"video-overlay-select",dropdownClassName:n,value:C,options:S,defaultValue:Pf.e.NONE,searchable:!1,onChange:T})}),Zp({overlayType:C,overlayGuid:O,overlayName:j,disabled:C===Pf.e.NONE,formInfo:f,fetchForms:m,fetchFormInfo:p,useConversionAssetOptionsPanel:h,onOpenPicker:w,onRemoveOverlay:N,onUpdateConversionAsset:r,trackVideoInteraction:g}),A()]}),v&&Object(Ye.jsx)(Mf.a,{conversionAsset:o,video:b,onClose:()=>y(!1),onSubmit:e=>{r(e);y(!1)},trackVideoInteraction:g})]})}em.propTypes=Jp;em.displayName="VideoPopoverOverlayControls";var tm=em;const nm=(e,t,n)=>Object(Ye.jsx)(fl.a,{checked:!!t,onChange:()=>n(e,!t),children:Object(Ye.jsx)(ft.a,{message:"RichTextLib.video.advanced.params."+e})},"video-param-"+e),om={className:r.a.string,videoParams:r.a.object.isRequired,onVideoParamChange:r.a.func.isRequired};function rm(e){const{className:t,videoParams:n,onVideoParamChange:o}=e,r=(e,t)=>{o(Object.assign({},n,{[e]:t}))};return Object(Ye.jsx)(Vs.a,{className:t,_size:"small",children:Object(Ye.jsx)(Hs.a,{label:Nt.a.text("RichTextLib.video.advanced.paramsLabel"),tooltip:Nt.a.text("RichTextLib.video.advanced.paramsHelp"),tooltipPlacement:"top right",children:Object(Ye.jsx)(dl.a,{name:"video-params",children:Object.values(Pf.f).map(e=>nm(e,n[e],r))})})})}rm.propTypes=om;rm.displayName="VideoPopoverAdvancedControls";var im=rm;const am=["video","fetchVideoAttributes","onReplace","onOpenVideoDetails","onUpdateConversionAsset","onUpdateVideoParams","onClose"],sm=l()($s.a).withConfig({displayName:"VideoPopoverBodyEdit__VideoFileAttachment",componentId:"jwmqun-0"})(["width:100%;"]),lm=({videoAttrs:e={},onOpenVideoDetails:t,onReplace:n})=>{const{name:o}=e;return Object(Ye.jsxs)(Vs.a,{className:"p-x-5 p-bottom-2",_size:"small",children:[Object(Ye.jsx)(ul,{primaryText:"RichTextLib.video.previewLabel",linkText:"RichTextLib.video.replace",onLinkClick:n}),Object(Ye.jsx)(sm,{fileName:Object(Ye.jsx)("span",{"data-test-id":"video-details-name",children:o}),fileInfo:Object(Ye.jsx)(pn.a,{"data-test-id":"edit-video-details-link",onClick:t,onMouseDown:e=>e.preventDefault(),children:Object(Ye.jsx)(ft.a,{message:"RichTextLib.video.details"})}),renderPreview:Object(Ye.jsx)(z.a,{className:"align-self-end",name:"videoFile"})})]})},cm=Object.assign({},tm.propTypes,{video:r.a.object,videoName:r.a.string,fetchVideoAttributes:r.a.func.isRequired,onReplace:r.a.func.isRequired,onOpenVideoDetails:r.a.func.isRequired,onUpdateConversionAsset:r.a.func.isRequired,onClose:r.a.func.isRequired});function um(e){const{video:t,fetchVideoAttributes:n,onReplace:o,onOpenVideoDetails:r,onUpdateConversionAsset:a,onUpdateVideoParams:s,onClose:l}=e,c=Object(d.a)(e,am),u=Object(Ir.i)(Object.values(Pf.f),t),[f,p]=Object(i.useState)(u),[m,h]=Object(i.useState)({}),[g,b]=Object(i.useState)(t.conversion_asset);Object(i.useEffect)(()=>{n(t.player_id,{type:t.type}).then(h).catch(()=>h({}))},[n,t]);const v=()=>{r(t,e=>{h({name:e.name})})},y=e=>{e.key===hi.b.ESCAPE&&l()},C=()=>{Object(Ir.c)(g,t.conversion_asset)||a(g);Object(Ir.c)(f,u)||s(f);l()},O=g&&g.type&&!g.id;return Object(Ye.jsx)("div",{className:"small-popover-body",tabIndex:"-1",children:Object(Ye.jsx)(ol,{title:"RichTextLib.video.popoverTitle",titleClassName:"p-x-5 p-top-5",morphButtonTitle:"RichTextLib.video.advanced.title",morphedContentTitle:"RichTextLib.video.advanced.title",renderMorphedContent:()=>Object(Ye.jsxs)(i.Fragment,{children:[Object(Ye.jsx)(im,{className:"p-x-5",videoParams:f,onVideoParamChange:p}),Object(Ye.jsx)(ll,{className:"m-top-3 p-x-5 p-bottom-5",popoverType:hi.e.EDIT,isSubmitDisabled:O,onSubmit:C,onCancel:l})]}),children:Object(Ye.jsxs)("div",{onKeyDown:y,children:[Object(Ye.jsx)(tm,Object.assign({},c,{className:"p-x-5 p-bottom-1",conversionAsset:g,video:m,onUpdateConversionAsset:b})),Object(Ye.jsx)(Us.a,{distance:"xs"}),lm({videoAttrs:m,onReplace:o,onOpenVideoDetails:v}),Object(Ye.jsx)(ll,{className:"m-top-3 p-x-5 p-bottom-5",popoverType:hi.e.EDIT,isSubmitDisabled:O,onSubmit:C,onCancel:l})]})})})}um.propTypes=cm;um.displayName="VideoPopoverBodyEdit";const dm=["mode","onModeChange","onVideoReplace","onVideoRemove"],fm=Pp(Dp(um)),pm={mode:r.a.oneOf(Object.values(hi.d)),video:r.a.object,onModeChange:r.a.func.isRequired,onVideoReplace:r.a.func.isRequired,onVideoRemove:r.a.func.isRequired},mm={mode:hi.d.PREVIEW};function hm(e){const{mode:t,onModeChange:n,onVideoReplace:o,onVideoRemove:r}=e,i=Object(d.a)(e,dm);if(t===hi.d.PREVIEW){const e=()=>{n(hi.d.EDIT)};return Object(Ye.jsx)(Vp,{onEdit:e,onReplace:o,onRemove:r})}const a=()=>{n(hi.d.PREVIEW)},s=Object(Ir.h)(["conversion_asset","id"],e.video),l=Object(Ir.h)(["conversion_asset","type"],e.video);let c,u;l===Pf.e.CTA?c=s:l===Pf.e.FORM&&(u=s);return Object(Ye.jsx)(fm,Object.assign({},i,{ctaGuid:c,formGuid:u,fetchOnMount:!0,onReplace:o,onClose:a}))}hm.propTypes=pm;hm.defaultProps=mm;hm.displayName="VideoPopoverBodyBranch";var gm=hm;const bm=["editor","open","target","onRemove","onVideoReplace","onVideoRemove","onEditDetails","onOpenCtaPicker","onUpdateConversionAsset","onUpdateVideoParams","onOpenConversionAssetPanel"],vm={editor:r.a.object.isRequired,open:r.a.bool.isRequired,target:r.a.object,mode:r.a.oneOf(Object.keys(hi.d).map(e=>hi.d[e])),onRemove:r.a.func.isRequired,onVideoReplace:r.a.func.isRequired,onVideoRemove:r.a.func.isRequired,onEditDetails:r.a.func.isRequired,onOpenCtaPicker:r.a.func.isRequired,onUpdateConversionAsset:r.a.func.isRequired,onUpdateVideoParams:r.a.func.isRequired,onOpenConversionAssetPanel:r.a.func.isRequired};function ym(e){const{editor:t,open:n,target:o,onRemove:r,onVideoReplace:i,onVideoRemove:a,onEditDetails:s,onOpenCtaPicker:l,onUpdateConversionAsset:c,onUpdateVideoParams:u,onOpenConversionAssetPanel:f}=e,p=Object(d.a)(e,bm);return Object(Ye.jsx)(Re.a,{"data-test-id":"video-popover-manager",editor:t,open:n,target:o,onRemove:r,arrowSize:"medium",placement:e.mode===hi.d.PREVIEW?"bottom":"right",renderContent:()=>Object(Ye.jsx)(gm,Object.assign({},p,{onVideoReplace:i.bind(null,o),onVideoRemove:a.bind(null,o),onOpenVideoDetails:s.bind(null,o),onOpenCtaPicker:l.bind(null,o),onUpdateConversionAsset:c.bind(null,o),onUpdateVideoParams:u.bind(null,o),onOpenConversionAssetPanel:f?f.bind(null,o):null,dropdownClassName:"mce-ui-select"}))})}ym.propTypes=vm;ym.displayName="VideoPopoverV2";var Cm=ym;const Om=["editor","onModeChange","eventKey"];function xm(e){const{editor:t,onModeChange:n,eventKey:o}=e,r=Object(d.a)(e,Om),[a,s]=Object(i.useState)(null),[l,c]=Object(i.useState)({}),[u,f]=Object(i.useState)({}),p=Object(i.useRef)(a);Object(i.useEffect)(()=>{p.current=a});const m=Object(i.useCallback)(()=>{if(p.current){s(null);c({});f({})}},[]);Object(i.useEffect)(()=>{const e=({element:e})=>{if(!e){m();return}const t=tp(e,zf);c(t);if(e!==p.current){n(hi.d.PREVIEW);s(e)}};t.on("hsNodeChange:"+o,e);return()=>t.off("hsNodeChange:"+o,e)},[t,m,n,o]);return Object(Ye.jsx)(Cm,Object.assign({},r,u,{editor:t,open:!!a,target:a,onRemove:m,video:l,onModeChange:n}))}var jm=Object(gi.a)(xm);const Sm=(e,t)=>!!t&&(!0===e.settings.media_live_embeds&&e.dom.hasClass(t,"mce-preview-object")&&e.dom.hasClass(t,"hs-video")),wm=["playerColor"],Tm=Object(Mr.a)("TinymcePlugins.hsvideo");function km(e,t,n,o,r){const{[Or.DISABLE_SPACING]:i,[Or.DISABLE_ALIGNMENT]:a,[Or.USE_EMBED]:s,[Or.ENABLE_FULL_WIDTH]:l,[Or.USE_CONVERSION_ASSET_OPTIONS_PANEL]:c}=Object(Ee.f)(e,Cr,{}),u=()=>{n();Object(Ie.b)(e,"tinymceVideo",G.eb,{method:"combinedInsert",type:"video"})},f={text:Tm("menuItem")};if(s){const t=()=>{o();Object(Ie.b)(e,"tinymceVideo",G.X,{method:"combinedInsert",type:"embed"})};f.child=()=>[{label:Tm("hubspotVideo"),onClick:u,"data-test-id":"nestedcanvasvideo"},{label:Tm("embedVideo"),onClick:t,"data-test-id":"nestedcanvasembed"}]}else f.onClick=u;p.a.canvas.addMenuItem(e,rn.jb,f);const{scopes:m,apiClient:h}=e.settings,g=Object(wt.b)(br,m),b=g&&Object(wt.b)(vr,m),v=g&&Object(wt.b)(yr,m),y=({element:t})=>!!t&&(Sm(e,t)&&t),C=t=>{const n=lp(e,t),{playerColor:o}=n,r=Object(d.a)(n,wm);return Object.assign({},r,{fillColor:o?{color:o,alpha:100}:null,fillColorTooltip:Tm("playerColorTooltip"),dimensionsDisabledTooltip:Tm("dimensionsDisabledTooltip"),marginIconType:fi.a.VIDEO,useFullWidth:!0})};p.a.canvas.addNodeChangeHandler(e,{eventKey:t,isActiveNodeHandler:y,getActiveNodeAttributes:C,contextualToolbar:Xu({showAlignmentControls:!a,showMarginControls:!i,showFullWidthControl:l})});const O={eventKey:t,onUpdateVideoParams:Cp(e),onVideoReplace:n,fetchVideoAttributes:cp(e)};p.a.canvas.addPopover(e,t,{renderPopover:t=>Object(Ye.jsx)(jm,Object.assign({editor:e,onVideoRemove:xp(e),fetchCtaInfo:Ap(h),fetchFormInfo:Rp(h),fetchForms:_p(h),showCtaOverlayOption:b,showFormOverlayOption:v,trackVideoInteraction:pp(e),useConversionAssetOptionsPanel:c},r,t,O))})}const Nm=e=>{const t=tp(e);return document.createTextNode(Object(Vf.a)(t))},Em=(e,t)=>`${"style"===e?e:`${$f}${e}`}="${Object(Ir.d)(np(e,t))}" `,Am=e=>{let t="";Object.keys(e).forEach(n=>{t+=Em(n,e[n])});return t},Im=(e,t,n)=>{const o=sp(e,ap(t)),r=`<iframe class="hs-video" data-mce-hubl-video="true" src="${ip(o,e)}" ${Am(o)}allowtransparency="true" allowfullscreen frameborder="0" scrolling="no" /></iframe>`;return n.replace(qf,r)},Rm=(e,t)=>{let n=t,o=qf.exec(n);for(;null!==o;){o.length&&(n=Im(e,o[0],n));o=qf.exec(n)}return n},Lm=e=>{Object(F.b)(e,t=>{t.body.innerHTML=Rm(e,t.body.innerHTML)});Object(F.a)(e,e=>{const t=e.querySelectorAll(".hs-video");Object(F.g)(t,Nm)});e.on("preInit",()=>{e.parser.addAttributeFilter("data-mce-hubl-video",t=>{t.forEach(t=>{const n=t.attr("class")||"",o=t.attr("data-hs-video-type");if(o!==xr.VIDYARD&&o!==xr.HSVIDEO2){console.error(`Cannot create preview for videos of type: ${o}. Expected type: ${xr.HSVIDEO2}.`);return}const r=up(e,t);n&&-1!==n.indexOf("hs-video")&&"p"===e.settings.forced_root_block&&t.parent&&"p"===t.parent.name&&t.parent.firstChild===t&&t.parent.lastChild===t?t.parent.replace(r):t.replace(r)})});e.serializer.addAttributeFilter("data-mce-hubl-video",t=>{t.forEach(t=>{const n=dp(e,t);t.replace(n)})})})};var _m=n(2766),Pm=n(717),Mm=n(724),Dm=n(751),Bm=n(723),Fm=n(2779),Um=n(607),Vm=n(696);const Hm=["title","children","type"],qm=l()(Vm.a).withConfig({displayName:"TipAlert__StyledTipAlert",componentId:"sc-8srkgg-0"})(["border-radius:3px;"]),$m=l.a.span.withConfig({displayName:"TipAlert__TipAlertTitle",componentId:"sc-8srkgg-1"})(["font-weight:800;margin-left:2px;margin-right:2px;"]);function zm(e){const{title:t,children:n,type:o}=e,r=Object(d.a)(e,Hm);return Object(Ye.jsxs)(qm,Object.assign({},r,{className:"m-top-4",type:o,use:"inline",children:[t&&Object(Ye.jsx)($m,{children:t+": "}),n]}))}zm.propTypes={children:r.a.node,title:r.a.node.isRequired,type:r.a.string};zm.defaultProps={type:"info"};var Wm=n(2706);const Gm=["getUserAttributes","setUserAttribute","attributeKey"];function Km(e){const{getUserAttributes:t,setUserAttribute:n,attributeKey:o}=e,r=Object(d.a)(e,Gm),[i,a,s]=Object(Wm.a)(t,n,o);return!i||a?null:Object(Ye.jsx)(zm,Object.assign({},r,{closeable:!0,onClose:()=>s(!0)}))}Km.propTypes=Object.assign({},zm.propTypes,{getUserAttributes:r.a.func.isRequired,setUserAttribute:r.a.func.isRequired,attributeKey:r.a.string.isRequired});var Ym=n(1249);function Xm(e){const{inpage:t,embedId:n,style:o,iframeRef:r}=e,i=()=>{const e=encodeURIComponent(`id=${n}&inpage=${t}&origin=${window.location.origin}`);return`${Object(Ym.h)()}?${e}`},a=()=>"hs-iframe-embed-"+n;return Object(Ye.jsx)("iframe",{"data-test-id":"hs-content-embed-iframe",style:o,contentEditable:!1,src:i(),sandbox:"allow-scripts allow-same-origin",referrerPolicy:"strict-origin",ref:e=>r(e)},a())}Xm.propTypes={inpage:r.a.bool.isRequired,embedId:r.a.string.isRequired,style:r.a.object,iframeRef:r.a.func};Xm.defaultProps={iframeRef:()=>{}};var Zm=Xm;const Qm=300,Jm="embed-modal-preview",eh={iframeStyle:{width:"100%",height:Qm+"px",border:"none"},containerStyle:{overflow:"hidden",display:"none"}};function th(e,t){switch(t.type){case"UPDATE_IFRAME_STYLE":return{iframeStyle:Object.assign({},e.iframeStyle,t.payload),containerStyle:Object.assign({},e.containerStyle)};case"UPDATE_CONTAINER_STYLE":return{iframeStyle:Object.assign({},e.iframeStyle),containerStyle:Object.assign({},e.containerStyle,t.payload)};default:return e}}const nh=l.a.div.withConfig({displayName:"EmbedLivePreview__EmbedIframeContainer",componentId:"zia9wt-0"})(["max-height:","px;"],e=>e.maxHeight),oh=Object(Ym.i)();function rh(e){const{data:{html:t},onSetContentDone:n,showPreview:o,maxHeight:r}=e,[a,s]=Object(i.useState)(null),[l,c]=Object(i.useReducer)(th,eh),u=Object(i.useRef)(t),d=Object(i.useCallback)(e=>{if(a){Object(Ym.l)("Sending postMessage to content-embed-ui iframe:",e,oh);a.postMessage(Object.assign({},e,{id:Jm}),oh)}},[a]);Object(i.useEffect)(()=>{const e={display:o?"flex":"none"};o||(e.overflow="hidden");c({type:"UPDATE_CONTAINER_STYLE",payload:e})},[o]);Object(i.useEffect)(()=>{if(t){u.current=t;d({action:Ym.a.SET_CONTENT,payload:{html:t}})}},[d,t]);Object(i.useEffect)(()=>{const e=e=>{const{origin:t,source:o,data:i}=e;if(!a||t!==oh||o!==a)return;const{action:s,id:l,payload:f}=i.body||{};if(l===Jm){Object(Ym.l)("Received postMessage from content-embed-ui iframe:",i,t);if(s===Ym.a.READY&&u.current)d({action:Ym.a.SET_CONTENT,payload:{html:u.current}});else if(s===Ym.a.SET_CONTENT_DONE){n();c({type:"UPDATE_CONTAINER_STYLE",payload:{display:"flex"}})}else if(s===Ym.a.SIZE_CHANGE){const{height:e}=f;if(0!==e){c({type:"UPDATE_IFRAME_STYLE",payload:{height:e+"px"}});c({type:"UPDATE_CONTAINER_STYLE",payload:{overflow:e>r?"auto":"hidden"}})}}}};window.addEventListener("message",e);return()=>{d({action:Ym.a.DISCONNECT});window.removeEventListener("message",e)}},[a,r,d,n]);const{containerStyle:f,iframeStyle:p}=l;return Object(Ye.jsx)(nh,{style:f,maxHeight:r,children:Object(Ye.jsx)(Zm,{inpage:!1,embedId:Jm,style:p,iframeRef:e=>{e&&e.contentWindow&&s(e.contentWindow)}})})}var ih=rh;rh.propTypes={data:r.a.object.isRequired,onSetContentDone:r.a.func.isRequired,showPreview:r.a.bool,maxHeight:r.a.number};rh.defaultProps={showPreview:!1,maxHeight:Qm};var ah=n(1248),sh=n(2797),lh=n(1218);class ch extends i.Component{constructor(e){super(e);this.handleSubmit=()=>{const{onSubmit:e,onClose:t}=this.props,{previewData:n}=this.state;e(n);return t()};this.handleChange=({target:{value:e}})=>{const t=Object(sh.h)(e);let n={};const o=Object(sh.f)(t);o===Ym.b.URL?this.debouncedFetchEmbedCode({url:t}):o===Ym.b.EMBED||o===Ym.b.GENERIC_EMBED?this.debouncedFetchEmbedCode({html:t},o):n={previewLoadingStatus:Ym.f.NONE,previewData:{},error:t?Ym.e.GENERAL:Ym.e.NONE};this.setState(Object.assign({embed:e,error:Ym.e.NONE,urlPasteMatch:!1},n))};this.fetchEmbedCode=(e,t)=>{this.setState({previewLoadingStatus:Ym.f.LOADING});this.props.fetchEmbedCode(e).then(e=>{const{previewData:n}=this.state;t===Ym.b.GENERIC_EMBED?this.setState({previewLoadingStatus:Ym.f.NONE,previewData:e,error:Ym.e.EMBED_CODE}):JSON.stringify(n)===JSON.stringify(e)?this.setState({previewLoadingStatus:Ym.f.COMPLETE}):this.setState({previewData:e,urlPasteMatch:"url"===e.source})}).catch(e=>{setTimeout(()=>{throw new Error(e)});this.setState({previewLoadingStatus:Ym.f.NONE,previewData:{},error:Ym.e.FETCH,urlPasteMatch:!1})})};this.handleSetContentDone=()=>{this.setState({previewLoadingStatus:Ym.f.COMPLETE})};this.canInsert=()=>{const{embed:e,previewLoadingStatus:t,error:n}=this.state;return e&&(t===Ym.f.COMPLETE&&n===Ym.e.NONE||n===Ym.e.EMBED_CODE)};this.state={embed:e.embed,error:Ym.e.NONE,urlPasteMatch:!1,previewLoadingStatus:Ym.f.NONE,previewData:{}};this.debouncedFetchEmbedCode=Object(uo.a)(this.fetchEmbedCode,lh.a);this.embedInputRef=Object(i.createRef)()}renderUrlPasteMatch(){if(!this.state.urlPasteMatch)return null;const{getUserAttributes:e,setUserAttribute:t}=this.props;return Object(Ye.jsxs)(Km,{title:Nt.a.text(Object(ah.b)("urlPasteTipTitle")),getUserAttributes:e,setUserAttribute:t,attributeKey:"embedUrlPastingTip",children:[Object(Ye.jsx)(ft.a,{message:Object(ah.b)("urlPastingTipText")}),Object(Ye.jsx)(pn.a,{href:Ym.c+"#providers",target:"_blank",children:Nt.a.text(Object(ah.b)("urlPastingTipOembedLink"))}),Object(Ye.jsx)(ft.a,{message:Object(ah.b)("urlPastingTipText2")})]})}renderPreview(){const{previewLoadingStatus:e,previewData:t,error:n}=this.state;return Object(Ye.jsxs)("div",{children:[e!==Ym.f.NONE&&Object(Ye.jsx)(ks.a,{className:"m-top-2",children:Object(Ye.jsx)(ft.a,{message:Object(ah.b)("previewLabel")})}),e===Ym.f.LOADING&&Object(Ye.jsx)(u.a,{grow:!0,size:"medium"}),Object(Ye.jsx)(ih,{showPreview:e===Ym.f.COMPLETE,data:n===Ym.e.NONE?t:{},onSetContentDone:this.handleSetContentDone})]})}render(){const{onClose:e,rootNode:t,className:n,onCloseComplete:o}=this.props,{embed:r,error:i}=this.state;let a="";i!==Ym.e.NONE&&(a=Object(Ye.jsx)(ft.a,{"data-test-id":"hs-content-embed-validation-message",message:Object(ah.b)("errors."+i)}));return Object(Ye.jsxs)(_m.a,{width:550,rootNode:t,className:n,onCloseComplete:o,children:[Object(Ye.jsxs)(Bm.a,{children:[Object(Ye.jsx)(Pm.a,{onClick:e}),Object(Ye.jsx)(Um.a,{children:Nt.a.text(Object(ah.b)("modalTitle"))})]}),Object(Ye.jsxs)(Mm.a,{children:[Object(Ye.jsx)(ft.a,{message:Object(ah.b)("embedInsertInstructions")}),Object(Ye.jsx)(Le.a,{use:"link",external:!0,href:Ym.c,children:""+Nt.a.text(Object(ah.b)("learnMore"))}),Object(Ye.jsx)(Hs.a,{htmlFor:"embed_txtarea",label:Nt.a.text(Object(ah.b)("embedModalInputLabel")),error:i!==Ym.e.NONE,validationMessage:a,className:"m-top-2",children:Object(Ye.jsx)(Fm.a,{autoFocus:!0,"data-gramm":!1,defaultValue:r,inputRef:this.embedInputRef,name:"embed_txtarea",maxHeight:160,shrink:!0,value:r,onChange:this.handleChange})}),this.renderUrlPasteMatch(),this.renderPreview()]}),Object(Ye.jsxs)(Dm.a,{children:[Object(Ye.jsx)(Le.a,{use:"primary",disabled:!this.canInsert(),onClick:this.handleSubmit,children:Nt.a.text(Object(ah.b)("insert"))}),Object(Ye.jsx)(Le.a,{use:"secondary",onClick:e,children:Nt.a.text(Object(ah.b)("cancel"))})]})]})}}ch.propTypes={embed:r.a.string,onClose:r.a.func.isRequired,onSubmit:r.a.func.isRequired,rootNode:r.a.object,className:r.a.string,onCloseComplete:r.a.func,fetchEmbedCode:r.a.func,getUserAttributes:r.a.func,setUserAttribute:r.a.func};ch.defaultProps={embed:"",validateEmbed:sh.c};var uh=n(1580),dh=n.n(uh);function fh(e){const{inpage:t,embedId:n}=e;return Object(Ye.jsxs)("div",{className:rr,style:Eh({asAttr:!0}),children:[Object(Ye.jsx)(Zm,{inpage:t,embedId:n,style:Nh}),Object(Ye.jsx)("span",{className:"mce-shim"})]})}const ph=document.implementation.createHTMLDocument("sanitize"),mh=e=>{const t={},n=/.*?height:\s*(\d+)(?:px).*?/.exec(e),o=/.*?width:\s*(\d+)(?:px).*?/.exec(e);n&&(t.height=n[1]);o&&(t.width=o[1]);return t},hh=e=>t=>{const n=t.getAttribute("data-embed-type"),o=t.getAttribute("data-embed-src"),r=null!==t.getAttribute("data-embed-title")?t.getAttribute("data-embed-title"):"";let i=t.getAttribute("data-embed-options");const a=t.getAttribute("data-embed-description");if("wistia"===n){const n=e.dom.parseStyle(t.getAttribute("style")||""),o=(i||"").split(",").reduce((e,t)=>{/width|height|align|margin/.test(t)||e.push(t);return e},[]);n.height&&o.push("height="+n.height);n.width&&o.push("width="+n.width);n.float?o.push("align="+n.float):"auto"===t.style.marginLeft&&o.push("align=center");t.style.marginTop&&o.push("marginTop="+t.style.marginTop);t.style.marginRight&&o.push("marginRight="+t.style.marginRight);t.style.marginBottom&&o.push("marginBottom="+t.style.marginBottom);t.style.marginLeft&&o.push("marginLeft="+t.style.marginLeft);i=o.join(",")}let s=`{{ script_embed('${n}', '${o}', '${r}'`;i&&(s+=`, '${i}'`);a&&(s+=`, '${a}'`);s+=") }}";return document.createTextNode(s)},gh=(e,t)=>{let n=t;Object.keys(Ym.p).forEach(t=>{const o=Ym.p[t];let r=o.exec(n);for(;null!==r;){if(r.length){let i,a,s,l,c,u,d,f,p;if("scriptEmbed"===t){const t=r[1].split(/['"],\W['"]/).map(e=>e.replace(/['"]/g,""));t[t.length-1]=t[t.length-1].replace(/['"],\W*$/,"");t.push(r[r.length-1]);i=t[0];a=t[1];s=t[2];if(t.length>=4){l=[t[3]];c={};l[0].split(",").forEach(e=>{const[t,n]=e.split("=");if("height"===t)c.height=n;else if("width"===t)c.width=n;else if("align"===t){if("right"===n||"left"===n)c.float=n;else if("center"===n){c["margin-right"]="auto";c["margin-left"]="auto";c.display="block"}}else"marginTop"===t?c["margin-top"]=n:"marginBottom"===t?c["margin-bottom"]=n:"marginLeft"===t&&"auto"!==c["margin-left"]?c["margin-left"]=n:"marginRight"===t&&"auto"!==c["margin-right"]&&(c["margin-right"]=n)});c=e.dom.serializeStyle(c)}t.length>=5&&(u=t[4])}else if("wistiaInlineResponsive"===t){i="wistia";a=r[1];l=["inline","responsive"]}else if("wistiaInlineFixed"===t){i="wistia";a=r[1];p=mh(r[2]);d=p.height;f=p.width;l=["inline"];c="";if(d){l.push(`height=${d}px`);c+=`height:${d}px;`}if(f){l.push(`width=${f}px`);c+=`width:${f}px;`}}else if("wistiaPopoverThumbnail"===t){i="wistia";a=r[1];p=mh(r[2]);d=p.height;f=p.width;l=["popover"];if(r[0].indexOf('<div class="wistia_responsive_wrapper"')>=0)l.push(["responsive"]);else{c="";if(d){l.push(`height=${d}px`);c+=`height:${d}px;`}if(f){l.push(`width=${f}px`);c+=`width:${f}px;`}}}else if("wistiaPopoverTextLink"===t){i="wistia";a=r[1];s=r[2];l=["popover","link"]}else if("embedlyPlain"===t){i="embedly";a=r[1];s=r[2];l=Ih(n)}else if("embedlySeo"===t){i="embedly";a=r[1];s=r[2];u=r[3].replace(/\\/g,"\\\\").replace(/'/g,"\\&#39;").replace(/"/g,"\\&quot;");l=Ih(n)}let m=`<img class='mce-object hs-embeddable' width=${f||425} height=${d||350} src='data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7' data-embed-type='${i}' data-embed-src='${a}' data-mce-placeholder `;s&&(m+=`data-embed-title='${s}' `);l&&(m+=`data-embed-options="${l}" `);u&&(m+=`data-embed-description="${u}" `);c&&(m+=`style="${c}"`);m+="data-mce-resize='false' />";n=n.replace(o,m)}r=o.exec(n)}});return n},bh=e=>{Object(F.b)(e,t=>{t.body.innerHTML=gh(e,t.body.innerHTML)});Object(F.a)(e,t=>{const n=t.querySelectorAll(".mce-object.hs-embeddable");Object(F.g)(n,hh(e))})};let vh=0;const yh=e=>`${e}-mce-embed-iframe-${++vh}`,Ch=e=>t=>{const n=ph.importNode(t,!1);n.classList.add("mce-preview-object","mceNonEditable");n.contentEditable=!1;const o=t.querySelector("."+ir);n.dataset.mceEmbedContent=o.innerHTML;if(!!n.dataset.scriptEmbed){const t=yh(e.id);n.dataset.mceIframeEmbedId=t;n.innerHTML=dh.a.renderToStaticMarkup(Object(Ye.jsx)(fh,{inpage:!!e.settings.hsInpage,embedId:t}))}else{n.innerHTML=o.outerHTML;const e=ph.createElement("span");e.className="mce-shim";n.appendChild(e)}return n},Oh=e=>{const t=ph.importNode(e,!0);t.style.removeProperty("max-height");t.classList.remove("mce-preview-object","mceNonEditable");[...t.attributes].forEach(({name:e})=>{-1!==e.indexOf("data-mce-")&&t.removeAttribute(e)});const n=ph.createElement("div");n.className=ir;n.innerHTML=e.dataset.mceEmbedContent;t.innerHTML=n.outerHTML;return t},xh=(e,t)=>{const n=t.cloneNode(!0),o=n.querySelectorAll("."+or);Array.from(o).forEach(e=>{const t=Oh(e);e.parentElement.replaceChild(t,e)});return n.innerHTML},jh=e=>{Object(F.b)(e,t=>{const n=t.body.querySelectorAll("."+or);Object(F.g)(n,Ch(e))});Object(F.a)(e,t=>{t.body.innerHTML=xh(e,t.body)})},Sh=/^[0-9]+$/,wh=({width:e,height:t}={})=>{if(!Sh.test(e)||!Sh.test(t)){e=Yo.WIDTH;t=Yo.HEIGHT}return(100*(t/e)).toFixed(2)+"%"},Th=(e,t)=>{let n=Math.round(e),o=Math.round(t);n=Sh.test(n)?n:""+Yo.WIDTH;o=Sh.test(o)?o:""+Yo.HEIGHT;return{width:n,height:o}},kh=(e=!1)=>({display:"block",float:null,[e?"maxWidth":"max-width"]:null,[e?"maxHeight":"max-height"]:null,[e?"marginLeft":"margin-left"]:"auto",[e?"marginRight":"margin-right"]:"auto"}),Nh={position:"absolute",top:"0",left:"0",width:"100%",height:"100%",border:"none"},Eh=({width:e,height:t,asAttr:n=!1})=>({position:"relative",overflow:"hidden",[n?"maxWidth":"max-width"]:"100%",[n?"paddingBottom":"padding-bottom"]:wh({width:e,height:t}),margin:"0"}),Ah=({width:e,height:t,isFullWidth:n,centered:o=!1,asAttr:r=!1})=>Object.assign({position:"relative",overflow:"hidden",width:"100%",height:"auto",padding:"0"},e?{[r?"maxWidth":"max-width"]:e+"px"}:{},{[r?"maxHeight":"max-height"]:t?t+"px":null,[r?"minWidth":"min-width"]:Zo+"px"},o?{display:"block",margin:"auto"}:{},n?kh(r):{}),Ih=e=>{const t=[];e.match(/data-card-controls/i)&&t.push("no-social");e.match(/data-card-theme="dark"/i)&&t.push("darktheme");e.match(/data-card-type="article"/i)&&t.push("small");if(e.match(/data-card-width/i)){const n=new RegExp(/data-card-width="([0-9]+)"/).exec(e);if(null!==n){const e=n[1];t.push("width="+e)}}if(e.match(/data-card-align/)){const n=new RegExp(/data-card-align="([a-zA-Z]+)"/).exec(e);if(null!==n){const e=n[1];t.push("align="+e)}}e.match(/<blockquote/i)&&t.push("seo");return t.join()},Rh=e=>{let t="";if(null!==e){e.indexOf("no-social")>-1&&(t+='data-card-controls="0" ');e.indexOf("darktheme")>-1&&(t+='data-card-theme="dark" ');e.indexOf("small")>-1&&(t+='data-card-type="article" ');if(e.indexOf("width")>-1){const n=new RegExp(/width=([0-9]+)/).exec(e);if(null!==n){t+=`data-card-width="${n[1]}" `}}if(e.indexOf("align")>-1){const n=new RegExp(/align=([a-zA-Z]+)/).exec(e);if(null!==n){t+=`data-card-align="${n[1]}" `}}}return t},Lh=e=>{const t=e.attr("data-embed-type"),n=e.attr("data-embed-src"),o=e.attr("data-embed-title"),r=e.attr("data-embed-options"),i=e.attr("data-embed-description");if("wistia"===t){const e=null!==r?r.indexOf("popover")>-1:null,t=null!==r?r.indexOf("link")>-1:null,i=null!==r?r.indexOf("responsive")>-1:null;let a,s;if(null!==r){a=r.match(/width=(\d*)/)?r.match(/width=(\d*)/)[1]:null;s=r.match(/height=(\d*)/)?r.match(/height=(\d*)/)[1]:null}const l=`<script src="https://fast.wistia.com/embed/medias/${n}.jsonp" async><\/script><script src="https://fast.wistia.com/assets/external/E-v1.js" async><\/script>`;let c=null;c=e?t?`<span class="wistia_embed wistia_async_${n} popover=true popoverContent=link" style="display:inline"><a href="#">${o}</a></span>`:i?`<div class="wistia_responsive_padding" style="padding:56.25% 0 0 0;position:relative;"><div class="wistia_responsive_wrapper" style="height:100%;left:0;position:absolute;top:0;width:100%;"><span class="wistia_embed wistia_async_${n} popover=true popoverAnimateThumbnail=true videoFoam=true" style="display:inline-block;height:100%;width:100%">&nbsp;</span></div></div>`:`<span class="wistia_embed wistia_async_${n} popover=true popoverAnimateThumbnail=true" style="display:inline-block;height:${s}px;width:${a}px">&nbsp;</span>`:i?`<div class="wistia_responsive_padding" style="padding:56.25% 0 0 0;position:relative;"><div class="wistia_responsive_wrapper" style="height:100%;left:0;position:absolute;top:0;width:100%;"><div class="wistia_embed wistia_async_${n} videoFoam=true" style="height:100%;width:100%">&nbsp;</div></div></div>`:`<div class="wistia_embed wistia_async_${n}" style="height:${s}px;width:${a}px">&nbsp;</div>\n      `;return`${l}\n${c}`}if("embedly"===t){const e=Rh(r);if(null!==r&&r.indexOf("seo")>-1){return`<blockquote class="embedly-card" ${e}><h4><a href="${n}">${o}</a></h4><p>${i}</p></blockquote><script async src="//cdn.embedly.com/widgets/platform.js" charset="UTF-8"><\/script>`}return`<a class="embedly-card" ${e} href="${n}">${o}</a><script async="" src="//cdn.embedly.com/widgets/platform.js" charset="UTF-8"><\/script>`}return null},_h=e=>Lh(e).replace(/\\\\/g,"\\").replace(/\\'/g,"'").replace(/\\"/g,'"').replace(/\n/g,"");function Ph(e,t){if(e.dom.hasClass(t,or))return t.dataset.mceEmbedContent;if(t.getAttribute("data-mce-object"))return e.selection.getContent();if(e.dom.hasClass(t,"hs-embeddable")){return hh(e)(t).textContent}return""}function Mh(e,t){const n=Object(Ee.f)(e,Go);return n?n[t]:null}const Dh=[{type:"youtube",pattern:/https:\/\/(?:www\.)?youtube\.com\/embed/},{type:"twitter",pattern:/https:\/\/(?:www\.)?twitter\.com\/.+\//},{type:"facebook",pattern:/https:\/\/(?:www\.)?facebook\.com\/.+\//},{type:"instagram",pattern:/https:\/\/(?:www\.)?instagram\.com\/.+\//},{type:"pinterest",pattern:/https:\/\/(?:www\.)?pinterest\.com\/.+\//},{type:"google-maps",pattern:/https:\/\/(?:www\.)?google\.com\/maps\/embed/},{type:"google-calendar",pattern:/https:\/\/(?:www\.)?calendar\.google\.com\/calendar\/embed/},{type:"google-docs",pattern:/https:\/\/(?:www\.)?docs\.google\.com\/.+\/document/},{type:"google-sheets",pattern:/https:\/\/(?:www\.)?docs\.google\.com\/.+\/spreadsheets/},{type:"google-slides",pattern:/https:\/\/(?:www\.)?docs\.google\.com\/.+\/presentation/},{type:"google-drive-folder",pattern:/https:\/\/(?:www\.)?drive\.google\.com\/embeddedfolder/},{type:"slideshare",pattern:/https:\/\/(?:www\.)?slideshare\.net\/slideshow\/embed_code/},{type:"twentythree",pattern:/https:\/\/(?:www\.)?(\S+)\/((?:\d+|v)\.ihtml\/player\.html)/},{type:"giphy",pattern:/https:\/\/(?:www\.)?giphy\.com\/embed/},{type:"wistia",pattern:/(?:https:)?\/\/(?:www\.)?fast\.wistia\.net\/embed\/iframe/},{type:"vimeo",pattern:/https:\/\/(?:www\.)?player\.vimeo\.com\/video/}],Bh=[/<iframe\s+.*src="(?:http:|https:)?\/\/(?:www\.)?([a-zA-Z,0-9]+(?:.[a-zA-Z,0-9]+)?)\..*".*>/,/<script\s+.*src="(?:http:|https:)?\/\/(?:www\.)?([a-zA-Z,0-9]+(?:.[a-zA-Z,0-9]+)?)\..*".*>/],Fh=e=>{if(e.service)return e.service;const t=Dh.find(t=>t.pattern.test(e.embed));if(t&&t.type)return t.type;const n=Bh.find(t=>t.test(e.embed));return n?n.exec(e.embed)[1]:void 0},Uh=new DOMParser,Vh=(e="",t={})=>{const{body:n}=Uh.parseFromString(e,"text/html"),o=n.querySelectorAll("iframe,video");let r=!1;if(1===o.length){const i=o[0];if(i.parentElement===n){let{width:o,height:a}=t;if(!o||!a){o=i.getAttribute("width");a=i.getAttribute("height")}if(o<Zo){const e=a/o;o=Zo;a=Zo*e;i.setAttribute("width",o);i.setAttribute("height",a)}t.width=o;t.height=a;const s=document.createElement("div");s.style=Object(Lc.f)(Eh(Object.assign({},t)));i.style=Object(Lc.f)(Nh);s.appendChild(i.cloneNode(!0));n.replaceChild(s,i);e=n.innerHTML;r=!0}else r=""!==i.parentElement.style.paddingBottom}return{html:e,responsive:r,dimensions:t,provider:Fh({embed:e})}},Hh=(e,t)=>{const n=Uh.parseFromString(e,"text/html");let o=!1;if("twitter"===t){n.querySelector("blockquote").setAttribute("align","center");o=!0}return o?n.body.innerHTML:e},qh=e=>`<img src="${e}" style="width: 100%;" />`,$h=/^(https?:)?(?:\/\/)(\S*)$/,zh=1,Wh=2,Gh=e=>{const t=$h.exec(e);if(!t)throw new Error(`Invalid URL ${e}. Expected valid URL with a protocol.`);return`${t[zh]||"http:"}//${t[Wh]}`},Kh=e=>"IMG"===e.tagName,Yh={ALIGNMENT:"alignment",DIMENSIONS:"dimensions",FULL_WIDTH:"fullwidth",MARGIN:"margin",REMOVE:"remove"};function Xh(e,t){Object(Ie.b)(e,"tinymceEditEmbed",G.y,{editType:t,version:"contextualToolbar"})}const Zh=Object(uo.a)(Xh,400),Qh=/^[0-9]+(?:px)?$/,Jh=(e,t,n)=>{const o=e.dom.getStyle(t,n);return o&&Qh.test(o)?parseInt(o,10):e.dom.getSize(t)[n.includes("width")?"w":"h"]},eg=e=>(t,n=zo.b.NONE,o)=>{if(t.classList.contains("mce-preview-object")||t.classList.contains("hs-video")||t.classList.contains("mce-object")||t.classList.contains("hs-embeddable")){e.undoManager.transact(()=>{if(e.dom.hasClass(t,or)&&!t.dataset.responsive){const n=Jh(e,t,"width"),o=Jh(e,t,"height");e.dom.setStyles(t,{"max-width":n+"px","max-height":o+"px",clear:"both"})}n===o&&(n=zo.b.NONE);const r=Wo[n];r&&e.dom.setStyles(t,r)});Zh(e,Yh.ALIGNMENT)}},tg=e=>(t,n)=>{const{height:o,width:r}=n;e.undoManager.transact(()=>{e.fire("ObjectResized",{target:t,width:r,height:o})});Zh(e,Yh.DIMENSIONS)},ng=e=>(t,n)=>{const{top:o,left:r,right:i,bottom:a}=n;e.undoManager.transact(()=>{e.dom.setStyles(t,{"margin-top":o,"margin-left":r,"margin-right":i,"margin-bottom":a})});Zh(e,Yh.MARGIN)},og=e=>(t,n)=>{e.fire("hsEmbedSizeChange",{target:t,size:n});n===Ym.d.FULL&&Zh(e,Yh.FULL_WIDTH)},rg=e=>(t,n)=>Yg(e,t,n),ig=(e,t)=>{const{dom:n,settings:o}=e;let r,i,a,s,l=!0;const c=t.getAttribute("data-mce-object");if(e.dom.hasClass(t,or)){const o=!!t.dataset.responsive,c=!!t.dataset.scriptEmbed;r=Jh(e,t,"max-width");i=Jh(e,t,"max-height");a=n.hasClass(t,nr);s=o&&!c;l=o}else if(n.hasClass(t,"hs-video")){r=n.getStyle(t,"max-width")&&parseInt(n.getStyle(t,"max-width"),10);i=n.getStyle(t,"max-height")&&parseInt(n.getStyle(t,"max-height"),10)}else if("iframe"===c&&o.media_live_embeds){const e=n.select("iframe",t);if(e.length){const t=e[0];r=parseInt(t.getAttribute("width")||"0",10);i=parseInt(t.getAttribute("height")||"0",10);a=n.hasClass(t,nr);s=Ym.g.includes(t.getAttribute("data-service")||"")}}else{r=Jh(e,t,"width");i=Jh(e,t,"height")}const u={dimensions:{width:r,height:i},alignment:va(t),maxDimensions:ba(Mh(e,Ko.MAX_DIMENSION_WIDTH),r,i),margin:Ca(e,t),[zo.b.JUSTIFY+"Disabled"]:!s,showDimensionsControls:l&&!a};if(a){const e=n.select("iframe",t)[0],o=e&&n.getAttrib(e,"width"),a=e&&n.getAttrib(e,"height");u.dimensions={width:o||r,height:a||i};u.alignment=zo.b.JUSTIFY}return u},ag=(e,t)=>{if(!t)return!1;const{dom:n}=e;return!n.hasClass(t,"hs-video")&&(!0===e.settings.media_live_embeds&&n.hasClass(t,"mce-preview-object")||Kh(t)&&n.hasClass(t,"mce-object")||n.hasClass(t,"hs-embeddable")||n.hasClass(t,or))},sg=e=>t=>{const n=e.dom,o=t.parentNode,r=Ji(t,t.parentNode);e.undoManager.transact(()=>{e.selection.collapse();if(o&&r&&["P","H1","H2","H3","H4","H5","H6","DIV","PRE"].includes(t.parentNode.nodeName))n.remove(o);else{const o=e.selection.getBookmark();n.remove(t);e.selection.moveToBookmark(o)}});Zh(e,Yh.REMOVE)},lg=(e,t)=>()=>{t();Object(Ie.b)(e,"tinymceEmbed",G.X)},cg=(e,t,n)=>o=>{const r=e.dom;let{width:i,height:a}=o;const{target:s}=o;if(e.dom.hasClass(s,or)&&i&&a){const e=ga(n,i,a);r.setStyles(s,{"max-width":e.width+"px","max-height":e.height+"px"});return}const l=s.getAttribute("data-mce-object");if(null==l||r.hasClass(s,"hs-video")){if(r.hasClass(s,"hs-embeddable")&&"wistia"===s.getAttribute("data-embed-type")){r.setAttrib(s,"width",i);r.setAttrib(s,"height",a);r.setStyles(s,{width:i+"px",height:a+"px"})}return}if(i&&a){let e=s;"iframe"===l?e=r.select("iframe",s):"video"===l&&(e=r.select("video",s));const t=ga(n,i,a);i=t.width;a=t.height;r.setAttrib(e,"width",i);r.setAttrib(e,"height",a);Ym.g.includes(s.getAttribute("data-mce-p-data-service"))?r.setStyle(s,{"max-width":i+"px","max-height":a+"px"}):r.setStyles(s,{width:i+"px",height:a+"px"})}let c;c=s.getAttribute("data-mce-html");if(c){c=decodeURI(c);s.setAttribute("data-mce-html",encodeURI(t(c,{width:i,height:a})))}},ug=(e,t)=>n=>{const o=e.dom,{target:r,size:i}=n,a=r.getAttribute("data-mce-object");if(o.hasClass(r,or)){e.undoManager.transact(()=>{if(i===Ym.d.FULL){o.addClass(r,nr);o.setStyles(r,kh())}else if(i===Ym.d.CUSTOM){const e=o.select("iframe",r),t=e&&o.getAttrib(e,"width"),n=e&&o.getAttrib(e,"height");o.removeClass(r,nr);o.setStyles(r,{"max-width":(t||Xo)+"px","max-height":n?n+"px":null})}});return}if(null==a||o.hasClass(r,"hs-video")||"iframe"!==a)return;const s=o.select("iframe",r);let l;e.undoManager.transact(()=>{if(i===Ym.d.FULL){o.addClass(s,nr);l=kh()}else if(i===Ym.d.CUSTOM){o.removeClass(s,nr);const e=o.getAttrib(s,"width"),n=o.getAttrib(s,"height");l={display:null,"margin-left":"0px","margin-right":"0px","max-width":e+"px","max-height":n+"px"};t&&Object.keys(t).forEach(e=>{l[e]=t[e]})}o.setStyles(r,l)})},dg=e=>{const t=eg(e),n=og(e);return(o,r)=>{const i=e.dom.hasClass(o,or)?o:e.dom.select("iframe",o),a=i&&e.dom.hasClass(i,nr),s=a?null:va(o);if(r===zo.b.JUSTIFY)n(o,a?Ym.d.CUSTOM:Ym.d.FULL);else{a&&n(o,Ym.d.CUSTOM);t(o,r,s)}}},fg=(e,t)=>n=>{const o=e.dom.select(`[data-mce-iframe-embed-id="${n}"]`);if(1!==o.length)return;const r=o[0];r.querySelector("iframe").contentWindow.postMessage({action:Ym.a.SET_CONTENT,id:n,payload:{html:r.dataset.mceEmbedContent}},t)},pg=e=>(t,n)=>{let{width:o,height:r}=n;o=Math.round(o);r=Math.round(r);const i={width:o,height:r};if(!r)return;const a=e.dom.select(`[data-mce-iframe-embed-id="${t}"]`)[0];if(!a)return;const s=a.querySelector("."+rr),l=a.querySelector("iframe");if(!a.classList.contains(nr)){e.dom.setStyles(a,{"max-width":o+"px","max-height":r+"px"});e.dom.setAttribs(l,i)}e.dom.setStyle(s,"padding-bottom",wh(i))},mg=e=>t=>{const{target:n,targetClone:o}=t,r=e.dom.hasClass(n,or),i=!!n.dataset.scriptEmbed;if(r&&i){delete o.dataset.mceIframeEmbedId;const e=document.createElement("div"),t=o.querySelector("iframe");t.parentElement.replaceChild(e,t)}};let hg;const gg=()=>({target:e})=>{e&&e.classList&&e.classList.contains(or)&&(hg=e)},bg=e=>t=>{if(!hg)return;if(!!hg.dataset.scriptEmbed){const n=e.selection.getNode();n.parentNode.insertBefore(hg,n.nextSibling);t.preventDefault();t.stopPropagation()}hg=null},vg=e=>"RichTextLib.embed.lite."+e,yg={onEdit:r.a.func.isRequired,onRemove:r.a.func.isRequired};function Cg(e){const{onEdit:t,onRemove:n}=e,o=[{iconName:hi.c.EDIT,onClick:t},{iconName:hi.c.REMOVE,onClick:n}];return Object(Ye.jsx)(ws.a,{"data-test-id":"embed-popover-body-lite",iconButtons:o,i18nKey:vg})}Cg.propTypes=yg;var Og=Cg;const xg=e=>"RichTextLib.embed.popoverBody."+e,jg={tooltipClassName:r.a.string,dropdownClassName:r.a.string,embed:r.a.string,onSubmit:r.a.func.isRequired,onClose:r.a.func.isRequired,onRemove:r.a.func.isRequired};function Sg(e){const{tooltipClassName:t,dropdownClassName:n,embed:o,onSubmit:r,onRemove:a,onClose:s}=e,[l,c]=Object(i.useState)(o),[u,d]=Object(i.useState)(!1),[f,p]=Object(i.useState)(Object(sh.d)(o)),m=Object(i.useRef)(null);Object(i.useEffect)(()=>{c(o)},[o]);const h=e=>{e.key===hi.b.ESCAPE&&s()},g=e=>{const t=e.target.value;c(t);d(!1);p(Object(sh.d)(t))},b=e=>{const{value:t}=e.target,n=Object(sh.a)(l,t);g({target:{value:n}})},v=()=>{const e=Object(sh.h)(l);if(Object(sh.i)(e)){a();r({embed:e})}else{d(!0);m.current.focus()}},y=u?Nt.a.text(xg("embedCodeError")):"";return Object(Ye.jsxs)(Vs.a,{className:"small-popover-body p-all-5",_size:"small",tabIndex:"-1",onKeyDown:h,children:[Object(Ye.jsx)(Xs.a,{className:"m-bottom-2",children:Object(Ye.jsx)(ft.a,{message:xg("title")})}),Object(Ye.jsx)(Hs.a,{htmlFor:"embed_txtarea",label:Nt.a.text(xg("embedCodeLabel")),tooltip:Nt.a.text(xg("embedCodeHelp")),tooltipPlacement:"top right",tooltipProps:{innerClassName:t},error:u,validationMessage:y,children:Object(Ye.jsx)(Fm.a,{name:"embed_txtarea","data-gramm":!1,defaultValue:o,inputRef:m,minHeight:180,maxHeight:180,shrink:!0,value:l,onChange:g})}),f&&Object(Ye.jsx)($l,{tooltipClassName:t,dropdownClassName:n,onChange:b,value:f,label:"embedLabel"}),Object(Ye.jsx)(ll,{className:"m-top-5",popoverType:hi.e.EDIT,isSubmitDisabled:l===o,onSubmit:v,onCancel:s})]})}Sg.propTypes=jg;var wg=Sg;const Tg=["mode","onModeChange","onEmbedSave","onEmbedRemove"],kg={mode:r.a.oneOf(Object.values(hi.d)),onModeChange:r.a.func.isRequired,onEmbedSave:r.a.func.isRequired,onEmbedRemove:r.a.func.isRequired},Ng={mode:hi.d.PREVIEW};function Eg(e){const{mode:t,onModeChange:n,onEmbedSave:o,onEmbedRemove:r}=e,i=Object(d.a)(e,Tg);if(t===hi.d.PREVIEW){const e=()=>{n(hi.d.EDIT)};return Object(Ye.jsx)(Og,{onEdit:e,onRemove:r})}const a=()=>{n(hi.d.PREVIEW)};return Object(Ye.jsx)(wg,Object.assign({},i,{onSubmit:o,onClose:a}))}Eg.propTypes=kg;Eg.defaultProps=Ng;var Ag=Eg;const Ig=["editor","mode","onModeChange","onEmbedRemove","onEmbedSave","eventKey"];function Rg(e){const{editor:t,mode:n,onModeChange:o,onEmbedRemove:r,onEmbedSave:a,eventKey:s}=e,l=Object(d.a)(e,Ig),[c,u]=Object(i.useState)(null),[f,p]=Object(i.useState)({}),m=Object(i.useRef)(c);Object(i.useEffect)(()=>{m.current=c});const h=Object(i.useCallback)(()=>{if(m.current){u(null);p({})}},[]);Object(i.useEffect)(()=>{const e=({element:e})=>{if(e){p({embed:Ph(t,e)});if(e!==m.current){o(hi.d.PREVIEW);u(e)}}else h()};t.on("hsNodeChange:"+s,e);return()=>t.off("hsNodeChange:"+s,e)},[t,h,o,s]);return Object(Ye.jsx)(Re.a,{"data-test-id":"embed-popover-manager",editor:t,open:!!c,target:c,onRemove:h,arrowSize:"medium",placement:n===hi.d.PREVIEW?"bottom":"right",renderContent:()=>Object(Ye.jsx)(Ag,Object.assign({mode:n,onModeChange:o,onRemove:h,onEmbedRemove:r.bind(null,c),onEmbedSave:a.bind(null,c),dropdownClassName:"mce-ui-select",tooltipClassName:"mce-embed-tooltip"},f,l))})}Rg.propTypes={editor:r.a.object.isRequired,mode:r.a.oneOf(Object.keys(hi.d).map(e=>hi.d[e])),onModeChange:r.a.func,onEmbedRemove:r.a.func.isRequired,onEmbedSave:r.a.func.isRequired,showAlignmentControls:r.a.bool,showMarginControls:r.a.bool,staticPrefix:r.a.string,eventKey:r.a.string};var Lg=Object(gi.a)(Rg);const _g=Object(Mr.a)("TinymcePlugins.hsmedia");function Pg(e,t,n){const o=lg(e,n);p.a.canvas.addMenuItem(e,rn.w,{text:_g("menuItem"),onClick:o});const r=!Mh(e,Ko.DISABLE_ALIGNMENT),i=!Mh(e,Ko.DISABLE_SPACING),a=({element:t})=>!!t&&(ag(e,t)&&t),s=t=>Object.assign({},ig(e,t),{justifyDisabledTooltip:_g("fullWidthDisabledTooltip"),dimensionsDisabledTooltip:_g("dimensionsDisabledTooltip"),marginIconType:fi.a.EMBED,useFullWidth:!0});p.a.canvas.addNodeChangeHandler(e,{eventKey:t,isActiveNodeHandler:a,getActiveNodeAttributes:s,contextualToolbar:Zu({showAlignmentControls:r,showMarginControls:i})});p.a.canvas.addPopover(e,t,{renderPopover:n=>Object(Ye.jsx)(Lg,Object.assign({editor:e,onEmbedRemove:sg(e),onEmbedSave:rg(e),eventKey:t},n))})}const Mg={};function Dg(e){const t=Object(Lo.b)(e.get,Ro.a.OEMBED_PROXY.getUrl,Mg,Lo.a);return function(e){return t("",{query:{url:e}})}}var Bg=n(288),Fg=n.n(Bg);function Ug(e){const{provider:t,responsive:n,hasScripts:o,dimensions:r,isFullWidth:i,html:a}=e,s={"data-service":t};o&&(s["data-script-embed"]=!0);n&&(s["data-responsive"]=!0);(o||n)&&(s.style=Ah(Object.assign({},r,{isFullWidth:i,centered:!0,asAttr:!0})));return Object(Ye.jsx)("div",Object.assign({className:Fg()(or,i&&nr)},s,{children:Object(Ye.jsx)("div",{className:ir,dangerouslySetInnerHTML:{__html:a}})}))}let Vg,Hg;function qg(e,t){if(!e)return!1;const n=t.settings.media_scripts;if(n)for(let t=0;t<n.length;t++)if(-1!==e.indexOf(n[t].filter))return n[t];return!1}function $g(e,t,n){const o=new p.a.html.Writer;let r,i=0;function a(e,t){let n,o,r,i;for(n in t)if(t[n]){r=""+t[n];if(e.map[n]){o=e.length;for(;o--;){i=e[o];if(i.name===n)if(r){e.map[n]=r;i.value=r}else{delete e.map[n];e.splice(o,1)}}}else if(r){e.push({name:n,value:r});e.map[n]=r}}}new p.a.html.SaxParser({validate:!1,allow_conditional_comments:!0,special:"script,noscript",comment(e){o.comment(e)},cdata(e){o.cdata(e)},text(e,t){o.text(e,t)},start(e,s,l){switch(e){case"video":case"object":case"embed":case"img":case"iframe":a(s,{width:t.width,height:t.height})}if(n)switch(e){case"video":a(s,{poster:t.poster,src:""});t.source2&&a(s,{src:""});break;case"iframe":a(s,{src:t.url,"data-service":t.service});"twentythree"===t.service&&a(s,{class:`${Jo} ${nr}`});break;case"source":i++;if(1===i&&s.map.src===t.url){a(s,{src:t.url,type:Object(sh.g)(t.url)});break}if(i<=2){a(s,{src:t["source"+i],type:t[`source${i}mime`]});if(!t["source"+i])return}break;case"img":if(!t.poster)return;r=!0}o.start(e,s,l)},end(e){if("video"===e&&n)for(let e=1;e<=2;e++)if(t["source"+e]){const n=[];n.map={};if(i<e){a(n,{src:t["source"+e],type:t[`source${e}mime`]});o.start("source",n,!0)}}if(t.poster&&"object"===e&&n&&!r){const e=[];e.map={};a(e,{src:t.poster,width:t.width,height:t.height});o.start("img",e,!0)}o.end(e)}},new p.a.html.Schema({})).parse(e);return o.getContent()}function zg(e,t){let n={};new p.a.html.SaxParser({validate:!1,allow_conditional_comments:!0,special:"script,noscript",start(e,o){n.url||"param"!==e||(n.url=o.map.movie);if("iframe"===e||"object"===e||"embed"===e||"video"===e||"audio"===e){n.type||(n.type=e);n=Object.assign({},o.map,n)}else if("script"===e){const e=qg(o.map.src,t);if(!e)return;const r={type:"script",url:o.map.src,width:e.width,height:e.height};n=Object.assign({},r,n)}else"source"===e?n.url?n.source2||(n.source2=o.map.src):n.url=o.map.src:"img"!==e||n.poster||(n.poster=o.map.src)}}).parse(e);n.url=n.url||n.src||n.data;n.source2=n.source2||"";n.poster=n.poster||"";return n}function Wg(e,t){let n="";if(!t.url){(t=Object.assign({},t,zg(t.embed,e))).service=Fh(t);if(!t.url){const e=t.embed.match(/href="(.*)"/);e&&(t.url=e[1])}}t.source2||(t.source2="");t.poster||(t.poster="");t.url=e.convertURL(t.url,"source");t.source2=e.convertURL(t.source2,"source");t.source1mime=Object(sh.g)(t.url);t.source2mime=Object(sh.g)(t.source2);t.poster=e.convertURL(t.poster,"poster");Ym.q.forEach(e=>{const n=e.regex.exec(t.url);let o,r;if(n){r=e.url;for(o=0;n[o];o++)r=r.replace("$"+o,()=>n[o]);if(Ym.n[e.service]){const t=Object.assign({},Ym.n[e.service]);if(r.indexOf("?")>=0&&r.length>r.indexOf("?")+1){const e=r.substring(r.indexOf("?")+1).split("&");r=r.substring(0,r.indexOf("?"));for(o=0;e[o];o++)if(e[o].indexOf("=")>=0){const n=e[o].substring(0,e[o].indexOf("=")),r=e[o].substring(e[o].indexOf("=")+1);t[n]=r}}r=`${r}?${Object.keys(t).map(e=>`${e}=${t[e]}`).join("&")}`}t.url=r;t.type=e.type;t.allowFullscreen=e.allowFullscreen;t.width=t.width||e.w;t.height=t.height||e.h;t.service=e.service;return!1}return!0});if(t.embed)n=$g(t.embed,t,!0);else{const o=qg(t.url,e);if(o){t.type="script";t.width=o.width;t.height=o.height}t.width=t.width||300;t.height=t.height||150;Object.keys(t).forEach(n=>{t[n]=e.dom.encode(t[n])});if("iframe"===t.type)n+=Object(sh.e)(t);else if("application/x-shockwave-flash"===t.source1mime){n+=`<object data="${t.url}" width="${t.width}" height="${t.height}" type="application/x-shockwave-flash">`;t.poster&&(n+=`<img src="${t.poster}" width="${t.width}" height="${t.height}" />`);n+="</object>"}else-1!==t.source1mime.indexOf("audio")?e.settings.audio_template_callback?n=e.settings.audio_template_callback(t):n+=`<audio controls="controls" src="${t.url}">\n${t.source2?`\n<source src="data.source2"\n                ${t.source2mime?` type="${t.source2mime}"`:""} />\n`:""}</audio>`:"script"===t.type?n+=`<script src="${t.url}"><\/script>`:n=e.settings.video_template_callback?e.settings.video_template_callback(t):`<video width="${t.width}" height="${t.height}"\n              ${t.poster?` poster="${t.poster}"`:""} controls="controls">\n<source src="${t.url}"${t.source1mime?` type="${t.source1mime}"`:""} />\n${t.source2?`<source src="${t.source2}"${t.source2mime?` type="${t.source2mime}"`:""} />\n`:""}</video>`}return n}function Gg(e,t){return t.getAttribute("data-mce-object")?zg(e.serializer.serialize(t,{selection:!0}),e):{}}const Kg=(e,t,n,o=!1)=>{const{html:r,source:i,responsive:a,provider:s,isFullWidth:l}=t;let{dimensions:c}=t;!a||c&&c.width||(c={width:Xo});const u=Object(ah.a)(r),d=dh.a.renderToStaticMarkup(Object(Ye.jsx)(Ug,{provider:s,responsive:a,hasScripts:u,dimensions:c,isFullWidth:l,html:r}));if(o)e.undoManager.transact(()=>{e.selection.setContent("");e.insertContent(d)});else{e.undoManager.transact(()=>{e.insertContent(d);e.execCommand("hsInsertNewline",!1,{target:e.selection.getNode()})});Object(Ie.b)(e,"tinymceInsertEmbed",G.N,{service:s,tab:n||("url"===i?"general":"embed"),useIframeEmbeds:!0,hasScripts:u})}};function Yg(e,t,n){if(e.dom.hasClass(t,or)){const{embed:o}=n,r=Object(ah.a)(o),i=Fh({embed:o});if(r&&t.dataset.scriptEmbed){e.undoManager.transact(()=>{t.dataset.mceEmbedContent=o;t.dataset.service=i});e.fire("hsIframeEmbedContentChanged",{id:t.dataset.mceIframeEmbedId})}else{let n;if(r)n={html:o,responsive:!o.includes("<iframe"),provider:Fh({embed:o})};else{let e,r;if(t.dataset.service===i){r=t.classList.contains(nr);r||(e={width:parseInt(t.style.maxWidth,10),height:parseInt(t.style.maxHeight,10)})}n=Vh(o,e);n.isFullWidth=r}Kg(e,n,void 0,!0)}Zh(e,"source");return}let o=Wg(e,n);const r=new RegExp(/wistia_embed/i),i=new RegExp(/embedly-card/i);if(r.test(o)){const t=e.$('<div class="temp-wrapper">').html(o);o=e.$("<div>").append(t.html()).html()}else if(i.test(o)){const e=new RegExp(/(<\W*[a-zA-Z0-9]+\W)(.*\n*.*)*/).exec(o);e&&(o=`${e[1]}hubspot-new-embed ${e[2]}`)}e.undoManager.transact(()=>{e.insertContent(o)});e.nodeChanged();Zh(e,"source")}function Xg(e){function t(t){if(!1===e.settings.media_filter_html)return t;const n=new p.a.html.Writer;let o;new p.a.html.SaxParser({validate:!1,allow_conditional_comments:!1,special:"script,noscript",comment(e){n.comment(e)},cdata(e){n.cdata(e)},text(e,t){n.text(e,t)},start(t,r,i){o=!0;if("script"!==t&&"noscript"!==t){for(let n=0;n<r.length;n++){if(0===r[n].name.indexOf("on"))return;"style"===r[n].name&&(r[n].value=e.dom.serializeStyle(e.dom.parseStyle(r[n].value),t))}n.start(t,r,i);o=!1}},end(e){o||n.end(e)}},new p.a.html.Schema({})).parse(t);return n.getContent()}function n(t){const n=t.name,o=new p.a.html.Node("img",1);o.shortEnded=!0;Oa(e,t,o);const r=e.dom.parseStyle(t.attr("style")||""),i={style:t.attr("style"),src:p.a.Env.transparentSrc,"data-mce-object":n,class:"mce-object mce-object-"+n};let{width:a,height:s}=ga(Vg,t.attr("width"),t.attr("height"));if("none"!==r.display){a=a||"300";s=s||("audio"===n?"30":"150")}i.width=""+a;i.height=""+s;o.attr(i);return o}function o(t,n,o){const r=t.name;let i,a=new p.a.html.Node("span",1),s=a,l=t.attr("style"),{width:c,height:u}=ga(Vg,t.attr("width"),t.attr("height")),d=`mce-preview-object mce-object-${r}${t.attr("class")?" "+t.attr("class"):""}`;if("iframe"===r){let f=e.dom.parseStyle(l||"");const m=Th(c,u);c=m.width;u=m.height;f.width=c+"px";f.height=u+"px";if(Ym.g.includes(n)){a=new p.a.html.Node("div",1);d="mce-preview-object mce-object-"+r;let l=f;if(t.parent&&t.parent.parent&&"div"===t.parent.parent.name&&t.parent.parent.attr("class")&&t.parent.parent.attr("class").indexOf(er)>=0){d+=" "+t.parent.parent.attr("class");l=e.dom.parseStyle(t.parent.parent.attr("style"))}else d+=" "+er;f=Object.assign({},l,Ah({width:c,height:u,isFullWidth:o}));s=new p.a.html.Node("div",1);s.attr({class:tr,style:e.dom.serializeStyle(Eh({width:c,height:u}))});a.append(s);const m=t.attr("class")?t.attr("class").split(" "):[];m.includes(Jo)||m.push(Jo);!m.includes(nr)&&o&&m.push(nr);i={class:m.join(" "),style:e.dom.serializeStyle(Nh),"data-service":n}}Hg&&Object.keys(Hg).forEach(e=>{f[e]=f[e]||Hg[e]});l=e.dom.serializeStyle(f)}const f={contentEditable:"false","data-mce-object":r,class:d,style:l};a.attr(f);Oa(e,t,a);const m=new p.a.html.Node(r,1);let h={src:t.attr("src"),allowfullscreen:t.attr("allowfullscreen"),width:""+c,height:""+u,frameborder:"0",controls:t.attr("controls"),loading:t.attr("loading")};i&&(h=Object.assign({},h,i));m.attr(h);const g=new p.a.html.Node("span",1);g.attr("class","mce-shim");s.append(m);a.append(g);return a}e.on("click keyup",()=>{const t=e.selection.getNode();t&&e.dom.hasClass(t,"mce-preview-object")&&e.dom.getAttrib(t,"data-mce-selected")&&t.setAttribute("data-mce-selected","2")});e.on("ObjectSelected",e=>{const t=e.target.getAttribute("data-mce-object");"audio"!==t&&"script"!==t||e.preventDefault()});e.on("setContent",()=>{e.$("span.mce-preview-object").each((t,n)=>{const o=e.$(n);0===o.find("span.mce-shim",n).length&&o.append('<span class="mce-shim"></span>')})});e.on("preInit",()=>{const r=e.schema.getSpecialElements();"video audio iframe object".split(" ").forEach(e=>{r[e]=new RegExp(`</${e}[^>]*>`,"gi")});const i=e.schema.getBoolAttrs();"webkitallowfullscreen mozallowfullscreen allowfullscreen".split(" ").forEach(e=>{i[e]={}});e.parser.addNodeFilter("iframe,video,audio,object,embed,script",t=>{let r,i,a,s=t.length;for(;s--;){r=t[s];if(!r.parent)continue;let l=r.parent,c=!1,u=!1;for(;l&&!c&&!u;){if(l.attr("class")){c=l.attr("class").includes(or);u=l.attr("class").includes("hs-video")}l=l.parent}if((r.attr("class")||"").includes("hs-video")||c||u)continue;if(r.parent.attr("data-mce-object"))continue;if("script"===r.name){a=qg(r.attr("src"),e);if(!a)continue}if(a){a.width&&r.attr("width",a.width.toString());a.height&&r.attr("height",a.height.toString())}const d=r.attr("data-service")||Fh({embed:r.attr("src")});d&&r.attr("data-service",d);const f=r.parent&&r.parent.attr("class")?r.parent.attr("class").split(" "):[],p=r.attr("class")&&(r.attr("class").indexOf(nr)>=0||r.attr("class").indexOf(Jo)>=0&&f.includes(Qo))||"twentythree"===d;i=!1!==e.settings.media_live_embeds?o(r,d,p):n(r);if(Ym.g.includes(d))r.parent.parent&&"div"===r.parent.parent.name&&r.parent.parent.attr("class")&&r.parent.parent.attr("class").indexOf(er)>=0?r.parent.parent.replace(i):"div"===r.parent.name&&r.parent.firstChild===r&&p||"p"===e.settings.forced_root_block&&r.parent&&"p"===r.parent.name&&r.parent.firstChild===r&&r.parent.lastChild===r?r.parent.replace(i):r.replace(i);else if(f.includes(Qo)&&"div"===r.parent.name&&p)r.parent.replace(i);else{const t=r.attr("class");t&&-1!==t.indexOf("hs-video")&&"p"===e.settings.forced_root_block&&r.parent&&"p"===r.parent.name&&r.parent.firstChild===r&&r.parent.lastChild===r?r.parent.replace(i):r.replace(i)}}});e.serializer.addAttributeFilter("data-mce-object",(n,o)=>{let r,i,a,s,l,c,u,d,f=n.length;for(;f--;){r=n[f];d=!1;if(!r.parent)continue;const m=r.attr("class")||"";if(m.includes("hs-video")||m.includes(or))continue;u=r.attr(o);i=new p.a.html.Node(u,1);if("audio"!==u&&"script"!==u){const e=r.attr("class");e&&-1!==e.indexOf("mce-preview-object")&&r.firstChild?i.attr({width:r.firstChild.attr("width"),height:r.firstChild.attr("height")}):i.attr({width:r.attr("width"),height:r.attr("height")})}let h=r.attr("style");if("iframe"===u&&h){const t=e.dom.parseStyle(h);delete t.width;delete t.height;h=e.dom.serializeStyle(t)}h&&i.attr({style:h});s=r.attributes;a=s.length;for(;a--;){const e=s[a].name;"class"===e.substr(11)&&s[a].value.indexOf(Jo)>=0&&(d=!0);0===e.indexOf("data-mce-p-")&&i.attr(e.substr(11),s[a].value)}"script"===u&&i.attr("type","text/javascript");l=r.attr("data-mce-html");if(l){c=new p.a.html.Node("#text",3);c.raw=!0;c.value=t(decodeURI(l));i.append(c)}if("div"===r.name&&r.attr("class")&&r.attr("class").indexOf(er)>0){const e=new p.a.html.Node("div",1),t=r.attr("class").split(" ").filter(e=>e.indexOf("mce-")<0);t.includes(Qo)||t.push(Qo);e.attr({class:t.join(" "),style:r.attr("style")});const n=r.firstChild.clone();e.append(n);const o=r.getAll("iframe")[0];o&&i.attr({class:o.attr("class"),width:o.attr("width"),height:o.attr("height"),style:o.attr("style")});n.append(i);r.replace(e)}else if(["iframe","img","span"].indexOf(r.name)>=0&&d){const t=new p.a.html.Node("div",1);t.attr("class",`${Qo} hs-responsive-embed-${i.attr("data-service")}`);i.attr("class",Jo);t.append(i);"p"===e.settings.forced_root_block&&r.parent&&"p"===r.parent.name&&r.parent.firstChild===r&&r.parent.lastChild===r?r.parent.replace(t):r.replace(t)}else r.replace(i)}})})}const Zg=e=>{const t=Object(Ym.i)(),n=fg(e,t),o=pg(e),r=e=>{const{origin:r,source:i,data:a}=e;if(r!==t||i===window)return;const{action:s,id:l,payload:c}=a.body||{};s===Ym.a.READY?n(l):s===Ym.a.SIZE_CHANGE&&o(l,c)};window.addEventListener("message",r);e.on("remove",()=>window.removeEventListener("message",r));e.on("ObjectSelected",mg(e));e.on("dragStart",gg());e.on("drop",bg(e));e.on("hsIframeEmbedContentChanged",({id:e})=>{n(e)})},Qg=(e,t,n)=>{Vg=Mh(e,Ko.MAX_DIMENSION_WIDTH);Hg=Mh(e,Ko.DEFAULT_STYLES);Xg(e);jh(e);Zg(e);e.on("ObjectResized",cg(e,$g,Vg));e.on("hsEmbedSizeChange",ug(e,Hg));bh(e);Pg(e,t,n);const o=dg(e);e.on("hsAlignmentChange",({target:t,alignment:n})=>{ag(e,t)&&o(t,n)});const r=tg(e);e.on("hsDimensionChange",({target:t,dimensions:n={}})=>{ag(e,t)&&r(t,n)});const i=ng(e);e.on("hsMarginChange",({target:t,margin:n})=>{ag(e,t)&&i(t,n)})},Jg=e=>{const t=e.selection.getNode(),n=Gg(e,t);let o=0;n.embed=Ph(e,t);if(t.classList.contains("mce-object")){const r=e.$(t);if(r.hasClass("hs-embeddable")){const e=_h(r);n.embed=e;o=1}}return{src:n.src,embed:n.embed,defaultTab:o}},eb=e=>({url:t,html:n})=>new Promise((o,r)=>{if(t){let n;try{n=Gh(t)}catch(e){r(e.message)}Dg(e)(n).then(e=>{const{status:t,message:n}=e;if(t)throw new Error(n);const{type:i,width:a,height:s,provider_name:l}=e,c={width:a,height:s},u=l?l.toLowerCase():"";let d,f;if("video"===i||"rich"===i){f=e.html.trim();const t=Object(ah.a)(f);d=t&&!f.includes("<iframe");if(!t){const{html:e,responsive:t}=Vh(f,c);f=e;d=t}f=Hh(f,u)}else if("photo"===i){f=qh(e.url);d=!0}else"link"===i&&r("Cannot insert oEmbed of type `link`.");o({html:f,dimensions:c,provider:u,responsive:d,source:"url"})}).catch(e=>{r(e)})}else{if(Object(ah.a)(n)){o({html:n,responsive:!n.includes("<iframe"),provider:Fh({embed:n})});return}const{html:e,responsive:t,dimensions:r,provider:i}=Vh(n);o({html:e,responsive:t,dimensions:r,provider:i})}}),tb=B.D;let nb=null;const ob=e=>{const t=e.getParam("apiClient"),{getUserAttributes:n,setUserAttribute:o}=Object(Ir.h)(["plugins","hscore","api"],e);return()=>{const{embed:r}=Jg(e);if(!nb){const t=Object(Ee.a)(e,"embed-modal-container");if(!t){console.error("Could not append div to editor.");return}nb=t}const i=t=>{Kg(e,t)},a=()=>{ri.a.unmountComponentAtNode(nb)};ri.a.render(Object(Ye.jsx)(ch,{rootNode:si(),className:"mce-hubspot-embed--modal",embed:r,onSubmit:i,onClose:a,fetchEmbedCode:eb(t),getUserAttributes:n,setUserAttribute:o,useIframeEmbeds:!0}),nb)}};function rb(e){Qg(e,tb,ob(e))}p.a.PluginManager.add(tb,rb);function ib(e){const t=Np(e);e.on("hsAlignmentChange",({target:n,alignment:o})=>{Sm(e,n)&&t(n,o)});const n=jp(e);e.on("hsFillColorChange",({target:t,color:o})=>{Sm(e,t)&&n(t,o.color)});const o=Tp(e);e.on("hsMarginChange",({target:t,margin:n})=>{Sm(e,t)&&o(t,n)});const r=Gf(e,Or.MAX_DIMENSION_WIDTH),i=wp(e,r);e.on("hsDimensionChange",({target:t,dimensions:n={}})=>{Sm(e,t)&&i(t,n)})}const ab=B.P,sb=()=>{};let lb=null;const cb=e=>{if(!lb){const t=Object(Ee.a)(e,"video-modal-container");if(!t){console.error("Could not append div to editor.");return null}lb=t}return lb};function ub(e){return(t,n,o=sb)=>{const r=cb(e);if(!r)return;const{player_id:i}=n;Bf(i,!0);const a=()=>{ri.a.unmountComponentAtNode(r)},s=()=>{p.a.util.Delay.setEditorTimeout(e,()=>{e.focus();const n=e.$("iframe",t);n.attr("src",n.attr("src"))})},l=e=>{o(e);a();s()},c=Object(wt.a)(e,"HubSpotVideoPicker","`HubSpotVideoPicker` picker component is required for the video plugin");ri.a.render(Object(Ye.jsx)(c,{rootNode:si(),className:"mce-video-details-panel",editingVideoId:i,onClose:a,onSelect:l}),r)}}function db(e,t){const n=cb(e),o=Object(wt.a)(e,"HubSpotVideoPicker","HubSpotVideoPicker not found in PickerComponents"),r=()=>{ri.a.unmountComponentAtNode(n)},i=e=>{t(e);r()};ri.a.render(Object(Ye.jsx)(o,{rootNode:si(),onSelect:i,onClose:r}),n)}const fb=e=>()=>{const t=cb(e);t&&ri.a.unmountComponentAtNode(t)},pb=(e,t,n)=>{const o=fb(e),r=Op(e);return(i,a,s)=>{n?n(a,s):a&&r(t,{type:Pf.e.CTA,id:a});Object(Ie.b)(e,"tinymceCta",G.F,{version:"v2",context:"video"});o()}},mb=e=>(t,n,o)=>{const r=cb(e);if(!r)return;"string"!=typeof n&&(n=void 0);const i=Object(wt.a)(e,"FilePicker"),a=pb(e,t,o),s=fb(e),l=Object(wt.a)(e,"CtaPicker");ri.a.render(Object(Ye.jsx)(l,{rootNode:si(),className:"mce-cta-picker",isVideo:!0,includeVideoCtas:!0,includeWebInteractives:!0,httpClient:qo.a,handleInsert:a,onCloseComplete:()=>{p.a.util.Delay.setEditorTimeout(e,()=>{e.focus()})},portalId:cn.a.get(),handleClose:s,selectedGuid:n,FilePicker:i}),r);Object(Ie.b)(e,"tinymceCta",G.W,{version:"v2",context:"video"})},hb=e=>(t,n,o,r=sb)=>{const i=cb(e);if(!i)return;const a=()=>{ri.a.unmountComponentAtNode(i)},s=e=>{r(e);a()};ri.a.render(Object(Ye.jsx)(Mf.a,{rootNode:si(),onSubmit:s,onClose:a,conversionAsset:o,video:n,trackVideoInteraction:pp(e)}),i)},gb=e=>({onEditDetails:ub(e),onUpdateConversionAsset:Op(e),onOpenCtaPicker:mb(e),onOpenConversionAssetPanel:hb(e)});function bb(e){return t=>{const n=yp(e,t);db(e,n)}}function vb(e){if(!Object(Ee.g)(e,B.D))throw new Error(`[tinymce-plugins] ${ab} requires the ${B.D} plugin`);km(e,ab,bb(e),ob(e),gb(e));Lm(e);ib(e)}p.a.PluginManager.add(ab,vb);function yb(e={}){return{type:Cc,props:e}}function Cb(e,t){return Object.assign({type:xc,modalId:e},t)}const Ob=B.E;function xb(e){return`${e.id}-${Ob}`}const jb=e=>()=>{const{src:t,embed:n,defaultTab:o}=Jg(e);let r=null;const i=e=>{const{action:t}=e,{data:n}=t;r=n};Ec(e,{restoreSelection:!0,onOpen(){e.settings.bus.dispatchAction(Cb(xb(e),{url:t,embed:n,defaultTab:o}));e.once(jc,i)},onClose(){e.off(jc,i);r&&Kg(e,r)}})};function Sb(e){Qg(e,Ob,jb(e))}p.a.PluginManager.add(Ob,Sb);const wb=B.Q,Tb=()=>{};function kb(e){return t=>{Rc({editor:e,callback:yp(e,t),restoreSelection:!1})}}function Nb(e){return(t,n,o=Tb)=>{const{player_id:r}=n,i=({action:e})=>{const{video:t}=e;o(t)};Ec(e,{onOpen(){Bf(r,!0);e.settings.bus.dispatchAction(Tc(r));e.once(fc,i)},onClose(){const n=e.$("iframe",t);n.attr("src",n.attr("src"));e.off(fc,i)}})}}function Eb(e){return(t,n,o,r=Tb)=>{const{videoId:i}=n,a=({action:e})=>{const{conversionAsset:t}=e;r(t)};Ec(e,{onOpen(){Bf(i,!0);e.settings.bus.dispatchAction(kc(n,o));e.once(bc,a)},onClose(){e.off(bc,a)}})}}const Ab=(e,t)=>{const n=Op(e);return o=>{if(o){Object(Ie.b)(e,"tinymceCta",Oc,{version:"v2",context:"video"});n(t,{type:Pf.e.CTA,id:o})}}},Ib=e=>(t,n,o)=>{const r=({action:n})=>{const{guid:r,cta:i}=n;(o||Ab(e,t))(r,i)};Ec(e,{onOpen(){e.settings.bus.dispatchAction(yb({selectedGuid:n,isVideo:!0,includeVideoCtas:!0}));e.once(Oc,r)},onClose(){e.off(Oc,r)}});Object(Ie.b)(e,"tinymceCta",G.W,{version:"v2",context:"video"})},Rb=e=>({onEditDetails:Nb(e),onUpdateConversionAsset:Op(e),onOpenCtaPicker:Ib(e),onOpenConversionAssetPanel:Eb(e)});function Lb(e){if(!Object(Ee.g)(e,B.E))throw new Error(`[tinymce-plugins] ${wb} requires the ${B.E} plugin`);km(e,wb,kb(e),jb(e),Rb(e));Lm(e);ib(e)}p.a.PluginManager.add(wb,Lb);const _b=(e,t)=>e.dom.is(t,"img[data-hs-cta-img]"),Pb=(e,t,n)=>{t.undoManager.transact(()=>{const o=e.getAttribute("data-hs-cta-style");e.removeAttribute("style");e.removeAttribute("data-hs-cta-style");const r=dr[n];if(r&&n!==o){e.setAttribute("data-hs-cta-style",n);t.dom.setStyles(e,r)}})},Mb=e=>(e.getAttribute("data-hs-img-pg")||e.getAttribute("id")||"").replace("hs-cta-img-","");var Db=n(9),Bb=n.n(Db);new RegExp(/\{\{\s*cta\(([^)]+)\)\s*\}\}/g);const Fb={},Ub=(e,t)=>{const n=`${e}-${t}`;Fb[n]||(Fb[n]=0);Fb[n]++;return`${n}-${Fb[n]}`},Vb=()=>{let e="";const t=Bb.a.isProd()?"":"qa",n=Bb.a.getHublet();e="na1"===n?"cta-image-cms2":"cta-"+n;return`https://${e}.hubspot${t}.com`},Hb=(e,t,n=!1)=>{const o=Bb.a.isProd(),r=Bb.a.getHublet(),i=o?"":"qa",a=n?"email/":"";return"na1"===r?`https://cta-service-cms2.hubspot${i}.com/web-interactives/public/v1/embed/cta-image/${a}${e}?portalId=${t}`:`https://cta-${r}.hubspot${i}.com/web-interactives/public/v1/embed/cta-image/${a}${e}?portalId=${t}`},qb=(e,t,n)=>isNaN(Number(e))?`${Vb()}/ctas/v2/public/cs/il/?pg=${e}&pid=${t}&hs_preview=true&_=${Date.now()}`:Hb(e,t,n),$b=(e,t)=>Object.values(zo.b).find(n=>e.formatter.matchNode(t,zo.c[n]))||zo.b.NONE,zb=e=>t=>{if(t){const n=e.selection.getNode();let o;const r="contextualToolbar";if(n&&_b(e,n)){o=n.getAttribute("style");Object(Ie.b)(e,"tinymceCta",G.lb,{version:r})}else Object(Ie.b)(e,"tinymceCta",G.F,{version:r});const i=e.dom.select(`img[data-hs-img-pg="${t}"]`);e.undoManager.transact(()=>{e.insertContent(`{{cta('${t}')}}`)});const a=e.dom.select(`img[data-hs-img-pg="${t}"]`).filter(e=>!i.includes(e))[0];o&&a.setAttribute("style",o);e.selection.select(a)}},Wb=(e="")=>e.split(",").reduce((e,t)=>{t=(t=(t=t.trim()).replace(/^['"]/,"")).replace(/['"]$/,"");e.push(t);return e},[]),Gb=(e,t,n)=>{const{$:o}=n,r=cn.a.get(),i=o(`<img class='hs-mce-draggable' id='${"hs-cta-image-"+Ub(cn.a.get(),e)}' data-hs-img-pg='${e}' data-hs-cta-img='true' data-mce-resize='false' data-mce-placeholder='true' />`);i.attr("src",qb(e,r,Object(Ee.f)(n,"isEmail")));if(t){const e=t.replace(/^justify/,"");i.attr("data-hs-cta-style",e);i.css(dr[e])}return i[0].outerHTML},Kb=e=>t=>{const n=t.textContent.replace(pr,(t,n)=>{const o=Wb(n),r=o[0],i=o.length>1?o[1]:null;return Gb(r,i,e)}),o=document.createElement("div");o.innerHTML=n;return o.childNodes},Yb=e=>{const t=e.getAttribute("data-hs-img-pg");if(!t||!t.length)return"";const n=[t],o=e.getAttribute("data-hs-cta-style");if(o){const e=fr[o];e&&n.push(e)}const r=n.map(e=>`'${e}'`).join(",");return document.createTextNode(`{{cta(${r})}}`)},Xb=e=>(t,n)=>{if(_b(e,t)){Pb(t,e,n);Object(Ie.b)(e,"tinymceCta",G.u,{version:"contextualToolbar",editType:"alignment"})}},Zb=e=>t=>{e.undoManager.transact(()=>{e.dom.remove(t);Object(Ie.b)(e,"tinymceCta",G.u,{version:"contextualToolbar",editType:"remove"})})},Qb=e=>"RichTextLib.cta.lite."+e,Jb={ctaUrl:r.a.string,ctaName:r.a.string,onReplace:r.a.func.isRequired,onRemove:r.a.func.isRequired};function ev(e){const{ctaUrl:t,ctaName:n,onReplace:o,onRemove:r}=e,[a]=Object(i.useState)([{iconName:hi.c.REPLACE,onClick:o},{iconName:hi.c.REMOVE,onClick:r}]);return Object(Ye.jsx)(ws.a,{"data-test-id":"cta-popover-body-lite",iconButtons:a,i18nKey:Qb,children:Object(Ye.jsx)(Ts.a,{className:"p-left-3 p-right-1",alignSelf:"center",children:Object(Ye.jsx)(mn.a,{title:Object(Ye.jsx)(Ns.a,{matchContentWidth:!0,tooltip:!1,children:t}),placement:"bottom",children:Object(Ye.jsx)(pn.a,{className:"display-inline-block",external:!0,href:t,truncate:!0,truncateStringProps:{maxWidth:175,tooltip:!1},children:n})})})})}ev.propTypes=Jb;ev.displayName="CtaPopoverBodyLite";const tv=Dp(ev);function nv(e){const{editor:t,showCtaPicker:n,onRemoveCta:o,getCtaAlignment:r,fetchCtaInfo:a,eventKey:s}=e,[l,c]=Object(i.useState)(null),[u,d]=Object(i.useState)(null),[f,p]=Object(i.useState)(1),m=Object(i.useRef)(u);Object(i.useEffect)(()=>{m.current=u});const h=Object(i.useCallback)(()=>{if(m.current){d(null);c(null)}},[]);Object(i.useEffect)(()=>{const e=({element:e})=>{if(e)if(e!==m.current){d(null);c(Mb(e));d(e)}else p(e.outerHTML);else h()};t.on("hsNodeChange:"+s,e);return()=>t.off("hsNodeChange:"+s,e)},[t,h,r,s]);const g=()=>{d(null);n()};return Object(Ye.jsx)(Re.a,{"data-test-id":"cta-popover-manager",editor:t,placement:"bottom",open:!!u,target:u,onRemove:h,renderContent:()=>Object(Ye.jsx)(tv,{refreshKey:f,ctaGuid:l,fetchOnMount:!0,fetchCtaInfo:a,onReplace:g,onRemove:o.bind(null,u)})})}var ov=nv;const rv=Object(Mr.a)("TinymcePlugins.hscta"),iv=(e,t,n)=>{const o=Object(Ee.f)(e,hr,{}),r=e=>n(e,o);p.a.canvas.addMenuItem(e,rn.u,{text:rv("menuItem"),onClick:()=>r()});const i=({element:t})=>!!t&&(_b(e,t)&&t),a=t=>({guid:Mb(t),alignment:$b(e,t)});p.a.canvas.addNodeChangeHandler(e,{eventKey:t,isActiveNodeHandler:i,getActiveNodeAttributes:a,contextualToolbar:Ku()});e.on("mousedown",({target:t})=>{i({element:t})&&e.selection.select(t)});const s=e.getParam("apiClient");p.a.canvas.addPopover(e,t,{renderPopover:n=>Object(Ye.jsx)(ov,Object.assign({editor:e,showCtaPicker:r,onRemoveCta:Zb(e),onChangeAlignment:Xb(e),getCtaAlignment:$b,fetchCtaInfo:Ap(s),eventKey:t},n))})},av=e=>{const t=Kb(e);Object(F.b)(e,e=>{const n=e.createNodeIterator(e.body,NodeFilter.SHOW_TEXT,e=>mr().test(e.textContent)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT,!1),o=[];let r=n.nextNode();for(;r;){o.push(r);r=n.nextNode()}Object(F.g)(o,t)});Object(F.a)(e,e=>{const t=e.querySelectorAll("[data-hs-img-pg]");Object(F.g)(t,Yb)})};function sv(e){const t=Xb(e);e.on("hsAlignmentChange",({target:n,alignment:o})=>{_b(e,n)&&t(n,o)})}const lv=B.n,cv=new Map,uv=e=>()=>{const t=cv.get(e);if(t&&t.domNode&&t.rendered){ri.a.unmountComponentAtNode(t.domNode);t.rendered=!1;e.nodeChanged()}},dv=e=>{const t=zb(e),n=uv(e);return(e,o,r)=>{o&&t(o,r);n()}},fv=e=>t=>{"string"!=typeof t&&(t=void 0);const n=dv(e),o=uv(e);let r=cv.get(e),i=r&&r.domNode;if(!i){i=Object(Ee.a)(e,"cta-modal-container");if(!i){console.error("Could not append div to editor.");return}r={domNode:i,rendered:!0};cv.set(e,r)}r.rendered=!0;const a=Object(wt.a)(e,"CtaPicker","`CtaPicker` picker component is required for the cta plugin"),s=Object(wt.a)(e,"FilePicker","`FilePicker` picker component is required for the cta plugin");ri.a.render(Object(Ye.jsx)(a,{rootNode:si(),className:"mce-cta-picker",httpClient:qo.a,handleInsert:n,onCloseComplete:()=>{p.a.util.Delay.setEditorTimeout(e,()=>{e.focus()})},portalId:cn.a.get(),handleClose:o,selectedGuid:t,FilePicker:s}),i);Object(Ie.b)(e,"tinymceCta",G.W,{version:"contextualToolbar"})};function pv(e){av(e);sv(e);iv(e,lv,fv(e))}p.a.PluginManager.add(lv,pv);const mv=B.o,hv=e=>(t,n={})=>{const o=({action:t})=>{const{guid:n,cta:o}=t;zb(e)(n,o)};Ec(e,{onOpen(){e.settings.bus.dispatchAction(yb(Object.assign({selectedGuid:t},n)));e.once(Oc,o)},onClose(){e.off(Oc,o)}});Object(Ie.b)(e,"tinymceCta",G.W,{version:"contextualToolbar"})};function gv(e){av(e);sv(e);iv(e,mv,hv(e))}p.a.PluginManager.add(mv,gv);var bv=n(2745),vv=n(2719);const yv=e=>"RichTextLib.icon.selector."+e,Cv=e=>{const t=of.g[e];return t?Nt.a.text(yv("sections."+t)):e},Ov=l.a.div.withConfig({displayName:"IconPopoverBodyInsert__IconScrollContainer",componentId:"tgoxre-0"})(["height:200px !important;overflow-y:scroll !important;position:relative !important;line-height:initial;margin-top:6px;margin-bottom:10px;margin-left:20px;padding-right:15px;user-select:none;"]),xv=l.a.div.withConfig({displayName:"IconPopoverBodyInsert__SectionLabel",componentId:"tgoxre-1"})(["background-color:"," !important;color:"," !important;font-size:12px !important;line-height:12px;padding:4px 0 10px !important;position:sticky !important;top:0 !important;z-index:2;"],an.OLAF,an.SLINKY),jv=l.a.span.withConfig({displayName:"IconPopoverBodyInsert__IconItem",componentId:"tgoxre-2"})(["cursor:pointer !important;overflow:hidden;width:36px;height:36px;border-radius:18px;line-height:36px !important;text-align:center;vertical-align:middle;display:inline-block;z-index:1;transition:background-color 0.2s;svg{vertical-align:middle;}&:hover{background-color:",";}"],an.CALYPSO_LIGHT),Sv=l.a.div.withConfig({displayName:"IconPopoverBodyInsert__SelectedIconContainer",componentId:"tgoxre-3"})(["width:100%;height:24px;padding-left:15px;display:flex;align-items:center;"]),wv=l.a.div.withConfig({displayName:"IconPopoverBodyInsert__SelectedIcon",componentId:"tgoxre-4"})(["text-align:center;width:24px;height:18px;overflow:visible;"]),Tv=l()(Ns.a).withConfig({displayName:"IconPopoverBodyInsert__SelectedIconName",componentId:"tgoxre-5"})(["font-size:12px;margin-left:8px;margin-right:12px;"]),kv=l()(Us.a).withConfig({displayName:"IconPopoverBodyInsert__HorizontalLine",componentId:"tgoxre-6"})(["background-color:",";"],an.BATTLESHIP),Nv=({sectionName:e,items:t})=>{const n="section--"+e;return Object(Ye.jsxs)("div",{"data-test-id":n,children:[Object(Ye.jsx)(xv,{children:Cv(e)}),t]},n)},Ev=({iconDisplayInfo:e,onIconHover:t,onIconSelect:n})=>{const{svgHtmlList:o,setName:r,name:i}=e;return Object(Ye.jsx)(jv,{onMouseOver:()=>t(e),onClick:()=>n({setName:r,name:i}),dangerouslySetInnerHTML:{__html:o[0]}},`${r}--${i}`)},Av=({iconDisplayMap:e,staticPrefix:t,onIconSelect:n,onIconHover:o,searchTerm:r})=>{const i=Object.keys(e).filter(e=>Boolean(of.f[e]));if(!i.length)return Object(Ye.jsx)("div",{className:"m-all-4",children:Object(Ye.jsx)(ft.a,{message:yv("noIconsAvailable")})});let a=!r;const s=r.toLowerCase(),l=i.map(t=>{let r=!1;const i=e[t],l=Object.keys(i).map(e=>{if(s&&-1===e.toLowerCase().indexOf(s))return null;r=!0;return Ev({iconDisplayInfo:{svgHtmlList:i[e],setName:t,name:e},onIconHover:o,onIconSelect:n})});if(!r)return null;a=!0;return Nv({sectionName:t,items:l})});return a?l:Object(Ye.jsxs)("div",{className:"m-top-2",children:[Object(Ye.jsx)(ft.a,{message:yv("noResultsFound")}),"",Object(Ye.jsx)(zs.a,{responsive:!1,src:t+"/images/frown-icon.svg"})]},"empty-results")},Iv=({iconDisplayMap:e,onIconSelect:t,onIconHover:n,frequentlyUsedIconList:o,searchTerm:r})=>{if(r||!o.length)return null;let i=!0;const a=o.map(o=>{const{setName:r,name:a}=o,s=Object.prototype.hasOwnProperty.call(e,r)&&e[r][a];if(s){i=!1;return Ev({iconDisplayInfo:{svgHtmlList:s,setName:r,name:a},onIconHover:n,onIconSelect:t})}return null});return!i&&Nv({sectionName:"frequentlyUsed",items:a})},Rv={iconDisplayMap:r.a.object.isRequired,onIconSelect:r.a.func.isRequired,getFrequentlyUsedIconList:r.a.func.isRequired,staticPrefix:r.a.string.isRequired,onRemove:r.a.func.isRequired};function Lv(e){const{iconDisplayMap:t,onIconSelect:n,getFrequentlyUsedIconList:o,staticPrefix:r,onRemove:a}=e,[s,l]=Object(i.useState)(""),[c,u]=Object(i.useState)({}),d=e=>{e.key===hi.b.ESCAPE&&a()},f=Object(i.useCallback)(e=>{u(e)},[]),p=({target:{value:e}})=>{l(e);f({})},m=Object(i.useMemo)(()=>Av({iconDisplayMap:t,onIconSelect:n,onIconHover:f,searchTerm:s,staticPrefix:r}),[t,n,f,s,r]);return Object(Ye.jsxs)("div",{className:"small-popover-body","data-test-id":"icon-popover-insert",onKeyDown:d,tabIndex:"-1",children:[Object(Ye.jsx)(Hs.a,{"aria-label":"search",className:"p-all-5",children:Object(Ye.jsx)(bv.a,{"data-test-id":"icon-search-input",placeholder:Nt.a.text(yv("searchPlaceholder")),icon:!1,clearable:!1,onChange:p,value:s,autoFocus:!0})}),Object(Ye.jsx)(kv,{distance:"flush"}),Object(Ye.jsxs)(vv.a,{"data-test-id":"icon-scroll-container",scrollDirection:"vertical",maxHeight:200,size:0,ScrollContainer:Ov,children:[Iv({iconDisplayMap:t,onIconSelect:n,onIconHover:f,frequentlyUsedIconList:o(Object.keys(t)),searchTerm:s}),m]}),Object(Ye.jsx)(kv,{distance:"flush"}),Object(Ye.jsxs)(Sv,{className:"m-y-2",children:[(c.svgHtmlList||[]).map((e,t)=>Object(Ye.jsx)(wv,{dangerouslySetInnerHTML:{__html:e}},t)),Object(Ye.jsx)(Tv,{children:c.name||""})]})]})}Lv.propTypes=Rv;Lv.displayName="IconPopoverBodyInsert";var _v=Lv;const Pv=["onEdit","onReplace","onRemove","onUnlink"],Mv=e=>"RichTextLib.icon.lite."+e,Dv=Object.assign({onEdit:r.a.func.isRequired,onReplace:r.a.func.isRequired,onRemove:r.a.func.isRequired,onUnlink:r.a.func.isRequired},Ps.propTypes);function Bv(e){const{onEdit:t,onReplace:n,onRemove:o,onUnlink:r}=e,i=Object(d.a)(e,Pv),a=[{iconName:hi.c.EDIT,onClick:t},{iconName:hi.c.REPLACE,onClick:n},{iconName:hi.c.REMOVE,onClick:o}];e.href&&a.push({iconName:hi.c.UNLINK,onClick:r});return Object(Ye.jsx)(ws.a,{"data-test-id":"icon-popover-body-lite",iconButtons:a,i18nKey:Mv,children:e.href&&Object(Ye.jsx)(Ps,Object.assign({},i,{className:"p-left-3 "+(e.linkType===h.ANCHOR?"p-right-2":"p-right-1"),alignSelf:"center"}))})}Bv.propTypes=Dv;Bv.displayName="IconPopoverBodyLite";var Fv=Bv;const Uv=["relAttr","onLinkTypeChange","iconInfo","onUpdate","onSave","onClose"],Vv="RichTextLib",Hv=e=>`${Vv}.icon.${e}`,qv=e=>`${Vv}.links.advanced.${e}`,$v=e=>/["'%<>]/.test(e),zv=({relAttr:e,onRelAttrChange:t,linkType:n,showRefAndTargetControls:o,purpose:r,title:a,invalidTitle:s,onPurposeChange:l,onTitleChange:c,tooltipClassName:u,isSubmitDisabled:d,onSubmit:f,onCancel:p})=>({onCloseMorphedContent:m})=>{const g=e=>()=>{l(e)},b=e=>{const{value:t}=e.target;c(t)},v=r===of.e.DECORATIVE;return Object(Ye.jsxs)(i.Fragment,{children:[Object(Ye.jsx)(bl,{className:"p-x-5 p-bottom-1",relAttr:e,onRelAttrChange:t,disabled:n===h.NONE||!o,tooltipClassName:u}),Object(Ye.jsx)(Us.a,{distance:"xs"}),Object(Ye.jsxs)(Vs.a,{className:"p-x-5 p-bottom-5",_size:"small",children:[Object(Ye.jsx)(Hs.a,{label:Nt.a.text(Hv("purposeInput")),tooltip:Nt.a.text(Hv("accessibilityTooltip")),tooltipPlacement:"top right",tooltipProps:{innerClassName:u},children:Object(Ye.jsx)(dl.a,{name:"purpose",inline:!1,children:Object.values(of.e).map(e=>Object(Ye.jsx)(qp.a,{"data-test-id":"purpose-option-"+e,inline:!1,checked:e===r,onChange:g(e),children:Object(Ye.jsx)(ft.a,{message:Hv("purpose."+e)})},e))})}),Object(Ye.jsx)(Hs.a,{className:"m-top-1",label:Nt.a.text(Hv("titleInput")),labelClassName:"p-top-0",error:s,validationMessage:s?Nt.a.text(Hv("titleErrorMessage")):"",tooltip:Nt.a.text(Hv("titleInputTooltip")),tooltipPlacement:"top right",tooltipProps:{innerClassName:u,disabled:v},children:Object(Ye.jsx)(qs.a,{"data-test-id":"icon-title-input",name:"title",onChange:b,disabled:v,value:v?"":a,autoFocus:!v})})]}),Object(Ye.jsx)(ll,{className:"p-x-5 p-bottom-5",popoverType:hi.e.EDIT,isSubmitDisabled:d,onSubmit:()=>{f()||m()},onCancel:p})]})},Wv=Object.assign({},Fl.propTypes,{relAttr:r.a.array,iconInfo:r.a.object,onSave:r.a.func.isRequired,onClose:r.a.func.isRequired});function Gv(e){const{relAttr:t,onLinkTypeChange:n,iconInfo:o,onUpdate:r,onSave:a,onClose:s}=e,l=Object(d.a)(e,Uv),[c,u]=Object(i.useState)(o.purpose),[f,p]=Object(i.useState)(o.title),[m,g]=Object(i.useState)(c===of.e.SEMANTIC&&$v(f)),[b,v,y]=Ws({linkType:e.linkType,href:e.href,isValidLink:e.isValidLink,onLinkTypeChange:n,onUpdate:r,onSubmit:a}),C=e=>{e.key===hi.b.ESCAPE&&s()},O=()=>{y({purpose:c,title:c===of.e.SEMANTIC&&f})},x=e=>{v({relAttr:e})},j=e=>{e===of.e.DECORATIVE?g(!1):g($v(f));u(e)},S=e=>{g($v(e));p(e)},w=e.linkType!==h.NONE&&Ks(e.href)||m;return Object(Ye.jsx)("div",{className:"small-popover-body",tabIndex:"-1",children:Object(Ye.jsx)(ol,{title:Hv("popoverTitle"),titleClassName:"p-x-5 p-top-5",morphButtonTitle:qv("title"),morphedContentTitle:qv("title"),renderMorphedContent:zv({relAttr:t,onRelAttrChange:x,linkType:e.linkType,showRefAndTargetControls:e.showRefAndTargetControls,purpose:c,title:f,invalidTitle:m,onPurposeChange:j,onTitleChange:S,tooltipClassName:e.tooltipClassName,isSubmitDisabled:w,onSubmit:O,onCancel:s}),children:Object(Ye.jsxs)("div",{onKeyDown:C,children:[Object(Ye.jsx)(Fl,Object.assign({},l,{className:"p-x-5 p-bottom-1",onLinkTypeChange:b,onUpdate:v,onSubmit:O,onClose:s})),Object(Ye.jsx)(ll,{className:"p-x-5 p-bottom-5 "+(e.showRefAndTargetControls?"m-top-3":"m-top-5"),popoverType:hi.e.EDIT,isSubmitDisabled:w,onSubmit:O,onCancel:s})]})})})}Gv.propTypes=Wv;Gv.displayName="IconPopoverBodyEdit";var Kv=Gv;const Yv=["mode","onModeChange","onSave","onReplaceIcon","onIconRemove"],Xv={mode:r.a.oneOf(Object.values(hi.d)),onModeChange:r.a.func.isRequired,onSave:r.a.func.isRequired,onReplaceIcon:r.a.func.isRequired,onIconRemove:r.a.func.isRequired},Zv={mode:hi.d.PREVIEW};function Qv(e){const{mode:t,onModeChange:n,onSave:o,onReplaceIcon:r,onIconRemove:i}=e,a=Object(d.a)(e,Yv);if(t===hi.d.PREVIEW){const e=()=>{n(hi.d.EDIT)};return Object(Ye.jsx)(Fv,Object.assign({},a,{onEdit:e,onReplace:r,onRemove:i}))}const s=e=>{n(hi.d.PREVIEW);o(e)},l=()=>{n(hi.d.PREVIEW)};return Object(Ye.jsx)(Kv,Object.assign({},a,{onSave:s,onClose:l}))}Qv.propTypes=Xv;Qv.defaultProps=Zv;var Jv=Ss(Qv);const ey={};function ty(e){const t=Object(Lo.b)(e.get,Ro.a.ICON_SET.getUrl,ey,Lo.a);return function(e=""){return t(e,{query:{offset:0,limit:1e4}})}}const ny={};function oy(e){const t=ty(e);return function(e,n,o={setMap:{},setDisplayMap:{}}){return ny[n]?Promise.resolve(ny[n]):new Promise((r,i)=>{t(n).then(t=>{const{setMap:i,setDisplayMap:a}=o,{results:s}=t;s.forEach(t=>{const{name:n,svg:o,viewPort:r,styles:s}=t,l={width:r[2],height:r[3]},c={viewPort:r,viewPortDimensions:l,svgPathMap:o,types:s};i[n]=c;if("HubSpot"===n)return;const u=s.map(t=>e({svgPath:o[t],viewPort:r,color:an.OBSIDIAN},18));a[n]=u});const l={setMap:i,setDisplayMap:a};ny[n]=l;r(l)}).catch(i)})}}let ry,iy;const ay=()=>ry?ry.iconDisplayMap:null;function sy(e){return function(t,n){if(iy)return iy;const o={},r={},i=oy(e);iy=new Promise(e=>{Promise.all(Object.keys(n).map(e=>i(t,e).then(t=>{const{setMap:n={},setDisplayMap:i={}}=t;o[e]=n;r[e]=i}).catch(console.error))).then(()=>{ry={iconMap:o,iconDisplayMap:r};e({iconMap:o,iconDisplayMap:r})})});return iy}}const ly=["editor","staticPrefix","onInsert","mode","onModeChange","onIconRemove","deriveIconInfo","onIconInfoChange","getFrequentlyUsedIconList","updateFrequentlyUsedValue","eventKey"],cy=Au(Jv),uy=Object.assign({},hi.e,{REPLACE:"replace"});function dy(e){const{editor:t,staticPrefix:n,onInsert:o,mode:r,onModeChange:a,onIconRemove:s,deriveIconInfo:l,onIconInfoChange:c,getFrequentlyUsedIconList:u,updateFrequentlyUsedValue:f,eventKey:p}=e,m=Object(d.a)(e,ly),{inlineTarget:h,setInlineTarget:g,initInlineTarget:b}=Object(ef.a)(t,null),v=Object(i.useRef)(h),[y,C]=Object(i.useState)(uy.INSERT),[O,x]=Object(i.useState)({});Object(i.useEffect)(()=>{v.current=h});const j=Object(i.useCallback)(({restoreSelection:e}={})=>{if(v.current){g(null,{restoreSelection:e});a(hi.d.PREVIEW)}},[a,g]),S=e=>{if(v.current){if(y===uy.INSERT){j();o(e)}else if(y===uy.REPLACE){c(v.current,"nameInfo",e);C(uy.EDIT)}f(e)}},w=()=>{y===uy.INSERT?j():y===uy.REPLACE&&C(uy.EDIT)};Object(i.useEffect)(()=>{const e=()=>{if(v.current)j({restoreSelection:!0});else{C(uy.INSERT);b()}};t.on("OpenIconPopover",e);return()=>t.off("OpenIconPopover",e)},[t,b,a,j]);Object(i.useEffect)(()=>{const e=()=>{a(hi.d.EDIT)};t.on("InsertLinkOnIcon",e);return()=>t.off("InsertLinkOnIcon",e)},[t,g,a]);Object(i.useEffect)(()=>{const e=({element:e})=>{if(e){if(!e.hasAttribute(gf.a)){x(l(t,e));if(e!==v.current){a(hi.d.PREVIEW);C(uy.EDIT);g(e)}}}else j()};t.on("hsNodeChange:"+p,e);return()=>t.off("hsNodeChange:"+p,e)},[t,j,g,l,a,p]);const T=(e,n={})=>{const o=hu(e);pu(t,h,o);const{purpose:r,title:i}=n;r===O.purpose&&i===O.title||c(h,"accessibility",n)},k=()=>{C(uy.REPLACE)};let N;N=y===uy.EDIT?r===hi.d.PREVIEW?"bottom":"right":"bottom right";return Object(Ye.jsx)(Re.a,{"data-test-id":"icon-popover-manager",editor:t,open:!!h,target:h,placement:N,autoPlacement:!0,onRemove:j,renderContent:()=>y!==uy.EDIT?Object(Ye.jsx)(_v,{iconDisplayMap:ay(),onIconSelect:S,getFrequentlyUsedIconList:u,staticPrefix:n,onRemove:w}):Object(Ye.jsx)(cy,Object.assign({editor:t,target:h,mode:r,onModeChange:a,iconInfo:O,onSave:T,onReplaceIcon:k,onIconRemove:s.bind(null,h),trackLinkUsageProps:{isIcon:!0},useNoLinkOption:!0,tooltipClassName:"mce-icon-tooltip"},m))})}var fy=Object(gi.a)(dy);const py={setName:"icon_set",name:"name",type:"style",size:"height",purpose:"purpose",title:"title"},my=(e,t)=>{const n=new RegExp(`.*{% icon .*${t}=(?:'([^']*)'|"([^"]*)").* %}.*`),o=e.match(n);return o&&(o[1]||o[2])},hy=e=>Object.keys(py).reduce((t,n)=>{const o=my(e,py[n]);o&&(t[n]=o);return t},{}),gy=e=>`{% icon ${Object.keys(py).map(t=>`${py[t]}="${e[t]}"`).join(" ")} %}`,by=e=>Array.from(e.querySelectorAll(`span[${sf}]`)),vy=e=>Array.from(e.querySelectorAll(`img[${af}]`)),yy=e=>t=>{const n=Object.assign({},uf,hy(t.textContent)),o=e.dom.getStyle(t,"fill");if(o){n.color=e.dom.toHex(o).toUpperCase();e.dom.setStyle(t,"fill",null)}const r=Ry(e,n),i=e.dom.parseStyle(e.dom.getAttrib(t,"style"));e.dom.setStyles(r,i);return r},Cy=e=>t=>{const n=My(e,t),o=e.dom.create("span",{[sf]:!0},gy(n)),r=e.dom.parseStyle(e.dom.getAttrib(t,"style"));r.width=null;r.height=null;r.fill=n.color;o.setAttribute("style",e.dom.serializeStyle(r));return o},Oy=Object(Ir.b)((e,t,n)=>{Object(F.g)(e(n),t)}),xy=e=>{Object(F.b)(e,Oy(by,yy(e)));Object(F.a)(e,Oy(vy,Cy(e)))},jy=["name","title"],Sy=()=>function(e,t){const{svgPath:n,viewPort:o,viewPortDimensions:r,color:i}=e,a=document.createElement("svg");a.setAttribute("version","1.0");a.setAttribute("xmlns","http://www.w3.org/2000/svg");a.setAttribute("viewBox",o.join(" "));a.setAttribute("fill",i);t?a.setAttribute("height",t):Object.keys(r).forEach(e=>{a.setAttribute(e,r[e])});const s=document.createElement("path");s.setAttribute("d",n);a.appendChild(s);return a.outerHTML},wy=Object(Ir.b)((e,t)=>{const{iconMap:n}=e.plugins.hsicon,{setName:o,name:r}=t;return Object(Ir.h)([o,r],n)||ff}),Ty=(e,t)=>{const{iconMap:n}=e.plugins.hsicon,{setName:o,name:r}=t,{setName:i,name:a}=uf;return!n||Object(Ir.h)([o,r],n)?{setName:o,name:r}:{setName:i,name:a}},ky=(e,t)=>{const{type:n,color:o}=t,r=wy(e,t),{viewPort:i,viewPortDimensions:a,svgPathMap:s,types:l}=r,c=l.includes(n)?n:l[0];return{svgData:{svgPath:s[c],viewPort:i,viewPortDimensions:a,color:o},appliedType:c}},Ny=(e,t)=>{const n=Sy(e)(t);return`${cf}${window.btoa(n)}`},Ey=(e,t)=>{const{width:n,height:o}=t,r=n/o,i=parseInt(e,10);return{width:Math.round(r*i),height:i}},Ay=(e,t,n)=>{const{dom:o}=e,r=Ty(e,n),i=Object.assign({},n,r),{setName:a,name:s,size:l}=i,{svgData:c,appliedType:u}=ky(e,i),{viewPortDimensions:d}=c,{width:f,height:p}=Ey(l,d);i.type=u;o.setStyles(t,{width:f+"px",height:p+"px"});o.setAttrib(t,{[lf]:JSON.stringify(i),alt:`${a}--${s}`,src:Ny(e,c),width:f,height:p})},Iy=(e,t)=>{const{dom:n}=e,o=e.selection.getNode(),r=Object.assign({},uf,t),{fontSize:i,color:a}=yi(e.getWin(),o)||{};i&&(r.size=i.replace("px",""));a&&(r.color=n.toHex(a));return r},Ry=(e,t)=>{const n=e.dom.create("img",{"data-mce-placeholder":!0,[af]:!0});Ay(e,n,t);e.dom.setStyle(n,"display","inline-block");return n},Ly=(e,t)=>{const n=Iy(e,t),o=Ry(e,n);e.dom.setAttribs(o,{id:"__hsnew"});return o.outerHTML},_y=e=>e+" icon",Py=(e,t)=>{const{dom:n}=e,o=parseInt(n.getStyle(t,"width"),10),r=parseInt(n.getStyle(t,"height"),10),i=n.getStyle(t,"vertical-align","baseline"),a=n.getStyle(t,"transform").match(/rotate\(([0-9]+)deg\)/);return{dimensions:{width:o,height:r},verticalAlignment:i,rotationAngle:a&&parseInt(a[1],10)||0}},My=(e,t)=>{if(t){const n=Object.assign({},uf,JSON.parse(e.dom.getAttrib(t,lf))),{name:o,title:r}=n,i=Object(d.a)(n,jy);return Object.assign({},i,{name:o,title:r||_y(o)})}return uf},Dy=(e,t)=>{if(!Array.isArray(e))return[Object.assign({},t,{frequency:1})];const{setName:n,name:o}=t,r=e.findIndex(e=>{const{setName:t,name:r}=e;return t===n&&r===o});if(-1===r)e.push(Object.assign({},t,{frequency:1}));else{const t=e[r].frequency++,n=e.splice(r,1)[0],o=e.findIndex(e=>e.frequency<=t),i=-1===o?e.length:o;e.splice(i,0,n)}return e},By=e=>{const{apiClient:t}=e.settings;return sy(t)(Sy(e),of.f).then(({iconMap:t,iconDisplayMap:n})=>{e.plugins.hsicon.iconMap=t;const o=e.settings.inline?e.getElement():e.dom&&e.dom.doc;if(!o)return n;vy(o).forEach(t=>{Ay(e,t,My(e,t))});return n})},Fy=(e,t)=>`${e}.${t}`,Uy={getStore:(e,t,n)=>{const o={};try{t.forEach(t=>{const r=e.localStorage[Fy(n,t)];o[t]=r?JSON.parse(r):null})}catch(e){console.warn(e)}return o},setValue:(e,t,n,{key:o,value:r})=>{if(t.includes(o))try{e.localStorage[Fy(n,o)]=JSON.stringify(r)}catch(e){console.warn(e)}}},Vy=(e,t)=>{Object(Ie.b)(e,"tinymceInsertIcon",G.J,Object.assign({version:"v1"},t))},Hy=Object(uo.a)((e,t,n)=>{"object"==typeof n?Object(Ie.b)(e,"tinymceEditIcon",G.w,Object.assign({aspectChanged:t},n,{version:"v1"})):Object(Ie.b)(e,"tinymceEditIcon",G.w,{aspectChanged:t,position:n,version:"v1"})},500),qy=e=>t=>{const{dom:n}=e;e.undoManager.transact(()=>{e.insertContent(Ly(e,t));const o=n.get("__hsnew");e.dom.setAttrib(o,"id",null);e.selection.select(o)});Vy(e,t)},$y=e=>t=>{const{dom:n}=e,{parentNode:o}=t,r="A"===o.nodeName?o:t;e.undoManager.transact(()=>{n.remove(r)});Hy(e,"remove")},zy=Object(Ir.b)((e,t,n,o)=>{const{name:r,purpose:i,title:a}=o,s=My(e,t),{name:l,title:c}=s;let u=a;const d=_y(l);i&&!u?u=i===of.e.SEMANTIC?d:"":"nameInfo"===n&&c===d&&(u=_y(r));const f=Object.assign({},o,"string"==typeof u?{title:u}:{}),p=Object.assign({},s,f);e.undoManager.transact(()=>{Ay(e,t,p)});Hy(e,n,f)}),Wy=(e,t,n)=>{const{dimensions:o}=Py(e,t),{width:r,height:i}=o,{width:a,height:s}=n,l=a-r,c=s-i;let u;u=Math.abs(c)>=Math.abs(l)?i+Math.round(c):i+Math.round(l);zy(e,t,"size",{size:""+u})},Gy=(e,t,n)=>{e.undoManager.transact(()=>{e.dom.setStyle(t,"vertical-align",n)});Hy(e,"verticalAlignment",n)},Ky=(e,t,n)=>{e.undoManager.transact(()=>{e.dom.setStyle(t,"transform",`rotate(${n}deg)`)});Hy(e,"rotationAngle",n)},Yy=e=>t=>{const{height:n,target:o}=t;pf(e,o)&&zy(e,o,"size",{size:""+n})},Xy=e=>{const t=e.settings[$o.a];let n={};t?e.settings.bus.postMessage({action:"getStoreValues",payload:{storeKeys:of.c,storeNamespace:of.b}}).then(e=>{n=e}):n=Uy.getStore(window,of.c,of.b);return{getValue:e=>{const{frequently:t,last:o}=n;if(!t)return[];const r=t.reduce((t,n)=>t.length<of.a&&e.includes(n.setName)?t.concat(n):t,[]).slice(0,of.a);o&&(r.find(e=>e.setName===o.setName&&e.name===o.name)||r.splice(-1,1,o));return r},updateValue:o=>{const r={frequently:Dy(n.frequently||[],o),last:o};n=r;t?Object.keys(r).forEach(t=>{const n=r[t];e.settings.bus.postMessage({action:"setStoreValue",payload:{key:t,value:n,storeKeys:of.c,storeNamespace:of.b}})}):Object.keys(r).forEach(e=>{const t=r[e];Uy.setValue(window,of.c,of.b,{key:e,value:t})})}}},Zy=["color","type"],Qy=(e,t)=>{p.a.canvas.addMenuItem(e,rn.C,{text:rf("menuItem"),onClick:()=>e.fire("OpenIconPopover")});const{getValue:n,updateValue:o}=Xy(e),r=({element:t})=>!!t&&(!!pf(e,t)&&t),i=t=>{const n=My(e,t),{color:o,type:r}=n,i=Object(d.a)(n,Zy),{types:a,viewPortDimensions:s}=wy(e,i);return Object.assign({},Py(e,t),{naturalWidth:s.width,naturalHeight:s.height,iconType:r,availableIconTypes:a,fillColor:o?{color:o,alpha:100}:null,fillColorTooltip:rf("iconColorTooltip")})};p.a.canvas.addNodeChangeHandler(e,{eventKey:t,includeInlineTargets:!0,isActiveNodeHandler:r,getActiveNodeAttributes:i,contextualToolbar:Qu()});p.a.canvas.addPopover(e,t,{renderPopover:r=>Object(Ye.jsx)(fy,Object.assign({editor:e,staticPrefix:Object(Ee.f)(e,"richTextLibStaticPrefix"),onInsert:qy(e),onIconRemove:$y(e),onIconInfoChange:zy(e),deriveIconInfo:My,getFrequentlyUsedIconList:n,updateFrequentlyUsedValue:o,eventKey:t},r))})};function Jy(e){e.on("hsFillColorChange",({target:t,color:n})=>{pf(e,t)&&zy(e,t,"color",{color:n.color})});e.on("ObjectResized",Yy(e));e.on("hsDimensionChange",({target:t,dimensions:n={}})=>{pf(e,t)&&Wy(e,t,n)});e.on("hsVerticalAlignmentChange",({target:t,alignment:n})=>{pf(e,t)&&Gy(e,t,n)});e.on("hsRotationAngleChange",({target:t,rotationAngle:n})=>{pf(e,t)&&Ky(e,t,n)});e.on("hsIconTypeChange",({target:t,iconType:n})=>{pf(e,t)&&zy(e,t,"type",{type:n})})}const eC=B.x;function tC(e){Jy(e);xy(e);Qy(e,eC);p.a.canvas.addIdleCallback(e,"[data-hs-icon-info]",()=>By(e))}p.a.PluginManager.add(eC,tC);var nC=n(456);function oC({i18nKey:e,tooltipClassName:t}){return Object(Ye.jsx)(mn.a,{className:t,use:"longform",placement:"top",title:Object(Ye.jsxs)(nC.a,{styled:!0,childClassName:"m-bottom-1",children:[Object(Ye.jsx)(ft.a,{message:e("tooltipInfo1")}),Object(Ye.jsx)(ft.a,{message:e("tooltipInfo2")}),Object(Ye.jsxs)("span",{children:[Object(Ye.jsx)(ft.a,{message:e("tooltipInfo3")})," ",Object(Ye.jsx)(pn.a,{href:vs(),external:!0,children:Nt.a.text(e("learnMore"))})]})]}),children:Object(Ye.jsx)(pn.a,{children:Nt.a.text(e("tooltipLinkText"))})})}function rC({i18nKey:e,anchorId:t,invalidAnchorId:n,onChange:o}){let r="";n&&(r=Nt.a.text(e("duplicate"===n?"duplicateIdErrorMessage":"invalidIdErrorMessage")));return Object(Ye.jsx)(Hs.a,{label:Nt.a.text(e("nameLabel")),className:"m-bottom-4",error:!!n,validationMessage:r,children:Object(Ye.jsx)(qs.a,{autoFocus:!0,"data-test-id":"anchor-name-input",value:t,onChange:o,placeholder:Nt.a.text(e("placeholder")),maxLength:50})})}const iC=e=>"RichTextLib.anchor."+e,aC={popoverType:r.a.oneOf(Object.values(hi.e)).isRequired,tooltipClassName:r.a.string,anchorId:r.a.string,anchorList:r.a.arrayOf(r.a.string),onSubmit:r.a.func.isRequired,onClose:r.a.func.isRequired},sC={anchorId:""};function lC(e){const{popoverType:t,tooltipClassName:n,anchorId:o,anchorList:r,onSubmit:a,onClose:s}=e,[l,c]=Object(i.useState)(o),[u,d]=Object(i.useState)(!1),f=!Ks(l)&&!u&&l!==o,p=e=>{const{value:t}=e.target;c(t);d(!ys(t))},m=()=>{r.includes(l)?d("duplicate"):a(l)},h=e=>{if(e.key===hi.b.ESCAPE)s();else if(e.key===hi.b.ENTER&&f){m();e.preventDefault()}};return Object(Ye.jsxs)(Vs.a,{className:"small-popover-body p-all-5",onKeyDown:h,_size:"small",children:[Object(Ye.jsx)("h4",{className:"m-bottom-2",children:Object(Ye.jsx)(ft.a,{message:iC(t+"Title")})}),Object(Ye.jsx)(rC,{i18nKey:iC,anchorId:l,invalidAnchorId:u,onChange:p}),Object(Ye.jsx)(oC,{i18nKey:iC,tooltipClassName:n}),Object(Ye.jsx)(ll,{className:"p-top-4",popoverType:t,isSubmitDisabled:!f,onSubmit:m,onCancel:s})]})}lC.propTypes=aC;lC.defaultProps=sC;lC.displayName="AnchorPopoverBodyControls";var cC=lC;const uC=["onInsert"],dC={onInsert:r.a.func.isRequired};function fC(e){const{onInsert:t}=e,n=Object(d.a)(e,uC);return Object(Ye.jsx)(cC,Object.assign({},n,{popoverType:hi.e.INSERT,onSubmit:t}))}fC.propTypes=dC;fC.displayName="AnchorPopoverBodyInsert";var pC=fC;function mC(e){const{editor:t,target:n,anchorList:o,onRemove:r,onInsert:i,removeTempAnchors:a}=e;return Object(Ye.jsx)(Re.a,{"data-test-id":"anchor-insert-popover",editor:t,target:n,open:!!n,arrowSize:"medium",placement:"bottom left",autoPlacement:"vert",onRemove:r,onCloseComplete:a,closeOnOutsideClick:!0,animateOnToggle:!1,renderContent:()=>Object(Ye.jsx)(pC,{anchorList:o,tooltipClassName:"mce-anchor-tooltip",onInsert:i.bind(null,n),onClose:r})})}var hC=mC;const gC=["onSave"],bC={onSave:r.a.func.isRequired};function vC(e){const{onSave:t}=e,n=Object(d.a)(e,gC);return Object(Ye.jsx)("div",{className:"animated-popover-edit",children:Object(Ye.jsx)(cC,Object.assign({},n,{popoverType:hi.e.EDIT,onSubmit:t}))})}vC.propTypes=bC;vC.displayName="AnchorPopoverBodyEdit";var yC=vC;const CC=e=>"RichTextLib.anchor.lite."+e,OC=l()(Ns.a).withConfig({displayName:"AnchorPopoverBodyLite__StyledTruncatedString",componentId:"sc-15wrhgz-0"})(["display:inline-flex !important;"]),xC={anchorId:r.a.string,onEdit:r.a.func.isRequired,onAnchorRemove:r.a.func.isRequired};function jC(e){const{anchorId:t,onEdit:n,onAnchorRemove:o}=e,[r]=Object(i.useState)([{iconName:hi.c.EDIT,onClick:n},{iconName:hi.c.REMOVE,onClick:o}]);return Object(Ye.jsx)("div",{className:"animated-popover-preview",children:Object(Ye.jsx)(ws.a,{"data-test-id":"anchor-popover-body-lite",iconButtons:r,i18nKey:CC,children:Object(Ye.jsx)(Ts.a,{className:"p-left-3 p-right-2",alignSelf:"center",children:Object(Ye.jsxs)(ks.a,{className:"p-y-0 p-x-0 link-preview-form-label",children:[Object(Ye.jsx)(ft.a,{message:CC("label")}),Object(Ye.jsx)(OC,{maxWidth:100,children:t})]})})})})}jC.propTypes=xC;jC.displayName="AnchorPopoverBodyLite";var SC=jC;const wC=["mode","onModeChange","onUpdate"],TC={mode:r.a.oneOf(Object.values(hi.d)),onModeChange:r.a.func.isRequired,onUpdate:r.a.func.isRequired};function kC(e){const{mode:t,onModeChange:n,onUpdate:o}=e,r=Object(d.a)(e,wC),i=()=>{n(hi.d.PREVIEW)},a=()=>{n(hi.d.EDIT)},s=e=>{i();o(e)},l=e=>{e.key===hi.b.ESCAPE&&i()};return Object(Ye.jsx)("div",{className:"animated-popover-body",onKeyDown:l,tabIndex:"-1",children:Object(Ye.jsx)(wd.CSSTransitionGroup,{className:"animated-transition",transitionName:"animated-popover",transitionEnterTimeout:100,transitionLeaveTimeout:100,children:t===hi.d.PREVIEW?Object(Ye.jsx)("div",{children:Object(Ye.jsx)(SC,Object.assign({},r,{onEdit:a}))},0):Object(Ye.jsx)("div",{children:Object(Ye.jsx)(yC,Object.assign({},r,{onSave:s,onClose:i}))},1)})})}kC.propTypes=TC;kC.displayName="AnchorPopoverBodyBranch";var NC=kC;function EC(e){const{editor:t,target:n,anchorList:o,mode:r,onModeChange:a,onRemove:s,onUpdate:l,onAnchorRemove:c}=e,u=e=>{l(n,e);a(hi.d.PREVIEW)};Object(i.useEffect)(()=>{r!==hi.d.EDIT||n||a(hi.d.PREVIEW)},[n,r,a]);Object(i.useEffect)(()=>{const e=({shouldOpen:e=!0})=>{a(e?hi.d.EDIT:hi.d.PREVIEW)};t.on("ToggleAnchorEditPopover",e);return()=>t.off("ToggleAnchorEditPopover",e)},[t,a]);return Object(Ye.jsx)(Re.a,{"data-test-id":"anchor-edit-popover",editor:t,target:n,open:!!n,arrowSize:"medium",placement:"bottom left",autoPlacement:"vert",onRemove:s,closeOnOutsideClick:!0,animateOnToggle:!1,renderContent:()=>Object(Ye.jsx)(NC,{mode:r,anchorId:n&&n.id,anchorList:o,tooltipClassName:"mce-anchor-tooltip",onModeChange:a,onUpdate:u,onAnchorRemove:c.bind(null,n)})})}EC.propTypes={editor:r.a.object.isRequired,target:r.a.exact(HTMLAnchorElement),anchorList:r.a.array,mode:r.a.oneOf(Object.keys(hi.d).map(e=>hi.d[e])),onRemove:r.a.func.isRequired,onModeChange:r.a.func,onAnchorRemove:r.a.func.isRequired,onUpdate:r.a.func.isRequired};var AC=Object(gi.a)(EC);function IC(e){const{editor:t,onInsert:n,onUpdate:o,onAnchorRemove:r,insertTempAnchor:a,removeTempAnchors:s,fetchAnchors:l,eventKey:c}=e,[u,d]=Object(i.useState)(null),[f,p]=Object(i.useState)(hi.e.INSERT),[m,h]=Object(i.useState)([]),g=Object(i.useRef)(u);Object(i.useEffect)(()=>{g.current=u});Object(i.useEffect)(()=>{l().then(h)},[l,u]);const b=Object(i.useCallback)(()=>{if(g.current){d(null);s()}},[s]),v=(...e)=>{n(...e);p(hi.e.EDIT)};Object(i.useEffect)(()=>{const e=({element:e})=>{if(e)if(g.current===e)t.fire("ToggleAnchorEditPopover",{shouldOpen:!1});else{d(null);p(e.hasAttribute(ur.e)?hi.e.INSERT:hi.e.EDIT);d(e)}else b()};t.on("hsNodeChange:"+c,e);return()=>t.off("hsNodeChange:"+c,e)},[t,b,c]);Object(i.useEffect)(()=>{const e=()=>{const e=a();Vc(t,e);p(hi.e.INSERT);d(e)};t.on("OpenAnchorPopover",e);return()=>t.off("OpenAnchorPopover")},[t,a]);const y={editor:t,target:u,anchorList:u?m.map(e=>e.id):[],onRemove:b};return f===hi.e.INSERT?Object(Ye.jsx)(hC,Object.assign({},y,{onInsert:v,removeTempAnchors:s})):Object(Ye.jsx)(AC,Object.assign({},y,{onUpdate:o,onAnchorRemove:r}))}var RC=IC;const LC=e=>{Object(F.b)(e,t=>{const n=[...t.body.querySelectorAll("a:not([href])")],o=e.getBody();n.forEach(t=>{if(Bc(t)){t.setAttribute("id",t.id||t.name);t.setAttribute("contenteditable","false");t.setAttribute(ur.d,!0);e.settings.inline&&!e.hasFocus()||t.classList.add(ur.a);if(e.settings.allow_html_in_named_anchor&&t.childNodes.length){let n,o=t.lastChild;for(;o;){n=o.previousSibling;e.dom.insertAfter(o,t);o=n}}let n=t;Object.keys(ur.c).forEach(t=>{n=e.dom.getParent(n,ur.c[t],o)||n});const r=zc(t);r&&(n=r);if(t!==n){t.parentNode.removeChild(t);n.parentNode.insertBefore(t,n)}}})});Object(F.a)(e,e=>{[...e.querySelectorAll(`a[${ur.d}]`)].forEach(e=>{if(Fc(e)){e.removeAttribute("contenteditable");e.classList.remove(ur.a);""===e.className&&e.removeAttribute("class")}})})};let _C;const PC=e=>{const t=e.getBody();let n=e.selection.getNode();const o=zc(n);if(o)return o;if(t===n){const n=e.selection.getSel().anchorNode;if(n!==t)return n.nextSibling||n;const o=e.selection.getBookmark();return e.dom.get(o.id+"_start")}Object.keys(ur.c).forEach(o=>{n=e.dom.getParent(n,ur.c[o],t)||n});return n},MC=e=>(t,n)=>{e.dom.setAttribs(t,{id:n,[ur.e]:null,[ur.d]:!0});e.undoManager.add();e.selection.select(t);Object(Ie.b)(e,"tinymceAnchor",G.E,{insertLocation:t.nextSibling.nodeName})},DC=e=>(t,n)=>{e.undoManager.transact(()=>{e.dom.setAttrib(t,"id",n)});Object(Ie.b)(e,"tinymceAnchor",G.t)},BC=e=>t=>{e.undoManager.transact(()=>{e.dom.remove(t)})},FC=e=>()=>{_C||e.dom.select(`a[${ur.e}]`).forEach(t=>{e.dom.remove(t)})},UC=e=>()=>{const t=PC(e),n=e.dom.create("a",{class:ur.a,contenteditable:"false",[ur.e]:"true","data-mce-selected":"true"}),o=()=>{if(t)t.parentNode.insertBefore(n,t);else{const t=e.selection.getNode();t.parentNode.insertBefore(n,t)}};e.undoManager.ignore?e.undoManager.ignore(()=>{o()}):o();Object(Ie.b)(e,"tinymceAnchor",G.U,{insertLocation:e.selection.getNode().nodeName});return n},VC=()=>({target:e})=>{Fc(e)&&(_C=e)},HC=e=>t=>{const n=PC(e);if(n&&_C){e.undoManager.transact(()=>{n.parentNode.insertBefore(_C,n)});const o=_C.getAttribute(ur.e)?hi.e.INSERT:hi.e.EDIT;e.selection.select(_C);Object(Ie.b)(e,"tinymceAnchor",G.r,{insertLocation:n.nodeName,dragStage:o});_C=null;t.preventDefault();t.stopPropagation()}},qC=e=>()=>{Fc(e.selection.getNode())?e.fire("ToggleAnchorEditPopover"):e.fire("OpenAnchorPopover")},$C=(e,t)=>{const n=e.getBody(),o=e.selection.getRng();let r=o.startContainer,i=!1;if(r.parentNode===n&&"#text"===r.nodeName)i=Fc(r.previousSibling);else{if(0!==o.startOffset)return;let e=r.parentNode;for(;e!==n;){if(e.firstChild!==r){i=!1;break}r=e;e=e.parentNode}i=Fc(r.previousSibling)}if(i){e.dom.remove(r.previousSibling);t.preventDefault()}},zC=(e,t)=>{const n=e.selection.getRng().startContainer;if(n.parentNode===e.getBody()&&"#text"===n.nodeName)if("ArrowDown"!==t.key&&"ArrowRight"!==t.key||!Fc(n.nextSibling)){if("ArrowLeft"===t.key&&Fc(n.previousSibling)){const o=n.previousSibling.previousSibling;if(o){e.selection.select(o);e.selection.collapse();t.preventDefault()}}}else{e.selection.setCursorLocation(n.nextSibling);t.preventDefault()}},WC=e=>t=>{"Backspace"===t.key&&e.selection.isCollapsed()&&$C(e,t);"ArrowDown"!==t.key&&"ArrowRight"!==t.key&&"ArrowLeft"!==t.key||zC(e,t)},GC=(e,t)=>()=>{[...e.getBody().querySelectorAll(`a[${ur.d}]`)].forEach(e=>{t?e.classList.add(ur.a):e.classList.remove(ur.a)})},KC=B.h;function YC(e,t){p.a.canvas.addMenuItem(e,rn.h,{text:Object(ur.g)("menuItem"),onClick:qC(e)});const n=({element:e})=>!!e&&(Fc(e)&&e);p.a.canvas.addNodeChangeHandler(e,{eventKey:KC,isActiveNodeHandler:n});p.a.canvas.addPopover(e,KC,{renderPopover:n=>Object(Ye.jsx)(RC,Object.assign({},t,{editor:e,onInsert:MC(e),onUpdate:DC(e),onAnchorRemove:BC(e),insertTempAnchor:UC(e),removeTempAnchors:FC(e),eventKey:KC},n))})}function XC(e){e.on("dragStart",VC());e.on("drop",HC(e));e.on("KeyDown",WC(e));if(e.settings.inline){e.on("focus",GC(e,!0));e.on("blur",GC(e,!1))}YC(e,{fetchAnchors:Hc(e)});LC(e)}p.a.PluginManager.add(KC,XC);var ZC=n(1270),QC=n(2821),JC=n(2822);const eO={FORECOLOR:"forecolor",BACKCOLOR:"backcolor"},tO={[eO.FORECOLOR]:{name:rn.db,format:"forecolor",tooltip:"Text color",icon:"textColor"},[eO.BACKCOLOR]:{name:rn.i,format:"hilitecolor",tooltip:"Background color",icon:"highlight"}},nO={ADVANCED:"advanced",BRAND:"brand",SIMPLE:"simple"},oO=["contextualNodeAttributes"],rO=Object(Mr.a)("TinymcePlugins.hscolor.tooltip");function iO(e,{trackOpenChange:t,trackModeChange:n,getOnColorChange:o}){e.addCommand("hscolorapply",(t,{format:n,value:o})=>{e.formatter.apply(n,{value:o});e.nodeChanged()});e.addCommand("hscolorremove",(t,{format:n})=>{e.selection.isCollapsed()?e.formatter.remove(n,{},e.selection.getNode()):e.formatter.remove(n);e.nodeChanged()});const r=()=>Object.values(eO).reduce((t,n)=>{const{format:o}=tO[n],r=Object(ZC.b)(e,o),{hex:i,alpha:a}=Object(ZC.a)(r);t[n]={color:i,alpha:a};return t},{});p.a.canvas.addNodeChangeHandler(e,{getFormattingAttributes:r});const i=Object(JC.a)(e),a=r=>{const{name:a,format:s,icon:l}=tO[r],c=t=>{const n=Object(ZC.e)(e,s);return Object(Ye.jsx)(i,Object.assign({},t,{showResetToDefault:n}))},u={onPickerModeChange:n,onColorChange:o(s),onOpenChange:e=>{e&&t(s)},renderColorPicker:c};p.a.canvas.addButton(e,a,{renderControl:e=>{const{contextualNodeAttributes:t}=e,n=Object(d.a)(e,oO),{[r]:o}=t;return Object(Ye.jsx)(QC.a,Object.assign({"data-test-id":"color-picker-"+r,tooltip:rO(r),icon:l,color:o,defaultAlpha:r===eO.BACKCOLOR?0:void 0,defaultColor:an.OBSIDIAN,dropdownClassName:"mce-hubspot-popover"},u,n))}})};a(eO.FORECOLOR);a(eO.BACKCOLOR)}var aO=n(1271);function sO(e){const t=(t,n,o)=>{o===nO.ADVANCED?Object(Lc.e)(()=>{e.execCommand("hscolorapply",!1,{format:n,value:t})}):e.execCommand("hscolorapply",!1,{format:n,value:t})},n=t=>{e.execCommand("hscolorremove",!1,{format:t})},o=(t,n,o)=>{Object(Ie.b)(e,"tinymceChangeColorPopover",o,{version:"v2",mode:t,format:n})},r=e=>({color:r,alpha:i,mode:a})=>{const s=Object(ZC.d)(r,i);if(s){t(s,e,a);o(a,e,G.a)}else{n(e);o(a,e,G.ib)}},i=t=>{Object(Ie.b)(e,"tinymceColorPopoverMode",G.e,{mode:t,version:"v2"})},a=t=>{const n=!!Object(ZC.b)(e,t,!1);Object(Ie.b)(e,"tinymceChangeColorPopover",G.V,{version:"v2",format:t,"had-existing-color":n})};p.a.canvas.addIdleCallback(e,null,Object(aO.a)(e.settings.apiClient));iO(e,{trackOpenChange:a,trackModeChange:i,getOnColorChange:r})}function lO(e){sO(e)}const cO=B.l;p.a.PluginManager.add(cO,lO);const uO="rich-text.charmap",dO=["frequently","last"],fO=14,pO={169:12,174:10,8482:8,60:6,62:4},mO={USD:36,CAD:36,ARS:36,AUD:36,BND:36,BRL:36,BZD:36,CLP:36,COP:36,CVE:36,DOP:36,HKD:36,JMD:36,MOP:36,MXN:36,NAD:36,NIO:36,NZD:36,SGD:36,SRD:36,TOP:36,TTD:36,TWD:36,UYU:36,CNY:20803,EUR:8364,GBP:163,GHS:8373,AFN:1547,BDT:2547,CRC:8353,KZT:8376,JPY:165,ILS:8362,INR:8377,IRR:65020,KHR:6107,KRW:8361,MNT:8366,NGN:8358,NPR:2344,PHP:8369,PKR:8360,PYG:8370,THB:3647,TRY:8356,UAH:8372,VND:8363,AZN:8380,RUB:8381},hO=e=>Nt.a.text("RichTextLib.charmap.characters."+e),gO=()=>({arrows:[{charCode:8592,label:hO("leftwards")},{charCode:8593,label:hO("upwards")},{charCode:8594,label:hO("rightwards")},{charCode:8595,label:hO("downwards")},{charCode:8596,label:hO("leftRight")},{charCode:8629,label:hO("carriageReturn")},{charCode:8656,label:hO("leftwardsDouble")},{charCode:8657,label:hO("upwardsDouble")},{charCode:8658,label:hO("rightwardsDouble")},{charCode:8659,label:hO("downwardsDouble")},{charCode:8660,label:hO("leftRightDouble")}],currency:[{charCode:36,label:hO("dollarSign")},{charCode:8364,label:hO("euroSign")},{charCode:163,label:hO("poundSign")},{charCode:165,label:hO("yenSign")},{charCode:162,label:hO("centSign")},{charCode:164,label:hO("currencySign")},{charCode:8352,label:hO("euroCurrencySign")},{charCode:8353,label:hO("colonSign")},{charCode:1547,label:hO("afghaniSign")},{charCode:2547,label:hO("bangladeshiTakasSign")},{charCode:8354,label:hO("cruzeiroSign")},{charCode:8355,label:hO("frenchFrancSign")},{charCode:8356,label:hO("liraSign")},{charCode:8357,label:hO("millSign")},{charCode:8358,label:hO("nairaSign")},{charCode:8361,label:hO("wonSign")},{charCode:8362,label:hO("newSheqelSign")},{charCode:8363,label:hO("dongSign")},{charCode:8365,label:hO("kipSign")},{charCode:8366,label:hO("tugrikSign")},{charCode:8367,label:hO("drachmaSign")},{charCode:8368,label:hO("germanPenny")},{charCode:8369,label:hO("pesoSign")},{charCode:8370,label:hO("guaraniSign")},{charCode:8371,label:hO("australSign")},{charCode:8372,label:hO("hryvniaSign")},{charCode:8373,label:hO("cediSign")},{charCode:8374,label:hO("livreTournoisSign")},{charCode:8376,label:hO("tengeSign")},{charCode:65020,label:hO("iranianRialSign")},{charCode:8378,label:hO("turkishLiraSign")},{charCode:6107,label:hO("cambodianRielSign")},{charCode:3647,label:hO("thaiBahtSign")},{charCode:2344,label:hO("nepaleseRupeeSign")},{charCode:8377,label:hO("indianRupeeSign")},{charCode:8360,label:hO("pakistaniRupeeSign")},{charCode:8359,label:hO("pesetaSign")},{charCode:8379,label:hO("nordicMarkSign")},{charCode:8380,label:hO("manatSign")},{charCode:8381,label:hO("rubleSign")},{charCode:20870,label:hO("yenCharacter")},{charCode:20803,label:hO("yuanCharacter")},{charCode:22291,label:hO("yuanCharacter2")},{charCode:22278,label:hO("yenYuanCharacterVariant")}],latin:[{charCode:192,label:"A - grave"},{charCode:193,label:"A - acute"},{charCode:194,label:"A - circumflex"},{charCode:195,label:"A - tilde"},{charCode:196,label:"A - diaeresis"},{charCode:197,label:"A - ring above"},{charCode:256,label:"A - macron"},{charCode:198,label:"ligature AE"},{charCode:199,label:"C - cedilla"},{charCode:200,label:"E - grave"},{charCode:201,label:"E - acute"},{charCode:202,label:"E - circumflex"},{charCode:203,label:"E - diaeresis"},{charCode:274,label:"E - macron"},{charCode:204,label:"I - grave"},{charCode:205,label:"I - acute"},{charCode:206,label:"I - circumflex"},{charCode:207,label:"I - diaeresis"},{charCode:298,label:"I - macron"},{charCode:208,label:"ETH"},{charCode:209,label:"N - tilde"},{charCode:210,label:"O - grave"},{charCode:211,label:"O - acute"},{charCode:212,label:"O - circumflex"},{charCode:213,label:"O - tilde"},{charCode:214,label:"O - diaeresis"},{charCode:216,label:"O - slash"},{charCode:332,label:"O - macron"},{charCode:338,label:"ligature OE"},{charCode:352,label:"S - caron"},{charCode:217,label:"U - grave"},{charCode:218,label:"U - acute"},{charCode:219,label:"U - circumflex"},{charCode:220,label:"U - diaeresis"},{charCode:362,label:"U - macron"},{charCode:221,label:"Y - acute"},{charCode:376,label:"Y - diaeresis"},{charCode:562,label:"Y - macron"},{charCode:222,label:"THORN"},{charCode:224,label:"a - grave"},{charCode:225,label:"a - acute"},{charCode:226,label:"a - circumflex"},{charCode:227,label:"a - tilde"},{charCode:228,label:"a - diaeresis"},{charCode:229,label:"a - ring above"},{charCode:257,label:"a - macron"},{charCode:230,label:"ligature ae"},{charCode:231,label:"c - cedilla"},{charCode:232,label:"e - grave"},{charCode:233,label:"e - acute"},{charCode:234,label:"e - circumflex"},{charCode:235,label:"e - diaeresis"},{charCode:275,label:"e - macron"},{charCode:236,label:"i - grave"},{charCode:237,label:"i - acute"},{charCode:238,label:"i - circumflex"},{charCode:239,label:"i - diaeresis"},{charCode:299,label:"i - macron"},{charCode:240,label:"eth"},{charCode:241,label:"n - tilde"},{charCode:242,label:"o - grave"},{charCode:243,label:"o - acute"},{charCode:244,label:"o - circumflex"},{charCode:245,label:"o - tilde"},{charCode:246,label:"o - diaeresis"},{charCode:248,label:"o slash"},{charCode:333,label:"o macron"},{charCode:339,label:"ligature oe"},{charCode:353,label:"s - caron"},{charCode:249,label:"u - grave"},{charCode:250,label:"u - acute"},{charCode:251,label:"u - circumflex"},{charCode:252,label:"u - diaeresis"},{charCode:363,label:"u - macron"},{charCode:253,label:"y - acute"},{charCode:254,label:"thorn"},{charCode:255,label:"y - diaeresis"},{charCode:563,label:"y - macron"},{charCode:913,label:"Alpha"},{charCode:914,label:"Beta"},{charCode:915,label:"Gamma"},{charCode:916,label:"Delta"},{charCode:917,label:"Epsilon"},{charCode:918,label:"Zeta"},{charCode:919,label:"Eta"},{charCode:920,label:"Theta"},{charCode:921,label:"Iota"},{charCode:922,label:"Kappa"},{charCode:923,label:"Lambda"},{charCode:924,label:"Mu"},{charCode:925,label:"Nu"},{charCode:926,label:"Xi"},{charCode:927,label:"Omicron"},{charCode:928,label:"Pi"},{charCode:929,label:"Rho"},{charCode:931,label:"Sigma"},{charCode:932,label:"Tau"},{charCode:933,label:"Upsilon"},{charCode:934,label:"Phi"},{charCode:935,label:"Chi"},{charCode:936,label:"Psi"},{charCode:937,label:"Omega"},{charCode:945,label:"alpha"},{charCode:946,label:"beta"},{charCode:947,label:"gamma"},{charCode:948,label:"delta"},{charCode:949,label:"epsilon"},{charCode:950,label:"zeta"},{charCode:951,label:"eta"},{charCode:952,label:"theta"},{charCode:953,label:"iota"},{charCode:954,label:"kappa"},{charCode:955,label:"lambda"},{charCode:956,label:"mu"},{charCode:957,label:"nu"},{charCode:958,label:"xi"},{charCode:959,label:"omicron"},{charCode:960,label:"pi"},{charCode:961,label:"rho"},{charCode:962,label:"final sigma"},{charCode:963,label:"sigma"},{charCode:964,label:"tau"},{charCode:965,label:"upsilon"},{charCode:966,label:"phi"},{charCode:967,label:"chi"},{charCode:968,label:"psi"},{charCode:969,label:"omega"}],mathematical:[{charCode:43,label:hO("plusSign")},{charCode:8722,label:hO("minusSign")},{charCode:247,label:hO("divisionSign")},{charCode:215,label:hO("multiplicationSign")},{charCode:8260,label:hO("fractionSlash")},{charCode:177,label:hO("plusMinusSign")},{charCode:176,label:hO("degreeSign")},{charCode:185,label:hO("superscriptOne")},{charCode:178,label:hO("superscriptTwo")},{charCode:179,label:hO("superscriptThree")},{charCode:188,label:hO("fractionQuarter")},{charCode:189,label:hO("fractionHalf")},{charCode:190,label:hO("fractionThreeQuarters")},{charCode:60,label:hO("lessThan")},{charCode:62,label:hO("greaterThan")},{charCode:8804,label:hO("lessThanEqualTo")},{charCode:8805,label:hO("greaterThanEqualTo")},{charCode:402,label:hO("functionFlorin")},{charCode:8747,label:hO("integral")},{charCode:8734,label:hO("infinity")},{charCode:8730,label:hO("squareRoot")},{charCode:8764,label:hO("similarTo")},{charCode:8773,label:hO("approximatelyEqualTo")},{charCode:8776,label:hO("almostEqualTo")},{charCode:8800,label:hO("notEqualTo")},{charCode:8801,label:hO("identicalTo")},{charCode:8712,label:hO("elementOf")},{charCode:8713,label:hO("notElementOf")},{charCode:8715,label:hO("containsAsMember")},{charCode:8721,label:hO("nArySummation")},{charCode:8719,label:hO("nAryProduct")},{charCode:8743,label:hO("logicalAnd")},{charCode:8744,label:hO("logicalOr")},{charCode:172,label:hO("notSign")},{charCode:8745,label:hO("intersection")},{charCode:8746,label:hO("union")},{charCode:8706,label:hO("partialDifferential")},{charCode:8704,label:hO("forAll")},{charCode:8707,label:hO("thereExists")},{charCode:8709,label:hO("diameter")},{charCode:8711,label:hO("backwardDifference")},{charCode:8727,label:hO("asteriskOperator")},{charCode:8901,label:hO("dotOperator")},{charCode:8733,label:hO("proportionalTo")},{charCode:8736,label:hO("angle")},{charCode:8834,label:hO("subsetOf")},{charCode:8835,label:hO("supersetOf")},{charCode:8836,label:hO("notSubsetOf")},{charCode:8838,label:hO("subsetEqualTo")},{charCode:8839,label:hO("supersetEqualTo")},{charCode:8853,label:hO("circledPlus")},{charCode:8855,label:hO("circledTimes")},{charCode:8869,label:hO("perpendicular")},{charCode:8968,label:hO("leftCeiling")},{charCode:8969,label:hO("rightCeiling")},{charCode:8970,label:hO("leftFloor")},{charCode:8971,label:hO("rightFloor")}],punctuation:[{charCode:34,label:hO("quotationMark")},{charCode:8249,label:hO("singleLeftAngledQuotation")},{charCode:8250,label:hO("singleRightAngledQuotation")},{charCode:171,label:hO("leftGuillemet")},{charCode:187,label:hO("rightGuillemet")},{charCode:8216,label:hO("singleLeftQuotation")},{charCode:8217,label:hO("singleRightQuotation")},{charCode:8220,label:hO("doubleLeftQuotation")},{charCode:8221,label:hO("doubleRightQuotation")},{charCode:8218,label:hO("singleLowQuotation")},{charCode:8222,label:hO("doubleLowQuotation")},{charCode:8211,label:hO("enDash")},{charCode:8212,label:hO("emDash")},{charCode:175,label:hO("macron")},{charCode:8254,label:hO("overline")},{charCode:166,label:hO("brokenBar")},{charCode:168,label:hO("diaeresis")},{charCode:161,label:hO("invertedExclamationMark")},{charCode:191,label:hO("turnedQuestionMark")},{charCode:710,label:hO("circumflexAccent")},{charCode:732,label:hO("smallTilde")},{charCode:8242,label:hO("minutesFeet")},{charCode:8243,label:hO("secondsInches")},{charCode:37,label:hO("percentSign")},{charCode:8240,label:hO("perMilleSign")},{charCode:181,label:hO("microSign")},{charCode:183,label:hO("middleDot")},{charCode:8226,label:hO("bullet")},{charCode:8230,label:hO("threeDotLeader")},{charCode:167,label:hO("sectionSign")},{charCode:182,label:hO("paragraphSign")},{charCode:8756,label:hO("therefore")},{charCode:9001,label:hO("leftAngledBracket")},{charCode:9002,label:hO("rightAngledBracket")}],symbols:[{charCode:169,label:hO("copyrightSign")},{charCode:174,label:hO("registeredSign")},{charCode:8482,label:hO("trademarkSign")},{charCode:8501,label:hO("alefSymbol")},{charCode:982,label:hO("piSymbol")},{charCode:8476,label:hO("realPartSymbol")},{charCode:978,label:hO("upsilonHookSymbol")},{charCode:8472,label:hO("weierstrass")},{charCode:8465,label:hO("imaginaryPart")},{charCode:8375,label:hO("spesmiloSign")},{charCode:180,label:hO("acuteAccent")},{charCode:184,label:hO("cedilla")},{charCode:170,label:hO("feminineOrdinal")},{charCode:186,label:hO("masculineOrdinal")},{charCode:8224,label:hO("dagger")},{charCode:8225,label:hO("doubleDagger")},{charCode:9674,label:hO("diamond")},{charCode:9824,label:hO("blackSpadeSuit")},{charCode:9827,label:hO("blackClubSuit")},{charCode:9829,label:hO("blackHeartSuit")},{charCode:9830,label:hO("blackDiamondSuit")}]});var bO=n(1297);let vO;const yO=e=>{vO||(vO=gO());if(!e)return vO;const t=[];Object.values(vO).forEach(n=>{n.forEach(n=>{n.label.indexOf(e)>=0&&t.push(n)})});return{searchResults:t}};let CO;const OO=e=>{if(!e)return{};vO||(vO=gO());CO=e("frequently")||pO;const t=e("currency"),n=t&&mO[t]&&mO[t].toString(),o=Object.keys(CO).sort((e,t)=>CO[t]-CO[e]).slice(0,fO).filter(e=>e!==n);if(n){o.unshift(n);o.length>fO&&o.pop()}const r=e("last"),i=r&&("string"==typeof r?r:r.toString());i&&o.indexOf(i)<0&&(o[o.length-1]=i);const a=new Array(o.length);Object.values(vO).forEach(e=>{e.forEach(e=>{const t=o.indexOf(e.charCode.toString());t>=0&&(a[t]=e)})});return{frequentlyUsed:a}},xO=(e,t)=>{if(!e||!CO)return;const n=CO[t]||0;CO[t]=n+1;e("last",t);e("frequently",CO)};var jO=n(1217);const SO=e=>"RichTextLib.charmap."+e,wO=l.a.div.withConfig({displayName:"CharmapInsertPopoverBody__CharmapScrollContainer",componentId:"sc-1l8kvbx-0"})(["height:200px !important;overflow-y:scroll !important;position:relative !important;line-height:initial;margin-top:6px;margin-bottom:10px;margin-left:20px;padding-right:15px;user-select:none;"]),TO=l.a.div.withConfig({displayName:"CharmapInsertPopoverBody__CategoryLabel",componentId:"sc-1l8kvbx-1"})(["background-color:"," !important;color:"," !important;font-size:12px !important;line-height:12px;padding:4px 0 10px !important;position:sticky !important;top:0 !important;z-index:2;"],an.OLAF,an.SLINKY),kO=l.a.span.withConfig({displayName:"CharmapInsertPopoverBody__CharacterItem",componentId:"sc-1l8kvbx-2"})(["cursor:pointer !important;overflow:hidden;width:36px;height:36px;border-radius:18px;font-size:20px !important;font-weight:400;line-height:36px !important;text-align:center;display:inline-block;z-index:1;transition:background-color 0.2s;&:hover{background-color:",";}"],an.CALYPSO_LIGHT),NO=l.a.div.withConfig({displayName:"CharmapInsertPopoverBody__SelectedCharacterContainer",componentId:"sc-1l8kvbx-3"})(["width:100%;height:24px;padding-left:15px;display:flex;"]),EO=l.a.div.withConfig({displayName:"CharmapInsertPopoverBody__SelectedCharacter",componentId:"sc-1l8kvbx-4"})(["font-size:18px;font-weight:600;text-align:center;width:24px;overflow:visible;"]),AO=l()(Ns.a).withConfig({displayName:"CharmapInsertPopoverBody__SelectedCharacterName",componentId:"sc-1l8kvbx-5"})(["font-size:12px;margin-left:8px;margin-right:12px;"]),IO=l()(Us.a).withConfig({displayName:"CharmapInsertPopoverBody__HorizontalLine",componentId:"sc-1l8kvbx-6"})(["background-color:",";"],an.BATTLESHIP),RO=Object(jO.a)(yO),LO=(e={},t,n)=>Object.entries(e).map(([e,o])=>{const r=Object(Ye.jsx)(TO,{children:Object(Ye.jsx)(ft.a,{message:SO("categories."+e)})});let i;i=o.length?o.map(({charCode:e,label:o}={})=>e&&Object(Ye.jsx)(kO,{onMouseOver:()=>t(e,o),onClick:()=>{n(e)},children:String.fromCharCode(e)},"char-code-"+e)):[Object(Ye.jsx)("div",{children:Nt.a.text(SO("noResultsFound"))+" "},"empty-results")];const a="charmap-category-"+e;return Object(Ye.jsxs)("div",{"data-test-id":a,children:[r,i]},a)});function _O(e){const{onInsert:t,storeHandlers:{init:n,getter:o,setter:r}={}}=e,[a,s]=Object(i.useState)({}),[l,c]=Object(i.useState)(""),[u,d]=Object(i.useState)({}),f=Object(i.useRef)(null),p=Object(i.useRef)(!1);Object(i.useEffect)(()=>{p.current=!0;return()=>{p.current=!1}},[]);Object(i.useEffect)(()=>{n&&n(()=>{p.current&&d(OO(o))});f.current&&f.current.focus()},[n,o]);const m=({target:{value:e}})=>{c(e);s({})},h=(e,t)=>{s({char:String.fromCharCode(e),name:t})},g=Object(i.useCallback)(e=>{t(e);xO(r,e);d(OO(o));f.current&&f.current.focus()},[t,f,r,o]),b=e=>{e.nativeEvent&&e.nativeEvent.stopImmediatePropagation&&e.nativeEvent.stopImmediatePropagation()},v=Object(i.useMemo)(()=>!l&&LO(u,h,g),[l,u,g]),y=Object(i.useMemo)(()=>{const e=RO(l);return LO(e,h,g)},[l,g]);return Object(Ye.jsxs)("div",{className:"small-popover-body",onClick:b,children:[Object(Ye.jsx)(Hs.a,{"aria-label":"search",className:"p-all-5",children:Object(Ye.jsx)(bv.a,{"data-test-id":"charmap-search-input",placeholder:Nt.a.text(SO("searchPlaceholder")),icon:!1,clearable:!1,onChange:m,inputRef:f})}),Object(Ye.jsx)(IO,{distance:"flush"}),Object(Ye.jsxs)(vv.a,{"data-test-id":"charmap-scroll-container",scrollDirection:"vertical",maxHeight:200,size:0,ScrollContainer:wO,children:[v,y]}),Object(Ye.jsx)(IO,{distance:"flush"}),Object(Ye.jsxs)(NO,{className:"m-y-2",children:[Object(Ye.jsx)(EO,{children:a.char||""}),Object(Ye.jsx)(AO,{children:a.name||""})]})]})}_O.propTypes={onInsert:r.a.func.isRequired,storeHandlers:r.a.shape({init:r.a.func.isRequired,getter:r.a.func.isRequired,setter:r.a.func.isRequired}).isRequired};function PO(e){const{editor:t,onInsert:n,onOpenChange:o}=e,{inlineTarget:r,setInlineTarget:a,initInlineTarget:s,insertAtInlineTarget:l}=Object(ef.a)(t,null),c=Object(i.useRef)(r);Object(i.useEffect)(()=>{c.current=r});Object(i.useEffect)(()=>{o(!!r)},[o,r]);Object(i.useEffect)(()=>{const e=()=>{c.current?a(null,{restoreSelection:!0}):s({fireNodeChange:!0})};t.on("OpenCharmapPopover",e);return()=>t.off("OpenCharmapPopover",e)},[t,s,a]);const u=()=>{c.current&&a(null)},d=(...e)=>{l(n.bind(null,...e))},f=e=>!(e&&e.target&&t.dom.getParent(e.target,".mce-toolbar,.mce-hubspot-dropdown"));return Object(Ye.jsx)(Re.a,{"data-test-id":"charmap-popover-manager",editor:t,open:!!r,target:r,onRemove:u,shouldCloseOnClick:f,onOpenChange:u,arrowSize:"medium",placement:"bottom right",autoPlacement:"vert",animateOnToggle:!1,renderContent:()=>Object(Ye.jsx)(_O,{onInsert:d,storeHandlers:e.storeHandlers,dropdownClassName:e.dropdownClassName})})}const MO=["contextualNodeAttributes"],DO=Object(bO.a)(mi.a),BO="hsCharmapOpenChange",FO=Object(Mr.a)("TinymcePlugins.hscharmap"),UO=(e,t,n)=>{const o=t=>{e.insertContent(String.fromCharCode(t));Object(Ie.b)(e,"tinymceCharmap",G.S,{character:String.fromCharCode(t)})},r=t=>{t&&Object(Ie.b)(e,"tinymceCharmap",G.db);e.fire(BO,{selected:t})},i=()=>e.fire("OpenCharmapPopover");p.a.canvas.addMenuItem(e,rn.p,{text:FO("menuItem"),onClick:i});p.a.canvas.addButton(e,rn.q,{renderControl:t=>{const n=Object(d.a)(t,MO);return Object(Ye.jsx)(DO,Object.assign({"data-test-id":"insert-special-character-button",iconName:"specialCharacter",tooltip:FO("tooltip.insert"),onClick:i,editor:e,eventKey:BO},n))}});p.a.canvas.addPopover(e,t,{renderPopover:t=>Object(Ye.jsx)(PO,Object.assign({editor:e,onOpenChange:r,onInsert:o,storeHandlers:n(e)},t))})},VO=B.i,HO={};function qO(e){const t=e.settings[$o.a];return{init:n=>{function o(e){Object.keys(e).forEach(t=>{HO[t]=e[t]});n()}if(t)e.settings.bus.postMessage({action:"getStoreValues",payload:{storeKeys:dO,storeNamespace:uO}}).then(e=>{o(e)});else{o(Uy.getStore(window,dO,uO))}},getter:e=>HO?HO[e]:null,setter:(n,o)=>{if(HO){HO[n]=o;t?e.settings.bus.postMessage({action:"setStoreValue",payload:{key:n,value:o,storeKeys:dO,storeNamespace:uO}}):Uy.setValue(window,dO,uO,{key:n,value:o})}}}}function $O(e){e.on("init",()=>{const t=Object(yu.b)(e.settings.apiClient);p.a.canvas.addIdleCallback(e,null,()=>{t().then(e=>{HO.currency||(HO.currency=Object(Ir.h)(["homeCurrency","currencyCode"],e))}).catch(e=>console.error(e))})});UO(e,VO,qO)}p.a.PluginManager.add(VO,$O);const zO={};function WO(e){const t=Object(Lo.b)(e.post,Ro.a.SNIPPETS.getUrl,zO);return function(e){const n={data:Object.assign({contentTypesToHydrate:["SNIPPET"],filters:[{field:"content_type",values:["SNIPPET"]}],sorts:[{field:"name",order:"ASC"}]},e)};return t("",n)}}var GO=n(2684),KO=n(483);const YO=Object(Hp.getFullUrl)("app"),XO=cn.a.get(),ZO=()=>`${YO}/snippets/${XO}`,QO=()=>`${YO}/snippets/${XO}/new`;var JO=()=>Object(Ye.jsxs)(c.a,{className:"m-top-10",direction:"column",align:"center",children:[Object(Ye.jsx)(GO.a,{name:"text-snippet",width:"30%",className:"m-bottom-3"}),Object(Ye.jsx)("h5",{className:"m-bottom-5 text-center",children:Object(Ye.jsx)(ft.a,{message:"RichTextLib.snippet.empty.title"})}),Object(Ye.jsx)(KO.a,{className:"m-bottom-5 text-center",children:Object(Ye.jsx)(ft.a,{message:"RichTextLib.snippet.empty.description"})}),Object(Ye.jsx)(Le.a,{use:"tertiary",external:!0,href:QO(),size:"small",children:Object(Ye.jsx)(ft.a,{message:"RichTextLib.snippet.button.createFirst"})})]}),ex=n(2700);function tx({snippets:e,onSelect:t,setQueryInput:n,setSearched:o}){const r=e=>{e.preventDefault();e.stopPropagation();t(e.target.value)},i=e=>{e.preventDefault();e.stopPropagation();o(!0);n(e.target.value)},a=()=>e.map(e=>({text:e.name,help:Object(Ye.jsx)(Ns.a,{children:e.body}),value:e.html}));return Object(Ye.jsx)(ex.a,{onChange:r,placeholder:Nt.a.text("RichTextLib.snippet.search"),options:a(),onSearchChange:i})}function nx({snippets:e,onInsert:t,setQueryInput:n,setSearched:o,searched:r}){const i=!!e.length;return Object(Ye.jsx)("div",{children:r||i?Object(Ye.jsx)(tx,{setQueryInput:n,snippets:e,onSelect:t,setSearched:o}):Object(Ye.jsx)(JO,{})})}var ox=()=>Object(Ye.jsxs)(c.a,{justify:"between",align:"center",className:"m-bottom-3",children:[Object(Ye.jsx)("h5",{className:"m-bottom-0",children:Object(Ye.jsx)(ft.a,{message:"RichTextLib.snippet.title.insert"})}),Object(Ye.jsxs)(Ts.a,{grow:0,children:[Object(Ye.jsx)(Le.a,{external:!0,href:ZO(),size:"small",use:"tertiary-light",children:Object(Ye.jsx)(ft.a,{message:"RichTextLib.snippet.button.manage"})}),Object(Ye.jsx)(Le.a,{external:!0,href:QO(),size:"small",use:"tertiary",children:Object(Ye.jsx)(ft.a,{message:"RichTextLib.snippet.button.createNew"})})]})]});var rx=()=>Object(Ye.jsxs)(Ye.Fragment,{children:[Object(Ye.jsx)("h5",{className:"m-bottom-0",children:Object(Ye.jsx)(ft.a,{message:"RichTextLib.snippet.title.insert"})}),Object(Ye.jsxs)(c.a,{className:"m-top-10",direction:"column",align:"center",children:[Object(Ye.jsx)(GO.a,{name:"errors/general",width:"30%",className:"m-bottom-3"}),Object(Ye.jsx)(KO.a,{className:"m-bottom-5 text-center",children:Object(Ye.jsx)(ft.a,{message:"RichTextLib.snippet.error"})})]})]});const ix=l.a.div.withConfig({displayName:"SnippetPopoverBody__SnippetPopoverWrapper",componentId:"svfeb6-0"})(["width:400px;"]),ax=l()(u.a).withConfig({displayName:"SnippetPopoverBody__LoadingWrapper",componentId:"svfeb6-1"})(["display:flex;justify-content:center;"]);function sx({fetchSnippets:e,onInsert:t}){const[n,o]=Object(i.useState)(!0),[r,a]=Object(i.useState)(!1),[s,l]=Object(i.useState)(!1),[c,u]=Object(i.useState)([]),[d,f]=Object(i.useState)(""),p=e=>{let t=[];e&&(t=e.results.map(e=>({name:e.name,body:e.metadata.body,html:e.metadata.htmlBody})));u(t)};Object(i.useEffect)(()=>{e({query:d,limit:1e3,offset:0}).then(e=>{o(!1);e||console.warn("Could not fetch Snippets for this user");p(e);a(!1);return e}).catch(e=>{o(!1);console.warn(e.message);a(!0);throw new Error(e.message)})},[d,e]);const m=()=>r?Object(Ye.jsx)(rx,{}):Object(Ye.jsxs)(Ye.Fragment,{children:[Object(Ye.jsx)(ox,{}),Object(Ye.jsx)(nx,{setQueryInput:f,snippets:c,onInsert:t,setSearched:l,searched:s})]});return Object(Ye.jsx)(ix,{className:"p-all-5",tabIndex:"-1",children:n?Object(Ye.jsx)(ax,{grow:!0,size:"medium"}):m()})}function lx({editor:e,onInsert:t,fetchSnippets:n,onOpenChange:o}){const{inlineTarget:r,setInlineTarget:a,initInlineTarget:s}=Object(ef.a)(e,null),l=Object(i.useRef)(r);Object(i.useEffect)(()=>{l.current=r});Object(i.useEffect)(()=>{o(!!r)},[o,r]);const c=Object(i.useCallback)(()=>{l.current&&a(null)},[a]),u=(...e)=>{c();t(...e)};Object(i.useEffect)(()=>{const t=()=>{l.current?c():s()};e.on("OpenSnippetPopover",t);return()=>e.off("OpenSnippetPopover",t)},[e,s,c]);return Object(Ye.jsx)(Re.a,{editor:e,"data-test-id":"snippet-popover",open:!!r,target:r,placement:"bottom",arrowSize:"medium",onOpenChange:c,onRemove:c,animateOnToggle:!1,renderContent:()=>Object(Ye.jsx)(sx,{onInsert:u,fetchSnippets:n})})}var cx=Object(gi.a)(lx);const ux=["contextualNodeAttributes"],dx=Object(bO.a)(mi.a),fx="hsSnippetOpenChange",px=Object(Mr.a)("TinymcePlugins.hssnippet");function mx(e,t){const n=()=>e.fire("OpenSnippetPopover"),o=()=>e.fire("PreloadSnippetPicker"),r=t=>{e.insertContent(t);Object(Ie.b)(e,"tinymceInsertSnippet",G.R)},i=t=>{t&&Object(Ie.b)(e,"tinymceSnippet",G.cb);e.fire(fx,{selected:t})};p.a.canvas.addButton(e,rn.U,{renderControl:t=>{const r=Object(d.a)(t,ux);return Object(Ye.jsx)(dx,Object.assign({"data-test-id":rn.U,iconName:"textSnippet",tooltip:px("tooltip"),onClick:n,onMouseEnter:o,editor:e,eventKey:fx},r))}});p.a.canvas.addMenuItem(e,rn.U,{text:px("menuItem"),onClick:n});const a=e.getParam("apiClient");p.a.canvas.addPopover(e,t,{renderPopover:t=>Object(Ye.jsx)(cx,Object.assign({editor:e,onInsert:r,onOpenChange:i,fetchSnippets:WO(a)},t))})}const hx=B.N;function gx(e){mx(e,hx)}p.a.PluginManager.add(hx,gx);n(522),n(573),n(574),n(575),n(576),n(577),n(594),n(592),n(578),n(541),n(527),n(529);var bx=n(2747),vx=n(587),yx=n(2613),Cx=n(585),Ox=n(572),xx=n(596);const jx=Object(Ir.a)(Object(Ox.a)(),Object(xx.a)(),Object(yx.a)(),Object(vx.a)())(bx.a);class Sx extends i.Component{constructor(e){super(e);this.preventMouseOutPropagation=e=>{e.preventDefault();e.stopImmediatePropagation()};this.refCodemirror=this.refCodemirror.bind(this)}componentDidMount(){setTimeout(()=>{this.codemirror&&this.codemirror.refresh()},250);window.addEventListener("mouseout",this.preventMouseOutPropagation,!0)}componentWillUnmount(){window.removeEventListener("mouseout",this.preventMouseOutPropagation,!0)}refCodemirror(e){this.codemirror=e&&e.codemirror}render(){return Object(Ye.jsx)(jx,Object.assign({theme:"hubspot-canvas-light",lineWrapping:!0,mode:"htmlmixed",width:"100%",height:"100%",viewportMargin:1/0,scrollbarStyle:"overlay",autofocus:!0,findPanelPosition:Cx.a.TOP,matchTags:!0,autoCloseTags:!0,refCodemirror:this.refCodemirror},this.props))}}Sx.propTypes={settings:r.a.shape({useDynamicCssLoading:r.a.bool})};Sx.defaultProps={useDynamicCssLoading:!1};var wx=Sx;function Tx(e){return"TinymcePlugins.HtmlEditorModal."+e}class kx extends i.Component{constructor(e){super(e);this.state={content:e.initialContent,isOpenComplete:!1};this.handleSave=this.handleSave.bind(this);this.handleChange=this.handleChange.bind(this);this.renderCodeMirror=this.renderCodeMirror.bind(this)}handleSave(){const{onSave:e}=this.props,{content:t}=this.state;e(t)}handleChange({value:e}){this.setState({content:e})}renderCodeMirror(){this.setState({isOpenComplete:!0})}render(){const{onClose:e,onCloseComplete:t}=this.props,{content:n}=this.state,o=Object(Ir.h)(["settings","useDynamicCssLoading"],this.props);return Object(Ye.jsxs)(_m.a,{use:"default",onOpenComplete:this.renderCodeMirror,onCloseComplete:t,width:900,children:[Object(Ye.jsxs)(Bm.a,{children:[Object(Ye.jsx)(Pm.a,{onClick:e}),Object(Ye.jsx)(Um.a,{children:Nt.a.text(Tx("header"))})]}),Object(Ye.jsx)(Mm.a,{className:"p-all-0 html-editor-modal__body",children:this.state.isOpenComplete&&Object(Ye.jsx)(wx,{className:"html-editor-modal__source-wrapper",value:n,onChange:this.handleChange,useDynamicCssLoading:o})}),Object(Ye.jsxs)(Dm.a,{children:[Object(Ye.jsx)(Le.a,{use:"primary",onClick:this.handleSave,children:Nt.a.text(Tx("saveButton"))}),Object(Ye.jsx)(Le.a,{onClick:e,children:Nt.a.text(Tx("cancelButton"))})]})]})}}kx.propTypes={initialContent:r.a.string.isRequired,onSave:r.a.func.isRequired,onClose:r.a.func.isRequired,onCloseComplete:r.a.func,settings:r.a.shape({useDynamicCssLoading:r.a.bool})};const Nx=["contextualNodeAttributes"],Ex=Object(Mr.a)("TinymcePlugins.hscode"),Ax=(e,t,n)=>()=>{t();Object(Ie.b)(e,"tinymceEditSourceCode",G.A,{version:"v2",method:n})};function Ix(e,t){e.addCommand("mceCodeEditor",t);p.a.canvas.addButton(e,rn.W,{renderControl:n=>{const o=Object(d.a)(n,Nx);return Object(Ye.jsx)(mi.a,Object.assign({iconName:"htmlFile",tooltip:Ex("tooltip"),onClick:Ax(e,t,"button"),selected:!1},o))}});let n={};const o=Object(Ir.h)(["settings","hsPlugins","hsCode","disabledTooltip"],e);o&&(n={disabled:!0,tooltip:{title:o,placement:"left"}});p.a.canvas.addMenuItem(e,rn.V,Object.assign({text:Ex("menuItem"),onClick:Ax(e,t,"menu")},n))}function Rx(e,t){const n=Hi(e);let o=t;n.length&&(o=zi(e,t,n));e.undoManager.transact(()=>{e.setContent(o)})}let Lx=null;function _x(e){const t=Object(Ee.f)(e,ar);function n(){ri.a.unmountComponentAtNode(Lx)}function o(t){Rx(e,t);n()}function r(){let r=e.getContent();!!Hi(e).length&&(r=Wi(r));if(!Lx){const t=Object(Ee.a)(e,"sourcecode-modal-container");if(!t){console.error("Could not append div to editor.");return}Lx=t}ri.a.render(Object(Ye.jsx)(kx,{onSave:o,onClose:n,initialContent:r,settings:t}),Lx)}Ix(e,r)}const Px=B.j;p.a.PluginManager.add(Px,_x);function Mx(e,t){return{type:lc,html:e,settings:t}}function Dx(e){function t(t){const{action:n}=t,{html:o}=n;Rx(e,o)}const n=Object(Ee.f)(e,ar);function o(){let o=e.getContent();!!Hi(e).length&&(o=Wi(o));Ec(e,{onOpen(){e.settings.bus.dispatchAction(Mx(o,n));e.once(cc,t)},onClose(){e.off(cc,t)}})}Ix(e,o)}const Bx=B.k;p.a.PluginManager.add(Bx,Dx);const Fx="mce-hs-more",Ux=e=>e.getParam("hsmore_class",Fx),Vx="mcehsmore",Hx=e=>e.getParam("hsmore_html",`<img src="${p.a.Env.transparentSrc}" class="${Ux(e)}" contenteditable="false" data-mce-placeholder data-mce-resize="false" style='height: 20px !important' />`),qx="\x3c!--more--\x3e",$x=Object(Mr.a)("TinymcePlugins.hsmore");function zx(e){const t=new RegExp(qx.replace(/[?.*[\](){}+^$:]/g,e=>"\\"+e),"gi");e.on("drop",()=>{e.fire("change")});e.on("dragStart",({target:t})=>{t.classList.contains(Ux(e))&&Object(Ie.b)(e,"tinymceEdit",G.s)});e.on("BeforeSetContent",n=>{n.content=n.content.replace(t,Hx(e))});e.on("PreInit",()=>{e.serializer.addNodeFilter("img",(e,t,n)=>{if(!n.selection){let t,n,o=e.length;for(;o--;){t=e[o];n=t.attr("class");if(n&&-1!==n.indexOf(Fx)){t.type=3;t.value=qx;t.raw=!0}}}})})}function Wx(e){e.addCommand(Vx,()=>{const t=Hx(e);e.insertContent(t)});const t=()=>e.execCommand(Vx);p.a.canvas.addMenuItem(e,rn.Q,{text:$x("menuItem"),onClick:t});zx(e)}const Gx=B.F;p.a.PluginManager.add(Gx,Wx);const Kx="hs-visualblocks",Yx="hsvisualblocks",Xx="visualblocks.css",Zx=p.a.DOM.uniqueId(),Qx=function(e,t){const n=p.a.toArray(e.getElementsByTagName("link"));if(0===p.a.grep(n,e=>e.id===Zx).length){const n=p.a.DOM.create("link",{id:Zx,rel:"stylesheet",href:t});e.getElementsByTagName("head")[0].appendChild(n)}},Jx=(e,t)=>{const n=Object(Ee.f)(e,"pluginsCSSRoot");e.addCommand(Yx,()=>{Qx(e.getDoc(),`${n}/${Xx}`);e.dom.toggleClass(e.getBody(),Kx);t.active=!t.active;Object(Ie.b)(e,"tinymceVisualBlocks",G.kb,{active:t.active,version:"1"})})},ej="VisualBlocks";class tj extends i.Component{constructor(e){super(e);this.handleVisualBlockChange=()=>{this.setState({active:this.props.enabled.active})};this.state={active:this.props.enabled.active}}componentDidMount(){const{editor:e}=this.props;e.on(ej,this.handleVisualBlockChange)}componentWillUnmount(){const{editor:e}=this.props;e.off(ej,this.handleVisualBlockChange)}render(){const{onClick:e}=this.props,{active:t}=this.state;return Object(Ye.jsx)(Le.a,{onClick:e,children:Nt.a.text("TinymcePlugins.visualblocks."+(t?"hide_blocks":"show_blocks"))})}}tj.propTypes={editor:r.a.object.isRequired,onClick:r.a.func.isRequired,enabled:r.a.shape({active:r.a.bool.isRequired}).isRequired};const nj=(e,t)=>{const n=()=>{e.execCommand(Yx)};p.a.canvas.addMenuItem(e,rn.kb,{render:o=>Object(Ye.jsx)(tj,Object.assign({editor:e,onClick:n,enabled:t},o))})};function oj(e){const t={active:!1};Jx(e,t);nj(e,t)}const rj=B.R;p.a.PluginManager.add(rj,oj);function ij(e){let t;if(e.collapsed){const{endOffset:n,endContainer:o,startOffset:r,startContainer:i}=e;if(3===i.nodeType){const a=r>0;if(n!==o.length){e.setEnd(o,n+1);t=e.getBoundingClientRect();e.setEnd(o,n)}else if(a){e.setStart(i,r-1);t=e.getBoundingClientRect();e.setStart(i,r)}else t=i.getBoundingClientRect()}}return t||e.getBoundingClientRect()}function aj(e,t){const n=e.$el.offset().left,o=t.top;e.moveTo(n,o)}function sj(e,t){aj(e,ij(t))}function lj(e,t){aj(e,t.getBoundingClientRect())}function cj(e){e.on("OpenWindow",t=>{if(!p.a.settings[$o.a])return;const n=t.win,o=e.selection.getNode();if(o)lj(n,o);else{sj(n,e.selection.getRng())}})}const uj=B.q;p.a.PluginManager.add(uj,cj);var dj=n(302),fj=n(327),pj=n(480),mj=n(501),hj=n(326),gj=n(310);const bj=l()(qs.a).withConfig({displayName:"UITextToolbarInputDropdown__StyledFontSizeInput",componentId:"s7ep6m-0"})(["&&&{color:",";cursor:text;font-size:12px !important;height:20px !important;padding:0 !important;width:40px !important;",";}"],an.BUTTON_TERTIARY_LIGHT_TEXT,({disabled:e})=>e&&`\n      color: ${an.BUTTON_DISABLED_TEXT} !important;\n      cursor: not-allowed;\n      `),vj=l()(dt.a).withConfig({displayName:"UITextToolbarInputDropdown__StyledCaret",componentId:"s7ep6m-1"})(["&&&{border-width:4px;}"]),yj=l.a.div.withConfig({displayName:"UITextToolbarInputDropdown__StyledContainer",componentId:"s7ep6m-2"})(["&&&{background-color:",";border-color:",";border-radius:3px;border-style:solid;border-width:1px;color:",";cursor:pointer;display:flex;font-size:12px;padding-bottom:5px;padding-top:5px;transition:all 150ms ease-out;:hover{background-color:",";}",";",";}"],({use:e})=>"on-dark"===e?an.OLAF:an.KOALA,an.BATTLESHIP,an.BUTTON_TERTIARY_LIGHT_TEXT,an.GYPSUM,({open:e})=>e&&`\n      ${hj.n.join(" ")};\n      border-color: ${Object(fj.b)(an.FOCUS_RING_BASE,dj.C)};\n      outline: 0;\n      `,({disabled:e})=>e&&`\n      background-color: ${an.KOALA} !important;\n      border-color: ${an.KOALA} !important;\n      color: ${an.BUTTON_DISABLED_TEXT} !important;\n      cursor: not-allowed;\n      `);class Cj extends i.PureComponent{constructor(e){super(e);this.handleFocus=()=>{this.setState({open:!0});this.inputRef.current.focus()};this.handleBlur=()=>{this.setState({open:!1,inputValue:null})};this.handleKeyDown=e=>{if("Enter"===e.key){this.props.onInputSelect(this.state.inputValue);e.preventDefault()}else"Escape"===e.key&&this.inputRef.current.blur()};this.handleOptionSelect=e=>{this.props.onOptionSelect(e.target.value)};this.handleButtonClick=e=>{this.props.disabled||"INPUT"===e.target.nodeName||(this.state.open?this.handleBlur():this.handleFocus())};this.handleOpenChange=e=>{e.target.value?this.handleFocus():this.handleBlur()};this.handleInputValueChange=e=>{this.setState({inputValue:e.target.value})};this.renderInputComponent=e=>Object(Ye.jsxs)(yj,{className:"private-button--toolbar",disabled:e.disabled,onClick:this.handleButtonClick,open:this.state.open,use:this.props.use,children:[Object(Ye.jsx)(bj,Object.assign({},e,{styled:!1})),Object(Ye.jsx)(vj,{})]});this.state={open:!1,inputValue:null};this._id=Object(gj.d)("text-toolbar-input-");this.inputRef=Object(i.createRef)()}render(){const{disabled:e,dropdownClassName:t,options:n,placeholder:o,value:r}=this.props,{open:i,inputValue:a}=this.state;let s=r||"";i&&"string"==typeof a&&(s=a);return Object(Ye.jsx)(vl.a,{anchorType:"input",autoFocus:i,className:"private-button--toolbar",closeOnTargetLeave:!0,disabled:e,dropdownClassName:Fg()("private-typeahead-results--toolbar",t),filterOptions:!1,id:this._id,inputComponent:this.renderInputComponent,inputRef:this.inputRef,inputValue:s,value:s,minimumSearchCount:1/0,onChange:this.handleOptionSelect,onInputKeyDown:this.handleKeyDown,onInputValueChange:this.handleInputValueChange,onOpenChange:this.handleOpenChange,open:i,options:n,placeholder:o})}}Cj.propTypes={disabled:r.a.bool,dropdownClassName:r.a.string,onInputSelect:r.a.func.isRequired,onOptionSelect:r.a.func.isRequired,options:r.a.arrayOf(mj.c).isRequired,placeholder:r.a.string,use:r.a.oneOf(Object.keys(pj.b)),value:r.a.oneOfType([r.a.string,r.a.number])};Cj.displayName="UITextToolbarInputDropdown";var Oj=Cj,xj=n(1220);const jj=["fontSizes","value","onChange"],Sj=e=>"RichTextLib.formatting.FontSize."+e;class wj extends i.Component{constructor(...e){super(...e);this.handleInputSelect=e=>{const t=parseInt(e,10);isNaN(t)||this.props.onChange(t+"px","input")}}render(){const e=this.props,{fontSizes:t,value:n,onChange:o}=e,r=Object(d.a)(e,jj),i=Math.round(10*parseFloat(n,10))/10;return Object(Ye.jsx)(Oj,Object.assign({},r,{options:t,value:isNaN(i)?null:i+"px",placeholder:Nt.a.text(Sj("placeholder")),onOptionSelect:e=>o(e,"option"),onInputSelect:this.handleInputSelect}))}}wj.propTypes={onChange:r.a.func.isRequired,value:r.a.string,fontSizes:r.a.array.isRequired};var Tj=Object(xj.a)(wj);class kj extends i.Component{constructor(e){super(e);this.handleChangeFont=(e,t)=>{const{editor:n}=this.props;n.execCommand("hsfontsize",!1,{value:e});Object(Ie.b)(n,"tinymceFormatting",G.g,{method:t,value:e})};this.fontSizes=e.fontSizes}render(){const{placeholder:e,fontSize:t}=this.props;return Object(Ye.jsx)(Tj,{dropdownClassName:"mce-hubspot-control",use:"on-dark",onChange:this.handleChangeFont,placeholder:e,fontSizes:this.fontSizes,value:t})}}kj.propTypes={editor:r.a.instanceOf(p.a.Editor),fontSizes:r.a.array.isRequired,placeholder:r.a.string,fontSize:r.a.string};const Nj=["contextualNodeAttributes"],Ej=Object(Mr.a)(lr.k),Aj="fontSizeSelectMenuItem";function Ij({target:e}){e.formatter.register(lr.b,{selector:lr.e.join(","),styles:{fontSize:"%value"}})}function Rj(e){const t=Object(Ee.d)(e.settings,lr.j.FONT_SIZE_FORMATS,[]).map(e=>({text:{raw:e+"px"},value:e+"px"}));e.on("PreInit",Ij);e.addCommand("hsFontSize",(t,{value:n})=>{sa(e,n)});const n=({element:t})=>{if(!t)return{};const n=yi(e.getWin(),t),o=n&&n.fontSize;return{[rn.A]:o}};p.a.canvas.addNodeChangeHandler(e,{getFormattingAttributes:n});p.a.canvas.addButton(e,rn.A,()=>({renderControl:n=>{const{contextualNodeAttributes:o}=n,r=Object(d.a)(n,Nj),{[rn.A]:i}=o;return Object(Ye.jsx)(kj,Object.assign({editor:e,placeholder:Ej(Aj),fontSizes:t.map(({text:{raw:e},value:t})=>({text:e,value:t})),fontSize:i},r))}}))}const Lj={};function _j(e){const t=Object(Lo.b)(e.get,Ro.a.BRAND_FONTS.getUrl,Lj,Lo.a);return function(){return t()}}var Pj=n(728),Mj=l()(Ol).withConfig({displayName:"TextToolbarSelectOption",componentId:"sc-1wwzlav-0"})(["font-size:13px !important;min-height:auto !important;padding:3px 6px !important;"]);const Dj=l()(Le.a).withConfig({displayName:"VariantSelectOption__SubDropdown",componentId:"sc-38poel-0"})(["background:transparent !important;padding:0 !important;padding-right:3px !important;min-height:auto !important;&&:hover{background:transparent !important;}"]),Bj=({dropdownClassName:e,option:t,setOpen:n,onChange:o,OptionComponent:r,VariantButtonComponent:a,VariantOptionComponent:s,VariantSelectComponent:l})=>{const[c,u]=Object(i.useState)(!1),d=t.variants.map(e=>({name:e,fontValue:{fallback:t.fallback,font_set:t.fontSet||"CUSTOM",font:t.family,optionValue:t.value,variant:e,styles:Object.assign({},t.styles[e])},svgUrl:t.svgUrls[e],value:e}));if(1===d.length){const e=d[0];return Object(Ye.jsx)(r,{onClick:()=>{o({target:{value:e.value}},e);n(!1)},children:t.text})}return Object(Ye.jsx)(Dj,{onMouseEnter:()=>u(!0),onMouseLeave:()=>u(!1),onClick:()=>u(!c),children:Object(Ye.jsx)(l,{placeholder:t.text,searchable:!1,placement:"right bottom",open:c,resultsClassName:"variant-select-results",onChange:e=>{const t=d.find(t=>t.value===e.target.value);o(e,t)},dropdownClassName:e+" variant-select-dropdown",onSelectedOptionChange:()=>n(!1),options:d,optionRenderer:e=>Object(Ye.jsx)(a,{use:"transparent",children:e.svgUrl?Object(Ye.jsx)(zs.a,{src:""+e.svgUrl}):Object(Ye.jsx)(s,{children:e.name})})})})};Bj.propTypes={dropdownClassName:r.a.string,option:r.a.object.isRequired,setOpen:r.a.func.isRequired,onChange:r.a.func.isRequired,OptionComponent:r.a.elementType,VariantButtonComponent:r.a.elementType.isRequired,VariantOptionComponent:r.a.elementType.isRequired,VariantSelectComponent:r.a.elementType.isRequired};var Fj=Bj;const Uj=["dropdownClassName","error","fontOptions","onChange","StyledUITextToolbarSelectComponent","value","VariantButtonComponent","VariantOptionComponent","VariantSelectComponent"],Vj=e=>"RichTextLib.formatting.FontSelect."+e,Hj=({value:e,help:t,text:n})=>t?Object(Ye.jsx)(fn.a,{title:t,tooltipProps:{placement:"bottom"},children:n}):Object(Ye.jsx)("span",{style:{fontFamily:e},children:n}),qj=e=>{const t=e.find(e=>e.text===Nt.a.text(Vj("customFontsTitle")));return t&&t.options?t.options.map(e=>e.value):[]},$j=(e,t,n,o,r,i,a)=>e.text?e.variants?Object(Ye.jsx)(Fj,{dropdownClassName:t,option:e,setOpen:n,onChange:o,OptionComponent:Mj,VariantButtonComponent:i,VariantOptionComponent:r,VariantSelectComponent:a}):Object(Ye.jsx)(Mj,{title:e.text,children:Object(Ye.jsx)(Hj,{value:e.value,text:e.text,help:e.help})}):null;function zj(e){const{dropdownClassName:t,error:n,fontOptions:o,onChange:r,StyledUITextToolbarSelectComponent:a,value:s,VariantButtonComponent:l,VariantOptionComponent:c,VariantSelectComponent:u}=e,f=Object(d.a)(e,Uj),[p,m]=Object(i.useState)(!1),h=qj(o);return Object(Ye.jsx)(a,Object.assign({},f,{value:s,searchable:!1,closeOnTargetLeave:!0,options:o,open:p,error:n,placeholder:Nt.a.text(Vj("placeholder")),dropdownClassName:t+" font-select-dropdown",resultsClassName:"font-select-results",onChange:e=>{const t=e.target.value;if(h.includes(t))console.log("Selecting custom font option",t);else{r(e);m(!1)}},onOpenChange:()=>{m(!p)},onSelectedOptionChange:e=>{e.target.value&&e.target.value.variants&&m(!0)},optionRenderer:e=>$j(e,t,m,r,c,l,u)}))}zj.propTypes={dropdownClassName:r.a.string,error:r.a.bool,fontOptions:r.a.array.isRequired,onChange:r.a.func.isRequired,StyledUITextToolbarSelectComponent:r.a.elementType,value:r.a.string,VariantButtonComponent:r.a.elementType,VariantOptionComponent:r.a.elementType,VariantSelectComponent:r.a.elementType};zj.defaultProps={fontOptions:[]};var Wj=zj;const Gj=["customFonts","defaultFonts","enableParsedFonts","fetchBrandingCustomFonts","isUngatedForBrandingFonts","parsedFonts","parsedFontText","unsupportedFonts","value","webfonts"],Kj=e=>"RichTextLib.formatting.FontSelect."+e;function Yj(e){const{customFonts:t,defaultFonts:n,enableParsedFonts:o,fetchBrandingCustomFonts:r,isUngatedForBrandingFonts:a,parsedFonts:s,parsedFontText:l,unsupportedFonts:c,value:u,webfonts:f}=e,p=Object(d.a)(e,Gj),[m,h]=Object(i.useState)([]);Object(i.useEffect)(()=>{a&&r&&!m.length&&r().then(e=>{const t=e.map(e=>({fontSet:"BRANDING",family:e.name,fallback:e.fallback,text:e.name,value:e.name,variants:e.variants.map(e=>e.name),svgUrls:e.variants.reduce((e,t)=>{e[t.name]=t.svgUrl;return e},{}),styles:e.variants.reduce((e,t)=>{let n={};try{n=JSON.parse(t.style)}catch(e){console.error(e)}e[t.name]=n;return e},{})}));h(t)}).catch(e=>{console.error(e);h([])})},[]);const g=c.includes(u),b=Object(i.useMemo)(()=>{const e=f.length?[{text:Nt.a.text(Kj("webfontTitle")),help:Nt.a.text(Kj("webfontTooltip")),options:f}]:[],r=s.length?[{text:l.text,help:l.help,options:s.map(({text:e,value:t})=>({text:e,value:t,disabled:!o}))}]:[],i=[...t,...a?m:[]];return[...i.length?[{text:Nt.a.text(Kj("customFontsTitle")),options:i.map(e=>({family:e.family,fallback:e.fallback,fontSet:e.fontSet||"CUSTOM",text:e.family,value:e.value,variants:e.variants,svgUrls:e.svgUrls,styles:e.styles}))}]:[],...[{options:n}],...r,...e]},[m,t,n,o,s,l,f,a]);return Object(Ye.jsx)(Wj,Object.assign({},p,{error:g,fontOptions:b,value:u}))}Yj.propTypes={customFonts:r.a.array,defaultFonts:r.a.array.isRequired,enableParsedFonts:r.a.bool,fetchBrandingCustomFonts:r.a.func,isUngatedForBrandingFonts:r.a.bool,onChange:r.a.func.isRequired,parsedFonts:r.a.array,parsedFontText:r.a.shape({help:r.a.string.isRequired,text:r.a.string.isRequired}),unsupportedFonts:r.a.array,value:r.a.string,webfonts:r.a.array,StyledUITextToolbarSelectComponent:r.a.elementType,VariantButtonComponent:r.a.elementType,VariantOptionComponent:r.a.elementType,VariantSelectComponent:r.a.elementType};Yj.defaultProps={customFonts:[],enableParsedFonts:!1,parsedFonts:[],unsupportedFonts:[],webfonts:[],StyledUITextToolbarSelectComponent:vl.a,VariantButtonComponent:Le.a,VariantSelectComponent:vl.a};var Xj=Yj;const Zj="#506e91",Qj=l()(vl.a).withConfig({displayName:"StyledComponents__FontStyledUITextToolbarSelect",componentId:"sc-10qmuy1-0"})(["min-width:130px;padding:5px 6px !important;font-size:12px !important;background-color:"," !important;color:"," !important;height:32px !important;span{border-top-color:",";}"],an.OLAF,Zj,Zj),Jj=l.a.span.withConfig({displayName:"StyledComponents__FontVariantOption",componentId:"sc-10qmuy1-1"})(["min-height:30px;padding:12px 20px;font-size:13px;"]),eS=l()(Le.a).withConfig({displayName:"StyledComponents__FontVariantButton",componentId:"sc-10qmuy1-2"})(["text-decoration:none;margin:0 !important;min-height:30px !important;margin-bottom:1px !important;padding:12px 20px !important;&&:hover{text-decoration:none;}"]),tS=l()(vl.a).withConfig({displayName:"StyledComponents__FontVariantSelect",componentId:"sc-10qmuy1-3"})(["background:transparent !important;border:none !important;font-size:13px !important;color:"," !important;height:auto !important;padding:3px 6px !important;font-weight:500 !important;&&:hover{color:",";text-decoration:none;background:transparent;}&&:focus{background:transparent;box-shadow:none;}.uiDropdown__buttonCaret{transform:rotate(-90deg);border-top-color:",";}"],an.OBSIDIAN,an.OBSIDIAN,an.OBSIDIAN);function nS(e){const t=Object.assign({},(Object(Pj.a)(e),e));return Object(Ye.jsx)(Xj,Object.assign({StyledUITextToolbarSelectComponent:Qj,VariantButtonComponent:eS,VariantOptionComponent:Jj,VariantSelectComponent:tS},t))}var oS=Object(xj.a)(nS);const rS=["contextualNodeAttributes"];function iS(e){const{[lr.j.FONT_FORMATS]:t,[lr.j.WEBFONT_FORMATS]:n,[lr.j.ENABLE_PARSED_FONTS]:o,[lr.j.USE_PARSED_FONTS]:r,[lr.j.USE_BRANDING_FONTS]:i}=Object(Ee.f)(e,lr.f),a=ki(t.defaults),s=Ti(t.customFonts||[]),l=ki(n),c=Object(Ee.f)(e,"isEmail");Gi(e);if(i){const t=_j(e.settings.apiClient);p.a.canvas.addIdleCallback(e,null,()=>{t().then(t=>{const n=t&&t.length?t:[],o=[...n,...s];e.plugins.hsformatting.brandingFonts=n;e.plugins.hsformatting.combinedCustomFonts=o}).catch(t=>{console.error(t);e.plugins.hsformatting.combinedCustomFonts=s}).finally(()=>Ki(e))})}else Ki(e,s);e.addCommand("hsfontselect",(t,{value:n,isCustomFont:o})=>{const r=o?n.fontValue.optionValue:n;e.formatter.apply("fontname",{value:r});o&&la(e,n.fontValue.styles);e.nodeChanged()});const u=Object(jO.a)(Ei,e=>e.id),f=Ai(c),m=({element:t})=>{const n=yi(e.getWin(),t);if(!n)return{};const{parsedFonts:o,fontsWithUsedUnsupportedFonts:i}=u(e,r,a,l),c=wi(n.fontFamily,[...a,...s,...l,...o,...$i(e)]),d=c?c.value:null;return{parsedFonts:o,fontsWithUsedUnsupportedFonts:i,[rn.z]:d}};p.a.canvas.addNodeChangeHandler(e,{getFormattingAttributes:m});p.a.canvas.addButton(e,rn.z,{renderControl:t=>{const{contextualNodeAttributes:n}=t,r=Object(d.a)(t,rS),{[rn.z]:a,parsedFonts:c=[],fontsWithUsedUnsupportedFonts:u=[]}=n;return Object(Ye.jsx)(oS,Object.assign({dropdownClassName:"mce-hubspot-control",use:"on-dark",fonts:u,defaultFonts:u,webfonts:l,parsedFonts:c,enableParsedFonts:o,customFonts:s,fetchBrandingCustomFonts:i&&_j(e.settings.apiClient),value:a,onChange:Ii(e),parsedFontText:f,unsupportedFonts:lr.i,isUngatedForBrandingFonts:Object(wt.c)(e,"AddBrandingFontsToRTE")},r))}})}var aS=n(1263),sS=n(1262),lS=n(2739),cS=n(1219);const uS=l()(dt.a).withConfig({displayName:"ToolbarDropdownButton__StyledCaret",componentId:"sc-1eumq7w-0"})(["color:",";"],an.EERIE);class dS extends i.Component{constructor(...e){super(...e);this.state={isOpen:!1};this.handleOpenChange=({target:{value:e}})=>{const{onOpenChange:t}=this.props;t&&t(e);this.setState({isOpen:e})}}render(){const{tooltip:e,active:t,buttonIconName:n,disabled:o}=this.props,r=Object(Ir.i)([...Object.keys(lS.a.propTypes),"data-test-id"],this.props),i=!this.state.isOpen&&void 0;return Object(Ye.jsx)(mn.a,{disabled:o,title:e,open:i,placement:"bottom",children:Object(Ye.jsx)(cS.a,Object.assign({},r,{disabled:o,Button:sS.a,animateOnMount:!0,buttonText:Object(Ye.jsx)(aS.a,{disabled:o,name:n}),caretRenderer:Object(Ye.jsx)(uS,{className:"m-x-1"}),onOpenChange:this.handleOpenChange,active:t}))})}}dS.defaultProps={menuWidth:150};dS.propTypes={tooltip:r.a.string.isRequired,buttonIconName:r.a.string.isRequired,active:r.a.bool,menuWidth:r.a.oneOfType([r.a.number,r.a.string]),onOpenChange:r.a.func,disabled:r.a.bool};var fS=Object(xj.a)(dS),pS=n(1222);const mS=l()(z.a).withConfig({displayName:"LineHeightMenu__StyledIcon",componentId:"sc-1vk039l-0"})(["vertical-align:middle;margin-bottom:2px;"]);class hS extends i.Component{constructor(e){super(e);this.handleClick=this.handleClick.bind(this)}handleClick({currentTarget:{value:e}}){this.props.onChange(e)}render(){const{options:e,lineHeight:t}=this.props,n=Object(Ir.g)(Object.keys(hS.propTypes),this.props);return Object(Ye.jsx)(fS,Object.assign({},n,{buttonIconName:"lineHeight",menuWidth:100,children:Object(Ye.jsx)(nC.a,{children:e.map(({text:{raw:e},value:n})=>Object(Ye.jsxs)(pS.a,{size:"xs",onClick:this.handleClick,value:n,children:[e,t===n&&Object(Ye.jsx)(mS,{size:14,name:"success",color:an.EERIE})]},n))})}))}}hS.propTypes={onChange:r.a.func.isRequired,options:r.a.array.isRequired,lineHeight:r.a.number};const gS=["contextualNodeAttributes"],bS=Object(Mr.a)(lr.k);function vS({target:e}){e.formatter.register(lr.h,{selector:"p,h1,h2,h3,h4,h5,h6,ul,ol,li,div",styles:{lineHeight:"%value"}})}function yS(e){e.on("PreInit",vS);const t=Object(Ee.d)(e.settings,lr.j.LINE_HEIGHTS,[]).map(e=>({text:{raw:e.toString()},value:e})),n=t=>{const n=aa(e,t);Object(Ie.b)(e,"tinymceFormatting",G.h,{value:n.toString(),method:"toolbar",version:"v2"})},o=Mi(e,lr.h,t),r=e=>{const t=o(e);return{[rn.I]:t}};p.a.canvas.addNodeChangeHandler(e,{getFormattingAttributes:r});p.a.canvas.addButton(e,rn.I,()=>({renderControl:e=>{const{contextualNodeAttributes:o}=e,r=Object(d.a)(e,gS),{[rn.I]:i}=o;return Object(Ye.jsx)(hS,Object.assign({"data-test-id":rn.I,tooltip:bS("lineHeightToolbarButton"),onChange:n,dropdownClassName:"mce-hubspot-menu",options:t,lineHeight:i},r))}}))}var CS=n(47);const OS=["className","options","showSearchbox","use"],xS=e=>Object(Ye.jsx)(bv.a,Object.assign({},e,{clearable:!1,icon:!1,inputClassName:"private-form__control--small"})),jS=e=>e[0]&&Object(mj.f)(e[0]),SS=e=>{if(!jS(e))return e;const t=[];e.forEach((n,o)=>{n.options.forEach(e=>t.push(e));o<e.length-1&&t.push({disabled:!0,isSpecial:!0,text:"",value:"",rawNode:Object(Ye.jsx)(dn.a,{className:"m-all-0"})})});return t};class wS extends i.PureComponent{constructor(e){super(e);this.computeButtonStyle=()=>{const{options:e,placeholder:t}=this.props,{buttonStyle:n}=this.state,o=document.getElementById(this._id);if(!o)return;const r=o.style.width;o.style.width="";const i=o.querySelector("[data-option-text]");if(!i)return;const a=i.innerHTML;let s=0;if(t){i.textContent=t;s=o.offsetWidth}this._flattenOptions(e).forEach(e=>{i.textContent=e.text;const t=o.offsetWidth;s=Math.max(s,t)});s=Math.ceil(s+1);0===s?this.setState({buttonStyle:null}):n&&n.width===s||this.setState({buttonStyle:{width:s}});o.style.width=r;i.innerHTML=a};this.state={buttonStyle:null};this._id=Object(gj.d)("text-toolbar-select-");this._flattenOptions=Object(CS.a)(SS)}componentDidMount(){this.computeButtonStyle()}componentDidUpdate(e){e.options!==this.props.options&&this.computeButtonStyle()}render(){const e=this.props,{className:t,options:n,showSearchbox:o,use:r}=e,i=Object(d.a)(e,OS),{buttonStyle:a}=this.state,s=this._flattenOptions(n);return Object(Ye.jsx)(vl.a,Object.assign({buttonSize:"sm",buttonStyle:a,buttonUse:"on-dark"===r?"tertiary-extra-light":"tertiary-light",className:Fg()("private-button--toolbar",t),id:this._id,minimumSearchCount:o?0:1/0,options:s,resultsClassName:"private-typeahead-results--toolbar",searchClassName:"private-search-control__wrapper--toolbar",SearchInput:xS},i))}}wS.propTypes={defaultValue:r.a.oneOfType([r.a.string,r.a.number]),options:r.a.arrayOf(mj.b).isRequired,placeholder:r.a.string,showSearchbox:r.a.bool.isRequired,use:r.a.oneOf(["","on-dark"]).isRequired,value:r.a.oneOfType([r.a.string,r.a.number]),className:r.a.string};wS.defaultProps={showSearchbox:!1,use:""};wS.displayName="UITextToolbarSelect";var TS=wS;const kS=["formats","value","onChange"],NS=e=>"RichTextLib.formatting.FormatSelect."+e;class ES extends i.Component{render(){const e=this.props,{formats:t,value:n,onChange:o}=e,r=Object(d.a)(e,kS);return Object(Ye.jsx)(TS,Object.assign({},r,{searchable:!1,options:t,onChange:o,placeholder:Nt.a.text(NS("placeholder")),value:n,optionRenderer:e=>Object(Ye.jsx)(mn.a,{disabled:!e.tooltip,placement:"right",title:e.tooltip,children:Object(Ye.jsx)(Mj,{disabled:e.disabled,title:e.text,children:e.text})})}))}}ES.propTypes={onChange:r.a.func.isRequired,value:r.a.string,formats:r.a.array.isRequired};var AS=Object(xj.a)(ES);class IS extends i.Component{constructor(e){super(e);this.handleFormatChange=e=>{const{editor:t,value:n}=this.props,o=e.target.value,r=()=>{t.execCommand("mceToggleFormat",!1,o)};t.undoManager.transact(()=>{"blockquote"===n&&t.formatter.remove("blockquote");"blockquote"===o?t.execCommand("hsblockquote"):"pre"===n?t.execCommand("hscodeblock",!1,{format:o,applyFormatDefault:r}):r();"pre"!==o&&"blockquote"!==o||t.execCommand("hsInsertNewline",!1,{target:t.dom.getParent(t.selection.getRng().startContainer,o)})});Object(Ie.b)(t,"tinymceFormatting",G.d,{method:"button",value:o})};this.formats=e.formats}render(){const{value:e}=this.props;return Object(Ye.jsx)(AS,{use:"on-dark",formats:this.formats,value:e,onChange:this.handleFormatChange,dropdownClassName:"mce-format-select"})}}IS.propTypes={editor:r.a.instanceOf(p.a.Editor).isRequired,formats:r.a.array.isRequired,value:r.a.string};const RS=["contextualNodeAttributes"],LS=["contextualNodeAttributes"],_S=Object(Mr.a)(lr.k),PS="clearStyles",MS={paragraph:["p"],headings:["h1","h2","h3","h4","h5","h6"],other:["blockquote","div","pre","code"]},DS=(e,t="blockquote")=>()=>{const n=e.selection.getNode();let o;const r=Di(e,n);r?o=r:Bi(n)&&(o=n);o?e.undoManager.transact(()=>{const n=e.selection.getBookmark();e.formatter.toggle(t,{},o);e.selection.moveToBookmark(n);e.selection.collapse()}):e.execCommand("mceToggleFormat",!1,t)};function BS(e){return Object.keys(MS).reduce((t,n)=>{const o=e.filter(e=>MS[n].indexOf(e.format)>-1).map(e=>({text:{raw:e.title},value:e.format,disabled:e.disabled,tooltip:e.tooltip}));t.length>0&&o.length&&(o[0].classes="new-section");return[...t,...o]},[])}function FS(e){for(let t=1;t<=6;t++)e.addShortcut("meta+"+t,"",["FormatBlock",!1,"h"+t]);e.addShortcut("meta+7","",["FormatBlock",!1,"p"]);e.addShortcut("meta+8","",["FormatBlock",!1,"div"]);e.addShortcut("meta+9","",["FormatBlock",!1,"address"])}function US(e){FS(e);e.addCommand("hsblockquote",DS(e));const t=BS(Object(Ee.d)(e.settings,lr.j.BLOCK_FORMATS,lr.c)).map(({text:{raw:e},value:t,disabled:n,tooltip:o})=>({text:_S("blockFormats."+e.split(" ").join("").toLowerCase()),value:t,disabled:n,tooltip:o}));p.a.canvas.addButton(e,rn.R,{renderControl:t=>{const n=Object(d.a)(t,RS);return Object(Ye.jsx)(mi.a,Object.assign({"data-test-id":"remove-format-button",iconName:"removeTextStyle",tooltip:_S(PS),onClick:()=>{e.execCommand("RemoveFormat")},selected:!1},n))}});const n=({element:n,parents:o})=>{if(!n)return{};const r=t.find(({value:t})=>e.formatter.match(t,{},n)),i=o?o.find(e=>"BLOCKQUOTE"===e.nodeName):null;let{value:a=null}=r||{};i&&(a="blockquote");return{[rn.j]:a}};p.a.canvas.addNodeChangeHandler(e,{getFormattingAttributes:n});p.a.canvas.addButton(e,rn.j,{renderControl:n=>{const{contextualNodeAttributes:o}=n,r=Object(d.a)(n,LS),{[rn.j]:i}=o;return Object(Ye.jsx)(IS,Object.assign({editor:e,value:i,formats:t},r))}})}class VS extends i.Component{constructor(e){super(e);this.getIsActive=()=>this.state.isActive||this.props.isActive;this.getIsDisabled=()=>this.state.isDisabled||this.props.disabled;this.onClick=()=>{this.getIsDisabled()||this.props.onClick(!this.getIsActive())};this.state={isActive:!1,isDisabled:!1};this.handleFormatChanged=this.handleFormatChanged.bind(this);this.handleNodeChange=this.handleNodeChange.bind(this)}componentDidMount(){const{editor:e,formatName:t,getInitialActive:n,nodesAffectedByInheritedStyles:o,shortCut:r}=this.props,i=n();this.state.isActive!==i&&this.setState({isActive:i});r&&e.shortcuts.add(r,"",this.onClick);o.length<=0&&e.on("FormatChanged:"+t,this.handleFormatChanged)}componentWillUnmount(){const{editor:e,formatName:t,shortCut:n}=this.props;e.off("FormatChanged:"+t,this.handleFormatChanged);n&&e.shortcuts.remove(n)}handleNodeChange(e){const t=ca(this.props.editor,this.props.nodesAffectedByInheritedStyles)?_i[this.props.formatName](e):this.props.editor.formatter.match(this.props.formatName);t!==this.state.isActive&&this.setState({isActive:t})}handleFormatChanged(e){const t=Object(Ir.i)(["isActive","isDisabled"],e);this.setState(Object.assign({},t))}render(){const e=Object(Ir.g)([...Object.keys(VS.propTypes),"onClick","disabled"],this.props);return Object(Ye.jsx)(mi.a,Object.assign({selected:this.getIsActive(),disabled:this.getIsDisabled(),onClick:this.onClick,name:this.props.formatName},e))}}VS.propTypes={editor:r.a.object.isRequired,formatName:r.a.string.isRequired,getInitialActive:r.a.func,isActive:r.a.bool,disabled:r.a.bool,nodesAffectedByInheritedStyles:r.a.array,onClick:r.a.func.isRequired,shortCut:r.a.string};VS.defaultProps={getInitialActive:()=>!1,nodesAffectedByInheritedStyles:[]};const HS=["contextualNodeAttributes","disabled"],qS=(e,t)=>{const n=(Object(Ee.d)(e.settings,lr.j.OVERRIDE_INHERITED_STYLES_CONFIG)||{})[t]||[],o=Pi[t],r=lr.d.filter(e=>!n.includes(e)).map(e=>e+" > span").join(",");if(!n.length)return;const i="underline"===t;e.formatter.register({[lr.g[t].on]:[{selector:n.join(","),styles:{[o.affectedStyles[0]]:"%value"},inline:"span",exact:i,split:!0,deep:!0,remove_similar:!0}],[lr.g[t].off]:[{selector:r,styles:{[o.affectedStyles[0]]:o.off},remove:"empty"}]})},$S=Object(Mr.a)(lr.k),zS=(e,t,n=[])=>o=>{ua(e,t,n,o)},WS=[{controlName:rn.k,iconName:"bold",formatName:"bold",tooltip:"tooltip.bold",getClickHandler:zS,shortCut:"meta+b"},{controlName:rn.H,iconName:"italic",formatName:"italic",tooltip:"tooltip.italic",getClickHandler:zS,shortCut:"meta+i"},{controlName:rn.eb,iconName:"underline",formatName:"underline",tooltip:"tooltip.underline",getClickHandler:zS,shortCut:"meta+u"},{controlName:rn.X,iconName:"strike",formatName:"strikethrough",tooltip:"tooltip.strikethrough",getClickHandler:zS},{controlName:rn.Z,iconName:"superscript",formatName:"superscript",tooltip:"tooltip.superscript",getClickHandler:zS},{controlName:rn.Y,iconName:"subscript",formatName:"subscript",tooltip:"tooltip.subscript",getClickHandler:zS},{controlName:rn.r,iconName:"code",formatName:"code",tooltip:"tooltip.codeformat",getClickHandler:zS}];function GS(e){const t=Object(Ee.d)(e.settings,lr.j.OVERRIDE_INHERITED_STYLES_CONFIG)||{},n=(n,o)=>ca(e,t[n])?_i[n](o):e.formatter.match(n),o=(t,n)=>{const o=qi(e);if(!o||!o.length||!["bold","italic"].includes(n))return t;return fa(e,o)},r=[];WS.forEach(({formatName:i,iconName:a,tooltip:s,getClickHandler:l,controlName:c,shortCut:u})=>{let f=!1;const m="FormatChanged:"+i,h=(t,n)=>{f=t;e.fire(m,Object.assign({isActive:t},n))};if(e.formatter){e.formatter.formatChanged(i,h);qS(e,i)}else e.on("init",()=>{e.formatter.formatChanged(i,h);qS(e,i)});const g=t[i];p.a.canvas.addButton(e,c,{renderControl:t=>{const{contextualNodeAttributes:n,disabled:r}=t,p=Object(d.a)(t,HS),{[c]:m}=n;return Object(Ye.jsx)(VS,Object.assign({editor:e,"data-test-id":"toggle-format-"+a,shortCut:u,formatName:i,iconName:a,tooltip:$S(s),onClick:l(e,i,g),getInitialActive:()=>f,nodesAffectedByInheritedStyles:g,isActive:m,disabled:o(r,i)},p))}});r.push(e=>({[c]:n(i,e)}))});const i=e=>r.reduce((t,n)=>Object.assign({},t,n(e)),{});p.a.canvas.addNodeChangeHandler(e,{getFormattingAttributes:i})}var KS=n(1264);const YS=["alignOptions","alignment","defaultAlignment","onChange"],XS="align",ZS=e=>`${XS}${e.charAt(0).toUpperCase()}${e.slice(1)}`,QS=e=>Object.keys(e).map(t=>({icon:ZS(e[t]),value:e[t]}));function JS(e){const{alignOptions:t,alignment:n,defaultAlignment:o,onChange:r}=e,a=Object(d.a)(e,YS),s=({currentTarget:{value:e}})=>{r(e)},l=Object(i.useMemo)(()=>QS(t),[t]);return Object(Ye.jsx)(KS.a,Object.assign({},a,{defaultValue:o,onChange:s,options:l,value:n}))}JS.propTypes={onChange:r.a.func.isRequired,defaultAlignment:r.a.string.isRequired,alignment:r.a.string,alignOptions:r.a.object.isRequired};class ew extends i.Component{constructor(e){super(e);this.handleFormatChange=this.handleFormatChange.bind(this);this.state={alignment:e.getlastAlign()}}componentDidMount(){this.props.editor.on(this.formatEvents.join(" "),this.handleFormatChange)}componentWillUnmount(){this.props.editor.off(this.formatEvents.join(" "),this.handleFormatChange)}handleFormatChange({format:e,isActive:t}){const{alignOptions:n}=this.props,o=Object.keys(n).find(t=>e.match(n[t])),r=n[o];t?this.setState({alignment:r}):this.state.alignment===r&&this.setState({alignment:n.LEFT})}get formatEvents(){return this.props.formats.map(e=>"FormatChanged:"+e)}render(){this.props.setlastAlign(this.state.alignment);return Object(Ye.jsx)(JS,Object.assign({},this.state,Object(Ir.g)(Object.keys(ew.propTypes),this.props),{tooltip:Nt.a.text(lr.k+".tooltip.align"),alignOptions:this.props.alignOptions}))}}ew.propTypes={editor:r.a.object.isRequired,alignOptions:r.a.shape({CENTER:r.a.string,LEFT:r.a.string,RIGHT:r.a.string,FULL:r.a.string}),formats:r.a.arrayOf(r.a.string).isRequired,setlastAlign:r.a.func.isRequired,getlastAlign:r.a.func.isRequired};const tw=["contextualNodeAttributes"],nw=Object(Ir.i)(["LEFT","CENTER","RIGHT","JUSTIFY"],zo.b),ow=e=>t=>{e.execCommand(lr.a[t])},rw=(e,t)=>{e.formatter.formatChanged(t.join(","),(t,{format:n})=>{e.fire("FormatChanged:"+n,{isActive:t,format:n})})};function iw(e){let t=nw.LEFT;const n=Object.keys(nw).map(e=>"align"+nw[e]);e.formatter?rw(e,n,t):e.on("init",()=>{rw(e,n,t)});p.a.canvas.addButton(e,rn.a,{renderControl:o=>{const r=Object(d.a)(o,tw);return Object(Ye.jsx)(ew,Object.assign({"data-test-id":rn.a,editor:e,formats:n,dropdownClassName:"mce-hubspot-menu",onChange:ow(e),getlastAlign:()=>t,setlastAlign:e=>t=e,defaultAlignment:nw.LEFT,alignOptions:nw},r))}})}var aw=n(1265),sw=n(2682),lw=n(520);const cw=["active","open","options","onButtonClick","placement","tooltip","value","splitButtonTestId","disabled"],uw=l()(lw.a).withConfig({displayName:"UITextToolbarSplitSelect__StyledButtonGroup",componentId:"vxo84t-0"})(["& > *[aria-disabled='true']{border-color:transparent !important;}"]);class dw extends i.Component{constructor(...e){super(...e);this.refCallback=e=>{this._popoverTarget=Object(oi.findDOMNode)(e)}}render(){const e=this.props,{active:t,open:n,options:o,onButtonClick:r,placement:i,tooltip:a,value:s,splitButtonTestId:l,disabled:c}=e,u=Object(d.a)(e,cw),f=o.find(({value:e})=>e===s),p=f?Object(Ye.jsx)(aS.a,{disabled:c,name:f.icon}):null,m={target:this._popoverTarget};return Object(Ye.jsx)(mn.a,{open:!n&&void 0,placement:i,title:a,disabled:c,children:Object(Ye.jsxs)(uw,{disabled:c,children:[Object(Ye.jsx)(hn.a,{"data-test-id":l,hovered:!!n||void 0,onClick:r,ref:this.refCallback,selected:t,disabled:c,children:p}),Object(Ye.jsx)(aw.a,Object.assign({open:n,options:o,popoverProps:m,value:s,disabled:c},u))]})})}}dw.propTypes=Object.assign({},aw.a.propTypes,{active:r.a.bool,onButtonClick:r.a.func,placement:mn.a.propTypes.placement,tooltip:mn.a.propTypes.title,splitButtonTestId:r.a.string});dw.defaultProps=Object.assign({},aw.a.defaultProps,{active:!1,placement:"bottom"});dw.displayName="UITextToolbarSplitSelectCore";const fw=Object(sw.a)(dw,["open","value"]);fw.displayName="UITextToolbarSplitSelect";var pw=fw;class mw extends i.Component{constructor(e){super(e);this.handleChange=this.handleChange.bind(this)}handleChange({target:{value:e}}){this.props.onListTypeChange(e)}render(){const e=Object(Ir.g)(Object.keys(mw.propTypes),this.props);return Object(Ye.jsx)(pw,Object.assign({},e,{onButtonClick:this.props.onClick,onChange:this.handleChange}))}}mw.propTypes={onListTypeChange:r.a.func.isRequired,onClick:r.a.func.isRequired};const hw=["contextualNodeAttributes"],gw=["contextualNodeAttributes"],bw=Object(Mr.a)(lr.k),vw=["LI","UL","OL","DL"],yw=(e,t,n,o=!1)=>r=>{e.undoManager.transact(()=>{const{dom:i,selection:a}=e,s="UL"===t?"InsertUnorderedList":"InsertOrderedList",l=r===n?null:r;let c=i.getParent(a.getNode(),"ul,ol");!o&&c&&c.nodeName===t||e.execCommand(s);c=i.getParent(a.getNode(),"ul,ol");if(c){i.setStyle(c,"listStyleType",l);c.removeAttribute("data-mce-style")}e.focus()})},Cw=[{controlName:rn.n,tooltip:"tooltip.bulletlist",nodeName:"UL",styleType:{icon:"bulletList",value:"default"}},{controlName:rn.N,tooltip:"tooltip.numlist",nodeName:"OL",styleType:{icon:"numberList",value:"default"}}],Ow=[{controlName:rn.m,tooltip:"tooltip.bulletlist",nodeName:"UL",options:[{icon:"bulletList",value:"default"},{icon:"bulletCircle",value:"circle"},{icon:"bulletSquare",value:"square"}]},{controlName:rn.M,tooltip:"tooltip.numlist",nodeName:"OL",options:[{icon:"numberList",value:"default"},{icon:"bulletUpperRoman",value:"upper-roman"},{icon:"bulletUpperAlpha",value:"upper-alpha"},{icon:"bulletLowerRoman",value:"lower-roman"},{icon:"bulletLowerAlpha",value:"lower-alpha"},{icon:"bulletLowerGreek",value:"lower-greek"}]}],xw=e=>{const t=e.selection.getSelectedBlocks();let n=!1;for(let e=0,o=t.length;!n&&e<o;e++){const o=t[e].nodeName;n=o===vw[0]&&Yi(t[e])||vw.indexOf(o)>0}e.fire("FormatChanged:indent",{isDisabled:n})};function jw(e){const t=[];Ow.forEach(({controlName:n,tooltip:o,nodeName:r,options:i})=>{const a=i[0].value,s=yw(e,r,a,!0);p.a.canvas.addButton(e,n,{renderControl:t=>{const{contextualNodeAttributes:l}=t,c=Object(d.a)(t,hw),{[n]:{isActive:u,listStyleType:f=a}={}}=l;return Object(Ye.jsx)(mw,Object.assign({dropdownClassName:"mce-hubspot-menu",active:u,value:f,onClick:()=>s(f),splitButtonTestId:n,tooltip:bw(o),onListTypeChange:yw(e,r,a),options:i},c))}});t.push(({parents:t,selectionChange:o})=>{if(!t)return{};o&&xw(e);const i=t.find(e=>e.nodeName===r),s={isActive:!1};if(i){s.isActive=!0;s.listStyleType=e.dom.getStyle(i,"listStyleType")||a}return{[n]:s}})});const n=Object(Ir.b)((e,t)=>!!t.parents&&!!t.parents.find(t=>t.nodeName===e));Cw.forEach(({controlName:o,tooltip:r,nodeName:i,styleType:a})=>{const{icon:s,value:l}=a,c=yw(e,i,l,!0);p.a.canvas.addButton(e,o,{renderControl:e=>{const{contextualNodeAttributes:t}=e,n=Object(d.a)(e,gw),{[o]:i}=t;return Object(Ye.jsx)(mi.a,Object.assign({"data-test-id":o,iconName:s,tooltip:bw(r),onClick:()=>c(l),selected:i},n))}});t.push(e=>({[o]:n(i,e)}))});const o=e=>t.reduce((t,n)=>Object.assign({},t,n(e)),{});p.a.canvas.addNodeChangeHandler(e,{getFormattingAttributes:o})}const Sw=["contextualNodeAttributes"],ww=Object(Mr.a)(lr.k),Tw=e=>()=>{e.execCommand("Outdent")},kw=e=>()=>{e.execCommand("Indent")},Nw=[{controlName:rn.O,iconName:"outdent",formatName:"outdent",tooltip:"tooltip.outdent",getClickHandler:Tw},{controlName:rn.G,iconName:"indent",formatName:"indent",tooltip:"tooltip.indent",getClickHandler:kw}];function Ew(e){Nw.forEach(({controlName:t,iconName:n,formatName:o,tooltip:r,getClickHandler:i})=>{p.a.canvas.addButton(e,t,{renderControl:a=>{const s=Object(d.a)(a,Sw);return Object(Ye.jsx)(VS,Object.assign({"data-test-id":t,editor:e,formatName:o,iconName:n,tooltip:ww(r),onClick:i(e),selected:!1},s))}})})}function Aw(e){e.addCommand("hscodeblock",(t,{format:n,applyFormatDefault:o})=>{const r=e.selection.getNode(),i=e.selection.getRng();let a,s=e.dom.getParent(r,"pre");if(!s){s=e.dom.getParent(i.startContainer,"pre");i.setStartBefore(s);e.selection.setRng(i);o();return}if(r===s&&r.firstChild===i.startContainer&&r.lastChild===i.endContainer||r!==s&&e.selection.isCollapsed()&&Ji(r,s)){o();return}if(i.collapsed){const t=e.dom.getParent(i.startContainer,'strong,em,a,span:not([data-mce-type="bookmark"])',s);if(t)e.selection.select(t);else{a=e.selection.getBookmark();const{previousSibling:t,nextSibling:n}=e.dom.get(a.id+"_start");if(!t||"BR"!==t.nodeName||!n||"BR"!==n.nodeName){e.selection.moveToBookmark(a);e.selection.select(s);o();return}(Qi(n,s)||n.nextSibling&&"#text"===n.nextSibling.nodeName&&""===n.nextSibling.nodeValue&&Qi(n.nextSibling,s))&&e.dom.remove(t)}}a=a||e.selection.getBookmark();const l={getStart:()=>e.dom.get(a.id+"_start"),getEnd:()=>e.dom.get(a.id+"_end")||e.dom.get(a.id+"_start")},c=l.getStart();let u=l.getEnd();const d=s.cloneNode(!0),f=ma(e,i,c,u),p=ma(e,i,u,s.lastChild);pa(e,i,c,s.lastChild);const m=e.dom.create(n,{},f||Ae.a);e.dom.insertAfter(m,s);(!s.childNodes.length||1===s.childNodes.length&&"#text"===s.childNodes[0].nodeName&&""===s.childNodes[0].nodeValue)&&s.parentNode.removeChild(s);if(""!==p&&"&nbsp;"!==p){e.dom.insertAfter(d,m);u=l.getEnd();u.nextSibling&&"#text"===u.nextSibling.nodeName&&""===u.nextSibling.nodeValue&&(u=u.nextSibling);u.nextSibling&&"BR"===u.nextSibling.nodeName&&(u=u.nextSibling);pa(e,i,d.firstChild,u)}e.selection.setCursorLocation(m,m.childNodes.length)})}const Iw=13,Rw=3,Lw="#text";function _w(e,t,n){const o=e.selection.getBookmark(),r=e.dom.get(o.id+"_start");if(r.nextSibling&&r.nextSibling.nodeName===Lw&&r.nextSibling.nodeValue){e.selection.moveToBookmark(o);return}let i=r,a=0;for(;a<Rw&&i.previousSibling&&"BR"===i.previousSibling.nodeName;){i=i.previousSibling;a++}if(a!==Rw)e.selection.moveToBookmark(o);else{let o;for(;i!==r;){o=i.nextSibling;e.dom.remove(i);i=o}const a=e.dom.getParent(r,'strong,em,span:not([data-mce-type="bookmark"])',t);if(a){const t=e.dom.create("br");e.dom.insertAfter(t,a);i=t}const s=e.selection.getRng();pa(e,s,i,t.lastChild);const l=e.dom.create("p",{},Ae.a);e.dom.insertAfter(l,t);e.selection.setCursorLocation(l,l.childNodes.length);r.parentNode&&r.parentNode.removeChild(r);n.preventDefault();Object(Ie.b)(e,"tinymceKeyboardEscape",G.C,{format:"codeblock"})}}function Pw(e,t,n){const o=e.selection.getRng(),r=e.dom.getParent(o.endContainer,"p,h1,h2,h3,h4,h5,h6",t);let i=r,a=0;for(;a<Rw&&i&&ea(i);){a++;a<Rw&&(i=i.previousSibling)}if(a===Rw){let t;for(;i!==r;){t=i.nextSibling;e.dom.remove(i);i=t}e.selection.select(r);e.execCommand("hsblockquote");e.selection.setCursorLocation(r);n.preventDefault();Object(Ie.b)(e,"tinymceKeyboardEscape",G.C,{format:"blockquote"})}}function Mw(e,t,n){const o=e.selection.getBookmark(),r=e.dom.get(o.id+"_start"),i=e.dom.getParent(r,"p",t);e.selection.moveToBookmark(o);let a=i,s=1;for(;Object(Ae.i)(a)&&s<Rw&&a.previousSibling&&Object(Ae.i)(a.previousSibling)&&!Zi(a.previousSibling,t);){a=a.previousSibling;s++}if(s!==Rw)e.selection.moveToBookmark(o);else{let o;for(;a!==i;){o=a.nextSibling;e.dom.remove(a);a=o}const r=e.dom.create("p",{},Ae.a);e.dom.insertAfter(r,t);e.selection.setCursorLocation(r,r.childNodes.length);i.parentNode&&i.parentNode.removeChild(i);n.preventDefault();Object(Ie.b)(e,"tinymceKeyboardEscape",G.C,{format:"callout"})}}function Dw(e){e.on("init",()=>{e.on("KeyDown",t=>{if(t.keyCode!==Iw||!e.selection.isCollapsed())return;const n=e.dom.getParent(e.selection.getNode(),"center",e.getBody());if(!n)return;const o=e.selection.getRng(),r=0===o.startOffset,i=o.endOffset===o.endContainer.childNodes.length;if(!r&&!i)return;const a=n.parentNode===e.getBody()?e.dom.create("p",{},Ae.a):e.dom.create("br");if(r)n.parentNode.insertBefore(a,n);else if(i){e.dom.insertAfter(a,n);e.selection.select(a);e.selection.collapse(!0)}t.preventDefault()},!0)})}function Bw(e){const t=Object(Ee.d)(e.settings,lr.j.KEYBOARD_ESCAPE_FORMATS)||[];if(!t.length)return;t.includes("center")&&Dw(e);const n=t.includes("pre"),o=t.includes("blockquote"),r=t.includes(Hr),i=t.join(",");(n||o||r)&&e.on("init",()=>{e.on("KeyDown",t=>{if(t.keyCode!==Iw||!e.selection.isCollapsed())return;const a=e.dom.getParent(e.selection.getNode(),i,e.getBody());if(!a)return;const s=e.selection.getBookmark(),l=e.dom.get(s.id+"_start"),c=l.nextSibling&&Qi(l.nextSibling,a);l.parentNode.removeChild(l);if(c){n&&"PRE"===a.nodeName&&_w(e,a,t);o&&"BLOCKQUOTE"===a.nodeName&&Pw(e,a,t);r&&e.dom.is(a,Hr)&&Mw(e,a,t)}})})}function Fw(e){yS(e);iS(e);Rj(e);US(e);GS(e);iw(e);jw(e);Ew(e);Aw(e);Bw(e)}const Uw=B.u;p.a.PluginManager.add(Uw,Fw);var Vw=n(2617),Hw=n(2816),qw=n(1252);let $w={};const zw=e=>{$w=Object.assign({},$w,e)},Ww=()=>{$w={converter:e=>e,type:"unknown paste type",pasteSource:"unknown paste source",pasteContent:"unknown paste content"}};function Gw(e){Ww();const t=eb(e.getParam("apiClient")),n=Object.assign({},Object(Hw.a)(e));e.on("paste",e=>{Ww();zw(Object(Hw.b)(e,n));const{didTransform:t,transformedContent:o,composedTransformConverter:r}=Object(Hw.c)($w);if(t){const{pasteContent:t}=$w;e.clipboardData.getData=e=>"text/html"!==e?t:o;zw({converter:r})}});e.on("PastePreProcess",o=>{const{allowEmbedUrlPasting:r}=n,{converter:i,embedData:a}=$w;if(r&&a){o.preventDefault();o.stopPropagation();e.fire("uploadProgress",{percentLoaded:10});t(a).then(t=>{e.fire("uploadComplete");Kg(e,t,"paste")}).catch(t=>{const{url:n}=a;console.error("Could not generate embed code from url: "+n,t);e.fire("uploadFailure");e.insertContent(n)})}else o.content=i(o.content)});e.on("PastePostProcess",t=>{const{uploadedFileAccess:o}=n,{pasteSource:r}=$w,{CONVERT_GOOGLE_TO_HTML:i}=Vw.a,a=Object(q.d)(e),s=!!Object(q.e)(e,H.d.STRIP_IMAGE_BLOBS);(a||s)&&Array.from(t.node.querySelectorAll("img")).forEach(e=>{e.setAttribute("data-mce-paste","true")});if(r===i&&!s){const{node:n}=t,{apiClient:i}=e.settings;Uo(n,i,r,o).then(t=>{Object(qw.b)(e,t)}).catch(()=>{o||setTimeout(()=>{throw new Error("[uploadedFileAccess] must be provided to upload images pasted from Google Docs")})})}})}const Kw=B.I;p.a.PluginManager.add(Kw,Gw);const Yw=e=>"RichTextLib.rss."+e,Xw={dropdownClassName:r.a.string,onClose:r.a.func.isRequired,onTokenSelect:r.a.func.isRequired,options:r.a.array.isRequired,property:r.a.shape({property:r.a.string}),type:r.a.string.isRequired},Zw="RSSPopoverBody";function Qw(e){const{dropdownClassName:t,onClose:n,onTokenSelect:o,options:r,property:i,type:a}=e,s=e=>{const t=e.target.value,n=r.find(({value:e})=>e===t);o(t,n.html)},l=e=>{e.key===hi.b.ESCAPE&&n()};let c;if(i){const e=r.find(e=>e.value===i.property);c=e?e.value:void 0}return Object(Ye.jsxs)("div",{className:"small-popover-body p-x-6 p-y-5",onKeyDown:l,tabIndex:"-1",children:[Object(Ye.jsx)(Xs.a,{children:Object(Ye.jsx)(ft.a,{message:Yw(a)})}),Object(Ye.jsx)(Hs.a,{label:Object(Ye.jsx)(ft.a,{message:Yw("formLabel")}),children:Object(Ye.jsx)(vl.a,{dropdownClassName:t,onChange:s,options:r,placeholder:Object(Ye.jsx)(ft.a,{message:Yw("selectPlaceholder")}),value:c})})]})}Qw.propTypes=Xw;Qw.displayName=Zw;var Jw=Qw,eT=n(1295);const tT=Object(Mr.a)("TinymcePlugins.hsrsstokens.templates"),nT=Object(Mr.a)("TinymcePlugins.hsrsstokens.tokenTypes"),oT=new RegExp(`\\{\\{\\s*(${eT.a})\\.(\\w+)(?:\\.(\\w+))?\\s*}}`,"g"),rT=e=>`{{ ${eT.a}.${e} }}`,iT=e=>{const t=e.selection.getNode();t&&t.hasAttribute("data-mce-rss-link")&&e.dom.remove(t)},aT={shared:[{key:"title",generateHtml:()=>`<a data-mce-rss-link="1" href="${rT("url")}">${rT("title")}</a>`},{key:"author"},{key:"publish_date"},{key:"summary"},{key:"learn_more",generateHtml:()=>`<a data-mce-rss-link="1" data-mce-property-category="${eT.a}" data-mce-property-name="learn_more" href="${rT("url")}">${tT("learnMore")} &raquo;</a>`}],rss:[{key:"comment_url",generateHtml:()=>`<a data-mce-rss-link="1" data-mce-property-category="${eT.a}" data-mce-property-name="comment_url" ref="${rT("comment_url")}">${tT("comment")} &raquo;</a>`},{key:"featured_image",helpTextKey:"disabled.featured_image",disabled:!0}],blog:[{key:"featured_image"}]},sT=({property:e})=>{const t=t=>{t.setAttribute("data-mce-property-category",eT.a);t.setAttribute("data-mce-property-name",e);t.setAttribute("data-mce-hubspot-object","true")};return Object(hf.j)(nT(e),"",t).outerHTML},lT={dropdownClassName:r.a.string,editor:r.a.object.isRequired,onOpenComplete:r.a.func,options:r.a.array.isRequired},cT="RSSTokenPopoverManager",uT=e=>{const{dropdownClassName:t,editor:n,onOpenComplete:o,options:r}=e,[a,s]=Object(i.useState)(hi.e.INSERT),[l,c]=Object(i.useState)(),{inlineTarget:u,setInlineTarget:d,initInlineTarget:f}=Object(ef.a)(n,null),p=Object(i.useRef)(u);Object(i.useEffect)(()=>{p.current=u});const m=Object(i.useCallback)(({restoreSelection:e}={})=>{if(p.current){d(null,{restoreSelection:e});c()}},[d]);Object(i.useEffect)(()=>{const e=()=>{if(p.current)m({restoreSelection:!0});else{s(hi.e.INSERT);f()}};n.on("OpenRSSPopover",e);return()=>n.off("OpenRSSPopover",e)},[n,m,f]);Object(i.useEffect)(()=>{const e=({element:e})=>{if(e!==p.current)if(Object(hf.h)(n,e)){c(Object(hf.e)(e));s(hi.e.EDIT);d(e)}else m()};n.on("NodeChange",e);return()=>{n.off("NodeChange",e)}},[n,m,d]);const h=(e,t)=>{m();iT(n);t?n.insertContent(t):n.insertContent(rT(e));Object(Ie.b)(n,"tinymceInsertRssToken",G.Q,{version:"v2",tokenName:e})};return Object(Ye.jsx)(Re.a,{animateOnToggle:!1,onRemove:m,renderContent:()=>Object(Ye.jsx)(Jw,{property:l,dropdownClassName:t,onClose:m,onTokenSelect:h,options:r,type:a}),editor:n,onOpenComplete:o,open:!!u,placement:"bottom",target:u})};uT.propTypes=lT;uT.displayName=cT;var dT=uT;const fT=["contextualNodeAttributes"],pT=Object(Mr.a)("TinymcePlugins.hsrsstokens.tokenTypes"),mT=Object(Mr.a)("TinymcePlugins.hsrsstokens"),hT=(e,t)=>{const n=()=>{Object(Ie.b)(e,"tinymceEdit",G.bb,{version:"v2"})},o=[...aT.shared,...aT[e.settings.showRssTokens.tokenKey]].map(({disabled:e=!1,key:t,helpTextKey:n,generateHtml:o=null})=>{const r={text:pT(t),value:t,disabled:e};o&&(r.html=o());n&&(r.help=pT(n));return r});p.a.canvas.addMenuItem(e,rn.T,{text:mT("menuItem"),onClick:()=>{e.fire("OpenRSSPopover")}});const r=({element:t})=>!!t&&Object(hf.h)(e,t),i=({isActive:t})=>{t||e.fire("OpenRSSPopover")};p.a.canvas.addButton(e,rn.T,{renderControl:t=>{const n=Object(d.a)(t,fT);return Object(Ye.jsx)(pi,Object.assign({ButtonComponent:mi.a,editor:e,iconName:"socialRss",isActiveHandler:r,onClick:i,tooltip:mT("tooltip")},n))}});p.a.canvas.addPopover(e,t,{renderPopover:t=>Object(Ye.jsx)(dT,Object.assign({dropdownClassName:"mce-hubspot-menu",editor:e,onOpenComplete:n,options:o},t))})},gT=B.L;function bT(e){const t=e=>{const t=e.getAttribute("data-mce-property-name");return document.createTextNode(rT(t))};hT(e,gT);Object(hf.a)(e,[],{},[{TOKEN_PATTERN:oT,USES_DEFAULT:!1}],sT,t)}p.a.PluginManager.add(gT,bT);const vT=["primary_font","primary_font_color","secondary_font_color","body_color"],yT=()=>Object(Ir.h)(["hubspot","ContentEditorUI","app","settings"],window),CT=e=>{const t=[];vT.forEach(n=>{const o=e.get(n);o&&t.push({token:n,value:o,tokenRegex:new RegExp(`(style="[^"]{0,})({{\\s*?${n}\\s*?}})([^"]{0,}")`,"i"),valueRegex:new RegExp(`(style="[^"]{0,})(${o})([^"]{0,}")`,"i")})});return t},OT=e=>t=>{let{content:n}=t;e.forEach(e=>{n=n.replace(e.tokenRegex,`$1${e.value}$3`)});t.content=n},xT=e=>t=>{let{content:n}=t;e.forEach(e=>{n=n.replace(e.valueRegex,`$1{{${e.token}}}$3`)});t.content=n};function jT(e){const t=yT(),n=t?CT(t):[];e.on("BeforeSetContent",OT(n));e.on("GetContent",xT(n))}const ST=B.M;p.a.PluginManager.add(ST,jT);const wT=["BLOCKQUOTE","PRE","TD"],TT=["TABLE","BLOCKQUOTE","PRE"],kT=e=>{let t=e.nextSibling;for(;t;){if("#text"===t.nodeName){if(t.nodeValue)break}else if("function"==typeof t.getAttribute&&!t.getAttribute(Ae.b)&&"BR"!==t.nodeName)break;t=t.nextSibling}return!t},NT=(e,t)=>{const n=e.getBody();let o=t;for(;o!==n;){if(!kT(o)){o=null;break}if(wT.includes(o.parentNode.nodeName)||o.parentNode===n)break;o=o.parentNode}return o};function ET(e){e.addCommand("hsInsertNewline",(t,{target:n})=>{if(!n)return;const o=TT.includes(n.nodeName),r=NT(e,n);if(o||r){const t=e.dom.create("p",{},Ae.a);e.dom.insertAfter(t,o?n:r)}})}const AT=B.G;p.a.PluginManager.add(AT,ET);const IT=8,RT=13,LT=["P","H1","H2","H3","H4","H5","H6","DIV","PRE","BR"],_T=(e,t,n)=>{const o=t.previousSibling;if(o){e.undoManager.transact(()=>{const n=t.innerHTML;e.dom.remove(t);e.selection.setCursorLocation(o,o.childNodes.length);o.lastChild&&!LT.includes(o.lastChild.nodeName)&&e.selection.setContent("<br>");const r=e.selection.getBookmark();e.selection.setContent(n);e.selection.moveToBookmark(r)});n.preventDefault();n.stopImmediatePropagation()}},PT=(e,t,n)=>{const o=t.startContainer;let r=o.childNodes[t.startOffset];if("BR"!==r.nodeName)return;const i=e.dom.getParents(o,"ul,ol",e.getBody());if(!i)return;const a=i[i.length-1],s=e.dom.create(e.settings.forced_root_block||"p",{},Ae.a);e.undoManager.transact(()=>{if(!Qi(o,a)){const n=t.cloneRange();let r;e.dom.getParents(o,"li",a).forEach(e=>{r||(r=e.nextSibling)});n.setStartBefore(r);n.setEndAfter(a);const i=n.extractContents();let s=i.firstChild.firstChild,l=1===s.childNodes.length&&["UL","OL"].includes(s.firstChild.nodeName);for(;l;){s.setAttribute("style","list-style-type: none;");s=s.firstChild.firstChild;l=s&&1===s.childNodes.length&&["UL","OL"].includes(s.firstChild.nodeName)}e.dom.insertAfter(i,a)}Yi(o)&&1===o.childNodes.length&&(r=o);e.dom.remove(r);e.dom.insertAfter(s,a);a.hasChildNodes()||e.dom.remove(a);e.selection.setCursorLocation(s,0)});n.stopImmediatePropagation();n.preventDefault()},MT=(e,t,n)=>{e.undoManager.transact(()=>{let n;const o=e.selection.getBookmark();n=t.childNodes.length>1||"P"!==t.firstChild.nodeName?e.dom.create("p",{},t.innerHTML):t.firstChild.cloneNode(!0);t.innerHTML="";t.appendChild(n);const r="UL"===e.dom.getParent(t,"ul,ol").nodeName?"InsertUnorderedList":"InsertOrderedList";e.execCommand(r);const i=e.dom.get(o.id+"_start").parentNode;i.nextSibling&&"BR"===i.nextSibling.nodeName&&e.dom.remove(i.nextSibling);e.selection.moveToBookmark(o)});n.stopImmediatePropagation();n.preventDefault()};function DT(e){e.on("KeyUp",t=>{if(t.keyCode!==RT||!e.selection.isCollapsed())return;const n=Di(e,e.selection.getNode());if(!n)return;const o=n.previousSibling;o&&o.innerHTML===Ae.a&&(o.innerHTML="<br>");n.innerHTML===Ae.a&&(n.innerHTML="<br>")},!0);e.on("KeyDown",t=>{if(t.keyCode!==IT||!e.selection.isCollapsed())return;const n=Di(e,e.selection.getNode());if(!n)return;const o=e.selection.getRng(),r=o.startContainer;if(0===o.startOffset&&Zi(r,n)){const o=$r(e,n);o&&Zi(r,o)?MT(e,n,t):_T(e,n,t)}else n===r&&r.hasChildNodes()&&o.startOffset===r.childNodes.length-1&&PT(e,o,t)},!0)}const BT=B.C;p.a.PluginManager.add(BT,DT);const FT=e=>"object"==typeof e&&"TABLE"===e.nodeName,UT=(e,t)=>Math.round(e/t*100);function VT(e,t){const n=t||e.selection.getNode();if(!n)return null;const o=e.getBody();return e.dom.getParent(n,e=>o.contains(e)&&FT(e))}function HT(e,t){const n=e.dom.select("td[data-mce-selected],th[data-mce-selected]");if(n.length)return n;const o=t||e.selection.getNode();if(!o)return[];if("TD"===o.nodeName||"TH"===o.nodeName)return[o];const r=e.dom.getParent(o,"td,th");return r?[r]:[]}function qT(e,t,n){if(!e||!e.length)return;const o=t(e[0]);for(let r=0;r<e.length;r++){if(o!==t(e[r]))return n}return o}function $T(e,t){let n=Sr.find(n=>e.formatter.matchNode(t,"valign"+n));if(!n){const e=getComputedStyle(t).verticalAlign;Sr.includes(e)&&(n=e)}return n}function zT(e,t){let n=wr.find(n=>e.formatter.matchNode(t,"align"+n));if(!n){const e=getComputedStyle(t),o="ltr"===e.direction;let r=e.textAlign;"start"===r?r=o?"left":"right":"end"===r&&(r=o?"right":"left");wr.includes(r)&&(n=r)}return n}function WT(e,t,n=""){return e&&e.style?e.style.getPropertyValue(t)||n:""}function GT(e,t){return WT(e,t)||getComputedStyle(e).getPropertyValue(t)}function KT(e){const t=e.parentElement;return t&&"DIV"===t.tagName&&"true"===t.dataset.hsResponsiveTable&&"auto"===WT(t,"overflow-x")}function YT(e,t){const{[kr.USE_ALIGNMENT_CLASSES]:n}=Object(Ee.f)(e,Tr,{});let o="";const r=KT(t),i=r?t.parentNode:t;if(n)o=Object.values(jr).find(t=>e.dom.hasClass(i,t))||jr[zo.b.NONE];else{let t;t=r?["left","right"].includes(WT(i,"float"))?"align"+WT(i,"float"):"auto"===WT(i,"margin-left")&&"auto"===WT(i,"margin-right")?"aligncenter":"alignfull":["alignleft","aligncenter","alignright"].find(t=>e.formatter.matchNode(i,t))||"alignfull";o=Er[t]}return o}function XT(e,t){let n=e.parentNode;for(;n&&n.nodeName!==t;)n=n.parentNode;return n}function ZT(e){return XT(e,"TABLE")}function QT(e){return XT(e,"TR")}const JT="SPANNED",ek="HOLE";function tk(e){const t=[...e.querySelectorAll("tr")].filter(t=>ZT(t)===e).map(e=>[...e.querySelectorAll("td,th")].filter(t=>QT(t)===e)),n=[];t.forEach((e,t)=>{let o=0,r=n[t];Array.isArray(r)||(r=n[t]=[]);for(;o<r.length&&r[o]!==ek;)o++;e.forEach(e=>{const r=e.getAttribute("colspan")?parseInt(e.getAttribute("colspan"),10):1,i=e.getAttribute("rowspan")?parseInt(e.getAttribute("rowspan"),10):1;for(let a=0;a<i;a++){const i=t+a;let s=n[i];Array.isArray(s)||(s=n[i]=[]);for(let t=0;t<r;t++){let n=o+t;const r=0===a&&0===t?e:JT;for(;n<s.length&&s[n]!==ek;)n++;for(;n>s.length;)s.push(ek);s[n]===ek?s[n]=r:s.push(r)}}o+=r})});return n}function nk(e){const t=new Map;for(let n=0;n<e.length;n++){const o=e[n];for(let e=0;e<o.length;e++){const r=o[e];!r||"TD"!==r.nodeName&&"TH"!==r.nodeName||t.set(r,[n,e])}}return t}function ok(e){const t=new Map,n=[],o=[];e.forEach(e=>{const r=ZT(e);if(!t.has(r)){const e=nk(tk(r));t.set(r,{cellLookup:e,tableColumns:{},tableRows:{}})}const{cellLookup:i,tableColumns:a,tableRows:s}=t.get(r),[l,c]=i.get(e);if(!s[l]){const e=[...i].filter(([e,t])=>t[0]===l).map(([e])=>e);s[l]=e;o.push(e)}if(!a[c]){const e=[...i].filter(([e,t])=>t[1]===c).map(([e])=>e);a[c]=e;n.push(e)}});return{columns:n,rows:o}}function rk(e){const t=WT(e,"width");return{width:ak(t)?t:e.offsetWidth+"px",float:WT(e,"float"),"margin-left":WT(e,"margin-left"),"margin-right":WT(e,"margin-right")}}function ik(e){return{"margin-top":WT(e,"margin-top"),"margin-bottom":WT(e,"margin-bottom"),"margin-left":WT(e,"margin-left"),"margin-right":WT(e,"margin-right")}}function ak(e){return"string"==typeof e&&e.length>1&&"%"===e[e.length-1]}function sk(e,t,n){const o=Object.values(jr).find(n=>e.dom.hasClass(t,n))||jr[zo.b.NONE];n.classList.add(o);Object.values(jr).forEach(n=>{e.dom.removeClass(t,n)})}function lk(e,t){if(KT(t))return;const{[kr.USE_ALIGNMENT_CLASSES]:n}=Object(Ee.f)(e,Tr,{}),o=e.getParam("useTableContextualToolbar");e.undoManager.transact(()=>{const r=document.createElement("div");r.dataset.hsResponsiveTable="true";const i=WT(t,"width");let a={"overflow-x":"auto","max-width":"100%",width:i};o&&(a=Object.assign({},a,ik(t)));n||(a=Object.assign({},a,rk(t)));e.dom.setStyles(r,a);const s=Object.assign({},Nr[zo.b.NONE]);ak(i)&&(s.width="100%");if(o){s["margin-top"]=null;s["margin-bottom"]=null}e.dom.setStyles(t,s);n&&sk(e,t,r);e.dom.insertAfter(r,t);e.dom.remove(t);r.appendChild(t);e.selection.select(t)})}function ck(e,t){if(!KT(t))return;const{[kr.USE_ALIGNMENT_CLASSES]:n}=Object(Ee.f)(e,Tr,{}),o=e.getParam("useTableContextualToolbar");e.undoManager.transact(()=>{const r=t.parentElement,i=t.cloneNode(!0);n&&sk(e,r,i);const a=Object.assign({},rk(r),o?ik(r):{});e.dom.setStyles(i,a);e.dom.insertAfter(i,r);e.dom.remove(r);e.selection.select(i)})}var uk=n(1274);const dk=Object(uo.a)(Ie.b,400),fk=(e,t)=>{dk(e,"tinymceEditTable",G.B,{version:"contextualToolbar",editType:t})};function pk(e,t){function n(e){return t?t.getAttribute(e):""}function o(n){const o=e.dom.select("td,th",t);let r;for(let e=0;e<o.length;e++){const t=o[e]&&o[e].style?o[e].style[n]:null;r||(r=t);if(r!==t)return""}return r}const r=KT(t),i=r?WT(t.parentNode,"width"):WT(t,"width")||n("width")||t.offsetWidth,a=WT(t,"height")||n("height")||t.offsetHeight,s=n("data-mce-cell-padding")||n("cellpadding")||o("padding")||"0",l=n("data-mce-border")||n("border")||WT(t,"borderWidth")||"0",c=n("data-mce-border-color")||WT(t,"border-color"),u=WT(t,"border-style")||"solid",d=!!e.dom.select("caption",t)[0],f=YT(e,t),p=e.dom.serializeStyle(e.dom.parseStyle(n("style")));return{tableWidth:i,tablePixelWidth:t.offsetWidth,tableHeight:a,dimensions:{width:i,height:a},alignment:f,tableCellPadding:parseInt(s,10),tableBorderWidth:parseInt(l,10),borderColor:c?{color:e.dom.styles.toHex(c),alpha:100}:c,tableBorderStyle:u,tableCaption:d,tableIsResponsive:r,tableStyle:p,margin:Ca(e,r?t.parentNode:t)}}function mk(e,t=[]){const n=qT(t,e=>WT(e,"background-color"),""),o=qT(t,e=>WT(e,"border-color"),""),r=qT(t,e=>WT(e,"border-width","0"),0),i=qT(t,e=>WT(e,"border-style","none"),"none"),a=qT(t,t=>zT(e,t),null),s=qT(t,t=>$T(e,t),"middle"),l=qT(t,e=>GT(e,"width"),""),c=qT(t,e=>GT(e,"height"),""),u=VT(e,t[0]),d=KT(u)?WT(u.parentNode,"width"):WT(u,"width")||u.getAttribute("width")||u.offsetWidth;return{fillColor:n?{color:e.dom.styles.toHex(n),alpha:100}:{},borderColor:o?{color:e.dom.styles.toHex(o),alpha:100}:{},cellBorderWidth:r,cellBorderStyle:i,cellHorizontalAlignment:a,cellWidth:l&&parseInt(l,10),cellHeight:c&&parseInt(c,10),verticalAlignment:s,tableWidth:d}}function hk(e,t){const n=t.every(t=>!!e.dom.getAttrib(t,"colspan")&&parseInt(e.dom.getAttrib(t,"colspan"),10)>1),o=t.every(t=>!!e.dom.getAttrib(t,"rowspan")&&parseInt(e.dom.getAttrib(t,"rowspan"),10)>1),r=t.length>1,i=n||o,a={},s={};t.forEach(e=>{const t=e.parentElement,n=Array.from(t.parentElement.childNodes).indexOf(t),o=Array.from(t.childNodes).indexOf(e);a[n]=e;s[o]=e});const l=Object.keys(a).length,c=Object.keys(s).length,u=Object.keys(a).sort()[0];return{showMerge:r,showSplit:i,cellsSpanRowsCount:l,cellsSpanColsCount:c,targetCell:a[u]}}const gk=(e,t=[],n={})=>{e.undoManager.transact(()=>{t.forEach(t=>{const o=e.dom.serializeStyle(Object.assign({},e.dom.parseStyle(e.dom.getAttrib(t,"style")),n));e.dom.setAttribs(t,{style:o})})});const o=`${FT(t[0])?"table":"cell"}-${Object.keys(n)[0]}`;fk(e,o)};function bk(e,t,n){e.dom.setStyle(t,"height",n)}function vk(e){return({target:t})=>{if("TABLE"===t.nodeName){const{[kr.USE_MAX_DIMENSION_WIDTH]:n=Number.MAX_SAFE_INTEGER}=Object(Ee.f)(e,Tr,{}),o=t.style.width,r=Math.round(parseFloat(o,10));if(KT(t)){e.dom.setStyle(t.parentNode,"height",null);if(ak(o)){const o=Math.min((t.parentNode.parentNode||t.parentNode).offsetWidth,n),r=Math.round(t.offsetWidth/o*100);e.dom.setStyle(t.parentNode,"width",Math.min(r,100)+"%");e.dom.setStyle(t,"width","100%")}else{r>n&&e.dom.setStyle(t,"width",n+"px");e.dom.setStyle(t.parentNode,"width",Math.min(r,n)+"px")}return}o.includes("px")&&r>n&&e.dom.setStyle(t,"width",n+"px")}}}const yk=e=>{const{[kr.USE_ALIGNMENT_CLASSES]:t}=Object(Ee.f)(e,Tr,{}),n=e.getParam("useTableContextualToolbar");return(o,r)=>{e.undoManager.transact(()=>{const n=e.plugins.table.insertTable(o,r);e.execCommand("hsInsertNewline",!1,{target:n});t&&e.dom.addClass(n,jr[zo.b.CENTER]);lk(e,n)});Object(Ie.b)(e,"tinymceInsertTable",G.T,{version:n?"contextualToolbar":"v1",columns:o,rows:r})}},Ck=e=>{const t="mceTableDelete",n=e.getParam("useTableContextualToolbar");return o=>{e.undoManager.transact(()=>{KT(o)?e.dom.remove(o.parentNode):n?e.dom.remove(o):e.execCommand(t)});Object(Ie.b)(e,"tinymceEditTable",G.B,{version:n?"contextualToolbar":"v1",command:t})}};function Ok(e){return[].concat(...e)}const xk=(e,t,n,o,{tableWidth:r})=>{const{width:i,height:a}=o;if(FT(t[0])){const o=t[0];if("width"===n){const t=String(r).includes("%")?"%":"px",n=`${i}${t}`;if("number"==typeof i){e.undoManager.transact(()=>{const r=KT(o);r&&e.dom.setStyle(o.parentNode,"width",n);r&&"px"!==t||e.dom.setStyle(o,"width",n)});fk(e,"table-width")}}else"number"==typeof a&&gk(e,t,{height:a+"px"})}else{const i=ok(t),s=VT(e);if("width"===n){const t=String(r).includes("%")?"%":"px",n={width:`${o.width}${t}`};if("%"===t)gk(e,Ok(i.columns),n);else{e.dom.setStyle(s,"width",null);KT(s)&&e.dom.setStyle(s.parentNode,"width",null);gk(e,Ok(i.columns),n);xk(e,[s],"width",{width:s.offsetWidth},{tableWidth:r})}}else{e.dom.setStyle(s,"height",null);e.dom.setAttrib(s,"height",null);if(KT(s)){e.dom.setStyle(s.parentNode,"height",null);e.dom.setAttrib(s.parentNode,"height",null)}const t=Ok(i.rows),n=i.rows.map(e=>QT(e[0]));gk(e,t,{height:a+"px"});n.forEach(t=>bk(e,t,a))}fk(e,"cell-"+n)}},jk=(e,t,n,o)=>{const{[kr.USE_ALIGNMENT_CLASSES]:r}=Object(Ee.f)(e,Tr,{});n&&n===o&&(n=zo.b.NONE);const i=KT(t)?t.parentNode:t;e.undoManager.transact(()=>{if(r){Object.values(jr).forEach(t=>e.dom.removeClass(i,t));e.dom.addClass(i,jr[n])}else{const t=Nr[n];t&&e.dom.setStyle(i,t)}});fk(e,"tableLayout")},Sk=(e,t,n)=>{const{top:o,left:r,right:i,bottom:a}=n,s=KT(t)?t.parentNode:t;e.undoManager.transact(()=>{e.dom.setStyles(s,{"margin-top":o,"margin-left":r,"margin-right":i,"margin-bottom":a})});fk(e,"tableMargin")},wk=(e,t,n,o)=>{const{[kr.MAX_DIMENSION_WIDTH]:r}=Object(Ee.f)(e,Tr,{});e.undoManager.transact(()=>{let i;if(n===uk.c.PIXELS){Array.from(t.querySelectorAll("td")).filter(n=>e.dom.getParent(n,"table")===t).forEach(t=>{const n=e.dom.serializeStyle(Object.assign({},e.dom.parseStyle(e.dom.getAttrib(t,"style")),{width:t.offsetWidth+"px"}));e.dom.setAttribs(t,{style:n})});const n=t.offsetWidth+"px";i=n;KT(t)&&e.dom.setStyle(t.parentNode,"width",n)}else{const n=KT(t)?t.parentNode:t,a=r?Math.min(n.parentNode.offsetWidth,r):n.parentNode.offsetWidth;Array.from(t.querySelectorAll("td")).filter(n=>e.dom.getParent(n,"table")===t).forEach(t=>{const n=e.dom.serializeStyle(Object.assign({},e.dom.parseStyle(e.dom.getAttrib(t,"style")),{width:UT(t.offsetWidth,o)+"%"}));e.dom.setAttribs(t,{style:n})});const s=UT(t.offsetWidth,a)+"%";i=s;if(KT(t)){e.dom.setStyle(t.parentNode,"width",s);i="100%"}}e.dom.setStyle(t,"width",i)});fk(e,"tableWidthType")},Tk=e=>t=>{e.undoManager.transact(()=>{const n=KT(t)?t.parentNode:t,o=n.cloneNode(!0);e.dom.insertAfter(o,n);e.selection.select(o)});fk(e,"tableClone")},kk=l.a.div.withConfig({displayName:"TableInsertPopoverBody__PopoverBody",componentId:"sc-14g30ms-0"})(["padding:0 8px;"]),Nk=l.a.p.withConfig({displayName:"TableInsertPopoverBody__TableSizeLabel",componentId:"sc-14g30ms-1"})(["text-align:center !important;margin-top:6px;margin-bottom:0;user-select:none;"]),Ek=l.a.div.withConfig({displayName:"TableInsertPopoverBody__SquatchCell",componentId:"sc-14g30ms-2"})(["padding:8px !important;margin-top:"," !important;margin-left:"," !important;box-shadow:none !important;background-color:",";border-color:",";border-radius:3px;border-style:solid;border-width:1px;display:inline-block;position:relative;width:auto;user-select:none;cursor:pointer;"],({marginTop:e})=>e?"2px":0,({marginLeft:e})=>e?"2px":0,({hovered:e})=>e?an.CALYPSO_LIGHT:an.OLAF,({hovered:e})=>e?an.CALYPSO:an.BATTLESHIP),Ak=Object(i.memo)(e=>{const{row:t,col:n,hovered:o}=e,r=()=>{e.onMouseOver({row:t,col:n})},i=()=>{e.onClick({row:t,col:n})};return Object(Ye.jsx)(Ek,{className:lh.b,hovered:o,marginTop:t>1,marginLeft:n>1,onMouseOver:r,onClick:i})});class Ik extends i.Component{constructor(e){super(e);this.handleCellClick=({row:e,col:t})=>{const{onInsertTable:n}=this.props;n(t,e)};this.handleCellHover=({row:e,col:t})=>{this.setState({hoveredCell:{row:e,col:t},gridSize:{rows:Math.max(uk.a.MIN,Math.min(uk.a.MAX,e+1)),cols:Math.max(uk.a.MIN,Math.min(uk.a.MAX,t+1))}})};this.state={hoveredCell:{row:0,col:0},gridSize:{rows:uk.a.MIN,cols:uk.a.MIN}}}getTableGrid(){const{hoveredCell:e,gridSize:t}=this.state,n=[];for(let o=1;o<=t.rows;o++){const r=[];for(let n=1;n<=t.cols;n++){const t=o<=e.row&&n<=e.col;r.push(Object(Ye.jsx)(Ak,{row:o,col:n,hovered:t,onMouseOver:this.handleCellHover,onClick:this.handleCellClick},`cell-${n}-${o}`))}n.push(Object(Ye.jsx)(c.a,{children:r},o))}return n}render(){const e=this.getTableGrid(),{hoveredCell:t}=this.state;return Object(Ye.jsxs)(kk,{className:lh.c,children:[e,Object(Ye.jsx)(Nk,{children:`${t.col} x ${t.row}`})]})}}Ik.propTypes={onInsertTable:r.a.func.isRequired};const Rk=l()(lw.a).withConfig({displayName:"TableFloatyPopoverBody__TableSelectorButtonGroup",componentId:"sc-1uforf1-0"})(["& .tableFloatyButton{border-width:1px;border-color:",";border-radius:0;padding-right:6px;padding-left:6px;}& .leadingButton{border-top-left-radius:3px;}& .trailingButton{border-top-right-radius:3px;padding-top:5px;padding-bottom:5px;}"],an.PANTERA),Lk=e=>"RichTextLib.table.floaty."+e,_k={className:r.a.string,dropdownClassName:r.a.string,onOpenStart:r.a.func.isRequired,onSelectTable:r.a.func.isRequired,onCloneTable:r.a.func.isRequired,onDeleteTable:r.a.func.isRequired};function Pk(e){const{className:t,dropdownClassName:n,onOpenStart:o,onSelectTable:r,onCloneTable:i,onDeleteTable:a}=e;return Object(Ye.jsxs)(Rk,{className:t,children:[Object(Ye.jsx)(mn.a,{placement:"top",title:Nt.a.text(Lk("tableSelectorTooltip")),children:Object(Ye.jsxs)(Le.a,{use:"tertiary",size:"xs",className:"tableFloatyButton leadingButton",onClick:r,children:[Object(Ye.jsx)(z.a,{name:"table"}),Object(Ye.jsx)(ft.a,{message:Lk("tableSelectorLabel")})]})}),Object(Ye.jsx)(lS.a,{"aria-label":Nt.a.text(Lk("dropdownButtonAriaLabel")),placement:"bottom right",arrowSize:"medium",iconName:null,buttonUse:"tertiary",buttonSize:"sm",buttonClassName:"tableFloatyButton trailingButton",dropdownClassName:n,onOpenStart:o,children:Object(Ye.jsxs)(nC.a,{children:[Object(Ye.jsxs)(Le.a,{"data-test-id":"copy-table-btn",onClick:i,children:[Object(Ye.jsx)(z.a,{name:"duplicate"}),Object(Ye.jsx)(ft.a,{message:Lk("cloneTable")})]}),Object(Ye.jsxs)(Le.a,{"data-test-id":"delete-table-btn",onClick:a,children:[Object(Ye.jsx)(z.a,{name:"delete"}),Object(Ye.jsx)(ft.a,{message:Lk("deleteTable")})]})]})})]})}Pk.propTypes=_k;var Mk=Pk;const Dk=Object(Se.a)(W.a),Bk=e=>{e.parentNode.removeAttribute("data-mce-selected")},Fk={editor:r.a.object.isRequired,eventKey:r.a.string.isRequired,onCloneTable:r.a.func.isRequired,onDeleteTable:r.a.func.isRequired};function Uk(e){const{editor:t,eventKey:n,onCloneTable:o,onDeleteTable:r}=e,[a,s]=Object(i.useState)(null),[l,c]=Object(i.useState)(""),u=Object(i.useRef)(a);Object(i.useEffect)(()=>{u.current=a});const d=Object(i.useCallback)(()=>{const e=u.current;if(e){KT(e)&&Bk(e);s(null)}},[]);Object(i.useEffect)(()=>{const e=({element:e})=>{if(!e){d();return}const t=u.current;if(t!==e){t&&KT(t)&&Bk(t);s(e)}else{const t=KT(e)?e.parentNode:e;c(t.outerHTML)}KT(e)&&e.parentNode.setAttribute("data-mce-selected","2")};t.on("hsNodeChange:"+n,e);return()=>t.off("hsNodeChange:"+n,e)},[t,n,d]);const f=()=>{t.selection.select(a)},p=()=>{t.selection.getNode()!==a&&f()};return a?Object(Ye.jsx)(Dk,{"data-test-id":"table-selector-popover",layerClassName:"mce-hubspot-floaty",target:a,onRemove:d,editor:t,refreshKey:l,content:Object(Ye.jsx)(Mk,{className:"mce-table-popover",dropdownClassName:"mce-table-dropdown",onOpenStart:p,onSelectTable:f,onCloneTable:o.bind(null,a),onDeleteTable:r.bind(null,a)}),computePosition:({targetBounds:e,contentDimensions:t})=>{const n=t.height||26;return{top:e.top-n,left:e.left}}}):null}Uk.propTypes=Fk;var Vk=Uk,Hk=n(281);const qk=["className"],$k=l()(lw.a).withConfig({displayName:"TableCellFloatyPopoverBody__TableCellButtonGroup",componentId:"sc-1dd4by0-0"})(["& .cellFloatyButton{padding:2px 3px;}& span > span{margin-right:0;}"]),zk=e=>"RichTextLib.table.cellFloaty."+e,Wk=({buttonClassName:e,dropdownClassName:t,cellsSpanRowsCount:n,cellsSpanColsCount:o,onInsertRowAbove:r,onInsertRowBelow:i,onInsertColumnLeft:a,onInsertColumnRight:s})=>Object(Ye.jsx)(mn.a,{placement:"top",title:Nt.a.text(zk("tooltip.insert")),children:Object(Ye.jsx)(lS.a,{"data-test-id":"insert-cells-btn",placement:"bottom",arrowSize:"medium",iconName:"add",buttonClassName:e,buttonUse:"tertiary-light",buttonSize:"xs",dropdownClassName:t,caretRenderer:()=>null,children:Object(Ye.jsxs)(nC.a,{children:[Object(Ye.jsx)(Le.a,{"data-test-id":"insert-row-above-btn",onClick:r,children:Object(Ye.jsx)(Hk.a,{message:zk("insert.rowAbove"),options:{count:n}})}),Object(Ye.jsx)(Le.a,{"data-test-id":"insert-row-below-btn",onClick:i,children:Object(Ye.jsx)(Hk.a,{message:zk("insert.rowBelow"),options:{count:n}})}),Object(Ye.jsx)(Le.a,{"data-test-id":"insert-col-left-btn",onClick:a,children:Object(Ye.jsx)(Hk.a,{message:zk("insert.colLeft"),options:{count:o}})}),Object(Ye.jsx)(Le.a,{"data-test-id":"insert-col-right-btn",onClick:s,children:Object(Ye.jsx)(Hk.a,{message:zk("insert.colRight"),options:{count:o}})})]})})}),Gk=({buttonClassName:e,dropdownClassName:t,cellsSpanRowsCount:n,cellsSpanColsCount:o,onDeleteRow:r,onDeleteColumn:i})=>Object(Ye.jsx)(mn.a,{placement:"top",title:Nt.a.text(zk("tooltip.delete")),children:Object(Ye.jsx)(lS.a,{"data-test-id":"delete-cells-btn",placement:"bottom",arrowSize:"medium",iconName:"minus",buttonClassName:e,buttonUse:"tertiary-light",buttonSize:"xs",dropdownClassName:t,caretRenderer:()=>null,children:Object(Ye.jsxs)(nC.a,{children:[Object(Ye.jsx)(Le.a,{"data-test-id":"delete-row-btn",onClick:r,children:Object(Ye.jsx)(Hk.a,{message:zk("delete.row"),options:{count:n}})}),Object(Ye.jsx)(Le.a,{"data-test-id":"delete-col-btn",onClick:i,children:Object(Ye.jsx)(Hk.a,{message:zk("delete.col"),options:{count:o}})})]})})}),Kk=({showMerge:e,showSplit:t,onMergeCells:n,onSplitCells:o,buttonClassName:r})=>{if(!e&&!t)return null;const i=e=>{e.preventDefault()},a=e?"merge":"splitModule",s=e?n:o;return Object(Ye.jsx)(mn.a,{placement:"top",title:Nt.a.text(zk("tooltip."+a)),children:Object(Ye.jsx)(Le.a,{"data-test-id":"merge-split-btn",use:"tertiary-light",size:"xs",className:r,onClick:s,onMouseDown:i,children:Object(Ye.jsx)(z.a,{name:a})})})},Yk={className:r.a.string,dropdownClassName:r.a.string,onMergeCells:r.a.func.isRequired,onSplitCells:r.a.func.isRequired,showMerge:r.a.bool,showSplit:r.a.bool};function Xk(e){const{className:t}=e,n=Object(d.a)(e,qk),o=Object.assign({buttonClassName:"cellFloatyButton"},n);return Object(Ye.jsxs)($k,{className:t,children:[Wk(o),Gk(o),Kk(o)]})}Xk.propTypes=Yk;var Zk=Xk;const Qk=["editor","eventKey"],Jk=["targetCell"],eN={editor:r.a.object.isRequired,eventKey:r.a.string.isRequired};function tN(e){const{editor:t,eventKey:n}=e,o=Object(d.a)(e,Qk),[r,a]=Object(i.useState)(null),[s,l]=Object(i.useState)({}),c=Object(i.useRef)(r);Object(i.useEffect)(()=>{c.current=r});const u=Object(i.useCallback)(()=>{c.current&&a(null)},[]);Object(i.useEffect)(()=>{const e=({element:e})=>{if(!e){u();return}const n=hk(t,e),{targetCell:o}=n,r=Object(d.a)(n,Jk);if(c.current!==o){a(null);a(o)}l(r)};t.on("hsNodeChange:"+n,e);return()=>t.off("hsNodeChange:"+n,e)},[t,n,u]);return r?Object(Ye.jsx)(W.a,{"data-test-id":"table-cell-popover",layerClassName:"mce-hubspot-floaty",target:r,content:Object(Ye.jsx)(Zk,Object.assign({className:"mce-table-cell-popover",dropdownClassName:"mce-table-cell-dropdown"},o,s)),computePosition:({targetBounds:e,contentDimensions:t})=>({top:e.top,left:e.right-t.width-1})}):null}tN.propTypes=eN;var nN=tN;const oN=Object(Mr.a)("TinymcePlugins.hstableV2"),rN=Object(Mr.a)("TinymcePlugins.hstableV2.cell"),iN=Object(uo.a)(Ie.b,400);function aN(e,t){const{[kr.HIDE_CELL_COLOR_OPTIONS]:n,[kr.DISABLE_SPACING]:o}=Object(Ee.f)(e,Tr,{}),r=e.getParam("useTableContextualToolbar"),i=t=>{e.execCommand(t);iN(e,"tinymceEditTable",G.B,{version:r?"contextualToolbar":"v1",command:t})},a=t=>{iN(e,"tinymceEditTable",G.B,{version:r?"contextualToolbar":"v2",editType:t})};p.a.canvas.addMenuItem(e,rn.ab,{text:oN("menuItem"),child:()=>Object(Ye.jsx)(Ik,{onInsertTable:yk(e)})});const s=({element:t})=>!!t&&VT(e,t);p.a.canvas.addNodeChangeHandler(e,{eventKey:t,isActiveNodeHandler:s});p.a.canvas.addPopover(e,t,{renderPopover:n=>Object(Ye.jsx)(Vk,Object.assign({},n,{editor:e,eventKey:t,onDeleteTable:Ck(e),onCloneTable:Tk(e)}))});const l=e=>{const{key:t}=e;"Backspace"!==t&&e.preventDefault();a("deleteTable")},c=({element:t})=>{if(!t)return!1;if(FT(t)){e.on("KeyDown",l);return t}e.off("KeyDown",l);return!1},u=t=>Object.assign({},pk(e,t),{borderColorTooltip:oN("borderColorTooltip"),allowUnitDimensions:!0,lockedAspectRatio:!1,marginIconType:fi.a.TABLE});p.a.canvas.addNodeChangeHandler(e,{eventKey:t+"-toolbar",isActiveNodeHandler:c,getActiveNodeAttributes:u,contextualToolbar:Ju({showMarginControls:!o})});const d=({element:t})=>{if(!t)return!1;if(FT(t))return!1;if(!VT(e))return!1;const n=Object(q.i)(e,t),o=Sm(e,t),r=ag(e,t),i=_b(e,t),a=pf(e,t),s=Object(hf.i)(e,t),l=Fc(t);if(n||o||r||i||a||s||l)return!1;const c=HT(e,t);return!!c.length&&c},f=t=>Object.assign({},mk(e,t),{fillColorTooltip:rN("backgroundColorTooltip"),borderColorTooltip:rN("borderColorTooltip"),useCellVerticalAlignment:!0}),m=t+"-cell";p.a.canvas.addNodeChangeHandler(e,{eventKey:m,isActiveNodeHandler:d,getActiveNodeAttributes:f,contextualToolbar:ed({canvasToolbar:e.getParam("canvasToolbar"),showCellColorControls:!n})});const h=e=>()=>{i(e)};p.a.canvas.addPopover(e,m,{renderPopover:t=>Object(Ye.jsx)(nN,Object.assign({},t,{editor:e,eventKey:m,onMergeCells:h("mceTableMergeCells"),onSplitCells:h("mceTableSplitCells"),onInsertRowAbove:h("mceTableInsertRowBefore"),onInsertRowBelow:h("mceTableInsertRowAfter"),onInsertColumnLeft:h("mceTableInsertColBefore"),onInsertColumnRight:h("mceTableInsertColAfter"),onDeleteRow:h("mceTableDeleteRow"),onDeleteColumn:h("mceTableDeleteCol")}))})}const sN=["Top","Bottom","Left","Right"],lN=e=>{e.getParam("useTableContextualToolbar")&&Object(F.b)(e,t=>{const n=Object(Ee.f)(e,"isEmail"),o=t.querySelectorAll("table");Array.from(o).forEach(t=>{if(t.hasAttribute("border")){const o=Number(t.getAttribute("border"));let r=t.style.borderStyle||"solid";n&&0===o&&(r="none");t.style.borderWidth||e.dom.setStyles(t,{"border-width":o,"border-style":r});if(o){Array.from(t.querySelectorAll("td,th")).filter(n=>e.dom.getParent(n,"table")===t).forEach(n=>{n.style.borderWidth||n.style.border||e.dom.setStyles(n,{"border-width":1,"border-style":r,"border-color":t.style.borderColor})})}t.removeAttribute("border")}if(t.hasAttribute("cellpadding")){const n=t.getAttribute("cellpadding");Array.from(t.querySelectorAll("td,th")).filter(n=>e.dom.getParent(n,"table")===t).forEach(t=>{sN.forEach(o=>{const r="padding"+o;t.style[r]||e.dom.setStyle(t,r,n+"px")})});t.removeAttribute("cellpadding")}})})},cN=B.O,uN=e=>FT(e)?[e]:!Array.isArray(e)||"TD"!==e[0].nodeName&&"TH"!==e[0].nodeName?[]:e,dN=e=>{e.on("ObjectResized",vk(e));if(e.getParam("useTableContextualToolbar")){e.on("hsFillColorChange",({target:t,color:n})=>{if(FT(t))return;const o=uN(t);o.length&&gk(e,o,{"background-color":n.color})});e.on("hsBorderColorChange",({target:t,color:n})=>{const o=uN(t);o.length&&gk(e,o,{"border-color":n.color})});e.on("hsVerticalAlignmentChange",({target:t,alignment:n})=>{const o=uN(t);o.length&&gk(e,o,{"vertical-align":n})});e.on("hsBorderWidthChange",({target:t,width:n,borderStyle:o})=>{const r=uN(t);if(!r.length)return;const i={"border-width":n+"px"};0===n?i["border-style"]="none":o&&"none"!==o||(i["border-style"]="solid");gk(e,r,i)});e.on("hsBorderStyleChange",({target:t,borderStyle:n})=>{const o=uN(t);o.length&&gk(e,o,{"border-style":n})});e.on("hsAlignmentChange",({target:t,alignment:n,prevAlignment:o})=>{FT(t)&&jk(e,t,n,o)});e.on("hsMarginChange",({target:t,margin:n})=>{FT(t)&&Sk(e,t,n)});e.on("hsDimensionChange",({target:t,dimensionType:n,dimensions:o,contextualNodeAttributes:r})=>{const i=uN(t);i.length&&xk(e,i,n,o,r)});e.on("hsTableDimensionTypeChange",({target:t,dimensionType:n,tablePixelWidth:o})=>{wk(e,t,n,o)});e.on("hsCellPaddingChange",({target:t,cellPadding:n})=>{const o=Array.from(t.querySelectorAll("td")).filter(n=>e.dom.getParent(n,"table")===t);gk(e,o,{padding:n+"px"})});e.on("hsTableCaptionChange",({target:t,hasCaption:n})=>{let o=e.dom.select("caption",t)[0];e.undoManager.transact(()=>{if(!n&&o)e.dom.remove(o);else if(n&&!o){o=e.dom.create("caption");const n=p.a.Env.browser&&p.a.Env.browser.isIE()||p.a.Env.ie;o.innerHTML=n?"":Ae.a;t.insertBefore(o,t.firstChild)}})});e.on("hsTableResponsiveChange",({target:t,isResponsive:n})=>{n?lk(e,t):ck(e,t)});e.on("hsTableCustomStyleChange",({target:t,tableStyle:n})=>{e.undoManager.transact(()=>{e.dom.setAttribs(t,{style:n})});fk(e,"tableStyle")})}};function fN(e){aN(e,cN);dN(e);lN(e);const{[kr.DEFAULT_CELL_STYLES]:t}=Object(Ee.f)(e,Tr,{});t&&e.on("newcell",n=>{const o=n.node;e.dom.setStyles(o,t);const r=e.getParam("forced_root_block");r&&o.replaceChild(e.dom.create(r,{},Ae.a),o.firstChild)});e.settings.inline&&e.on("init",()=>{const t=document.querySelector("div[style*='position: static; height: 0px; width: 0px; padding: 0px; margin: 0px; border: 0px;']");if(t){e.dom.setAttrib(t,"tabIndex",-1);e.dom.addClass(t,"mce-table-resize-container")}})}p.a.PluginManager.add(cN,fN);const pN={version:"v2"},mN=e=>{Object(Ie.b)(e,"tinymceFindReplace",G.Z,pN)},hN=e=>function(t){const n=t?e.find(t):0;t||e.done(!1);return n},gN=e=>e.next,bN=e=>e.prev,vN=e=>function(){e.done(!1)},yN=(e,t)=>function(n){e.undoManager.transact(()=>{t.replace(n,!0,!0)});Object(Ie.b)(e,"tinymceFindReplace",G.hb,pN)},CN=e=>function(t){t&&Object(Ie.b)(e,"tinymceFindReplace",G.jb,pN)};var ON=n(469);const xN=["isReplaceInput"],jN=["isOpen"],SN=["isCloseButton"],wN=l.a.div.withConfig({displayName:"FindReplace__FindReplaceContainer",componentId:"sc-5nko8v-0"})(["background-color:",";padding:4px;border:1px solid ",";border-radius:3px;box-shadow:0 1px 24px 0 rgba(0,0,0,0.08);"],an.GYPSUM,an.BATTLESHIP),TN=l()(e=>{const t=Object(d.a)(e,xN);return Object(Ye.jsx)(qs.a,Object.assign({},t))}).withConfig({displayName:"FindReplace__FindReplaceInput",componentId:"sc-5nko8v-1"})(["&&&{border:none;font-size:13px;padding:0 4px;margin-left:",";height:30px;width:140px;}&&&:focus{box-shadow:none;outline:none;}"],({isReplaceInput:e})=>e?"18px":"0"),kN=l()(e=>{const t=Object(d.a)(e,jN);return Object(Ye.jsx)($.a,Object.assign({},t))}).withConfig({displayName:"FindReplace__ToggleReplaceButton",componentId:"sc-5nko8v-2"})(["margin:0 3px;transform:rotate(",");transition-property:transform;transition-duration:300ms;transition-timing-function:'ease';"],({isOpen:e})=>e?"90deg":"0"),NN=l.a.div.withConfig({displayName:"FindReplace__MatchCount",componentId:"sc-5nko8v-3"})(["color:",";width:68px;text-align:left;font-size:13px;height:22px;margin:0 2px;"],an.FLINT),EN=l()(e=>{const t=Object(d.a)(e,SN);return Object(Ye.jsx)($.a,Object.assign({},t))}).withConfig({displayName:"FindReplace__ActionButton",componentId:"sc-5nko8v-4"})(["font-size:"," !important;margin:0 !important;border-radius:13px !important;&&&:hover{background-color:",";}"],({isCloseButton:e})=>e?"10px":"14px",an.GREAT_WHITE),AN=l.a.div.withConfig({displayName:"FindReplace__VerticalDivider",componentId:"sc-5nko8v-5"})(["border-left:1px solid ",";height:26px;margin-left:6px;margin-right:6px;"],an.BATTLESHIP),IN=l()(Us.a).withConfig({displayName:"FindReplace__HorizontalDivider",componentId:"sc-5nko8v-6"})(["margin:4px 0 4px 18px;width:calc(100% - 18px);background-color:",";"],an.BATTLESHIP),RN=l()(Le.a).withConfig({displayName:"FindReplace__ReplaceAllButton",componentId:"sc-5nko8v-7"})(["min-width:144px !important;margin-left:2px;"]),LN=e=>"RichTextLib.findreplace."+e;function _N(e){const{open:t,searchIndex:n,searchCount:o,findValue:r}=e,[a,s]=Object(i.useState)(!1),[l,u]=Object(i.useState)(""),d=Object(i.useRef)(null),f=Object(i.useRef)(null);Object(i.useEffect)(()=>{t?d.current&&!a?d.current.focus():f.current&&a&&f.current.focus():a&&s(!1)},[t,a]);const p=()=>{s(!a);e.onToggleShowReplace&&e.onToggleShowReplace(!a)},m=({target:{value:t}})=>{e.onFindInputChange(t)},h=t=>{t.key===hi.b.ENTER&&(t.shiftKey?e.onFindPrev():e.onFindNext())},g=({target:{value:e}})=>{u(e)},b=()=>{e.onReplaceAll(l)},v=({key:t})=>{t===hi.b.ESCAPE&&e.onClose()},y=`${o<1e4?n:"- "}/${o}`,C=n<=1,O=n>=o;return Object(Ye.jsxs)(wN,{"data-test-id":"find-replace",onKeyDown:v,children:[Object(Ye.jsxs)(c.a,{align:"center",children:[Object(Ye.jsx)(kN,{"data-test-id":"show-replace-toggle-button",use:"unstyled",size:"xs",onClick:p,isOpen:a,children:Object(Ye.jsx)(z.a,{name:"right",color:an.CALYPSO})}),Object(Ye.jsx)(TN,{"data-test-id":"find-input",size:"small",type:"search",placeholder:Nt.a.text(LN("findPlaceholder")),inputRef:d,value:r,onChange:m,onKeyDown:h}),Object(Ye.jsx)(AN,{}),Object(Ye.jsx)(NN,{"data-test-id":"find-match-count",children:y}),Object(Ye.jsxs)(c.a,{align:"center",justify:"end",children:[Object(Ye.jsx)(EN,{"data-test-id":"find-prev-button",use:"transparent",size:"xs",disabled:C,onClick:e.onFindPrev,children:Object(Ye.jsx)(z.a,{name:"up",color:C?an.FLINT:an.SLINKY})},"find-prev"),Object(Ye.jsx)(EN,{"data-test-id":"find-next-button",use:"transparent",size:"xs",disabled:O,onClick:e.onFindNext,children:Object(Ye.jsx)(z.a,{name:"down",color:O?an.FLINT:an.SLINKY})},"find-next"),Object(Ye.jsx)(EN,{"data-test-id":"find-replace-close-button",use:"transparent",size:"xs",isCloseButton:!0,onClick:e.onClose,children:Object(Ye.jsx)(z.a,{name:"remove",color:an.SLINKY})},"close-find-replace")]})]}),Object(Ye.jsx)(ON.b,{open:a,children:Object(Ye.jsxs)("div",{children:[Object(Ye.jsx)(IN,{}),Object(Ye.jsxs)(c.a,{align:"center",children:[Object(Ye.jsx)(TN,{"data-test-id":"replace-input",size:"small",type:"search",isReplaceInput:!0,placeholder:Nt.a.text(LN("replacePlaceholder")),inputRef:f,value:l,onChange:g}),Object(Ye.jsx)(AN,{}),Object(Ye.jsx)(RN,{"data-test-id":"replace-all-button",use:"tertiary",size:"xs",disabled:0===o,onClick:b,children:Nt.a.text(LN("replaceAllText"))})]})]})})]})}const PN=l.a.div.withConfig({displayName:"FindReplacePopover__FindReplaceContainer",componentId:"k28los-0"})(["position:absolute;right:",";margin-top:-1px;display:",";"],({inline:e})=>e?"20px":"0",({open:e})=>e?"block":"none");function MN(e){const{editor:t,onFind:n,onDone:o}=e,[r,a]=Object(i.useState)(!1),[s,l]=Object(i.useState)(0),[c,u]=Object(i.useState)(0),[d,f]=Object(i.useState)(""),p=t.settings.blurEvents||"blur remove",m=()=>{l(0);u(0)},h=()=>{if(c<s){e.onFindNext();u(c+1)}},g=()=>{if(c>1){e.onFindPrev();u(c-1)}},b=Object(i.useCallback)(e=>{const t=n(e);l(t);u(t&&1);f(e)},[n]),v=t=>{e.onReplaceAll(t);t.indexOf(d)>=0?b(d):m()},y=Object(i.useCallback)(()=>{o();a(!1);m();f("")},[o]);Object(i.useEffect)(()=>{t.on(p,y);return()=>{t.off(p,y)}},[t,y,p]);Object(i.useEffect)(()=>{const e=()=>{const e=t.selection.getContent({format:"text"}).trim();b(e);a(!0)};t.on("OpenFindReplace",e);return()=>{t.off("OpenFindReplace",e)}},[t,b]);return Object(Ye.jsx)(PN,{inline:t.settings.inline,open:r,children:Object(Ye.jsx)(_N,{open:r,searchCount:s,searchIndex:c,findValue:d,onFindInputChange:b,onFindNext:h,onFindPrev:g,onToggleShowReplace:e.onToggleShowReplace,onReplaceAll:v,onClose:y})})}const DN=B.t;function BN(e){const t=e.plugins.searchreplace,n={onFind:hN(t),onFindNext:gN(t),onFindPrev:bN(t),onToggleShowReplace:CN(e),onReplaceAll:yN(e,t),onDone:vN(t)};p.a.canvas.addToolbarPopover(e,DN,{renderPopover:t=>Object(Ye.jsx)(MN,Object.assign({editor:e},n,t))});e.shortcuts.add("Meta+F","",()=>{e.fire("OpenFindReplace");mN(e)})}p.a.PluginManager.add(DN,BN);var FN=n(343);const UN=l()(FN.a).withConfig({displayName:"AutocompleteOptions__AutocompleteOptionButton",componentId:"do2td3-0"})(["padding:8px 16px !important;width:100% !important;margin:0 !important;"]),VN=l.a.div.withConfig({displayName:"AutocompleteOptions__AutocompleteStaticOption",componentId:"do2td3-1"})(["padding:8px 16px;width:100%;",";font-weight:500;"],e=>e.background?"background: "+e.background:""),HN=l.a.div.withConfig({displayName:"AutocompleteOptions__AutocompleteOptionWrapper",componentId:"do2td3-2"})(["width:100% !important;&:hover{background-color:"," !important;}"],an.CALYPSO_LIGHT),qN=l.a.div.withConfig({displayName:"AutocompleteOptions__NoOptionsWrapper",componentId:"do2td3-3"})(["padding:8px 16px !important;width:100% !important;margin:0 !important;"]),$N=l.a.div.withConfig({displayName:"AutocompleteOptions__CommandsContainer",componentId:"do2td3-4"})(["display:flex;flex-direction:column;align-items:flex-start;min-width:130px;"]);function zN({commands:e}){const t=ve(),n=tt(),o=Object(i.useCallback)(e=>{e.preventDefault()},[]);return Object(Ye.jsxs)($N,{onMouseDown:o,children:[Object(Ye.jsxs)(VN,{background:an.GYPSUM,children:[n?Object(Ye.jsx)(z.a,{name:"breezeSingleStar",className:"m-right-2",style:{marginLeft:-4,transform:"translateY(-1px)"}}):Object(Ye.jsx)(z.a,{name:"artificialIntelligence",className:"m-right-1",style:{marginLeft:-4}}),Object(Ye.jsx)(ft.a,{message:"TinymcePlugins.hscontentgeneration.toolbar.generateLabel"})]}),e.map((e,n)=>{const o=n===t,r=o?an.CALYPSO_LIGHT:void 0;return Object(Ye.jsx)(HN,{active:o,style:{backgroundColor:r},children:Object(Ye.jsx)(UN,{onClick:e.onSelect,children:e.label})},e.id)}),0===e.length&&Object(Ye.jsx)(qN,{children:Object(Ye.jsx)(ft.a,{message:"TinymcePlugins.hsautocomplete.noResults"})})]})}function WN({targetNode:e,editor:t}){var n;const o=ge(),r=be(),a=null!==(n=t.settings.gates)&&void 0!==n?n:[],s=Object(i.useCallback)(()=>{je();Bt(t)},[t]),l=o&&Boolean(r)&&t.id===p.a.activeEditor.id;Object(i.useEffect)(()=>{l&&Object(Ie.b)(t,G.k,G.l,{actionType:G.o})},[t,l]);Object(i.useEffect)(()=>{const e=({filteredCommands:e}={})=>{Kt(t,e,t.selection.getRng())};t.on("hscontentgeneration:openSlashPopover",e);return()=>{t.off("hscontentgeneration:openSlashPopover",e)}},[t]);return Object(Ye.jsx)(Re.a,{placement:"bottom right",editor:t,open:l,animateOnToggle:!1,onRemove:s,arrowColor:an.GYPSUM,target:e,renderContent:()=>Object(Ye.jsx)(Ze,{gates:a,children:Object(Ye.jsx)(zN,{commands:r})})})}function GN(e){p.a.canvas.addPopover(e,"hsAutoCompleter",{renderPopover:t=>Object(Ye.jsx)(WN,Object.assign({"data-test-id":"autocomplete-popover",editor:e,targetNode:Ft()},t))})}var KN=n(1583),YN=n.n(KN);let XN=!1;function ZN(){XN=!0}const QN=()=>XN;function JN(e){e.preventDefault();e.stopImmediatePropagation()}function eE(e,t){const n=X(Z),o=X(ne),r=X(re);if(!n&&!o&&!r)return;if(r){"Escape"===e.key&&Xt(t);return}const i=X(Q),a=X(J);switch(e.key){case"Tab":case"ArrowDown":me($t(a+1,i.length));JN(e);break;case"ArrowUp":me($t(a-1,i.length));JN(e);break;case"Enter":{if(null==a){JN(e);return}const t=i[a];if(!t){JN(e);return}XN=!0;JN(e);t.onSelect();break}case"Escape":n&&he(!0);Xt(t);JN(e);break;default:return}}function tE(e,t){const n=e.autoCompleteCommands;if(!n)return;const o=Yt(e),{activeTrigger:r,activeAutocompleteRange:i}=Ht(e,o,Dt.COMMAND);if(!r||!i){console.warn("No trigger or range found for complete command, something went wrong");Xt(e);return}X(ne)&&se(i);const a=qt(n[r],Wt(i,!0));if(0===a.length){ye(t);X(oe)>=3&&Xt(e)}else de();Kt(e,a,i)}function nE(e){const t=e.autocompleteQuickInsertOptions;if(!t)return;const n=X(Z),o=X(ee),{activeTrigger:r,activeAutocompleteRange:i}=Ht(e,Object.keys(t),Dt.QUICK_INSERT);if(!r){n&&Xt(e);o&&he(!1);return}if(o)return;n&&se(i);const a=qt(t[r],Wt(i,!1));me($t(X(J),a.length));ae(a);if(!n){ZN();i.insertNode(Ft());const{activeAutocompleteRange:t}=Ht(e,[],Dt.QUICK_INSERT);se(t);ie(!0);me(0)}}function oE(e){const t=t=>{const n=e.autoCompleteCommands,o=e.autocompleteQuickInsertOptions;if(!n&&!o)return;const r=t.key;if(QN()&&"Enter"===r){ZN();return}const i=X(ne),a=X(Z);Boolean(n[r])&&!a||i?tE(e,r):nE(e)},n=YN()(t,50);function o(t){const n=e.selection.getRng(),o=n.compareBoundaryPoints(Range.START_TO_START,t)>=0,r=n.compareBoundaryPoints(Range.END_TO_END,t)<=0;return o&&r}const r=t=>{const n=e.autoCompleteCommands,r=e.autocompleteQuickInsertOptions;if(!n&&!r)return;const i=X(Z),a=X(ne),s=X(te),l=X(re);if((i||a||l)&&s){if(t.selectionChange){Xt(e);return}o(s)||Xt(e)}};e.on("NodeChange",r);e.on("focus",()=>{he(!1)});e.on("keyup",n);e.on("keydown",t=>{eE(t,e)})}function rE(e){oE(e);GN(e)}p.a.PluginManager.add(B.a,rE);var iE=n(1298),aE=n(1299);const sE=["advlist","autolink","lists","noneditable","paste","print","searchreplace","table",Ar.a,Pr,Xr,ei];function lE(e,t,n){const{contentType:o,passThroughSiteSettings:r,editContext:i,useDataTokens:a,usePersonalization:s,useSourceCode:l,useVideo:c,[$o.a]:u,showRssTokens:d,useGoogleDocs:f,useIcon:p,useSnippet:m,useContentGeneration:h,useCopilotCollaboration:g}=e,b=[],v=[rj,Kw,Uw];v.push(u?jf:Of);v.push(u?pd:ld);v.push(u?mv:lv);l&&v.push(u?Bx:Px);f&&v.push(u?B.g:B.f);"email"!==o&&p&&v.push(eC);if("email"===o)v.push(uj);else{v.push(u?Ob:tb);c&&v.push(u?wb:ab)}"post_body"===i&&v.push(Gx);r&&v.push(ST);s&&(a?v.push(_f.a):v.push(Lf.a));v.push(cO);d&&v.push(gT);v.push(u?Ef:wf.a);m&&v.push(hx);const y=Object(iE.b)(aE.a,n);if(g&&y){v.push(B.a);v.push(B.d)}else if(h){v.push(u?B.c:B.b);v.push(B.a)}v.push(cN);v.push(AT);v.push(BT);"email"!==o&&v.push(KC);v.push(VO);v.push(DN);return Object(iE.c)(b)(v,t)}const cE=({hideFontSize:e,hideFontFamily:t})=>[{name:"font-size",omit:!!e},{name:"font-family",omit:!!t},{name:"font",omit:e&&t}].reduce((e,{name:t,omit:n})=>{n&&e.push(t);return e},[]).join(" "),uE={[B.u]:[rn.mb.fonts,rn.mb.standard_emphasis,rn.mb.advanced_emphasis,rn.mb.lists,rn.mb.indents,rn.mb.block,rn.mb.font_family,rn.mb.font_size,rn.mb.bold,rn.mb.italic,rn.mb.underline,rn.mb.strikethrough,rn.mb.superscript,rn.mb.subscript,rn.mb.code_format,rn.mb.outdent,rn.mb.indent,rn.mb.bulleted_list,rn.mb.numbered_list],[B.h]:[rn.mb.anchor],[B.i]:[rn.mb.charmap],[B.j]:[rn.mb.source_code],[B.k]:[rn.mb.source_code],[B.l]:[rn.mb.colors,rn.mb.text_color,rn.mb.background_color],[B.x]:[rn.mb.icon],[B.n]:[rn.mb.cta],[B.o]:[rn.mb.cta],[B.r]:[rn.mb.emoji],[B.s]:[rn.mb.emoji],[B.v]:[rn.mb.hr],[B.y]:[rn.mb.image],[B.z]:[rn.mb.image],[B.A]:[rn.mb.link],[B.B]:[rn.mb.link],[B.D]:[rn.mb.embed],[B.E]:[rn.mb.embed],[B.H]:[rn.mb.nonbreaking_space],[B.J]:[rn.mb.personalize],[B.O]:[rn.mb.table],[B.P]:[rn.mb.video],[B.Q]:[rn.mb.video],[B.R]:[rn.mb.visual_blocks],[B.b]:[rn.mb.content_generation],[B.c]:[rn.mb.content_generation],[B.d]:[rn.mb.copilot_collaboration]},dE=(e,t)=>t.filter(t=>{const n=uE[t];if(!n)return!0;return!!e.find(e=>n.includes(rn.mb[e]))}),fE=(e,t)=>!Array.isArray(e)||!e.length||e.includes(t),pE=(e=[])=>{if(!Array.isArray(e)||!e.length)return null;const t=e.reduce((e,t)=>{Object.prototype.hasOwnProperty.call(rn.mb,t)&&e.push(...rn.mb[t]);return e},[]);if(!t.length)return null;t.push(rn.R);return t},mE=["toolbarControls","responsive","multiRow"];function hE(e,t,n){const{hideFontFamily:o,hideFontSize:r,useListButtons:i,useSourceCodeButton:a}=n;let s=[];o||s.push({type:aE.i.SELECT,control:rn.z,priority:8});r||s.push({type:aE.i.SELECT,control:rn.A,priority:7});s.push({type:aE.i.BUTTON,control:rn.k,priority:1},{type:aE.i.BUTTON,control:rn.H,priority:2},{type:aE.i.BUTTON,control:rn.eb,priority:3},{type:aE.i.BUTTON,control:rn.db,priority:4},{type:aE.i.BUTTON,control:rn.i,priority:4},{type:aE.i.BUTTON,control:rn.a,priority:5},{type:aE.i.BUTTON,control:i?rn.n:rn.m,priority:6},{type:aE.i.BUTTON,control:i?rn.N:rn.M,priority:6},{type:aE.i.BUTTON,control:rn.I,priority:9},{type:aE.i.BUTTON,control:rn.O,priority:10},{type:aE.i.BUTTON,control:rn.G,priority:10},{type:aE.i.BUTTON,control:rn.R,priority:11});s=s.filter(({control:t})=>fE(e,t));const l=[rn.X,rn.Z,rn.Y,rn.r];a&&l.push(rn.W);const c={type:aE.i.MORE_MENU,menuItems:l.filter(t=>fE(e,t))};let u=!1;if(t&&s.length>4||c.menuItems.length){s.push(c);u=!0}return{formatControls:s,hasMoreMenu:u}}function gE(e,{showRssTokens:t,useCharmapButton:n,useSnippet:o,useContentGeneration:r,useCopilotCollaboration:i,hsContentAssistant:a,scopes:s=[]}){const l=[{type:aE.i.BUTTON,control:rn.J},{type:aE.i.BUTTON,control:rn.x},{type:aE.i.BUTTON,control:rn.E}],c=Object(iE.b)(aE.a,s);i&&c&&a?l.push({type:aE.i.BUTTON,control:rn.t}):r&&a&&l.push({type:aE.i.BUTTON,control:rn.s});o&&l.push({type:aE.i.BUTTON,control:rn.U});n&&l.push({type:aE.i.BUTTON,control:rn.q});t&&l.push({type:aE.i.BUTTON,control:rn.T});return l.filter(({control:t})=>fE(e,t))}function bE(e,{editContext:t,contentType:n,scopes:o=[],useEmbed:r,useVideo:i,useCallout:a,useCharmapButton:s,useIcon:l}){const c=[];(Object(iE.b)(aE.c,o)||Object(iE.b)(aE.g,o))&&c.push(rn.u);"email"!==n&&r&&c.push(rn.w);"email"!==n&&i&&c.push(rn.jb);c.push(rn.ab);a&&c.push(rn.o);s||c.push(rn.p);"email"!==n&&l&&c.push(rn.C);"email"!==n&&c.push(rn.h);"post_body"===t&&c.push(rn.Q);c.push(rn.B);c.push(rn.L);return c.filter(t=>fE(e,t))}function vE(e,{useSourceCode:t,useGoogleDocs:n}){const o=[rn.kb];t&&o.unshift(rn.V);n&&o.push(rn.F);return o.filter(t=>fE(e,t))}const yE=(e={})=>(t={})=>{const{toolbarControls:n=[],responsive:o=!0,multiRow:r=!1}=e,i=Object(d.a)(e,mE),a=pE(t.enabledFeatures)||n;t=Object.assign({},i,t);const s=[],l=[];fE(a,rn.j)&&s.push({controls:[{type:aE.i.SELECT,control:rn.j}]});const{formatControls:c,hasMoreMenu:u}=hE(a,o,t);if(c.length){const e={controls:c};if(o&&u){e.responsivePriority=0;e.boundary=3}s.push(e)}const f=gE(a,t),p=bE(a,t);p.length&&f.push({type:aE.i.INSERT_MENU,menuItems:p});if(f.length){const e={controls:f};if(o&&p.length){e.responsivePriority=1;e.boundary=0}l.push(e)}t.usePersonalization&&!t.hidePersonalizationButton&&fE(a,rn.P)&&l.push({controls:[{type:aE.i.BUTTON,control:rn.P}]});const m=vE(a,t);m.length&&l.push({controls:[{type:aE.i.ADVANCED_MENU,menuItems:m}]});const h=(e,t,n)=>{0!==n&&e.push({controls:[{type:aE.i.DIVIDER}]});e.push(t);return e};return r?[s.reduce(h,[]),l.reduce(h,[])]:[...s,...l].reduce(h,[])},CE=e=>yE(Object.assign({responsive:!0},e,{multiRow:!0}));function OE(){return[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]}]}function xE(){return OE().reduce((e,t)=>[...e,...t.items],[])}yE();const jE="svg[*],defs[*],pattern[*],desc[*],metadata[*],g[*],mask[*],path[*],line[*],marker[*],rect[*],circle[*],ellipse[*],polygon[*],polyline[*],linearGradient[*],radialGradient[*],stop[*],image[*],view[*],text[*],textPath[*],title[*],tspan[*],glyph[*],symbol[*],switch[*],use[*]",SE=`iframe[${["id","accesskey","class","dir","lang","style","tabindex","title","role","allow","contenteditable","contextmenu","draggable","dropzone","hidden","spellcheck","translate","xml:lang","src","name","width","height","longdesc","frameborder","marginwidth","marginheight","scrolling","align","sandbox","seamless","allowfullscreen","loading"].join("|")}]`,wE="address|figure|blockquote|div|dl|fieldset|form|h1|h2|h3|h4|h5|h6|hr|menu|ol|p|pre|table|ul",TE=[{selector:"b,strong,em,i,font,u,strike,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0},{selector:"img",attributes:["align"],remove:"empty",split:!1,expand:!1,deep:!1},{selector:".mce-token",styles:{margin:"auto","margin-left":"auto","margin-right":"auto"},remove:"none",split:!1,expand:!1,deep:!1}],kE=["background-color","text-align","text-decoration","font-style","font-weight","vertical-align","margin-left","margin","border","border-style","border-color","color","font-size"].join(" "),NE={mode:"exact",preview_styles:!1,browser_spellcheck:!0,convert_urls:!1,relative_urls:!1,remove_script_host:!1,allow_script_urls:!1,withoutFileManager:!1,media_alt_source:!1,media_poster:!1,media_live_embeds:!1,contextmenu:"link image inserttable | cell row column deletetable",forced_root_block:!1,force_p_newlines:Boolean("4"===p.a.majorVersion),extended_valid_elements:`#p[*],a[*],span[*],img[*],div[*],button[*],section[*],i[*],blockquote[*],address[*],blockquotespan[*],script[*],video[*],table[*],${SE},${jE}`,valid_children:`+a[${wE}}]`,custom_elements:"~svg",statusbar:!1,table_toolbar:!1,allow_html_in_named_anchor:!0,formats:{removeformat:TE,hsInlineTarget:gf.d},protect:[/<!--\[.*?\]>[\s\S]*?(-->|<!\[.*?\]-->)/g,/<!--[\s]*?<!\[.*\]-->/g],table_default_attributes:{border:"0"},paste_retain_style_properties:kE,paste_webkit_styles:kE},EE=()=>({"border-color":an.FLINT,"border-collapse":"collapse","table-layout":"fixed","margin-left":"auto","margin-right":"auto","border-width":"1px","border-style":"solid"});function AE(){return Nt.a&&aE.h.indexOf(Nt.a.lang)>-1&&Nt.a.langEnabled?Nt.a.lang:"en"}function IE(e){return e.getContent({format:"raw"})}class RE{constructor(e){this.addNonTypingUndoLevel=e=>{this.typing=!1;this.add({},e)};this.locks=0;this.typing=!1;this.beforeBookmark=null;this.lastLevel=!1;this.editor=e;this.data=[];let t=!0;e.on("init",()=>{this.add()});e.on("BeforeExecCommand",e=>{const t=e.command;!1===["Undo","Redo","mceRepaint","SelectAll"].includes(t)&&this.beforeChange()});e.on("ExecCommand",e=>{const t=e.command;!1===["Undo","Redo","mceRepaint","SelectAll","mceFocus"].includes(t)&&this.addNonTypingUndoLevel(e)});e.on("ObjectResizeStart Cut",()=>{this.beforeChange()});e.on("SaveContent ObjectResized blur",this.addNonTypingUndoLevel);e.on("DragEnd",this.addNonTypingUndoLevel);e.on("KeyUp",n=>{const o=n.keyCode;if(!n.isDefaultPrevented()){if(o>=33&&o<=36||o>=37&&o<=40||45===o||13===o||n.ctrlKey){this.addNonTypingUndoLevel();e.nodeChanged()}(46===o||8===o||p.a.Env.os.isOSX()&&(91===o||93===o))&&e.nodeChanged();if(t&&this.typing){if(!e.isDirty()){e.setDirty(this.lastLevel&&IE(e)!==this.lastLevel.content);e.isDirty()&&e.fire("change",{level:this.lastLevel,lastLevel:null})}e.fire("TypingUndo");t=!1;e.nodeChanged()}}});e.on("KeyDown",e=>{const n=e.keyCode;if(e.isDefaultPrevented())return;if(n>=33&&n<=36||n>=37&&n<=40||45===n){this.typing&&this.addNonTypingUndoLevel(e);return}const o=e.ctrlKey&&!e.altKey||e.metaKey;if((n<16||n>20)&&224!==n&&91!==n&&!this.typing&&!o){this.beforeChange();this.typing=!0;this.add({},e);t=!0}});e.on("MouseDown",(function(e){this.typing&&this.addNonTypingUndoLevel(e)}));e.addShortcut("meta+z","","Undo");e.addShortcut("meta+y,meta+shift+z","","Redo");e.on("AddUndo Undo Redo ClearUndos",t=>{t.isDefaultPrevented()||e.nodeChanged()})}beforeChange(){this.locks||(this.beforeBookmark=this.editor.selection.getBookmark(2,!0))}add(e,t){(e=e||{}).content=IE(this.editor);if(this.locks||this.editor.removed)return null;if(this.editor.fire("BeforeAddUndo",{level:e,lastLevel:this.lastLevel,originalEvent:t}).isDefaultPrevented())return null;if(this.lastLevel&&this.lastLevel.content===e.content)return null;this.editor.fire("BeforeBookmark",{bookmark:this.beforeBookmark});e.bookmark=this.editor.selection.getBookmark(2,!0);const n={level:e,lastLevel:this.lastLevel,originalEvent:t};this.editor.fire("AddUndo",n);if(this.lastLevel){this.editor.setDirty(!0);this.editor.fire("change",n)}this.lastLevel=e;return e}undo(){if(this.typing){this.add();this.typing=!1}this.editor.fire("AppUndo")}redo(){this.editor.fire("AppRedo")}clear(){this.typing=!1;this.lastLevel=null;this.editor.fire("ClearUndos")}hasUndo(){}hasRedo(){}transact(e){this.beforeChange();try{this.locks++;e()}finally{this.locks--}this.add()}ignore(e){try{this.locks++;e()}finally{this.locks--}}}const LE=(e=!1,t)=>e&&!Object(iE.b)(aE.b,t),_E=()=>({margin:"0px auto",display:"block"}),PE={[aE.e]:{flag:"useFlexibleAssociations"}};p.a.baseURL=Object(m.b)("tinymce","/js/tinymce");const ME=(e=>(t={})=>{const n=Object.assign({},e,t),{gates:o=[],scopes:r=[],useAppUndo:i,getCanvasToolbar:a,hideFontFamily:s,hideFontSize:l,getAllContentAnchors:c,useEmbed:u=!0,useBrandingFonts:d,useIcon:f=!0,allowFileDownload:p=!0,hidePersonalizationFallbacks:h=!1,useVideo:g=Object(iE.b)(aE.d,r),useSourceCode:b,sourceCodeDisabledComponent:v,enabledFeatures:C=[],supportedCrmObjectFQNs:O=[],customObjectPrefixes:x={},standardOverrides:j,enforceEnabledFeatures:S=!1,customFontsList:w,useDataTokens:T=!1,propertyFiltersCallback:N,usePersonalizationAsUpgradePoint:E=!1,dataTokenContext:A,renderDataTokenPopover:I,unsupportedTokens:R,unsupportedDataTokenPaths:L=[],stripImageBlobs:_,hasToolbarAiImagesButton:P=!1,useImageGenerationSlashCommand:M=!1,imageLoadingDefaultValue:D,useContentGeneration:F=!1,useCopilotCollaboration:U=!1}=n,q=Object(iE.b)(aE.a,r),{useFlexibleAssociations:$=!1}=Object(iE.a)(PE,o).flags,z=b||v&&"function"==typeof v.type,W=LE(_,r);let G;G=T?B.p:B.J;const K=Object.assign({},n,{useEmbed:u,useBrandingFonts:d,useVideo:g,hideFontFamily:s,hideFontSize:l,useSourceCode:z,useIcon:f}),Y=Object.assign({defaults:aE.j},w?{customFonts:w}:{}),{absoluteUrl:X,codeMirror:Z,contentDomain:Q,contentType:J,customColors:ee,domainIsSsl:te,height:ne,minHeight:oe=400,maxHeight:re,includeInternalContactRecord:ie=!0,includeSettingsCategory:ae,includeSubscriptionType:se,pickerComponents:le,FileManagerComponent:ce,isRtl:ue,trackInteraction:de,appName:fe,usageTracker:pe,uploadedFileAccess:me,emailSubscriptionLinkTypes:he=y,allowEmptyFallbacks:ge,hsContentAssistant:be={}}=K,ve="email"===J,ye=Object(iE.b)(aE.f,r),Ce=void 0===ge||ge,Oe=[...sE,...lE(K,o,r),V],xe=S?dE(C,Oe):Oe,je=void 0===ae?!ve:!ae,Se=void 0===se?ve:!!se;return Object.assign({},NE,{height:ne,min_height:oe,max_height:re,inline:!1,menubar:!1,invalid_styles:cE(K),content_css:Object(m.b)("tinymce-themes","/bundles/content-iframe.css"),plugins:xe.join(" "),toolbar:[],canvasToolbar:a(K),theme:k.a,useDarkBackground:!0,enforceEnabledFeatures:S,enabledFeatures:C,useTableContextualToolbar:!0,images_upload_handler:Vo({inpage:!1,appName:fe,trackInteraction:de,usageTracker:pe,uploadFile:Fo.bind(null,qo.a,me),stripImageBlobs:W}),paste_data_images:!0,skin:!1,table_default_styles:Object(aE.m)(),table_default_attributes:{},language:AE(),language_url:ko,UndoManager:i?RE:null,directionality:ue?"rtl":"ltr",absoluteUrl:X,contentDomain:Q,domainIsSsl:te,custom_colors:ee,apiClient:qo.a,[$o.a]:!1,[$o.b]:{isEmail:ve,richTextLibStaticPrefix:Object(m.a)("rich-text-lib"),pluginsCSSRoot:Object(m.b)("tinymce-plugins","/bundles"),pickerComponents:le,FileManagerComponent:ce,usageTracker:pe,trackInteraction:de,appName:fe,[cr.a]:{[cr.d.HIDE_TARGET_BLANK_AND_NO_FOLLOW]:ve,[cr.d.ALLOW_RELATIVE_LINKS]:!ve,[cr.d.ALLOW_MEETING_LINKS]:!0,[cr.d.ALLOW_ANCHOR_LINKS]:!ve,[cr.d.EMAIL_SUBSCRIPTION_LINK_TYPES]:ve?he:void 0,[cr.d.ALLOW_FILE_DOWNLOAD]:p},[lr.f]:{[lr.j.FONT_FORMATS]:Y,[lr.j.FONT_SIZE_FORMATS]:aE.k,[lr.j.USE_BRANDING_FONTS]:d,[lr.j.LINE_HEIGHTS]:aE.n,[lr.j.KEYBOARD_ESCAPE_FORMATS]:ve?["center"]:[],[lr.j.HIDE_FONT_SIZE]:l,[lr.j.HIDE_FONT_FAMILY]:s,[lr.j.BLOCK_FORMATS]:xE()},[H.b]:{[H.d.AUTO_MAX_WIDTH]:ve,[H.d.USE_CUSTOM_ALT_TEXT]:!0,[H.d.STRIP_IMAGE_BLOBS]:W,[H.d.HAS_IMAGE_GENERATION_TOOLBAR_BUTTON]:P,[H.d.USE_IMAGE_GENERATION_SLASH_COMMAND]:M&&(F||U&&q),[H.d.IMAGE_LOADING_DEFAULT_VALUE]:D},[Go]:{[Ko.DEFAULT_STYLES]:_E()},[G]:{[No.g.HIDE_SITE_SETTINGS_CATEGORY]:je,[No.g.INCLUDE_SUBSCRIPTION_TYPE_CATEGORY]:Se,[No.g.INCLUDE_INTERNAL_CONTACT_RECORD]:ve&&ie,[No.g.ALLOW_EMPTY_FALLBACKS]:Ce,[No.g.IS_EMAIL]:ve,[No.g.SUPPORTED_CRM_OBJECT_FQNS]:O,[No.g.CUSTOM_OBJECT_PREFIXES]:x,[No.g.HIDE_FALLBACKS]:h,[No.g.USE_FLEXIBLE_ASSOCIATIONS]:$,[No.g.PROPERTY_FILTERS_CALLBACK]:N,[No.g.USE_AS_UPGRADE_POINT]:E,[No.g.TOKEN_PATHS_CONTEXT]:A,[No.g.UNSUPPORTED_TOKENS]:R,[Eo.d.UNSUPPORTED_DATA_TOKEN_PATHS]:L,[Eo.d.RENDER_DATA_TOKEN_POPOVER]:I},[ar]:{[sr.USE_DYNAMIC_CSS_LOADING]:Z&&Z.useDynamicCssLoading,[sr.DISABLED_TOOLTIP]:b?void 0:v},[hr]:{},[gr.a]:{[gr.b.EMBED_URL_PASTING]:u&&!ve,[gr.b.DEFAULT_STYLES_MAP]:{TABLE:EE()},[gr.b.DEFAULT_ATTRIBUTES_MAP]:{TABLE:{}},[gr.b.IMAGES_UPLOAD_FILE_ACCESS]:me},[ur.b]:{[ur.f.GET_ALL_CONTENT_ANCHORS]:c},[Cr]:{[Or.ENABLE_FULL_WIDTH]:!0,[Or.USE_EMBED]:u,[Or.USE_CONVERSION_ASSET_OPTIONS_PANEL]:ye},[Tr]:{[kr.DEFAULT_CELL_STYLES]:Object(aE.l)()},[Et]:{[At.IS_DISABLED]:be.isDisabled,[At.SELECTION_COMMANDS]:be.selectionCommands,[At.SLASH_COMMANDS]:be.slashCommands,[At.BRAND_VOICE_OPTIONS]:be.brandVoiceOptions,[At.COPILOT_COLLAB_CONTEXT_VALUE]:be.copilotCollabContextValue}},appUrl:Object(Ka.a)(),media_live_embeds:!0,gates:o,scopes:r},j)})({getCanvasToolbar:CE(),standardOverrides:{legacy_force_p_newlines:!0}});var DE=n(38),BE=n(1277);const FE=["contentType","gates","scopes"];function UE(e){const{contentType:t,gates:n,scopes:o}=e,r=Object(d.a)(e,FE),i=[BE.c];o.indexOf(DE.f)>-1&&i.push(BE.b);"email"===t&&o.indexOf(DE.V)>-1&&i.push(BE.e);"email"===t&&o.indexOf(DE.T)>-1&&i.push(BE.s);const a=o.indexOf(DE.B)>-1,s="blog"!==t&&"blog_post"!==t;return ME(Object.assign({supportedCrmObjectFQNs:i,scopes:o,gates:n,contentType:t,useSourceCode:!0,usePersonalization:s,usePersonalizationAsUpgradePoint:s&&!a,useDataTokens:!0},r))}var VE=n(73),HE=n(55),qE=n(2606);const $E=["tinymceConfig","readOnly","value","className","id","onFieldChange","onValidateRequiredValue"];class zE extends i.Component{constructor(e){super(e);this.onChange=this.onChange.bind(this);this.onKeyUp=this.onKeyUp.bind(this);this.onBlur=this.onBlur.bind(this);this.fieldChange=this.fieldChange.bind(this);this.debouncedFieldChange=Object(VE.debounce)(this.fieldChange,100)}shouldComponentUpdate(e){const{id:t=null,readOnly:n=!1,uniqueKey:o=null,value:r}=e,{id:i=null,readOnly:a=!1,value:s}=this.props;return i!==t||a!==n||s!==r&&null!==o}fieldChange(e){const{value:t,onFieldChange:n,readOnly:o=!1}=this.props;if(o||e.removed)return;const r=e.getContent();t!==r&&n(r)}isRemoving(e){return e.originalEvent&&e.originalEvent.is_removing}onChange(e,t){const{fireOnChangeForRemove:n=!0}=this.props;this.isRemoving(e)&&!n||this.fieldChange(t)}onKeyUp(e,t){this.debouncedFieldChange(t)}onBlur(e){const{onValidateRequiredValue:t=HE.a}=this.props;t(e.target.getContent())}render(){const e=this.props,{tinymceConfig:t,readOnly:n=!1,value:o,className:r="",id:i=null,onValidateRequiredValue:a=HE.a}=e,s=Object(d.a)(e,$E);return Object(Ye.jsx)(qE.a,Object.assign({config:t,content:o||"",readOnly:n,onBlur:this.onBlur,onChange:this.onChange,onKeyUp:this.onKeyUp,className:r},s))}}var WE=zE,GE=n(698),KE=n(745),YE=n(221),XE=n(65),ZE=n(219),QE=n(36),JE=n(239),eA=n(243),tA=n(2678),nA=n(228),oA=n(78);const rA=Object.keys(ZE.b).filter(e=>ZE.b[e].categoryId===QE.d.id),iA=e=>{let t="page";(-1!==e.indexOf("email")||-1!==e.indexOf("EMAIL")||rA.find(t=>e.includes(t)))&&(t="email");["blog_post","BLOG_POST"].find(t=>e.includes(t))&&(t="blog_post");return t},aA=Object(XE.a)([JE.b,JE.a,eA.b,tA.h,nA.i],(e,t,n,o,r)=>{const i={contentType:"page"};switch(e){case oA.LAYOUT:case oA.GLOBAL_GROUP:{const e=o[t],n=iA([ZE.a[e.templateType].name]);return{contentType:iA(n)}}case oA.CUSTOM_WIDGET:{const e=n[t];return e?{contentType:iA(r?e.contentTypes:e.hostTemplateTypes)}:i}default:return i}});var sA=n(66);function lA({family:e,path:t}){return qo.a.get("content/fonts/v1/by-asset-path/"+t,{query:{family:e}})}var cA=n(63);function uA(e){const{request:t,receive:n,error:o}=uA;return r=>{r(t(e));return lA(e).then(t=>{r(n(e,t))}).catch(t=>{r(o(e,t))})}}uA.request=function(e){return{type:cA.CUSTOM_FONTS_FETCH_FONTS,options:e}};uA.receive=function(e,t){return{type:cA.CUSTOM_FONTS_FETCH_FONTS,fonts:t,options:e}};uA.error=function(e,t){return{type:cA.CUSTOM_FONTS_FETCH_FONTS,error:t,options:e}};var dA=n(89);const fA=(e,t)=>{const n=e.fonts.customFonts;return t&&t.path&&n[t.path]||[]},pA=(e,t)=>{const n=e.fonts.customFontsRequestStatus;return t&&t.path&&n[t.path]||dA.UNINITIALIZED},mA=l()(c.a).withConfig({displayName:"RichTextWithConfig__StyledUIFlex",componentId:"auj64d-0"})(["height:400px;"]),hA=(e,t)=>{const{modulePath:n}=t;return{customFontsFetchStatus:pA(e,{path:n}),customFontsList:fA(e,{path:n}),gates:Object.keys(Object(YE.a)(e)),scopes:Object(YE.t)(e),tinymceOptions:aA(e)}},gA={fetchCustomFontsList:uA};class bA extends i.Component{componentDidMount(){const{customFontsFetchStatus:e,fetchCustomFontsList:t,modulePath:n,shouldFetchCustomFonts:o}=this.props;o&&n&&e===sA.UNINITIALIZED&&t({path:n})}getConfig(){if(this.config)return this.config;const{customFontsList:e,enabled_features:t,gates:n,pickerComponents:o,scopes:r,tinymceOptions:i,usageTracker:a}=this.props;this.config=UE(Object.assign({appName:a.appName,customFontsList:e,enabledFeatures:Array.isArray(t)?[...t]:[],gates:n,pickerComponents:o,scopes:r,usageTracker:a.tracker},i));return this.config}render(){const{customFontsFetchStatus:e,shouldFetchCustomFonts:t}=this.props;return t&&e!==sA.SUCCEEDED&&e!==sA.FAILED?Object(Ye.jsx)(mA,{align:"center",justify:"center",direction:"column",children:Object(Ye.jsx)(u.a,{layout:"centered",showLabel:!0})}):Object(Ye.jsx)(WE,Object.assign({tinymceConfig:this.getConfig()},this.props))}}bA.propTypes={customFontsList:r.a.arrayOf(r.a.object),customFontsFetchStatus:r.a.string.isRequired,enabled_features:r.a.arrayOf(r.a.string),fetchCustomFontsList:r.a.func.isRequired,gates:r.a.array.isRequired,modulePath:r.a.string,pickerComponents:r.a.object.isRequired,scopes:r.a.array.isRequired,shouldFetchCustomFonts:r.a.bool,tinymceOptions:r.a.object.isRequired,usageTracker:r.a.object.isRequired};const vA=Object(a.connect)(hA,gA)(bA);class yA extends i.Component{render(){return Object(Ye.jsx)(KE.a.Consumer,{children:e=>Object(Ye.jsx)(GE.a.Consumer,{children:t=>Object(Ye.jsx)(vA,Object.assign({pickerComponents:t,usageTracker:e},this.props))})})}}t.default=yA}}]);
//# sourceMappingURL=//static.hsappstatic.net/DesignManagerIde/static-2.61259/expanded-mofo.js.map