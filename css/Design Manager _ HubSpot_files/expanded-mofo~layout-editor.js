(window.webpackJsonp=window.webpackJsonp||[]).push([["expanded-mofo~layout-editor"],{2607:function(e,t,s){"use strict";var i=s(2),n=s(40),r=s(288),l=s.n(r),a=s(59),o=s(287),c=s.n(o),d=s(6),u=s(27),h=s(73),p=s(279),b=s(729),O=s(282),m=s(443),f=s(773),j=s(696),g=s(604),y=s(352),F=s(2712),x=s(2695),C=s(100),v=s(324),T=s(67),D=s(45);const k=c.a.div.withConfig({displayName:"EditFormBreadcrumbs__Wrapper",componentId:"sc-13211gz-0"})(["border-bottom:",";"],e=>e.hideBottomBorder?"none":"1px solid "+v.BATTLESHIP);class E extends n.PureComponent{renderBreadCrumbs(){const{fieldKey:e,fields:t,module:s,onKeyChange:i}=this.props;return e&&t?e.reduce((n,r,l)=>{const a=e.slice(0,l+1),o=Object(C.g)(t,a)||{},c=!e||l===e.length-1;if(Object(C.t)(o))return n;if(o&&"number"==typeof r){const e=Object(T.a)(s,a);n.push(Object(D.jsx)(F.a,{disabled:c,onClick:()=>i(a),children:Object(D.jsx)(x.a,{asString:!0,defaultLabel:o.label||""+e,field:o,value:e})},a.join("")))}else o&&!o.occurrence&&n.push(Object(D.jsx)(F.a,{disabled:c,onClick:()=>i(a),children:o.label},a.join("")));return n},[]):null}render(){const{className:e,hideBottomBorder:t,rootBreadcrumbs:s}=this.props;return Object(D.jsx)(k,{hideBottomBorder:t,children:Object(D.jsxs)(f.a,{className:e,truncateToLevels:2,singleBreadcrumbIsBackLink:!1,children:[s&&s,this.renderBreadCrumbs()]})})}}E.defaultProps={className:"m-y-2 p-x-5"};var I=E,K=s(1129),V=s(1138),R=s(1130),S=s(172),A=s(485),L=s(725),N=s(1139),_=s(2786),P=s(1140),B=s(1133),M=s(2758);const w=e=>"ContentComponents.cmv2.occurrence."+e;function U(){const e=Object(R.b)();return function(t,s){return{validationErrorIndexes:e(t,s)}}}const G={addValidationError:V.a,removeValidationError:V.b,shiftValidationError:V.c},q=Object(a.connect)(U,G);class H extends n.Component{constructor(e){super(e);this.onChange=this.onChange.bind(this);this.onAddOccurrence=this.onAddOccurrence.bind(this);this.onDeleteOccurrence=this.onDeleteOccurrence.bind(this);this.onDragOccurrence=this.onDragOccurrence.bind(this);this.onDropOccurrence=this.onDropOccurrence.bind(this);this.onEditOccurrence=this.onEditOccurrence.bind(this);this.renderValue=this.renderValue.bind(this);this.state={values:e.values,isCloning:!1,clonedIndexes:[]}}componentDidUpdate(e,t){const{isCloning:s,values:i}=this.state,{values:n}=this.props;t.values.length<i.length&&!s&&this.onEditOccurrence(this.state.values.length-1);!t.isCloning&&s&&this.setState({isCloning:!1});Object(h.isEqual)(e.values,n)||Object(h.isEqual)(i,n)||this.setState({values:n||[]})}get hasNoOccurrences(){const{values:e}=this.state;return!(e&&e.length)}get hasMinOccurrences(){const{values:e}=this.state,{min:t}=this.props.field.occurrence;return e&&t&&e.length<=t}get hasMaxOccurrences(){const{values:e}=this.state,{max:t}=this.props.field.occurrence;return e&&t&&e.length>=t}get hasMaxFeaturedOccurrences(){const{featuredLimit:e}=this.props,{values:t}=this.state;if(!e)return!1;return t.reduce((e,t)=>{t&&t[M.m]&&t[M.m].occurrence&&t[M.m].occurrence.featured&&(e+=1);return e},0)>=e}get seleniumKey(){return this.props.fieldKey.join(".")+":occurrences"}onChange(e,t=!0){const{onFieldChange:s,fieldKey:i}=this.props;this.setState({values:e});t&&s(i,e)}onAddOccurrence(){const{featuredEnabled:e,field:t}=this.props,{values:s=[]}=this.state;let i=Object(S.b)(t);e&&i&&(i=Object.assign({},i,{[M.m]:{occurrence:{featured:!1}}}));this.onChange(s.concat([i]))}onDeleteOccurrence(e){const{validationErrorIndexes:t,fieldKey:s}=this.props,{values:i}=this.state;t.includes(e)&&this.props.removeValidationError([...s,e]);const n=i.slice(0,e).concat(i.slice(e+1));t.forEach(t=>{t>e&&this.props.shiftValidationError(s,t,t-1)});this.onChange(n)}onDragOccurrence(e,t){const{values:s}=this.state,i=s[e];let n=s.slice(0,e).concat(s.slice(e+1));n=n.slice(0,t).concat(i,n.slice(t));this.onChange(n,!1)}onDropOccurrence(){this.onChange(this.state.values)}onEditOccurrence(e){const{setFieldKey:t,fieldKey:s}=this.props;t(s.concat(e))}toggleFeatureOccurrence(e,t){const{values:s}=this.state,i=[...s];i[e]=Object.assign({},i[e],{[M.m]:{occurrence:{featured:!t}}});this.onChange(i)}onDuplicateOccurrence(e){const{featuredEnabled:t,validationErrorIndexes:s,fieldKey:i}=this.props,{values:n}=this.state,r=n.length;let l=n[e];t&&l&&(l=Object.assign({},l,{[M.m]:{occurrence:{featured:!1}}}));s.includes(""+e)&&this.props.addValidationError([...i,r]);this.setState({isCloning:!0,clonedIndexes:this.state.clonedIndexes.concat([r])});this.onChange(n.concat([l]))}renderAddButton(){const{disabled:e,readOnly:t}=this.props;return e||t||this.hasNoOccurrences||this.hasMaxOccurrences?null:Object(D.jsx)(m.a,{"data-selenium":this.seleniumKey+":add-button",onClick:this.onAddOccurrence,use:"link",children:Object(D.jsx)(A.a,{children:Object(D.jsx)(p.a,{message:w("addLink")})})})}renderDisabledAlert(){const{disabled:e,field:t}=this.props,{disabled_controls:s}=t;return e&&s?Object(D.jsx)(j.a,{className:"m-bottom-3",type:"tip",children:Object(D.jsx)(B.a,{label:s.message,useStrict:!0})}):null}renderValue(e,t){const{disabled:s,featuredEnabled:i,field:n,fieldKey:r,resources:l,readOnly:a,validationErrorIndexes:o}=this.props,c=!this.hasMinOccurrences,d=n.id||n.name,u=i&&e&&e[M.m]&&e[M.m].occurrence&&e[M.m].occurrence.featured,h=Object(D.jsx)(x.a,{defaultLabel:`${n.label} ${t+1}`,field:n,resources:l,value:e});return Object(D.jsx)(N.a,{cloned:this.state.clonedIndexes.includes(t),deletable:c,featured:u,featuredEnabled:i,fieldId:d,fieldKey:r,hasMaxFeaturedOccurrences:this.hasMaxFeaturedOccurrences,hasMaxOccurrences:this.hasMaxOccurrences,index:t,onDeleteOccurrence:()=>this.onDeleteOccurrence(t),onDuplicateOccurrence:()=>this.onDuplicateOccurrence(t),onEditOccurrence:()=>this.onEditOccurrence(t),toggleFeatureOccurrence:()=>this.toggleFeatureOccurrence(t,u),onDragOccurrence:this.onDragOccurrence,onDropOccurrence:this.onDropOccurrence,readOnly:a||s,hasValidationError:o.includes(t),value:h},`${d}-${t}`)}renderValues(){const{disabled:e,field:{label:t},fieldKey:s,readOnly:i}=this.props,{values:n}=this.state;let r=n.map(this.renderValue);if(this.hasNoOccurrences){const n=Object(D.jsx)(m.a,{onClick:this.onAddOccurrence,"data-selenium":s.join(".")+":addFirst",disabled:i||e,use:"link",children:Object(D.jsx)(p.a,{message:w("noOccurrences.addLink")})});r=Object(D.jsx)("tr",{className:"occurrences-table-row is--empty",children:Object(D.jsx)("td",{className:"text-center",children:Object(D.jsx)(O.a,{message:w("noOccurrences.placeholder"),options:{fieldLabel:t,addLink:n}})})})}return Object(D.jsx)(L.a,{className:"occurrences-table","data-selenium":this.seleniumKey+":table",flush:!0,hover:!1,responsive:!1,children:Object(D.jsx)("tbody",{children:r})})}renderLabel(){const{field:e,fieldKey:t,LabelComponent:s,onFieldChange:i,onFieldReset:n,allowFieldReset:r,isDefaultValue:l,scrollToField:a}=this.props,{label:o,type:c,inherited_value:d}=e;return Object(D.jsx)(_.a,{allowFieldReset:r,className:"display-inline-flex",fieldKey:t,fieldType:c,inheritedValue:d,isDefaultValue:l,isOccurrencesLabel:!0,label:o,LabelComponent:s,onFieldReset:n,onFieldUnlink:()=>{i(t,e.default)},scrollToField:a})}render(){const{field:e,fieldKey:t}=this.props,{label:s,name:i,required:n,help_text:r,inline_help_text:l}=e;return Object(D.jsx)(P.a,{"data-field-key":t.join("."),"aria-label":s||i,className:"cmv2-occurrence",helpText:r,inlineHelpText:l,label:this.renderLabel(),labelItemRight:this.renderAddButton(),required:n,children:Object(D.jsxs)(D.Fragment,{children:[this.renderDisabledAlert(),this.renderValues()]})})}}H.defaultProps={fieldKey:[],values:[],readOnly:!1};var Q=q(H),W=s(2634),z=s(2740),$=s(160);function Y(e,t){if(!Array.isArray(t)||!e)return;if(!t.length||"object"!=typeof e)return e;const s=t[0],i=e[s];return Object(T.c)(i)?e:"number"==typeof s?Y(i,t.slice(1)):"string"==typeof s?Object.assign({},e,{[s]:Y(i,t.slice(1))}):e}function Z(e,t){if(!Array.isArray(t)||!e)return;if(!t.length||"object"!=typeof e)return e;const s=t[0];return"number"==typeof s?Z(e,t.slice(1)):Object(T.c)(e[s])?void 0:"string"==typeof s?Z(e[s],t.slice(1)):e}function J(e,t,s,i={}){const{maintainOccurrenceArrays:n}=i;let r=null,l=null;t.forEach((i,a)=>{const o=t.slice(0,a+1);if("string"==typeof i){r&&r.children?r=r.children.find(e=>e.name===i):r||(r=e.find(e=>e.name===i));if(r&&r.type===$.GROUP&&!Object(T.c)(r.default)){const e=l||s;l=Object(T.e)(Object(T.g)(e,o,r.default),e)}}!n&&l&&(Object(S.f)(r)||Object(S.e)(o))&&(l=Y(l,o))});return l}const X=["fieldKey","module"],ee=Object.keys(z.a.propTypes);class te extends n.Component{get fields(){const{fields:e,moduleSpec:t}=this.props;return e||t.fields}render(){const e=this.props,{fieldKey:t,module:s}=e,n=Object(i.a)(e,X),r=Object(C.g)(this.fields,t)||{};if(Object(S.d)(t)){let e=Object(T.a)(s,t);if(W.b.isUngated("Cms:FixDefaultValuesInGroups")){const i=J(this.fields,t,s);void 0!==e||Object(T.c)(i)||(e=Z(i,t))}if(void 0===e&&!Object(T.c)(r.default)){e=[Object(T.a)(r.default,t.slice(1))]}const i=Object(h.pick)(n,Object.values(M.r||{}));return Object(D.jsx)(x.a,{asString:!0,defaultLabel:r.label||""+e,field:r,resources:i,value:e})}const l=Object(h.pick)(n,ee);return Object(D.jsx)(z.a,Object.assign({},l,{children:r.label}))}}var se=te,ie=s(605),ne=s(357),re=s(1141),le=s(1135);const ae=["className","fieldKey","fields","module"];class oe extends n.Component{renderFieldKeyHelpText(e){const{help_text:t}=e;return t?Object(D.jsx)(re.a,{iconProps:{className:"m-left-1"},title:Object(D.jsx)(B.a,{label:t})}):null}renderInlineHelpText(e){return e&&Object(D.jsx)(A.a,{className:"cmv2-inline-help-text m-top-1 m-bottom-3 p-x-6",use:"help",children:Object(D.jsx)(B.a,{label:e,useStrict:!0})})}render(){const e=this.props,{className:t,fieldKey:s,fields:n,module:r}=e,a=Object(i.a)(e,ae),o=Object(C.g)(n,s)||{},{type:c,use_large_label:d,inline_help_text:u,icon:h}=o,p=c===$.GROUP&&d;let{label:b}=this.props;s&&(b=Object(D.jsx)(se,Object.assign({},a,{fieldKey:s,fields:n,module:r})));if(!b)return null;const O=p?"cmv2-edit-form-label-large-wrapper"+(u?" with-help-text":""):"",m=l()("cmv2-edit-form-label",t,h&&"align-center"),f=p?ie.a:y.a;return Object(D.jsxs)("div",{className:O,children:[Object(D.jsxs)(f,{className:m,children:[h&&h.name&&Object(D.jsx)(le.a,{icon:h,largerIcon:!0}),Object(D.jsx)(ne.a,{useFlex:!0,fixedChildren:s&&this.renderFieldKeyHelpText(o),children:b})]}),p&&this.renderInlineHelpText(u)]})}}var ce=oe,de=s(99),ue=s(1142);const he=e=>"ContentComponents.cmv2."+e;class pe extends n.Component{constructor(e){super(e);this.setError=this.setError.bind(this);this.onFieldChange=this.onFieldChange.bind(this);this.onValidateRequiredValue=this.onValidateRequiredValue.bind(this);this.state={error:null,missingRequiredValue:!1}}componentDidMount(){this.props.validateOnMount&&this.onValidateRequiredValue()}componentDidUpdate(e){const{validateOnMount:t}=this.props;!e.validateOnMount&&t&&this.onValidateRequiredValue()}setError(e){this.setState({error:e})}onFieldChange(e){const{onFieldChange:t,fieldKey:s,field:i}=this.props;t(s,e);this.state.missingRequiredValue&&!Object(C.p)(i,e)&&this.setState({error:null,missingRequiredValue:!1})}onValidateRequiredValue(e=this.props.value){const{field:t}=this.props;t.required&&(Object(C.p)(t,e)?this.setState({error:Object(de.a)(he("requiredMessage")),missingRequiredValue:!0}):this.state.missingRequiredValue&&this.setState({error:null,missingRequiredValue:!1}))}renderDisabledAlert(){const{disabled:e,field:t}=this.props,{disabled_controls:s}=t;return e&&s?Object(D.jsx)(j.a,{className:"m-bottom-3",type:"tip",children:Object(D.jsx)(B.a,{label:s.message,useStrict:!0})}):null}renderDataTokenViewer(){const{dataTokenValue:e,fieldKey:t,onDataTokenChange:s,useOnDark:i}=this.props;return Object(D.jsx)(ue.a.Consumer,{children:({TokenViewerComponent:n})=>Object(D.jsx)(n,{dataTokenValue:e,fieldKey:t,onDataTokenChange:s,useOnDark:i})})}renderField(e){const{componentsByType:t,contentAssistanceEnabled:s,contentTypes:i,currentFieldKey:n,dataTokenValue:r,disabled:l,editor:a,field:o,fieldKey:c,gates:d,highlightedField:u,hostTemplateTypes:h,isEmailOrAnyType:p,isInEmail:b,isPublicContent:O,modulePath:m,onRedirect:f,readOnly:j,resourceProps:g,scopes:y,scrollToField:F,setFieldKey:x,trackFieldAction:C,useOnDark:v,uploadedFileAccess:T,value:k}=this.props,{error:E}=this.state,I=t[o.type];u.length>0&&u[0]===o.name&&u.shift();return r?this.renderDataTokenViewer():I?Object(D.jsx)(I,Object.assign({},o,g,{componentsByType:t,contentAssistanceEnabled:s,contentTypes:i,currentFieldKey:n,editor:a,error:!!E,fieldKey:c,gates:d,hostTemplateTypes:h,isEmailOrAnyType:p,isInEmail:b,isPublicContent:O,label:e,modulePath:m,onFieldChange:this.onFieldChange,onRedirect:f,onValidateRequiredValue:this.onValidateRequiredValue,readOnly:j||l,scopes:y,scrollToField:F,setError:this.setError,setFieldKey:x,highlightedField:u,trackFieldAction:C,useOnDark:v,uploadedFileAccess:T,value:k})):null}renderLabel(){const{field:e,LabelComponent:t,allowFieldReset:s,fieldKey:i,isDefaultValue:n,onFieldReset:r,scrollToField:l}=this.props,{label:a,type:o,inherited_value:c}=e;return a?Object(D.jsx)(_.a,{allowFieldReset:s,className:"display-inline-flex",fieldKey:i,fieldType:o,isDefaultValue:n,inheritedValue:c,label:a,LabelComponent:t,onFieldUnlink:()=>{this.onFieldChange(e.default)},onFieldReset:r,scrollToField:l}):null}render(){const{allowDataTokens:e,field:t,fieldKey:s,modulePath:i}=this.props,{allow_data_tokens:n,label:r,help_text:l,inline_help_text:a,links:o,required:c,name:d}=t,{error:u}=this.state,h=Object(C.n)(t,"@hubspot/form"===i),p="edit-form-field-wrapper"+(h||!r?" edit-form-field---no-label":""),b=this.renderLabel(),O=e&&n;return Object(D.jsx)(P.a,{allowDataTokens:O,"aria-label":r||d,className:p,"data-field-key":s.join("."),fieldKey:s.join("."),error:!!u,label:h?null:b,labelClassName:"edit-form-field-wrapper-label",onBlur:()=>this.onValidateRequiredValue(),required:c,helpText:h?null:l,inlineHelpText:h?null:a,links:!h&&a?o:null,validationMessage:u,children:Object(D.jsxs)(D.Fragment,{children:[this.renderDisabledAlert(),this.renderField(b)]})})}}pe.defaultProps={fieldSpecificProps:{},highlightedField:[],readOnly:!1,validateOnMount:!1,value:void 0};var be=pe;class Oe extends n.Component{constructor(e){super(e);this.handlePersonalizationRefUpdate=this.handlePersonalizationRefUpdate.bind(this);this.state={TokenViewerComponent:this.props.TokenViewerComponent,editorRefs:{},setEditorRefs:this.handlePersonalizationRefUpdate}}handlePersonalizationRefUpdate(e,t){const{editorRefs:s={}}=this.state;s[e]=t;this.setState({editorRefs:s})}render(){const{children:e}=this.props;return Object(D.jsx)(ue.a.Provider,{value:this.state,children:e})}}var me=Oe,fe=s(2679);const je=c()(A.a).withConfig({displayName:"OccurrencePrevNextButtons__OccurrenceIndexText",componentId:"y49gnt-0"})(["color:",";"],v.EERIE),ge=c.a.div.withConfig({displayName:"OccurrencePrevNextButtons__OccurrenceNav",componentId:"y49gnt-1"})(["display:grid;grid-template-columns:1fr 1fr 1fr;justify-items:center;"]),ye=c.a.div.withConfig({displayName:"OccurrencePrevNextButtons__OccurrenceNavLeft",componentId:"y49gnt-2"})(["justify-self:left;"]),Fe=c.a.div.withConfig({displayName:"OccurrencePrevNextButtons__OccurrenceNavRight",componentId:"y49gnt-3"})(["justify-self:right;"]),xe=e=>"ContentComponents.cmv2.occurrence."+e;class Ce extends n.PureComponent{constructor(...e){super(...e);this.hasMaxOccurrences=()=>{const{fieldKey:e,moduleSpec:t}=this.props,{fields:s}=t,i=Object(S.c)(e),n=Object(C.g)(s,i);if(n&&n.occurrence){const{max:e}=n.occurrence,t=this.getOccurrenceTableValues(i);return t&&e&&t.length>=e}return!1};this.getOccurrenceTableValues=e=>{const{fields:t,module:s}=this.props,i=Object(C.g)(t,e)||{},n=e.slice(0,-1);return Object(T.a)(s,n)||i.default};this.addAndSelectOccurrence=()=>{const{fieldKey:e,fields:t,onFieldChange:s,setFieldKey:i}=this.props,n=[...e],r=Object(S.c)(e),l=this.getOccurrenceTableValues(r),a=Object(C.g)(t,e),o=r.length-1;if(a){const e=[...l,Object(S.b)(a)],t=r.slice(0,-1);n[o]=e.length-1;s(t,e);i(n)}};this.onPrevOrNextOccurrence=e=>{const{fieldKey:t,setFieldKey:s}=this.props,i=[...t];i[Object(S.c)(t).length-1]=e;s(i)}}renderPrevButton(e){const t=0===e;return Object(D.jsxs)(m.a,{className:"p-all-0","data-test-id":"cmv2-repeater-prev-button",disabled:t,onClick:()=>this.onPrevOrNextOccurrence(e-1),use:"transparent",children:[Object(D.jsx)(fe.a,{color:t?v.BATTLESHIP:v.CALYPSO,name:"left",size:12}),Object(D.jsx)(A.a,{children:Object(D.jsx)(p.a,{message:xe("prevButton")})})]})}renderAddButton(){return this.hasMaxOccurrences()?null:Object(D.jsx)(m.a,{className:"p-all-0","data-test-id":"cmv2-repeater-add-button",onClick:this.addAndSelectOccurrence,use:"transparent",children:Object(D.jsx)(A.a,{children:Object(D.jsx)(p.a,{message:xe("addLink")})})})}renderNextButton(e){return Object(D.jsx)(m.a,{className:"p-all-0","data-test-id":"cmv2-repeater-next-button",onClick:()=>this.onPrevOrNextOccurrence(e+1),use:"transparent",children:Object(D.jsxs)(A.a,{children:[Object(D.jsx)(p.a,{message:xe("nextButton")}),Object(D.jsx)(fe.a,{color:v.CALYPSO,name:"right",size:12})]})})}render(){const{fieldKey:e}=this.props;if(!Object(S.d)(e))return null;const t=Object(S.c)(e),s=this.getOccurrenceTableValues(t),i=t[t.length-1];return Array.isArray(s)?Object(D.jsxs)(ge,{className:"p-all-3","data-test-id":"cmv2-repeater-nav-buttons",children:[Object(D.jsx)(ye,{children:this.renderPrevButton(i)}),Object(D.jsx)(je,{children:Object(D.jsx)(p.a,{message:xe("occurrenceIndex"),options:{currentIndex:i+1,totalCount:s.length}})}),Object(D.jsx)(Fe,{children:i===s.length-1?this.renderAddButton():this.renderNextButton(i)})]}):null}}var ve=Ce,Te=s(2757),De=s(161),ke=s(170),Ee=s(166),Ie=s(36),Ke=s(65),Ve=s(66);const Re=e=>e.resources.themeSettings.themeSettings,Se=(e,t={})=>{const{folderPath:s}=t;if(!s)return Ve.UNINITIALIZED;return e.resources.themeSettings.themeSettingRequestStatus[s]||Ve.UNINITIALIZED},Ae=Object(Ke.a)([Re],e=>e.themeSettings&&e.themeSettings.values?e.themeSettings.values:{}),Le=Object(Ke.a)([Re],e=>e.theme&&e.theme.fields?e.theme.fields:[]);var Ne=s(1049);function _e(e,...t){return Object(Ne.a)(t).get(`designmanager/v1/themes/by-path/${encodeURIComponent(e)}/settings`)}var Pe=s(64),Be=s(68);const Me=Object(Pe.b)(Be.THEME_SETTINGS_FETCH,_e),we=e=>Me(e);var Ue=s(248),Ge=s(1143),qe=s(1),He=s.n(qe);function Qe(e,...t){return Object(Ne.a)(t).get(`collector/v3/data-query/definitions/path/${e}/filters?${He.a.get()}`)}const We=Object(Pe.b)(Be.MODULE_FETCH_GRAPHQL_VARIABLES,Qe);function ze(e){return We(e)}var $e=s(1132);const Ye=e=>e.resources.dataQueryVariables.dataQueryVariables,Ze=(e,t)=>t.dataQueryPath,Je=Object(Ke.a)([Ye,Ze],(e,t)=>t&&e[t]||{}),Xe=Object(Ke.a)([Ae,Le,$e.d],(e,t,s)=>({brandSettings:s,themeFields:t,themeSettings:e}));var et=s(162);const tt=["children","disabled_controls","expanded","id","occurrence","display"],st=e=>"ContentComponents.cmv2."+e,it=c.a.div.withConfig({displayName:"EditForm__TwoColumnsFieldWrapper",componentId:"sc-1ou0ne9-0"})(["vertical-align:top;display:inline-block;width:50%;"]),nt=({children:e})=>e;let rt=null;const lt=(e,t)=>{const{inheritanceDataOverrides:s,moduleSpec:i}=t;return{brandSettingsRequestStatus:Object($e.e)(e),businessUnitId:Object($e.g)(e,t),contentCategoryName:Object($e.h)(e),dataQueryVariableSchema:Je(e,{dataQueryPath:i&&i.dataQueryAbsolutePath}),inheritanceData:s||Xe(e),themeSettingsRequestStatus:Se(e,i)}},at={fetchBranding:Ge.d,fetchBusinessUnit:Ge.e,fetchThemeSettings:we,fetchModuleDataVariables:ze},ot=Object(a.connect)(lt,at);class ct extends n.Component{constructor(e){super(e);this.onDataTokenChange=(e,t)=>{const{onUpdate:s,module:i}=this.props;s(e,t,Object(T.g)(i,["dataTokenPaths",e],t))};this.onUpdate=this.onUpdate.bind(this);this.onFieldChange=this.onFieldChange.bind(this);this.onOccurrenceChange=this.onOccurrenceChange.bind(this);this.setFieldKey=this.setFieldKey.bind(this);this.onFieldGroupOpenChange=this.onFieldGroupOpenChange.bind(this);this.onFieldReset=this.onFieldReset.bind(this);this.fetchInheritedValues=this.fetchInheritedValues.bind(this);this.onAnimationEnd=this.onAnimationEnd.bind(this);this.onDataFieldChange=this.onDataFieldChange.bind(this);this.onDataTokenChange=this.onDataTokenChange.bind(this);this.getFieldsForTab=this.getFieldsForTab.bind(this);this.scrollToField=this.scrollToField.bind(this);this.getOnFieldChangeHandler=this.getOnFieldChangeHandler.bind(this);this.getResourceProps=this.getResourceProps.bind(this);this.onDataOccurrenceFieldChange=this.onDataOccurrenceFieldChange.bind(this);this.scrollToFieldAfterRemount=this.scrollToFieldAfterRemount.bind(this);this.topLevelNonContentFieldGroupKey=null;this.scrollToFieldOnModuleSpecUpdate=!0;this.moduleTabs=null;this.state={fieldKey:e.fieldKey,openFieldGroups:{}}}componentDidMount(){const{onEditFormMounted:e,moduleSpec:t,fetchModuleDataVariables:s,scrollToFieldOnMount:i}=this.props;e&&e();t&&t.dataQueryAbsolutePath&&s(t.dataQueryAbsolutePath);if(t.fields&&i){this.scrollToFieldOnModuleSpecUpdate=!1;this.scrollToField({fieldKey:i})}this.fetchInheritedValues();document.addEventListener("FIELD_REVEAL_LISTENER_READY",this.scrollToFieldAfterRemount)}componentDidUpdate(e,t){const{businessUnitId:s,fieldKey:i,tab:n}=e,{brandSettingsRequestStatus:r,businessUnitId:l,enableSlideInAnimation:a,fetchBranding:o,fieldKey:c,tab:d,moduleSpec:u,scrollToFieldOnMount:p}=this.props,{fieldKey:b}=t,{fieldKey:O}=this.state;Object(h.isEqual)(e.fieldKey,c)||this.setState({fieldKey:c});a&&!Object(h.isEqual)(b,O)&&this.setState(Object(C.m)(b,O));n!==d&&this.setFieldKey(null);if(!e.moduleSpec.fields&&u.fields){this.fetchInheritedValues();this.scrollToFieldOnModuleSpecUpdate&&p&&this.scrollToField({fieldKey:p})}d!==De.b&&d!==De.d||i===c||!Object(h.isEqual)(c,this.topLevelNonContentFieldGroupKey)||this.setFieldKey(null);l!==s&&r===Ve.UNINITIALIZED&&u.fields&&Object(Ee.a)(u.fields)&&o(l)}componentWillUnmount(){document.removeEventListener("FIELD_REVEAL_LISTENER_READY",this.scrollToFieldAfterRemount)}get isInDataTab(){return this.props.tab===De.b}get fields(){return Object(C.o)(this.props)}get scopes(){const{scopes:e}=this.props.auth;if(e)return e;try{const{user:e}=Object(u.userInfoSync)();return e.scopes}catch(e){return[]}}get moduleData(){const{breakpoint:e,breakpointStyles:t={},module:s}=this.props;if(this.isInDataTab)return s.dataQueryVariables;if(e){return(t[e]||{}).fieldStyles||{}}return s}get isLocked(){const{fields:e}=this,{hideLockedFields:t,overrideable:s,tab:i}=this.props,n=t&&Object(ke.a)(e);return i===De.a&&(!s||n)}scrollToFieldAfterRemount(){if(rt){this.scrollToField(Object.assign({},rt,{afterRemount:!1}));rt=null}}getDataTokenAuthValues(e){const{scopes:t,gates:s}=this.props.auth,i={scopes:[],gates:[]};if(!M.s[e])return i;if(t&&s)return{scopes:t,gates:s};try{const{user:e}=Object(u.userInfoSync)();return{scopes:e.scopes}}catch(e){return i}}fetchInheritedValues(){const{businessUnitId:e,contentId:t,contentCategoryName:s,fetchBranding:i,fetchBusinessUnit:n,fetchThemeSettings:r,brandSettingsRequestStatus:l,themeSettingsRequestStatus:a,moduleSpec:o}=this.props;if(o.fields&&Object(Ee.a)(o.fields)){l===Ve.UNINITIALIZED&&(Object(T.c)(e)&&s&&t?n(s,t):i(e));o.isThemeAsset&&a===Ve.UNINITIALIZED&&r(o.path)}}onUpdate(e,t,s,i=!1){const{moduleSpec:n,onUpdate:r}=this.props,l=n.fields.map(e=>e.name);i&&l.push(e[0]);r(e,t,Object(h.pick)(s,l))}onFieldChange(e,t,s){const i=Object(T.g)(this.moduleData,e,t);this.onUpdate(e,t,i,s)}onDataFieldChange(e,t){const{onUpdate:s,module:i,dataQueryVariableSchema:n}=this.props,r=Object(Te.b)(n,i.dataQueryVariables);r[e]=t;s(e,t,Object(T.g)(i,["dataQueryVariables"],r))}onDataOccurrenceFieldChange(e,t){const{onUpdate:s,module:i,dataQueryVariableSchema:n}=this.props,r=Object(Te.b)(n,i.dataQueryVariables),l=Object(T.g)(r,e,t);s(e,t,Object(T.g)(i,["dataQueryVariables"],l))}onFieldReset(e){const{module:t,onFieldReset:s}=this.props,i=Object(T.f)(t,e);s?s(e,i):this.onUpdate(e,void 0,i)}onOccurrenceChange(e,t){const s=this.fields.find(t=>t.name===e[0]),{default:i,name:n}=s,{fields:r,moduleData:l}=this;let a;if(void 0===Object(T.a)(l,e)){if(W.b.isUngated("Cms:FixDefaultValuesInGroups")){const t=J(r,e,l,{maintainOccurrenceArrays:!0});t&&(a=Object(T.e)(t,l))}if(!a&&i){const e={[n]:i};a=Object(T.e)(e,l)}}if(a){a=Object(T.g)(a,e,t);this.onUpdate(e,t,a)}else this.onFieldChange(e,t)}getModuleTabs(){const{moduleTabs:e,props:t,scopes:s}=this;e||(this.moduleTabs=Object(C.c)(t,s));return this.moduleTabs}onFieldGroupOpenChange(e,t){const{openFieldGroups:s}=this.state;this.setState({openFieldGroups:Object.assign({},s,{[t]:e})})}setFieldKey(e){const{onFieldKeyChange:t}=this.props;t?t(e):this.setState({fieldKey:e})}getFieldsForTab(e){const{dataQueryVariableSchema:t,module:s,tab:i}=this.props;return i!==De.a&&i?i===De.b?Object(C.e)(s,t):e?Object(C.k)(e.children,this.props,this.scopes,{isExternalTabGroup:!0}):[]:Object(C.k)(this.fields,this.props,this.scopes)}scrollToField({fieldKey:e,section:t,dispatchEvent:s=!1,afterRemount:i=!1}){if(i){rt={fieldKey:e,section:t,dispatchEvent:s};return}const n=()=>{if(s){const s=new CustomEvent("FIELD_REVEAL",{detail:{fieldKey:e,section:t}});document.dispatchEvent(s)}else Object(C.q)(e,t)},r=Object(C.i)(e,this.fields),{fieldKey:l}=this.state,a=()=>{const t=Object(C.a)(e,this.fields);if(t&&t.length){this.onFieldGroupOpenChange(!0,t.join("."));setTimeout(()=>{n()},250)}else n()};if(Object(h.isEqual)(l,r))a();else{this.setFieldKey(r);setTimeout(()=>{a()},500)}}onAnimationEnd(){this.setState({shouldSlideInFromRight:!1,shouldSlideInFromLeft:!1})}getResourceProps(e){const{domain:t,salesforceIntegrationStatus:s}=this.props;return{domain:e===$.LOGO&&t,options:this.props[M.r[e]],salesforceIntegrationStatus:e===$.SFDC_CAMPAIGN?s:[]}}getOnFieldChangeHandler(e){return e&&Object(S.e)(this.state.fieldKey)?this.isInDataTab?this.onDataOccurrenceFieldChange:this.onOccurrenceChange:this.isInDataTab?this.onDataFieldChange:this.onFieldChange}renderOccurrence(e,t,s,i={}){const{allowFieldReset:n,LabelComponent:r,readOnly:l}=this.props,{groupValue:a,parentFieldGroupDisabled:o}=i,{group_occurrence_meta:c,type:d}=e,{fields:u,moduleData:p,scopes:b}=this,{featured_enabled:O,featured_limit:m}=c||{},f=d===$.GROUP,j=Object(h.pick)(this.props,Object.values(M.r||{})),g=o||Object(ke.b)(e,u,p,b);let y=Object(T.a)(p,t);const F=void 0===y||!Object(S.a)(e)&&y&&!y.length;void 0!==y||Object(T.c)(a)||(y=Z(a,t));void 0===y&&Object(S.a)(e)&&(y=e.default);!Object(T.c)(y)&&Array.isArray(y)||(y=[]);return Object(D.jsx)(Q,{disabled:g,featuredEnabled:f&&O,featuredLimit:m,field:e,fieldKey:t,isDefaultValue:F,onFieldReset:this.onFieldReset,LabelComponent:r,allowFieldReset:n,onFieldChange:s,scrollToField:this.scrollToField,setFieldKey:this.setFieldKey,readOnly:l,resources:j,values:y},"field_"+t)}renderFieldGroup(e,t,s={}){const{allowFieldReset:r,componentsByType:l,GroupLabelChild:a,LabelComponent:o,lazyRenderGroups:c,useOnDark:d}=this.props,{children:u,disabled_controls:p,expanded:b,id:O,occurrence:m,display:f}=e,g=Object(i.a)(e,tt),{message:y}=p||{},{fieldKey:F,openFieldGroups:x}=this.state,{currentFieldId:v,parentFieldGroupDisabled:k}=s,{GROUP:E}=$,{fields:I,moduleData:V,scopes:R}=this,A=l[E]||K.a,L=v&&v===O;if(!W.b.isUngated("Cms:FixDefaultValuesInGroups")&&!s.groupValue&&(m||Object(S.e)(t))&&L){let i=Object.assign({},V);if(!Object(T.c)(e.default)){const e=I.find(e=>e.name===t[0]),s=e&&!Object(T.c)(e.default)?{[e.name]:e.default}:{};i=Object(T.e)(s,i)}s={groupValue:Y(i,t),currentFieldId:v}}const N=k||Object(ke.b)(e,I,V,R,s),_=!!Object(h.findWhere)(u,{type:E}),P=f?f!==M.g.DRILLDOWN:!_;let w=null;if(!c||P||t===F){const e=Object(C.k)(u,this.props,R,Object.assign({},s,{isExternalTabGroup:!0}));if(!e.length)return null;w=this.renderFormFields(e,t,Object.assign({},s,{inExpandableFieldGroup:!L,parentFieldGroupDisabled:N}))}if(L){const e=N&&y&&Object(D.jsx)(j.a,{className:"m-x-6 m-y-3",type:"tip",children:Object(D.jsx)(B.a,{label:y,useStrict:!0})});return Object(D.jsxs)(D.Fragment,{children:[e,w]})}const U=x[t.join(".")],G=void 0===Object(T.a)(V,t);return Object(n.createElement)(A,Object.assign({},g,{allowFieldReset:r,key:"field_"+t,containsNestedGroups:_,disabled:N,display:f,disabledMessage:y,fieldGroupOpen:Object(T.c)(U)?b:U,fieldKey:t,GroupLabelChild:a,isDefaultValue:G,LabelComponent:o,onFieldReset:this.onFieldReset,onFieldGroupOpenChange:this.onFieldGroupOpenChange,onFieldUnlink:()=>{this.onFieldChange(t,g.default)},onEditGroupClick:()=>this.setFieldKey(t),scrollToField:this.scrollToField,useOnDark:d}),w)}renderField(e,t,s,i={}){const{allowDataTokens:n,allowFieldReset:r,componentsByType:l,contentAssistanceEnabled:a,contentCategoryId:o,editor:c,highlightedField:d,isPublicContent:u,LabelComponent:p,moduleSpec:b,onRedirect:O,readOnly:m,trackFieldAction:f,uploadedFileAccess:j,useOnDark:g,validateOnMount:y}=this.props,{inExpandableFieldGroup:F=!1,parentFieldGroupDisabled:x}=i,{gates:C,scopes:v}=this.getDataTokenAuthValues(e.type),{fields:k,moduleData:E,scopes:I}=this,K=x||Object(ke.b)(e,k,E,I),{contentTypes:V=[],hostTemplateTypes:R=[],path:A}=b,L=W.b.isUngated("CMv2:UseContentTypes")?!!V&&(V.indexOf(Ue.ANY)>-1||V.indexOf(Ue.EMAIL)>-1):R.indexOf(M.l.ANY)>-1||R.indexOf(M.l.EMAIL)>-1;let N=Object(T.a)(E,t);const _=void 0===N||Object(T.c)(e.default)&&(""===N||null===N);void 0!==N||Object(T.c)(i.groupValue)||(N=Z(i.groupValue,t));if(void 0===N&&!Object(T.c)(e.default)){const s=t[t.length-1];N=e.default;Object(S.a)(e)&&Object(h.isNumber)(s)&&(N=N[s])}return Object(D.jsx)(be,{allowDataTokens:n,contentAssistanceEnabled:a,contentTypes:V,componentsByType:l,currentFieldKey:this.state.fieldKey,dataTokenValue:Object(Ee.c)(E,t.join(".")),disabled:K,gates:C,scopes:v,editor:c,field:e,fieldKey:t,highlightedField:d,hostTemplateTypes:R,isEmailOrAnyType:L,isInEmail:o===Ie.c.email.id,isPublicContent:u,LabelComponent:p,allowFieldReset:r,isDefaultValue:_,modulePath:A,onDataTokenChange:this.onDataTokenChange,onFieldChange:s,onFieldReset:this.onFieldReset,onRedirect:O,readOnly:m,resourceProps:this.getResourceProps(e.type),scrollToField:this.scrollToField,setFieldKey:this.setFieldKey,trackFieldAction:f,uploadedFileAccess:j,useOnDark:g||F,validateOnMount:y,value:N},"field_"+t)}renderFormField(e,t,s={}){const{currentFieldId:i}=s,{fields:n,moduleData:r}=this,l=this.getOnFieldChangeHandler(i);e=Object(C.s)(e,Object.assign({},this.props,{onFieldChange:this.onFieldChange,scrollToField:this.scrollToField}));if(W.b.isUngated("Cms:FixDefaultValuesInGroups")){const e=J(n,t,r);e&&(s.groupValue=e)}return e.occurrence&&i!==e.id?this.renderOccurrence(e,t,l,s):e.type===$.GROUP?this.renderFieldGroup(e,t,s):this.renderField(e,t,l,s)}renderFormFields(e,t,s){const{moduleSpec:i,FieldWrapper:n,id:r,tab:l}=this.props;return i.inline_editable?null:e.map(e=>{const i=t?t.concat(e.name):[e.name],a=Object(D.jsx)(n,{"data-test-id":"field-wrapper",field:e,fieldKey:i,id:r,tab:l,children:this.renderFormField(e,i,s)},i.join("."));return e.display_width===M.h.HALF_WIDTH?Object(D.jsx)(it,{children:a},i.join(".")):a})}renderFieldKeyLabel(e){return Object(D.jsx)(se,Object.assign({},this.props,{fieldKey:e,fields:this.fields}))}renderAlert(e){const t="m-bottom-3"+(this.props.flush?"":" m-x-6");return Object(D.jsx)(j.a,{className:t,type:"info",children:e})}renderNoFieldsMessage(){return Object(D.jsx)(g.a,{illustration:"sunny",illustrationProps:{width:150},title:Object(D.jsx)(y.a,{children:Object(D.jsx)(p.a,{message:st("fields.emptyMessage.noFieldsTitle")})}),children:this.renderOtherTabLinks()})}renderOtherTabLinks(){const{tab:e,onTabChange:t}=this.props,s=this.getModuleTabs(),i=[];Object.keys(s).forEach(n=>{if(s[n]&&n!==e){const e=Object(D.jsx)(p.a,{message:st("fields.emptyMessage.tabNames."+n)});if(t){const s=n===De.a?De.c:n.toLowerCase();i.push(Object(D.jsx)(F.a,{onClick:()=>t(s),children:e},"tabLink-"+e))}else i.push(e)}});return i.length?Object(D.jsx)("p",{children:Object(D.jsx)(O.a,{message:st("fields.emptyMessage.noFieldsBody"),options:{tabLink:Object(D.jsx)(b.a,{exclusive:!0,children:i})}})}):null}renderInlineHelpTextAlert(e){const{moduleSpec:t}=this.props,{messages:s,masterLanguage:i}=t,n=Object(d.a)();return this.renderAlert(Object(D.jsx)(B.a,{label:Object(et.d)(e,i,n,s),useStrict:!0}))}renderHeader(e){const{hideBackLink:t,hideBreadcrumbs:s,hideHeader:i,label:n}=this.props,{fieldKey:r}=this.state,{icon:l}=e||{};return!i&&Object(D.jsx)(ce,{className:t&&s?"":"m-top-4",fieldKey:r,fields:this.fields,label:n,module:this.moduleData,icon:l})}renderNavigation(){const{hideBackLink:e,hideBreadcrumbs:t,onFieldKeyChange:s,rootBreadcrumbs:i}=this.props,{fieldKey:n}=this.state;return!n||t||e?null:Object(D.jsx)(I,{className:"m-y-2 p-x-5",fieldKey:n,fields:this.fields,onKeyChange:s,module:this.moduleData,rootBreadcrumbs:i})}renderBackLink(){const{hideBackLink:e,moduleSpec:t}=this.props,{fieldKey:s}=this.state;if(e||!s)return null;const i=Object(C.d)(s,this.fields);let n=t.name||this.props.label;i&&(n=this.renderFieldKeyLabel(i));return Object(D.jsx)(f.a,{className:"cmv2-edit-form-back-link",children:Object(D.jsx)(m.a,{onClick:()=>this.setFieldKey(i||null),use:"link",children:Object(D.jsx)(O.a,{message:st("backLink.backToLabel"),options:{label:n}})})})}renderPrevNextOccurrenceButtons(){const{fieldKey:e}=this.state,{moduleSpec:t}=this.props;return Object(D.jsx)(ve,{fieldKey:e,fields:this.fields,module:this.moduleData,moduleSpec:t,onFieldChange:this.onFieldChange,setFieldKey:this.setFieldKey})}renderModuleFormAlert(e,t){const{tab:s,hideEmptyMessage:i}=this.props;if(this.isLocked)return this.renderAlert(Object(D.jsx)(p.a,{message:st("fields.emptyMessage.locked")}));if(!e.length&&!i)return this.renderNoFieldsMessage();if(s!==De.a&&t&&Object(ke.b)(t,this.fields,this.moduleData,this.scopes)){const{disabled_controls:e}=t;return Object(D.jsx)(j.a,{className:"m-x-6 m-y-3",type:"tip",children:Object(D.jsx)(B.a,{label:e.message,useStrict:!0})})}return null}renderInlineHelpText(e,t){const{moduleSpec:s}=this.props,{inlineHelpText:i}=s,{inline_help_text:n,use_large_label:r,type:l}=t||{};return t&&l===$.GROUP&&n&&!r?this.renderInlineHelpTextAlert(n):!t&&e.length&&i&&!this.isLocked?this.renderInlineHelpTextAlert(i):null}renderModuleForm(e,t){const{fields:s,moduleData:i,scopes:n}=this,{fieldKey:r}=this.state,{FieldWrapper:l,id:a,tab:o}=this.props,c=r&&Object(C.g)(s,r);if(c)return Object(D.jsx)(l,{"data-test-id":"field-wrapper",field:c,fieldKey:r,id:a,children:this.renderFormField(c,r,{currentFieldId:c.id})},r.join("."));if(this.isLocked||!e.length)return null;if(o&&o!==De.a&&t){const r=Object(ke.b)(t,s,i,n),l=[t.name],a={currentFieldId:t.id,parentFieldGroupDisabled:r};this.topLevelNonContentFieldGroupKey=l;return this.renderFormFields(e,l,a)}return this.renderFormFields(e)}render(){const{fields:e}=this,{tab:t}=this.props,{shouldSlideInFromLeft:s,shouldSlideInFromRight:i,fieldKey:n}=this.state,r=Object(C.h)(this.fields,t),a=this.getFieldsForTab(r),o=n&&Object(C.g)(e,n),c=l()("cmv2-edit-form",this.props.className,!this.props.flush&&"cmv2-edit-form--with-padding"),d=l()(i&&"cmv2-edit-form--slide-in-from-right",s&&"cmv2-edit-form--slide-in-from-left",!(i||s)&&"cmv2-edit-form--animation-end");return Object(D.jsx)(me,{TokenViewerComponent:this.props.TokenViewerComponent,children:Object(D.jsxs)("div",{className:c,children:[this.renderBackLink(),this.renderNavigation(),this.renderPrevNextOccurrenceButtons(),Object(D.jsxs)("div",{className:d,onAnimationEnd:this.onAnimationEnd,children:[this.renderHeader(o),this.renderModuleFormAlert(a,r),this.renderInlineHelpText(a,o),Object(D.jsx)("div",{children:this.renderModuleForm(a,r)})]})]},this.props.id)})}}ct.defaultProps={allowDataTokes:!1,auth:{},className:"",enableSlideInAnimation:!1,fieldKey:null,flush:!0,hideBackLink:!1,hideBreadcrumbs:!0,hideLockedFields:!0,label:null,overrideable:!0,pageContext:{},readOnly:!1,tab:De.a,validateOnMount:!1,allowFieldReset:!1,hideEmptyMessage:!1,FieldWrapper:nt};t.a=ot(ct)}}]);
//# sourceMappingURL=//static.hsappstatic.net/DesignManagerIde/static-2.61259/expanded-mofo~layout-editor.js.map