(window.webpackJsonp=window.webpackJsonp||[]).push([["modals"],{1216:function(e,t,s){"use strict";s.d(t,"a",(function(){return c}));var a=s(41),r=s.n(a),n=s(40),o=s(45);const i=100;function l(e){const{value:t,initialValue:s}=e;let a;a=void 0===t?s:null===t?null:Math.max(s,t);return{running:!1,value:a}}class c extends n.Component{constructor(e){super(e);this.timerId=null;this.state=l(e)}componentDidMount(){const{autoStart:e}=this.props;e&&!window.VISUAL_REGRESSION&&this.start()}componentDidUpdate(e){e.autoStart||!this.props.autoStart?e.value!==this.props.value&&this.incrementProgress(this.props.value):this.start()}componentWillUnmount(){const{value:e}=this.state;this.cancelNextUpdate();(null===e||e>=i)&&this.setState({value:null})}schedule(e,t=this.props.incrementInterval){this.cancelNextUpdate();this.timerId=setTimeout(e,t)}scheduleNextUpdate(){const{maximum:e}=this.props,{value:t}=this.state;t<=e&&this.schedule(()=>{this.incrementProgress()})}cancelNextUpdate(){clearTimeout(this.timerId)}start(){this.setState({running:!0});this.scheduleNextUpdate()}incrementProgress(e){const{initialValue:t,maximum:s,incrementFactor:a}=this.props,{value:r}=this.state;if(this.isComplete(r,e))this.completeProgress();else if(null!=e){this.setState({value:Math.max(e,t)});this.scheduleNextUpdate()}else if(null!=r){this.setState({value:r+(s-r)*a});this.scheduleNextUpdate()}}isComplete(e,t){return t>=i||e>i-.5&&null==t}completeProgress(){const{completionLingerTime:e}=this.props;this.schedule(()=>{this.setState({value:i});this.schedule(()=>this.setState({running:!1}),e)})}render(){const{Component:e,render:t}=this.props,{running:s,value:a}=this.state,r={easing:"linear",value:a,done:!s&&a>=i};return t?t(r):Object(o.jsx)(e,Object.assign({},r))}}c.displayName="UIAbstractProgress";c.propTypes={autoStart:r.a.bool,Component:r.a.elementType,render:r.a.func,completionLingerTime:r.a.number,incrementFactor:r.a.number,incrementInterval:r.a.number,initialValue:r.a.number,maximum:r.a.number,value:r.a.number};c.defaultProps={autoStart:!0,completionLingerTime:500,incrementFactor:.25,incrementInterval:150,initialValue:0,maximum:i}},1507:function(e,t,s){"use strict";var a=s(2),r=s(287),n=s.n(r),o=s(297),i=s(2682),l=s(41),c=s.n(l),d=s(40),p=s(288),h=s.n(p),u=s(734),m=s(508),b=s(497),j=s(496),f=s(507),O=s(313),g=s(302),y=s(478),x=s(45);const C=["aria-labelledby","aria-describedby","aria-invalid","aria-label","aria-required","autoSelect","buttonProps","className","defaultValue","error","id","inputProps","inputRef","onChange","onCopy","required","tooltipPlacement","value","valueWhenCopied"],T=n()(b.a).withConfig({displayName:"UICopyInput__ElevatedMediaBody",componentId:"sc-15j3k1n-0"})(["z-index:",";"],g.cb);class I extends d.PureComponent{constructor(...e){super(...e);this.handleCopyClick=e=>{const{onCopy:t,inputRef:s}=this.props;s.current&&s.current.select();Object(o.a)(t,e)};this.handleInputMouseDown=e=>{const{autoSelect:t,inputRef:s}=this.props;if(t){e.preventDefault();s.current&&s.current.select()}}}render(){const e=this.props,{"aria-labelledby":t,"aria-describedby":s,"aria-invalid":r,"aria-label":n,"aria-required":o,buttonProps:i,className:l,defaultValue:c,error:d,id:p,inputProps:b,inputRef:f,onChange:O,required:g,tooltipPlacement:y,value:I,valueWhenCopied:S}=e,F=Object(a.a)(e,C),{size:v}=this.context,E={"aria-labelledby":t,"aria-describedby":s,"aria-invalid":r,"aria-label":n,"aria-required":o,id:p};return Object(x.jsx)(j.a,Object.assign({},F,{className:h()("input-group private-form__group",l),spacing:"none",MediaBody:T,itemRight:Object(x.jsx)(u.a,Object.assign({className:h()("input-group-addon private-form__group--end",i&&i.className),onClick:this.handleCopyClick,size:v,tooltipPlacement:y,value:I,valueWhenCopied:S},i)),children:Object(x.jsx)(m.a,Object.assign({"aria-readonly":!c,className:h()("private-form__group--start",b&&b.className),error:d,id:p,inputRef:f,onChange:O,onMouseDown:this.handleInputMouseDown,required:g,type:"text",value:I},E,b))}))}}I.contextType=y.b;I.propTypes={"aria-labelledby":c.a.string,"aria-describedby":c.a.string,"aria-invalid":c.a.string,"aria-label":c.a.string,"aria-required":c.a.bool,autoSelect:c.a.bool.isRequired,buttonProps:c.a.object,defaultValue:c.a.string,error:c.a.bool,inputProps:c.a.object,inputRef:O.a,onChange:c.a.func,onCopy:c.a.func,required:c.a.bool,tooltipPlacement:u.a.propTypes.tooltipPlacement,value:c.a.string,valueWhenCopied:c.a.func};I.defaultProps={autoSelect:!0,tooltipPlacement:"bottom"};I.displayName="UICopyInput";t.a=Object(f.a)(Object(i.a)(I))},1509:function(e,t,s){"use strict";s.d(t,"a",(function(){return c}));s.d(t,"b",(function(){return d}));s.d(t,"e",(function(){return h}));s.d(t,"f",(function(){return m}));s.d(t,"c",(function(){return j}));s.d(t,"d",(function(){return f}));var a=s(418),r=s(63),n=s(373),o=s(194),i=s(89);const l=e=>(t,s)=>Object.assign({type:e,rawAssetId:t},s);function c(e,t){const s=t=>Object.assign({type:r.RAW_ASSET_CREATE,path:e,fileType:o.RAW_ASSET},t);return r=>{r(s({}));return a.a({path:e,source:t}).then(t=>{const a={path:e,rawAsset:t};r(s(a));return a}).catch(t=>{const a={path:e,error:t};r(s(a));return a})}}function d(e){const t=l(r.RAW_ASSET_FETCH_PUBLISHED);return s=>{s(t(e));return a.b(e).then(a=>{s(t(e,{rawAsset:a}))}).catch(a=>{s(t(e,{error:a}))})}}const p=l(r.RAW_ASSET_PUBLISH);function h(e){return(t,s)=>{const r=s(),o={rawAssetId:e};if(!Object(n.b)(r,o))return;if(Object(n.c)(r,o)!==i.PENDING){t(p(e));a.f(e).then(s=>{t(p(e,{rawAsset:s}))}).catch(s=>{t(p(e,{error:s}))})}}}const u=l(r.RAW_ASSET_SAVE_BY_PATH);function m(e){return(t,s)=>{const{id:r,path:o}=e,l=s(),c={rawAssetId:r};if(!Object(n.b)(l,c))return;if(Object(n.c)(l,c)!==i.PENDING){t(u(r));a.h(o,e,{staging:!0}).then(s=>{t(u(r,{rawAsset:s,rawAssetBeforeUpdate:e}))}).catch(e=>{t(u(r,{error:e}))})}}}const b=l(r.RAW_ASSET_FETCH_HAS_BUFFERED_CHANGES);function j(e){return t=>{t(b(e));a.d(e).then(({has_changes:s})=>{t(b(e,{hasBufferedChanges:s=!!s}))}).catch(s=>{t(b(e,{error:s}))})}}function f(e){return t=>{t(b(e));a.e(e).then(({has_changes:s})=>{t(b(e,{hasBufferedChanges:s=!!s}))}).catch(s=>{t(b(e,{error:s}))})}}},1540:function(e,t,s){"use strict";s.d(t,"c",(function(){return m}));s.d(t,"a",(function(){return b}));s.d(t,"d",(function(){return j}));s.d(t,"b",(function(){return f}));var a=s(63),r=s(2683),n=s(1509),o=s(410),i=s(238),l=s(373),c=s(2714),d=s(1541),p=s(393);function h({method:e,jsFilename:t,functionPath:s,parentFolderPath:a}){const r=a+"/serverless.json",o=Object(i.d)({endpoints:[{method:e,file:t,path:s}]});return Object(n.a)(r,o)}function u({jsFilePath:e}){const t=Object(i.b)();return Object(n.a)(e,t)}function m(e){const{folderName:t,parentFolderId:s,jsFilename:n,functionPath:o,method:i}=e;return l=>{const c=e=>l(Object.assign({},e,{type:a.FINDER_FUNCTIONS_CREATE}));c(e);return l(Object(r.f)(t,s)).then(e=>{if("error"in e){c({error:e.error,parentFolderId:s});return Promise.reject(e.error)}const a=e.folder,d=e=>{l(Object(r.g)(a.id,s));c({parentFolderId:s,folder:a,error:e});return Promise.reject(e)},p=([e,t])=>e.error?d(e.error):t.error?d(t.error):c({folder:a,serverlessJson:e.rawAsset,parentFolderId:s});return Promise.all([l(h({folderName:t,parentFolderId:s,jsFilename:n,functionPath:o,method:i,parentFolderPath:a.fullPath})),l(u({jsFilePath:`${a.fullPath}/${n}`}))]).then(p)})}}function b(e){const{parentFolderId:t,parentFolderPath:s,jsFilename:n,functionPath:i,method:d}=e,p={file:n,method:d};return(d,h)=>{var m;const b=e=>d(Object.assign({},e,{type:a.FINDER_FUNCTIONS_CREATE_ENDPOINT})),j=e=>{b({parentFolderId:t,error:e});return Promise.reject(e)},f=([e,s])=>e.error?j(e.error):s.error?j(s.error):b({serverlessJson:e.rawAsset,parentFolderId:t});b(e);const O=d(u({jsFilePath:`${s.join("/")}/${n}`}));return null===(m=d(Object(r.j)(t)))||void 0===m?void 0:m.then(()=>{const e=Object(c.ab)(h(),{folderId:t});if(!e)return j("No serverless function config found");const s=d(Object(o.a)(e)).then(()=>{const t=Object(l.i)(h())[e],s=JSON.parse(t.source),a=Object(o.i)(e,JSON.stringify(Object.assign({},s,{endpoints:Object.assign({},s.endpoints,{[i]:p})}),null,2)),r=Object(o.g)(e);d(a);return d(r)});return Promise.all([s,O]).then(f).catch(j)})}}function j(e){const{request:t,receive:s,error:a}=j;return r=>{const n=t=>{r(a(e,t));return t},o=t=>{const{cdnUrl:a}=t;return d.c(a).then(t=>{r(s(e,t))}).catch(n)},i=s=>{if(!s)return n("No deployId found");r(t(e,s));return Object(p.a)(d.d,s,{success:"SUCCESS",failure:"ERROR",onSuccess:o,onFailure:n,onError:n}).catch(n)};return d.a(e).then(i).catch(n)}}j.request=(e,t)=>({type:a.FINDER_FUNCTIONS_DEPLOY_REQUEST,folderPath:e,deployId:t});j.error=(e,t)=>({type:a.FINDER_FUNCTIONS_DEPLOY_ERROR,folderPath:e,error:t});j.receive=(e,t)=>({type:a.FINDER_FUNCTIONS_DEPLOY_RECEIVE,folderPath:e,deployLogs:t});const f=()=>({type:a.FINDER_FUNCTIONS_CLEAR_DEPLOY_LOGS})},1541:function(e,t,s){"use strict";s.d(t,"b",(function(){return h}));s.d(t,"a",(function(){return u}));s.d(t,"d",(function(){return m}));s.d(t,"c",(function(){return b}));var a=s(30),r=s.n(a),n=s(1498),o=s(1499),i=s.n(o),l=s(413);const c=Object(n.createStack)(l.jsonResponse),d=i()(c),p="cms/v3/functions";function h({route:e}){return r.a.get(p+"/routes",{query:{route__eq:e}})}function u(e){return r.a.post(p+"/build/async",{data:{folderPath:e}})}function m(e){return r.a.get(`${p}/build/${e}/poll`)}function b(e){return d.get(e)}},1542:function(e,t,s){"use strict";s.r(t);var a=s(40),r=s(41),n=s.n(r),o=s(59),i=s(279),l=s(99),c=s(2766),d=s(712),p=s(771),h=s(1216),u=s(717),m=s(723),b=s(724),j=s(751),f=s(2741),O=s(2779),g=s(456),y=s(758),x=s(443),C=s(607),T=s(1540),I=s(2714),S=s(45);const F=e=>"DesignFinderUI.modals.DeployFunctionWizard."+e;function v(){const e=Object(I.Nb)();return function(t,s){const a=Object(I.r)(t,s);return{folderPath:e(t,s),folderName:a.name,functionDeploymentInProgress:Object(I.I)(t),functionDeploymentLogs:Object(I.v)(t)}}}const E={deployServerlessFunctionFolder:T.d,clearDeployLogs:T.b};class N extends a.Component{constructor(...e){super(...e);this.onCancel=()=>{this.props.clearDeployLogs();this.props.callback(!1)};this.onConfirm=()=>{const{folderPath:e,deployServerlessFunctionFolder:t}=this.props;return t(e.join("/"))}}renderDeployConfirmText(){const{functionDeploymentLogs:e,folderPath:t}=this.props;return e?null:Object(S.jsx)(i.a,{message:F("deployText"),options:{folder:t.join("/")}})}renderDeployLogs(){const{functionDeploymentLogs:e}=this.props;return e?Object(S.jsx)(f.a,{label:Object(S.jsx)(i.a,{message:F("labels.deployLogs")}),children:Object(S.jsx)(O.a,{value:e})}):null}renderLoadingProgress(){return this.props.functionDeploymentInProgress?Object(S.jsx)(h.a,{autoStart:!0,incrementFactor:.1,incrementInterval:500,Component:p.a}):null}renderLoadingState(){return this.props.functionDeploymentInProgress?Object(S.jsx)(d.a,{contextual:!0,label:Object(l.a)(F("loadingText")),showLabel:!0,layout:"centered"}):null}renderFooter(){const{functionDeploymentLogs:e}=this.props;return Object(S.jsxs)(S.Fragment,{children:[e?null:Object(S.jsx)(x.a,{"data-test-id":"deploy-function-button",onClick:this.onConfirm,use:"primary",children:Object(S.jsx)(i.a,{message:F("buttons.deploy")})}),Object(S.jsx)(x.a,{onClick:this.onCancel,use:"secondary",children:Object(S.jsx)(i.a,{message:F(e?"buttons.close":"buttons.cancel")})})]})}render(){return Object(S.jsxs)(c.a,{width:600,"data-test-id":"deploy-function-modal",children:[Object(S.jsxs)(m.a,{children:[Object(S.jsx)(u.a,{onClick:this.onCancel}),Object(S.jsx)(C.a,{children:Object(S.jsx)(i.a,{message:F("header")})})]}),Object(S.jsxs)(y.a,{style:{position:"relative"},onSubmit:this.onFormSubmit,children:[this.renderLoadingProgress(),Object(S.jsxs)("div",{style:{position:"relative"},className:"m-top-1",children:[this.renderLoadingState(),Object(S.jsx)(b.a,{children:Object(S.jsxs)(g.a,{childClassName:"m-bottom-3",children:[this.renderDeployConfirmText(),this.renderDeployLogs()]})}),Object(S.jsx)(j.a,{children:this.renderFooter()})]})]})]})}}N.propTypes={callback:n.a.func.isRequired,folderPath:n.a.array.isRequired,deployServerlessFunctionFolder:n.a.func.isRequired,clearDeployLogs:n.a.func.isRequired,functionDeploymentInProgress:n.a.bool.isRequired,functionDeploymentLogs:n.a.string.isRequired};t.default=Object(o.connect)(v,E)(N)},1543:function(e,t,s){"use strict";s.r(t);var a=s(40),r=s(41),n=s.n(r),o=s(59),i=s(279),l=s(99),c=s(2766),d=s(712),p=s(771),h=s(1216),u=s(717),m=s(723),b=s(724),j=s(751),f=s(2688),O=s(456),g=s(758),y=s(490),x=s(508),C=s(443),T=s(2655),I=s(607),S=s(695),F=s(757),v=s(2775),E=s(192),N=s(240),P=s(229),A=s(610),R=s(388),_=s(2714),D=s(221),L=s(1544),k=s(45);const w=e=>"DesignFinderUI.modals.NewThemeWizard."+e;function U(){const e=_.Nb();return function(t,s){const a=_.r(t,s);return{folderPath:e(t,s),folderSubcategory:a&&a.subcategory,hasGlobalContentEditorAccess:D.h(t),themeCreationInProgress:_.S(t)}}}const M=e=>({createTheme:t=>e(R.c(t)),duplicateTheme:(t,s)=>e(R.d(t,s))});class q extends a.Component{constructor(e){super(e);this.componentDidUpdate=e=>{this.props.folderId!==e.folderId&&this.setState({folderId:this.props.folderId});this.props.folderPath!==e.folderPath&&this.setState({folderPath:this.props.folderPath})};this.componentWillUnmount=()=>{this.clearThemeCreationErrors()};this.availableThemes=Object.keys(N.c).map(e=>({name:e,text:Object(l.a)(w(`themes.${e}.name`)),help:Object(l.a)(w(`themes.${e}.help`)),value:N.c[e]}));this.displayThemeCreationError=(e,t)=>{const{responseJSON:s}=e;if(!s)return;const{subCategory:a,context:r,errorType:n}=s,o=L.a[a||n]||"DEFAULT";this.alertStore.addAlert({message:Object(l.a)(w(`errors.ThemeCreationError.${o}.message`),Object.assign({},r,{themeName:t})),timestamp:Date.now(),titleText:Object(l.a)(w("errors.ThemeCreationError.titleText")),type:"danger",className:"m-top-5"})};this.clearThemeCreationErrors=()=>{Object.keys(this.alertStore.getAlerts()).forEach(e=>{this.alertStore.removeAlert(e)})};this.disableFileLocationFolder=e=>e.folder.readOnly||e.isThemeFolder||e.isServerlessFunctionFolder;this.onThemeCreateSuccess=e=>{this.props.callback(e)};this.onThemeCreateFailure=(e,t)=>{this.displayThemeCreationError(e,t)};this.onCancel=()=>{this.props.callback(!1)};this.onFormSubmit=e=>{e.preventDefault();const{baseTheme:t,themeName:s,folderPath:a}=this.state;t&&s&&a&&this.onConfirm()};this.onConfirm=()=>{const{createTheme:e,duplicateTheme:t,baseThemeFolder:s}=this.props,{onThemeCreateSuccess:a,onThemeCreateFailure:r}=this,{baseTheme:n,themeName:o,folderId:i,folderPath:l}=this.state;this.clearThemeCreationErrors();return s?t({baseThemeFolder:s,themeName:o,folderId:i,folderPath:l,label:o,onThemeCreateSuccess:a,onThemeCreateFailure:r}):e({themePath:n,themeName:o,folderId:i,folderPath:l,label:o,onThemeCreateSuccess:a,onThemeCreateFailure:r})};this.onThemeNameSuccess=e=>{this.setState({themeName:e})};this.onThemeSelect=e=>{this.setState({baseTheme:e.target.value})};this.onFolderChange=e=>{const t=e.target.value;this.setState({folderId:t.id,folderPath:t.fullPath.split("/")})};this.state=this.getStateFromProps(e);this.alertStore=S.a.newFloatingAlertStore()}getStateFromProps(e){const{themeName:t,folderPath:s,folderId:a}=e;return{baseTheme:null,themeName:t||"",folderPath:s,folderId:a}}getThemeTypeFromPath(e){if(!e)return"";const t=e.split("/")[0];return P.f[t]||""}renderAlertContainer(){return Object(k.jsx)(f.a,{alertStore:this.alertStore,use:"contextual"})}renderLoadingProgress(){return this.props.themeCreationInProgress?Object(k.jsx)(h.a,{autoStart:this.state.themeCreationInProgress,incrementFactor:.1,incrementInterval:500,Component:p.a}):null}renderLoadingState(){const{baseThemeFolder:e}=this.props,t=e&&this.getThemeTypeFromPath(e.fullPath);return this.props.themeCreationInProgress?Object(k.jsx)(d.a,{contextual:!0,label:Object(k.jsx)(i.a,{message:w("loadingText."+(e?"duplicate":"new")),options:{themeType:t}}),showLabel:!0,layout:"centered"}):null}renderThemeSelect(){return Object(k.jsxs)(a.Fragment,{children:[Object(k.jsx)(y.a,{htmlFor:"theme",children:Object(k.jsx)(i.a,{message:w("inputs.theme.label")})}),Object(k.jsx)(T.a,{onChange:this.onThemeSelect,options:this.availableThemes,placeholder:Object(l.a)(w("inputs.theme.placeholder")),required:!0})]})}renderFileLocation(){const{folderSubcategory:e}=this.props,{folderId:t,folderPath:s}=this.state,{onFolderChange:a}=this;return Object(k.jsx)(v.a,{folderId:t,folderPath:s,folderSubcategory:e,handleFolderChange:a,onSelect:a,folderDisabled:this.disableFileLocationFolder})}renderThemeNameInput(){const{themeName:e}=this.state;return Object(k.jsx)(F.a,{allowEmpty:!0,htmlFor:"theme-name",labelClassName:"p-top-0",label:Object(l.a)(w("inputs.themeName.label")),onSuccess:this.onThemeNameSuccess,required:!0,children:Object(k.jsx)(x.a,{name:"theme-name",type:"text",placeholder:Object(l.a)(w("inputs.themeName.placeholder")),maxLength:E.d,value:e})})}renderFooter(){const{themeName:e,baseTheme:t,folderPath:s}=this.state,{baseThemeFolder:r}=this.props;return Object(k.jsxs)(a.Fragment,{children:[Object(k.jsx)(C.a,{"data-test-id":"new-theme__create-button",disabled:!e.trim()||!r&&!t||!s,onClick:this.onConfirm,use:"primary",children:Object(k.jsx)(i.a,{message:w("buttons.create")})}),Object(k.jsx)(C.a,{onClick:this.onCancel,use:"secondary",children:Object(k.jsx)(i.a,{message:w("buttons.cancel")})})]})}render(){const{baseThemeFolder:e}=this.props,t=e&&this.getThemeTypeFromPath(e.fullPath);return Object(k.jsxs)(c.a,{width:600,"data-test-id":"create-theme-modal",children:[Object(k.jsxs)(m.a,{children:[Object(k.jsx)(u.a,{onClick:this.onCancel}),Object(k.jsx)(I.a,{children:Object(k.jsx)(i.a,{message:w("header."+(e?"duplicate":"new")),options:{themeType:t}})})]}),Object(k.jsxs)(g.a,{style:{position:"relative"},onSubmit:this.onFormSubmit,children:[this.renderLoadingProgress(),Object(k.jsxs)("div",{style:{position:"relative"},className:"theme-options m-top-1",children:[this.renderLoadingState(),this.renderAlertContainer(),Object(k.jsx)(b.a,{children:Object(k.jsxs)(O.a,{childClassName:"m-bottom-3",children:[e?null:this.renderThemeSelect(),this.renderThemeNameInput(),this.renderFileLocation()]})}),Object(k.jsx)(j.a,{children:this.renderFooter()})]})]})]})}}q.propTypes={callback:n.a.func.isRequired,createTheme:n.a.func.isRequired,duplicateTheme:n.a.func.isRequired,themeName:n.a.string,folderId:A.FolderPropTypes.folderId.isRequired,folderSubcategory:A.FolderPropTypes.folderSubcategory,folderPath:n.a.arrayOf(n.a.string).isRequired,themeCreationInProgress:n.a.bool.isRequired,baseThemeFolder:A.FolderPropTypes.folder};t.default=Object(o.connect)(U,M)(q)},1544:function(e,t,s){"use strict";const a={"ThemeCreationError.COPY_IN_PROGRESS":"COPY_IN_PROGRESS","ThemeCreationError.ENQUEUE_FAILED":"ENQUEUE_FAILED","ThemeCreationError.FILE_UPLOAD_ERROR":"FILE_UPLOAD_ERROR","ThemeCreationError.FORBIDDEN_DESTINATION_DIRECTORY":"FORBIDDEN_DESTINATION_DIRECTORY","ThemeCreationError.MARKETPLACE_COPY_ERROR":"MARKETPLACE_COPY_ERROR","ThemeCreationError.NOT_AUTHORIZED":"NOT_AUTHORIZED","ThemeCreationError.RATE_LIMITED":"RATE_LIMITED","ThemeCreationError.THEME_ALREADY_EXISTS":"THEME_ALREADY_EXISTS","ThemeCreationError.THEME_CLONE_ERROR":"THEME_CLONE_ERROR","ThemeCreationError.THEME_NOT_FOUND":"THEME_NOT_FOUND","ThemeCreationError.VALIDATION_FAILURE":"VALIDATION_FAILURE","ThemeCreationError.EXTERNAL_DEPENDENCY_ERROR":"EXTERNAL_DEPENDENCY_ERROR","ThemeCreationError.ASSET_LIMIT_REACHED":"ASSET_LIMIT_REACHED","ThemeCreationError.MODULE_VALIDATION_FAILURE":"MODULE_VALIDATION_FAILURE"};t.a=Object.freeze(a)},1545:function(e,t,s){"use strict";const a={"AssetCopyError.COPY_IN_PROGRESS":"COPY_IN_PROGRESS","AssetCopyError.ENQUEUE_FAILED":"ENQUEUE_FAILED","AssetCopyError.FILE_UPLOAD_ERROR":"FILE_UPLOAD_ERROR","AssetCopyError.FORBIDDEN_DESTINATION_DIRECTORY":"FORBIDDEN_DESTINATION_DIRECTORY","AssetCopyError.MARKETPLACE_COPY_ERROR":"MARKETPLACE_COPY_ERROR","AssetCopyError.NOT_AUTHORIZED":"NOT_AUTHORIZED","AssetCopyError.RATE_LIMITED":"RATE_LIMITED","AssetCopyError.ASSET_ALREADY_EXISTS":"ASSET_ALREADY_EXISTS","AssetCopyError.ASSET_COPY_ERROR":"ASSET_COPY_ERROR","AssetCopyError.PATH_NOT_FOUND":"PATH_NOT_FOUND","AssetCopyError.VALIDATION_FAILURE":"VALIDATION_FAILURE","AssetCopyError.EXTERNAL_DEPENDENCY_ERROR":"ASSET_EXTERNAL_DEPENDENCY_ERROR","AssetCopyError.ASSET_LIMIT_REACHED":"ASSET_LIMIT_REACHED","AssetCopyError.MODULE_VALIDATION_FAILURE":"MODULE_VALIDATION_FAILURE"};t.a=Object.freeze(a)},1546:function(e,t){e.exports="//static.hsappstatic.net/ui-addon-avatars/static-2.5477/images/default-avatar.png"},1547:function(e,t){e.exports="//static.hsappstatic.net/ui-addon-avatars/static-2.5477/images/default-company-avatar.png"},1548:function(e,t,s){"use strict";s.r(t);var a=s(40),r=s(55),n=s(41),o=s.n(n),i=s(4),l=s(279),c=s(443),d=s(724),p=s(717),h=s(751),u=s(723),m=s(2766),b=s(2742),j=s(456),f=s(2734),O=s(765),g=s(696),y=s(2712),x=s(89),C=s(610),T=s(763),I=s(2750),S=s(662),F=s(58),v=s(607),E=s(45);const N=e=>"DesignFinderUI.modals.DeleteFileModal."+e;class P extends a.Component{constructor(...e){super(...e);this.state={confirmed:!1,retried:!1};this.handleCancel=()=>{this.props.callback(!1)};this.handleConfirm=()=>{const{callback:e,deleteFile:t}=this.props;t();e(!0)};this.handleConfirmChange=e=>{this.setState({confirmed:e.target.checked})};this.handleRetry=()=>{this.setState({retried:!0});this.props.fetchDependents()};this.renderDependents=()=>{const{dependentsByCategory:e,fetchDependentsStatus:t,fileId:s,fileName:a,fetchDependentsError:r}=this.props,{confirmed:n}=this.state,o=i.a.SafeString(a);if(t===x.PENDING)return Object(E.jsx)(f.a,{grow:!0,minHeight:100});const c=Object.keys(e).map(t=>{const s=e[t],a=Object.keys(s).length;return a?Object(E.jsx)(l.a,{message:N("dependents.categories."+t),options:{count:a}},t):null}).filter(e=>null!==e),d=Object(E.jsx)("div",{className:"m-top-4",children:Object(E.jsx)(b.a,{checked:n,onChange:this.handleConfirmChange,children:Object(E.jsx)(l.a,{"data-test-id":"modal__delete-file__confirm-checkbox",message:N("dependents.confirmCheckbox.label")})})});return r&&this.state.retried?Object(E.jsxs)("div",{children:[Object(E.jsx)(g.a,{type:"danger",children:Object(E.jsx)(l.a,{message:N("dependents.message.retryError.text")})}),d]}):r&&r.xhr&&0===r.xhr.status?Object(E.jsxs)("div",{children:[Object(E.jsxs)(g.a,{type:"danger",children:[Object(E.jsx)(l.a,{message:N("dependents.message.timeoutError.text")}),Object(E.jsx)(y.a,{className:"p-left-1",onClick:this.handleRetry,children:Object(E.jsx)(l.a,{message:N("dependents.message.timeoutError.link")})})]}),d]}):c.length?Object(E.jsxs)("div",{children:[Object(E.jsx)("strong",{children:Object(E.jsx)(O.a,{children:Object(E.jsx)(l.a,{message:N("dependents.message.withDependents"),options:{fileName:o}})})}),Object(E.jsx)(j.a,{className:"m-top-2",styled:!0,children:c}),Object(E.jsx)(T.a,{fileId:s,onClick:this.handleCancel,children:Object(E.jsx)(l.a,{message:N("dependents.cancelLink.text")})}),d]}):Object(E.jsx)("div",{children:Object(E.jsx)("strong",{children:Object(E.jsx)(O.a,{children:Object(E.jsx)(l.a,{message:N("dependents.message.noDependents"),options:{fileName:o}})})})})}}componentDidUpdate(e){const{fetchDependentsStatus:t}=e,{fetchDependentsStatus:s}=this.props;t===x.PENDING&&s===x.SUCCEEDED&&(this.props.dependentsCount||this.setState({confirmed:!0}))}render(){const{fileName:e}=this.props,{confirmed:t}=this.state,s=this.renderDependents();return Object(E.jsxs)(m.a,{size:"auto",use:"danger",width:610,"data-test-id":"delete-file-modal",children:[Object(E.jsxs)(u.a,{children:[Object(E.jsx)(p.a,{onClick:this.handleCancel}),Object(E.jsx)(v.a,{children:Object(E.jsx)(O.a,{children:Object(E.jsx)(l.a,{message:N("header"),options:{fileName:i.a.SafeString(e)}})})})]}),Object(E.jsxs)(d.a,{children:[Object(E.jsx)("p",{children:Object(E.jsx)(l.a,{message:N("message")})}),Object(E.jsx)("div",{children:s})]}),Object(E.jsxs)(h.a,{children:[Object(E.jsx)(c.a,{"data-test-id":"modal__delete-file__delete-button",disabled:!t,onClick:this.handleConfirm,use:"danger",children:Object(E.jsx)(l.a,{message:N("buttons.confirm.text")})}),Object(E.jsx)(c.a,{onClick:this.handleCancel,use:"tertiary-light",children:Object(E.jsx)(l.a,{message:N("buttons.cancel.text")})})]})]})}}P.propTypes={callback:o.a.func,deleteFile:o.a.func.isRequired,dependentsByCategory:C.dependentsByCategory,dependentsCount:o.a.number,fetchDependentsError:o.a.instanceOf(Error),fetchDependentsStatus:o.a.oneOf(Object.values(x||{})),fileId:C.FilePropTypes.fileId.isRequired,fileName:C.FilePropTypes.fileName.isRequired,fetchDependents:o.a.func.isRequired};P.defaultProps={callback:r.a,dependentsByCategory:{},dependentsCount:0,fetchDependentsError:null,fetchDependentsStatus:x.UNINITIALIZED};t.default=Object(F.compose)(I.a,S.a)(P)},1549:function(e,t,s){"use strict";s.r(t);var a=s(4),r=s(279),n=s(41),o=s.n(n),i=s(40),l=s(55),c=s(443),d=s(717),p=s(751),h=s(723),u=s(2766),m=s(765),b=s(724),j=s(610),f=s(2750),O=s(58),g=s(607),y=s(45);const x=e=>"DesignFinderUI.modals.HardDeleteFileModal."+e;class C extends i.Component{constructor(...e){super(...e);this.handleCancel=()=>{this.props.callback(!1)};this.handleConfirm=()=>{const{callback:e,hardDeleteFile:t}=this.props;t();e(!0)}}render(){const{fileName:e}=this.props;return Object(y.jsxs)(u.a,{size:"auto",use:"danger",width:610,"data-test-id":"hard-delete-file-modal",children:[Object(y.jsxs)(h.a,{children:[Object(y.jsx)(d.a,{onClick:this.handleCancel}),Object(y.jsx)(g.a,{children:Object(y.jsx)(m.a,{children:Object(y.jsx)(r.a,{message:x("header"),options:{fileName:a.a.SafeString(e)}})})})]}),Object(y.jsx)(b.a,{children:Object(y.jsx)("p",{children:Object(y.jsx)(r.a,{message:x("message"),options:{fileName:a.a.SafeString(e)}})})}),Object(y.jsxs)(p.a,{children:[Object(y.jsx)(c.a,{"data-test-id":"modal__hard-delete-file__hard-delete-button",onClick:this.handleConfirm,use:"danger",children:Object(y.jsx)(r.a,{message:x("buttons.confirm.text"),options:{fileName:a.a.SafeString(e)}})}),Object(y.jsx)(c.a,{onClick:this.handleCancel,use:"tertiary-light",children:Object(y.jsx)(r.a,{message:x("buttons.cancel.text"),options:{fileName:a.a.SafeString(e)}})})]})]})}}C.propTypes={callback:o.a.func,hardDeleteFile:o.a.func.isRequired,fileName:j.FilePropTypes.fileName};C.defaultProps={callback:l.a};t.default=Object(O.compose)(f.a)(C)},1550:function(e,t,s){"use strict";s.r(t);s.d(t,"default",(function(){return F}));var a=s(40),r=s(279),n=s(59),o=s(443),i=s(2766),l=s(723),c=s(724),d=s(751),p=s(717),h=s(2741),u=s(2791),m=s(2734),b=s(89),j=s(2742),f=s(456),O=s(395),g=s(2714),y=s(2728),x=s(2683),C=s(242),T=s(607),I=s(762),S=s(45);function F({callback:e}){const t=Object(n.useDispatch)(),{fetchStatus:s,rootFolderId:m,selectedAssets:j,liveDependents:f,selectedFileIds:I,selectedFolderIds:F,totalFilesCount:E}=Object(n.useSelector)(e=>{const t=Object(y.makeGetLiveParentConnectionsCount)(),s=Object(y.makeGetFolderConnectionsByAssetId)(),a=Object(g.rb)(e),r=[],n=[],o={};a.forEach(t=>{if(t instanceof C.a){n.push(t.id);const a=s(e,{folderId:t.id});Object.keys(a).forEach(t=>{const s=Object(g.o)(e,{fileId:t});s&&(o[t]=s)})}else{r.push(t.id);o[t.id]=t}});const i=Object.keys(o).reduce((s,a)=>{const{id:r,name:n}=o[a],i=t(e,{assetId:r});i&&s.push({id:r,name:n,count:i});return s},[]);return{fetchStatus:Object(y.getBulkFetchStatus)(e,{assetIds:(a||[]).map(e=>e.id)}),rootFolderId:Object(g.d)(e),selectedAssets:a,liveDependents:i,selectedFileIds:r,selectedFolderIds:n,totalFilesCount:Object.keys(o).length}}),[N,P]=Object(a.useState)(m),[A,R]=Object(a.useState)(!1);Object(a.useEffect)(()=>{Promise.all([t(Object(O.a)(I)),...F.map(e=>t(Object(x.l)(e)))]).catch(e=>{throw e})},[]);const _=Object(a.useRef)(s);Object(a.useEffect)(()=>{_.current!==b.PENDING||s!==b.SUCCEEDED||f.length||R(!0);_.current=s},[s,f]);const D=e=>{P(e.id)},L=()=>{e()},k=()=>{N&&t(Object(x.n)(j,N));e()},w=({isThemeFolder:e,isServerlessFunctionFolder:t,isLocked:s})=>{if(!e&&!t&&!s)return!1;if(s)return!0;if(void 0!==j.find(e=>"LAYOUT"===e.type)&&e)return!0;return!(void 0===j.find(e=>"RAW_ASSET"!==e.type)||!t)},U=e=>{R(e.target.checked)};return Object(S.jsxs)(i.a,{width:500,"data-test-id":"move-assets-modal",children:[Object(S.jsxs)(l.a,{children:[Object(S.jsx)(p.a,{onClick:L}),Object(S.jsx)(T.a,{children:Object(S.jsx)(r.a,{message:"DesignFinderUI.modals.BulkMoveAssetsModal.header"})})]}),Object(S.jsxs)(c.a,{children:[Object(S.jsx)(h.a,{children:Object(S.jsx)(r.a,{message:"DesignFinderUI.modals.BulkMoveAssetsModal.navHeader"})}),Object(S.jsx)(u.a,{onFolderClick:D,scrollToSelectedFolder:!0,selectedFolderId:N,folderDisabled:w}),Object(S.jsx)("div",{children:Object(S.jsx)(v,{fetchStatus:s,liveDependents:f,totalFilesCount:E,confirmed:A,handleConfirmChange:U,handleCancel:L})})]}),Object(S.jsxs)(d.a,{children:[Object(S.jsx)(o.a,{"data-test-id":"modal__move-assets__move-button",onClick:k,use:"primary",disabled:!A,children:Object(S.jsx)(r.a,{message:"DesignFinderUI.modals.BulkMoveAssetsModal.buttons.submitButton",options:{count:E}})}),Object(S.jsx)(o.a,{onClick:L,use:"secondary",children:Object(S.jsx)(r.a,{message:"DesignFinderUI.modals.BulkMoveAssetsModal.buttons.cancelButton"})})]})]})}function v({fetchStatus:e,liveDependents:t,totalFilesCount:s,confirmed:a,handleConfirmChange:n,handleCancel:o}){return e===b.PENDING?Object(S.jsx)(m.a,{grow:!0,minHeight:100}):Object(S.jsxs)("div",{children:[Object(S.jsx)("strong",{children:Object(S.jsx)(r.a,{message:t.length?"DesignFinderUI.modals.BulkMoveAssetsModal.dependents.message.dependents":"DesignFinderUI.modals.BulkMoveAssetsModal.dependents.message.empty",options:{count:t.length,totalCount:s}})}),t.length?Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(f.a,{className:"m-top-2",styled:!0,children:t.sort((e,t)=>e.count===t.count?e.name<t.name?-1:e.name>t.name?1:0:t.count-e.count).map(({id:e,count:t})=>Object(S.jsx)(I.a,{fileId:e,liveDependentsCount:t,callback:o},e))}),Object(S.jsx)("div",{className:"m-top-4",children:Object(S.jsx)(j.a,{checked:a,onChange:n,children:Object(S.jsx)(r.a,{message:t.length?"DesignFinderUI.modals.BulkMoveAssetsModal.dependents.confirmCheckbox.label.dependents":"DesignFinderUI.modals.BulkMoveAssetsModal.dependents.confirmCheckbox.label.empty"})})})]}):null]})}},1551:function(e,t,s){"use strict";s.r(t);s.d(t,"default",(function(){return E}));var a=s(40),r=s(59),n=s(4),o=s(279),i=s(443),l=s(2766),c=s(723),d=s(724),p=s(751),h=s(717),u=s(2741),m=s(2791),b=s(2734),j=s(89),f=s(2742),O=s(696),g=s(765),y=s(763),x=s(2712),C=s(456),T=s(2714),I=s(2683),S=s(607),F=s(662),v=s(45);function E({fileId:e,fileName:t,folderId:s,callback:n}){const b=Object(r.useDispatch)(),{rootFolderId:j,assets:f}=Object(r.useSelector)(e=>({rootFolderId:Object(T.d)(e),assets:Object(T.rb)(e)})),[O,g]=Object(a.useState)(s||j),[y,x]=Object(a.useState)(!1),C=e=>{g(e.id)},F=()=>{n()},E=()=>{O&&O!==s&&b(Object(I.n)(f,O));n()},P=({isThemeFolder:e,isServerlessFunctionFolder:t,isLocked:s})=>{if(!e&&!t&&!s)return!1;if(s)return!0;if(void 0!==f.find(e=>"LAYOUT"===e.type)&&e)return!0;return!(void 0===f.find(e=>"RAW_ASSET"!==e.type)||!t)};return Object(v.jsxs)(l.a,{width:500,"data-test-id":"move-assets-modal",children:[Object(v.jsxs)(c.a,{children:[Object(v.jsx)(h.a,{onClick:F}),Object(v.jsx)(S.a,{children:Object(v.jsx)(o.a,{message:"DesignFinderUI.modals.MoveAssetsModal.header",options:{fileName:t,count:f.length}})})]}),Object(v.jsxs)(d.a,{children:[Object(v.jsx)(u.a,{children:Object(v.jsx)(o.a,{message:"DesignFinderUI.modals.MoveAssetsModal.navHeader"})}),Object(v.jsx)(m.a,{onFolderClick:C,scrollToSelectedFolder:!0,selectedFolderId:O||s,folderDisabled:P}),Object(v.jsx)(N,{fileId:e,fileName:t,confirmed:y,setConfirmed:x,handleCancel:F})]}),Object(v.jsxs)(p.a,{children:[Object(v.jsx)(i.a,{"data-test-id":"modal__move-assets__move-button",onClick:E,use:"primary",disabled:!y,children:Object(v.jsx)(o.a,{message:"DesignFinderUI.modals.MoveAssetsModal.buttons.submitButton",options:{count:f.length}})}),Object(v.jsx)(i.a,{onClick:F,use:"secondary",children:Object(v.jsx)(o.a,{message:"DesignFinderUI.modals.MoveAssetsModal.buttons.cancelButton"})})]})]})}function N({fileId:e,fileName:t,confirmed:s,setConfirmed:r,handleCancel:i}){const{fetchDependents:l,dependentsByCategory:c,dependentsCount:d,fetchDependentsError:p,fetchDependentsStatus:h}=Object(F.b)(e),u=Object(a.useRef)(h);Object(a.useEffect)(()=>{u.current!==j.PENDING||h!==j.SUCCEEDED||d||r(!0);u.current=h},[h,d,r]);const m=e=>{r(e.target.checked)},[T,I]=Object(a.useState)(!1),S=()=>{I(!0);l()},E=n.a.SafeString(t);if(h===j.PENDING)return Object(v.jsx)(b.a,{grow:!0,minHeight:100});const N=Object.keys(c).map(e=>{const t=c[e],s=Object.keys(t).length;return s?Object(v.jsx)(o.a,{message:"DesignFinderUI.modals.MoveAssetsModal.dependents.categories."+e,options:{count:s}},e):null}).filter(e=>null!==e),P=Object(v.jsx)("div",{className:"m-top-4",children:Object(v.jsx)(f.a,{checked:s,onChange:m,children:Object(v.jsx)(o.a,{"data-test-id":"modal__delete-file__confirm-checkbox",message:"DesignFinderUI.modals.MoveAssetsModal.dependents.confirmCheckbox.label"})})});return p&&T?Object(v.jsxs)("div",{children:[Object(v.jsx)(O.a,{type:"danger",children:Object(v.jsx)(o.a,{message:"DesignFinderUI.modals.MoveAssetsModal.dependents.message.retryError.text"})}),P]}):p&&p.xhr&&0===p.xhr.status?Object(v.jsxs)("div",{children:[Object(v.jsxs)(O.a,{type:"danger",children:[Object(v.jsx)(o.a,{message:"DesignFinderUI.modals.MoveAssetsModal.dependents.message.timeoutError.text"}),Object(v.jsx)(x.a,{className:"p-left-1",onClick:S,children:Object(v.jsx)(o.a,{message:"DesignFinderUI.modals.MoveAssetsModal.dependents.message.timeoutError.link"})})]}),P]}):N.length?Object(v.jsxs)("div",{children:[Object(v.jsx)("strong",{children:Object(v.jsx)(g.a,{children:Object(v.jsx)(o.a,{message:"DesignFinderUI.modals.MoveAssetsModal.dependents.message.withDependents",options:{fileName:E}})})}),Object(v.jsx)(C.a,{className:"m-top-2",styled:!0,children:N}),Object(v.jsx)(y.a,{fileId:e,onClick:i,children:Object(v.jsx)(o.a,{message:"DesignFinderUI.modals.MoveAssetsModal.dependents.cancelLink.text"})}),P]}):Object(v.jsx)("div",{children:Object(v.jsx)("strong",{children:Object(v.jsx)(g.a,{children:Object(v.jsx)(o.a,{message:"DesignFinderUI.modals.MoveAssetsModal.dependents.message.noDependents",options:{fileName:E}})})})})}},1552:function(e,t,s){"use strict";s.r(t);var a=s(40),r=s(59),n=s(41),o=s.n(n),i=s(55),l=s(279),c=s(443),d=s(724),p=s(717),h=s(751),u=s(2766),m=s(2742),b=s(456),j=s(2734),f=s(395),O=s(2651),g=s(2683),y=s(89),x=s(242),C=s(2728),T=s(2714),I=s(762),S=s(607),F=s(723),v=s(45);const E=e=>"DesignFinderUI.modals.BulkDeleteModal."+e;class N extends a.Component{constructor(e){super(e);this.handleCancel=this.handleCancel.bind(this);this.handleConfirm=this.handleConfirm.bind(this);this.handleConfirmChange=this.handleConfirmChange.bind(this);this.renderDependentItem=this.renderDependentItem.bind(this);this.state={confirmed:!1}}componentDidMount(){this.props.bulkFetchParents(this.props.selectedFileIds);this.props.selectedFolderIds.forEach(e=>this.props.fetchFolderParents(e))}handleCancel(){this.props.callback(!1)}handleConfirm(){this.props.bulkDeleteFiles(this.props.selectedFileIds);this.props.bulkDeleteFolders(this.props.selectedFolderIds);this.props.callback(!0)}handleConfirmChange(e){this.setState({confirmed:e.target.checked})}renderDependentItem({id:e,count:t}){return Object(v.jsx)(I.a,{fileId:e,liveDependentsCount:t,callback:this.handleCancel},e)}renderDependents(){const{confirmed:e}=this.state,{fetchStatus:t,liveDependents:s,totalFilesCount:a}=this.props;if(t===y.PENDING)return Object(v.jsx)(j.a,{grow:!0,minHeight:100});const r=s.length?"dependents":"empty",n=Object(v.jsx)(m.a,{checked:e,onChange:this.handleConfirmChange,children:Object(v.jsx)(l.a,{message:E("dependents.confirmCheckbox.label."+r)})});if(!s.length)return Object(v.jsxs)("div",{children:[Object(v.jsx)("strong",{children:Object(v.jsx)(l.a,{message:E("dependents.message.empty"),options:{totalCount:a}})}),Object(v.jsx)("div",{className:"m-top-4",children:n})]});const o=s.sort((e,t)=>e.count===t.count?e.name<t.name?-1:e.name>t.name?1:0:t.count-e.count).map(this.renderDependentItem);return Object(v.jsxs)("div",{children:[Object(v.jsx)("strong",{children:Object(v.jsx)(l.a,{message:E("dependents.message.dependents"),options:{count:s.length,totalCount:a}})}),Object(v.jsx)(b.a,{className:"m-top-2",styled:!0,children:o}),n]})}render(){const{totalFilesCount:e}=this.props,{confirmed:t}=this.state,s=this.renderDependents();return Object(v.jsxs)(u.a,{size:"auto",use:"danger",width:630,children:[Object(v.jsxs)(F.a,{children:[Object(v.jsx)(p.a,{onClick:this.handleCancel}),Object(v.jsx)(S.a,{children:Object(v.jsx)(l.a,{message:E("header.text")})})]}),Object(v.jsx)(d.a,{children:Object(v.jsx)("p",{children:Object(v.jsx)(l.a,{message:E("header.message")})})}),Object(v.jsxs)(h.a,{children:[Object(v.jsx)("div",{className:"m-bottom-6",children:s}),Object(v.jsxs)("div",{className:"has--horizontal-spacing m-left-0",children:[Object(v.jsx)(c.a,{disabled:!t,onClick:this.handleConfirm,use:"danger",children:Object(v.jsx)(l.a,{message:E("buttons.confirm.text"),options:{count:e}})}),Object(v.jsx)(c.a,{onClick:this.handleCancel,use:"tertiary-light",children:Object(v.jsx)(l.a,{message:E("buttons.cancel.text")})})]})]})]})}}N.propTypes={bulkDeleteFiles:o.a.func.isRequired,bulkDeleteFolders:o.a.func.isRequired,bulkFetchParents:o.a.func.isRequired,callback:o.a.func,fetchFolderParents:o.a.func.isRequired,fetchStatus:o.a.oneOf(Object.values(y||{})),liveDependents:o.a.arrayOf(o.a.shape({id:o.a.number.isRequired,name:o.a.string.isRequired,count:o.a.number.isRequired})),selectedFileIds:o.a.arrayOf(o.a.number),selectedFolderIds:o.a.arrayOf(o.a.number),totalFilesCount:o.a.number};N.defaultProps={callback:i.a,fetchStatus:y.UNINITIALIZED,liveDependents:[],selectedAssets:[],selectedFileIds:[],selectedFolderIds:[],totalFilesCount:0};function P(){const e=C.makeGetLiveParentConnectionsCount(),t=C.makeGetFolderConnectionsByAssetId();return function(s){const a=T.rb(s),r=[],n=[],o={};a.forEach(e=>{if(e instanceof x.a){n.push(e.id);const a=t(s,{folderId:e.id});Object.keys(a).forEach(e=>{const t=T.o(s,{fileId:e});o[e]=t})}else{r.push(e.id);o[e.id]=e}});const i=Object.keys(o).reduce((t,a)=>{const{id:r,name:n}=o[a],i=e(s,{assetId:r});i&&t.push({id:r,name:n,count:i});return t},[]);return{fetchStatus:C.getBulkFetchStatus(s,{assetIds:(a||[]).map(e=>e.id)}),liveDependents:i,selectedFileIds:r,selectedFolderIds:n,totalFilesCount:Object.keys(o).length}}}const A={bulkDeleteFiles:O.a,bulkDeleteFolders:g.c,bulkFetchParents:f.a,fetchFolderParents:g.l};t.default=Object(r.connect)(P,A)(N)},1553:function(e,t,s){"use strict";s.r(t);var a=s(40),r=s(59),n=s(55),o=s(41),i=s.n(o),l=s(73),c=s(4),d=s(279),p=s(443),h=s(724),u=s(717),m=s(751),b=s(2766),j=s(2742),f=s(456),O=s(2734),g=s(765),y=s(696),x=s(2712),C=s(2683),T=s(89),I=s(610),S=s(2728),F=s(79),v=s(762),E=s(769),N=s(58),P=s(607),A=s(723),R=s(45);const _=e=>"DesignFinderUI.modals.DeleteFolderModal."+e;function D(){const e=S.makeGetFetchStatus(),t=S.makeGetFetchError(),s=S.makeGetFolderConnectionsByAssetId(),a=S.makeGetLiveParentConnectionsCount();return(r,n)=>{const{folderId:o}=n,i=s(r,n),c=Object.keys(i).length,d=Object.keys(i).reduce((e,t)=>{const s=a(r,{assetId:t});s&&e.push({fileId:Object(F.i)(t),liveDependentsCount:s});return e},[]);return{fetchParentsError:t(r,{assetId:o}),fetchParentsStatus:e(r,{assetId:o}),folderDependents:Object(l.sortBy)(d,"liveDependentsCount").reverse(),folderFilesCount:c}}}const L={deleteFolder:C.g,fetchParents:C.l};class k extends a.Component{constructor(e){super(e);this.handleCancel=this.handleCancel.bind(this);this.handleConfirm=this.handleConfirm.bind(this);this.handleConfirmChange=this.handleConfirmChange.bind(this);this.fetchParents=this.fetchParents.bind(this);this.handleRetry=this.handleRetry.bind(this);this.state={confirmed:!1,retried:!1}}componentDidMount(){this.fetchParents()}fetchParents(){const{fetchParents:e,folderId:t}=this.props;e(t)}handleRetry(){this.setState({retried:!0});this.fetchParents()}handleCancel(){this.props.callback(!1)}handleConfirm(){const{callback:e,deleteFolder:t,folderId:s,parentFolderId:a}=this.props;t(s,a);e(!0)}handleConfirmChange(e){this.setState({confirmed:e.target.checked})}renderDependents(){const{confirmed:e}=this.state,{fetchParentsStatus:t,folderDependents:s,folderFilesCount:a,folderName:r,fetchParentsError:n}=this.props,o=c.a.SafeString(r);if(t===T.PENDING)return Object(R.jsx)(O.a,{grow:!0,minHeight:100});const i=s.length?"dependents":"empty",l=Object(R.jsx)("div",{className:"m-top-4",children:Object(R.jsx)(j.a,{checked:e,"data-test-id":"modal__delete-folder__confirm-checkbox",onChange:this.handleConfirmChange,children:Object(R.jsx)(d.a,{message:_("dependents.confirmCheckbox.label."+i)})})});if(n&&this.state.retried)return Object(R.jsxs)("div",{children:[Object(R.jsx)(y.a,{type:"danger",children:Object(R.jsx)(d.a,{message:_("dependents.message.retryError.text")})}),l]});if(n&&0===n.xhr.status)return Object(R.jsxs)("div",{children:[Object(R.jsxs)(y.a,{type:"danger",children:[Object(R.jsx)(d.a,{message:_("dependents.message.timeoutError.text")}),Object(R.jsx)(x.a,{className:"p-left-1",onClick:this.handleRetry,children:Object(R.jsx)(d.a,{message:_("dependents.message.timeoutError.link")})})]}),l]});if(!s.length)return Object(R.jsxs)("div",{children:[Object(R.jsx)("strong",{children:Object(R.jsx)(g.a,{children:Object(R.jsx)(d.a,{message:_("dependents.message.empty"),options:{count:a,folderName:o}})})}),l]});const p=s.map(e=>{const{fileId:t,liveDependentsCount:s}=e;return Object(R.jsx)(v.a,{fileId:t,liveDependentsCount:s,callback:this.handleCancel},t)});return Object(R.jsxs)("div",{children:[Object(R.jsx)("strong",{children:Object(R.jsx)(g.a,{children:Object(R.jsx)(d.a,{message:_("dependents.message.liveAssets"),options:{count:a,liveDependentsCount:s.length,folderName:o}})})}),Object(R.jsx)(f.a,{className:"m-top-2",styled:!0,children:p}),l]})}render(){const{confirmed:e}=this.state,{folderName:t}=this.props,s=c.a.SafeString(t),a=this.renderDependents();return Object(R.jsxs)(b.a,{size:"auto",use:"danger",width:610,"data-test-id":"delete-folder-modal",children:[Object(R.jsxs)(A.a,{children:[Object(R.jsx)(u.a,{onClick:this.handleCancel}),Object(R.jsx)(P.a,{children:Object(R.jsx)(g.a,{children:Object(R.jsx)(d.a,{message:_("header.text"),options:{folderName:s}})})})]}),Object(R.jsx)(h.a,{children:Object(R.jsx)("p",{children:Object(R.jsx)(d.a,{message:_("header.message")})})}),Object(R.jsx)(m.a,{children:Object(R.jsxs)("div",{children:[Object(R.jsx)("div",{className:"m-bottom-6",children:a}),Object(R.jsxs)("div",{className:"has--horizontal-spacing m-left-0",children:[Object(R.jsx)(p.a,{"data-test-id":"modal__delete-folder__delete-button",disabled:!e,onClick:this.handleConfirm,use:"danger",children:Object(R.jsx)(d.a,{message:_("buttons.confirm.text")})}),Object(R.jsx)(p.a,{onClick:this.handleCancel,use:"tertiary-light",children:Object(R.jsx)(d.a,{message:_("buttons.cancel.text")})})]})]})})]})}}k.propTypes={callback:i.a.func,deleteFolder:i.a.func.isRequired,fetchParents:i.a.func.isRequired,fetchParentsError:i.a.instanceOf(Error),fetchParentsStatus:i.a.oneOf(Object.values(T||{})),folderDependents:i.a.arrayOf(i.a.shape({fileId:i.a.number.isRequired,liveDependentsCount:i.a.number.isRequired})),folderFilesCount:i.a.number,folderId:I.FolderPropTypes.folderId.isRequired,folderName:I.FolderPropTypes.folderName.isRequired,parentFolderId:I.FolderPropTypes.folderId};k.defaultProps={callback:n.a,fetchParentsError:null,fetchParentsStatus:T.UNINITIALIZED,folderDependents:[],folderFilesCount:0};t.default=Object(N.compose)(E.a,Object(r.connect)(D,L))(k)},1554:function(e,t,s){"use strict";s.r(t);s.d(t,"default",(function(){return _}));var a=s(40),r=s(59),n=s(279),o=s(2683),i=s(2714),l=s(695),c=s(99),d=s(2766),p=s(712),h=s(771),u=s(1216),m=s(717),b=s(723),j=s(724),f=s(751),O=s(2688),g=s(456),y=s(758),x=s(508),C=s(443),T=s(607),I=s(192),S=s(757),F=s(2775),v=s(1544),E=s(45);const N=({readOnlyFolderCloningInProgress:e})=>e?Object(E.jsx)(u.a,{autoStart:e,incrementFactor:.1,incrementInterval:500,Component:h.a}):null,P=({srcReadOnlyFolder:e,readOnlyFolderCloningInProgress:t})=>{const s=null==e?void 0:e.fullPath;return t?Object(E.jsx)(p.a,{contextual:!0,label:Object(E.jsx)(n.a,{message:"DesignFinderUI.modals.CloneReadOnlyFolder.loadingText.duplicate",options:{folderPath:s}}),showLabel:!0,layout:"centered"}):null},A=({newFolderName:e,srcReadOnlyFolder:t,onConfirm:s,onCancel:a})=>Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(C.a,{"data-test-id":"new-theme__create-button",disabled:!e.trim()||!t,onClick:s,use:"primary",children:Object(E.jsx)(n.a,{message:"DesignFinderUI.modals.CloneReadOnlyFolder.buttons.create"})}),Object(E.jsx)(C.a,{onClick:a,use:"secondary",children:Object(E.jsx)(n.a,{message:"DesignFinderUI.modals.CloneReadOnlyFolder.buttons.cancel"})})]}),R=l.a.newFloatingAlertStore();function _({callback:e,folderId:t,newFolderName:s,srcReadOnlyFolder:l}){const p=Object(r.useDispatch)(),{folderPath:h,folderSubcategory:u,readOnlyFolderCloningInProgress:C}=Object(r.useSelector)(e=>{const t=Object(i.Nb)(),s=Object(i.r)(e,{folderId:l.id});return{folderPath:t(e,{folderId:Object(i.kb)(e)}),folderSubcategory:s&&s.subcategory,readOnlyFolderCloningInProgress:Object(i.M)(e)}}),[_,D]=Object(a.useState)({srcReadOnlyFolder:l,folderId:t,folderPath:h,newFolderName:s}),L=()=>{Object.keys(R.getAlerts()).forEach(e=>{R.removeAlert(e)})},k=(e,t)=>{const{responseJSON:s}=e;if(!s)return;const{subCategory:a,context:r,errorType:n}=s,o=v.a[a||n]||"DEFAULT";R.addAlert({message:Object(c.a)(`DesignFinderUI.modals.CloneReadOnlyFolder.errors.FolderCloneError.${o}.message`,Object.assign({},r,{newFolderName:t})),timestamp:Date.now(),titleText:Object(c.a)("DesignFinderUI.modals.CloneReadOnlyFolder.errors.FolderCloneError.titleText"),type:"danger",className:"m-top-5"})},w=()=>{e(!1)},U=t=>{e(t)},M=(e,t)=>{k(e,t)},q=()=>{L();return p(Object(o.i)({srcReadOnlyFolder:_.srcReadOnlyFolder,newFolderName:_.newFolderName,folderPath:_.folderPath,folderId:_.folderId,onReadOnlyFolderCloneSuccess:U,onReadOnlyFolderCloneFailure:M}))},B=e=>{e.preventDefault()},H=e=>{const t=e.target.value;D(e=>Object.assign({},e,{folderId:t.id,folderPath:t.fullPath.split("/")}))},z=e=>e.folder.readOnly||e.isThemeFolder||e.isServerlessFunctionFolder;return Object(E.jsxs)(d.a,{width:600,"data-test-id":"create-theme-modal",children:[Object(E.jsxs)(b.a,{children:[Object(E.jsx)(m.a,{onClick:w}),Object(E.jsx)(T.a,{children:Object(E.jsx)(n.a,{message:"DesignFinderUI.modals.CloneReadOnlyFolder.header.duplicate"})})]}),Object(E.jsxs)(y.a,{style:{position:"relative"},onSubmit:B,children:[Object(E.jsx)(N,{readOnlyFolderCloningInProgress:C}),Object(E.jsxs)("div",{style:{position:"relative"},className:"theme-options m-top-1",children:[Object(E.jsx)(P,{readOnlyFolderCloningInProgress:C,srcReadOnlyFolder:l}),Object(E.jsx)(O.a,{alertStore:R,use:"contextual"}),Object(E.jsx)(j.a,{children:Object(E.jsxs)(g.a,{childClassName:"m-bottom-3",children:[Object(E.jsx)(S.a,{allowEmpty:!1,htmlFor:"theme-name",labelClassName:"p-top-0",label:Object(c.a)("DesignFinderUI.modals.CloneReadOnlyFolder.inputs.newFolderName.label"),required:!0,children:Object(E.jsx)(x.a,{name:"theme-name",type:"text",placeholder:Object(c.a)("DesignFinderUI.modals.CloneReadOnlyFolder.inputs.newFolderName.placeholder"),maxLength:I.d,value:_.newFolderName,onChange:e=>D(t=>Object.assign({},t,{newFolderName:e.target.value}))})}),Object(E.jsx)(F.a,{folderId:_.folderId,folderPath:_.folderPath,folderSubcategory:u,handleFolderChange:H,onSelect:H,folderDisabled:z})]})}),Object(E.jsx)(f.a,{children:Object(E.jsx)(A,{newFolderName:s,srcReadOnlyFolder:l,folderPath:h,onConfirm:q,onCancel:w})})]})]})]})}},1555:function(e,t,s){"use strict";s.r(t);var a=s(40),r=s(41),n=s.n(r),o=s(59),i=s(279),l=s(99),c=s(1216),d=s(696),p=s(443),h=s(717),u=s(723),m=s(724),b=s(751),j=s(758),f=s(712),O=s(496),g=s(2766),y=s(771),x=s(1149),C=s(607),T=s(352),I=s(485),S=s(2714),F=s(610),v=s(388),E=s(221),N=s(270),P=s(1544),A=s(1545),R=s(45);const _=e=>"DesignFinderUI.modals.ChildThemeAddModal."+e,D=[N.a.COMPLETE,N.a.FAILED],L=e=>{const t=Object(S.db)(e)||N.a.UNINITIALIZED;return{childThemes:Object(S.i)(e),copyStatus:t,isFetchingChildThemes:Object(S.A)(e),parentThemeFileError:Object(S.cb)(e),portalId:Object(E.s)(e)}},k={copyParentThemeFile:v.a,fetchChildThemes:v.e,resetParentThemeFileCopyStatus:v.h};class w extends a.Component{constructor(e){super(e);this.onConfirm=()=>{const{selectedChildTheme:e}=this.state,{asset:t,copyParentThemeFile:s,portalId:a}=this.props,{onCopySuccess:r}=this;e&&s(t,e,a,r)};this.onCopySuccess=e=>{this.props.callback(e)};this.onCancel=()=>{this.props.callback(!1)};this.renderAlert=()=>{const{childThemes:e}=this.props;return!e&&Object(R.jsx)(d.a,{use:"inline",type:"warning",titleText:Object(R.jsx)(i.a,{message:_("loadingText.title")}),closeable:!1,children:Object(R.jsx)(i.a,{message:_("loadingText.noParentTheme")})})};this.renderLoadingProgress=()=>{const{copyStatus:e}=this.props;return e===N.a.IN_PROGRESS&&Object(R.jsx)(c.a,{autoStart:e===N.a.IN_PROGRESS,incrementFactor:.1,incrementInterval:500,Component:y.a})};this.renderLoadingOverlay=()=>{const{copyStatus:e,isFetchingChildThemes:t}=this.props;return t?Object(R.jsx)(f.a,{contextual:!0,label:Object(l.a)(_("loadingText.fetchChildThemes")),showLabel:!0,layout:"centered"}):e===N.a.IN_PROGRESS?Object(R.jsx)(f.a,{contextual:!0,label:Object(l.a)(_("loadingText.copyFile")),showLabel:!0,layout:"centered"}):null};this.renderCopyStatus=()=>{const{copyStatus:e,childThemes:t}=this.props;return t&&Object(R.jsx)(T.a,{className:"m-x-3",children:Object(R.jsx)(i.a,{message:_("copyStatus."+e)})})};this.renderCopyError=()=>{const{asset:e,parentThemeFileError:t}=this.props,s=t&&t.responseJSON||t,a=s&&(P.a[s.subCategory]||A.a[s.subCategory]||s.errorCategory||"DEFAULT"),r=s&&s.context,n=e.name;return s&&Object(R.jsx)(I.a,{use:"error",children:Object(R.jsx)(i.a,{message:`DesignFinderUI.modals.PortalCopyModal.errors.AssetCopyError.${a}.message`,options:Object.assign({},r,{assetName:n})})})};this.renderChildThemes=()=>{const{copyStatus:e,childThemes:t,isFetchingChildThemes:s}=this.props;return!s&&t&&Object(R.jsx)(a.Fragment,{className:"m-bottom-3",children:t&&t.map(t=>{const s=t.label||t.name;return Object(R.jsx)(x.a,{alignment:"center",className:"m-x-3",disabled:e!==N.a.UNINITIALIZED,name:s,onChange:({target:{checked:e}})=>this.setState({selectedChildTheme:e?t:null}),checked:this.state.selectedChildTheme===t,children:Object(R.jsx)(O.a,{align:"start",children:Object(R.jsx)("p",{className:"m-bottom-0",children:s})},t.id)},t.id)})})};this.renderConfirmButton=()=>{const{childThemes:e}=this.props;return e&&Object(R.jsx)(p.a,{disabled:!this.state.selectedChildTheme,onClick:this.onConfirm,use:"primary",children:Object(R.jsx)(i.a,{message:_("inputs.buttons.copy")})})};this.renderFooter=()=>{const{copyStatus:e}=this.props;return Object(R.jsx)(b.a,{children:D.includes(e)?Object(R.jsx)(p.a,{onClick:this.onCancel,use:"primary",children:Object(R.jsx)(i.a,{message:_("inputs.buttons.close")})}):Object(R.jsxs)("div",{children:[this.renderConfirmButton(),Object(R.jsx)(p.a,{onClick:this.onCancel,use:"secondary",children:Object(R.jsx)(i.a,{message:_("inputs.buttons.cancel")})})]})})};this.state={selectedChildTheme:null}}componentDidMount(){const{asset:e}=this.props;this.props.resetParentThemeFileCopyStatus();this.props.fetchChildThemes(e)}render(){return Object(R.jsxs)(g.a,{width:600,children:[Object(R.jsx)(h.a,{onClick:this.onCancel}),Object(R.jsx)(u.a,{children:Object(R.jsx)(C.a,{children:Object(R.jsx)(i.a,{message:_("header.text")})})}),Object(R.jsxs)(j.a,{style:{position:"relative"},onSubmit:e=>e.preventDefault(),children:[this.renderLoadingProgress(),Object(R.jsxs)("div",{style:{position:"relative"},className:"m-top-1",children:[this.renderLoadingOverlay(),Object(R.jsxs)(m.a,{children:[this.renderAlert(),this.renderCopyStatus(),this.renderChildThemes(),this.renderCopyError()]}),this.renderFooter()]})]})]})}}w.propTypes={asset:n.a.oneOfType([F.FilePropTypes.file,F.FolderPropTypes.folder]),callback:n.a.func.isRequired,copyParentThemeFile:n.a.func.isRequired,copyStatus:n.a.string.isRequired,fetchChildThemes:n.a.func.isRequired,isFetchingChildThemes:n.a.bool,childThemes:n.a.array,parentThemeFileError:n.a.objectOf(n.a.object),portalId:n.a.number,resetParentThemeFileCopyStatus:n.a.func};t.default=Object(o.connect)(L,k)(w)},1556:function(e,t,s){"use strict";s.r(t);var a=s(59),r=s(41),n=s.n(r),o=s(279),i=s(443),l=s(724),c=s(717),d=s(751),p=s(2766),h=s(607),u=s(723),m=s(281),b=s(2679),j=s(324),f=s(2712),O=s(693),g=s(45);const y=e=>"designManager.modals.PlanDowngradeModal."+e,x=e=>{const t=()=>{e.toggleShouldShowStarterDowngradeNotice();e.callback(!0)},s=e=>Object(g.jsxs)("div",{className:"display-flex",children:[Object(g.jsx)("span",{className:"p-right-2",children:Object(g.jsx)("div",{style:{color:j.MARIGOLD},children:Object(g.jsx)(b.a,{name:"warning",size:18})})}),e]});return Object(g.jsxs)(p.a,{size:"auto",width:610,"data-test-id":"downgrade-modal",onEsc:t,children:[Object(g.jsxs)(u.a,{children:[Object(g.jsx)(c.a,{onClick:t}),Object(g.jsx)(h.a,{className:"m-all-4",children:Object(g.jsx)(o.a,{message:y("header")})})]}),Object(g.jsxs)(l.a,{children:[Object(g.jsx)("div",{className:"m-bottom-4",children:Object(g.jsx)(m.a,{message:y("subheader")})}),s(Object(g.jsx)(m.a,{message:y("creatingTemplates")})),s(Object(g.jsx)(m.a,{message:y("creatingPages")})),s(Object(g.jsx)(m.a,{message:y("editingTemplates")})),s(Object(g.jsx)(m.a,{message:y("graphql")}))]}),Object(g.jsx)(d.a,{children:Object(g.jsx)("div",{children:Object(g.jsxs)("div",{className:"has--horizontal-spacing m-left-0",children:[Object(g.jsx)(i.a,{"data-test-id":"modal__downgrade_confirm_button",onClick:t,use:"primary",children:Object(g.jsx)(o.a,{message:y("continue")})}),Object(g.jsx)(f.a,{external:!0,href:"https://knowledge.hubspot.com/account-management/downgrade-a-paid-subscription",children:Object(g.jsx)(o.a,{message:y("learnmore")})})]})})})]})};x.propTypes={callback:n.a.func.isRequired,toggleShouldShowStarterDowngradeNotice:n.a.func.isRequired};t.default=Object(a.connect)(void 0,{toggleShouldShowStarterDowngradeNotice:O.b})(x)},2593:function(e,t,s){"use strict";s.r(t);var a=s(40),r=s(41),n=s.n(r),o=s(59),i=s(279),l=s(99),c=s(607),d=s(2743),p=s(498),h=s(497),u=s(499),m=s(2766),b=s(723),j=s(724),f=s(751),O=s(443),g=s(717),y=s(758),x=s(2741),C=s(508),T=s(1149),I=s(476),S=s(2651),F=s(223),v=s(38),E=s(219),N=s(221),P=s(2714),A=s(610),R=s(2634),_=s(2623),D=s(4),L=s(490),k=s(2655),w=s(2712),U=s(27),M=s.n(U);const q=-1,B=e=>e.includes("business-units:business-unit-users"),H=e=>e.includes("business-units-view-all"),z=e=>e.includes("business-units-write");var W=s(2),G=function(e){const{avatarType:t,displayName:s,domain:a,email:r,lookup:n,primaryIdentifier:o,secondaryIdentifier:i,src:l}=e,c=n||{};return s||c.displayName||r||c.email||a||c.domain||"number"!=typeof o&&o||"number"!=typeof c.primaryIdentifier&&c.primaryIdentifier||i||c.secondaryIdentifier||l||c.src||t&&t.toUpperCase()||void 0},Y=s(287),$=s.n(Y),K=s(1148),V=s.n(K),J=s(324);const X={facebook:{icon:"socialFacebook",color:J.FACEBOOK},google:{icon:"socialGoogle",color:J.GOOGLE},googledrive:{icon:"socialGoogleDrive",color:J.GOOGLE},googleplus:{icon:"socialGoogleplus",color:J.GOOGLE},heart:{icon:"socialHeart",color:J.CANDY_APPLE},instagram:{icon:"socialInstagram",color:J.INSTAGRAM},linkedin:{icon:"socialLinkedin",color:J.LINKEDIN},pinterest:{icon:"socialInstagram",color:J.PINTEREST},retweet:{icon:"socialRetweet",color:J.TWITTER},rss:{icon:"socialRss",color:J.RSS},slack:{icon:"socialSlack",color:J.FACEBOOK},twitter:{icon:"socialTwitter",color:J.TWITTER},x:{icon:"socialX",color:J.X},xing:{icon:"socialXing",color:J.XING},youtube:{icon:"socialBlockYoutubeplay",color:J.YOUTUBE},youtubeplay:{icon:"socialYoutubeplay",color:J.YOUTUBE}},Q={xxs:16,xs:24,sm:32,md:48,lg:72,xl:108,responsive:"responsive"},Z={company:"COMPANIES",companyId:"COMPANIES",contact:"CONTACT",domain:"COMPANIES",email:"CONTACT",emails:"CONTACT",enrichmentDomain:"COMPANIES",enrichmentEmail:"CONTACT",hubSpotUserEmail:"CONTACT",hubSpotUserEmails:"CONTACT",productId:"PRODUCT",vid:"CONTACT",ticket:"TICKET",deal:"DEAL",_isHasMore:!1},ee={COMPANIES:"companies",CONTACT:"contacts",PRODUCT:"product",TICKET:"ticket",DEAL:"deals"},te=2,se={contact:"knownContacts",company:"knownCompanies"},ae={contact:{primaryIdentifier:"vid",secondaryIdentifier:"email"},company:{primaryIdentifier:"companyId",secondaryIdentifier:"domain"}},re={contact:"vids",company:"companyIds",vids:"vids",vid:"vids",companyId:"companyIds",email:"emails",domain:"domains",enrichmentEmail:"emails",enrichmentDomain:"domains",hubSpotUserEmails:"hubSpotUserEmails",hubSpotUserEmail:"hubSpotUserEmails",product:"productIds",productId:"productIds",_isHasMore:!1},ne=["contact","vid","company","companyId","product","productId"],oe=(n.a.oneOfType([n.a.shape({type:n.a.oneOf(["contact"]).isRequired,primaryIdentifier:n.a.number.isRequired,secondaryIdentifier:n.a.string,fileManagerKey:n.a.string,displayName:n.a.string}).isRequired,n.a.shape({type:n.a.oneOf(["company"]).isRequired,primaryIdentifier:n.a.number.isRequired,secondaryIdentifier:n.a.string,fileManagerKey:n.a.string,displayName:n.a.string}).isRequired,n.a.shape({type:n.a.oneOf(["vid"]).isRequired,primaryIdentifier:n.a.number.isRequired,displayName:n.a.string}).isRequired,n.a.shape({type:n.a.oneOf(["companyId"]).isRequired,primaryIdentifier:n.a.number.isRequired,displayName:n.a.string}).isRequired,n.a.shape({type:n.a.oneOf(["email"]).isRequired,primaryIdentifier:n.a.string.isRequired,displayName:n.a.string}).isRequired,n.a.shape({type:n.a.oneOf(["domain"]).isRequired,primaryIdentifier:n.a.string.isRequired,displayName:n.a.string}).isRequired,n.a.shape({type:n.a.oneOf(["enrichmentEmail"]).isRequired,primaryIdentifier:n.a.string.isRequired,displayName:n.a.string}).isRequired,n.a.shape({type:n.a.oneOf(["enrichmentDomain"]).isRequired,primaryIdentifier:n.a.string.isRequired,displayName:n.a.string}).isRequired,n.a.shape({type:n.a.oneOf(["hubSpotUserEmail"]).isRequired,primaryIdentifier:n.a.string.isRequired,displayName:n.a.string}).isRequired]),(e,t,s)=>{let a;return function(...r){const n=this,o=r,i=function(){a=null;s||e.apply(n,o)},l=s&&!a;clearTimeout(a);a=setTimeout(i,t);l&&e.apply(n,o)}}),ie=function(e,t=2){let s;if("function"!=typeof e)throw new TypeError("Expected a function in avatars once");return function(...a){--t>0&&(s=e.apply(this,a));t<=1&&(e=void 0);return s}};var le=s(181),ce=s(55),de=s(46);function pe(e){return"function"==typeof Symbol?Symbol(e):"@@"+e}const he=pe("validator"),ue=pe("value"),me=pe("watchers");class be{constructor(e,t=ce.a.thatReturns(!0)){this[he]=t;this[ue]=e;this[me]=Object(le.Set)()}toString(){return`Atom<${this[ue]}>`}}function je(e){return e[ue]}function fe(e,t){Object(de.a)(!t||"function"==typeof t,"expected `validator` to be a function or undefined but got `%s`",t);return new be(e,t)}function Oe(e,t){return e[he](t,je(e))}function ge(e,t){Object(de.a)(Oe(e,t),"invalid atomInstance value `%s`",t);const s=e[ue];e[ue]=t;e[me].forEach(a=>a(t,s,e));return e}function ye(e,t){return ge(e,t(je(e)))}function xe(e,t){e[me]=e[me].add(t);return e}function Ce(e,t){e[me]=e[me].remove(t);return e}const Te="avatars/v1/",Ie="avatars/batch";function Se(e,t){return e.reduce((e,s)=>t[s.getIdentifierName()]&&t[s.getIdentifierName()][s.getIdentifier()]&&t[s.getIdentifierName()][s.getIdentifier()].uri?e.set(s,t[s.getIdentifierName()][s.getIdentifier()].uri):e,Object(le.Map)())}function Fe(e,t){return e.reduce((e,s)=>t[s.getIdentifierName()]&&t[s.getIdentifierName()][s.getIdentifier()]&&t[s.getIdentifierName()][s.getIdentifier()].queued?e.add(s):e,Object(le.Set)())}function ve(e,t){return{retry:Fe(e,t),updates:Se(e,t)}}function Ee(e,t){Object(de.a)(le.Set.isSet(e),"expected `lookups` to be a Set but got `%s`",e);Object(de.a)(void 0===t||"number"==typeof t,"expected `dimension` to be undefined or a number but got `%s`",e);const s=e.reduce((e,t)=>{const s=e.update(t.getIdentifierName(),e=>void 0===e?le.Set.of(t.getIdentifier()):e.add(t.getIdentifier()));return t.isKnown()?s.update(t.getKnownName(),e=>void 0===e?le.Set.of(t.getKnownObject()):e.add(t.getKnownObject())):s},Object(le.Map)());if("number"==typeof t){const e=t*te;return s.set("sizeParams",Object(le.Map)({width:e,height:e})).toJS()}return s.toJS()}function Ne(e,t,s,a){Object(de.a)("function"==typeof e,"expected `fetcher` to be a function but got `%s`",e);Object(de.a)("number"==typeof t||void 0===t,"expected `portalId` to be a number or undefined but got `%s`",t);Object(de.a)(le.Set.isSet(s),"expected `lookups` to be a Set but got `%s`",s);Object(de.a)("number"==typeof a||void 0===a,"expected `dimension` to be a number or undefined but got `%s`",a);return e(`${Te}${Ie}${void 0!==t?"?portalId="+t:""}`,Ee(s,a)).then((...e)=>ve(s,...e)).catch(e=>{let t="unknown error";e&&e.xhr?t="api status "+e.xhr.status:e&&e.message&&(t=e.message);throw new Error("Error fetching avatars: "+t)})}var Pe=s(30),Ae=s.n(Pe);function Re(e,t){return Ae.a.post(e,{data:t})}var _e=s(1),De=s.n(_e);class Le extends(Object(le.Record)({type:void 0,primaryIdentifier:void 0,secondaryIdentifier:void 0,fileManagerKey:void 0,dimensions:void 0},"LookupRecord")){isKnown(){return Object.keys(se).indexOf(this.type)>=0}getKnownName(){if(this.isKnown())return se[this.type]}getKnownObject(){if(this.isKnown())return{[ae[this.type].primaryIdentifier]:this.primaryIdentifier,[ae[this.type].secondaryIdentifier]:this.secondaryIdentifier,fileManagerKey:this.fileManagerKey}}getIdentifierName(){return re[this.type]}getIdentifier(){return this.primaryIdentifier}isSameAs(e){if(this.type===e.type)return this.primaryIdentifier===e.primaryIdentifier;const t=le.Set.of("contact","vid").has(this.type)&&le.Set.of("contact","vid").has(e.type),s=le.Set.of("company","companyId").has(this.type)&&le.Set.of("company","companyId").has(e.type);return t||s?this.primaryIdentifier===e.primaryIdentifier:"contact"===this.type&&"email"===e.type||"company"===this.type&&"domain"===e.type?this.secondaryIdentifier===e.primaryIdentifier:("email"===this.type&&"contact"===e.type||"domain"===this.type&&"company"===e.type)&&this.primaryIdentifier===e.secondaryIdentifier}requiresPortalId(){return ne.indexOf(this.type)>-1}}const ke=200,we=1e3,Ue=4e3;function Me(e,t,s,a,r,n){Object(de.a)("function"==typeof a,"expected `fetcher` to be a function but got `%s`",a);Object(de.a)("number"==typeof r||!n.requiresPortalId(),"expected `portalId` to be a number or the lookup to not require a portalId but got `%s`",r);Object(de.a)(n instanceof Le,"expected `lookup` to be a LookupRecord but got `%s`",n);const o=je(e);if(o.has(n))return o.get(n);je(t).has(n)||s(a,r,le.Set.of(n))}function qe(e=Object(le.Map)()){return fe(e,le.Map.isMap)}function Be(e=Object(le.Set)()){return fe(e,le.Set.isSet)}function He(e,t,s,a,r){Object(de.a)(le.Set.isSet(r)&&!r.isEmpty(),"expected `lookups` to be a non-empty Set but got `%s`",r);ye(e,e=>e.union(r));t(s,a)}function ze(e,t,s,a,r,n){const o=(...t)=>s(a,e,r,n,...t);return(...s)=>t(e,o,...s)}function We(e){return e.reduce((e,t)=>e.update(t.dimensions,e=>void 0===e?le.Set.of(t):e.add(t)),Object(le.Map)())}function Ge(e,t=200){Object(de.a)("number"==typeof t&&t>0,"expected `batchSize` to number greater than 0 but got `%s`",t);return e.reduce((e,s)=>e.last().size>=t?e.push(le.Set.of(s)):e.set(-1,e.last().add(s)),le.List.of(Object(le.Set)()))}function Ye(e,t,s,a,r,n){const o=je(t);if(!o.isEmpty()){ye(s,e=>e.union(o));ye(t,e=>e.clear());We(o).forEach((t,i)=>{Ge(t).forEach(t=>{Ne(r,n,t,i).then(({retry:t,updates:i})=>{ye(s,e=>e.subtract(o));ye(e,e=>e.merge(i));a&&!t.isEmpty()&&a(r,n,t)}).catch(e=>{setTimeout(()=>{throw e})})})})}}function $e(){const e=qe(),t=Be(),s=Be(),a=Be(),r=ze(Be(),He,oe(Ye,Ue),e,t),n=ze(a,He,oe(Ye,we),e,t,r),o=ze(s,He,oe(Ye,ke),e,t,n);return{avatars:e,getAvatarURI:(s,a=Re,r=De.a.get())=>Me(e,t,o,a,r,s),setAvatarURI(t,s){const a=t;Object(de.a)(a instanceof Le,"expected `lookup` to be an instance of LookupRecord but got `%s`",t);Object(de.a)(null===s||"string"==typeof s&&s.length>0,"expected `value` to be a non-empty string or `null` but got `%s`",s);ye(e,e=>e.set(t,s).map((e,a)=>t.isSameAs(a)?s:e))},watch:(...t)=>xe(e,...t),unwatch:(...t)=>Ce(e,...t)}}const Ke=ie($e),Ve={};function Je(e){return Ve[e]}function Xe(e){return Je(e)?Promise.resolve():new Promise((t,s)=>{const a=new Image,r=()=>{Ve[e]=!0;t()};a.onerror=s;a.onload=r;a.src=e})}function Qe(){return De.a.get()}var Ze=s(10);const et={"extra-small":"xs",small:"sm",medium:"md",large:"lg","extra-large":"xl"},tt=e=>{const t=et[e]||e;t!==e&&Ze.a.warn({message:`UIAvatar: \`size="${e}"\` is deprecated. Use \`size="${t}"\` instead.`,key:`UIAvatar: deprecated \`size="${e}"\` prop value`});return t};var st=s(45);const at=$()("div").withConfig({displayName:"AvatarContentHolder__ContentHolder",componentId:"sc-8t7ynw-0"})(["align-items:center;border-radius:",";box-sizing:border-box;color:",";display:flex;font-size:initial;"," height:",";overflow:hidden;position:relative;width:",";"],e=>Z[e.type]===Z.productId?"3px":"50%",J.OLAF,e=>e._isListReversed&&`border: 2px solid ${J.OLAF};`,e=>e.size&&e.size!==Q.responsive?Q[e.size]+"px":"inherit",e=>e.size&&e.size!==Q.responsive?Q[e.size]+"px":"100%"),rt=e=>{const{href:t,children:s,size:a,type:r,_isListReversed:n}=e,o=a===Q.responsive?"100%":"$[size}",i=a===Q.responsive?"":"$[size}";return t?Object(st.jsx)(O.a,{style:{width:o,height:i},use:"unstyled",href:t,children:Object(st.jsx)(at,{type:r,_isListReversed:n,size:a,children:s})}):Object(st.jsx)(at,{"data-test-id":"content-holder",type:r,_isListReversed:n,size:a,children:s})};rt.propTypes={children:n.a.node.isRequired,href:n.a.string,size:n.a.oneOf(Object.keys(Q)),type:n.a.oneOf(Object.keys(Z)),_isListReversed:n.a.bool};var nt=rt,ot=$()("div").withConfig({displayName:"AvatarWrapper",componentId:"sc-1abgny7-0"})(["box-sizing:content-box;display:inline-flex;position:relative;transition-delay:150ms;transition:margin ease 300ms;flex-shrink:0;&:not(:only-of-type),& ~ &:not(:first-of-type){margin-",":","px;}&:last-of-type{","}"],e=>e._isListReversed?"left":"right",e=>-1*e.overlapOffset,e=>e._isListReversed&&"margin-left: 0 !important;"),it=$()(ot).withConfig({displayName:"AvatarWrapperOverlay",componentId:"sc-1fuverw-0"})(["& .overlay-content{align-items:center;background:",";color:",";cursor:pointer;display:flex;font-family:sans-serif;height:0;hyphens:auto;justify-content:center;left:0;opacity:0;overflow:visible;padding:calc(50%);position:absolute;text-align:center;top:0;transition:opacity 300ms ease;width:0;}&:hover .overlay-content,&.hover-test .overlay-content{opacity:0.85;}"],J.SLINKY,J.OLAF);const lt=e=>Object(st.jsx)("text",Object.assign({x:"50",width:"100%"},e));var ct=$()(lt).withConfig({displayName:"SVGTextStyle",componentId:"kv3pm-0"})(["alignment-baseline:middle;dominant-baseline:middle;text-transform:uppercase;user-select:none;"]),dt=$()(ct).withConfig({displayName:"SVGTextIconStyle",componentId:"sc-1vu8zcx-0"})(["font-family:'spacesword' !important;font-feature-settings:'liga';font-size:110%;font-variant:normal;font-weight:normal !important;letter-spacing:0;text-transform:none;"]),pt=s(330);const ht=["_isHasMore","_isListReversed","src","0","1"],ut=e=>{const t=Object(W.a)(e,ht);return Object(st.jsx)("svg",Object.assign({viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg"},t))};ut.propTypes={size:n.a.oneOf(Object.keys(Q)),_isHasMore:n.a.bool,_isListReversed:n.a.bool,0:n.a.any,1:n.a.any,src:n.a.string};var mt=ut,bt=$()(mt).withConfig({displayName:"SVGWrapper",componentId:"gog6j9-0"})(["background-size:cover;background-position:center;display:block;fill:",";font-family:",";font-size:","%;text-anchor:middle;width:100%;height:",";",";",";"],e=>e._isHasMore?J.OBSIDIAN:"currentColor",pt.n,e=>e._isHasMore?"340":"290",e=>e.size&&e.size!==Q.responsive?Q[e.size]+"px":"inherit",e=>e.src?`background-image: url('${e.src}');`:`background-color: ${e._isHasMore?J.OLAF:J.EERIE};`,e=>/hubfs\/defaults\/company\.png/.test(e.src)&&e._isReversed&&"background-position: -2px;");const jt=["wrapperProps","icon"],ft=e=>{const{wrapperProps:t,icon:s}=e,a=Object(W.a)(e,jt);return Object(st.jsx)(bt,Object.assign({},t,{children:Object(st.jsx)(dt,Object.assign({},a,{children:s}))}))};ft.propTyes={wrapperProps:n.a.node,icon:n.a.string};var Ot=ft;const gt=$()("div").withConfig({displayName:"SocialBadge__SocialBadgeWrapper",componentId:"zbe3x9-0"})(["align-items:center;border-radius:50%;bottom:-1%;color:",";display:flex;font-family:sans-serif;font-size:600%;justify-content:center;position:absolute;right:-16%;user-select:none;width:64%;"],J.OLAF),yt=e=>{const{socialNetwork:t}=e;return Object(st.jsx)(gt,{children:Object(st.jsx)(nt,{children:Object(st.jsx)(Ot,{wrapperProps:{style:{backgroundColor:X[t].color}},y:"70",icon:X[t].icon})})})};yt.propTypes={socialNetwork:n.a.oneOf(Object.keys(X))};var xt=yt,Ct=s(351);const Tt=10,It=Q.xl,St=Tt/It,Ft=.37,vt=({wrapperProps:e,size:t})=>{const s=t?t*St:Tt,a=t*Ft,r=t?{fontSize:a+"px",fontWeight:""+(a>Ct.c.medium?"bold":"normal")}:{};Object.assign({},r).fontSize=t*(Ft/1.25)+"px";return Object(st.jsx)(bt,Object.assign({className:"overlay-content"},e,{children:Object(st.jsx)(dt,{x:0,y:s,style:r,children:"edit"})}))};vt.propTypes={size:n.a.number.isRequired,wrapperProps:n.a.object.isRequired};var Et=vt;const Nt=e=>Object(st.jsx)(bt,Object.assign({},e));Nt.propTypes={image:n.a.string};var Pt=Nt;const At=["wrapperProps"],Rt=e=>{const{wrapperProps:t}=e,s=Object(W.a)(e,At);return Object(st.jsx)(bt,Object.assign({},t,{children:Object(st.jsx)(ct,Object.assign({},s))}))};Rt.propTypes={wrapperProps:n.a.any};var _t=Rt,Dt=s(2654),Lt=s(357),kt=s(1546),wt=s.n(kt),Ut=s(1547),Mt=s.n(Ut);const qt=["_isHasTooltip","_isHoverlayOpen","_isListReversed","_isTooltipLoaded","className","outerChildren","isHoverlay","size","style","toolTipName","toolTipPlacement"];function Bt(e){const t=window.requestIdleCallback||window.setTimeout,s=t(e,t===window.requestIdleCallback?{timeout:5e3}:1e3);return window.requestIdleCallback?()=>window.cancelIdleCallback(s):()=>window.clearTimeout(s)}class Ht extends a.Component{constructor(e){super(e);this.state={isDropdownMenuOpen:!1,isTooltipLoaded:!1}}componentDidMount(){this.cancelTimeout=Bt(()=>this.setState({isTooltipLoaded:!0}))}componentWillUnmount(){this.cancelTimeout()}handleMouseEnter(){this.setState(()=>({isDropdownMenuOpen:!0}))}getDefaultAvatar(e){return{[Z.contact]:wt.a,[Z.company]:Mt.a}[e]}MaybeAvatarHover(e){let{_isHasTooltip:t,_isHoverlayOpen:s,_isListReversed:a,_isTooltipLoaded:r=!1,className:n,outerChildren:o,isHoverlay:i,size:l,style:c,toolTipName:d,toolTipPlacement:p}=e,h=Object(W.a)(e,qt);n=n||"";n=s?n+" hover-test":n;const u=l&&l!==Q.responsive?{width:l+"px"}:{width:"100%"},m={overlapOffset:.15*(l||40)};c=Object.assign({},c,u);const b=Object.assign({_isListReversed:a,className:n,style:c},m,h);return i||s||!t?Object(st.jsx)(it,Object.assign({},b)):o&&!r?Object(st.jsx)(ot,Object.assign({},b)):Object(st.jsx)(Dt.a,{title:d,placement:p,children:Object(st.jsx)(ot,Object.assign({},b))})}tryToGetANameOutOfEmailAddress(e){return e&&e.indexOf("@")?e.split("_").join(" "):e}isLatinCharacters(e){return/[^\u0020-\u01BF]/.test(e)}displayNameToInitials(e,t){const{displayName:s,_isHasMore:a,_isListReversed:r,size:n,type:o}=this.props;if(t||!e||"string"!=typeof e)return Object(st.jsx)(Pt,{size:n,_isListReversed:r,src:this.getDefaultAvatar(Z[o])});if(!e||this.isLatinCharacters(e)&&!t)return this.displayNameToInitials(this.tryToGetANameOutOfEmailAddress(s),!0);const i=e.split(" ");let l=i[0].substring(0,1);i.length>1&&(l+=i[i.length-1].substring(0,1));return Object(st.jsx)(_t,{wrapperProps:{_isHasMore:a},y:"55",children:l})}renderOverlay(){const{isHoverlay:e,_isHoverlayOpen:t,size:s}=this.props;return(!!e||!!t)&&Object(st.jsx)(Et,{wrapperProps:{onMouseEnter:()=>this.handleMouseEnter(),onClick:()=>{},size:s},size:Q[s]})}renderAvatarImageOrText(){const{src:e,displayName:t,type:s,_isHasMore:a,size:r}=this.props;return e?Object(st.jsx)(Pt,{size:r,src:e}):Z[s]===Z.company?Object(st.jsx)(Pt,{size:r,src:this.getDefaultAvatar(Z.company)}):a||Z[s]===Z.contact||Z[s]===Z.company?this.displayNameToInitials(t):Object(st.jsx)(Ot,{wrapperProps:{size:r},y:65,icon:ee[Z[s]]})}renderSocialBadge(e){if(e)return Object(st.jsx)(xt,{socialNetwork:e})}renderContentAndOverlay(){const{href:e,_isListReversed:t,size:s,type:a}=this.props;return Object(st.jsxs)(nt,{_isListReversed:t,size:s,href:e,type:a,children:[this.renderAvatarImageOrText(),this.renderOverlay()]})}renderAvatarContent(e,t,s){return Object(st.jsxs)(e,Object.assign({"data-test-id":"uiAvatarDisplay-switchComponent"},t,{children:[this.renderContentAndOverlay(),this.renderSocialBadge(s)]}))}render(){const{MaybeAvatarHover:e,props:t}=this,{_isHasTooltip:s,_isHasMore:a,_isHoverlayOpen:r,_isListReversed:n,_toolTipOverWrite:o,className:i,children:l,displayName:c,isHoverlay:d,onClick:p,size:h,socialNetwork:u,style:m,textSpacing:b,truncateLength:j,toolTipPlacement:f}=t,O={_isHasTooltip:s,_isHasMore:a,_isHoverlayOpen:r,_isListReversed:n,_isTooltipLoaded:this.state.isTooltipLoaded,className:i,outerChildren:l,displayName:c,isHoverlay:d,onClick:p,size:Q[h],style:m,toolTipName:o||c,toolTipPlacement:f},g=this.renderAvatarContent(e,O,u);return l?Object(st.jsx)(Lt.a,{onClick:p,maxWidth:j,children:Object(st.jsxs)("span",{className:"align-center",children:[g,Object(st.jsx)("span",{className:"m-left-"+b,children:l})]})}):g}}Ht.propTypes={_isHasMore:n.a.bool,_isHasTooltip:n.a.bool,_isHoverlayOpen:n.a.bool,_isListReversed:n.a.bool,_toolTipOverWrite:n.a.string,className:n.a.string,displayName:n.a.any,href:n.a.string,isHoverlay:n.a.bool,onClick:n.a.func,size:n.a.oneOf(Object.keys(Q)),socialNetwork:n.a.oneOf(Object.keys(X)),src:Pt.propTypes.image,type:n.a.oneOf(Object.keys(Z)),textSpacing:n.a.number,truncateLength:n.a.number,toolTipPlacement:n.a.string};Ht.defaultProps={_isHasMore:!1,_isHasTooltip:!0,_isListReversed:!1,_isHoverLayOpen:!1,size:"sm",textSpacing:3,truncateLength:200};var zt=Ht;const Wt=[/hubfs\/defaults\/contact\.png/,/hubfs\/defaults\/company\.png/,/avatar\/hash\/4bd0df0db6227e87de4031baa4422b73/,/avatar\/hash\/cc7a027acb4f854bd9b1d3a511d1740c/,/avatar\/hash\/5be48140e95ae69927946a77d6c29d1a/,/avatars\.s3\.amazonaws\/default-100/,/hubspot-avatars\.s3\.amazonaws\.com\/default-100/],Gt=Ke(),Yt=new Le;class $t extends a.Component{constructor(...e){super(...e);this.state={lookupRecord:Yt,avatarURI:void 0,error:void 0,loaded:!1};this.handleResolverUpdate=()=>{this.updateAvatarUrl(this.props)};this.startWatching=()=>{Gt.watch(this.handleResolverUpdate)};this.stopWatching=()=>{Gt.unwatch(this.handleResolverUpdate)};this.updateAvatarUrl=e=>{const t=tt(e.size),s=Object.assign({},this.makeLookupValues());if(!s.primaryIdentifier||s.primaryIdentifier.length<1||"deal"===s.type.toLowerCase()||"ticket"===s.type.toLowerCase()){this.setState({loaded:!0,avatarURI:void 0});return}const a=new Le(Object.assign({},s,{existsInPortal:e.existsInPortal,portalId:e.portalId,dimensions:Q[t]!==Q.responsive?Q[t]:Q.xl})),r=this.state.lookupRecord.equals(a)?this.state.lookupRecord:a,n=Gt.getAvatarURI(r,e.fetchAvatars,e.portalId),o=Je(n),i="string"!=typeof n||o;if(this.state.avatarURI===n)return null;this.setState({avatarURI:n,lookupRecord:r,error:void 0,loaded:i});if(i)return null;Xe(n).then(()=>{this._isMounted&&this.state.avatarURI===n&&this.setState({loaded:!0})}).catch(e=>{this._isMounted&&this.state.avatarURI===n&&this.setState({error:e})});return null};this.getSrc=()=>{const{avatarURI:e,error:t,loaded:s}=this.state,{src:a}=this.props;if(a)return a;if(e){if(e&&s&&!t&&Wt.filter(t=>t.test(e)).length>0)return;if(e&&s&&!t)return e}};this.makeLookupValues=()=>{const{_isHasMore:e,companyId:t,domain:s,email:a,fileManagerKey:r,hubSpotUserEmail:n,productId:o,type:i,vid:l,primaryIdentifier:c,secondaryIdentifier:d}=this.props,p=[{companyId:t},{domain:s},{email:a},{hubSpotUserEmail:n},{productId:o},{vid:l}].filter(e=>e[Object.keys(e)[0]])[0];return e?{type:"_isHasMore"}:c&&d&&i?{type:i,primaryIdentifier:c,secondaryIdentifier:d}:i&&c?{type:i,primaryIdentifier:c}:l&&a&&r?{type:"contact",primaryIdentifier:l,secondaryIdentifier:a,fileManagerKey:r}:l&&a?{type:"vid",primaryIdentifier:l,secondaryIdentifier:a}:t&&s&&r?{type:"company",primaryIdentifier:t,secondaryIdentifier:s,fileManagerKey:r}:"enrichmentDomain"===i?(c||s)&&{type:i,primaryIdentifier:c||s}:Object.keys(Z).filter(e=>e===i).length>0&&p?{type:i,primaryIdentifier:Object.keys(p).map(e=>p[e])[0]}:p?{type:Object.keys(p)[0],primaryIdentifier:Object.keys(p).map(e=>p[e])[0]}:{}}}componentDidMount(){this._isMounted=!0;this.startWatching();this.updateAvatarUrl(this.props)}shouldComponentUpdate(e,t){return V()(this,e,t)}componentDidUpdate(){this.updateAvatarUrl(this.props)}componentWillUnmount(){this._isMounted=!1;this.stopWatching()}render(){const{_isHasMore:e,_isHasTooltip:t,_isHoverlayOpen:s,_isListReversed:a,_toolTipOverWrite:r,_noDefaultSrc:n,children:o,className:i,displayName:l,href:c,isHoverlay:d,onClick:p,size:h,socialNetwork:u,style:m,textSpacing:b,truncateLength:j,type:f,toolTipPlacement:O}=this.props,g=this.getSrc();return n&&!g?o?Object(st.jsx)("div",{onClick:p,children:o}):Object(st.jsx)("noscript",{}):Object(st.jsx)(zt,{_isHasMore:e,_isHasTooltip:t,_isHoverlayOpen:s,_isListReversed:a,_toolTipOverWrite:r,children:o,className:i,displayName:l,href:c,isHoverlay:d,onClick:p,size:h,socialNetwork:u,src:g,style:m,textSpacing:b,truncateLength:j,type:f||this.makeLookupValues().type,toolTipPlacement:O})}}$t.defaultProps={size:"sm",portalId:Qe(),fetchAvatars:Re,isAuthed:!0};const Kt=["companyId","displayName","domain","email","existsInPortal","fetchAvatars","fileManagerKey","hubSpotUserEmail","lookup","primaryIdentifier","secondaryIdentifier","socialNetwork","src","type","vid"],Vt=$()("div").withConfig({displayName:"UIAvatarMultiOrSingle__AvatarListWrapper",componentId:"ks0k52-0"})(["display:flex;flex-direction:row-reverse;justify-content:flex-end;"]);class Jt extends a.Component{makeNumberAvatar(){const{_truncateAvatarListInTooltip:e,hasMoreHref:t,lookup:s,maxAvatars:a}=this.props,r=a-1,n=s.length-r,o=n>9?9:n,i=s.slice(r,r+9),l=n?"+":"";let c=this.avatarsToDisplayList(i);e&&i.length<n&&(c=D.a.text("uiAddonAvatars.tooltip.hasMore",{list:c}));return{displayName:`${o} ${l}`,_isHasMore:!0,href:t,_toolTipOverWrite:c}}avatarsToDisplayList(e){return e.map(G).join(", ")}renderAvatarList(){const{_hasMoreOverWrite:e,childClassName:t,childStyles:s,className:a,lookup:r,maxAvatars:n,portalId:o,fetchAvatars:i,size:l,toolTipPlacement:c}=this.props,d=!!e||r.length>n,p=d?r.slice(0,n-1):r.slice(0);d&&p.push(this.makeNumberAvatar());return Object(st.jsx)(Vt,{className:a,children:p.reverse().map((e,a)=>{const r=Object.assign({className:t,_isListReversed:!0,portalId:o,fetchAvatars:i,size:l,style:s,toolTipPlacement:c},e);return this.renderSingleAvatar(r,a)})})}renderSingleAvatar(e,t){const{companyId:s,displayName:a,domain:r,email:n,existsInPortal:o,fetchAvatars:i,fileManagerKey:l,hubSpotUserEmail:c,lookup:d,primaryIdentifier:p,secondaryIdentifier:h,socialNetwork:u,src:m,type:b,vid:j}=e,f=Object(W.a)(e,Kt),O=d||{};return Object(st.jsx)($t,Object.assign({},Object.assign({companyId:s||O.companyId,displayName:a||O.displayName||n||O.email||r||O.domain||h||O.secondaryIdentifier||p||O.primaryIdentifier,domain:r||O.domain,email:n||O.email,existsInPortal:o||O.existsInPortal,fetchAvatars:i,fileManagerKey:l||O.fileManagerKey,hubSpotUserEmail:c||O.hubSpotUserEmail,key:t,primaryIdentifier:p||O.primaryIdentifier,socialNetwork:O.socialNetwork||u,secondaryIdentifier:h||O.secondaryIdentifier,src:m||O.src,type:b||O.type,vid:j||O.vid},f)))}render(){const{lookup:e}=this.props;return e&&Array.isArray(e)?this.renderAvatarList():this.renderSingleAvatar(this.props)}}const Xt=(e,t,s,...a)=>{n.a.string(e,t,s,...a);return e[t]&&!Array.isArray(e.lookup)?new Error(`${s}: ${t} is only applied when lookup is an array.`):null},Qt=(e,t,s,...a)=>{n.a.string(e,t,s,...a);return e[t]&&!Array.isArray(e.lookup)&&e.lookup.length>1?new Error(`${s}: ${t} is only applied when lookup is an array that can make children.`):null},Zt=(e,t,s)=>e[t]<2?new Error(`${t} needs to be at least 2 in ${s}.`):null,es=(e,t,s)=>e[t]&&!e.maxAvatars?new Error(`${t} will only work if maxAvatars is set in ${s}`):null;Jt.propTypes=Object.assign({},$t.propTypes,{_truncateAvatarListInTooltip:n.a.bool,childClassName:Xt,childStyles:Qt,className:n.a.string,fetchAvatars:n.a.func,hasMoreHref:es,lookup:n.a.oneOfType([n.a.object,n.a.array]),maxAvatars:Zt,portalId:n.a.number,size:n.a.oneOf(Object.keys(Q))});var ts=Jt;const ss={"extra-small":"xs",small:"sm",medium:"md",large:"lg","extra-large":"xl"};class as extends a.Component{companyWithWarning(e){e&&Ze.a.warn({message:"there is no company prop, maybe you mean domain or companyId"})}sizeWithWarning(e){const t=ss[e];if(t){Ze.a.warn({message:"Old size prop values are supplied, please use 2 letter sizes instead"});return t}return e}lookupWithWarning(e,t,s){const a=t||s;if(a){Ze.a.warn({message:"lookups and avatarLook up deprecated props, please just use lookup"});return e||a}return e}hubSpotUserEmailWithWarning(e,t){t&&Ze.a.warn({message:"I think you meant hubSpotUserEmail (S vs s)"});return e||t}maxAvatarsWithWarning(e,t){if(t){Ze.a.warn({message:"totalNumOfAvatars is deprecated, please use maxAvatars instead"});return e||t}return e}catchWeirdProps(){const{_isHoverlayOpen:e,_isHasTooltip:t,_toolTipOverWrite:s,_noDefaultSrc:a,_truncateAvatarListInTooltip:r,avatarLookup:n,avatarType:o,childClassName:i,children:l,childStyles:c,className:d,companyId:p,displayName:h,company:u,domain:m,email:b,existsInPortal:j,fetchAvatars:f,fileManagerKey:O,hasMoreHref:g,href:y,hubspotUserEmail:x,hubSpotUserEmail:C,isHoverlay:T,lookup:I,lookups:S,maxAvatars:F,onClick:v,productId:E,portalId:N,size:P,socialNetwork:A,src:R,style:_,toolTipPlacement:D,totalNumOfAvatars:L,type:k,textSpacing:w,truncateLength:U,vid:M}=this.props;return{_isHoverlayOpen:e,_isHasTooltip:t,_toolTipOverWrite:s,_noDefaultSrc:a,_truncateAvatarListInTooltip:r,childClassName:i,children:l,childStyles:c,className:d,company:this.companyWithWarning(u),companyId:p,displayName:h,domain:m,email:b,existsInPortal:j,fetchAvatars:f,fileManagerKey:O,hasMoreHref:g,href:y,hubSpotUserEmail:this.hubSpotUserEmailWithWarning(C,x),isHoverlay:T,lookup:this.lookupWithWarning(I,S,n),maxAvatars:F||L,onClick:v,productId:E,portalId:N,size:this.sizeWithWarning(P),socialNetwork:A,src:R,style:_,type:k||o,textSpacing:w,truncateLength:U,vid:M,toolTipPlacement:D}}render(){return Object(st.jsx)(ts,Object.assign({},this.catchWeirdProps(this.props)))}}as.propTypes={lookups:n.a.any,avatarLookup:n.a.any,totalNumOfAvatars:n.a.number,avatarType:n.a.string,_truncateAvatarListInTooltip:n.a.bool,_isHoverlayOpen:n.a.bool,_isHasTooltip:n.a.bool,_toolTipOverWrite:n.a.bool,_noDefaultSrc:n.a.bool,authed:n.a.bool,childClassName:n.a.string,children:n.a.node,childStyles:n.a.object,className:n.a.string,company:n.a.string,companyId:n.a.number,displayName:n.a.string,domain:n.a.string,email:n.a.string,existsInPortal:n.a.bool,fetchAvatars:n.a.func,fileManagerKey:n.a.string,hasMoreHref:n.a.string,href:n.a.string,hubspotUserEmail:n.a.string,hubSpotUserEmail:n.a.string,isHoverlay:n.a.bool,lookup:n.a.oneOfType([n.a.object,n.a.array]),maxAvatars:n.a.number,onClick:n.a.func,productId:n.a.number,portalId:n.a.number,size:n.a.oneOf(Object.keys(Q)),socialNetwork:n.a.string,src:n.a.string,style:n.a.object,toolTipPlacement:n.a.string,type:n.a.string,textSpacing:n.a.number,truncateLength:n.a.number,vid:n.a.number};as.displayName="UIAvatar";var rs=as;var ns=s(689);const os=({id:e,name:t,logoUrl:s,logoAltText:a,resizedUrl:r},n)=>{const o=Object(ns.a)(t,e);let i={};n&&(i=r||s?{imageUrl:r||s,logoAltText:a}:{avatar:Object(st.jsx)(rs,{displayName:o,type:"contact",size:"xl"})});return Object.assign({text:o,value:e},i)},is=({formattedOptions:e})=>e&&e.length<=1,ls=({buId:e,buIds:t,multi:s,includeViewAll:a,canViewAll:r,formattedOptions:n,isBusinessUnitOneOption:o,isLoading:i,hasFailed:l})=>{if(i||l||0===n.length)return;if(s)return t;if(a&&void 0===e&&r)return q;if(o){const e=n.find(e=>e.value!==q);return e&&e.value}return n.find(t=>t.value===e)?e:void 0},cs=(e,t,s)=>{let a=e;t||(a=e.filter(e=>0!==e.id));return a.map(e=>os(e,s))},ds=({hasFailed:e,isLoading:t,multi:s,options:a})=>e?Object(st.jsx)(i.a,{message:"ui-business-units-lib.options.error.title"}):t?Object(st.jsx)(i.a,{message:"ui-business-units-lib.options.loading"}):0===a.length?Object(st.jsx)(i.a,{message:"ui-business-units-lib.placeholders.selectBusinessUnits.none"}):Object(st.jsx)(i.a,{message:"ui-business-units-lib.placeholders.selectBusinessUnits",options:{count:s?2:1}}),ps={multi:!1,withHeader:!1,includeViewAll:!1,includeAccountBusinessUnit:!0,readOnly:!1,isLoading:!1,hasFailed:!1,disabled:!1,showFooter:!0,showOptionImage:!0},hs=({onChange:e,buOptions:t=[],buId:s,buIds:r,buttonUse:n,multi:o,withHeader:l,includeViewAll:c,className:d,includeAccountBusinessUnit:p,menuWidth:h,readOnly:u,isLoading:m,hasFailed:b,disabled:j,placement:f,ButtonContent:O,showFooter:g,showOptionImage:y})=>{const[C,T]=Object(a.useState)([]),[I,S]=Object(a.useState)([]),[F,v]=Object(a.useState)(0),E=B(I),N=H(C),P=z(C),A=!E||E&&N;Object(a.useEffect)(()=>{M()().then(e=>{T(e.user.scopes);S(e.gates);v(e.portal.portal_id)}).catch(e=>console.error(e))},[]);const R=cs(t,p,y);c&&A&&R.unshift({value:q,text:D.a.text("ui-business-units-lib.labels.allBusinessUnits")});const _=({currentTarget:{value:t}})=>{e(c&&t===q?void 0:t)},U=is({formattedOptions:R}),W=ls({multi:o,buId:s,buIds:r,includeViewAll:c,canViewAll:A,formattedOptions:R,isBusinessUnitOneOption:U,isLoading:m,hasFailed:b});return Object(st.jsxs)(st.Fragment,{children:[l&&Object(st.jsx)(L.a,{children:Object(st.jsx)(i.a,{message:"ui-business-units-lib.labels.businessUnit"})}),Object(st.jsx)(x.a,{error:b,validationMessage:b&&Object(st.jsx)(i.a,{message:"ui-business-units-lib.options.error.message"}),children:Object(st.jsx)(k.a,{"data-test-id":"business-unit-select",options:R,onChange:_,value:W,buttonUse:n,multi:o,placeholder:Object(st.jsx)(ds,{hasFailed:b,isLoading:m,multi:o,options:R}),menuWidth:h,className:d,readOnly:U||u,isLoading:m,error:b,disabled:j,placement:f,ButtonContent:O,anchorType:o?"button":void 0,dropdownFooter:g&&P&&Object(st.jsx)(w.a,{external:!0,href:`/settings/${F}/business-units`,children:Object(st.jsx)(i.a,{message:"ui-business-units-lib.footer.manageBUs"})})})})]})};hs.defaultProps=ps;hs.propTypes={buOptions:n.a.array,buId:n.a.number,buIds:n.a.array,onChange:n.a.func.isRequired,buttonUse:n.a.oneOf(["transparent","form-on-dark"]),multi:n.a.bool,withHeader:n.a.bool,includeViewAll:n.a.bool,className:n.a.string,includeAccountBusinessUnit:n.a.bool,menuWidth:n.a.oneOfType([n.a.number,n.a.oneOf(["auto"])]),readOnly:n.a.bool,isLoading:n.a.bool,hasFailed:n.a.bool,disabled:n.a.bool,placement:n.a.oneOf(["left","right","top","bottom","left top","left bottom","right top","right bottom","top left","top right","bottom left","bottom right"]),ButtonContent:n.a.elementType,showFooter:n.a.bool};var us=hs,ms=s(228),bs=s(194);const js=Object(_.a)(us),fs=E.b,Os=e=>"DesignFinderUI.modals.CreateContentModal.footer."+e,gs=e=>"DesignFinderUI.modals.CreateContentModal.header."+e,ys=e=>`DesignFinderUI.modals.CreateContentModal.categories.${e}.text`,xs=(e,t)=>`DesignFinderUI.modals.CreateContentModal.body.${e}.create.${t}`,Cs=e=>"DesignFinderUI.modals.CreateContentModal.body.page.create.type.types."+e;function Ts(){return function(e,t){const s=N.A(e),a=N.c(e),r=Object(P.E)(e),n=a&&t.fileType===bs.TEMPLATE&&r(t.fileId);return{canAccessBusinessUnit:Object(ms.f)(e)&&s(v.b),permissions:{[fs.landing_page.name]:!n&&s(v.t),[fs.site_page.name]:s(v.z)&&s(v.I)}}}}const Is={trackCreatePage:S.v};class Ss extends a.PureComponent{constructor(e){super(e);this.getCreationUrl=()=>{const{category:e,fileTemplatePath:t}=this.props,{subcategory:s,contentName:a,businessUnitId:r}=this.state;return Object(R.a)(e,s,a,t,r)};this.trackCreateAsset=()=>{this.props.category===F.c&&this.props.trackCreatePage(this.props.fileId,this.props.fileType);this.handleReject()};this.getPlaceholderKey=()=>{const{category:e}=this.props,{subcategory:t}=this.state;return e!==F.c?"name.placeholder":"name.placeholder."+t};this.getIsBusinessUnitSelectionEnabled=()=>"email"===this.categoryKey&&this.props.canAccessBusinessUnit;this.validateForm=()=>{const{contentName:e,businessUnitId:t}=this.state;return!(!e.trim()||this.getIsBusinessUnitSelectionEnabled(this.categoryKey)&&null===t)};this.handleContentNameChange=e=>{this.setState({contentName:e.currentTarget.value})};this.handleBusinessUnitChange=e=>{this.setState({businessUnitId:e})};this.handleSubcategoryChange=e=>{this.setState({subcategory:e})};this.handleReject=()=>{this.props.onReject()};this.state={contentName:"",businessUnitId:null,subcategory:e.category===F.c?fs.landing_page.name:null}}get categoryKey(){return this.props.category===F.c?"page":"email"}renderBusinessUnitSelector(){return this.getIsBusinessUnitSelectionEnabled()?Object(st.jsx)(x.a,{label:Object(l.a)(xs(this.categoryKey,"businessUnit.header")),children:Object(st.jsx)(js,{onChange:this.handleBusinessUnitChange})}):null}renderActionButton(){const e=this.validateForm();return Object(st.jsx)(O.a,{disabled:!e,href:this.getCreationUrl(),external:!0,onClick:this.trackCreateAsset,use:"primary",children:Object(st.jsx)(i.a,{message:Os("confirm."+this.categoryKey)})})}renderFooter(){const e=Object(st.jsx)(O.a,{onClick:this.handleReject,use:"secondary",children:Object(st.jsx)(i.a,{message:Os("cancel.text")})}),t=this.renderActionButton();return Object(st.jsx)(f.a,{children:Object(st.jsxs)(d.a,{children:[Object(st.jsx)(p.a,{children:t}),Object(st.jsx)(h.a,{}),Object(st.jsx)(u.a,{children:e})]})})}renderHeader(){return Object(st.jsx)(c.a,{children:Object(st.jsx)(i.a,{message:gs("createStep"),options:{category:Object(l.a)(ys(this.categoryKey))}})})}renderNameForm(){const{categoryKey:e}=this;return Object(st.jsx)(x.a,{label:Object(l.a)(xs(e,"name.header")),children:Object(st.jsx)(C.a,{onChange:this.handleContentNameChange,autoFocus:!0,name:"fileName",placeholder:Object(l.a)(xs(e,this.getPlaceholderKey()))})})}renderTypePicker(){const{category:e,permissions:t}=this.props,{subcategory:s}=this.state;if(e!==F.c)return null;t[fs.landing_page.name]||this.handleSubcategoryChange(fs.site_page.name);return Object(st.jsx)(x.a,{label:Object(l.a)(xs("page","type.header")),children:Object(st.jsx)("div",{children:Object.keys(t).map(e=>{const a=t[e];return Object(st.jsx)(T.a,{checked:s===e,disabled:!a,name:e,onChange:()=>this.handleSubcategoryChange(e),children:Object(st.jsx)(i.a,{message:Cs(e)})},e)})})})}renderCreateForm(){const e=this.renderNameForm(),t=this.renderTypePicker(),s=this.renderBusinessUnitSelector();return Object(st.jsx)(j.a,{children:Object(st.jsx)(y.a,{children:Object(st.jsxs)(I.a,{children:[t,s,e]})})})}render(){const e=this.renderFooter(),t=this.renderHeader(),s=this.renderCreateForm();return Object(st.jsxs)(m.a,{children:[Object(st.jsxs)(b.a,{children:[Object(st.jsx)(g.a,{onClick:this.handleReject}),t]}),s,e]})}}Ss.propTypes={category:n.a.oneOf([F.b,F.c]).isRequired,fileId:A.FilePropTypes.fileId.isRequired,fileType:A.FilePropTypes.fileType.isRequired,onReject:n.a.func.isRequired,permissions:n.a.shape({[fs.landing_page.name]:n.a.bool.isRequired,[fs.site_page.name]:n.a.bool.isRequired}),fileTemplatePath:n.a.string.isRequired,trackCreatePage:n.a.func.isRequired,canAccessBusinessUnit:n.a.bool.isRequired};t.default=Object(o.connect)(Ts,Is)(Ss)},2631:function(e,t,s){"use strict";s.r(t);var a=s(40),r=s(41),n=s.n(r),o=s(59),i=s(4),l=s(279),c=s(99),d=s(2766),p=s(2692),h=s(717),u=s(751),m=s(443),b=s(357),j=s(221),f=s(2714),O=s(2651),g=s(219),y=s(610),x=s(230),C=s(228),T=s(63),I=s(2683),S=s(1509);const F=({folderPath:e,folderId:t,fileName:s})=>a=>a(Object(S.a)(`${e}/${s}`,"\n")).then(e=>{a(Object(I.j)(t));a({rawAsset:e.rawAsset,type:T.FINDER_CREATE_RAW_ASSET})}).catch(e=>{throw e});var v=s(194),E=s(197),N=s(2),P=s(696),A=s(485),R=s(2743),_=s(2712),D=s(2679),L=s(2654),k=s(1523),w=s(2655),U=s(498),M=s(497),q=s(613),B=s(324),H=s(198),z=s(45);const W=["option"],G=e=>"DesignFinderUI.modals.NewFileWizard.selectTypeStep."+e,Y=e=>G("fileType."+e),$=e=>G("description."+e),K=e=>{const t=[H.TEMPLATE,H.LAYOUT],s=[H.CUSTOM_WIDGET],r=[H.CSS,H.JS,E.MD,E.GRAPHQL],n=t=>(t!==H.LAYOUT||e.hasDnDTemplateAccess&&!e.folderInTheme)&&(!e.folderInFunction||Object.keys(E).includes(t)),o=t.filter(n),i=e.initialFileType||o[0];Object(a.useEffect)(()=>e.changeFileType(i),[i]);const d=t=>{const s=t.currentTarget.value;e.changeFileType(s)},p=t=>$(t===H.JS?e.folderInFunction?"SERVER_JS":"CLIENT_JS":t),h=t=>!(t===E.GRAPHQL&&!e.hasDataCollectorQueryAccess)?{text:Object(c.a)(Y(t)),value:t,disabled:!1,icon:q.m[t],help:Object(z.jsx)(l.a,{message:p(t)})}:{text:Object(c.a)(Y(t)),value:t,disabled:!0,title:Object(c.a)(G("fileTypeDisabled.GRAPHQL")),icon:q.m[t],help:Object(z.jsx)(l.a,{message:p(t)})},u=e=>{let{option:t}=e,s=Object(N.a)(e,W);const a=t.disabled?B.BUTTON_DISABLED_TEXT:B.OBSIDIAN,r=t.disabled?B.BUTTON_DISABLED_TEXT:B.EERIE,n=Object(z.jsx)("span",Object.assign({},s,{children:Object(z.jsxs)(R.a,{align:"center",spacing:"small",className:"p-x-5 p-y-2",children:[t.icon&&Object(z.jsx)(U.a,{children:Object(z.jsx)(D.a,{color:a,className:"p-top-3",name:t.icon,screenReaderText:t.text,size:30})}),Object(z.jsxs)(M.a,{className:"p-right-5",children:[Object(z.jsx)("div",{"data-test-id":t.value,style:{color:a},children:t.text}),t.help&&Object(z.jsx)(A.a,{style:{color:r},children:t.help})]})]})}));return t.disabled?Object(z.jsx)(L.a,{placement:"left",title:t.title,children:n}):n},m=()=>Object(z.jsx)(w.a,{optionComponent:u,menuStyle:{minHeight:e.folderInFunction?0:300},onChange:d,minimumSearchCount:0,"data-test-id":"new-file-wizard__setup-step__filetype-dropdown",options:[{text:Object(c.a)(G("sectionLabels.templates")),options:o.map(h)},{text:Object(c.a)(G("sectionLabels.components")),options:s.filter(n).map(h)},{text:Object(c.a)(G("sectionLabels.files")),options:r.filter(n).map(h)}],placeholder:Object(c.a)(G("search.text")),defaultValue:i});return Object(z.jsxs)(k.a,{isFirstStep:!0,children:[Object(z.jsx)("div",{className:"p-y-2",children:Object(z.jsx)(l.a,{message:G("header.text")})}),Object(z.jsx)("div",{children:m()}),e.fileType&&Object(z.jsx)(A.a,{use:"help",className:"m-bottom-15",children:Object(z.jsx)(l.a,{message:p(e.fileType)})}),e.fileType===H.LAYOUT&&Object(z.jsx)("div",{className:"m-top-5",children:Object(z.jsxs)(P.a,{use:"inline",type:"warning",titleText:Object(z.jsx)(l.a,{message:G("dndDeprecationWarning.title")}),children:[Object(z.jsx)(l.a,{message:G("dndDeprecationWarning.text")})," ",Object(z.jsx)(_.a,{href:"https://developers.hubspot.com/docs/cms/building-blocks/templates/drag-and-drop-templates",external:!0,children:Object(z.jsx)(l.a,{message:G("dndDeprecationWarning.layoutDocsLink")})})]})})]})};K.propTypes={fileType:n.a.string,changeFileType:n.a.func.isRequired,folderInTheme:n.a.bool.isRequired,folderInFunction:n.a.bool.isRequired,hasDnDTemplateAccess:n.a.bool.isRequired,hasDataCollectorQueryAccess:n.a.bool.isRequired,initialFileType:n.a.string};var V=K,J=s(282),X=s(772),Q=s(2741),Z=s(350),ee=s(1149),te=s(758),se=s(479),ae=s(476),re=s(612),ne=s(192),oe=s(757),ie=s(1536),le=s(1538),ce=s(2775),de=s(73),pe=s(196),he=s(298),ue=s(508),me=s(495);class be extends a.PureComponent{constructor(...e){super(...e);this.getFileTypeExtension=()=>pe.a[this.props.fileType];this.handleChange=e=>{const{onChange:t}=this.props;if(!t)return;const{value:s}=e.target;t(Object(he.a)(s))}}render(){const e=Object(de.omit)(this.props,"fileType"),t=this.getFileTypeExtension(),{value:s}=this.props,a=Object(z.jsx)(ue.a,Object.assign({},e,{"data-test-id":"new-file-wizard__setup-step__name-input",onChange:this.handleChange,value:s}));return t?Object(z.jsx)(me.a,{position:"end",text:"."+t,children:a}):a}}be.propTypes={fileType:y.FilePropTypes.fileType,onChange:n.a.func,value:n.a.string};var je=s(283),fe=s(490);const Oe=g.b,ge=e=>"DesignFinderUI.modals.NewFileWizard.setupStep."+e,ye=e=>ge("templateType."+e),xe=e=>ge("templatePartialType."+e);class Ce extends a.Component{constructor(...e){super(...e);this.buildDropdownOption=({id:e,name:t,subTypes:s,templateI18nKey:a,isOptionLocked:r=(e=>e)})=>{const n=r({text:Object(c.a)(a(`options.${t}.text`)),value:e,help:Object(c.a)(a(`options.${t}.help`))});s&&(n.options=s.map(e=>this.buildDropdownOption(Object.assign({},e,{templateI18nKey:a,isOptionLocked:r}))));return n}}getTemplateTypes(){const{hasEmailAccess:e,hasSystemPagesAccess:t,hasSitePasswordAccess:s,hasSiteSearchAccess:a}=this.props;let r=[t&&Oe.error_page,s&&Oe.password_prompt_page,e&&Oe.subscription_preferences,e&&Oe.unsubscribe_simple,e&&Oe.unsubscribe_confirmation,a&&Oe.search_results].filter(Boolean);this.props.fileType===v.TEMPLATE&&this.props.hasMembershipTemplateAccess&&(r=r.concat([Oe.membership_login,Oe.membership_register,Oe.membership_reset,Oe.membership_reset_request]));const n=Object.assign({},Oe.unmapped,{subTypes:r});return[...this.props.fileType===v.LAYOUT?[Oe.blog]:[Oe.blog_listing,Oe.blog_post],Oe.email,Oe.landing_page,n].filter(Boolean)}getTemplatePartialTypes(){return[Oe.landing_page,Oe.global_content_partial]}buildTemplateTypeOptions(e){return e.map(e=>this.buildDropdownOption(Object.assign({},e,{templateI18nKey:ye,isOptionLocked:e=>this.props.hasEmailAccess||2!==e.value?e:Object.assign({},e,{icon:"locked",disabled:!0,help:Object(z.jsx)(je.a,{message:ge("templateType.options.email.message_jsx"),options:{external:!0,href:"https://www.hubspot.com/pricing"},elements:{Link:_.a}})})})))}buildTemplatePartialTypeOptions(e){return e.map(e=>this.buildDropdownOption(Object.assign({},e,{templateI18nKey:xe})))}buildTemplateTypeElement(){const{handleTemplateTypeChange:e,isAvailableForNewContent:t,onboarding:s,templateType:a}=this.props,r=this.getTemplateTypes(),n=this.buildTemplateTypeOptions(r);return Object(z.jsxs)("div",{children:[Object(z.jsx)(fe.a,{htmlFor:"templateType",children:Object(z.jsx)(l.a,{message:ye("label")})}),Object(z.jsx)(w.a,{disabled:!t||s,name:"templateType",onChange:e,options:n,placeholder:Object(c.a)(ye("placeholder")),searchable:!1,value:a})]})}buildTemplatePartialTypeElement(){const{handleTemplatePartialTypeChange:e,isAvailableForNewContent:t,onboarding:s,templatePartialType:a}=this.props,r=this.getTemplatePartialTypes(),n=this.buildTemplatePartialTypeOptions(r);return Object(z.jsxs)("div",{children:[Object(z.jsx)(fe.a,{htmlFor:"templatePartialType",children:Object(z.jsx)(l.a,{message:xe("label")})}),Object(z.jsx)(w.a,{disabled:t||s,name:"templatePartialType",onChange:e,options:n,placeholder:Object(c.a)(xe("placeholder")),searchable:!1,value:a})]})}render(){const{isAvailableForNewContent:e}=this.props;return this.props.hasGlobalContentEditorAccess&&!e?this.buildTemplatePartialTypeElement():this.buildTemplateTypeElement()}}Ce.propTypes={fileType:y.FilePropTypes.fileType.isRequired,hasEmailAccess:n.a.bool,hasSystemPagesAccess:n.a.bool,hasSitePasswordAccess:n.a.bool,hasSiteSearchAccess:n.a.bool,hasMembershipTemplateAccess:n.a.bool,isAvailableForNewContent:n.a.bool.isRequired,handleTemplateTypeChange:n.a.func.isRequired,handleTemplatePartialTypeChange:n.a.func.isRequired,templateType:n.a.number.isRequired,templatePartialType:n.a.number.isRequired,onboarding:n.a.bool,hasGlobalContentEditorAccess:n.a.bool.isRequired};var Te=Ce;const Ie=e=>"DesignFinderUI.modals.NewFileWizard.setupStep."+e,Se=e=>"DesignFinderUI.modals.NewFileWizard.selectTypeStep.fileType."+e,Fe=e=>Ie("supportedContentTypes."+e),ve=e=>Ie("templatePartialField."+e),Ee=e=>Ie("fileName."+e),Ne=e=>Ie("widgetScope."+e);function Pe(){const e=f.Nb();return function(t,s){const a=f.r(t,s);return{folderPath:e(t,s),folderSubcategory:a&&a.subcategory,hasMembershipTemplateAccess:Object(j.j)(t),hasGlobalContentEditorAccess:Object(j.h)(t)}}}class Ae extends a.Component{constructor(...e){super(...e);this.handleFileNameChange=(e,t=!0)=>{const{handleFileNameChange:s}=this.props;s(e,t)};this.handleFileNameError=e=>{this.handleFileNameChange(e,!1)};this.shouldDisableFolder=({isThemeFolder:e,isServerlessFunctionFolder:t,isLocked:s})=>{const{fileType:a}=this.props;return!!(e||t||s)&&(!(!s&&!t)||!("LAYOUT"!==a||!e))}}renderFileNameInput(){const{fileName:e,fileType:t}=this.props,s=t===H.CUSTOM_WIDGET?ne.c:ne.d;return Object(z.jsx)(oe.a,{allowEmpty:!0,excludeExtension:!0,allowEndWithExtension:!1,fileType:t,htmlFor:"fileName",label:Object(c.a)(Ee("label")),onError:this.handleFileNameError,onSuccess:this.handleFileNameChange,required:!0,children:Object(z.jsx)(be,{autoFocus:!0,fileType:t,maxLength:s,name:"fileName",placeholder:Object(c.a)(Ee("placeholder")),value:e})})}renderFileTypeSection(){const{fileType:e}=this.props;return e?Object(z.jsx)(Q.a,{label:Object(c.a)(Ie("fileTypeSection.header")),children:Object(z.jsxs)("div",{children:[Object(z.jsx)(Z.a,{className:"p-left-0",name:Object(re.b)(e)}),Object(z.jsx)(l.a,{message:Se(e)})]})}):null}renderTemplateTypeField(){const{fileType:e}=this.props;return e!==H.TEMPLATE&&e!==H.LAYOUT?null:Object(z.jsx)(Te,Object.assign({},this.props))}renderSupportedContentTypesField(){const{contentTypes:e,fileType:t,handleContentTypesChange:s,handleSupportedContentTypesChange:a,isUngatedForContentTypes:r,supportedContentTypes:n}=this.props;if(t!==H.CUSTOM_WIDGET)return null;const o=Object(z.jsx)(J.a,{message:Fe("label"),options:{component:Object(c.a)(Fe("component."+H.CUSTOM_WIDGET))}});return r?Object(z.jsx)(le.a,{contentTypes:e,onChange:s,label:o}):Object(z.jsx)(ie.a,{supportedContentTypes:n,onChange:a,label:o})}renderWidgetScopeField(){const{fileType:e,isGlobal:t,handleCustomWidgetScopeChange:s}=this.props;if(e!==H.CUSTOM_WIDGET)return null;const a=Object(z.jsx)(ee.a,{checked:!t,inline:!0,name:"local",onChange:()=>s(!1),children:Object(z.jsx)(l.a,{message:Ne("options.local")})}),r=Object(z.jsx)(se.a,{className:"m-left-3",title:Object(z.jsx)(A.a,{children:Object(z.jsx)(l.a,{message:Ne("tooltip")})}),tooltipPlacement:"top",color:B.BATTLESHIP}),n=Object(z.jsxs)(ee.a,{checked:t,inline:!0,name:"global",onChange:()=>s(!0),children:[Object(z.jsx)(l.a,{message:Ne("options.global")}),r]});return Object(z.jsx)(Q.a,{label:Object(c.a)(Ne("label")),children:Object(z.jsxs)("div",{children:[a,n]})})}renderTemplatePartialField(){const{fileType:e,isAvailableForNewContent:t,handleIsAvailableForNewContentChange:s}=this.props;if(e!==H.TEMPLATE)return null;const a=Object(z.jsx)(ee.a,{checked:t,inline:!0,name:"template",onChange:(...e)=>s(!0,...e),children:Object(z.jsx)(l.a,{message:ve("options.template")})}),r=Object(z.jsx)(se.a,{tooltipProps:{headingText:Object(c.a)(ve("help.header")),use:"longform",placement:"bottom"},className:"m-left-3",title:Object(z.jsx)(A.a,{children:Object(z.jsx)(l.a,{message:ve("help.body")})}),color:B.BATTLESHIP}),n=Object(z.jsxs)(ee.a,{checked:!t,inline:!0,name:"partial",onChange:(...e)=>s(!1,...e),children:[Object(z.jsx)(l.a,{message:ve("options.partial")}),r]});return Object(z.jsx)(Q.a,{label:Object(c.a)(ve("header")),children:Object(z.jsxs)("div",{children:[a,n]})})}renderFileLocationField(){const{folderId:e,folderPath:t,folderSubcategory:s,handleFolderChange:a}=this.props;return Object(z.jsx)(ce.a,{folderId:e,folderPath:t,folderSubcategory:s,folderDisabled:this.shouldDisableFolder,handleFolderChange:a})}render(){const{returnToStart:e,onFormSubmit:t,onboarding:s}=this.props,a=this.renderFileTypeSection(),r=this.renderFileNameInput(),n=this.renderTemplateTypeField(),o=this.renderSupportedContentTypesField(),i=this.renderTemplatePartialField(),c=this.renderWidgetScopeField(),d=this.renderFileLocationField();return Object(z.jsxs)(k.a,{children:[Object(z.jsx)(X.a,{children:Object(z.jsx)(m.a,{disabled:s,onClick:e,use:"link",children:Object(z.jsx)(l.a,{message:Ie("back")})})}),Object(z.jsx)(ae.a,{children:Object(z.jsxs)(te.a,{className:"setup-step-container",onSubmit:t,children:[a,i,n,o,c,r,d]})})]})}}Ae.propTypes={contentTypes:n.a.array,fileName:n.a.string.isRequired,fileType:y.FilePropTypes.fileType,folderId:y.FolderPropTypes.folderId.isRequired,folderPath:n.a.arrayOf(n.a.string).isRequired,folderSubcategory:y.FolderPropTypes.folderSubcategory,hasEmailAccess:n.a.bool,hasSystemPagesAccess:n.a.bool,hasSitePasswordAccess:n.a.bool,hasSiteSearchAccess:n.a.bool,hasMembershipTemplateAccess:n.a.bool,hasGlobalContentEditorAccess:n.a.bool,isAvailableForNewContent:n.a.bool,isUngatedForContentTypes:n.a.bool.isRequired,handleIsAvailableForNewContentChange:n.a.func.isRequired,handleContentTypesChange:n.a.func.isRequired,handleFileNameChange:n.a.func.isRequired,handleFolderChange:n.a.func.isRequired,handleSupportedContentTypesChange:n.a.func.isRequired,handleTemplateTypeChange:n.a.func.isRequired,handleTemplatePartialTypeChange:n.a.func.isRequired,onFormSubmit:n.a.func.isRequired,returnToStart:n.a.func.isRequired,supportedContentTypes:n.a.object,templateType:n.a.number,templatePartialType:n.a.number,onboarding:n.a.bool,handleCustomWidgetScopeChange:n.a.func.isRequired,isGlobal:n.a.bool};var Re=Object(o.connect)(Pe)(Ae),_e=s(1539);const De=g.b,Le=e=>"DesignFinderUI.modals.NewFileWizard."+e;function ke(){return(e,t)=>{const{name:s,subcategory:a,fullPath:r}=f.r(e,t);return{folderName:s,folderSubcategory:a,folderFullPath:r,folderInTheme:f.F(e,t),parentServerlessFunctionFolder:f.bb(e,t),hasEmailAccess:j.z(e),hasGlobalContentEditorAccess:Object(j.h)(e),jsRawAssetCreationUngated:Object(C.a)(e),hasDnDTemplateAccess:j.f(e),hasSystemPagesAccess:j.o(e),hasSitePasswordAccess:j.m(e),hasSiteSearchAccess:j.n(e),hasDataCollectorQueryAccess:j.e(e),isUngatedForContentTypes:Object(C.i)(e)}}}const we={createFile:O.e,createRawAsset:F};class Ue extends a.Component{constructor(e){super(e);this.handleFileTypeChange=e=>{let t={fileType:e};const{isUngatedForContentTypes:s}=this.props,a=s?{contentTypes:[]}:{supportedContentTypes:{},hostTemplateTypes:[]};switch(e){case v.LAYOUT:case v.TEMPLATE:{const e=this.getStateFromProps(this.props);t=Object.assign({},t,{templateType:this.state.templateType||e.templateType,isAvailableForNewContent:!0},a);break}case v.CUSTOM_WIDGET:case v.CSS:case v.JS:case E.MD:t=Object.assign({},t,{templateType:null,isAvailableForNewContent:!0},a,{isGlobal:!1})}this.setState(t)};this.handleReturnToStart=()=>{this.setState(Object.assign({},this.getStateFromProps(this.props),{stepIndex:0,fileType:void 0}))};this.handleFileNameChange=(e,t)=>{this.setState({fileName:e,isValidFileName:t})};this.handleTemplateTypeChange=e=>{this.setState({templateType:parseInt(e.currentTarget.value,10)})};this.handleTemplatePartialTypeChange=e=>{this.setState({templatePartialType:parseInt(e.currentTarget.value,10)})};this.handleCustomWidgetScopeChange=e=>{this.setState({isGlobal:e})};this.handleSupportedContentTypesChange=e=>{const t=Object(_e.a)(e);this.setState({supportedContentTypes:e,hostTemplateTypes:t})};this.handleContentTypesChange=e=>{this.setState({contentTypes:e})};this.handleIsAvailableForNewContentChange=e=>{const t={isAvailableForNewContent:e};this.hasGlobalContentEditorAccess||(t.templateType=De.landing_page.id);this.setState(t)};this.handleFolderChange=e=>{this.setState({folderId:e.target.value.id})};this.onCancel=()=>{this.props.callback(!1)};this.onConfirm=()=>{const{callback:e,createFile:t,parentServerlessFunctionFolder:s,folderFullPath:a,folderId:r,jsRawAssetCreationUngated:n}=this.props;s||this.state.fileType===E.MD||this.state.fileType===E.GRAPHQL||this.state.fileType===v.JS&&n?this.props.createRawAsset({fileName:`${this.state.fileName}.${this.state.fileType.toLowerCase()}`,folderPath:a,folderId:r}):t(this.state);e(this.state)};this.onFileTypeConfirm=()=>{this.setState({stepIndex:1})};this.onFormSubmit=e=>{e.preventDefault();this.validateForm()&&this.onConfirm()};this.state=this.getStateFromProps(e)}getStateFromProps(e){const{fileName:t,folderId:s,initialStep:a}=e;return{fileName:t||"",folderId:s,isValidFileName:!1,stepIndex:a,templateType:De.landing_page.id,templatePartialType:De.landing_page.id}}validateForm(){const{fileName:e,fileType:t,isValidFileName:s,templateType:a}=this.state,{isUngatedForContentTypes:r}=this.props;if(!e.trim()||!s)return!1;if(t===v.TEMPLATE&&null===a)return!1;if(t===v.CUSTOM_WIDGET){if(!(r?this.state.contentTypes:this.state.hostTemplateTypes).length)return!1}return!0}renderHeader(){const{stepIndex:e,fileType:t}=this.state,{folderName:s,folderSubcategory:a}=this.props;if(!t)return null;let r="default",n=Object.assign({},0!==this.state.stepIndex&&{fileType:Object(c.a)(Le("header.setUp."+t))});if(a!==x.DESIGN_ROOT){r="folder";n=Object.assign({},n,{folderName:i.a.SafeString(s)})}const o=0===e?"header.fileType."+r:"header.setUp.label";return Object(z.jsx)(b.a,{children:Object(z.jsx)(l.a,{message:Le(o),options:n})})}renderFooter(){const{stepIndex:e}=this.state;if(0===e)return Object(z.jsxs)(u.a,{children:[Object(z.jsx)(m.a,{"data-test-id":"new-file-wizard__next-button",disabled:!this.state.fileType,onClick:this.onFileTypeConfirm,use:"primary",children:Object(z.jsx)(l.a,{message:Le("buttons.next")})}),Object(z.jsx)(m.a,{onClick:this.onCancel,use:"secondary",children:Object(z.jsx)(l.a,{message:Le("buttons.cancel")})})]});const t=this.validateForm();return Object(z.jsxs)(u.a,{children:[Object(z.jsx)(m.a,{"data-test-id":"new-file-wizard__create-button",disabled:!t,onClick:this.onConfirm,use:"primary",children:Object(z.jsx)(l.a,{message:Le("buttons.create")})}),Object(z.jsx)(m.a,{onClick:this.onCancel,use:"secondary",children:Object(z.jsx)(l.a,{message:Le("buttons.cancel")})})]})}render(){const{hasEmailAccess:e,hasSystemPagesAccess:t,hasSitePasswordAccess:s,hasSiteSearchAccess:a,isUngatedForContentTypes:r,folderInTheme:n,parentServerlessFunctionFolder:o,onboarding:i}=this.props,{contentTypes:l,fileName:c,fileType:u,folderId:m,isAvailableForNewContent:b,isGlobal:j,templateType:f,templatePartialType:O,stepIndex:g,supportedContentTypes:y}=this.state,x=this.renderHeader(),C=this.renderFooter();return Object(z.jsxs)(d.a,{size:"auto",width:644,"data-test-id":"file-creation-modal",children:[Object(z.jsx)(h.a,{onClick:this.onCancel}),Object(z.jsxs)(p.a,{defaultHeading:x,footerComponent:()=>C,onConfirm:this.onConfirm,onReject:this.onCancel,onStepIndexChange:this.handleStepIndexChange,stepIndex:g,children:[Object(z.jsx)(V,{changeFileType:this.handleFileTypeChange,folderInTheme:n,folderInFunction:!!o,fileType:u,hasDnDTemplateAccess:this.props.hasDnDTemplateAccess,hasDataCollectorQueryAccess:this.props.hasDataCollectorQueryAccess,initialFileType:this.props.initialFileType}),Object(z.jsx)(Re,{contentTypes:l,fileName:c,fileType:u,folderId:m,hasEmailAccess:e,hasSystemPagesAccess:t,hasSitePasswordAccess:s,hasSiteSearchAccess:a,isAvailableForNewContent:b,isGlobal:j,isUngatedForContentTypes:r,handleCustomWidgetScopeChange:this.handleCustomWidgetScopeChange,handleFileNameChange:this.handleFileNameChange,handleFolderChange:this.handleFolderChange,handleIsAvailableForNewContentChange:this.handleIsAvailableForNewContentChange,handleSupportedContentTypesChange:this.handleSupportedContentTypesChange,handleContentTypesChange:this.handleContentTypesChange,handleTemplateTypeChange:this.handleTemplateTypeChange,handleTemplatePartialTypeChange:this.handleTemplatePartialTypeChange,onFormSubmit:this.onFormSubmit,onboarding:i,returnToStart:this.handleReturnToStart,supportedContentTypes:y,templateType:f,templatePartialType:O})]})]})}}Ue.propTypes={callback:n.a.func.isRequired,createFile:n.a.func.isRequired,createRawAsset:n.a.func.isRequired,initialFileType:n.a.string,fileName:n.a.string,folderId:y.FolderPropTypes.folderId.isRequired,folderName:y.FolderPropTypes.folderName,folderSubcategory:y.FolderPropTypes.folderSubcategory,folderFullPath:n.a.string,folderInTheme:n.a.bool.isRequired,parentServerlessFunctionFolder:y.FolderPropTypes.folder,hasEmailAccess:n.a.bool,hasSystemPagesAccess:n.a.bool,hasSitePasswordAccess:n.a.bool,hasSiteSearchAccess:n.a.bool,hasDataCollectorQueryAccess:n.a.bool,initialStep:n.a.number,isUngatedForContentTypes:n.a.bool.isRequired,onboarding:n.a.bool,jsRawAssetCreationUngated:n.a.bool,hasDnDTemplateAccess:n.a.bool.isRequired};Ue.defaultProps={initialStep:0};t.default=Object(o.connect)(ke,we)(Ue)},2640:function(e,t,s){"use strict";s.r(t);var a=s(40),r=s(41),n=s.n(r),o=s(59),i=s(73),l=s(279),c=s(281),d=s(99),p=s(2766),h=s(712),u=s(771),m=s(1216),b=s(2734),j=s(717),f=s(723),O=s(724),g=s(751),y=s(2688),x=s(758),C=s(443),T=s(607),I=s(2719),S=s(496),F=s(485),v=s(2679),E=s(2742),N=s(613),P=s(612),A=s(764),R=s(324),_=s(2741),D=s(2655),L=s(45);const k=e=>"DesignFinderUI.modals.shared.PortalSelection."+e;class w extends a.Component{constructor(...e){super(...e);this.handleFilterPortal=(e,t)=>{const{value:s}=e,a=this.props.portalsById[s],r=new RegExp(t,"i");return r.test(s)||r.test(a)};this.renderValue=e=>{const{text:t}=e,s=this.props.portalsById[t];return t?Object(L.jsxs)("span",{children:[t," (",s,")"]}):Object(L.jsx)("span",{children:Object(L.jsx)(l.a,{message:k("input.placeholder")})})}}render(){const{portalsById:e}=this.props,t=Object.keys(e).sort().map(t=>({text:t,help:e[t],value:+t}));return Object(L.jsx)(_.a,{label:Object(L.jsx)(l.a,{message:k("input.label")}),tooltip:Object(L.jsx)(l.a,{message:k("input.tooltip")}),tooltipPlacement:"right",children:Object(L.jsx)(D.a,{anchorType:"combined",filterOption:this.handleFilterPortal,onChange:this.props.onPortalSelect,options:t,value:this.props.selectedPortal,valueRenderer:this.renderValue,placeholder:Object(L.jsx)(l.a,{message:k("input.placeholder")})})})}}w.propTypes={onPortalSelect:n.a.func.isRequired,selectedPortal:n.a.number,portalsById:n.a.objectOf(n.a.string).isRequired};var U=w,M=s(392),q=s(198),B=s(90),H=s(200),z=s(4),W=s(61);const G=Object(W.a)({INCORRECT_EXTENSION_RESOURCE_PATH:null,INVALID_THEME_PERMISSIONS:null,MISSING_ASSET:null,PORTAL_ACCESS_PERMISSIONS:null,PURCHASED_ASSET:null,FORBIDDEN_PORTAL:null,NO_ITEMS_SELECTED:null,ITEMS_NOT_PUBLISHED:null,IDE_ACCESS_FORBIDDEN:null,UNKNOWN:null,FORBIDDEN_ASSETS:null});function Y(e){return"designdata.portalCopy.dependenciesError."+e}function $(e){return new RegExp(`CUSTOM_WIDGET ${e} is not copyable`,"i")}function K(e){if(!e)return null;try{return JSON.parse(e.xhr.responseText)}catch(e){return null}}function V(){return{message:Y("default")}}function J(e){const t=K(e),s=V();if(!t)return s;const{copyErrorType:a,identifier:r,message:n}=t;if(!G[a])return s;const o=Y("badRequest."+a);switch(a){case G.UNKNOWN:return $(r).test(n)?{message:o+".cmv2",options:{identifier:r}}:s;case G.FORBIDDEN_ASSETS:{const e=r.split(",").map(e=>`"${e.trim()}"`);return{message:o,options:{count:e.length,identifiers:z.a.formatList(e)}}}default:return{message:o,options:{identifier:r}}}}function X(e){const t=K(e);if(!t)return V();const{identifier:s}=t;return{message:Y("missingDependency"),options:{identifier:s}}}function Q(e){if(!e)throw new Error("No error provided.");switch(e.status){case H.a:return J(e);case H.c:return X(e);default:return V()}}function Z(e){switch(e){case q.LAYOUT:case q.GLOBAL_GROUP:return B.h;case q.TEMPLATE:case q.CSS:case q.JS:return B.e;case q.CUSTOM_WIDGET:return B.c;case q.GLOBAL_WIDGET:return B.m;case q.FOLDER:return B.f;case q.RAW_ASSET:return B.j;default:throw new Error(`Invalid asset type to copy. Received '${e}'.`)}}function ee(e,t){const s=e.split(".").pop(),a=s?s.toLowerCase():null;switch(t){case B.e:if("css"===a)return q.CSS;if("js"===a)return q.JS;if("html"===a)return q.TEMPLATE;break;case B.c:return q.CUSTOM_WIDGET;case B.m:return B.m;case B.j:return q.RAW_ASSET;case B.h:return q.LAYOUT}return null}function te(e){return e.type===q.CUSTOM_WIDGET?e.path+".module":e.type===q.LAYOUT||e.type===q.GLOBAL_GROUP?e.path+".template.json":e.type===q.FOLDER?"/"+e.fullPath:e.path}function se(e,t,s=!1){return e.map(e=>{let a;a=s?e.path:te(e);return{sourcePath:a,destinationPath:a,destinationPortalId:t}})}function ae(e,t,s){const a=[];Object.keys(s).forEach(r=>{e.forEach(e=>{const t=te(e);s[r].themeName===t&&a.push(e.id)});t.forEach(e=>{s[r].themeName===e.path&&a.push(e.id)})});return a}function re(e,t){return e.filter(e=>t.includes(e.path)).map(e=>e.id)}var ne=s(63),oe=s(270),ie=s(393);function le(e,t,s){const{request:a,receive:r,error:n}=le,o=se(e,s),l=se(t,s,!0),c=e.concat(t).map(e=>e.id);return s=>{s(a(c));const d=a=>{const n=ae(e,t,a);s(r(n))},p=(a,o)=>{const i=a.responseJSON||a,l=Object.values(i).filter(e=>e.status===oe.a.COMPLETE),d=ae(e,t,l);s(r(d));const p=Object.values(i).filter(e=>e.status===oe.a.FAILED),h=ae(e,t,p),u=c.filter(e=>!d.includes(e)&&!h.includes(e));s(n(h,{objects:p,forgotten:u}))};return M.a(o,l).then(e=>{if(e.conflictingDependencies.length>0){const a=re(t,e.conflictingDependencies);s(n(a,{objects:{status:"error",errorCategory:"THEME_ALREADY_EXISTS"}}))}const a=Object.values(e.requestedAssetCopyIds),r=Object.values(e.dependencyCopyIds),o=a.concat(r);Object(ie.a)(M.d,o,{statusProp:"status",success:oe.a.COMPLETE,failure:oe.a.FAILED,onSuccess:d,onFailure:p,onError:p,getStatus:e=>{const t=Object.values(e).map(e=>e.status);return Object(i.every)(t,e=>e===oe.a.COMPLETE)?oe.a.COMPLETE:Object(i.every)(t,e=>e===oe.a.COMPLETE||e===oe.a.FAILED)?oe.a.FAILED:oe.a.IN_PROGRESS}}).catch(p)}).catch(p)}}le.request=function(e){return{type:ne.FINDER_ASSETS_PORTAL_COPY_REQUEST,assetIds:e,copyStatus:oe.a.IN_PROGRESS}};le.receive=function(e){return{type:ne.FINDER_ASSETS_PORTAL_COPY_RECEIVE,assetIds:e,copyStatus:oe.a.COMPLETE}};le.error=function(e,t){return{type:ne.FINDER_ASSETS_PORTAL_COPY_ERROR,assetIds:e,copyStatus:oe.a.FAILED,error:t}};function ce(){return{type:ne.FINDER_ASSETS_PORTAL_COPY_RESET}}function de(){const{request:e,receive:t,error:s}=de;return a=>{a(e());return M.c().then(e=>{a(t(e))}).catch(e=>{a(s(e))})}}de.request=function(){return{type:ne.ASSETS_PORTAL_COPY_ACCESS_FETCH}};de.receive=function(e){return{type:ne.ASSETS_PORTAL_COPY_ACCESS_FETCH,portals:e}};de.error=function(e){return{type:ne.ASSETS_PORTAL_COPY_ACCESS_FETCH,error:e}};function pe(){return{type:ne.ASSETS_PORTAL_COPY_ACCESS_RESET}}function he(e){return{type:ne.PORTAL_COPY_REQUEST_SET_ACTIVE,requestId:e}}function ue(e,t){const{request:s,receive:a,error:r}=ue,n=t.map(e=>({id:e.id,type:Z(e.type)}));return o=>{o(he(e));o(s(e,n));return M.b(n).then(s=>{const r=s.dependencies.filter(e=>!t.some(t=>t.id===e.id));o(a(e,r));return r}).catch(t=>{o(r(e,t))})}}ue.request=(e,t)=>({type:ne.PORTAL_COPY_ASSET_DEPENDENCIES_FETCH,requestId:e,idsAndTypes:t});ue.receive=(e,t)=>({type:ne.PORTAL_COPY_ASSET_DEPENDENCIES_FETCH,requestId:e,dependencies:t});ue.error=(e,t)=>({type:ne.PORTAL_COPY_ASSET_DEPENDENCIES_FETCH,requestId:e,error:t});var me=s(65);const be=e=>e.portalCopy.activeRequestId,je=e=>e.portalCopy.isFetchingDependenciesByRequestId,fe=e=>e.portalCopy.fetchDependenciesErrorByRequestId,Oe=e=>e.portalCopy.dependenciesByRequestId,ge={getFetchPortalsForCopyInProgress:e=>e.portalCopy.assets.fetchPortalsForCopyInProgress,getFetchPortalsForCopyError:e=>e.portalCopy.assets.fetchPortalsForCopyError,getPortalsById:e=>e.portalCopy.assets.portalsById,getPortalCopyStatusById:e=>e.portalCopy.assets.portalCopyStatusById,getPortalCopyErrorById:e=>e.portalCopy.assets.portalCopyErrorById},ye=Object(me.a)([be,je],(e,t)=>e?t[e]:null),xe=Object(me.a)([be,fe],(e,t)=>e?t[e]:null),Ce=(Object(me.a)([be,Oe],(e,t)=>e?t[e]:null),Object(me.a)([be,Oe],(e,t)=>t[e]));var Te=s(2714),Ie=s(238),Se=s(231),Fe=s(610),ve=s(1544),Ee=s(1545);const Ne=e=>"DesignFinderUI.modals.PortalCopyModal."+e,Pe=[oe.a.COMPLETE,oe.a.FAILED],Ae=(e,t)=>{const{asset:s}=t,a=Object(Te.rb)(e),r=s?[s]:a,n=ge.getPortalCopyStatusById(e),o=e=>t=>n[t.id]===e;let i=oe.a.UNINITIALIZED;Object.keys(n).length&&(i=r.some(o(oe.a.IN_PROGRESS))?oe.a.IN_PROGRESS:r.some(o(oe.a.FAILED))?oe.a.FAILED:oe.a.COMPLETE);return{fetchPortalsForCopyInProgress:ge.getFetchPortalsForCopyInProgress(e),fetchPortalsForCopyError:ge.getFetchPortalsForCopyError(e),portalsById:ge.getPortalsById(e),portalCopyStatusById:n,portalCopyErrorById:ge.getPortalCopyErrorById(e),bulkPortalCopyStatus:i,assets:r,dependencies:Ce(e),fetchDependenciesError:xe(e),isFetchingDependencies:ye(e)}},Re={bulkCopyAssetsToPortal:le,resetPortalCopyStatus:ce,fetchPortalsAvailableForCopy:de,resetPortalsAvailableForCopy:pe,fetchAssetDependencies:ue};class _e extends a.Component{constructor(e){super(e);this.componentDidMount=()=>{const{assets:e}=this.props,{requestId:t}=this.state;this.props.fetchPortalsAvailableForCopy();this.props.fetchAssetDependencies(t,e)};this.componentWillUnmount=()=>{this.props.resetPortalsAvailableForCopy();this.props.resetPortalCopyStatus()};this.getAssetIconByStatus=({asset:e,assetPath:t,copyStatus:s,folderAssetType:a})=>{switch(s){case oe.a.COMPLETE:return Object(L.jsx)(v.a,{size:"xxs",name:N.t,color:R.OZ});case oe.a.FAILED:return Object(L.jsx)(v.a,{size:"xxs",name:N.u,color:R.CANDY_APPLE});default:return a===q.FOLDER?Object(L.jsx)(A.a,{isThemeFolder:Object(Se.d)(e),isServerlessFunctionFolder:Object(Ie.c)(e)}):Object(L.jsx)(v.a,{size:"xxs",name:Object(P.b)(a,t),color:R.CALYPSO})}};this.getDepIconByStatus=({depPath:e,copyStatus:t,convertedType:s})=>{switch(t){case oe.a.COMPLETE:return Object(L.jsx)(v.a,{size:"xxs",name:N.t,color:R.OZ});case oe.a.FAILED:return Object(L.jsx)(v.a,{size:"xxs",name:N.u,color:R.CANDY_APPLE});default:return Object(L.jsx)(v.a,{size:"xxs",name:Object(P.b)(s,e),color:R.CALYPSO})}};this.onPortalSelect=e=>{this.setState(()=>({selectedPortal:+e.target.value}))};this.onConfirm=()=>{const{assets:e,dependencies:t=[],bulkCopyAssetsToPortal:s}=this.props,{dependenciesIdsToNotCopy:a,selectedPortal:r}=this.state;s(e,t.filter(e=>!Object(i.some)(a,t=>t===e.id)),r)};this.onCancel=()=>{this.props.callback(!1)};this.renderAlert=()=>Object(L.jsx)(y.a,{alertStore:this.alertStore,use:"contextual"});this.renderLoadingProgress=()=>{const{bulkPortalCopyStatus:e}=this.props;return e===oe.a.IN_PROGRESS?Object(L.jsx)(m.a,{autoStart:e===oe.a.IN_PROGRESS,incrementFactor:.1,incrementInterval:500,Component:u.a}):null};this.renderLoadingOverlay=()=>{const{bulkPortalCopyStatus:e,isFetchingDependencies:t}=this.props;return t?Object(L.jsx)(h.a,{contextual:!0,label:Object(d.a)(Ne("loadingDependencies")),showLabel:!0,layout:"centered"}):e===oe.a.IN_PROGRESS?Object(L.jsx)(h.a,{contextual:!0,label:Object(d.a)(Ne("loadingText")),showLabel:!0,layout:"centered"}):null};this.renderCopyStatus=()=>{const{bulkPortalCopyStatus:e}=this.props;return Object(L.jsx)("p",{className:"m-bottom-2",children:Object(L.jsx)(l.a,{message:Ne("copyStatus."+e)})})};this.renderAssetCopyError=(e,t)=>{const{portalCopyErrorById:s}=this.props,a=s&&s[e],r=a&&(ve.a[a.subCategory]||Ee.a[a.subCategory]||a.errorCategory||"DEFAULT"),n=a&&a.context;return Object(L.jsx)(L.Fragment,{children:a?Object(L.jsx)(F.a,{use:"error",children:Object(L.jsx)(l.a,{message:Ne(`errors.AssetCopyError.${r}.message`),options:Object.assign({},n,{assetName:t})})}):null})};this.renderCheckBox=e=>{const{bulkPortalCopyStatus:t}=this.props;return t===oe.a.UNINITIALIZED?Object(L.jsx)(E.a,{"aria-label":Object(d.a)(Ne("ariaLabel")),className:"m-x-3",defaultChecked:!0,onChange:({target:{checked:t}})=>this.setState({dependenciesIdsToNotCopy:t?Object(i.without)(this.state.dependenciesIdsToNotCopy,e):this.state.dependenciesIdsToNotCopy.concat([e])}),checked:!this.state.dependenciesIdsToNotCopy.includes(e)},e):null};this.renderAssetsMap=e=>Object(L.jsx)(L.Fragment,{children:e.map(e=>{const{id:t,type:s,path:a}=e,{portalCopyStatusById:r}=this.props,n=e.label||e.name,o=r&&r[t],i=this.getAssetIconByStatus({asset:e,assetPath:a,copyStatus:o,folderAssetType:s});return Object(L.jsxs)(S.a,{itemLeft:i,align:"start",className:"m-bottom-2",children:[Object(L.jsx)("p",{className:"m-bottom-0",children:n}),this.renderAssetCopyError(t,n)]},t)})});this.renderDependenciesMap=e=>{const{portalCopyStatusById:t}=this.props;return Object(L.jsx)(L.Fragment,{children:e.map(e=>{const{id:s,type:a,path:r,name:n}=e,o=t&&t[s],i=ee(n,a),l=this.getDepIconByStatus({depPath:r,copyStatus:o,convertedType:i});return Object(L.jsxs)(S.a,{itemLeft:l,itemRight:this.renderCheckBox(s),align:"start",className:"m-bottom-2",children:[Object(L.jsx)("p",{className:"m-bottom-0",children:n}),this.renderAssetCopyError(s,n)]},s)})})};this.renderSelectedAssets=()=>{const{assets:e,dependencies:t,fetchDependenciesError:s}=this.props,a=t||[];return Object(L.jsxs)(I.a,{maxHeight:200,scrollDirection:"vertical",className:"p-left-2 p-top-1 m-bottom-2",style:{border:"1px solid "+R.BATTLESHIP},children:[Object(L.jsx)("b",{children:Object(L.jsx)(l.a,{message:Ne("header.assets")})}),this.renderAssetsMap(e),a.length>0&&Object(L.jsx)("b",{children:Object(L.jsx)(l.a,{message:Ne("header.dependencies")})}),s&&this.renderDependenciesError(),this.renderDependenciesMap(a)]})};this.renderPortalSelection=()=>{const{portalsById:e,fetchPortalsForCopyInProgress:t,bulkPortalCopyStatus:s}=this.props,{selectedPortal:a}=this.state;return t?Object(L.jsx)(b.a,{minHeight:100,layout:"centered"}):Pe.includes(s)?null:Object(L.jsx)(U,{onPortalSelect:this.onPortalSelect,selectedPortal:a,portalsById:e})};this.renderFooter=()=>{const{bulkPortalCopyStatus:e}=this.props;return Object(L.jsx)(g.a,{children:Pe.includes(e)?Object(L.jsx)(C.a,{onClick:this.onCancel,use:"primary",children:Object(L.jsx)(l.a,{message:Ne("inputs.buttons.close")})}):Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)(C.a,{disabled:!this.state.selectedPortal,onClick:this.onConfirm,use:"primary",children:Object(L.jsx)(l.a,{message:Ne("inputs.buttons.copy")})}),Object(L.jsx)(C.a,{onClick:this.onCancel,use:"secondary",children:Object(L.jsx)(l.a,{message:Ne("inputs.buttons.cancel")})})]})})};this.state={selectedPortal:null,requestId:Object(i.uniqueId)("fetch-dependencies-request-"),dependenciesIdsToNotCopy:[]}}renderDependenciesError(){const e=Q(this.props.fetchDependenciesError);return this.props.fetchDependenciesError?Object(L.jsx)("div",{children:Object(L.jsx)(S.a,{itemLeft:Object(L.jsx)(v.a,{size:"xxs",name:N.u,color:R.SLINKY}),align:"start",className:"m-bottom-2",children:Object(L.jsx)(c.a,Object.assign({},e))})}):null}render(){return Object(L.jsxs)(p.a,{width:600,children:[Object(L.jsx)(j.a,{onClick:this.onCancel}),Object(L.jsx)(f.a,{children:Object(L.jsx)(T.a,{children:Object(L.jsx)(l.a,{message:Ne("header.text")})})}),Object(L.jsxs)(x.a,{style:{position:"relative"},onSubmit:e=>e.preventDefault(),children:[this.renderLoadingProgress(),Object(L.jsxs)("div",{style:{position:"relative"},className:"m-top-1",children:[this.renderLoadingOverlay(),this.renderAlert(),Object(L.jsxs)(O.a,{className:"m-bottom-3",children:[this.renderCopyStatus(),this.renderSelectedAssets(),this.renderPortalSelection()]}),this.renderFooter()]})]})]})}}_e.propTypes={callback:n.a.func.isRequired,fetchPortalsForCopyInProgress:n.a.bool.isRequired,fetchPortalsForCopyError:n.a.object,fetchDependenciesError:n.a.object,isFetchingDependencies:n.a.bool,dependencies:n.a.array,portalsById:n.a.objectOf(n.a.string).isRequired,bulkPortalCopyStatus:n.a.string.isRequired,portalCopyStatusById:n.a.objectOf(n.a.oneOfType([n.a.object,n.a.string])).isRequired,portalCopyErrorById:n.a.objectOf(n.a.object).isRequired,bulkCopyAssetsToPortal:n.a.func.isRequired,resetPortalCopyStatus:n.a.func.isRequired,fetchPortalsAvailableForCopy:n.a.func.isRequired,resetPortalsAvailableForCopy:n.a.func.isRequired,fetchAssetDependencies:n.a.func,asset:n.a.oneOfType([Fe.FilePropTypes.file,Fe.FolderPropTypes.folder]),assets:Fe.selectedAssets};t.default=Object(o.connect)(Ae,Re)(_e)},2694:function(e,t,s){"use strict";s.r(t);var a=s(40),r=s(443),n=s(2766),o=s(723),i=s(724),l=s(751),c=s(717),d=s(2),p=s(41),h=s.n(p),u=s(287),m=s.n(u),b=s(324),j=s(302);const f=4,O=e=>`${e<0?"-":""}${Math.abs(e)*f}px`,g=(O(1),O(2),O(3),O(4),O(5),O(6),O(7),O(8),e=>{switch(e){case"all":case"x":case"y":case"top":case"right":case"bottom":case"left":return!0;default:return!1}}),y={all:["top","right","bottom","left"],x:["left","right"],y:["top","bottom"]},x=e=>y[e]||[e],C=e=>{const t={top:e+"Top",right:e+"Right",bottom:e+"Bottom",left:e+"Left"};return(e,s)=>{if("number"==typeof e&&null==s){s=e;e="all"}if(!g(e))return"";const a=O(s);return x(e).map(e=>t[e]).reduce((e,t)=>{t&&(e[t]=a);return e},{})}},T=(C("padding"),C("margin"));var I=s(45);const S=["as"],F=m.a.dl.withConfig({displayName:"UIDescriptionList__DescriptionList",componentId:"monk19-0"})(["",";dt{font-size:",";color:",";line-height:1.5;}dd{",";",";}"],T("y",0),j.db,b.SLINKY,T("left",0),T("bottom",3)),v=e=>{let t=Object(d.a)(e,S);return Object(I.jsx)(F,Object.assign({},t))};v.displayName="UIDescriptionList";v.propTypes={children:h.a.node};var E=v,N=s(2743),P=s(498),A=s(497),R=s(2679),_=s(612),D=s(194),L=s(279),k=s(236),w=s(744),U=s(2627),M=s(352),q=s(607),B=s(1507),H=s(506),z=s(411),W=s(383);const G={updated:!0,path:!0,fileType:!0,name:!0,created:!0},Y={[D.RAW_ASSET]:Object.assign({},G,{extension:!0,width:!0,height:!0,publicPath:!0,size:!0}),[D.LAYOUT]:Object.assign({},G,{templateType:!0,created:!0}),[D.TEMPLATE]:Object.assign({},G,{created:!0,templateType:!0,publicPath:!0}),[D.CUSTOM_WIDGET]:Object.assign({},G,{moduleId:!0,global:!0}),[D.GLOBAL_GROUP]:Object.assign({},G,{templateType:!0,generatedTemplatePath:!0}),[D.GLOBAL_WIDGET]:Object.assign({},G,{fileType:!0,name:!0}),[D.CSS]:Object.assign({},G,{templateType:!0,publicPath:!0}),[D.JS]:Object.assign({},G,{templateType:!0,publicPath:!0}),[D.THEME]:G},$=e=>"DesignFinderUI.modals.FileInfoModal."+e,K=({children:e})=>Object(I.jsx)("dt",{className:"m-bottom-1",style:{color:"inherit",fontWeight:600},children:e}),V=({children:e})=>Object(I.jsx)("dd",{className:"m-bottom-4",children:e}),J=m()(H.a).withConfig({displayName:"FileInfoModal__Image",componentId:"sc-18cagdq-0"})(["position:absolute;top:40px;right:40px;display:",";max-width:",";max-height:",";"],e=>void 0===e.landscape?"none !important":"block",e=>e.landscape?"128px !important":"auto",e=>e.landscape?"auto":"128px !important"),X=({created:e,updated:t,size:s,extension:d,path:p,name:h,callback:u,width:m,height:b,onModalOpen:j,id:f,fileType:O,portalId:g,generatedTemplatePath:y})=>{const[x,C]=Object(a.useState)(void 0),T=Y[O],S=T.publicPath&&(p?`{{ get_asset_url('${Object(W.a)(p)}') }}`:`{{ get_public_template_url_by_id('${f||""}') }}`),F=e=>{C(e.currentTarget.width>e.currentTarget.height)},v=()=>{const e=Object(I.jsx)(L.a,{message:$("nameLabel.typeLabel.default")});return O===D.RAW_ASSET?k[d]?Object(I.jsx)(L.a,{message:$("nameLabel.typeLabel."+d)}):e:Object(I.jsx)(L.a,{message:$("nameLabel.typeLabel."+O)})},H=()=>Object(I.jsxs)(N.a,{align:"start",spacing:"extra-small",className:"p-bottom-3",children:[Object(I.jsx)(P.a,{children:Object(I.jsx)(R.a,{name:Object(_.b)(O,p),size:20})}),Object(I.jsxs)(A.a,{style:{maxWidth:250},children:[Object(I.jsx)(M.a,{className:"m-all-0",children:h}),v()]})]}),G=()=>Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(K,{children:Object(I.jsx)(L.a,{message:$("fileInfo.size")})}),Object(I.jsx)(V,{children:Object(I.jsx)(w.a,{value:s})})]}),X=()=>Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(K,{children:Object(I.jsx)(L.a,{message:$("fileInfo.created")})}),Object(I.jsx)(V,{children:Object(I.jsx)(U.a,{format:"LLLL",value:e,type:"portalTz"})})]}),Q=()=>Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(K,{children:Object(I.jsx)(L.a,{message:$("fileInfo.modified")})}),Object(I.jsx)(V,{children:Object(I.jsx)(U.a,{format:"LLLL",value:t,type:"portalTz"})})]}),Z=()=>Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(K,{children:Object(I.jsx)(L.a,{message:$("fileInfo.dimensions")})}),Object(I.jsx)(V,{children:m&&b?Object(I.jsxs)("span",{children:[m," × ",b]}):Object(I.jsx)(L.a,{message:$("fileInfo.noDimensionInfoMessage")})}),p&&g&&t&&Object(I.jsx)(J,{alt:h,title:h,landscape:x,onLoad:F,src:Object(z.c)(p,g,t)})]}),ee=()=>Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(K,{children:Object(I.jsx)(L.a,{message:$("fileInfo.path")})}),Object(I.jsx)(V,{children:Object(I.jsx)(B.a,{value:T.generatedTemplatePath&&y?y:p})})]}),te=()=>Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(K,{children:Object(I.jsx)(L.a,{message:$("fileInfo.publicUrl")})}),Object(I.jsx)(V,{children:Object(I.jsx)(B.a,{value:S})})]});return Object(I.jsxs)(n.a,{onOpenStart:j,width:500,children:[Object(I.jsxs)(o.a,{children:[Object(I.jsx)(c.a,{onClick:u}),Object(I.jsx)(q.a,{children:Object(I.jsx)(L.a,{message:$("header.fileInfo")})})]}),Object(I.jsxs)(i.a,{style:{position:"relative",paddingTop:40},children:[T.name&&h&&H(),Object(I.jsxs)(E,{children:[T.size&&s&&G(),T.created&&"number"==typeof e&&e>0&&X(),T.updated&&"number"==typeof t&&t>0&&Q(),T.width&&T.height&&m&&b&&Z(),T.path&&p&&ee(),T.publicPath&&S&&te()]})]}),Object(I.jsx)(l.a,{children:Object(I.jsx)(r.a,{onClick:u,use:"primary",children:Object(I.jsx)(L.a,{message:$("buttons.ok")})})})]})};X.propTypes={fileType:h.a.string.isRequired,name:h.a.string.isRequired,path:h.a.string.isRequired,updated:h.a.number.isRequired,created:h.a.number,size:h.a.number,extension:h.a.string,callback:h.a.func,width:h.a.number,height:h.a.number,onModalOpen:h.a.func,id:h.a.number,portalId:h.a.number,generatedTemplatePath:h.a.string};t.default=X},2768:function(e,t,s){"use strict";s.r(t);var a=s(40),r=s(41),n=s.n(r),o=s(59),i=s(279),l=s(99),c=s(471),d=s(2766),p=s(712),h=s(771),u=s(1216),m=s(717),b=s(723),j=s(2),f=s(288),O=s.n(f),g=s(718),y=s(45);const x=["className","offsetBottom","offsetTop","style"],C=e=>{const{className:t,offsetBottom:s,offsetTop:r,style:n}=e,o=Object(j.a)(e,x),{headerCallback:i}=Object(a.useContext)(g.a),l=Object(a.useRef)(null);Object(a.useEffect)(()=>{const e=()=>{const e=-1*l.current.offsetTop;e>0&&i(e)};e();addEventListener("resize",e);return()=>{removeEventListener("resize",e)}},[]);return Object(y.jsx)("div",Object.assign({},o,{className:O()("private-modal__header-image",t),ref:l,style:Object.assign({marginBottom:s,marginTop:null!=r&&-1*r},n)}))};C.propTypes={children:n.a.node,offsetBottom:n.a.number,offsetTop:n.a.number};C.displayName="UIDialogHeaderImage";var T=C,I=s(724),S=s(751),F=s(2684),v=s(456),E=s(758),N=s(508),P=s(443),A=s(495),R=s(607),_=s(605),D=s(485),L=s(757),k=s(2775),w=s(192),U=s(610),M=s(388),q=s(2714),B=s(270);const H=e=>"DesignFinderUI.modals.NewChildThemeWizard."+e;function z(){const e=q.Nb();return function(t,s){const a=q.r(t,s),r=q.h(t)||B.a.UNINITIALIZED;return{folderPath:e(t,s),folderSubcategory:a&&a.subcategory,childThemeCreationStatus:r,childThemeCreationError:q.g(t)}}}const W=e=>({resetChildThemeCreationCopyStatus:()=>e(M.g()),createChildTheme:t=>e(M.b(t))});class G extends a.Component{constructor(e){super(e);this.componentDidUpdate=e=>{this.props.folderId!==e.folderId&&this.setState({folderId:this.props.folderId});this.props.folderPath!==e.folderPath&&this.setState({folderPath:this.props.folderPath})};this.disableFileLocationFolder=e=>e.folder.readOnly||e.isThemeFolder||e.isServerlessFunctionFolder;this.onCancel=()=>{this.props.callback(!1)};this.onFormSubmit=e=>{e.preventDefault();const{themeName:t,folderPath:s}=this.state;t&&s&&this.onConfirm()};this.onConfirm=()=>{const{childCSSName:e,childJSName:t,folderId:s,folderPath:a,themeName:r}=this.state,{baseThemeFolder:n,createChildTheme:o}=this.props;return o({themeName:r,folderPath:a,parentThemeId:s,baseThemeFolder:n,childCSSName:e,childJSName:t})};this.onThemeNameSuccess=e=>{this.setState({themeName:e})};this.onChildCSSNameSuccess=e=>{this.setState({childCSSName:e})};this.onChildJSNameSuccess=e=>{this.setState({childJSName:e})};this.onThemeSelect=e=>{this.setState({baseTheme:e.target.value})};this.onFolderChange=e=>{const t=e.target.value;t&&this.setState({folderId:t.id,folderPath:t.fullPath.split("/")})};this.renderChildThemeCreationError=()=>{const{baseThemeFolder:e,childThemeCreationError:t}=this.props,{themeName:s}=this.state,a=t&&t.path,r=e.__name,n=t&&(t.errorCategory||"DEFAULT");return Object(y.jsx)("div",{children:t&&Object.keys(t).length>0&&Object(y.jsx)(D.a,{use:"error",children:Object(y.jsx)(i.a,{message:H(`errors.${n}.message`),options:{parentThemeName:r,themeName:s,themePath:a}})})})};this.renderStatus=()=>{const{childThemeCreationStatus:e}=this.props,t=e||B.a.UNINITIALIZED;return Object(y.jsx)("p",{className:"m-bottom-2",children:Object(y.jsx)(i.a,{message:H("status."+t)})})};this.state=this.getStateFromProps(e)}componentWillUnmount(){this.props.resetChildThemeCreationCopyStatus()}getStateFromProps(e){const{themeName:t,folderPath:s,folderId:a}=e;return{baseTheme:null,themeName:t||"",childCSSName:"child",childJSName:"child",folderPath:s,folderId:a}}renderLoadingProgress(){const{childThemeCreationStatus:e}=this.props;return e===B.a.IN_PROGRESS&&Object(y.jsx)(u.a,{incrementFactor:.1,incrementInterval:500,Component:h.a})}renderLoadingState(){const{childThemeCreationStatus:e}=this.props;return e===B.a.IN_PROGRESS?Object(y.jsx)(p.a,{contextual:!0,label:Object(y.jsx)(i.a,{message:H("loadingText")}),showLabel:!0,layout:"centered"}):null}renderFileLocation(){const{folderSubcategory:e}=this.props,{folderId:t,folderPath:s}=this.state,{onFolderChange:a}=this;return Object(y.jsx)(k.a,{folderId:t,folderPath:s,folderSubcategory:e,handleFolderChange:a,onSelect:a,folderDisabled:this.disableFileLocationFolder})}renderThemeNameInput(){const{themeName:e}=this.state;return Object(y.jsx)(L.a,{allowEmpty:!0,htmlFor:"theme-name",labelClassName:"p-top-0",label:Object(l.a)(H("inputs.childThemeName.label")),onSuccess:this.onThemeNameSuccess,required:!0,children:Object(y.jsx)(N.a,{name:"theme-name",type:"text",placeholder:Object(l.a)(H("inputs.childThemeName.placeholder")),maxLength:w.d,value:e})})}renderAdvancedOptionsInput(){const{childCSSName:e,childJSName:t}=this.state;return Object(y.jsxs)(c.a,{title:"Advanced options",children:[Object(y.jsx)(L.a,{allowEmpty:!0,htmlFor:"child-css",labelClassName:"p-top-0",label:Object(l.a)(H("inputs.advancedOptions.css.label")),onSuccess:this.onChildCSSNameSuccess,required:!0,children:Object(y.jsx)(A.a,{position:"end",text:".css",children:Object(y.jsx)(N.a,{name:"theme-name",type:"text",placeholder:Object(l.a)(H("inputs.advancedOptions.css.placeholder")),maxLength:w.d,defaultValue:e})})}),Object(y.jsx)(L.a,{allowEmpty:!0,htmlFor:"child-js",labelClassName:"p-top-0",label:Object(l.a)(H("inputs.advancedOptions.js.label")),onSuccess:this.onChildJSNameSuccess,required:!0,children:Object(y.jsx)(A.a,{position:"end",text:".js",children:Object(y.jsx)(N.a,{name:"theme-name",type:"text",placeholder:Object(l.a)(H("inputs.advancedOptions.js.placeholder")),maxLength:w.d,defaultValue:t})})})]})}renderFooter(){const{themeName:e,baseTheme:t,folderPath:s}=this.state,{baseThemeFolder:r,childThemeCreationStatus:n}=this.props,o=n===B.a.COMPLETE?"buttons.close":"buttons.cancel";return Object(y.jsxs)(a.Fragment,{children:[n!==B.a.COMPLETE&&Object(y.jsx)(P.a,{"data-test-id":"new-theme__create-button",disabled:!e.trim()||!r&&!t||!s,onClick:this.onConfirm,use:"primary",children:Object(y.jsx)(i.a,{message:H("buttons.create")})}),Object(y.jsx)(P.a,{onClick:this.onCancel,use:"secondary",children:Object(y.jsx)(i.a,{message:H(o)})})]})}renderSuccessAlert(){return Object(y.jsxs)(d.a,{use:"success",width:600,children:[Object(y.jsx)(T,{offsetBottom:-30,offsetTop:59,children:Object(y.jsx)(F.a,{alt:H("successAlert.imageAlt"),name:"success-green",width:118})}),Object(y.jsxs)(b.a,{style:{textAlign:"center"},children:[Object(y.jsx)(R.a,{children:Object(y.jsx)(i.a,{message:H("successAlert.message")})}),Object(y.jsx)(m.a,{onClick:this.onCancel})]}),Object(y.jsxs)(I.a,{children:[Object(y.jsx)(_.a,{className:"is--heading-4",children:Object(y.jsx)(i.a,{message:H("successAlert.childTheme")})}),Object(y.jsxs)(v.a,{styled:!0,childClassName:"m-bottom-3",children:[Object(y.jsx)(i.a,{message:H("successAlert.childFiles")}),Object(y.jsx)(i.a,{message:H("successAlert.templates")})]})]}),Object(y.jsx)(S.a,{align:"left",children:Object(y.jsx)(P.a,{onClick:this.onCancel,use:"secondary",children:Object(y.jsx)(i.a,{message:H("buttons.close")})})})]})}render(){const{childThemeCreationStatus:e}=this.props;return e===B.a.COMPLETE?Object(y.jsx)("div",{children:this.renderSuccessAlert()}):Object(y.jsxs)(d.a,{width:600,"data-test-id":"create-child-theme-modal",children:[Object(y.jsxs)(b.a,{children:[Object(y.jsx)(m.a,{onClick:this.onCancel}),Object(y.jsx)(R.a,{children:Object(y.jsx)(i.a,{message:H("header.status."+e)})})]}),Object(y.jsxs)(E.a,{style:{position:"relative"},onSubmit:this.onFormSubmit,children:[this.renderLoadingProgress(),Object(y.jsxs)("div",{style:{position:"relative"},className:"theme-options m-top-1",children:[this.renderLoadingState(),Object(y.jsx)(I.a,{children:Object(y.jsxs)(v.a,{childClassName:"m-bottom-3",children:[this.renderStatus(),this.renderChildThemeCreationError(),this.renderThemeNameInput(),this.renderFileLocation(),this.renderAdvancedOptionsInput()]})}),Object(y.jsx)(S.a,{children:this.renderFooter()})]})]})]})}}G.propTypes={callback:n.a.func.isRequired,createChildTheme:n.a.func.isRequired,themeName:n.a.string,folderId:U.FolderPropTypes.folderId.isRequired,folderSubcategory:U.FolderPropTypes.folderSubcategory,folderPath:n.a.arrayOf(n.a.string).isRequired,childThemeCreationStatus:n.a.string,childThemeCreationError:n.a.object,baseThemeFolder:U.FolderPropTypes.folder,resetChildThemeCreationCopyStatus:n.a.func.isRequired};t.default=Object(o.connect)(z,W)(G)},2775:function(e,t,s){"use strict";var a=s(41),r=s.n(a),n=s(279),o=s(99),i=s(357),l=s(2741),c=s(350),d=s(610),p=s(230),h=s(40),u=s(298),m=s(443),b=s(453),j=s(2791),f=s(45);const O="small",g=350,y=e=>"DesignFinderUI.modals.shared.FileLocationField.folderPopover."+e,x=e=>{const[t,s]=Object(h.useState)(!1),a=e=>s(e.target.value),r=()=>s(!0),o=()=>s(!1),[i,l]=Object(h.useState)(!1),c=()=>l(!0),[d,p]=Object(h.useState)(null),x=()=>{const{onSelect:t}=e;o();t(Object(u.a)(d))},C=e=>{p(e)},T=()=>Object(f.jsx)("h4",{children:Object(f.jsx)(n.a,{message:y("header")})}),{folderDisabled:I}=e,S=()=>Object(f.jsx)(j.a,{onFolderClick:C,selectedFolderId:d&&d.id||e.selectedFolderId,scrollToSelectedFolder:i,folderDisabled:I}),F=()=>Object(f.jsxs)("div",{children:[Object(f.jsx)(m.a,{onClick:x,size:O,use:"tertiary",children:Object(f.jsx)(n.a,{message:y("footer.buttons.select")})}),Object(f.jsx)(m.a,{onClick:o,size:O,use:"tertiary-light",children:Object(f.jsx)(n.a,{message:y("footer.buttons.cancel")})})]});return Object(f.jsx)(b.a,{content:{header:T(),body:S(),footer:F()},onFocusLeave:o,onOpenChange:a,onOpenComplete:c,open:t,width:g,children:Object(f.jsx)(m.a,{onClick:r,use:"link",disabled:e.readOnly,children:Object(f.jsx)(n.a,{message:y("button.label")})})})};x.propTypes={onSelect:r.a.func.isRequired,selectedFolderId:r.a.number,folderDisabled:r.a.func,readOnly:r.a.bool};var C=x;const T=e=>"DesignFinderUI.modals.shared.FileLocationField."+e,I=({folderId:e,folderPath:t=[],folderSubcategory:s,handleFolderChange:a,folderDisabled:r,readOnly:d})=>{const h=t.length?t.join(" / "):Object(f.jsx)(n.a,{message:T("rootFolder")});let u;s&&s!==p.DESIGN_ROOT||(u=Object(f.jsx)(C,{onSelect:a,selectedFolderId:e,folderDisabled:r,readOnly:d}));return Object(f.jsx)(l.a,{label:Object(o.a)(T("label")),children:Object(f.jsxs)("div",{children:[Object(f.jsxs)(i.a,{reverse:!0,children:[Object(f.jsx)(c.a,{className:"p-left-0",name:"folderOpen"}),h]}),u]})})};I.propTypes={folderId:d.FolderPropTypes.folderId.isRequired,folderPath:r.a.arrayOf(r.a.string).isRequired,folderSubcategory:d.FolderPropTypes.folderSubcategory,handleFolderChange:r.a.func.isRequired,folderDisabled:r.a.func,readOnly:r.a.bool};t.a=I},2776:function(e,t,s){"use strict";s.r(t);var a=s(40),r=s(41),n=s.n(r),o=s(59),i=s(279),l=s(99),c=s(2766),d=s(712),p=s(771),h=s(1216),u=s(717),m=s(723),b=s(724),j=s(751),f=s(456),O=s(758),g=s(2741),y=s(508),x=s(495),C=s(443),T=s(2655),I=s(607),S=s(2688),F=s(695),v=s(757),E=s(2775),N=s(238),P=s(194),A=s(192),R=s(610),_=s(1540),D=s(1541),L=s(2714),k=Object.freeze({DELETE:"DELETE",GET:"GET",POST:"POST",PUT:"PUT",PATCH:"PATCH"}),w=s(45);const U=e=>"DesignFinderUI.modals.NewFunctionWizard."+e,M=Object.values(k).map(e=>({name:e,text:e,value:e})),q=k.GET,B={FOLDER_EXISTS:"folderExists",FUNCTION_EXISTS:"functionExists"};function H(){const e=L.Nb();return function(t,s){const a=L.r(t,s);return{folderPath:e(t,s),folderName:a.name,folderSubcategory:a&&a.subcategory,functionCreationInProgress:L.H(t),parentServerlessFunctionFolder:L.bb(t,s),selectedFolderSubfolderNames:L.t(t,s)}}}const z={createFunctionsFolder:_.c,addFunctionToFolder:_.a};class W extends a.Component{constructor(e){super(e);this.alertStore=F.a.newFloatingAlertStore();this.getFolderName=()=>{const{parentServerlessFunctionFolder:e}=this.props;return e?this.props.folderName.replace("."+N.a,""):this.state.folderName};this.displayError=(e,t)=>{this.alertStore.addAlert({message:Object(l.a)(U(`errors.${e}.message`),t),timestamp:Date.now(),titleText:Object(l.a)(U(`errors.${e}.titleText`)),type:"danger",className:"m-top-5"})};this.onCancel=()=>{this.props.callback(!1)};this.onFormSubmit=e=>{e.preventDefault();const{folderName:t,functionPath:s,jsFilename:a,method:r}=this.state;t&&s&&a&&r&&r.length&&this.onConfirm()};this.onConfirm=()=>{const{folderId:e,folderPath:t,createFunctionsFolder:s,addFunctionToFolder:a,callback:r,selectedFolderSubfolderNames:n,parentServerlessFunctionFolder:o}=this.props,{jsFilename:i,functionPath:l,method:c}=this.state,d={folderName:`${this.getFolderName()}.${N.a}`,parentFolderId:e,parentFolderPath:t,jsFilename:i+".js",functionPath:l,method:c,parentServerlessFunctionFolder:o},p=o?a:s;if(!o&&-1!==n.indexOf(d.folderName)){this.displayError(B.FOLDER_EXISTS,d);return Promise.reject(B.FOLDER_EXISTS,d)}return Object(D.b)({route:l}).then(e=>{const{objects:t}=e;if(t.length){this.displayError(B.FUNCTION_EXISTS,d);return Promise.reject(B.FUNCTION_EXISTS,d)}return p(d).then(e=>this._mounted?r(e):null)})};this.onFolderNameSuccess=e=>{this.setState({folderName:e})};this.onJsFilenameSuccess=e=>{this.setState({jsFilename:e})};this.onFunctionPathSuccess=e=>{this.setState({functionPath:e})};this.onFunctionSelect=e=>{const{value:t}=e.target,s=Array.isArray(t)&&1===t.length?t[0]:t;this.setState({method:s})};this.disableFileLocationFolder=e=>e.folder.readOnly||e.isThemeFolder||e.isServerlessFunctionFolder;this.state={folderName:"",jsFilename:"",functionPath:"",method:q}}componentDidMount(){this._mounted=!0}componentWillUnmount(){this._mounted=!1}renderMethodSelect(){return Object(w.jsx)(g.a,{label:Object(l.a)(U("inputs.method.label")),children:Object(w.jsx)(T.a,{name:"method",placeholder:Object(l.a)(U("inputs.method.placeholder")),onChange:this.onFunctionSelect,options:M,value:this.state.method,required:!0,multi:!0})})}renderFileLocation(){const{folderId:e,folderPath:t,folderSubcategory:s,onFolderChange:a}=this.props;return Object(w.jsx)(E.a,{folderId:e,folderPath:t,folderSubcategory:s,handleFolderChange:a,onSelect:a,folderDisabled:this.disableFileLocationFolder,readOnly:!!this.props.parentServerlessFunctionFolder})}renderTextInput({id:e,label:t,placeholder:s,value:a,onSuccess:r,fileType:n=null,extension:o=null,isServerlessPath:i=!1,readOnly:l=!1}){let c=Object(w.jsx)(y.a,{id:e,type:"text",placeholder:s,maxLength:A.d,defaultValue:a,readOnly:l});o&&(c=Object(w.jsx)(x.a,{position:"end",text:o,children:c}));return Object(w.jsx)(v.a,{allowEmpty:!0,htmlFor:e,fileType:n,labelClassName:"p-top-0",label:t,onSuccess:r,required:!0,isServerlessPath:i,children:c})}renderFolderNameInput(){const{parentServerlessFunctionFolder:e}=this.props;return this.renderTextInput({id:"function-folder-name",label:Object(l.a)(U("inputs.folderName.label")),onSuccess:this.onFolderNameSuccess,placeholder:Object(l.a)(U("inputs.folderName.placeholder")),value:this.getFolderName(),extension:"."+N.a,readOnly:!!e})}renderJsFilenameInput(){return this.renderTextInput({id:"function-js-filename",label:Object(l.a)(U("inputs.jsFilename.label")),onSuccess:this.onJsFilenameSuccess,placeholder:Object(l.a)(U("inputs.jsFilename.placeholder")),fileType:P.RAW_ASSET,value:this.state.jsFilename,extension:".js"})}renderFunctionPathInput(){return this.renderTextInput({id:"function-function-path",label:Object(l.a)(U("inputs.functionPath.label")),onSuccess:this.onFunctionPathSuccess,placeholder:Object(l.a)(U("inputs.functionPath.placeholder")),value:this.state.functionPath,extension:null,isServerlessPath:!0})}renderLoadingProgress(){return this.props.functionCreationInProgress?Object(w.jsx)(h.a,{autoStart:this.state.functionCreationInProgress,incrementFactor:.1,incrementInterval:500,Component:p.a}):null}renderLoadingState(){return this.props.functionCreationInProgress?Object(w.jsx)(d.a,{contextual:!0,label:Object(l.a)(U("loadingText")),showLabel:!0,layout:"centered"}):null}renderFooter(){const{jsFilename:e,functionPath:t,method:s}=this.state,a=!(this.getFolderName().trim()&&e.trim()&&t.trim()&&s&&s.length);return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(C.a,{"data-test-id":"new-function__create-button",disabled:a,onClick:this.onConfirm,use:"primary",children:Object(w.jsx)(i.a,{message:U("buttons.create")})}),Object(w.jsx)(C.a,{onClick:this.onCancel,use:"secondary",children:Object(w.jsx)(i.a,{message:U("buttons.cancel")})})]})}renderAlertContainer(){return Object(w.jsx)(S.a,{alertStore:this.alertStore,use:"contextual"})}render(){return Object(w.jsxs)(c.a,{width:600,"data-test-id":"new-function-modal",children:[Object(w.jsxs)(m.a,{children:[Object(w.jsx)(u.a,{onClick:this.onCancel}),Object(w.jsx)(I.a,{children:Object(w.jsx)(i.a,{message:U("header")})})]}),Object(w.jsxs)(O.a,{style:{position:"relative"},onSubmit:this.onFormSubmit,children:[this.renderLoadingProgress(),Object(w.jsxs)("div",{style:{position:"relative"},className:"m-top-1",children:[this.renderLoadingState(),this.renderAlertContainer(),Object(w.jsx)(b.a,{children:Object(w.jsxs)(f.a,{childClassName:"m-bottom-3",children:[this.renderFolderNameInput(),this.renderFileLocation(),this.renderJsFilenameInput(),this.renderFunctionPathInput(),this.renderMethodSelect()]})}),Object(w.jsx)(j.a,{children:this.renderFooter()})]})]})]})}}W.propTypes={callback:n.a.func.isRequired,createFunctionsFolder:n.a.func.isRequired,addFunctionToFolder:n.a.func.isRequired,folderId:R.FolderPropTypes.folderId.isRequired,folderSubcategory:R.FolderPropTypes.folderSubcategory,folderPath:n.a.arrayOf(n.a.string).isRequired,folderName:n.a.string,onFolderChange:n.a.func.isRequired,functionCreationInProgress:n.a.bool.isRequired,parentServerlessFunctionFolder:R.FolderPropTypes.folder,selectedFolderSubfolderNames:n.a.array.isRequired};t.default=Object(o.connect)(H,z)(W)},2791:function(e,t,s){"use strict";var a=s(40),r=s(59),n=s(41),o=s.n(n),i=s(0),l=s(610),c=s(2714),d=s(2691),p=s(1121),h=s(1439),u=s(73),m=s(2683),b=s(230),j=s(242),f=s(191),O=s(756),g=s(450),y=s(764),x=s(45);function C(){const e=c.Lb(),t=c.Rb(),s=c.Tb(),a=c.Kb();return function(r,n){const o=c.r(r,n);return{folder:o,folderContents:a(r,n),folderContentsOrder:e(r,n),isFetchingContents:t(r,n),isLocked:c.L(r,n),isRootFolder:o&&o.subcategory===b.DESIGN_ROOT,isThemeFolder:c.T(r,n),isUserFolder:s(r,n),isServerlessFunctionFolder:c.Q(r,n)}}}const T={fetchContents:m.j};class I extends a.PureComponent{constructor(...e){super(...e);this.handleClick=e=>{if(!(this.props.isLocked||this.props.isAncestorLocked)){e.stopPropagation();this.props.onClick(this.props.folder)}};this.handleOpenChange=e=>{const{isFetchingContents:t}=this.props,{value:s}=e.target;s&&Object(f.a)(t)&&this.fetchContents()}}get defaultOpen(){const{defaultOpenFolderIds:e,folderId:t}=this.props;return!!~e.indexOf(t)}get disabled(){const{disabled:e,folder:t}=this.props;return!!t.readOnly||"function"==typeof e&&e(this.props)}fetchContents(){this.props.fetchContents(this.props.folderId)}renderChildren(){const{defaultOpenFolderIds:e,fileComponent:t,folderContents:s,folderContentsOrder:a,isAncestorLocked:r,isLocked:n,onClick:o,subfolderComponent:i,disabled:l}=this.props,{files:c,subfolders:d}=s;return a.reduce((s,a)=>{let p;if(~c.indexOf(a))p=g.b(t,{key:a,fileId:a,value:a});else{if(!~d.indexOf(a))return s;p=g.b(i,{key:a,defaultOpenFolderIds:e,fileComponent:t,folderId:a,onClick:o,subfolderComponent:i,value:a,isAncestorLocked:n||r,disabled:l})}return[...s,p]},[])}renderFolderIcon(){const{isThemeFolder:e,isLocked:t,isAncestorLocked:s,isServerlessFunctionFolder:a,folder:r}=this.props;return n=>Object(x.jsx)(y.a,Object.assign({isAncestorLocked:s,isLocked:t,isThemeFolder:e,isServerlessFunctionFolder:a,isReadOnly:r.readOnly},n))}render(){const{folder:e,folderId:t,isRootFolder:s,isUserFolder:a}=this.props;return s||a?Object(x.jsx)(O.a,Object.assign({},Object(u.pick)(this.props,Object.keys(O.a.propTypes)),{"data-folder-navigator-id":e.name,"data-folder-id":t,defaultOpen:this.defaultOpen,iconLeft:this.renderFolderIcon(),onClick:this.handleClick,onOpenChange:this.handleOpenChange,title:s?"/":e.name,value:t,disabled:this.disabled,children:this.renderChildren()})):null}}I.propTypes={defaultOpenFolderIds:o.a.arrayOf(o.a.number).isRequired,fileComponent:g.a.isRequired,folder:o.a.instanceOf(j.a).isRequired,folderContents:o.a.shape({files:o.a.arrayOf(l.FolderPropTypes.folderId).isRequired,subfolders:o.a.arrayOf(l.FolderPropTypes.folderId).isRequired}).isRequired,folderContentsOrder:o.a.arrayOf(l.FolderPropTypes.folderId).isRequired,folderId:l.FolderPropTypes.folderId.isRequired,fetchContents:o.a.func.isRequired,isAncestorLocked:o.a.bool,isFetchingContents:o.a.bool,isLocked:o.a.bool,isRootFolder:o.a.bool,isServerlessFunctionFolder:o.a.bool,isThemeFolder:o.a.bool,isUserFolder:o.a.bool,onClick:o.a.func.isRequired,subfolderComponent:g.a.isRequired,disabled:o.a.func};I.defaultProps={fileComponent:()=>null,folderContents:{files:[],subfolders:[]},subfolderComponent:()=>null};var S=Object(r.connect)(C,T)(I);function F(){const e=c.Jb();return function(t,s){const{selectedFolderId:a}=s;return{defaultOpenFolderIds:e(t,{folderId:a}),rootFolderId:c.kb(t)}}}class v extends a.PureComponent{constructor(...e){super(...e);this.scrollToSelectedFolder=()=>{const{selectedFolderId:e}=this.props;if(this._navigator){const t=Object(i.findDOMNode)(this._navigator).querySelector(`[data-folder-id="${e}"]`);t&&t.scrollIntoView()}}}componentDidMount(){this.props.scrollToSelectedFolder&&this.scrollToSelectedFolder()}componentDidUpdate(e){!e.scrollToSelectedFolder&&this.props.scrollToSelectedFolder&&this.scrollToSelectedFolder()}render(){const{defaultOpenFolderIds:e,onFolderClick:t,rootFolderId:s,selectedFolderId:a,folderDisabled:r}=this.props;return Object(x.jsx)(p.a,{ref:e=>{this._navigator=e},className:"folder-navigator-tile",children:Object(x.jsx)(h.a,{className:"p-all-0",children:Object(x.jsx)(d.a,{value:a,children:Object(x.jsx)(S,{defaultOpenFolderIds:e,folderId:s,onClick:t,subfolderComponent:S,value:s,disabled:r})})})})}}v.propTypes={defaultOpenFolderIds:o.a.arrayOf(o.a.number),onFolderClick:o.a.func.isRequired,rootFolderId:l.FolderPropTypes.folderId.isRequired,selectedFolderId:o.a.number,scrollToSelectedFolder:o.a.bool.isRequired,folderDisabled:o.a.func};t.a=Object(r.connect)(F)(v)}}]);
//# sourceMappingURL=//static.hsappstatic.net/DesignManagerIde/static-2.61259/modals.js.map